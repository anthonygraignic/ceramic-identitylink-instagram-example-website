var OS=Object.defineProperty,$S=Object.defineProperties;var RS=Object.getOwnPropertyDescriptors;var Zu=Object.getOwnPropertySymbols;var N1=Object.prototype.hasOwnProperty,O1=Object.prototype.propertyIsEnumerable;var $1=(t,e,r)=>e in t?OS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ye=(t,e)=>{for(var r in e||(e={}))N1.call(e,r)&&$1(t,r,e[r]);if(Zu)for(var r of Zu(e))O1.call(e,r)&&$1(t,r,e[r]);return t},mr=(t,e)=>$S(t,RS(e));var R1=(t,e)=>{var r={};for(var n in t)N1.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Zu)for(var n of Zu(t))e.indexOf(n)<0&&O1.call(t,n)&&(r[n]=t[n]);return r};function pa(){}function CS(t,e){for(const r in e)t[r]=e[r];return t}function C1(t){return t()}function L1(){return Object.create(null)}function As(t){t.forEach(C1)}function LS(t){return typeof t=="function"}function DS(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Qu;function Nz(t,e){return Qu||(Qu=document.createElement("a")),Qu.href=e,t===Qu.href}function BS(t){return Object.keys(t).length===0}function D1(t,...e){if(t==null)return pa;const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function Oz(t){let e;return D1(t,r=>e=r)(),e}function $z(t,e,r){t.$$.on_destroy.push(D1(e,r))}function Rz(t,e,r,n){if(t){const i=B1(t,e,r,n);return t[0](i)}}function B1(t,e,r,n){return t[1]&&n?CS(r.ctx.slice(),t[1](n(e))):r.ctx}function Cz(t,e,r,n){if(t[2]&&n){const i=t[2](n(r));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],a=Math.max(e.dirty.length,i.length);for(let s=0;s<a;s+=1)o[s]=e.dirty[s]|i[s];return o}return e.dirty|i}return e.dirty}function Lz(t,e,r,n,i,o){if(i){const a=B1(e,r,n,o);t.p(a,i)}}function Dz(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let n=0;n<r;n++)e[n]=-1;return e}return-1}let ef=!1;function US(){ef=!0}function FS(){ef=!1}function jS(t,e,r,n){for(;t<e;){const i=t+(e-t>>1);r(i)<=n?t=i+1:e=i}return t}function zS(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const u=[];for(let f=0;f<e.length;f++){const c=e[f];c.claim_order!==void 0&&u.push(c)}e=u}const r=new Int32Array(e.length+1),n=new Int32Array(e.length);r[0]=-1;let i=0;for(let u=0;u<e.length;u++){const f=e[u].claim_order,c=(i>0&&e[r[i]].claim_order<=f?i+1:jS(1,i,b=>e[r[b]].claim_order,f))-1;n[u]=r[c]+1;const h=c+1;r[h]=u,i=Math.max(h,i)}const o=[],a=[];let s=e.length-1;for(let u=r[i]+1;u!=0;u=n[u-1]){for(o.push(e[u-1]);s>=u;s--)a.push(e[s]);s--}for(;s>=0;s--)a.push(e[s]);o.reverse(),a.sort((u,f)=>u.claim_order-f.claim_order);for(let u=0,f=0;u<a.length;u++){for(;f<o.length&&a[u].claim_order>=o[f].claim_order;)f++;const c=f<o.length?o[f]:null;t.insertBefore(a[u],c)}}function qS(t,e){if(ef){for(zS(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function Bz(t,e,r){ef&&!r?qS(t,e):(e.parentNode!==t||e.nextSibling!=r)&&t.insertBefore(e,r||null)}function GS(t){t.parentNode.removeChild(t)}function HS(t){return document.createElement(t)}function WS(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function vh(t){return document.createTextNode(t)}function Uz(){return vh(" ")}function Fz(){return vh("")}function jz(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function zz(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function KS(t){return Array.from(t.childNodes)}function VS(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function U1(t,e,r,n,i=!1){VS(t);const o=(()=>{for(let a=t.claim_info.last_index;a<t.length;a++){const s=t[a];if(e(s)){const u=r(s);return u===void 0?t.splice(a,1):t[a]=u,i||(t.claim_info.last_index=a),s}}for(let a=t.claim_info.last_index-1;a>=0;a--){const s=t[a];if(e(s)){const u=r(s);return u===void 0?t.splice(a,1):t[a]=u,i?u===void 0&&t.claim_info.last_index--:t.claim_info.last_index=a,s}}return n()})();return o.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,o}function F1(t,e,r,n){return U1(t,i=>i.nodeName===e,i=>{const o=[];for(let a=0;a<i.attributes.length;a++){const s=i.attributes[a];r[s.name]||o.push(s.name)}o.forEach(a=>i.removeAttribute(a))},()=>n(e))}function qz(t,e,r){return F1(t,e,r,HS)}function Gz(t,e,r){return F1(t,e,r,WS)}function JS(t,e){return U1(t,r=>r.nodeType===3,r=>{const n=""+e;if(r.data.startsWith(n)){if(r.data.length!==n.length)return r.splitText(n.length)}else r.data=n},()=>vh(e),!0)}function Hz(t){return JS(t," ")}function Wz(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Kz(t,e){t.value=e==null?"":e}function Vz(t,e=document.body){return Array.from(e.querySelectorAll(t))}let tf;function rf(t){tf=t}function nf(){if(!tf)throw new Error("Function called outside component initialization");return tf}function Jz(t){nf().$$.on_mount.push(t)}function Yz(t){nf().$$.after_update.push(t)}function Xz(t,e){nf().$$.context.set(t,e)}function Zz(t){return nf().$$.context.get(t)}const Is=[],j1=[],of=[],z1=[],YS=Promise.resolve();let mh=!1;function XS(){mh||(mh=!0,YS.then(q1))}function bh(t){of.push(t)}let yh=!1;const gh=new Set;function q1(){if(!yh){yh=!0;do{for(let t=0;t<Is.length;t+=1){const e=Is[t];rf(e),ZS(e.$$)}for(rf(null),Is.length=0;j1.length;)j1.pop()();for(let t=0;t<of.length;t+=1){const e=of[t];gh.has(e)||(gh.add(e),e())}of.length=0}while(Is.length);for(;z1.length;)z1.pop()();mh=!1,yh=!1,gh.clear()}}function ZS(t){if(t.fragment!==null){t.update(),As(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(bh)}}const af=new Set;let wo;function Qz(){wo={r:0,c:[],p:wo}}function eq(){wo.r||As(wo.c),wo=wo.p}function QS(t,e){t&&t.i&&(af.delete(t),t.i(e))}function tq(t,e,r,n){if(t&&t.o){if(af.has(t))return;af.add(t),wo.c.push(()=>{af.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function rq(t,e){const r={},n={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const u in a)u in s||(n[u]=1);for(const u in s)i[u]||(r[u]=s[u],i[u]=1);t[o]=s}else for(const u in a)i[u]=1}for(const a in n)a in r||(r[a]=void 0);return r}function nq(t){return typeof t=="object"&&t!==null?t:{}}function iq(t){t&&t.c()}function oq(t,e){t&&t.l(e)}function e4(t,e,r,n){const{fragment:i,on_mount:o,on_destroy:a,after_update:s}=t.$$;i&&i.m(e,r),n||bh(()=>{const u=o.map(C1).filter(LS);a?a.push(...u):As(u),t.$$.on_mount=[]}),s.forEach(bh)}function t4(t,e){const r=t.$$;r.fragment!==null&&(As(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function r4(t,e){t.$$.dirty[0]===-1&&(Is.push(t),XS(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function aq(t,e,r,n,i,o,a,s=[-1]){const u=tf;rf(t);const f=t.$$={fragment:null,ctx:null,props:o,update:pa,not_equal:i,bound:L1(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:L1(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};a&&a(f.root);let c=!1;if(f.ctx=r?r(t,e.props||{},(h,b,...w)=>{const A=w.length?w[0]:b;return f.ctx&&i(f.ctx[h],f.ctx[h]=A)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](A),c&&r4(t,h)),b}):[],f.update(),c=!0,As(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){US();const h=KS(e.target);f.fragment&&f.fragment.l(h),h.forEach(GS)}else f.fragment&&f.fragment.c();e.intro&&QS(t.$$.fragment),e4(t,e.target,e.anchor,e.customElement),FS(),q1()}rf(u)}class sq{$destroy(){t4(this,1),this.$destroy=pa}$on(e,r){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!BS(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const va=[];function uq(t,e=pa){let r;const n=new Set;function i(s){if(DS(t,s)&&(t=s,r)){const u=!va.length;for(const f of n)f[1](),va.push(f,t);if(u){for(let f=0;f<va.length;f+=2)va[f][0](va[f+1]);va.length=0}}}function o(s){i(s(t))}function a(s,u=pa){const f=[s,u];return n.add(f),n.size===1&&(r=e(i)||pa),s(t),()=>{n.delete(f),n.size===0&&(r(),r=null)}}return{set:i,update:o,subscribe:a}}var te=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function $t(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),e}function n4(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tn={exports:{}};(function(t){(function(e,r){function n($,m){if(!$)throw new Error(m||"Assertion failed")}function i($,m){$.super_=m;var E=function(){};E.prototype=m.prototype,$.prototype=new E,$.prototype.constructor=$}function o($,m,E){if(o.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((m==="le"||m==="be")&&(E=m,m=10),this._init($||0,m||10,E||"be"))}typeof e=="object"?e.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?a=window.Buffer:a=require("buffer").Buffer}catch{}o.isBN=function(m){return m instanceof o?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===o.wordSize&&Array.isArray(m.words)},o.max=function(m,E){return m.cmp(E)>0?m:E},o.min=function(m,E){return m.cmp(E)<0?m:E},o.prototype._init=function(m,E,y){if(typeof m=="number")return this._initNumber(m,E,y);if(typeof m=="object")return this._initArray(m,E,y);E==="hex"&&(E=16),n(E===(E|0)&&E>=2&&E<=36),m=m.toString().replace(/\s+/g,"");var g=0;m[0]==="-"&&(g++,this.negative=1),g<m.length&&(E===16?this._parseHex(m,g,y):(this._parseBase(m,E,g),y==="le"&&this._initArray(this.toArray(),E,y)))},o.prototype._initNumber=function(m,E,y){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(n(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),E,y)},o.prototype._initArray=function(m,E,y){if(n(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var M,R,v=0;if(y==="be")for(g=m.length-1,M=0;g>=0;g-=3)R=m[g]|m[g-1]<<8|m[g-2]<<16,this.words[M]|=R<<v&67108863,this.words[M+1]=R>>>26-v&67108863,v+=24,v>=26&&(v-=26,M++);else if(y==="le")for(g=0,M=0;g<m.length;g+=3)R=m[g]|m[g+1]<<8|m[g+2]<<16,this.words[M]|=R<<v&67108863,this.words[M+1]=R>>>26-v&67108863,v+=24,v>=26&&(v-=26,M++);return this.strip()};function s($,m){var E=$.charCodeAt(m);return E>=65&&E<=70?E-55:E>=97&&E<=102?E-87:E-48&15}function u($,m,E){var y=s($,E);return E-1>=m&&(y|=s($,E-1)<<4),y}o.prototype._parseHex=function(m,E,y){this.length=Math.ceil((m.length-E)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var M=0,R=0,v;if(y==="be")for(g=m.length-1;g>=E;g-=2)v=u(m,E,g)<<M,this.words[R]|=v&67108863,M>=18?(M-=18,R+=1,this.words[R]|=v>>>26):M+=8;else{var d=m.length-E;for(g=d%2==0?E+1:E;g<m.length;g+=2)v=u(m,E,g)<<M,this.words[R]|=v&67108863,M>=18?(M-=18,R+=1,this.words[R]|=v>>>26):M+=8}this.strip()};function f($,m,E,y){for(var g=0,M=Math.min($.length,E),R=m;R<M;R++){var v=$.charCodeAt(R)-48;g*=y,v>=49?g+=v-49+10:v>=17?g+=v-17+10:g+=v}return g}o.prototype._parseBase=function(m,E,y){this.words=[0],this.length=1;for(var g=0,M=1;M<=67108863;M*=E)g++;g--,M=M/E|0;for(var R=m.length-y,v=R%g,d=Math.min(R,R-v)+y,l=0,x=y;x<d;x+=g)l=f(m,x,x+g,E),this.imuln(M),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(v!==0){var B=1;for(l=f(m,x,m.length,E),x=0;x<v;x++)B*=E;this.imuln(B),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(m){m.words=new Array(this.length);for(var E=0;E<this.length;E++)m.words[E]=this.words[E];m.length=this.length,m.negative=this.negative,m.red=this.red},o.prototype.clone=function(){var m=new o(null);return this.copy(m),m},o.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(m,E){m=m||10,E=E|0||1;var y;if(m===16||m==="hex"){y="";for(var g=0,M=0,R=0;R<this.length;R++){var v=this.words[R],d=((v<<g|M)&16777215).toString(16);M=v>>>24-g&16777215,M!==0||R!==this.length-1?y=c[6-d.length]+d+y:y=d+y,g+=2,g>=26&&(g-=26,R--)}for(M!==0&&(y=M.toString(16)+y);y.length%E!=0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(m===(m|0)&&m>=2&&m<=36){var l=h[m],x=b[m];y="";var B=this.clone();for(B.negative=0;!B.isZero();){var H=B.modn(x).toString(m);B=B.idivn(x),B.isZero()?y=H+y:y=c[l-H.length]+H+y}for(this.isZero()&&(y="0"+y);y.length%E!=0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(m,E){return n(typeof a!="undefined"),this.toArrayLike(a,m,E)},o.prototype.toArray=function(m,E){return this.toArrayLike(Array,m,E)},o.prototype.toArrayLike=function(m,E,y){var g=this.byteLength(),M=y||Math.max(1,g);n(g<=M,"byte array longer than desired length"),n(M>0,"Requested array length <= 0"),this.strip();var R=E==="le",v=new m(M),d,l,x=this.clone();if(R){for(l=0;!x.isZero();l++)d=x.andln(255),x.iushrn(8),v[l]=d;for(;l<M;l++)v[l]=0}else{for(l=0;l<M-g;l++)v[l]=0;for(l=0;!x.isZero();l++)d=x.andln(255),x.iushrn(8),v[M-l-1]=d}return v},Math.clz32?o.prototype._countBits=function(m){return 32-Math.clz32(m)}:o.prototype._countBits=function(m){var E=m,y=0;return E>=4096&&(y+=13,E>>>=13),E>=64&&(y+=7,E>>>=7),E>=8&&(y+=4,E>>>=4),E>=2&&(y+=2,E>>>=2),y+E},o.prototype._zeroBits=function(m){if(m===0)return 26;var E=m,y=0;return(E&8191)==0&&(y+=13,E>>>=13),(E&127)==0&&(y+=7,E>>>=7),(E&15)==0&&(y+=4,E>>>=4),(E&3)==0&&(y+=2,E>>>=2),(E&1)==0&&y++,y},o.prototype.bitLength=function(){var m=this.words[this.length-1],E=this._countBits(m);return(this.length-1)*26+E};function w($){for(var m=new Array($.bitLength()),E=0;E<m.length;E++){var y=E/26|0,g=E%26;m[E]=($.words[y]&1<<g)>>>g}return m}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,E=0;E<this.length;E++){var y=this._zeroBits(this.words[E]);if(m+=y,y!==26)break}return m},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},o.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var E=0;E<m.length;E++)this.words[E]=this.words[E]|m.words[E];return this.strip()},o.prototype.ior=function(m){return n((this.negative|m.negative)==0),this.iuor(m)},o.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},o.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},o.prototype.iuand=function(m){var E;this.length>m.length?E=m:E=this;for(var y=0;y<E.length;y++)this.words[y]=this.words[y]&m.words[y];return this.length=E.length,this.strip()},o.prototype.iand=function(m){return n((this.negative|m.negative)==0),this.iuand(m)},o.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},o.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},o.prototype.iuxor=function(m){var E,y;this.length>m.length?(E=this,y=m):(E=m,y=this);for(var g=0;g<y.length;g++)this.words[g]=E.words[g]^y.words[g];if(this!==E)for(;g<E.length;g++)this.words[g]=E.words[g];return this.length=E.length,this.strip()},o.prototype.ixor=function(m){return n((this.negative|m.negative)==0),this.iuxor(m)},o.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},o.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},o.prototype.inotn=function(m){n(typeof m=="number"&&m>=0);var E=Math.ceil(m/26)|0,y=m%26;this._expand(E),y>0&&E--;for(var g=0;g<E;g++)this.words[g]=~this.words[g]&67108863;return y>0&&(this.words[g]=~this.words[g]&67108863>>26-y),this.strip()},o.prototype.notn=function(m){return this.clone().inotn(m)},o.prototype.setn=function(m,E){n(typeof m=="number"&&m>=0);var y=m/26|0,g=m%26;return this._expand(y+1),E?this.words[y]=this.words[y]|1<<g:this.words[y]=this.words[y]&~(1<<g),this.strip()},o.prototype.iadd=function(m){var E;if(this.negative!==0&&m.negative===0)return this.negative=0,E=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,E=this.isub(m),m.negative=1,E._normSign();var y,g;this.length>m.length?(y=this,g=m):(y=m,g=this);for(var M=0,R=0;R<g.length;R++)E=(y.words[R]|0)+(g.words[R]|0)+M,this.words[R]=E&67108863,M=E>>>26;for(;M!==0&&R<y.length;R++)E=(y.words[R]|0)+M,this.words[R]=E&67108863,M=E>>>26;if(this.length=y.length,M!==0)this.words[this.length]=M,this.length++;else if(y!==this)for(;R<y.length;R++)this.words[R]=y.words[R];return this},o.prototype.add=function(m){var E;return m.negative!==0&&this.negative===0?(m.negative=0,E=this.sub(m),m.negative^=1,E):m.negative===0&&this.negative!==0?(this.negative=0,E=m.sub(this),this.negative=1,E):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},o.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var E=this.iadd(m);return m.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var y=this.cmp(m);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,M;y>0?(g=this,M=m):(g=m,M=this);for(var R=0,v=0;v<M.length;v++)E=(g.words[v]|0)-(M.words[v]|0)+R,R=E>>26,this.words[v]=E&67108863;for(;R!==0&&v<g.length;v++)E=(g.words[v]|0)+R,R=E>>26,this.words[v]=E&67108863;if(R===0&&v<g.length&&g!==this)for(;v<g.length;v++)this.words[v]=g.words[v];return this.length=Math.max(this.length,v),g!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(m){return this.clone().isub(m)};function A($,m,E){E.negative=m.negative^$.negative;var y=$.length+m.length|0;E.length=y,y=y-1|0;var g=$.words[0]|0,M=m.words[0]|0,R=g*M,v=R&67108863,d=R/67108864|0;E.words[0]=v;for(var l=1;l<y;l++){for(var x=d>>>26,B=d&67108863,H=Math.min(l,m.length-1),D=Math.max(0,l-$.length+1);D<=H;D++){var k=l-D|0;g=$.words[k]|0,M=m.words[D]|0,R=g*M+B,x+=R/67108864|0,B=R&67108863}E.words[l]=B|0,d=x|0}return d!==0?E.words[l]=d|0:E.length--,E.strip()}var _=function(m,E,y){var g=m.words,M=E.words,R=y.words,v=0,d,l,x,B=g[0]|0,H=B&8191,D=B>>>13,k=g[1]|0,Z=k&8191,z=k>>>13,K=g[2]|0,W=K&8191,S=K>>>13,J=g[3]|0,ne=J&8191,ae=J>>>13,ue=g[4]|0,de=ue&8191,q=ue>>>13,N=g[5]|0,O=N&8191,Y=N>>>13,ee=g[6]|0,re=ee&8191,ie=ee>>>13,pe=g[7]|0,le=pe&8191,he=pe>>>13,xe=g[8]|0,se=xe&8191,_e=xe>>>13,$e=g[9]|0,Se=$e&8191,Pe=$e>>>13,Ye=M[0]|0,be=Ye&8191,ke=Ye>>>13,rt=M[1]|0,nt=rt&8191,et=rt>>>13,Ot=M[2]|0,Me=Ot&8191,at=Ot>>>13,er=M[3]|0,st=er&8191,Re=er>>>13,wt=M[4]|0,Ne=wt&8191,Fe=wt>>>13,It=M[5]|0,Ce=It&8191,Le=It>>>13,Oe=M[6]|0,je=Oe&8191,ze=Oe>>>13,Pt=M[7]|0,De=Pt&8191,Be=Pt>>>13,ut=M[8]|0,Ue=ut&8191,Ee=ut>>>13,kn=M[9]|0,yt=kn&8191,gt=kn>>>13;y.negative=m.negative^E.negative,y.length=19,d=Math.imul(H,be),l=Math.imul(H,ke),l=l+Math.imul(D,be)|0,x=Math.imul(D,ke);var tr=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(tr>>>26)|0,tr&=67108863,d=Math.imul(Z,be),l=Math.imul(Z,ke),l=l+Math.imul(z,be)|0,x=Math.imul(z,ke),d=d+Math.imul(H,nt)|0,l=l+Math.imul(H,et)|0,l=l+Math.imul(D,nt)|0,x=x+Math.imul(D,et)|0;var on=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(W,be),l=Math.imul(W,ke),l=l+Math.imul(S,be)|0,x=Math.imul(S,ke),d=d+Math.imul(Z,nt)|0,l=l+Math.imul(Z,et)|0,l=l+Math.imul(z,nt)|0,x=x+Math.imul(z,et)|0,d=d+Math.imul(H,Me)|0,l=l+Math.imul(H,at)|0,l=l+Math.imul(D,Me)|0,x=x+Math.imul(D,at)|0;var an=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(an>>>26)|0,an&=67108863,d=Math.imul(ne,be),l=Math.imul(ne,ke),l=l+Math.imul(ae,be)|0,x=Math.imul(ae,ke),d=d+Math.imul(W,nt)|0,l=l+Math.imul(W,et)|0,l=l+Math.imul(S,nt)|0,x=x+Math.imul(S,et)|0,d=d+Math.imul(Z,Me)|0,l=l+Math.imul(Z,at)|0,l=l+Math.imul(z,Me)|0,x=x+Math.imul(z,at)|0,d=d+Math.imul(H,st)|0,l=l+Math.imul(H,Re)|0,l=l+Math.imul(D,st)|0,x=x+Math.imul(D,Re)|0;var sn=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(sn>>>26)|0,sn&=67108863,d=Math.imul(de,be),l=Math.imul(de,ke),l=l+Math.imul(q,be)|0,x=Math.imul(q,ke),d=d+Math.imul(ne,nt)|0,l=l+Math.imul(ne,et)|0,l=l+Math.imul(ae,nt)|0,x=x+Math.imul(ae,et)|0,d=d+Math.imul(W,Me)|0,l=l+Math.imul(W,at)|0,l=l+Math.imul(S,Me)|0,x=x+Math.imul(S,at)|0,d=d+Math.imul(Z,st)|0,l=l+Math.imul(Z,Re)|0,l=l+Math.imul(z,st)|0,x=x+Math.imul(z,Re)|0,d=d+Math.imul(H,Ne)|0,l=l+Math.imul(H,Fe)|0,l=l+Math.imul(D,Ne)|0,x=x+Math.imul(D,Fe)|0;var un=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(O,be),l=Math.imul(O,ke),l=l+Math.imul(Y,be)|0,x=Math.imul(Y,ke),d=d+Math.imul(de,nt)|0,l=l+Math.imul(de,et)|0,l=l+Math.imul(q,nt)|0,x=x+Math.imul(q,et)|0,d=d+Math.imul(ne,Me)|0,l=l+Math.imul(ne,at)|0,l=l+Math.imul(ae,Me)|0,x=x+Math.imul(ae,at)|0,d=d+Math.imul(W,st)|0,l=l+Math.imul(W,Re)|0,l=l+Math.imul(S,st)|0,x=x+Math.imul(S,Re)|0,d=d+Math.imul(Z,Ne)|0,l=l+Math.imul(Z,Fe)|0,l=l+Math.imul(z,Ne)|0,x=x+Math.imul(z,Fe)|0,d=d+Math.imul(H,Ce)|0,l=l+Math.imul(H,Le)|0,l=l+Math.imul(D,Ce)|0,x=x+Math.imul(D,Le)|0;var it=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(it>>>26)|0,it&=67108863,d=Math.imul(re,be),l=Math.imul(re,ke),l=l+Math.imul(ie,be)|0,x=Math.imul(ie,ke),d=d+Math.imul(O,nt)|0,l=l+Math.imul(O,et)|0,l=l+Math.imul(Y,nt)|0,x=x+Math.imul(Y,et)|0,d=d+Math.imul(de,Me)|0,l=l+Math.imul(de,at)|0,l=l+Math.imul(q,Me)|0,x=x+Math.imul(q,at)|0,d=d+Math.imul(ne,st)|0,l=l+Math.imul(ne,Re)|0,l=l+Math.imul(ae,st)|0,x=x+Math.imul(ae,Re)|0,d=d+Math.imul(W,Ne)|0,l=l+Math.imul(W,Fe)|0,l=l+Math.imul(S,Ne)|0,x=x+Math.imul(S,Fe)|0,d=d+Math.imul(Z,Ce)|0,l=l+Math.imul(Z,Le)|0,l=l+Math.imul(z,Ce)|0,x=x+Math.imul(z,Le)|0,d=d+Math.imul(H,je)|0,l=l+Math.imul(H,ze)|0,l=l+Math.imul(D,je)|0,x=x+Math.imul(D,ze)|0;var rr=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(rr>>>26)|0,rr&=67108863,d=Math.imul(le,be),l=Math.imul(le,ke),l=l+Math.imul(he,be)|0,x=Math.imul(he,ke),d=d+Math.imul(re,nt)|0,l=l+Math.imul(re,et)|0,l=l+Math.imul(ie,nt)|0,x=x+Math.imul(ie,et)|0,d=d+Math.imul(O,Me)|0,l=l+Math.imul(O,at)|0,l=l+Math.imul(Y,Me)|0,x=x+Math.imul(Y,at)|0,d=d+Math.imul(de,st)|0,l=l+Math.imul(de,Re)|0,l=l+Math.imul(q,st)|0,x=x+Math.imul(q,Re)|0,d=d+Math.imul(ne,Ne)|0,l=l+Math.imul(ne,Fe)|0,l=l+Math.imul(ae,Ne)|0,x=x+Math.imul(ae,Fe)|0,d=d+Math.imul(W,Ce)|0,l=l+Math.imul(W,Le)|0,l=l+Math.imul(S,Ce)|0,x=x+Math.imul(S,Le)|0,d=d+Math.imul(Z,je)|0,l=l+Math.imul(Z,ze)|0,l=l+Math.imul(z,je)|0,x=x+Math.imul(z,ze)|0,d=d+Math.imul(H,De)|0,l=l+Math.imul(H,Be)|0,l=l+Math.imul(D,De)|0,x=x+Math.imul(D,Be)|0;var mo=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(mo>>>26)|0,mo&=67108863,d=Math.imul(se,be),l=Math.imul(se,ke),l=l+Math.imul(_e,be)|0,x=Math.imul(_e,ke),d=d+Math.imul(le,nt)|0,l=l+Math.imul(le,et)|0,l=l+Math.imul(he,nt)|0,x=x+Math.imul(he,et)|0,d=d+Math.imul(re,Me)|0,l=l+Math.imul(re,at)|0,l=l+Math.imul(ie,Me)|0,x=x+Math.imul(ie,at)|0,d=d+Math.imul(O,st)|0,l=l+Math.imul(O,Re)|0,l=l+Math.imul(Y,st)|0,x=x+Math.imul(Y,Re)|0,d=d+Math.imul(de,Ne)|0,l=l+Math.imul(de,Fe)|0,l=l+Math.imul(q,Ne)|0,x=x+Math.imul(q,Fe)|0,d=d+Math.imul(ne,Ce)|0,l=l+Math.imul(ne,Le)|0,l=l+Math.imul(ae,Ce)|0,x=x+Math.imul(ae,Le)|0,d=d+Math.imul(W,je)|0,l=l+Math.imul(W,ze)|0,l=l+Math.imul(S,je)|0,x=x+Math.imul(S,ze)|0,d=d+Math.imul(Z,De)|0,l=l+Math.imul(Z,Be)|0,l=l+Math.imul(z,De)|0,x=x+Math.imul(z,Be)|0,d=d+Math.imul(H,Ue)|0,l=l+Math.imul(H,Ee)|0,l=l+Math.imul(D,Ue)|0,x=x+Math.imul(D,Ee)|0;var Q=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(Q>>>26)|0,Q&=67108863,d=Math.imul(Se,be),l=Math.imul(Se,ke),l=l+Math.imul(Pe,be)|0,x=Math.imul(Pe,ke),d=d+Math.imul(se,nt)|0,l=l+Math.imul(se,et)|0,l=l+Math.imul(_e,nt)|0,x=x+Math.imul(_e,et)|0,d=d+Math.imul(le,Me)|0,l=l+Math.imul(le,at)|0,l=l+Math.imul(he,Me)|0,x=x+Math.imul(he,at)|0,d=d+Math.imul(re,st)|0,l=l+Math.imul(re,Re)|0,l=l+Math.imul(ie,st)|0,x=x+Math.imul(ie,Re)|0,d=d+Math.imul(O,Ne)|0,l=l+Math.imul(O,Fe)|0,l=l+Math.imul(Y,Ne)|0,x=x+Math.imul(Y,Fe)|0,d=d+Math.imul(de,Ce)|0,l=l+Math.imul(de,Le)|0,l=l+Math.imul(q,Ce)|0,x=x+Math.imul(q,Le)|0,d=d+Math.imul(ne,je)|0,l=l+Math.imul(ne,ze)|0,l=l+Math.imul(ae,je)|0,x=x+Math.imul(ae,ze)|0,d=d+Math.imul(W,De)|0,l=l+Math.imul(W,Be)|0,l=l+Math.imul(S,De)|0,x=x+Math.imul(S,Be)|0,d=d+Math.imul(Z,Ue)|0,l=l+Math.imul(Z,Ee)|0,l=l+Math.imul(z,Ue)|0,x=x+Math.imul(z,Ee)|0,d=d+Math.imul(H,yt)|0,l=l+Math.imul(H,gt)|0,l=l+Math.imul(D,yt)|0,x=x+Math.imul(D,gt)|0;var Xe=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,d=Math.imul(Se,nt),l=Math.imul(Se,et),l=l+Math.imul(Pe,nt)|0,x=Math.imul(Pe,et),d=d+Math.imul(se,Me)|0,l=l+Math.imul(se,at)|0,l=l+Math.imul(_e,Me)|0,x=x+Math.imul(_e,at)|0,d=d+Math.imul(le,st)|0,l=l+Math.imul(le,Re)|0,l=l+Math.imul(he,st)|0,x=x+Math.imul(he,Re)|0,d=d+Math.imul(re,Ne)|0,l=l+Math.imul(re,Fe)|0,l=l+Math.imul(ie,Ne)|0,x=x+Math.imul(ie,Fe)|0,d=d+Math.imul(O,Ce)|0,l=l+Math.imul(O,Le)|0,l=l+Math.imul(Y,Ce)|0,x=x+Math.imul(Y,Le)|0,d=d+Math.imul(de,je)|0,l=l+Math.imul(de,ze)|0,l=l+Math.imul(q,je)|0,x=x+Math.imul(q,ze)|0,d=d+Math.imul(ne,De)|0,l=l+Math.imul(ne,Be)|0,l=l+Math.imul(ae,De)|0,x=x+Math.imul(ae,Be)|0,d=d+Math.imul(W,Ue)|0,l=l+Math.imul(W,Ee)|0,l=l+Math.imul(S,Ue)|0,x=x+Math.imul(S,Ee)|0,d=d+Math.imul(Z,yt)|0,l=l+Math.imul(Z,gt)|0,l=l+Math.imul(z,yt)|0,x=x+Math.imul(z,gt)|0;var Qe=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,d=Math.imul(Se,Me),l=Math.imul(Se,at),l=l+Math.imul(Pe,Me)|0,x=Math.imul(Pe,at),d=d+Math.imul(se,st)|0,l=l+Math.imul(se,Re)|0,l=l+Math.imul(_e,st)|0,x=x+Math.imul(_e,Re)|0,d=d+Math.imul(le,Ne)|0,l=l+Math.imul(le,Fe)|0,l=l+Math.imul(he,Ne)|0,x=x+Math.imul(he,Fe)|0,d=d+Math.imul(re,Ce)|0,l=l+Math.imul(re,Le)|0,l=l+Math.imul(ie,Ce)|0,x=x+Math.imul(ie,Le)|0,d=d+Math.imul(O,je)|0,l=l+Math.imul(O,ze)|0,l=l+Math.imul(Y,je)|0,x=x+Math.imul(Y,ze)|0,d=d+Math.imul(de,De)|0,l=l+Math.imul(de,Be)|0,l=l+Math.imul(q,De)|0,x=x+Math.imul(q,Be)|0,d=d+Math.imul(ne,Ue)|0,l=l+Math.imul(ne,Ee)|0,l=l+Math.imul(ae,Ue)|0,x=x+Math.imul(ae,Ee)|0,d=d+Math.imul(W,yt)|0,l=l+Math.imul(W,gt)|0,l=l+Math.imul(S,yt)|0,x=x+Math.imul(S,gt)|0;var Ve=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,d=Math.imul(Se,st),l=Math.imul(Se,Re),l=l+Math.imul(Pe,st)|0,x=Math.imul(Pe,Re),d=d+Math.imul(se,Ne)|0,l=l+Math.imul(se,Fe)|0,l=l+Math.imul(_e,Ne)|0,x=x+Math.imul(_e,Fe)|0,d=d+Math.imul(le,Ce)|0,l=l+Math.imul(le,Le)|0,l=l+Math.imul(he,Ce)|0,x=x+Math.imul(he,Le)|0,d=d+Math.imul(re,je)|0,l=l+Math.imul(re,ze)|0,l=l+Math.imul(ie,je)|0,x=x+Math.imul(ie,ze)|0,d=d+Math.imul(O,De)|0,l=l+Math.imul(O,Be)|0,l=l+Math.imul(Y,De)|0,x=x+Math.imul(Y,Be)|0,d=d+Math.imul(de,Ue)|0,l=l+Math.imul(de,Ee)|0,l=l+Math.imul(q,Ue)|0,x=x+Math.imul(q,Ee)|0,d=d+Math.imul(ne,yt)|0,l=l+Math.imul(ne,gt)|0,l=l+Math.imul(ae,yt)|0,x=x+Math.imul(ae,gt)|0;var Vn=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,d=Math.imul(Se,Ne),l=Math.imul(Se,Fe),l=l+Math.imul(Pe,Ne)|0,x=Math.imul(Pe,Fe),d=d+Math.imul(se,Ce)|0,l=l+Math.imul(se,Le)|0,l=l+Math.imul(_e,Ce)|0,x=x+Math.imul(_e,Le)|0,d=d+Math.imul(le,je)|0,l=l+Math.imul(le,ze)|0,l=l+Math.imul(he,je)|0,x=x+Math.imul(he,ze)|0,d=d+Math.imul(re,De)|0,l=l+Math.imul(re,Be)|0,l=l+Math.imul(ie,De)|0,x=x+Math.imul(ie,Be)|0,d=d+Math.imul(O,Ue)|0,l=l+Math.imul(O,Ee)|0,l=l+Math.imul(Y,Ue)|0,x=x+Math.imul(Y,Ee)|0,d=d+Math.imul(de,yt)|0,l=l+Math.imul(de,gt)|0,l=l+Math.imul(q,yt)|0,x=x+Math.imul(q,gt)|0;var fn=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(fn>>>26)|0,fn&=67108863,d=Math.imul(Se,Ce),l=Math.imul(Se,Le),l=l+Math.imul(Pe,Ce)|0,x=Math.imul(Pe,Le),d=d+Math.imul(se,je)|0,l=l+Math.imul(se,ze)|0,l=l+Math.imul(_e,je)|0,x=x+Math.imul(_e,ze)|0,d=d+Math.imul(le,De)|0,l=l+Math.imul(le,Be)|0,l=l+Math.imul(he,De)|0,x=x+Math.imul(he,Be)|0,d=d+Math.imul(re,Ue)|0,l=l+Math.imul(re,Ee)|0,l=l+Math.imul(ie,Ue)|0,x=x+Math.imul(ie,Ee)|0,d=d+Math.imul(O,yt)|0,l=l+Math.imul(O,gt)|0,l=l+Math.imul(Y,yt)|0,x=x+Math.imul(Y,gt)|0;var Si=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(Si>>>26)|0,Si&=67108863,d=Math.imul(Se,je),l=Math.imul(Se,ze),l=l+Math.imul(Pe,je)|0,x=Math.imul(Pe,ze),d=d+Math.imul(se,De)|0,l=l+Math.imul(se,Be)|0,l=l+Math.imul(_e,De)|0,x=x+Math.imul(_e,Be)|0,d=d+Math.imul(le,Ue)|0,l=l+Math.imul(le,Ee)|0,l=l+Math.imul(he,Ue)|0,x=x+Math.imul(he,Ee)|0,d=d+Math.imul(re,yt)|0,l=l+Math.imul(re,gt)|0,l=l+Math.imul(ie,yt)|0,x=x+Math.imul(ie,gt)|0;var xs=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(xs>>>26)|0,xs&=67108863,d=Math.imul(Se,De),l=Math.imul(Se,Be),l=l+Math.imul(Pe,De)|0,x=Math.imul(Pe,Be),d=d+Math.imul(se,Ue)|0,l=l+Math.imul(se,Ee)|0,l=l+Math.imul(_e,Ue)|0,x=x+Math.imul(_e,Ee)|0,d=d+Math.imul(le,yt)|0,l=l+Math.imul(le,gt)|0,l=l+Math.imul(he,yt)|0,x=x+Math.imul(he,gt)|0;var bo=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(bo>>>26)|0,bo&=67108863,d=Math.imul(Se,Ue),l=Math.imul(Se,Ee),l=l+Math.imul(Pe,Ue)|0,x=Math.imul(Pe,Ee),d=d+Math.imul(se,yt)|0,l=l+Math.imul(se,gt)|0,l=l+Math.imul(_e,yt)|0,x=x+Math.imul(_e,gt)|0;var Es=(v+d|0)+((l&8191)<<13)|0;v=(x+(l>>>13)|0)+(Es>>>26)|0,Es&=67108863,d=Math.imul(Se,yt),l=Math.imul(Se,gt),l=l+Math.imul(Pe,yt)|0,x=Math.imul(Pe,gt);var Ss=(v+d|0)+((l&8191)<<13)|0;return v=(x+(l>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,R[0]=tr,R[1]=on,R[2]=an,R[3]=sn,R[4]=un,R[5]=it,R[6]=rr,R[7]=mo,R[8]=Q,R[9]=Xe,R[10]=Qe,R[11]=Ve,R[12]=Vn,R[13]=fn,R[14]=Si,R[15]=xs,R[16]=bo,R[17]=Es,R[18]=Ss,v!==0&&(R[19]=v,y.length++),y};Math.imul||(_=A);function T($,m,E){E.negative=m.negative^$.negative,E.length=$.length+m.length;for(var y=0,g=0,M=0;M<E.length-1;M++){var R=g;g=0;for(var v=y&67108863,d=Math.min(M,m.length-1),l=Math.max(0,M-$.length+1);l<=d;l++){var x=M-l,B=$.words[x]|0,H=m.words[l]|0,D=B*H,k=D&67108863;R=R+(D/67108864|0)|0,k=k+v|0,v=k&67108863,R=R+(k>>>26)|0,g+=R>>>26,R&=67108863}E.words[M]=v,y=R,R=g}return y!==0?E.words[M]=y:E.length--,E.strip()}function P($,m,E){var y=new F;return y.mulp($,m,E)}o.prototype.mulTo=function(m,E){var y,g=this.length+m.length;return this.length===10&&m.length===10?y=_(this,m,E):g<63?y=A(this,m,E):g<1024?y=T(this,m,E):y=P(this,m,E),y};function F($,m){this.x=$,this.y=m}F.prototype.makeRBT=function(m){for(var E=new Array(m),y=o.prototype._countBits(m)-1,g=0;g<m;g++)E[g]=this.revBin(g,y,m);return E},F.prototype.revBin=function(m,E,y){if(m===0||m===y-1)return m;for(var g=0,M=0;M<E;M++)g|=(m&1)<<E-M-1,m>>=1;return g},F.prototype.permute=function(m,E,y,g,M,R){for(var v=0;v<R;v++)g[v]=E[m[v]],M[v]=y[m[v]]},F.prototype.transform=function(m,E,y,g,M,R){this.permute(R,m,E,y,g,M);for(var v=1;v<M;v<<=1)for(var d=v<<1,l=Math.cos(2*Math.PI/d),x=Math.sin(2*Math.PI/d),B=0;B<M;B+=d)for(var H=l,D=x,k=0;k<v;k++){var Z=y[B+k],z=g[B+k],K=y[B+k+v],W=g[B+k+v],S=H*K-D*W;W=H*W+D*K,K=S,y[B+k]=Z+K,g[B+k]=z+W,y[B+k+v]=Z-K,g[B+k+v]=z-W,k!==d&&(S=l*H-x*D,D=l*D+x*H,H=S)}},F.prototype.guessLen13b=function(m,E){var y=Math.max(E,m)|1,g=y&1,M=0;for(y=y/2|0;y;y=y>>>1)M++;return 1<<M+1+g},F.prototype.conjugate=function(m,E,y){if(!(y<=1))for(var g=0;g<y/2;g++){var M=m[g];m[g]=m[y-g-1],m[y-g-1]=M,M=E[g],E[g]=-E[y-g-1],E[y-g-1]=-M}},F.prototype.normalize13b=function(m,E){for(var y=0,g=0;g<E/2;g++){var M=Math.round(m[2*g+1]/E)*8192+Math.round(m[2*g]/E)+y;m[g]=M&67108863,M<67108864?y=0:y=M/67108864|0}return m},F.prototype.convert13b=function(m,E,y,g){for(var M=0,R=0;R<E;R++)M=M+(m[R]|0),y[2*R]=M&8191,M=M>>>13,y[2*R+1]=M&8191,M=M>>>13;for(R=2*E;R<g;++R)y[R]=0;n(M===0),n((M&~8191)==0)},F.prototype.stub=function(m){for(var E=new Array(m),y=0;y<m;y++)E[y]=0;return E},F.prototype.mulp=function(m,E,y){var g=2*this.guessLen13b(m.length,E.length),M=this.makeRBT(g),R=this.stub(g),v=new Array(g),d=new Array(g),l=new Array(g),x=new Array(g),B=new Array(g),H=new Array(g),D=y.words;D.length=g,this.convert13b(m.words,m.length,v,g),this.convert13b(E.words,E.length,x,g),this.transform(v,R,d,l,g,M),this.transform(x,R,B,H,g,M);for(var k=0;k<g;k++){var Z=d[k]*B[k]-l[k]*H[k];l[k]=d[k]*H[k]+l[k]*B[k],d[k]=Z}return this.conjugate(d,l,g),this.transform(d,l,D,R,g,M),this.conjugate(D,R,g),this.normalize13b(D,g),y.negative=m.negative^E.negative,y.length=m.length+E.length,y.strip()},o.prototype.mul=function(m){var E=new o(null);return E.words=new Array(this.length+m.length),this.mulTo(m,E)},o.prototype.mulf=function(m){var E=new o(null);return E.words=new Array(this.length+m.length),P(this,m,E)},o.prototype.imul=function(m){return this.clone().mulTo(m,this)},o.prototype.imuln=function(m){n(typeof m=="number"),n(m<67108864);for(var E=0,y=0;y<this.length;y++){var g=(this.words[y]|0)*m,M=(g&67108863)+(E&67108863);E>>=26,E+=g/67108864|0,E+=M>>>26,this.words[y]=M&67108863}return E!==0&&(this.words[y]=E,this.length++),this},o.prototype.muln=function(m){return this.clone().imuln(m)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(m){var E=w(m);if(E.length===0)return new o(1);for(var y=this,g=0;g<E.length&&E[g]===0;g++,y=y.sqr());if(++g<E.length)for(var M=y.sqr();g<E.length;g++,M=M.sqr())E[g]!==0&&(y=y.mul(M));return y},o.prototype.iushln=function(m){n(typeof m=="number"&&m>=0);var E=m%26,y=(m-E)/26,g=67108863>>>26-E<<26-E,M;if(E!==0){var R=0;for(M=0;M<this.length;M++){var v=this.words[M]&g,d=(this.words[M]|0)-v<<E;this.words[M]=d|R,R=v>>>26-E}R&&(this.words[M]=R,this.length++)}if(y!==0){for(M=this.length-1;M>=0;M--)this.words[M+y]=this.words[M];for(M=0;M<y;M++)this.words[M]=0;this.length+=y}return this.strip()},o.prototype.ishln=function(m){return n(this.negative===0),this.iushln(m)},o.prototype.iushrn=function(m,E,y){n(typeof m=="number"&&m>=0);var g;E?g=(E-E%26)/26:g=0;var M=m%26,R=Math.min((m-M)/26,this.length),v=67108863^67108863>>>M<<M,d=y;if(g-=R,g=Math.max(0,g),d){for(var l=0;l<R;l++)d.words[l]=this.words[l];d.length=R}if(R!==0)if(this.length>R)for(this.length-=R,l=0;l<this.length;l++)this.words[l]=this.words[l+R];else this.words[0]=0,this.length=1;var x=0;for(l=this.length-1;l>=0&&(x!==0||l>=g);l--){var B=this.words[l]|0;this.words[l]=x<<26-M|B>>>M,x=B&v}return d&&x!==0&&(d.words[d.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(m,E,y){return n(this.negative===0),this.iushrn(m,E,y)},o.prototype.shln=function(m){return this.clone().ishln(m)},o.prototype.ushln=function(m){return this.clone().iushln(m)},o.prototype.shrn=function(m){return this.clone().ishrn(m)},o.prototype.ushrn=function(m){return this.clone().iushrn(m)},o.prototype.testn=function(m){n(typeof m=="number"&&m>=0);var E=m%26,y=(m-E)/26,g=1<<E;if(this.length<=y)return!1;var M=this.words[y];return!!(M&g)},o.prototype.imaskn=function(m){n(typeof m=="number"&&m>=0);var E=m%26,y=(m-E)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(E!==0&&y++,this.length=Math.min(y,this.length),E!==0){var g=67108863^67108863>>>E<<E;this.words[this.length-1]&=g}return this.strip()},o.prototype.maskn=function(m){return this.clone().imaskn(m)},o.prototype.iaddn=function(m){return n(typeof m=="number"),n(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},o.prototype._iaddn=function(m){this.words[0]+=m;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},o.prototype.isubn=function(m){if(n(typeof m=="number"),n(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},o.prototype.addn=function(m){return this.clone().iaddn(m)},o.prototype.subn=function(m){return this.clone().isubn(m)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(m,E,y){var g=m.length+y,M;this._expand(g);var R,v=0;for(M=0;M<m.length;M++){R=(this.words[M+y]|0)+v;var d=(m.words[M]|0)*E;R-=d&67108863,v=(R>>26)-(d/67108864|0),this.words[M+y]=R&67108863}for(;M<this.length-y;M++)R=(this.words[M+y]|0)+v,v=R>>26,this.words[M+y]=R&67108863;if(v===0)return this.strip();for(n(v===-1),v=0,M=0;M<this.length;M++)R=-(this.words[M]|0)+v,v=R>>26,this.words[M]=R&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(m,E){var y=this.length-m.length,g=this.clone(),M=m,R=M.words[M.length-1]|0,v=this._countBits(R);y=26-v,y!==0&&(M=M.ushln(y),g.iushln(y),R=M.words[M.length-1]|0);var d=g.length-M.length,l;if(E!=="mod"){l=new o(null),l.length=d+1,l.words=new Array(l.length);for(var x=0;x<l.length;x++)l.words[x]=0}var B=g.clone()._ishlnsubmul(M,1,d);B.negative===0&&(g=B,l&&(l.words[d]=1));for(var H=d-1;H>=0;H--){var D=(g.words[M.length+H]|0)*67108864+(g.words[M.length+H-1]|0);for(D=Math.min(D/R|0,67108863),g._ishlnsubmul(M,D,H);g.negative!==0;)D--,g.negative=0,g._ishlnsubmul(M,1,H),g.isZero()||(g.negative^=1);l&&(l.words[H]=D)}return l&&l.strip(),g.strip(),E!=="div"&&y!==0&&g.iushrn(y),{div:l||null,mod:g}},o.prototype.divmod=function(m,E,y){if(n(!m.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var g,M,R;return this.negative!==0&&m.negative===0?(R=this.neg().divmod(m,E),E!=="mod"&&(g=R.div.neg()),E!=="div"&&(M=R.mod.neg(),y&&M.negative!==0&&M.iadd(m)),{div:g,mod:M}):this.negative===0&&m.negative!==0?(R=this.divmod(m.neg(),E),E!=="mod"&&(g=R.div.neg()),{div:g,mod:R.mod}):(this.negative&m.negative)!=0?(R=this.neg().divmod(m.neg(),E),E!=="div"&&(M=R.mod.neg(),y&&M.negative!==0&&M.isub(m)),{div:R.div,mod:M}):m.length>this.length||this.cmp(m)<0?{div:new o(0),mod:this}:m.length===1?E==="div"?{div:this.divn(m.words[0]),mod:null}:E==="mod"?{div:null,mod:new o(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new o(this.modn(m.words[0]))}:this._wordDiv(m,E)},o.prototype.div=function(m){return this.divmod(m,"div",!1).div},o.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},o.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},o.prototype.divRound=function(m){var E=this.divmod(m);if(E.mod.isZero())return E.div;var y=E.div.negative!==0?E.mod.isub(m):E.mod,g=m.ushrn(1),M=m.andln(1),R=y.cmp(g);return R<0||M===1&&R===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},o.prototype.modn=function(m){n(m<=67108863);for(var E=(1<<26)%m,y=0,g=this.length-1;g>=0;g--)y=(E*y+(this.words[g]|0))%m;return y},o.prototype.idivn=function(m){n(m<=67108863);for(var E=0,y=this.length-1;y>=0;y--){var g=(this.words[y]|0)+E*67108864;this.words[y]=g/m|0,E=g%m}return this.strip()},o.prototype.divn=function(m){return this.clone().idivn(m)},o.prototype.egcd=function(m){n(m.negative===0),n(!m.isZero());var E=this,y=m.clone();E.negative!==0?E=E.umod(m):E=E.clone();for(var g=new o(1),M=new o(0),R=new o(0),v=new o(1),d=0;E.isEven()&&y.isEven();)E.iushrn(1),y.iushrn(1),++d;for(var l=y.clone(),x=E.clone();!E.isZero();){for(var B=0,H=1;(E.words[0]&H)==0&&B<26;++B,H<<=1);if(B>0)for(E.iushrn(B);B-- >0;)(g.isOdd()||M.isOdd())&&(g.iadd(l),M.isub(x)),g.iushrn(1),M.iushrn(1);for(var D=0,k=1;(y.words[0]&k)==0&&D<26;++D,k<<=1);if(D>0)for(y.iushrn(D);D-- >0;)(R.isOdd()||v.isOdd())&&(R.iadd(l),v.isub(x)),R.iushrn(1),v.iushrn(1);E.cmp(y)>=0?(E.isub(y),g.isub(R),M.isub(v)):(y.isub(E),R.isub(g),v.isub(M))}return{a:R,b:v,gcd:y.iushln(d)}},o.prototype._invmp=function(m){n(m.negative===0),n(!m.isZero());var E=this,y=m.clone();E.negative!==0?E=E.umod(m):E=E.clone();for(var g=new o(1),M=new o(0),R=y.clone();E.cmpn(1)>0&&y.cmpn(1)>0;){for(var v=0,d=1;(E.words[0]&d)==0&&v<26;++v,d<<=1);if(v>0)for(E.iushrn(v);v-- >0;)g.isOdd()&&g.iadd(R),g.iushrn(1);for(var l=0,x=1;(y.words[0]&x)==0&&l<26;++l,x<<=1);if(l>0)for(y.iushrn(l);l-- >0;)M.isOdd()&&M.iadd(R),M.iushrn(1);E.cmp(y)>=0?(E.isub(y),g.isub(M)):(y.isub(E),M.isub(g))}var B;return E.cmpn(1)===0?B=g:B=M,B.cmpn(0)<0&&B.iadd(m),B},o.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var E=this.clone(),y=m.clone();E.negative=0,y.negative=0;for(var g=0;E.isEven()&&y.isEven();g++)E.iushrn(1),y.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;y.isEven();)y.iushrn(1);var M=E.cmp(y);if(M<0){var R=E;E=y,y=R}else if(M===0||y.cmpn(1)===0)break;E.isub(y)}while(!0);return y.iushln(g)},o.prototype.invm=function(m){return this.egcd(m).a.umod(m)},o.prototype.isEven=function(){return(this.words[0]&1)==0},o.prototype.isOdd=function(){return(this.words[0]&1)==1},o.prototype.andln=function(m){return this.words[0]&m},o.prototype.bincn=function(m){n(typeof m=="number");var E=m%26,y=(m-E)/26,g=1<<E;if(this.length<=y)return this._expand(y+1),this.words[y]|=g,this;for(var M=g,R=y;M!==0&&R<this.length;R++){var v=this.words[R]|0;v+=M,M=v>>>26,v&=67108863,this.words[R]=v}return M!==0&&(this.words[R]=M,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(m){var E=m<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this.strip();var y;if(this.length>1)y=1;else{E&&(m=-m),n(m<=67108863,"Number is too big");var g=this.words[0]|0;y=g===m?0:g<m?-1:1}return this.negative!==0?-y|0:y},o.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var E=this.ucmp(m);return this.negative!==0?-E|0:E},o.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var E=0,y=this.length-1;y>=0;y--){var g=this.words[y]|0,M=m.words[y]|0;if(g!==M){g<M?E=-1:g>M&&(E=1);break}}return E},o.prototype.gtn=function(m){return this.cmpn(m)===1},o.prototype.gt=function(m){return this.cmp(m)===1},o.prototype.gten=function(m){return this.cmpn(m)>=0},o.prototype.gte=function(m){return this.cmp(m)>=0},o.prototype.ltn=function(m){return this.cmpn(m)===-1},o.prototype.lt=function(m){return this.cmp(m)===-1},o.prototype.lten=function(m){return this.cmpn(m)<=0},o.prototype.lte=function(m){return this.cmp(m)<=0},o.prototype.eqn=function(m){return this.cmpn(m)===0},o.prototype.eq=function(m){return this.cmp(m)===0},o.red=function(m){return new C(m)},o.prototype.toRed=function(m){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(m){return this.red=m,this},o.prototype.forceRed=function(m){return n(!this.red,"Already a number in reduction context"),this._forceRed(m)},o.prototype.redAdd=function(m){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},o.prototype.redIAdd=function(m){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},o.prototype.redSub=function(m){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},o.prototype.redISub=function(m){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},o.prototype.redShl=function(m){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},o.prototype.redMul=function(m){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},o.prototype.redIMul=function(m){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(m){return n(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var j={k256:null,p224:null,p192:null,p25519:null};function U($,m){this.name=$,this.p=new o(m,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var m=new o(null);return m.words=new Array(Math.ceil(this.n/13)),m},U.prototype.ireduce=function(m){var E=m,y;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),y=E.bitLength();while(y>this.n);var g=y<this.n?-1:E.ucmp(this.p);return g===0?(E.words[0]=0,E.length=1):g>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},U.prototype.split=function(m,E){m.iushrn(this.n,0,E)},U.prototype.imulK=function(m){return m.imul(this.k)};function L(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(L,U),L.prototype.split=function(m,E){for(var y=4194303,g=Math.min(m.length,9),M=0;M<g;M++)E.words[M]=m.words[M];if(E.length=g,m.length<=9){m.words[0]=0,m.length=1;return}var R=m.words[9];for(E.words[E.length++]=R&y,M=10;M<m.length;M++){var v=m.words[M]|0;m.words[M-10]=(v&y)<<4|R>>>22,R=v}R>>>=22,m.words[M-10]=R,R===0&&m.length>10?m.length-=10:m.length-=9},L.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var E=0,y=0;y<m.length;y++){var g=m.words[y]|0;E+=g*977,m.words[y]=E&67108863,E=g*64+(E/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function G(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(G,U);function p(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(p,U);function I(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(I,U),I.prototype.imulK=function(m){for(var E=0,y=0;y<m.length;y++){var g=(m.words[y]|0)*19+E,M=g&67108863;g>>>=26,m.words[y]=M,E=g}return E!==0&&(m.words[m.length++]=E),m},o._prime=function(m){if(j[m])return j[m];var E;if(m==="k256")E=new L;else if(m==="p224")E=new G;else if(m==="p192")E=new p;else if(m==="p25519")E=new I;else throw new Error("Unknown prime "+m);return j[m]=E,E};function C($){if(typeof $=="string"){var m=o._prime($);this.m=m.p,this.prime=m}else n($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}C.prototype._verify1=function(m){n(m.negative===0,"red works only with positives"),n(m.red,"red works only with red numbers")},C.prototype._verify2=function(m,E){n((m.negative|E.negative)==0,"red works only with positives"),n(m.red&&m.red===E.red,"red works only with red numbers")},C.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):m.umod(this.m)._forceRed(this)},C.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},C.prototype.add=function(m,E){this._verify2(m,E);var y=m.add(E);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},C.prototype.iadd=function(m,E){this._verify2(m,E);var y=m.iadd(E);return y.cmp(this.m)>=0&&y.isub(this.m),y},C.prototype.sub=function(m,E){this._verify2(m,E);var y=m.sub(E);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},C.prototype.isub=function(m,E){this._verify2(m,E);var y=m.isub(E);return y.cmpn(0)<0&&y.iadd(this.m),y},C.prototype.shl=function(m,E){return this._verify1(m),this.imod(m.ushln(E))},C.prototype.imul=function(m,E){return this._verify2(m,E),this.imod(m.imul(E))},C.prototype.mul=function(m,E){return this._verify2(m,E),this.imod(m.mul(E))},C.prototype.isqr=function(m){return this.imul(m,m.clone())},C.prototype.sqr=function(m){return this.mul(m,m)},C.prototype.sqrt=function(m){if(m.isZero())return m.clone();var E=this.m.andln(3);if(n(E%2==1),E===3){var y=this.m.add(new o(1)).iushrn(2);return this.pow(m,y)}for(var g=this.m.subn(1),M=0;!g.isZero()&&g.andln(1)===0;)M++,g.iushrn(1);n(!g.isZero());var R=new o(1).toRed(this),v=R.redNeg(),d=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);this.pow(l,d).cmp(v)!==0;)l.redIAdd(v);for(var x=this.pow(l,g),B=this.pow(m,g.addn(1).iushrn(1)),H=this.pow(m,g),D=M;H.cmp(R)!==0;){for(var k=H,Z=0;k.cmp(R)!==0;Z++)k=k.redSqr();n(Z<D);var z=this.pow(x,new o(1).iushln(D-Z-1));B=B.redMul(z),x=z.redSqr(),H=H.redMul(x),D=Z}return B},C.prototype.invm=function(m){var E=m._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},C.prototype.pow=function(m,E){if(E.isZero())return new o(1).toRed(this);if(E.cmpn(1)===0)return m.clone();var y=4,g=new Array(1<<y);g[0]=new o(1).toRed(this),g[1]=m;for(var M=2;M<g.length;M++)g[M]=this.mul(g[M-1],m);var R=g[0],v=0,d=0,l=E.bitLength()%26;for(l===0&&(l=26),M=E.length-1;M>=0;M--){for(var x=E.words[M],B=l-1;B>=0;B--){var H=x>>B&1;if(R!==g[0]&&(R=this.sqr(R)),H===0&&v===0){d=0;continue}v<<=1,v|=H,d++,!(d!==y&&(M!==0||B!==0))&&(R=this.mul(R,g[v]),d=0,v=0)}l=26}return R},C.prototype.convertTo=function(m){var E=m.umod(this.m);return E===m?E.clone():E},C.prototype.convertFrom=function(m){var E=m.clone();return E.red=null,E},o.mont=function(m){return new V(m)};function V($){C.call(this,$),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(V,C),V.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},V.prototype.convertFrom=function(m){var E=this.imod(m.mul(this.rinv));return E.red=null,E},V.prototype.imul=function(m,E){if(m.isZero()||E.isZero())return m.words[0]=0,m.length=1,m;var y=m.imul(E),g=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=y.isub(g).iushrn(this.shift),R=M;return M.cmp(this.m)>=0?R=M.isub(this.m):M.cmpn(0)<0&&(R=M.iadd(this.m)),R._forceRed(this)},V.prototype.mul=function(m,E){if(m.isZero()||E.isZero())return new o(0)._forceRed(this);var y=m.mul(E),g=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=y.isub(g).iushrn(this.shift),R=M;return M.cmp(this.m)>=0?R=M.isub(this.m):M.cmpn(0)<0&&(R=M.iadd(this.m)),R._forceRed(this)},V.prototype.invm=function(m){var E=this.imod(m._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(t,te)})(Tn);var qe=Tn.exports;const i4="logger/5.5.0";let G1=!1,H1=!1;const sf={debug:1,default:2,info:2,warning:3,error:4,off:5};let W1=sf.default,wh=null;function o4(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const K1=o4();var _h;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(_h||(_h={}));var xh;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"})(xh||(xh={}));const V1="0123456789abcdef";class ce{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();sf[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(W1>sf[n])&&console.log.apply(console,r)}debug(...e){this._log(ce.levels.DEBUG,e)}info(...e){this._log(ce.levels.INFO,e)}warn(...e){this._log(ce.levels.WARNING,e)}makeError(e,r,n){if(H1)return this.makeError("censored error",r,{});r||(r=ce.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(s=>{const u=n[s];try{if(u instanceof Uint8Array){let f="";for(let c=0;c<u.length;c++)f+=V1[u[c]>>4],f+=V1[u[c]&15];i.push(s+"=Uint8Array(0x"+f+")")}else i.push(s+"="+JSON.stringify(u))}catch{i.push(s+"="+JSON.stringify(n[s].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const o=e;i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=o,a.code=r,Object.keys(n).forEach(function(s){a[s]=n[s]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,ce.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){K1&&this.throwError("platform missing String.prototype.normalize",ce.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:K1})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,ce.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,ce.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,ce.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,ce.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",ce.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",ce.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ce.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return wh||(wh=new ce(i4)),wh}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",ce.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),G1){if(!e)return;this.globalLogger().throwError("error censorship permanent",ce.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}H1=!!e,G1=!!r}static setLogLevel(e){const r=sf[e.toLowerCase()];if(r==null){ce.globalLogger().warn("invalid log level - "+e);return}W1=r}static from(e){return new ce(e)}}ce.errors=xh;ce.levels=_h;const a4="bytes/5.5.0",Rt=new ce(a4);function J1(t){return!!t.toHexString}function ma(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return ma(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function Eh(t){return Mt(t)&&!(t.length%2)||uf(t)}function Y1(t){return typeof t=="number"&&t==t&&t%1==0}function uf(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Y1(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!Y1(r)||r<0||r>=256)return!1}return!0}function ot(t,e){if(e||(e={}),typeof t=="number"){Rt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),ma(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),J1(t)&&(t=t.toHexString()),Mt(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":Rt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return ma(new Uint8Array(n))}return uf(t)?ma(new Uint8Array(t)):Rt.throwArgumentError("invalid arrayify value","value",t)}function ba(t){const e=t.map(i=>ot(i)),r=e.reduce((i,o)=>i+o.length,0),n=new Uint8Array(r);return e.reduce((i,o)=>(n.set(o,i),i+o.length),0),ma(n)}function ya(t){let e=ot(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function s4(t,e){t=ot(t),t.length>e&&Rt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),ma(r)}function Mt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const Sh="0123456789abcdef";function tt(t,e){if(e||(e={}),typeof t=="number"){Rt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=Sh[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),J1(t))return t.toHexString();if(Mt(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Rt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(uf(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=Sh[(i&240)>>4]+Sh[i&15]}return r}return Rt.throwArgumentError("invalid hexlify value","value",t)}function Ps(t){if(typeof t!="string")t=tt(t);else if(!Mt(t)||t.length%2)return null;return(t.length-2)/2}function zi(t,e,r){return typeof t!="string"?t=tt(t):(!Mt(t)||t.length%2)&&Rt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function Jn(t){let e="0x";return t.forEach(r=>{e+=tt(r).substring(2)}),e}function Ah(t){const e=u4(tt(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function u4(t){typeof t!="string"&&(t=tt(t)),Mt(t)||Rt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function jt(t,e){for(typeof t!="string"?t=tt(t):Mt(t)||Rt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Rt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function ff(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(Eh(t)){const r=ot(t);r.length!==65&&Rt.throwArgumentError("invalid signature string; must be 65 bytes","signature",t),e.r=tt(r.slice(0,32)),e.s=tt(r.slice(32,64)),e.v=r[64],e.v<27&&(e.v===0||e.v===1?e.v+=27:Rt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=tt(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=s4(ot(e._vs),32);e._vs=tt(i);const o=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=o:e.recoveryParam!==o&&Rt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const a=tt(i);e.s==null?e.s=a:e.s!==a&&Rt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Rt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Rt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Mt(e.r)?Rt.throwArgumentError("signature missing or invalid r","signature",t):e.r=jt(e.r,32),e.s==null||!Mt(e.s)?Rt.throwArgumentError("signature missing or invalid s","signature",t):e.s=jt(e.s,32);const r=ot(e.s);r[0]>=128&&Rt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=tt(r);e._vs&&(Mt(e._vs)||Rt.throwArgumentError("signature invalid _vs","signature",t),e._vs=jt(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Rt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e}const f4="bignumber/5.5.0";var cf=qe.BN;const Yn=new ce(f4),Ih={},X1=9007199254740991;let Z1=!1;class Te{constructor(e,r){Yn.checkNew(new.target,Te),e!==Ih&&Yn.throwError("cannot call constructor directly; use BigNumber.from",ce.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Rr(ft(this).fromTwos(e))}toTwos(e){return Rr(ft(this).toTwos(e))}abs(){return this._hex[0]==="-"?Te.from(this._hex.substring(1)):this}add(e){return Rr(ft(this).add(ft(e)))}sub(e){return Rr(ft(this).sub(ft(e)))}div(e){return Te.from(e).isZero()&&ln("division by zero","div"),Rr(ft(this).div(ft(e)))}mul(e){return Rr(ft(this).mul(ft(e)))}mod(e){const r=ft(e);return r.isNeg()&&ln("cannot modulo negative values","mod"),Rr(ft(this).umod(r))}pow(e){const r=ft(e);return r.isNeg()&&ln("cannot raise to negative values","pow"),Rr(ft(this).pow(r))}and(e){const r=ft(e);return(this.isNegative()||r.isNeg())&&ln("cannot 'and' negative values","and"),Rr(ft(this).and(r))}or(e){const r=ft(e);return(this.isNegative()||r.isNeg())&&ln("cannot 'or' negative values","or"),Rr(ft(this).or(r))}xor(e){const r=ft(e);return(this.isNegative()||r.isNeg())&&ln("cannot 'xor' negative values","xor"),Rr(ft(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&ln("cannot mask negative values","mask"),Rr(ft(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&ln("cannot shift negative values","shl"),Rr(ft(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&ln("cannot shift negative values","shr"),Rr(ft(this).shrn(e))}eq(e){return ft(this).eq(ft(e))}lt(e){return ft(this).lt(ft(e))}lte(e){return ft(this).lte(ft(e))}gt(e){return ft(this).gt(ft(e))}gte(e){return ft(this).gte(ft(e))}isNegative(){return this._hex[0]==="-"}isZero(){return ft(this).isZero()}toNumber(){try{return ft(this).toNumber()}catch{ln("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Yn.throwError("this platform does not support BigInt",ce.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Z1||(Z1=!0,Yn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Yn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",ce.errors.UNEXPECTED_ARGUMENT,{}):Yn.throwError("BigNumber.toString does not accept parameters",ce.errors.UNEXPECTED_ARGUMENT,{})),ft(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Te)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Te(Ih,Ms(e)):e.match(/^-?[0-9]+$/)?new Te(Ih,Ms(new cf(e))):Yn.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&ln("underflow","BigNumber.from",e),(e>=X1||e<=-X1)&&ln("overflow","BigNumber.from",e),Te.from(String(e));const r=e;if(typeof r=="bigint")return Te.from(r.toString());if(uf(r))return Te.from(tt(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return Te.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Mt(n)||n[0]==="-"&&Mt(n.substring(1))))return Te.from(n)}return Yn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Ms(t){if(typeof t!="string")return Ms(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Yn.throwArgumentError("invalid hex","value",t),t=Ms(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Rr(t){return Te.from(Ms(t))}function ft(t){const e=Te.from(t).toHexString();return e[0]==="-"?new cf("-"+e.substring(3),16):new cf(e.substring(2),16)}function ln(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),Yn.throwError(t,ce.errors.NUMERIC_FAULT,n)}function c4(t){return new cf(t,36).toString(16)}const l4="properties/5.5.0";var h4=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};const lf=new ce(l4);function dt(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function ks(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function nr(t){return h4(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(o=>({key:n,value:o}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function d4(t,e){(!t||typeof t!="object")&&lf.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||lf.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Wr(t){const e={};for(const r in t)e[r]=t[r];return e}const p4={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Q1(t){if(t==null||p4[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Q1(n))return!1}return!0}return lf.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function v4(t){if(Q1(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>_o(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&dt(e,r,_o(n))}return e}return lf.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function _o(t){return v4(t)}class m4{constructor(e){for(const r in e)this[r]=_o(e[r])}}var hf={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var o=!n&&typeof self=="object",a=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?i=te:o&&(i=self);var s=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,u=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",f="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],h=[4,1024,262144,67108864],b=[1,256,65536,16777216],w=[6,1536,393216,100663296],A=[0,8,16,24],_=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],T=[224,256,384,512],P=[128,256],F=["hex","buffer","arrayBuffer","array","digest"],j={"128":168,"256":136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"}),u&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(k){return typeof k=="object"&&k.buffer&&k.buffer.constructor===ArrayBuffer});for(var U=function(k,Z,z){return function(K){return new B(k,Z,k).update(K)[z]()}},L=function(k,Z,z){return function(K,W){return new B(k,Z,W).update(K)[z]()}},G=function(k,Z,z){return function(K,W,S,J){return y["cshake"+k].update(K,W,S,J)[z]()}},p=function(k,Z,z){return function(K,W,S,J){return y["kmac"+k].update(K,W,S,J)[z]()}},I=function(k,Z,z,K){for(var W=0;W<F.length;++W){var S=F[W];k[S]=Z(z,K,S)}return k},C=function(k,Z){var z=U(k,Z,"hex");return z.create=function(){return new B(k,Z,k)},z.update=function(K){return z.create().update(K)},I(z,U,k,Z)},V=function(k,Z){var z=L(k,Z,"hex");return z.create=function(K){return new B(k,Z,K)},z.update=function(K,W){return z.create(W).update(K)},I(z,L,k,Z)},$=function(k,Z){var z=j[k],K=G(k,Z,"hex");return K.create=function(W,S,J){return!S&&!J?y["shake"+k].create(W):new B(k,Z,W).bytepad([S,J],z)},K.update=function(W,S,J,ne){return K.create(S,J,ne).update(W)},I(K,G,k,Z)},m=function(k,Z){var z=j[k],K=p(k,Z,"hex");return K.create=function(W,S,J){return new H(k,Z,S).bytepad(["KMAC",J],z).bytepad([W],z)},K.update=function(W,S,J,ne){return K.create(W,J,ne).update(S)},I(K,p,k,Z)},E=[{name:"keccak",padding:b,bits:T,createMethod:C},{name:"sha3",padding:w,bits:T,createMethod:C},{name:"shake",padding:c,bits:P,createMethod:V},{name:"cshake",padding:h,bits:P,createMethod:$},{name:"kmac",padding:h,bits:P,createMethod:m}],y={},g=[],M=0;M<E.length;++M)for(var R=E[M],v=R.bits,d=0;d<v.length;++d){var l=R.name+"_"+v[d];if(g.push(l),y[l]=R.createMethod(v[d],R.padding),R.name!=="sha3"){var x=R.name+v[d];g.push(x),y[x]=y[l]}}function B(k,Z,z){this.blocks=[],this.s=[],this.padding=Z,this.outputBits=z,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(k<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=z>>5,this.extraBytes=(z&31)>>3;for(var K=0;K<50;++K)this.s[K]=0}B.prototype.update=function(k){if(this.finalized)throw new Error(r);var Z,z=typeof k;if(z!=="string"){if(z==="object"){if(k===null)throw new Error(e);if(u&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!u||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);Z=!0}for(var K=this.blocks,W=this.byteCount,S=k.length,J=this.blockCount,ne=0,ae=this.s,ue,de;ne<S;){if(this.reset)for(this.reset=!1,K[0]=this.block,ue=1;ue<J+1;++ue)K[ue]=0;if(Z)for(ue=this.start;ne<S&&ue<W;++ne)K[ue>>2]|=k[ne]<<A[ue++&3];else for(ue=this.start;ne<S&&ue<W;++ne)de=k.charCodeAt(ne),de<128?K[ue>>2]|=de<<A[ue++&3]:de<2048?(K[ue>>2]|=(192|de>>6)<<A[ue++&3],K[ue>>2]|=(128|de&63)<<A[ue++&3]):de<55296||de>=57344?(K[ue>>2]|=(224|de>>12)<<A[ue++&3],K[ue>>2]|=(128|de>>6&63)<<A[ue++&3],K[ue>>2]|=(128|de&63)<<A[ue++&3]):(de=65536+((de&1023)<<10|k.charCodeAt(++ne)&1023),K[ue>>2]|=(240|de>>18)<<A[ue++&3],K[ue>>2]|=(128|de>>12&63)<<A[ue++&3],K[ue>>2]|=(128|de>>6&63)<<A[ue++&3],K[ue>>2]|=(128|de&63)<<A[ue++&3]);if(this.lastByteIndex=ue,ue>=W){for(this.start=ue-W,this.block=K[J],ue=0;ue<J;++ue)ae[ue]^=K[ue];D(ae),this.reset=!0}else this.start=ue}return this},B.prototype.encode=function(k,Z){var z=k&255,K=1,W=[z];for(k=k>>8,z=k&255;z>0;)W.unshift(z),k=k>>8,z=k&255,++K;return Z?W.push(K):W.unshift(K),this.update(W),W.length},B.prototype.encodeString=function(k){var Z,z=typeof k;if(z!=="string"){if(z==="object"){if(k===null)throw new Error(e);if(u&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!u||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);Z=!0}var K=0,W=k.length;if(Z)K=W;else for(var S=0;S<k.length;++S){var J=k.charCodeAt(S);J<128?K+=1:J<2048?K+=2:J<55296||J>=57344?K+=3:(J=65536+((J&1023)<<10|k.charCodeAt(++S)&1023),K+=4)}return K+=this.encode(K*8),this.update(k),K},B.prototype.bytepad=function(k,Z){for(var z=this.encode(Z),K=0;K<k.length;++K)z+=this.encodeString(k[K]);var W=Z-z%Z,S=[];return S.length=W,this.update(S),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var k=this.blocks,Z=this.lastByteIndex,z=this.blockCount,K=this.s;if(k[Z>>2]|=this.padding[Z&3],this.lastByteIndex===this.byteCount)for(k[0]=k[z],Z=1;Z<z+1;++Z)k[Z]=0;for(k[z-1]|=2147483648,Z=0;Z<z;++Z)K[Z]^=k[Z];D(K)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var k=this.blockCount,Z=this.s,z=this.outputBlocks,K=this.extraBytes,W=0,S=0,J="",ne;S<z;){for(W=0;W<k&&S<z;++W,++S)ne=Z[W],J+=f[ne>>4&15]+f[ne&15]+f[ne>>12&15]+f[ne>>8&15]+f[ne>>20&15]+f[ne>>16&15]+f[ne>>28&15]+f[ne>>24&15];S%k==0&&(D(Z),W=0)}return K&&(ne=Z[W],J+=f[ne>>4&15]+f[ne&15],K>1&&(J+=f[ne>>12&15]+f[ne>>8&15]),K>2&&(J+=f[ne>>20&15]+f[ne>>16&15])),J},B.prototype.arrayBuffer=function(){this.finalize();var k=this.blockCount,Z=this.s,z=this.outputBlocks,K=this.extraBytes,W=0,S=0,J=this.outputBits>>3,ne;K?ne=new ArrayBuffer(z+1<<2):ne=new ArrayBuffer(J);for(var ae=new Uint32Array(ne);S<z;){for(W=0;W<k&&S<z;++W,++S)ae[S]=Z[W];S%k==0&&D(Z)}return K&&(ae[W]=Z[W],ne=ne.slice(0,J)),ne},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var k=this.blockCount,Z=this.s,z=this.outputBlocks,K=this.extraBytes,W=0,S=0,J=[],ne,ae;S<z;){for(W=0;W<k&&S<z;++W,++S)ne=S<<2,ae=Z[W],J[ne]=ae&255,J[ne+1]=ae>>8&255,J[ne+2]=ae>>16&255,J[ne+3]=ae>>24&255;S%k==0&&D(Z)}return K&&(ne=S<<2,ae=Z[W],J[ne]=ae&255,K>1&&(J[ne+1]=ae>>8&255),K>2&&(J[ne+2]=ae>>16&255)),J};function H(k,Z,z){B.call(this,k,Z,z)}H.prototype=new B,H.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var D=function(k){var Z,z,K,W,S,J,ne,ae,ue,de,q,N,O,Y,ee,re,ie,pe,le,he,xe,se,_e,$e,Se,Pe,Ye,be,ke,rt,nt,et,Ot,Me,at,er,st,Re,wt,Ne,Fe,It,Ce,Le,Oe,je,ze,Pt,De,Be,ut,Ue,Ee,kn,yt,gt,tr,on,an,sn,un,it,rr;for(K=0;K<48;K+=2)W=k[0]^k[10]^k[20]^k[30]^k[40],S=k[1]^k[11]^k[21]^k[31]^k[41],J=k[2]^k[12]^k[22]^k[32]^k[42],ne=k[3]^k[13]^k[23]^k[33]^k[43],ae=k[4]^k[14]^k[24]^k[34]^k[44],ue=k[5]^k[15]^k[25]^k[35]^k[45],de=k[6]^k[16]^k[26]^k[36]^k[46],q=k[7]^k[17]^k[27]^k[37]^k[47],N=k[8]^k[18]^k[28]^k[38]^k[48],O=k[9]^k[19]^k[29]^k[39]^k[49],Z=N^(J<<1|ne>>>31),z=O^(ne<<1|J>>>31),k[0]^=Z,k[1]^=z,k[10]^=Z,k[11]^=z,k[20]^=Z,k[21]^=z,k[30]^=Z,k[31]^=z,k[40]^=Z,k[41]^=z,Z=W^(ae<<1|ue>>>31),z=S^(ue<<1|ae>>>31),k[2]^=Z,k[3]^=z,k[12]^=Z,k[13]^=z,k[22]^=Z,k[23]^=z,k[32]^=Z,k[33]^=z,k[42]^=Z,k[43]^=z,Z=J^(de<<1|q>>>31),z=ne^(q<<1|de>>>31),k[4]^=Z,k[5]^=z,k[14]^=Z,k[15]^=z,k[24]^=Z,k[25]^=z,k[34]^=Z,k[35]^=z,k[44]^=Z,k[45]^=z,Z=ae^(N<<1|O>>>31),z=ue^(O<<1|N>>>31),k[6]^=Z,k[7]^=z,k[16]^=Z,k[17]^=z,k[26]^=Z,k[27]^=z,k[36]^=Z,k[37]^=z,k[46]^=Z,k[47]^=z,Z=de^(W<<1|S>>>31),z=q^(S<<1|W>>>31),k[8]^=Z,k[9]^=z,k[18]^=Z,k[19]^=z,k[28]^=Z,k[29]^=z,k[38]^=Z,k[39]^=z,k[48]^=Z,k[49]^=z,Y=k[0],ee=k[1],je=k[11]<<4|k[10]>>>28,ze=k[10]<<4|k[11]>>>28,be=k[20]<<3|k[21]>>>29,ke=k[21]<<3|k[20]>>>29,sn=k[31]<<9|k[30]>>>23,un=k[30]<<9|k[31]>>>23,It=k[40]<<18|k[41]>>>14,Ce=k[41]<<18|k[40]>>>14,Me=k[2]<<1|k[3]>>>31,at=k[3]<<1|k[2]>>>31,re=k[13]<<12|k[12]>>>20,ie=k[12]<<12|k[13]>>>20,Pt=k[22]<<10|k[23]>>>22,De=k[23]<<10|k[22]>>>22,rt=k[33]<<13|k[32]>>>19,nt=k[32]<<13|k[33]>>>19,it=k[42]<<2|k[43]>>>30,rr=k[43]<<2|k[42]>>>30,kn=k[5]<<30|k[4]>>>2,yt=k[4]<<30|k[5]>>>2,er=k[14]<<6|k[15]>>>26,st=k[15]<<6|k[14]>>>26,pe=k[25]<<11|k[24]>>>21,le=k[24]<<11|k[25]>>>21,Be=k[34]<<15|k[35]>>>17,ut=k[35]<<15|k[34]>>>17,et=k[45]<<29|k[44]>>>3,Ot=k[44]<<29|k[45]>>>3,$e=k[6]<<28|k[7]>>>4,Se=k[7]<<28|k[6]>>>4,gt=k[17]<<23|k[16]>>>9,tr=k[16]<<23|k[17]>>>9,Re=k[26]<<25|k[27]>>>7,wt=k[27]<<25|k[26]>>>7,he=k[36]<<21|k[37]>>>11,xe=k[37]<<21|k[36]>>>11,Ue=k[47]<<24|k[46]>>>8,Ee=k[46]<<24|k[47]>>>8,Le=k[8]<<27|k[9]>>>5,Oe=k[9]<<27|k[8]>>>5,Pe=k[18]<<20|k[19]>>>12,Ye=k[19]<<20|k[18]>>>12,on=k[29]<<7|k[28]>>>25,an=k[28]<<7|k[29]>>>25,Ne=k[38]<<8|k[39]>>>24,Fe=k[39]<<8|k[38]>>>24,se=k[48]<<14|k[49]>>>18,_e=k[49]<<14|k[48]>>>18,k[0]=Y^~re&pe,k[1]=ee^~ie&le,k[10]=$e^~Pe&be,k[11]=Se^~Ye&ke,k[20]=Me^~er&Re,k[21]=at^~st&wt,k[30]=Le^~je&Pt,k[31]=Oe^~ze&De,k[40]=kn^~gt&on,k[41]=yt^~tr&an,k[2]=re^~pe&he,k[3]=ie^~le&xe,k[12]=Pe^~be&rt,k[13]=Ye^~ke&nt,k[22]=er^~Re&Ne,k[23]=st^~wt&Fe,k[32]=je^~Pt&Be,k[33]=ze^~De&ut,k[42]=gt^~on&sn,k[43]=tr^~an&un,k[4]=pe^~he&se,k[5]=le^~xe&_e,k[14]=be^~rt&et,k[15]=ke^~nt&Ot,k[24]=Re^~Ne&It,k[25]=wt^~Fe&Ce,k[34]=Pt^~Be&Ue,k[35]=De^~ut&Ee,k[44]=on^~sn&it,k[45]=an^~un&rr,k[6]=he^~se&Y,k[7]=xe^~_e&ee,k[16]=rt^~et&$e,k[17]=nt^~Ot&Se,k[26]=Ne^~It&Me,k[27]=Fe^~Ce&at,k[36]=Be^~Ue&Le,k[37]=ut^~Ee&Oe,k[46]=sn^~it&kn,k[47]=un^~rr&yt,k[8]=se^~Y&re,k[9]=_e^~ee&ie,k[18]=et^~$e&Pe,k[19]=Ot^~Se&Ye,k[28]=It^~Me&er,k[29]=Ce^~at&st,k[38]=Ue^~Le&je,k[39]=Ee^~Oe&ze,k[48]=it^~kn&gt,k[49]=rr^~yt&tr,k[0]^=_[K],k[1]^=_[K+1]};if(s)t.exports=y;else for(M=0;M<g.length;++M)i[g[M]]=y[g[M]]})()})(hf);var b4=hf.exports;function ir(t){return"0x"+b4.keccak_256(ot(t))}const y4="rlp/5.5.0",Xn=new ce(y4);function em(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function tm(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function rm(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(o){n=n.concat(rm(o))}),n.length<=55)return n.unshift(192+n.length),n;const i=em(n.length);return i.unshift(247+i.length),i.concat(n)}Eh(t)||Xn.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(ot(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=em(e.length);return r.unshift(183+r.length),r.concat(e)}function df(t){return tt(rm(t))}function nm(t,e,r,n){const i=[];for(;r<e+1+n;){const o=im(t,r);i.push(o.result),r+=o.consumed,r>e+1+n&&Xn.throwError("child data too short",ce.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function im(t,e){if(t.length===0&&Xn.throwError("data too short",ce.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Xn.throwError("data short segment too short",ce.errors.BUFFER_OVERRUN,{});const n=tm(t,e+1,r);return e+1+r+n>t.length&&Xn.throwError("data long segment too short",ce.errors.BUFFER_OVERRUN,{}),nm(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Xn.throwError("data array too short",ce.errors.BUFFER_OVERRUN,{}),nm(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Xn.throwError("data array too short",ce.errors.BUFFER_OVERRUN,{});const n=tm(t,e+1,r);e+1+r+n>t.length&&Xn.throwError("data array too short",ce.errors.BUFFER_OVERRUN,{});const i=tt(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Xn.throwError("data too short",ce.errors.BUFFER_OVERRUN,{});const n=tt(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:tt(t[e])}}function Ph(t){const e=ot(t),r=im(e,0);return r.consumed!==e.length&&Xn.throwArgumentError("invalid rlp data","data",t),r.result}const g4="address/5.5.0",ga=new ce(g4);function om(t){Mt(t,20)||ga.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=ot(ir(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const w4=9007199254740991;function _4(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Mh={};for(let t=0;t<10;t++)Mh[String(t)]=String(t);for(let t=0;t<26;t++)Mh[String.fromCharCode(65+t)]=String(10+t);const am=Math.floor(_4(w4));function x4(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Mh[n]).join("");for(;e.length>=am;){let n=e.substring(0,am);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Nn(t){let e=null;if(typeof t!="string"&&ga.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=om(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&ga.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==x4(t)&&ga.throwArgumentError("bad icap checksum","address",t),e=c4(t.substring(4));e.length<40;)e="0"+e;e=om("0x"+e)}else ga.throwArgumentError("invalid address","address",t);return e}function E4(t){let e=null;try{e=Nn(t.from)}catch{ga.throwArgumentError("missing from address","transaction",t)}const r=ya(ot(Te.from(t.nonce).toHexString()));return Nn(zi(ir(df([e,r])),12))}const S4="0x0000000000000000000000000000000000000000",A4=Te.from(0),I4="0x0000000000000000000000000000000000000000000000000000000000000000",P4="strings/5.5.0",sm=new ce(P4);var wa;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(wa||(wa={}));var Kr;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Kr||(Kr={}));function M4(t,e,r,n,i){return sm.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function um(t,e,r,n,i){if(t===Kr.BAD_PREFIX||t===Kr.UNEXPECTED_CONTINUE){let o=0;for(let a=e+1;a<r.length&&r[a]>>6==2;a++)o++;return o}return t===Kr.OVERRUN?r.length-e-1:0}function k4(t,e,r,n,i){return t===Kr.OVERLONG?(n.push(i),0):(n.push(65533),um(t,e,r))}const T4=Object.freeze({error:M4,ignore:um,replace:k4});function fm(t,e){e==null&&(e=T4.error),t=ot(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7==0){r.push(i);continue}let o=null,a=null;if((i&224)==192)o=1,a=127;else if((i&240)==224)o=2,a=2047;else if((i&248)==240)o=3,a=65535;else{(i&192)==128?n+=e(Kr.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(Kr.BAD_PREFIX,n-1,t,r);continue}if(n-1+o>=t.length){n+=e(Kr.OVERRUN,n-1,t,r);continue}let s=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let f=t[n];if((f&192)!=128){n+=e(Kr.MISSING_CONTINUE,n,t,r),s=null;break}s=s<<6|f&63,n++}if(s!==null){if(s>1114111){n+=e(Kr.OUT_OF_RANGE,n-1-o,t,r,s);continue}if(s>=55296&&s<=57343){n+=e(Kr.UTF16_SURROGATE,n-1-o,t,r,s);continue}if(s<=a){n+=e(Kr.OVERLONG,n-1-o,t,r,s);continue}r.push(s)}}return r}function qi(t,e=wa.current){e!=wa.current&&(sm.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const o=t.charCodeAt(n);if(n>=t.length||(o&64512)!=56320)throw new Error("invalid utf-8 string");const a=65536+((i&1023)<<10)+(o&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return ot(r)}function kh(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Ts(t,e){return kh(fm(t,e))}function cm(t,e=wa.current){return fm(qi(t,e))}function N4(t){if(t.length%4!=0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function Th(t,e){e||(e=function(i){return[parseInt(i,16)]});let r=0,n={};return t.split(",").forEach(i=>{let o=i.split(":");r+=parseInt(o[0],16),n[r]=e(o[1])}),n}function lm(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}function Nh(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)==0){if(i.e&&i.e.indexOf(t-r)!==-1)continue;return i}}return null}const O4=lm("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),$4="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),R4=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],C4=Th("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),L4=Th("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),D4=Th("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",N4),B4=lm("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function U4(t){return t.reduce((e,r)=>(r.forEach(n=>{e.push(n)}),e),[])}function F4(t){return!!Nh(t,O4)}function j4(t){let e=Nh(t,R4);if(e)return[t+e.s];let r=C4[t];if(r)return r;let n=L4[t];if(n)return[t+n[0]];let i=D4[t];return i||null}function z4(t){return!!Nh(t,B4)}function q4(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=cm(t);e=U4(e.map(n=>{if($4.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let i=j4(n);return i||[n]})),e=cm(kh(e),wa.NFKC),e.forEach(n=>{if(z4(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(F4(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=kh(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");if(r.length>63)throw new Error("too long");return r}function hm(t){return ir(qi(t))}const dm="hash/5.5.0",pm=new ce(dm),vm=new Uint8Array(32);vm.fill(0);const G4=new RegExp("^((.*)\\.)?([^.]+)$");function pf(t){typeof t!="string"&&pm.throwArgumentError("invalid ENS name; not a string","name",t);let e=t,r=vm;for(;e.length;){const n=e.match(G4);(n==null||n[2]==="")&&pm.throwArgumentError("invalid ENS address; missing component","name",t);const i=qi(q4(n[3]));r=ir(ba([r,ir(i)])),e=n[2]||""}return tt(r)}var H4=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};const Tt=new ce(dm),mm=new Uint8Array(32);mm.fill(0);const W4=Te.from(-1),bm=Te.from(0),ym=Te.from(1),K4=Te.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function V4(t){const e=ot(t),r=e.length%32;return r?Jn([e,mm.slice(r)]):tt(e)}const J4=jt(ym.toHexString(),32),Y4=jt(bm.toHexString(),32),gm={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Oh=["name","version","chainId","verifyingContract","salt"];function wm(t){return function(e){return typeof e!="string"&&Tt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const X4={name:wm("name"),version:wm("version"),chainId:function(t){try{return Te.from(t).toString()}catch{}return Tt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Nn(t).toLowerCase()}catch{}return Tt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=ot(t);if(e.length!==32)throw new Error("bad length");return tt(e)}catch{}return Tt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function $h(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!=0||n>256||e[2]&&e[2]!==String(n))&&Tt.throwArgumentError("invalid numeric width","type",t);const i=K4.mask(r?n-1:n),o=r?i.add(ym).mul(W4):bm;return function(a){const s=Te.from(a);return(s.lt(o)||s.gt(i))&&Tt.throwArgumentError(`value out-of-bounds for ${t}`,"value",a),jt(s.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Tt.throwArgumentError("invalid bytes width","type",t),function(n){return ot(n).length!==r&&Tt.throwArgumentError(`invalid length for ${t}`,"value",n),V4(n)}}}switch(t){case"address":return function(e){return jt(Nn(e),32)};case"bool":return function(e){return e?J4:Y4};case"bytes":return function(e){return ir(e)};case"string":return function(e){return hm(e)}}return null}function _m(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Vr{constructor(e){dt(this,"types",Object.freeze(_o(e))),dt(this,"_encoderCache",{}),dt(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(s=>{r[s]={},n[s]=[],i[s]={}});for(const s in e){const u={};e[s].forEach(f=>{u[f.name]&&Tt.throwArgumentError(`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(s)}`,"types",e),u[f.name]=!0;const c=f.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===s&&Tt.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!$h(c)&&(n[c]||Tt.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),n[c].push(s),r[s][c]=!0)})}const o=Object.keys(n).filter(s=>n[s].length===0);o.length===0?Tt.throwArgumentError("missing primary type","types",e):o.length>1&&Tt.throwArgumentError(`ambiguous primary types or unused types: ${o.map(s=>JSON.stringify(s)).join(", ")}`,"types",e),dt(this,"primaryType",o[0]);function a(s,u){u[s]&&Tt.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),u[s]=!0,Object.keys(r[s]).forEach(f=>{!n[f]||(a(f,u),Object.keys(u).forEach(c=>{i[c][f]=!0}))}),delete u[s]}a(this.primaryType,{});for(const s in i){const u=Object.keys(i[s]);u.sort(),this._types[s]=_m(s,e[s])+u.map(f=>_m(f,e[f])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=$h(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],o=this.getEncoder(i),a=parseInt(r[3]);return s=>{a>=0&&s.length!==a&&Tt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",s);let u=s.map(o);return this._types[i]&&(u=u.map(ir)),ir(Jn(u))}}const n=this.types[e];if(n){const i=hm(this._types[e]);return o=>{const a=n.map(({name:s,type:u})=>{const f=this.getEncoder(u)(o[s]);return this._types[u]?ir(f):f});return a.unshift(i),Jn(a)}}return Tt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Tt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return ir(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if($h(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const a=i[1],s=parseInt(i[3]);return s>=0&&r.length!==s&&Tt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(u=>this._visit(a,u,n))}const o=this.types[e];return o?o.reduce((a,{name:s,type:u})=>(a[s]=this._visit(u,r[s],n),a),{}):Tt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Vr(e)}static getPrimaryType(e){return Vr.from(e).primaryType}static hashStruct(e,r,n){return Vr.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=gm[n];i||Tt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>Oh.indexOf(n.name)-Oh.indexOf(i.name)),Vr.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return Jn(["0x1901",Vr.hashDomain(e),Vr.from(r).hash(n)])}static hash(e,r,n){return ir(Vr.encode(e,r,n))}static resolveNames(e,r,n,i){return H4(this,void 0,void 0,function*(){e=Wr(e);const o={};e.verifyingContract&&!Mt(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const a=Vr.from(r);a.visit(n,(s,u)=>(s==="address"&&!Mt(u,20)&&(o[u]="0x"),u));for(const s in o)o[s]=yield i(s);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),n=a.visit(n,(s,u)=>s==="address"&&o[u]?o[u]:u),{domain:e,value:n}})}static getPayload(e,r,n){Vr.hashDomain(e);const i={},o=[];Oh.forEach(u=>{const f=e[u];f!=null&&(i[u]=X4[u](f),o.push({name:u,type:gm[u]}))});const a=Vr.from(r),s=Wr(r);return s.EIP712Domain?Tt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):s.EIP712Domain=o,a.encode(n),{types:s,domain:i,primaryType:a.primaryType,message:a.visit(n,(u,f)=>{if(u.match(/^bytes(\d*)/))return tt(ot(f));if(u.match(/^u?int/))return Te.from(f).toString();switch(u){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return typeof f!="string"&&Tt.throwArgumentError("invalid string","value",f),f}return Tt.throwArgumentError("unsupported type","type",u)})}}}const Z4="abstract-provider/5.5.1";var Q4=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};const eA=new ce(Z4);class tA extends m4{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class vf{constructor(){eA.checkAbstract(new.target,vf),dt(this,"_isProvider",!0)}getFeeData(){return Q4(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield nr({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null;return e&&e.baseFeePerGas&&(i=Te.from("2500000000"),n=e.baseFeePerGas.mul(2).add(i)),{maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const rA="abstract-signer/5.5.0";var On=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};const $n=new ce(rA),nA=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],iA=[ce.errors.INSUFFICIENT_FUNDS,ce.errors.NONCE_EXPIRED,ce.errors.REPLACEMENT_UNDERPRICED];class Rh{constructor(){$n.checkAbstract(new.target,Rh),dt(this,"_isSigner",!0)}getBalance(e){return On(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return On(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return On(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield nr(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return On(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield nr(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return On(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return On(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return On(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return On(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return On(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)nA.indexOf(n)===-1&&$n.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Wr(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&$n.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return On(this,void 0,void 0,function*(){const r=yield nr(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>On(this,void 0,void 0,function*(){if(i==null)return null;const o=yield this.resolveName(i);return o==null&&$n.throwArgumentError("provided ENS name resolves to null","tx.to",i),o})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?$n.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&$n.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&$n.throwError("network does not support EIP-1559",ce.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):$n.throwError("failed to get consistent fee data",ce.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(iA.indexOf(i.code)>=0)throw i;return $n.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ce.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&$n.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield nr(r)})}_checkProvider(e){this.provider||$n.throwError("missing provider",ce.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}var Cr={},ct={},xo=xm;function xm(t,e){if(!t)throw new Error(e||"Assertion failed")}xm.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var _a={exports:{}};typeof Object.create=="function"?_a.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:_a.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var oA=xo,aA=_a.exports;ct.inherits=aA;function sA(t,e){return(t.charCodeAt(e)&64512)!=55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)==56320}function uA(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):sA(t,i)?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}ct.toArray=uA;function fA(t){for(var e="",r=0;r<t.length;r++)e+=Sm(t[r].toString(16));return e}ct.toHex=fA;function Em(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}ct.htonl=Em;function cA(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=Em(i)),r+=Am(i.toString(16))}return r}ct.toHex32=cA;function Sm(t){return t.length===1?"0"+t:t}ct.zero2=Sm;function Am(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}ct.zero8=Am;function lA(t,e,r,n){var i=r-e;oA(i%4==0);for(var o=new Array(i/4),a=0,s=e;a<o.length;a++,s+=4){var u;n==="big"?u=t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]:u=t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s],o[a]=u>>>0}return o}ct.join32=lA;function hA(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];e==="big"?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=o&255):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=o&255)}return r}ct.split32=hA;function dA(t,e){return t>>>e|t<<32-e}ct.rotr32=dA;function pA(t,e){return t<<e|t>>>32-e}ct.rotl32=pA;function vA(t,e){return t+e>>>0}ct.sum32=vA;function mA(t,e,r){return t+e+r>>>0}ct.sum32_3=mA;function bA(t,e,r,n){return t+e+r+n>>>0}ct.sum32_4=bA;function yA(t,e,r,n,i){return t+e+r+n+i>>>0}ct.sum32_5=yA;function gA(t,e,r,n){var i=t[e],o=t[e+1],a=n+o>>>0,s=(a<n?1:0)+r+i;t[e]=s>>>0,t[e+1]=a}ct.sum64=gA;function wA(t,e,r,n){var i=e+n>>>0,o=(i<e?1:0)+t+r;return o>>>0}ct.sum64_hi=wA;function _A(t,e,r,n){var i=e+n;return i>>>0}ct.sum64_lo=_A;function xA(t,e,r,n,i,o,a,s){var u=0,f=e;f=f+n>>>0,u+=f<e?1:0,f=f+o>>>0,u+=f<o?1:0,f=f+s>>>0,u+=f<s?1:0;var c=t+r+i+a+u;return c>>>0}ct.sum64_4_hi=xA;function EA(t,e,r,n,i,o,a,s){var u=e+n+o+s;return u>>>0}ct.sum64_4_lo=EA;function SA(t,e,r,n,i,o,a,s,u,f){var c=0,h=e;h=h+n>>>0,c+=h<e?1:0,h=h+o>>>0,c+=h<o?1:0,h=h+s>>>0,c+=h<s?1:0,h=h+f>>>0,c+=h<f?1:0;var b=t+r+i+a+u+c;return b>>>0}ct.sum64_5_hi=SA;function AA(t,e,r,n,i,o,a,s,u,f){var c=e+n+o+s+f;return c>>>0}ct.sum64_5_lo=AA;function IA(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}ct.rotr64_hi=IA;function PA(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}ct.rotr64_lo=PA;function MA(t,e,r){return t>>>r}ct.shr64_hi=MA;function kA(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}ct.shr64_lo=kA;var xa={},Im=ct,TA=xo;function mf(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}xa.BlockHash=mf;mf.prototype.update=function(e,r){if(e=Im.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=Im.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};mf.prototype.digest=function(e){return this.update(this._pad()),TA(this.pending===null),this._digest(e)};mf.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,a=8;a<this.padLength;a++)i[o++]=0;return i};var Ea={},Zn={},NA=ct,Qn=NA.rotr32;function OA(t,e,r,n){if(t===0)return Pm(e,r,n);if(t===1||t===3)return km(e,r,n);if(t===2)return Mm(e,r,n)}Zn.ft_1=OA;function Pm(t,e,r){return t&e^~t&r}Zn.ch32=Pm;function Mm(t,e,r){return t&e^t&r^e&r}Zn.maj32=Mm;function km(t,e,r){return t^e^r}Zn.p32=km;function $A(t){return Qn(t,2)^Qn(t,13)^Qn(t,22)}Zn.s0_256=$A;function RA(t){return Qn(t,6)^Qn(t,11)^Qn(t,25)}Zn.s1_256=RA;function CA(t){return Qn(t,7)^Qn(t,18)^t>>>3}Zn.g0_256=CA;function LA(t){return Qn(t,17)^Qn(t,19)^t>>>10}Zn.g1_256=LA;var Sa=ct,DA=xa,BA=Zn,Ch=Sa.rotl32,Ns=Sa.sum32,UA=Sa.sum32_5,FA=BA.ft_1,Tm=DA.BlockHash,jA=[1518500249,1859775393,2400959708,3395469782];function ei(){if(!(this instanceof ei))return new ei;Tm.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Sa.inherits(ei,Tm);var zA=ei;ei.blockSize=512;ei.outSize=160;ei.hmacStrength=80;ei.padLength=64;ei.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Ch(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],a=this.h[1],s=this.h[2],u=this.h[3],f=this.h[4];for(i=0;i<n.length;i++){var c=~~(i/20),h=UA(Ch(o,5),FA(c,a,s,u),f,n[i],jA[c]);f=u,u=s,s=Ch(a,30),a=o,o=h}this.h[0]=Ns(this.h[0],o),this.h[1]=Ns(this.h[1],a),this.h[2]=Ns(this.h[2],s),this.h[3]=Ns(this.h[3],u),this.h[4]=Ns(this.h[4],f)};ei.prototype._digest=function(e){return e==="hex"?Sa.toHex32(this.h,"big"):Sa.split32(this.h,"big")};var Aa=ct,qA=xa,Ia=Zn,GA=xo,Rn=Aa.sum32,HA=Aa.sum32_4,WA=Aa.sum32_5,KA=Ia.ch32,VA=Ia.maj32,JA=Ia.s0_256,YA=Ia.s1_256,XA=Ia.g0_256,ZA=Ia.g1_256,Nm=qA.BlockHash,QA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ti(){if(!(this instanceof ti))return new ti;Nm.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=QA,this.W=new Array(64)}Aa.inherits(ti,Nm);var Om=ti;ti.blockSize=512;ti.outSize=256;ti.hmacStrength=192;ti.padLength=64;ti.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=HA(ZA(n[i-2]),n[i-7],XA(n[i-15]),n[i-16]);var o=this.h[0],a=this.h[1],s=this.h[2],u=this.h[3],f=this.h[4],c=this.h[5],h=this.h[6],b=this.h[7];for(GA(this.k.length===n.length),i=0;i<n.length;i++){var w=WA(b,YA(f),KA(f,c,h),this.k[i],n[i]),A=Rn(JA(o),VA(o,a,s));b=h,h=c,c=f,f=Rn(u,w),u=s,s=a,a=o,o=Rn(w,A)}this.h[0]=Rn(this.h[0],o),this.h[1]=Rn(this.h[1],a),this.h[2]=Rn(this.h[2],s),this.h[3]=Rn(this.h[3],u),this.h[4]=Rn(this.h[4],f),this.h[5]=Rn(this.h[5],c),this.h[6]=Rn(this.h[6],h),this.h[7]=Rn(this.h[7],b)};ti.prototype._digest=function(e){return e==="hex"?Aa.toHex32(this.h,"big"):Aa.split32(this.h,"big")};var Lh=ct,$m=Om;function Ai(){if(!(this instanceof Ai))return new Ai;$m.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Lh.inherits(Ai,$m);var e8=Ai;Ai.blockSize=512;Ai.outSize=224;Ai.hmacStrength=192;Ai.padLength=64;Ai.prototype._digest=function(e){return e==="hex"?Lh.toHex32(this.h.slice(0,7),"big"):Lh.split32(this.h.slice(0,7),"big")};var Lr=ct,t8=xa,r8=xo,ri=Lr.rotr64_hi,ni=Lr.rotr64_lo,Rm=Lr.shr64_hi,Cm=Lr.shr64_lo,Gi=Lr.sum64,Dh=Lr.sum64_hi,Bh=Lr.sum64_lo,n8=Lr.sum64_4_hi,i8=Lr.sum64_4_lo,o8=Lr.sum64_5_hi,a8=Lr.sum64_5_lo,Lm=t8.BlockHash,s8=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Cn(){if(!(this instanceof Cn))return new Cn;Lm.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=s8,this.W=new Array(160)}Lr.inherits(Cn,Lm);var Dm=Cn;Cn.blockSize=1024;Cn.outSize=512;Cn.hmacStrength=192;Cn.padLength=128;Cn.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var o=y8(n[i-4],n[i-3]),a=g8(n[i-4],n[i-3]),s=n[i-14],u=n[i-13],f=m8(n[i-30],n[i-29]),c=b8(n[i-30],n[i-29]),h=n[i-32],b=n[i-31];n[i]=n8(o,a,s,u,f,c,h,b),n[i+1]=i8(o,a,s,u,f,c,h,b)}};Cn.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],f=this.h[5],c=this.h[6],h=this.h[7],b=this.h[8],w=this.h[9],A=this.h[10],_=this.h[11],T=this.h[12],P=this.h[13],F=this.h[14],j=this.h[15];r8(this.k.length===n.length);for(var U=0;U<n.length;U+=2){var L=F,G=j,p=p8(b,w),I=v8(b,w),C=u8(b,w,A,_,T),V=f8(b,w,A,_,T,P),$=this.k[U],m=this.k[U+1],E=n[U],y=n[U+1],g=o8(L,G,p,I,C,V,$,m,E,y),M=a8(L,G,p,I,C,V,$,m,E,y);L=h8(i,o),G=d8(i,o),p=c8(i,o,a,s,u),I=l8(i,o,a,s,u,f);var R=Dh(L,G,p,I),v=Bh(L,G,p,I);F=T,j=P,T=A,P=_,A=b,_=w,b=Dh(c,h,g,M),w=Bh(h,h,g,M),c=u,h=f,u=a,f=s,a=i,s=o,i=Dh(g,M,R,v),o=Bh(g,M,R,v)}Gi(this.h,0,i,o),Gi(this.h,2,a,s),Gi(this.h,4,u,f),Gi(this.h,6,c,h),Gi(this.h,8,b,w),Gi(this.h,10,A,_),Gi(this.h,12,T,P),Gi(this.h,14,F,j)};Cn.prototype._digest=function(e){return e==="hex"?Lr.toHex32(this.h,"big"):Lr.split32(this.h,"big")};function u8(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function f8(t,e,r,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function c8(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function l8(t,e,r,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function h8(t,e){var r=ri(t,e,28),n=ri(e,t,2),i=ri(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function d8(t,e){var r=ni(t,e,28),n=ni(e,t,2),i=ni(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function p8(t,e){var r=ri(t,e,14),n=ri(t,e,18),i=ri(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function v8(t,e){var r=ni(t,e,14),n=ni(t,e,18),i=ni(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function m8(t,e){var r=ri(t,e,1),n=ri(t,e,8),i=Rm(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function b8(t,e){var r=ni(t,e,1),n=ni(t,e,8),i=Cm(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function y8(t,e){var r=ri(t,e,19),n=ri(e,t,29),i=Rm(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}function g8(t,e){var r=ni(t,e,19),n=ni(e,t,29),i=Cm(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}var Uh=ct,Bm=Dm;function Ii(){if(!(this instanceof Ii))return new Ii;Bm.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Uh.inherits(Ii,Bm);var w8=Ii;Ii.blockSize=1024;Ii.outSize=384;Ii.hmacStrength=192;Ii.padLength=128;Ii.prototype._digest=function(e){return e==="hex"?Uh.toHex32(this.h.slice(0,12),"big"):Uh.split32(this.h.slice(0,12),"big")};Ea.sha1=zA;Ea.sha224=e8;Ea.sha256=Om;Ea.sha384=w8;Ea.sha512=Dm;var Um={},Eo=ct,_8=xa,bf=Eo.rotl32,Fm=Eo.sum32,Os=Eo.sum32_3,jm=Eo.sum32_4,zm=_8.BlockHash;function ii(){if(!(this instanceof ii))return new ii;zm.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Eo.inherits(ii,zm);Um.ripemd160=ii;ii.blockSize=512;ii.outSize=160;ii.hmacStrength=192;ii.padLength=64;ii.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],s=this.h[4],u=n,f=i,c=o,h=a,b=s,w=0;w<80;w++){var A=Fm(bf(jm(n,qm(w,i,o,a),e[S8[w]+r],x8(w)),I8[w]),s);n=s,s=a,a=bf(o,10),o=i,i=A,A=Fm(bf(jm(u,qm(79-w,f,c,h),e[A8[w]+r],E8(w)),P8[w]),b),u=b,b=h,h=bf(c,10),c=f,f=A}A=Os(this.h[1],o,h),this.h[1]=Os(this.h[2],a,b),this.h[2]=Os(this.h[3],s,u),this.h[3]=Os(this.h[4],n,f),this.h[4]=Os(this.h[0],i,c),this.h[0]=A};ii.prototype._digest=function(e){return e==="hex"?Eo.toHex32(this.h,"little"):Eo.split32(this.h,"little")};function qm(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function x8(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function E8(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var S8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],A8=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],I8=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],P8=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],M8=ct,k8=xo;function Pa(t,e,r){if(!(this instanceof Pa))return new Pa(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(M8.toArray(e,r))}var T8=Pa;Pa.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),k8(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};Pa.prototype.update=function(e,r){return this.inner.update(e,r),this};Pa.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=ct,e.common=xa,e.sha=Ea,e.ripemd=Um,e.hmac=T8,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Cr);function Ma(t,e,r){return r={path:e,exports:{},require:function(n,i){return N8(n,i==null?r.path:i)}},t(r,r.exports),r.exports}function N8(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Fh=Gm;function Gm(t,e){if(!t)throw new Error(e||"Assertion failed")}Gm.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Ln=Ma(function(t,e){var r=e;function n(a,s){if(Array.isArray(a))return a.slice();if(!a)return[];var u=[];if(typeof a!="string"){for(var f=0;f<a.length;f++)u[f]=a[f]|0;return u}if(s==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!=0&&(a="0"+a);for(var f=0;f<a.length;f+=2)u.push(parseInt(a[f]+a[f+1],16))}else for(var f=0;f<a.length;f++){var c=a.charCodeAt(f),h=c>>8,b=c&255;h?u.push(h,b):u.push(b)}return u}r.toArray=n;function i(a){return a.length===1?"0"+a:a}r.zero2=i;function o(a){for(var s="",u=0;u<a.length;u++)s+=i(a[u].toString(16));return s}r.toHex=o,r.encode=function(s,u){return u==="hex"?o(s):s}}),Jr=Ma(function(t,e){var r=e;r.assert=Fh,r.toArray=Ln.toArray,r.zero2=Ln.zero2,r.toHex=Ln.toHex,r.encode=Ln.encode;function n(u,f,c){var h=new Array(Math.max(u.bitLength(),c)+1);h.fill(0);for(var b=1<<f+1,w=u.clone(),A=0;A<h.length;A++){var _,T=w.andln(b-1);w.isOdd()?(T>(b>>1)-1?_=(b>>1)-T:_=T,w.isubn(_)):_=0,h[A]=_,w.iushrn(1)}return h}r.getNAF=n;function i(u,f){var c=[[],[]];u=u.clone(),f=f.clone();for(var h=0,b=0,w;u.cmpn(-h)>0||f.cmpn(-b)>0;){var A=u.andln(3)+h&3,_=f.andln(3)+b&3;A===3&&(A=-1),_===3&&(_=-1);var T;(A&1)==0?T=0:(w=u.andln(7)+h&7,(w===3||w===5)&&_===2?T=-A:T=A),c[0].push(T);var P;(_&1)==0?P=0:(w=f.andln(7)+b&7,(w===3||w===5)&&A===2?P=-_:P=_),c[1].push(P),2*h===T+1&&(h=1-h),2*b===P+1&&(b=1-b),u.iushrn(1),f.iushrn(1)}return c}r.getJSF=i;function o(u,f,c){var h="_"+f;u.prototype[f]=function(){return this[h]!==void 0?this[h]:this[h]=c.call(this)}}r.cachedProperty=o;function a(u){return typeof u=="string"?r.toArray(u,"hex"):u}r.parseBytes=a;function s(u){return new qe(u,"hex","le")}r.intFromLE=s}),yf=Jr.getNAF,O8=Jr.getJSF,gf=Jr.assert;function Hi(t,e){this.type=t,this.p=new qe(e.p,16),this.red=e.prime?qe.red(e.prime):qe.mont(this.p),this.zero=new qe(0).toRed(this.red),this.one=new qe(1).toRed(this.red),this.two=new qe(2).toRed(this.red),this.n=e.n&&new qe(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var So=Hi;Hi.prototype.point=function(){throw new Error("Not implemented")};Hi.prototype.validate=function(){throw new Error("Not implemented")};Hi.prototype._fixedNafMul=function(e,r){gf(e.precomputed);var n=e._getDoubles(),i=yf(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2==0?2:1);o/=3;var a=[],s,u;for(s=0;s<i.length;s+=n.step){u=0;for(var f=s+n.step-1;f>=s;f--)u=(u<<1)+i[f];a.push(u)}for(var c=this.jpoint(null,null,null),h=this.jpoint(null,null,null),b=o;b>0;b--){for(s=0;s<a.length;s++)u=a[s],u===b?h=h.mixedAdd(n.points[s]):u===-b&&(h=h.mixedAdd(n.points[s].neg()));c=c.add(h)}return c.toP()};Hi.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,a=yf(r,n,this._bitLength),s=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var f=0;u>=0&&a[u]===0;u--)f++;if(u>=0&&f++,s=s.dblp(f),u<0)break;var c=a[u];gf(c!==0),e.type==="affine"?c>0?s=s.mixedAdd(o[c-1>>1]):s=s.mixedAdd(o[-c-1>>1].neg()):c>0?s=s.add(o[c-1>>1]):s=s.add(o[-c-1>>1].neg())}return e.type==="affine"?s.toP():s};Hi.prototype._wnafMulAdd=function(e,r,n,i,o){var a=this._wnafT1,s=this._wnafT2,u=this._wnafT3,f=0,c,h,b;for(c=0;c<i;c++){b=r[c];var w=b._getNAFPoints(e);a[c]=w.wnd,s[c]=w.points}for(c=i-1;c>=1;c-=2){var A=c-1,_=c;if(a[A]!==1||a[_]!==1){u[A]=yf(n[A],a[A],this._bitLength),u[_]=yf(n[_],a[_],this._bitLength),f=Math.max(u[A].length,f),f=Math.max(u[_].length,f);continue}var T=[r[A],null,null,r[_]];r[A].y.cmp(r[_].y)===0?(T[1]=r[A].add(r[_]),T[2]=r[A].toJ().mixedAdd(r[_].neg())):r[A].y.cmp(r[_].y.redNeg())===0?(T[1]=r[A].toJ().mixedAdd(r[_]),T[2]=r[A].add(r[_].neg())):(T[1]=r[A].toJ().mixedAdd(r[_]),T[2]=r[A].toJ().mixedAdd(r[_].neg()));var P=[-3,-1,-5,-7,0,7,5,1,3],F=O8(n[A],n[_]);for(f=Math.max(F[0].length,f),u[A]=new Array(f),u[_]=new Array(f),h=0;h<f;h++){var j=F[0][h]|0,U=F[1][h]|0;u[A][h]=P[(j+1)*3+(U+1)],u[_][h]=0,s[A]=T}}var L=this.jpoint(null,null,null),G=this._wnafT4;for(c=f;c>=0;c--){for(var p=0;c>=0;){var I=!0;for(h=0;h<i;h++)G[h]=u[h][c]|0,G[h]!==0&&(I=!1);if(!I)break;p++,c--}if(c>=0&&p++,L=L.dblp(p),c<0)break;for(h=0;h<i;h++){var C=G[h];C!==0&&(C>0?b=s[h][C-1>>1]:C<0&&(b=s[h][-C-1>>1].neg()),b.type==="affine"?L=L.mixedAdd(b):L=L.add(b))}}for(c=0;c<i;c++)s[c]=null;return o?L:L.toP()};function hn(t,e){this.curve=t,this.type=e,this.precomputed=null}Hi.BasePoint=hn;hn.prototype.eq=function(){throw new Error("Not implemented")};hn.prototype.validate=function(){return this.curve.validate(this)};Hi.prototype.decodePoint=function(e,r){e=Jr.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*n){e[0]===6?gf(e[e.length-1]%2==0):e[0]===7&&gf(e[e.length-1]%2==1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};hn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};hn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};hn.prototype.encode=function(e,r){return Jr.encode(this._encode(r),e)};hn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};hn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};hn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};hn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:e,points:r}};hn.prototype._getBeta=function(){return null};hn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var jh=Ma(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),$8=Jr.assert;function dn(t){So.call(this,"short",t),this.a=new qe(t.a,16).toRed(this.red),this.b=new qe(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}jh(dn,So);var R8=dn;dn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new qe(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new qe(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],$8(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(s){return{a:new qe(s.a,16),b:new qe(s.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};dn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:qe.mont(e),n=new qe(2).toRed(r).redInvm(),i=n.redNeg(),o=new qe(3).toRed(r).redNeg().redSqrt().redMul(n),a=i.redAdd(o).fromRed(),s=i.redSub(o).fromRed();return[a,s]};dn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new qe(1),a=new qe(0),s=new qe(0),u=new qe(1),f,c,h,b,w,A,_,T=0,P,F;n.cmpn(0)!==0;){var j=i.div(n);P=i.sub(j.mul(n)),F=s.sub(j.mul(o));var U=u.sub(j.mul(a));if(!h&&P.cmp(r)<0)f=_.neg(),c=o,h=P.neg(),b=F;else if(h&&++T==2)break;_=P,i=n,n=P,s=o,o=F,u=a,a=U}w=P.neg(),A=F;var L=h.sqr().add(b.sqr()),G=w.sqr().add(A.sqr());return G.cmp(L)>=0&&(w=f,A=c),h.negative&&(h=h.neg(),b=b.neg()),w.negative&&(w=w.neg(),A=A.neg()),[{a:h,b},{a:w,b:A}]};dn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),s=o.mul(n.a),u=a.mul(i.a),f=o.mul(n.b),c=a.mul(i.b),h=e.sub(s).sub(u),b=f.add(c).neg();return{k1:h,k2:b}};dn.prototype.pointFromX=function(e,r){e=new qe(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(e,i)};dn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};dn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(r[a]),u=e[a],f=u._getBeta();s.k1.negative&&(s.k1.ineg(),u=u.neg(!0)),s.k2.negative&&(s.k2.ineg(),f=f.neg(!0)),i[a*2]=u,i[a*2+1]=f,o[a*2]=s.k1,o[a*2+1]=s.k2}for(var c=this._wnafMulAdd(1,i,o,a*2,n),h=0;h<a*2;h++)i[h]=null,o[h]=null;return c};function Kt(t,e,r,n){So.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new qe(e,16),this.y=new qe(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}jh(Kt,So.BasePoint);dn.prototype.point=function(e,r,n){return new Kt(this,e,r,n)};dn.prototype.pointFromJSON=function(e,r){return Kt.fromJSON(this,e,r)};Kt.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Kt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Kt.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function o(s){return e.point(s[0],s[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(o))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(o))}},i};Kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Kt.prototype.isInfinity=function(){return this.inf};Kt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Kt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),a=o.redSqr().redISub(this.x.redAdd(this.x)),s=o.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)};Kt.prototype.getX=function(){return this.x.fromRed()};Kt.prototype.getY=function(){return this.y.fromRed()};Kt.prototype.mul=function(e){return e=new qe(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Kt.prototype.mulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};Kt.prototype.jmulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};Kt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Kt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Kt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function or(t,e,r,n){So.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new qe(0)):(this.x=new qe(e,16),this.y=new qe(r,16),this.z=new qe(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}jh(or,So.BasePoint);dn.prototype.jpoint=function(e,r,n){return new or(this,e,r,n)};or.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};or.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};or.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),u=i.redSub(o),f=a.redSub(s);if(u.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=u.redSqr(),h=c.redMul(u),b=i.redMul(c),w=f.redSqr().redIAdd(h).redISub(b).redISub(b),A=f.redMul(b.redISub(w)).redISub(a.redMul(h)),_=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(w,A,_)};or.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),o=this.y,a=e.y.redMul(r).redMul(this.z),s=n.redSub(i),u=o.redSub(a);if(s.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=s.redSqr(),c=f.redMul(s),h=n.redMul(f),b=u.redSqr().redIAdd(c).redISub(h).redISub(h),w=u.redMul(h.redISub(b)).redISub(o.redMul(c)),A=this.z.redMul(s);return this.curve.jpoint(b,w,A)};or.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,a=this.x,s=this.y,u=this.z,f=u.redSqr().redSqr(),c=s.redAdd(s);for(r=0;r<e;r++){var h=a.redSqr(),b=c.redSqr(),w=b.redSqr(),A=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(f)),_=a.redMul(b),T=A.redSqr().redISub(_.redAdd(_)),P=_.redISub(T),F=A.redMul(P);F=F.redIAdd(F).redISub(w);var j=c.redMul(u);r+1<e&&(f=f.redMul(w)),a=T,u=j,c=F}return this.curve.jpoint(a,c.redMul(o),u)};or.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};or.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var u=i.redAdd(i).redIAdd(i),f=u.redSqr().redISub(s).redISub(s),c=a.redIAdd(a);c=c.redIAdd(c),c=c.redIAdd(c),e=f,r=u.redMul(s.redISub(f)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),b=this.y.redSqr(),w=b.redSqr(),A=this.x.redAdd(b).redSqr().redISub(h).redISub(w);A=A.redIAdd(A);var _=h.redAdd(h).redIAdd(h),T=_.redSqr(),P=w.redIAdd(w);P=P.redIAdd(P),P=P.redIAdd(P),e=T.redISub(A).redISub(A),r=_.redMul(A.redISub(e)).redISub(P),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};or.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),f=u.redSqr().redISub(s).redISub(s);e=f;var c=a.redIAdd(a);c=c.redIAdd(c),c=c.redIAdd(c),r=u.redMul(s.redISub(f)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),b=this.y.redSqr(),w=this.x.redMul(b),A=this.x.redSub(h).redMul(this.x.redAdd(h));A=A.redAdd(A).redIAdd(A);var _=w.redIAdd(w);_=_.redIAdd(_);var T=_.redAdd(_);e=A.redSqr().redISub(T),n=this.y.redAdd(this.z).redSqr().redISub(b).redISub(h);var P=b.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P),r=A.redMul(_.redISub(e)).redISub(P)}return this.curve.jpoint(e,r,n)};or.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),a=r.redSqr(),s=n.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(o)),f=r.redAdd(r);f=f.redIAdd(f);var c=f.redMul(s),h=u.redSqr().redISub(c.redAdd(c)),b=c.redISub(h),w=s.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var A=u.redMul(b).redISub(w),_=n.redAdd(n).redMul(i);return this.curve.jpoint(h,A,_)};or.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=e.redAdd(e).redIAdd(e),a=o.redSqr(),s=this.x.redAdd(r).redSqr().redISub(e).redISub(i);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(a);var u=s.redSqr(),f=i.redIAdd(i);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var c=o.redIAdd(s).redSqr().redISub(a).redISub(u).redISub(f),h=r.redMul(c);h=h.redIAdd(h),h=h.redIAdd(h);var b=this.x.redMul(u).redISub(h);b=b.redIAdd(b),b=b.redIAdd(b);var w=this.y.redMul(c.redMul(f.redISub(c)).redISub(s.redMul(u)));w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var A=this.z.redAdd(s).redSqr().redISub(n).redISub(u);return this.curve.jpoint(b,w,A)};or.prototype.mul=function(e,r){return e=new qe(e,r),this.curve._wnafMul(this,e)};or.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};or.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};or.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};or.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var wf=Ma(function(t,e){var r=e;r.base=So,r.short=R8,r.mont=null,r.edwards=null}),_f=Ma(function(t,e){var r=e,n=Jr.assert;function i(s){s.type==="short"?this.curve=new wf.short(s):s.type==="edwards"?this.curve=new wf.edwards(s):this.curve=new wf.mont(s),this.g=this.curve.g,this.n=this.curve.n,this.hash=s.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function o(s,u){Object.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){var f=new i(u);return Object.defineProperty(r,s,{configurable:!0,enumerable:!0,value:f}),f}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Cr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Cr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Cr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Cr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Cr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Cr.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Cr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Cr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Wi(t){if(!(this instanceof Wi))return new Wi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ln.toArray(t.entropy,t.entropyEnc||"hex"),r=Ln.toArray(t.nonce,t.nonceEnc||"hex"),n=Ln.toArray(t.pers,t.persEnc||"hex");Fh(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Hm=Wi;Wi.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Wi.prototype._hmac=function(){return new Cr.hmac(this.hash,this.K)};Wi.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Wi.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Ln.toArray(e,r),n=Ln.toArray(n,i),Fh(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Wi.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Ln.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(n),this._reseed++,Ln.encode(a,r)};var zh=Jr.assert;function br(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var qh=br;br.fromPublic=function(e,r,n){return r instanceof br?r:new br(e,{pub:r,pubEnc:n})};br.fromPrivate=function(e,r,n){return r instanceof br?r:new br(e,{priv:r,privEnc:n})};br.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};br.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};br.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};br.prototype._importPrivate=function(e,r){this.priv=new qe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};br.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?zh(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&zh(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};br.prototype.derive=function(e){return e.validate()||zh(e.validate(),"public point not validated"),e.mul(this.priv).getX()};br.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};br.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};br.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var C8=Jr.assert;function xf(t,e){if(t instanceof xf)return t;this._importDER(t,e)||(C8(t.r&&t.s,"Signature without r or s"),this.r=new qe(t.r,16),this.s=new qe(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Ef=xf;function L8(){this.place=0}function Gh(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function Wm(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}xf.prototype._importDER=function(e,r){e=Jr.toArray(e,r);var n=new L8;if(e[n.place++]!==48)return!1;var i=Gh(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=Gh(e,n);if(o===!1)return!1;var a=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var s=Gh(e,n);if(s===!1||e.length!==s+n.place)return!1;var u=e.slice(n.place,s+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new qe(a),this.s=new qe(u),this.recoveryParam=null,!0};function Hh(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}xf.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=Wm(r),n=Wm(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Hh(i,r.length),i=i.concat(r),i.push(2),Hh(i,n.length);var o=i.concat(n),a=[48];return Hh(a,o.length),a=a.concat(o),Jr.encode(a,e)};var D8=function(){throw new Error("unsupported")},Km=Jr.assert;function pn(t){if(!(this instanceof pn))return new pn(t);typeof t=="string"&&(Km(Object.prototype.hasOwnProperty.call(_f,t),"Unknown curve "+t),t=_f[t]),t instanceof _f.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var B8=pn;pn.prototype.keyPair=function(e){return new qh(this,e)};pn.prototype.keyFromPrivate=function(e,r){return qh.fromPrivate(this,e,r)};pn.prototype.keyFromPublic=function(e,r){return qh.fromPublic(this,e,r)};pn.prototype.genKeyPair=function(e){e||(e={});for(var r=new Hm({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||D8(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new qe(2));;){var o=new qe(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};pn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};pn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new qe(e,16));for(var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),s=e.toArray("be",o),u=new Hm({hash:this.hash,entropy:a,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new qe(1)),c=0;;c++){var h=i.k?i.k(c):new qe(u.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(f)>=0)){var b=this.g.mul(h);if(!b.isInfinity()){var w=b.getX(),A=w.umod(this.n);if(A.cmpn(0)!==0){var _=h.invm(this.n).mul(A.mul(r.getPrivate()).iadd(e));if(_=_.umod(this.n),_.cmpn(0)!==0){var T=(b.getY().isOdd()?1:0)|(w.cmp(A)!==0?2:0);return i.canonical&&_.cmp(this.nh)>0&&(_=this.n.sub(_),T^=1),new Ef({r:A,s:_,recoveryParam:T})}}}}}};pn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new qe(e,16)),n=this.keyFromPublic(n,i),r=new Ef(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s=a.invm(this.n),u=s.mul(e).umod(this.n),f=s.mul(o).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(u,n.getPublic(),f),c.isInfinity()?!1:c.eqXToP(o)):(c=this.g.mulAdd(u,n.getPublic(),f),c.isInfinity()?!1:c.getX().umod(this.n).cmp(o)===0)};pn.prototype.recoverPubKey=function(t,e,r,n){Km((3&r)===r,"The recovery param is more than two bits"),e=new Ef(e,n);var i=this.n,o=new qe(t),a=e.r,s=e.s,u=r&1,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?a=this.curve.pointFromX(a.add(this.curve.n),u):a=this.curve.pointFromX(a,u);var c=e.r.invm(i),h=i.sub(o).mul(c).umod(i),b=s.mul(c).umod(i);return this.g.mulAdd(h,a,b)};pn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Ef(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var U8=Ma(function(t,e){var r=e;r.version="6.5.4",r.utils=Jr,r.rand=function(){throw new Error("unsupported")},r.curve=wf,r.curves=_f,r.ec=B8,r.eddsa=null}),F8=U8.ec;const j8="signing-key/5.5.0",Vm=new ce(j8);let Wh=null;function oi(){return Wh||(Wh=new F8("secp256k1")),Wh}class z8{constructor(e){dt(this,"curve","secp256k1"),dt(this,"privateKey",tt(e));const r=oi().keyFromPrivate(ot(this.privateKey));dt(this,"publicKey","0x"+r.getPublic(!1,"hex")),dt(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),dt(this,"_isSigningKey",!0)}_addPoint(e){const r=oi().keyFromPublic(ot(this.publicKey)),n=oi().keyFromPublic(ot(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=oi().keyFromPrivate(ot(this.privateKey)),n=ot(e);n.length!==32&&Vm.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return ff({recoveryParam:i.recoveryParam,r:jt("0x"+i.r.toString(16),32),s:jt("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=oi().keyFromPrivate(ot(this.privateKey)),n=oi().keyFromPublic(ot(Jm(e)));return jt("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function q8(t,e){const r=ff(e),n={r:ot(r.r),s:ot(r.s)};return"0x"+oi().recoverPubKey(ot(t),n,r.recoveryParam).encode("hex",!1)}function Jm(t,e){const r=ot(t);if(r.length===32){const n=new z8(r);return e?"0x"+oi().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?tt(r):"0x"+oi().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+oi().keyFromPublic(r).getPublic(!0,"hex"):tt(r)}return Vm.throwArgumentError("invalid public or private key","key","[REDACTED]")}const G8="transactions/5.5.0",Pi=new ce(G8);var Ym;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(Ym||(Ym={}));function Kh(t){return t==="0x"?null:Nn(t)}function yr(t){return t==="0x"?A4:Te.from(t)}function H8(t){const e=Jm(t);return Nn(zi(ir(zi(e,1)),12))}function Xm(t,e){return H8(q8(ot(t),e))}function Yr(t,e){const r=ya(Te.from(t).toHexString());return r.length>32&&Pi.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Vh(t,e){return{address:Nn(t),storageKeys:(e||[]).map((r,n)=>(Ps(r)!==32&&Pi.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function $s(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Pi.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Vh(r[0],r[1])):Vh(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,o)=>(i[o]=!0,i),{});return Vh(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function Zm(t){return $s(t).map(e=>[e.address,e.storageKeys])}function W8(t,e){if(t.gasPrice!=null){const n=Te.from(t.gasPrice),i=Te.from(t.maxFeePerGas||0);n.eq(i)||Pi.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[Yr(t.chainId||0,"chainId"),Yr(t.nonce||0,"nonce"),Yr(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Yr(t.maxFeePerGas||0,"maxFeePerGas"),Yr(t.gasLimit||0,"gasLimit"),t.to!=null?Nn(t.to):"0x",Yr(t.value||0,"value"),t.data||"0x",Zm(t.accessList||[])];if(e){const n=ff(e);r.push(Yr(n.recoveryParam,"recoveryParam")),r.push(ya(n.r)),r.push(ya(n.s))}return Jn(["0x02",df(r)])}function K8(t,e){const r=[Yr(t.chainId||0,"chainId"),Yr(t.nonce||0,"nonce"),Yr(t.gasPrice||0,"gasPrice"),Yr(t.gasLimit||0,"gasLimit"),t.to!=null?Nn(t.to):"0x",Yr(t.value||0,"value"),t.data||"0x",Zm(t.accessList||[])];if(e){const n=ff(e);r.push(Yr(n.recoveryParam,"recoveryParam")),r.push(ya(n.r)),r.push(ya(n.s))}return Jn(["0x01",df(r)])}function Qm(t,e,r){try{const n=yr(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{Pi.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=jt(e[1],32),t.s=jt(e[2],32);try{const n=ir(r(t));t.from=Xm(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch(n){console.log(n)}}function V8(t){const e=Ph(t.slice(1));e.length!==9&&e.length!==12&&Pi.throwArgumentError("invalid component count for transaction type: 2","payload",tt(t));const r=yr(e[2]),n=yr(e[3]),i={type:2,chainId:yr(e[0]).toNumber(),nonce:yr(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:yr(e[4]),to:Kh(e[5]),value:yr(e[6]),data:e[7],accessList:$s(e[8])};return e.length===9||(i.hash=ir(t),Qm(i,e.slice(9),W8)),i}function J8(t){const e=Ph(t.slice(1));e.length!==8&&e.length!==11&&Pi.throwArgumentError("invalid component count for transaction type: 1","payload",tt(t));const r={type:1,chainId:yr(e[0]).toNumber(),nonce:yr(e[1]).toNumber(),gasPrice:yr(e[2]),gasLimit:yr(e[3]),to:Kh(e[4]),value:yr(e[5]),data:e[6],accessList:$s(e[7])};return e.length===8||(r.hash=ir(t),Qm(r,e.slice(8),K8)),r}function Y8(t){const e=Ph(t);e.length!==9&&e.length!==6&&Pi.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:yr(e[0]).toNumber(),gasPrice:yr(e[1]),gasLimit:yr(e[2]),to:Kh(e[3]),value:yr(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=Te.from(e[6]).toNumber()}catch(n){return console.log(n),r}if(r.r=jt(e[7],32),r.s=jt(e[8],32),Te.from(r.r).isZero()&&Te.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(tt(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const o=ir(df(i));try{r.from=Xm(o,{r:tt(r.r),s:tt(r.s),recoveryParam:n})}catch(a){console.log(a)}r.hash=ir(t)}return r.type=null,r}function X8(t){const e=ot(t);if(e[0]>127)return Y8(e);switch(e[0]){case 1:return J8(e);case 2:return V8(e)}return Pi.throwError(`unsupported transaction type: ${e[0]}`,ce.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}class eb{constructor(e){dt(this,"alphabet",e),dt(this,"base",e.length),dt(this,"_alphabetMap",{}),dt(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=ot(e);if(r.length===0)return"";let n=[0];for(let o=0;o<r.length;++o){let a=r[o];for(let s=0;s<n.length;++s)a+=n[s]<<8,n[s]=a%this.base,a=a/this.base|0;for(;a>0;)n.push(a%this.base),a=a/this.base|0}let i="";for(let o=0;r[o]===0&&o<r.length-1;++o)i+=this._leader;for(let o=n.length-1;o>=0;--o)i+=this.alphabet[n[o]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let o=i;for(let a=0;a<r.length;++a)o+=r[a]*this.base,r[a]=o&255,o>>=8;for(;o>0;)r.push(o&255),o>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return ot(new Uint8Array(r.reverse()))}}new eb("abcdefghijklmnopqrstuvwxyz234567");const tb=new eb("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Z8="sha2/5.5.0";new ce(Z8);function rb(t){return"0x"+Cr.sha256().update(ot(t)).digest("hex")}const Q8="networks/5.5.0",nb=new ce(Q8);function eI(t){return t&&typeof t.renetwork=="function"}function ka(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider)try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider)try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider)try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider){const o=["goerli","ropsten","rinkeby"];try{const a=new r.PocketProvider(t);a.network&&o.indexOf(a.network.name)===-1&&i.push(a)}catch{}}if(r.CloudflareProvider)try{i.push(new r.CloudflareProvider(t))}catch{}if(i.length===0)return null;if(r.FallbackProvider){let o=1;return n.quorum!=null?o=n.quorum:t==="homestead"&&(o=2),new r.FallbackProvider(i,o)}return i[0]};return e.renetwork=function(r){return ka(r)},e}function Sf(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return Sf(t,n)},r}const ib={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ka("homestead")},ob={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ka("ropsten")},ab={chainId:63,name:"classicMordor",_defaultProvider:Sf("https://www.ethercluster.com/mordor","classicMordor")},Af={unspecified:{chainId:0,name:"unspecified"},homestead:ib,mainnet:ib,morden:{chainId:2,name:"morden"},ropsten:ob,testnet:ob,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ka("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ka("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ka("goerli")},classic:{chainId:61,name:"classic",_defaultProvider:Sf("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:ab,classicTestnet:ab,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Sf("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function tI(t){if(t==null)return null;if(typeof t=="number"){for(const n in Af){const i=Af[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=Af[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Af[t.name];if(!e)return typeof t.chainId!="number"&&nb.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&nb.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(eI(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}function rI(t){t=ot(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}const nI="web/5.5.0";var iI=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};function oI(t,e){return iI(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client");const n=yield fetch(t,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach((a,s)=>{o[s.toLowerCase()]=a}):n.headers.keys().forEach(a=>{o[a.toLowerCase()]=n.headers.get(a)}),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:ot(new Uint8Array(i))}})}var aI=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};const ai=new ce(nI);function sb(t){return new Promise(e=>{setTimeout(e,t)})}function Ao(t,e){if(t==null)return null;if(typeof t=="string")return t;if(Eh(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Ts(t)}catch{}return tt(t)}return t}function sI(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;ai.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,o=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;ai.assertArgument(o>0&&o%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const a={};let s=null;const u={method:"GET"};let f=!1,c=2*60*1e3;if(typeof t=="string")s=t;else if(typeof t=="object"){if((t==null||t.url==null)&&ai.throwArgumentError("missing URL","connection.url",t),s=t.url,typeof t.timeout=="number"&&t.timeout>0&&(c=t.timeout),t.headers)for(const A in t.headers)a[A.toLowerCase()]={key:A,value:String(t.headers[A])},["if-none-match","if-modified-since"].indexOf(A.toLowerCase())>=0&&(f=!0);if(u.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){s.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&ai.throwError("basic authentication requires a secure https url",ce.errors.INVALID_ARGUMENT,{argument:"url",url:s,user:t.user,password:"[REDACTED]"});const A=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+rI(qi(A))}}}e&&(u.method="POST",u.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const h={};Object.keys(a).forEach(A=>{const _=a[A];h[_.key]=_.value}),u.headers=h;const b=function(){let A=null;return{promise:new Promise(function(P,F){c&&(A=setTimeout(()=>{A!=null&&(A=null,F(ai.makeError("timeout",ce.errors.TIMEOUT,{requestBody:Ao(u.body,h["content-type"]),requestMethod:u.method,timeout:c,url:s})))},c))}),cancel:function(){A!=null&&(clearTimeout(A),A=null)}}}(),w=function(){return aI(this,void 0,void 0,function*(){for(let A=0;A<n;A++){let _=null;try{if(_=yield oI(s,u),_.statusCode===429&&A<n){let P=!0;if(i&&(P=yield i(A,s)),P){let F=0;const j=_.headers["retry-after"];typeof j=="string"&&j.match(/^[1-9][0-9]*$/)?F=parseInt(j)*1e3:F=o*parseInt(String(Math.random()*Math.pow(2,A))),yield sb(F);continue}}}catch(P){_=P.response,_==null&&(b.cancel(),ai.throwError("missing response",ce.errors.SERVER_ERROR,{requestBody:Ao(u.body,h["content-type"]),requestMethod:u.method,serverError:P,url:s}))}let T=_.body;if(f&&_.statusCode===304?T=null:(_.statusCode<200||_.statusCode>=300)&&(b.cancel(),ai.throwError("bad response",ce.errors.SERVER_ERROR,{status:_.statusCode,headers:_.headers,body:Ao(T,_.headers?_.headers["content-type"]:null),requestBody:Ao(u.body,h["content-type"]),requestMethod:u.method,url:s})),r)try{const P=yield r(T,_);return b.cancel(),P}catch(P){if(P.throttleRetry&&A<n){let F=!0;if(i&&(F=yield i(A,s)),F){const j=o*parseInt(String(Math.random()*Math.pow(2,A)));yield sb(j);continue}}b.cancel(),ai.throwError("processing response error",ce.errors.SERVER_ERROR,{body:Ao(T,_.headers?_.headers["content-type"]:null),error:P,requestBody:Ao(u.body,h["content-type"]),requestMethod:u.method,url:s})}return b.cancel(),T}return ai.throwError("failed response",ce.errors.SERVER_ERROR,{requestBody:Ao(u.body,h["content-type"]),requestMethod:u.method,url:s})})}();return Promise.race([b.promise,w])}function ub(t,e,r){let n=(o,a)=>{let s=null;if(o!=null)try{s=JSON.parse(Ts(o))}catch(u){ai.throwError("invalid JSON",ce.errors.SERVER_ERROR,{body:o,error:u})}return r&&(s=r(s,a)),s},i=null;if(e!=null){i=qi(e);const o=typeof t=="string"?{url:t}:Wr(t);o.headers?Object.keys(o.headers).filter(s=>s.toLowerCase()==="content-type").length!==0||(o.headers=Wr(o.headers),o.headers["content-type"]="application/json"):o.headers={"content-type":"application/json"},t=o}return sI(t,i,n)}function Rs(t,e){return e||(e={}),e=Wr(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,o=!1;const a=()=>o?!1:(o=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{a()&&n(new Error("timeout"))},e.timeout));const s=e.retryLimit;let u=0;function f(){return t().then(function(c){if(c!==void 0)a()&&r(c);else if(e.oncePoll)e.oncePoll.once("poll",f);else if(e.onceBlock)e.onceBlock.once("block",f);else if(!o){if(u++,u>s){a()&&n(new Error("retry limit reached"));return}let h=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));h<e.floor&&(h=e.floor),h>e.ceiling&&(h=e.ceiling),setTimeout(f,h)}return null},function(c){a()&&n(c)})}f()})}var If="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Jh={};for(var Pf=0;Pf<If.length;Pf++){var Yh=If.charAt(Pf);if(Jh[Yh]!==void 0)throw new TypeError(Yh+" is ambiguous");Jh[Yh]=Pf}function Ta(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function fb(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Ta(e)^n>>5}for(e=Ta(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Ta(e)^i&31}return e}function uI(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=fb(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",o=0;o<e.length;++o){var a=e[o];if(a>>5!=0)throw new Error("Non 5-bit word");n=Ta(n)^a,i+=If.charAt(a)}for(o=0;o<6;++o)n=Ta(n);for(n^=1,o=0;o<6;++o){var s=n>>(5-o)*5&31;i+=If.charAt(s)}return i}function cb(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var o=t.slice(0,i),a=t.slice(i+1);if(a.length<6)return"Data too short";var s=fb(o);if(typeof s=="string")return s;for(var u=[],f=0;f<a.length;++f){var c=a.charAt(f),h=Jh[c];if(h===void 0)return"Unknown character "+c;s=Ta(s)^h,!(f+6>=a.length)&&u.push(h)}return s!==1?"Invalid checksum for "+t:{prefix:o,words:u}}function fI(){var t=cb.apply(null,arguments);if(typeof t=="object")return t}function cI(t){var e=cb.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Mf(t,e,r,n){for(var i=0,o=0,a=(1<<r)-1,s=[],u=0;u<t.length;++u)for(i=i<<e|t[u],o+=e;o>=r;)o-=r,s.push(i>>o&a);if(n)o>0&&s.push(i<<r-o&a);else{if(o>=e)return"Excess padding";if(i<<r-o&a)return"Non-zero padding"}return s}function lI(t){var e=Mf(t,8,5,!0);if(Array.isArray(e))return e}function hI(t){var e=Mf(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function dI(t){var e=Mf(t,5,8,!1);if(Array.isArray(e))return e}function pI(t){var e=Mf(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var lb={decodeUnsafe:fI,decode:cI,encode:uI,toWordsUnsafe:lI,toWords:hI,fromWordsUnsafe:dI,fromWords:pI};const kf="providers/5.5.0",Na=new ce(kf);class Ae{constructor(){Na.checkNew(new.target,Ae),this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),o=this.data.bind(this),a=this.hash.bind(this),s=this.hex.bind(this),u=this.number.bind(this),f=this.type.bind(this),c=h=>this.data(h,!0);return e.transaction={hash:a,type:f,accessList:Ae.allowNull(this.accessList.bind(this),null),blockHash:Ae.allowNull(a,null),blockNumber:Ae.allowNull(u,null),transactionIndex:Ae.allowNull(u,null),confirmations:Ae.allowNull(u,null),from:r,gasPrice:Ae.allowNull(n),maxPriorityFeePerGas:Ae.allowNull(n),maxFeePerGas:Ae.allowNull(n),gasLimit:n,to:Ae.allowNull(r,null),value:n,nonce:u,data:o,r:Ae.allowNull(this.uint256),s:Ae.allowNull(this.uint256),v:Ae.allowNull(u),creates:Ae.allowNull(r,null),raw:Ae.allowNull(o)},e.transactionRequest={from:Ae.allowNull(r),nonce:Ae.allowNull(u),gasLimit:Ae.allowNull(n),gasPrice:Ae.allowNull(n),maxPriorityFeePerGas:Ae.allowNull(n),maxFeePerGas:Ae.allowNull(n),to:Ae.allowNull(r),value:Ae.allowNull(n),data:Ae.allowNull(c),type:Ae.allowNull(u),accessList:Ae.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:u,blockNumber:u,transactionHash:a,address:r,topics:Ae.arrayOf(a),data:o,logIndex:u,blockHash:a},e.receipt={to:Ae.allowNull(this.address,null),from:Ae.allowNull(this.address,null),contractAddress:Ae.allowNull(r,null),transactionIndex:u,root:Ae.allowNull(s),gasUsed:n,logsBloom:Ae.allowNull(o),blockHash:a,transactionHash:a,logs:Ae.arrayOf(this.receiptLog.bind(this)),blockNumber:u,confirmations:Ae.allowNull(u,null),cumulativeGasUsed:n,effectiveGasPrice:Ae.allowNull(n),status:Ae.allowNull(u),type:f},e.block={hash:a,parentHash:a,number:u,timestamp:u,nonce:Ae.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:r,extraData:o,transactions:Ae.allowNull(Ae.arrayOf(a)),baseFeePerGas:Ae.allowNull(n)},e.blockWithTransactions=Wr(e.block),e.blockWithTransactions.transactions=Ae.allowNull(Ae.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Ae.allowNull(i,void 0),toBlock:Ae.allowNull(i,void 0),blockHash:Ae.allowNull(a,void 0),address:Ae.allowNull(r,void 0),topics:Ae.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Ae.allowNull(u),blockHash:Ae.allowNull(a),transactionIndex:u,removed:Ae.allowNull(this.boolean.bind(this)),address:r,data:Ae.allowFalsish(o,"0x"),topics:Ae.arrayOf(a),transactionHash:a,logIndex:u},e}accessList(e){return $s(e||[])}number(e){return e==="0x"?0:Te.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Te.from(e).toNumber()}bigNumber(e){return Te.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),Mt(e))?e.toLowerCase():Na.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!=0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Nn(e)}callAddress(e){if(!Mt(e,32))return null;const r=Nn(zi(e,12));return r===S4?null:r}contractAddress(e){return E4(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";if(e==="latest"||e==="pending")return e;if(typeof e=="number"||Mt(e))return Ah(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return Ps(n)!==32?Na.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=Te.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!Mt(e))throw new Error("invalid uint256");return jt(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Ae.check(r,e);return i._difficulty=n==null?null:Te.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Ae.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Te.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=Ae.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Mt(n)&&(n=Te.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),Mt(n)&&(n=Te.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return X8(e)}receiptLog(e){return Ae.check(this.formats.receiptLog,e)}receipt(e){const r=Ae.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=Te.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&Na.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Na.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&Na.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return Ae.check(this.formats.filter,e)}filterLog(e){return Ae.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const o=e[i](r[i]);o!==void 0&&(n[i]=o)}catch(o){throw o.checkKey=i,o.checkValue=r[i],o}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}var Ze=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};const bt=new ce(kf);function hb(t){return t==null?"null":(Ps(t)!==32&&bt.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function db(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[hb(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return hb(e)}).join("&")}function vI(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function Oa(t){if(typeof t=="string"){if(t=t.toLowerCase(),Ps(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+db(t);if(tA.isForkEvent(t))throw bt.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+db(t.topics||[])}throw new Error("invalid event - "+t)}function Cs(){return new Date().getTime()}function pb(t){return new Promise(e=>{setTimeout(e,t)})}const mI=["block","network","pending","poll"];class bI{constructor(e,r,n){dt(this,"tag",e),dt(this,"listener",r),dt(this,"once",n)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=vI(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||mI.indexOf(this.tag)>=0}}const yI={"0":{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},"2":{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},"3":{symbol:"doge",p2pkh:30,p2sh:22},"60":{symbol:"eth",ilk:"eth"},"61":{symbol:"etc",ilk:"eth"},"700":{symbol:"xdai",ilk:"eth"}};function Xh(t){return jt(Te.from(t).toHexString(),32)}function vb(t){return tb.encode(ba([t,zi(rb(rb(t)),0,4)]))}const mb=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),new RegExp("^(ipfs)://(.*)$","i"),new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function gI(t){try{return Ts(bb(t))}catch{}return null}function bb(t){if(t==="0x")return null;const e=Te.from(zi(t,0,32)).toNumber(),r=Te.from(zi(t,e,e+32)).toNumber();return zi(t,e+32,e+32+r)}class yb{constructor(e,r,n,i){dt(this,"provider",e),dt(this,"name",n),dt(this,"address",e.formatter.address(r)),dt(this,"_resolvedAddress",i)}_fetchBytes(e,r){return Ze(this,void 0,void 0,function*(){const n={to:this.address,data:Jn([e,pf(this.name),r||"0x"])};try{return bb(yield this.provider.call(n))}catch(i){return i.code===ce.errors.CALL_EXCEPTION,null}})}_getAddress(e,r){const n=yI[String(e)];if(n==null&&bt.throwError(`unsupported coin type: ${e}`,ce.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=ot(r);if(n.p2pkh!=null){const o=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(o){const a=parseInt(o[1],16);if(o[2].length===a*2&&a>=1&&a<=75)return vb(ba([[n.p2pkh],"0x"+o[2]]))}}if(n.p2sh!=null){const o=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(o){const a=parseInt(o[1],16);if(o[2].length===a*2&&a>=1&&a<=75)return vb(ba([[n.p2sh],"0x"+o[2]]))}}if(n.prefix!=null){const o=i[1];let a=i[0];if(a===0?o!==20&&o!==32&&(a=-1):a=-1,a>=0&&i.length===2+o&&o>=1&&o<=75){const s=lb.toWords(i.slice(2));return s.unshift(a),lb.encode(n.prefix,s)}}return null}getAddress(e){return Ze(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i={to:this.address,data:"0x3b3b57de"+pf(this.name).substring(2)},o=yield this.provider.call(i);return o==="0x"||o===I4?null:this.provider.formatter.callAddress(o)}catch(i){if(i.code===ce.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",Xh(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&bt.throwError("invalid or unsupported coin data",ce.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return Ze(this,void 0,void 0,function*(){const e=[];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<mb.length;n++){const i=r.match(mb[n]);if(i!=null)switch(i[1]){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:`https://gateway.ipfs.io/ipfs/${r.substring(7)}`};case"erc721":case"erc1155":{const o=i[1]==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:i[1],content:r});const a=this._resolvedAddress||(yield this.getAddress()),s=(i[2]||"").split("/");if(s.length!==2)return null;const u=yield this.provider.formatter.address(s[0]),f=jt(Te.from(s[1]).toHexString(),32);if(i[1]==="erc721"){const w=this.provider.formatter.callAddress(yield this.provider.call({to:u,data:Jn(["0x6352211e",f])}));if(a!==w)return null;e.push({type:"owner",content:w})}else if(i[1]==="erc1155"){const w=Te.from(yield this.provider.call({to:u,data:Jn(["0x00fdd58e",jt(a,32),f])}));if(w.isZero())return null;e.push({type:"balance",content:w.toString()})}const c={to:this.provider.formatter.address(s[0]),data:Jn([o,f])};let h=gI(yield this.provider.call(c));if(h==null)return null;e.push({type:"metadata-url",content:h}),i[1]==="erc1155"&&(h=h.replace("{id}",f.substring(2)));const b=yield ub(h);return!b||typeof b.image!="string"||!b.image.match(/^https:\/\//i)?null:(e.push({type:"metadata",content:JSON.stringify(b)}),e.push({type:"url",content:b.image}),{linkage:e,url:b.image})}}}}catch{}return null})}getContentHash(){return Ze(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const i=parseInt(r[3],16);if(r[4].length===i*2)return"ipfs://"+tb.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);return n&&n[1].length===32*2?"bzz://"+n[1]:bt.throwError("invalid or unsupported content hash data",ce.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Ze(this,void 0,void 0,function*(){let r=qi(e);r=ba([Xh(64),Xh(r.length),r]),r.length%32!=0&&(r=ba([r,jt("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",tt(r));return n==null||n==="0x"?null:Ts(n)})}}let Zh=null,wI=1;class _I extends vf{constructor(e){bt.checkNew(new.target,vf);super();if(this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),dt(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=ks(new.target,"getNetwork")(e);r?(dt(this,"_network",r),this.emit("network",r,null)):bt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Ze(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||bt.throwError("no network detected",ce.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:dt(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Rs(()=>this._ready().then(e=>e,e=>{if(!(e.code===ce.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Zh==null&&(Zh=new Ae),Zh}static getNetwork(e){return tI(e==null?"homestead":e)}_getInternalBlockNumber(e){return Ze(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const o=yield i;if(Cs()-o.respTime<=e)return o.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=Cs(),n=nr({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:o})=>{if(o)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),o;const a=Cs();return i=Te.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:a}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return Ze(this,void 0,void 0,function*(){const e=wI++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)bt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",bt.makeError("network block skew detected",ce.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const o=this._emitted[i];o!=="pending"&&n-o>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const o=i.hash;let a=this.getTransactionReceipt(o).then(s=>(!s||s.blockNumber==null||(this._emitted["t:"+o]=s.blockNumber,this.emit(o,s)),null)).catch(s=>{this.emit("error",s)});r.push(a);break}case"filter":{const o=i.filter;o.fromBlock=this._lastBlockNumber+1,o.toBlock=n;const a=this.getLogs(o).then(s=>{s.length!==0&&s.forEach(u=>{this._emitted["b:"+u.blockHash]=u.blockNumber,this._emitted["t:"+u.transactionHash]=u.blockNumber,this.emit(o,u)})}).catch(s=>{this.emit("error",s)});r.push(a);break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Ze(this,void 0,void 0,function*(){return bt.throwError("provider does not support network detection",ce.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Ze(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield pb(0),this._network;const n=bt.makeError("underlying network changed",ce.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Cs();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Cs(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return Ze(this,void 0,void 0,function*(){return this._waitForTransaction(e,r==null?1:r,n||0,null)})}_waitForTransaction(e,r,n,i){return Ze(this,void 0,void 0,function*(){const o=yield this.getTransactionReceipt(e);return(o?o.confirmations:0)>=r?o:new Promise((a,s)=>{const u=[];let f=!1;const c=function(){return f?!0:(f=!0,u.forEach(b=>{b()}),!1)},h=b=>{b.confirmations<r||c()||a(b)};if(this.on(e,h),u.push(()=>{this.removeListener(e,h)}),i){let b=i.startBlock,w=null;const A=_=>Ze(this,void 0,void 0,function*(){f||(yield pb(1e3),this.getTransactionCount(i.from).then(T=>Ze(this,void 0,void 0,function*(){if(!f){if(T<=i.nonce)b=_;else{{const P=yield this.getTransaction(e);if(P&&P.blockNumber!=null)return}for(w==null&&(w=b-3,w<i.startBlock&&(w=i.startBlock));w<=_;){if(f)return;const P=yield this.getBlockWithTransactions(w);for(let F=0;F<P.transactions.length;F++){const j=P.transactions[F];if(j.hash===e)return;if(j.from===i.from&&j.nonce===i.nonce){if(f)return;const U=yield this.waitForTransaction(j.hash,r);if(c())return;let L="replaced";j.data===i.data&&j.to===i.to&&j.value.eq(i.value)?L="repriced":j.data==="0x"&&j.from===j.to&&j.value.isZero()&&(L="cancelled"),s(bt.makeError("transaction was replaced",ce.errors.TRANSACTION_REPLACED,{cancelled:L==="replaced"||L==="cancelled",reason:L,replacement:this._wrapTransaction(j),hash:e,receipt:U}));return}}w++}}f||this.once("block",A)}}),T=>{f||this.once("block",A)}))});if(f)return;this.once("block",A),u.push(()=>{this.removeListener("block",A)})}if(typeof n=="number"&&n>0){const b=setTimeout(()=>{c()||s(bt.makeError("timeout exceeded",ce.errors.TIMEOUT,{timeout:n}))},n);b.unref&&b.unref(),u.push(()=>{clearTimeout(b)})}})})}getBlockNumber(){return Ze(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Te.from(e)}catch(r){return bt.throwError("bad result from backend",ce.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield nr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return Te.from(i)}catch(o){return bt.throwError("bad result from backend",ce.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:o})}})}getTransactionCount(e,r){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield nr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return Te.from(i).toNumber()}catch(o){return bt.throwError("bad result from backend",ce.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:o})}})}getCode(e,r){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield nr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return tt(i)}catch(o){return bt.throwError("bad result from backend",ce.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:o})}})}getStorageAt(e,r,n){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield nr({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(a=>Ah(a))}),o=yield this.perform("getStorageAt",i);try{return tt(o)}catch(a){return bt.throwError("bad result from backend",ce.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:o,error:a})}})}_wrapTransaction(e,r,n){if(r!=null&&Ps(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&bt.throwError("Transaction hash mismatch from Provider.sendTransaction.",ce.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(o,a)=>Ze(this,void 0,void 0,function*(){o==null&&(o=1),a==null&&(a=0);let s;o!==0&&n!=null&&(s={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const u=yield this._waitForTransaction(e.hash,o,a,s);return u==null&&o===0?null:(this._emitted["t:"+e.hash]=u.blockNumber,u.status===0&&bt.throwError("transaction failed",ce.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:u}),u)}),i}sendTransaction(e){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(o=>tt(o)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const o=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,o,i)}catch(o){throw o.transaction=n,o.transactionHash=n.hash,o}})}_getTransactionRequest(e){return Ze(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(o=>o?this._getAddress(o):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(o=>o?Te.from(o):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(o=>o!=null?o:null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(o=>o?tt(o):null))}),this.formatter.transactionRequest(yield nr(n))})}_getFilter(e){return Ze(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield nr(r))})}call(e,r){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield nr({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("call",n);try{return tt(i)}catch(o){return bt.throwError("bad result from backend",ce.errors.SERVER_ERROR,{method:"call",params:n,result:i,error:o})}})}estimateGas(e){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield nr({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return Te.from(n)}catch(i){return bt.throwError("bad result from backend",ce.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return Ze(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&bt.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&bt.throwError("ENS name not configured",ce.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return Ze(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(Mt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Mt(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{bt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Rs(()=>Ze(this,void 0,void 0,function*(){const o=yield this.perform("getBlock",i);if(o==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let a=null;for(let u=0;u<o.transactions.length;u++){const f=o.transactions[u];if(f.blockNumber==null)f.confirmations=0;else if(f.confirmations==null){a==null&&(a=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=a-f.blockNumber+1;c<=0&&(c=1),f.confirmations=c}}const s=this.formatter.blockWithTransactions(o);return s.transactions=s.transactions.map(u=>this._wrapTransaction(u)),s}return this.formatter.block(o)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Ze(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Rs(()=>Ze(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;a<=0&&(a=1),i.confirmations=a}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return Ze(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Rs(()=>Ze(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;a<=0&&(a=1),i.confirmations=a}return i}),{oncePoll:this})})}getLogs(e){return Ze(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield nr({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),Ae.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return Ze(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Ze(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&bt.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return Ze(this,void 0,void 0,function*(){try{const r=yield this._getResolver(e);return r==null?null:new yb(this,r,e)}catch(r){return r.code===ce.errors.CALL_EXCEPTION,null}})}_getResolver(e){return Ze(this,void 0,void 0,function*(){const r=yield this.getNetwork();r.ensAddress||bt.throwError("network does not support ENS",ce.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:r.name});const n={to:r.ensAddress,data:"0x0178b8bf"+pf(e).substring(2)};try{return this.formatter.callAddress(yield this.call(n))}catch(i){if(i.code===ce.errors.CALL_EXCEPTION)return null;throw i}})}resolveName(e){return Ze(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Mt(e))throw n}typeof e!="string"&&bt.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return Ze(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r);if(!n)return null;let i=ot(yield this.call({to:n,data:"0x691f3431"+pf(r).substring(2)}));if(i.length<32||!Te.from(i.slice(0,32)).eq(32)||(i=i.slice(32),i.length<32))return null;const o=Te.from(i.slice(0,32)).toNumber();if(i=i.slice(32),o>i.length)return null;const a=Ts(i.slice(0,o));return(yield this.resolveName(a))!=e?null:a})}getAvatar(e){return Ze(this,void 0,void 0,function*(){let r=null;if(Mt(e)){const i=this.formatter.address(e),o=i.substring(2).toLowerCase()+".addr.reverse",a=yield this._getResolver(o);if(!a)return null;r=new yb(this,a,"_",i)}else r=yield this.getResolver(e);const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return bt.throwError(e+" not implemented",ce.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new bI(Oa(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],o=Oa(e);return this._events=this._events.filter(a=>a.tag!==o?!0:(setTimeout(()=>{a.listener.apply(this,r)},0),n=!0,a.once?(i.push(a),!1):!0)),i.forEach(a=>{this._stopEvent(a)}),n}listenerCount(e){if(!e)return this._events.length;let r=Oa(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=Oa(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,o=Oa(e);return this._events=this._events.filter(a=>a.tag!==o||a.listener!=r||i?!0:(i=!0,n.push(a),!1)),n.forEach(a=>{this._stopEvent(a)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=Oa(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var Mi=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};const ar=new ce(kf),xI=["call","estimateGas"];function gb(t,e,r){if(t==="call"&&e.code===ce.errors.SERVER_ERROR){const o=e.error;if(o&&o.message.match("reverted")&&Mt(o.data))return o.data;ar.throwError("missing revert data in call exception",ce.errors.CALL_EXCEPTION,{error:e,data:"0x"})}let n=e.message;e.code===ce.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText),n=(n||"").toLowerCase();const i=r.transaction||r.signedTransaction;throw n.match(/insufficient funds|base fee exceeds gas limit/)&&ar.throwError("insufficient funds for intrinsic transaction cost",ce.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:i}),n.match(/nonce too low/)&&ar.throwError("nonce has already been used",ce.errors.NONCE_EXPIRED,{error:e,method:t,transaction:i}),n.match(/replacement transaction underpriced/)&&ar.throwError("replacement fee too low",ce.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:i}),n.match(/only replay-protected/)&&ar.throwError("legacy pre-eip-155 transactions not supported",ce.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:i}),xI.indexOf(t)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&ar.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ce.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:i}),e}function wb(t){return new Promise(function(e){setTimeout(e,t)})}function EI(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Ls(t){return t&&t.toLowerCase()}const Qh={};class Tf extends Rh{constructor(e,r,n){ar.checkNew(new.target,Tf);super();if(e!==Qh)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");dt(this,"provider",r),n==null&&(n=0),typeof n=="string"?(dt(this,"_address",this.provider.formatter.address(n)),dt(this,"_index",null)):typeof n=="number"?(dt(this,"_index",n),dt(this,"_address",null)):ar.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return ar.throwError("cannot alter JSON-RPC Signer connection",ce.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new SI(Qh,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&ar.throwError("unknown account #"+this._index,ce.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Wr(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Wr(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>Mi(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&ar.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),nr({tx:nr(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&ar.throwArgumentError("from address mismatch","transaction",e):n.from=i;const o=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[o]).then(a=>a,a=>gb("sendTransaction",a,o))})}signTransaction(e){return ar.throwError("signing transactions is unsupported",ce.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Mi(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield Rs(()=>Mi(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return Mi(this,void 0,void 0,function*(){const r=typeof e=="string"?qi(e):e,n=yield this.getAddress();return yield this.provider.send("personal_sign",[tt(r),n.toLowerCase()])})}_legacySignMessage(e){return Mi(this,void 0,void 0,function*(){const r=typeof e=="string"?qi(e):e,n=yield this.getAddress();return yield this.provider.send("eth_sign",[n.toLowerCase(),tt(r)])})}_signTypedData(e,r,n){return Mi(this,void 0,void 0,function*(){const i=yield Vr.resolveNames(e,r,n,a=>this.provider.resolveName(a)),o=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(Vr.getPayload(i.domain,r,i.value))])})}unlock(e){return Mi(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class SI extends Tf{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const AI={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class e0 extends _I{constructor(e,r){ar.checkNew(new.target,e0);let n=r;n==null&&(n=new Promise((i,o)=>{setTimeout(()=>{this.detectNetwork().then(a=>{i(a)},a=>{o(a)})},0)}));super(n);e||(e=ks(this.constructor,"defaultUrl")()),typeof e=="string"?dt(this,"connection",Object.freeze({url:e})):dt(this,"connection",Object.freeze(Wr(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Mi(this,void 0,void 0,function*(){yield wb(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=ks(this.constructor,"getNetwork");try{return r(Te.from(e).toNumber())}catch(n){return ar.throwError("could not detect network",ce.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return ar.throwError("could not detect network",ce.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new Tf(Qh,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:_o(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const o=ub(this.connection,JSON.stringify(n),EI).then(a=>(this.emit("debug",{action:"response",request:n,response:a,provider:this}),a),a=>{throw this.emit("debug",{action:"response",error:a,request:n,provider:this}),a});return i&&(this._cache[e]=o,setTimeout(()=>{this._cache[e]=null},0)),o}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Ls(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Ls(r.address),r.blockTag]];case"getCode":return["eth_getCode",[Ls(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Ls(r.address),r.position,r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":{const n=ks(this.constructor,"hexlifyTransaction");return["eth_call",[n(r.transaction,{from:!0}),r.blockTag]]}case"estimateGas":{const n=ks(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[n(r.transaction,{from:!0})]]}case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=Ls(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return Mi(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&Te.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const o=yield this.getFeeData();o.maxFeePerGas==null&&o.maxPriorityFeePerGas==null&&(r=Wr(r),r.transaction=Wr(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&ar.throwError(e+" not implemented",ce.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return gb(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(o){if(e._pendingFilter!=r)return null;let a=Promise.resolve();return o.forEach(function(s){e._emitted["t:"+s.toLowerCase()]="pending",a=a.then(function(){return e.getTransaction(s).then(function(u){return e.emit("pending",u),null})})}),a.then(function(){return wb(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(o=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=Wr(AI);if(r)for(const o in r)r[o]&&(n[o]=!0);d4(e,n);const i={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(o){if(e[o]==null)return;const a=Ah(e[o]);o==="gasLimit"&&(o="gas"),i[o]=a}),["from","to","data"].forEach(function(o){e[o]!=null&&(i[o]=tt(e[o]))}),e.accessList&&(i.accessList=$s(e.accessList)),i}}const t0=new ce(kf);let II=1;function _b(t,e){const r="Web3LegacyFetcher";return function(n,i){const o={method:n,params:i,id:II++,jsonrpc:"2.0"};return new Promise((a,s)=>{this.emit("debug",{action:"request",fetcher:r,request:_o(o),provider:this}),e(o,(u,f)=>{if(u)return this.emit("debug",{action:"response",fetcher:r,error:u,request:o,provider:this}),s(u);if(this.emit("debug",{action:"response",fetcher:r,request:o,response:f,provider:this}),f.error){const c=new Error(f.error.message);return c.code=f.error.code,c.data=f.error.data,s(c)}a(f.result)})})}}function PI(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:_o(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class xb extends e0{constructor(e,r){t0.checkNew(new.target,xb),e==null&&t0.throwArgumentError("missing provider","provider",e);let n=null,i=null,o=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),o=e,e.request?(n===""&&(n="eip-1193:"),i=PI(e)):e.sendAsync?i=_b(e,e.sendAsync.bind(e)):e.send?i=_b(e,e.send.bind(e)):t0.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:"));super(n,r);dt(this,"jsonRpcFetchFunc",i),dt(this,"provider",o)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}var Eb={},Sb={};Object.defineProperty(Sb,"__esModule",{value:!0});var sr={},si={},r0={},Nf={},Of={};Object.defineProperty(Of,"__esModule",{value:!0});const Ab={name:"chainId",regex:"[-:a-zA-Z0-9]{5,64}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,16}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,47}"}}}},MI={name:"accountId",regex:"[-@:a-zA-Z0-9]{7,128}",parameters:{delimiter:"@",values:{0:{name:"address",regex:"[a-zA-Z0-9]{1,63}"},1:Ab}}};Of.CAIP={"2":Ab,"10":MI};var Io={};Object.defineProperty(Io,"__esModule",{value:!0});function n0(t,e){return t.split(e.parameters.delimiter)}Io.splitParams=n0;function kI(t,e){const r=n0(t,e),n={};return r.forEach((i,o)=>{n[e.parameters.values[o].name]=i}),n}Io.getParams=kI;function Ib(t,e){return Object.values(e.parameters.values).map(r=>{const n=t[r.name];return typeof n=="string"?n:Ib(n,r)}).join(e.parameters.delimiter)}Io.joinParams=Ib;function TI(t,e){if(!new RegExp(e.regex).test(t))return!1;const r=n0(t,e);return!(r.length!==Object.keys(e.parameters.values).length||r.map((i,o)=>new RegExp(e.parameters.values[o].regex).test(i)).filter(i=>!!i).length!==r.length)}Io.isValidId=TI;Object.defineProperty(Nf,"__esModule",{value:!0});const NI=Of,i0=Io;class $a{constructor(e){typeof e=="string"&&(e=$a.parse(e)),this.namespace=e.namespace,this.reference=e.reference}static parse(e){if(!i0.isValidId(e,this.spec))throw new Error(`Invalid ${this.spec.name} provided: ${e}`);return new $a(i0.getParams(e,this.spec)).toJson()}static format(e){return i0.joinParams(e,this.spec)}toString(){return $a.format(this.toJson())}toJson(){return{namespace:this.namespace,reference:this.reference}}}Nf.ChainID=$a;$a.spec=NI.CAIP["2"];Object.defineProperty(r0,"__esModule",{value:!0});const OI=Nf,$I=Of,o0=Io;class Ra{constructor(e){typeof e=="string"&&(e=Ra.parse(e)),this.chainId=new OI.ChainID(e.chainId),this.address=e.address}static parse(e){if(!o0.isValidId(e,this.spec))throw new Error(`Invalid ${this.spec.name} provided: ${e}`);return new Ra(o0.getParams(e,this.spec)).toJson()}static format(e){return o0.joinParams(e,this.spec)}toString(){return Ra.format(this.toJson())}toJson(){return{chainId:this.chainId.toJson(),address:this.address}}}r0.AccountID=Ra;Ra.spec=$I.CAIP["10"];(function(t){function e(r){for(var n in r)t.hasOwnProperty(n)||(t[n]=r[n])}Object.defineProperty(t,"__esModule",{value:!0}),e(r0),e(Nf)})(si);var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.encodeRpcMessage=Xr.getConsentMessage=void 0;function RI(t,e=!0){const r={message:`Link this account to your identity

`+t};return e&&(r.timestamp=Math.floor(Date.now()/1e3),r.message+=` 
Timestamp: `+r.timestamp),r}Xr.getConsentMessage=RI;function CI(t,e){return{jsonrpc:"2.0",id:1,method:t,params:e}}Xr.encodeRpcMessage=CI;function LI(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var DI=LI;function BI(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}var $f=BI;function UI(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var FI=UI;function jI(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var s=t.length,u=t.charAt(0),f=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var _=0,T=0,P=0,F=A.length;P!==F&&A[P]===0;)P++,_++;for(var j=(F-P)*c+1>>>0,U=new Uint8Array(j);P!==F;){for(var L=A[P],G=0,p=j-1;(L!==0||G<T)&&p!==-1;p--,G++)L+=256*U[p]>>>0,U[p]=L%s>>>0,L=L/s>>>0;if(L!==0)throw new Error("Non-zero carry");T=G,P++}for(var I=j-T;I!==j&&U[I]===0;)I++;for(var C=u.repeat(_);I<j;++I)C+=t.charAt(U[I]);return C}function b(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var _=0;if(A[_]!==" "){for(var T=0,P=0;A[_]===u;)T++,_++;for(var F=(A.length-_)*f+1>>>0,j=new Uint8Array(F);A[_];){var U=r[A.charCodeAt(_)];if(U===255)return;for(var L=0,G=F-1;(U!==0||L<P)&&G!==-1;G--,L++)U+=s*j[G]>>>0,j[G]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");P=L,_++}if(A[_]!==" "){for(var p=F-P;p!==F&&j[p]===0;)p++;for(var I=new Uint8Array(T+(F-p)),C=T;p!==F;)I[C++]=j[p++];return I}}}function w(A){var _=b(A);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:b,decode:w}}var zI=jI,qI=zI;const Pb=new Uint8Array(0),GI=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),HI=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):Pb},Mb=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Po=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},WI=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),kb=t=>new TextEncoder().encode(t),Tb=t=>new TextDecoder().decode(t);var KI=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:Mb,coerce:Po,isBinary:WI,fromHex:HI,toHex:GI,fromString:kb,toString:Tb,empty:Pb});class VI{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class JI{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){const r=ye({[this.prefix]:this},e.decoders||{[e.prefix]:e});return new a0(r)}}class a0{constructor(e){this.decoders=e}or(e){const r=e.decoders||{[e.prefix]:e};return new a0(ye(ye({},this.decoders),r))}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}class YI{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new VI(e,r,n),this.decoder=new JI(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const s0=({name:t,prefix:e,encode:r,decode:n})=>new YI(t,e,r,n),Ds=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=qI(r,e);return s0({prefix:t,name:e,encode:n,decode:o=>Po(i(o))})},XI=(t,e,r,n)=>{const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let o=t.length;for(;t[o-1]==="=";)--o;const a=new Uint8Array(o*r/8|0);let s=0,u=0,f=0;for(let c=0;c<o;++c){const h=i[t[c]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|h,s+=r,s>=8&&(s-=8,a[f++]=255&u>>s)}if(s>=r||255&u<<8-s)throw new SyntaxError("Unexpected end of data");return a},ZI=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let o="",a=0,s=0;for(let u=0;u<t.length;++u)for(s=s<<8|t[u],a+=8;a>r;)a-=r,o+=e[i&s>>a];if(a&&(o+=e[i&s<<r-a]),n)for(;o.length*r&7;)o+="=";return o},ur=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>s0({prefix:e,name:t,encode(i){return ZI(i,n,r)},decode(i){return XI(i,n,r,t)}}),QI=s0({prefix:"\0",name:"identity",encode:t=>Tb(t),decode:t=>kb(t)});var eP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:QI});const tP=ur({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var rP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base2:tP});const nP=ur({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var iP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base8:nP});const oP=Ds({prefix:"9",name:"base10",alphabet:"0123456789"});var aP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base10:oP});const sP=ur({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),uP=ur({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var fP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base16:sP,base16upper:uP});const Bs=ur({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cP=ur({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lP=ur({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hP=ur({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dP=ur({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pP=ur({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vP=ur({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mP=ur({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bP=ur({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var yP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base32:Bs,base32upper:cP,base32pad:lP,base32padupper:hP,base32hex:dP,base32hexupper:pP,base32hexpad:vP,base32hexpadupper:mP,base32z:bP});const gP=Ds({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wP=Ds({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var _P=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base36:gP,base36upper:wP});const ki=Ds({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xP=Ds({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var EP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base58btc:ki,base58flickr:xP});const SP=ur({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),AP=ur({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),IP=ur({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),PP=ur({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var MP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base64:SP,base64pad:AP,base64url:IP,base64urlpad:PP}),kP=Ob,Nb=128,TP=127,NP=~TP,OP=Math.pow(2,31);function Ob(t,e,r){e=e||[],r=r||0;for(var n=r;t>=OP;)e[r++]=t&255|Nb,t/=128;for(;t&NP;)e[r++]=t&255|Nb,t>>>=7;return e[r]=t|0,Ob.bytes=r-n+1,e}var $P=u0,RP=128,$b=127;function u0(t,e){var r=0,e=e||0,n=0,i=e,o,a=t.length;do{if(i>=a)throw u0.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=n<28?(o&$b)<<n:(o&$b)*Math.pow(2,n),n+=7}while(o>=RP);return u0.bytes=i-e,r}var CP=Math.pow(2,7),LP=Math.pow(2,14),DP=Math.pow(2,21),BP=Math.pow(2,28),UP=Math.pow(2,35),FP=Math.pow(2,42),jP=Math.pow(2,49),zP=Math.pow(2,56),qP=Math.pow(2,63),GP=function(t){return t<CP?1:t<LP?2:t<DP?3:t<BP?4:t<UP?5:t<FP?6:t<jP?7:t<zP?8:t<qP?9:10},HP={encode:kP,decode:$P,encodingLength:GP},Rf=HP;const Cf=t=>[Rf.decode(t),Rf.decode.bytes],Us=(t,e,r=0)=>(Rf.encode(t,e,r),e),Fs=t=>Rf.encodingLength(t);var WP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",decode:Cf,encodeTo:Us,encodingLength:Fs});const f0=(t,e)=>{const r=e.byteLength,n=Fs(t),i=n+Fs(r),o=new Uint8Array(i+r);return Us(t,o,0),Us(r,o,n),o.set(e,i),new Lf(t,r,e,o)},Rb=t=>{const e=Po(t),[r,n]=Cf(e),[i,o]=Cf(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Lf(r,i,a,e)},Cb=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Mb(t.bytes,e.bytes);class Lf{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}var KP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:f0,decode:Rb,equals:Cb,Digest:Lf});const Df=({name:t,code:e,encode:r})=>new Lb(t,e,r);class Lb{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}async digest(e){if(e instanceof Uint8Array){const r=await this.encode(e);return f0(this.code,r)}else throw Error("Unknown type, must be binary type")}}var VP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",from:Df,Hasher:Lb});const Db=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),JP=Df({name:"sha2-256",code:18,encode:Db("SHA-256")}),YP=Df({name:"sha2-512",code:19,encode:Db("SHA-512")});var XP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sha256:JP,sha512:YP});const ZP=Df({name:"identity",code:0,encode:t=>Po(t)});var QP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:ZP});const eM="raw",tM=85,rM=t=>Po(t),nM=t=>Po(t);var iM=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:eM,code:tM,encode:rM,decode:nM});const oM=new TextEncoder,aM=new TextDecoder,sM="json",uM=512,fM=t=>oM.encode(JSON.stringify(t)),cM=t=>JSON.parse(aM.decode(t));var lM=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:sM,code:uM,encode:fM,decode:cM});class gr{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Uf,byteLength:Uf,code:Bf,version:Bf,multihash:Bf,bytes:Bf,_baseCache:Uf,asCID:Uf})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:r}=this;if(e!==js)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==vM)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return gr.createV0(r)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=f0(e,r);return gr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Cb(this.multihash,e.multihash)}toString(e){const{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return dM(r,i,e||ki.encoder);default:return pM(r,i,e||Bs.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return bM(/^0\.0/,yM),!!(e&&(e[Ub]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof gr)return e;if(e!=null&&e.asCID===e){const{version:r,code:n,multihash:i,bytes:o}=e;return new gr(r,n,i,o||Bb(r,n,i.bytes))}else if(e!=null&&e[Ub]===!0){const{version:r,multihash:n,code:i}=e,o=Rb(n);return gr.create(r,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==js)throw new Error(`Version 0 CID must use dag-pb (code: ${js}) block encoding`);return new gr(e,r,n,n.bytes)}case 1:{const i=Bb(e,r,n.bytes);return new gr(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return gr.create(0,js,e)}static createV1(e,r){return gr.create(1,e,r)}static decode(e){const[r,n]=gr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=gr.inspectBytes(e),n=r.size-r.multihashSize,i=Po(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const o=i.subarray(r.multihashSize-r.digestSize),a=new Lf(r.multihashCode,r.digestSize,o,i);return[r.version===0?gr.createV0(a):gr.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[h,b]=Cf(e.subarray(r));return r+=b,h};let i=n(),o=js;if(i===18?(i=0,r=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=r,s=n(),u=n(),f=r+u,c=f-a;return{version:i,codec:o,multihashCode:s,digestSize:u,multihashSize:c,size:f}}static parse(e,r){const[n,i]=hM(e,r),o=gr.decode(i);return o._baseCache.set(n,e),o}}const hM=(t,e)=>{switch(t[0]){case"Q":{const r=e||ki;return[ki.prefix,r.decode(`${ki.prefix}${t}`)]}case ki.prefix:{const r=e||ki;return[ki.prefix,r.decode(t)]}case Bs.prefix:{const r=e||Bs;return[Bs.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},dM=(t,e,r)=>{const{prefix:n}=r;if(n!==ki.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const o=r.encode(t).slice(1);return e.set(n,o),o}else return i},pM=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(i==null){const o=r.encode(t);return e.set(n,o),o}else return i},js=112,vM=18,Bb=(t,e,r)=>{const n=Fs(t),i=n+Fs(e),o=new Uint8Array(i+r.byteLength);return Us(t,o,0),Us(e,o,n),o.set(r,i),o},Ub=Symbol.for("@ipld/js-cid/CID"),Bf={writable:!1,configurable:!1,enumerable:!0},Uf={writable:!1,enumerable:!1,configurable:!1},mM="0.0.0-dev",bM=(t,e)=>{if(t.test(mM))console.warn(e);else throw new Error(e)},yM=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,vn=ye(ye(ye(ye(ye(ye(ye(ye(ye({},eP),rP),iP),aP),fP),yP),_P),EP),MP),gM=ye(ye({},XP),QP),wM={raw:iM,json:lM};var _M=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CID:gr,hasher:VP,digest:KP,varint:WP,bytes:KI,hashes:gM,bases:vn,codecs:wM}),xM=$t(_M);const{bases:Fb}=xM;function jb(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const zb=jb("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),c0=jb("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),EM=ye({utf8:zb,"utf-8":zb,hex:Fb.base16,latin1:c0,ascii:c0,binary:c0},Fb);var qb=EM;const SM=qb;function AM(t,e="utf8"){const r=SM[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var Gb=AM;const IM=qb;function PM(t,e="utf8"){const r=IM[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var l0=PM;function MM(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}var kM=MM;const TM=DI,NM=$f,OM=FI,$M=Gb,RM=l0,CM=kM;var wr={compare:TM,concat:NM,equals:OM,fromString:$M,toString:RM,xor:CM},Ki={},Ge={},Hb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(s,u){var f=s>>>16&65535,c=s&65535,h=u>>>16&65535,b=u&65535;return c*b+(f*b+c*h<<16>>>0)|0}t.mul=Math.imul||e;function r(s,u){return s+u|0}t.add=r;function n(s,u){return s-u|0}t.sub=n;function i(s,u){return s<<u|s>>>32-u}t.rotl=i;function o(s,u){return s<<32-u|s>>>u}t.rotr=o;function a(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s}t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(s){return t.isInteger(s)&&s>=-t.MAX_SAFE_INTEGER&&s<=t.MAX_SAFE_INTEGER}})(Hb);Object.defineProperty(Ge,"__esModule",{value:!0});var Wb=Hb;function LM(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Ge.readInt16BE=LM;function DM(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Ge.readUint16BE=DM;function BM(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Ge.readInt16LE=BM;function UM(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Ge.readUint16LE=UM;function Kb(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Ge.writeUint16BE=Kb;Ge.writeInt16BE=Kb;function Vb(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Ge.writeUint16LE=Vb;Ge.writeInt16LE=Vb;function h0(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Ge.readInt32BE=h0;function d0(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Ge.readUint32BE=d0;function p0(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Ge.readInt32LE=p0;function v0(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Ge.readUint32LE=v0;function Ff(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Ge.writeUint32BE=Ff;Ge.writeInt32BE=Ff;function jf(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Ge.writeUint32LE=jf;Ge.writeInt32LE=jf;function FM(t,e){e===void 0&&(e=0);var r=h0(t,e),n=h0(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Ge.readInt64BE=FM;function jM(t,e){e===void 0&&(e=0);var r=d0(t,e),n=d0(t,e+4);return r*4294967296+n}Ge.readUint64BE=jM;function zM(t,e){e===void 0&&(e=0);var r=p0(t,e),n=p0(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Ge.readInt64LE=zM;function qM(t,e){e===void 0&&(e=0);var r=v0(t,e),n=v0(t,e+4);return n*4294967296+r}Ge.readUint64LE=qM;function Jb(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ff(t/4294967296>>>0,e,r),Ff(t>>>0,e,r+4),e}Ge.writeUint64BE=Jb;Ge.writeInt64BE=Jb;function Yb(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),jf(t>>>0,e,r),jf(t/4294967296>>>0,e,r+4),e}Ge.writeUint64LE=Yb;Ge.writeInt64LE=Yb;function GM(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=t/8+r-1;o>=r;o--)n+=e[o]*i,i*=256;return n}Ge.readUintBE=GM;function HM(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+t/8;o++)n+=e[o]*i,i*=256;return n}Ge.readUintLE=HM;function WM(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Wb.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,o=t/8+n-1;o>=n;o--)r[o]=e/i&255,i*=256;return r}Ge.writeUintBE=WM;function KM(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Wb.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+t/8;o++)r[o]=e/i&255,i*=256;return r}Ge.writeUintLE=KM;function VM(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Ge.readFloat32BE=VM;function JM(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Ge.readFloat32LE=JM;function YM(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Ge.readFloat64BE=YM;function XM(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Ge.readFloat64LE=XM;function ZM(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Ge.writeFloat32BE=ZM;function QM(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Ge.writeFloat32LE=QM;function ek(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Ge.writeFloat64BE=ek;function tk(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Ge.writeFloat64LE=tk;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});function rk(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Zr.wipe=rk;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ge,r=Zr;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function s(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},s.prototype.update=function(u,f){if(f===void 0&&(f=u.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var c=0;if(this._bytesHashed+=f,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&f>0;)this._buffer[this._bufferLength++]=u[c++],f--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(f>=this.blockSize&&(c=o(this._temp,this._state,u,c,f),f%=this.blockSize);f>0;)this._buffer[this._bufferLength++]=u[c++],f--;return this},s.prototype.finish=function(u){if(!this._finished){var f=this._bytesHashed,c=this._bufferLength,h=f/536870912|0,b=f<<3,w=f%64<56?64:128;this._buffer[c]=128;for(var A=c+1;A<w-8;A++)this._buffer[A]=0;e.writeUint32BE(h,this._buffer,w-8),e.writeUint32BE(b,this._buffer,w-4),o(this._temp,this._state,this._buffer,0,w),this._finished=!0}for(var A=0;A<this.digestLength/4;A++)e.writeUint32BE(this._state[A],u,A*4);return this},s.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(u){return this._state.set(u.state),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(u){r.wipe(u.state),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},s}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(s,u,f,c,h){for(;h>=64;){for(var b=u[0],w=u[1],A=u[2],_=u[3],T=u[4],P=u[5],F=u[6],j=u[7],U=0;U<16;U++){var L=c+U*4;s[U]=e.readUint32BE(f,L)}for(var U=16;U<64;U++){var G=s[U-2],p=(G>>>17|G<<32-17)^(G>>>19|G<<32-19)^G>>>10;G=s[U-15];var I=(G>>>7|G<<32-7)^(G>>>18|G<<32-18)^G>>>3;s[U]=(p+s[U-7]|0)+(I+s[U-16]|0)}for(var U=0;U<64;U++){var p=(((T>>>6|T<<32-6)^(T>>>11|T<<32-11)^(T>>>25|T<<32-25))+(T&P^~T&F)|0)+(j+(i[U]+s[U]|0)|0)|0,I=((b>>>2|b<<32-2)^(b>>>13|b<<32-13)^(b>>>22|b<<32-22))+(b&w^b&A^w&A)|0;j=F,F=P,P=T,T=_+p|0,_=A,A=w,w=b,b=p+I|0}u[0]+=b,u[1]+=w,u[2]+=A,u[3]+=_,u[4]+=T,u[5]+=P,u[6]+=F,u[7]+=j,c+=64,h-=64}return c}function a(s){var u=new n;u.update(s);var f=u.digest();return u.clean(),f}t.hash=a})(Ki);var nk=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ik=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xb=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nk(e,t,r);return ik(e,t),e};Object.defineProperty(sr,"__esModule",{value:!0});sr.authenticate=sr.createLink=sr.normalizeAccountId=sr.isERC1271=sr.isEthAddress=sr.EthereumAuthProvider=void 0;const ok=si,Ca=Xr,zf=Xb(wr),ak=Xb(Ki),Zb={ethereumEOA:"ethereum-eoa",erc1271:"erc1271"},sk="eip155";class m0{constructor(e,r,n={}){this.provider=e,this.address=r,this.opts=n,this.isAuthProvider=!0}async accountId(){const e=Ca.encodeRpcMessage("eth_chainId",[]),r=await zs(e,this.provider),n=parseInt(r,16);return new ok.AccountID({address:this.address,chainId:`${sk}:${n}`})}async authenticate(e){const r=await this.accountId();return ny(e,r,this.provider)}async createLink(e){const r=await this.accountId();return ry(e,r,this.provider,this.opts)}withAddress(e){return new m0(this.provider,e)}}sr.EthereumAuthProvider=m0;function uk(t){return/^0x[a-fA-F0-9]{40}$/.test(t)}sr.isEthAddress=uk;async function fk(t,e){const r=Ca.encodeRpcMessage("eth_getCode",[t,"latest"]);return zs(r,e)}async function zs(t,e){const r=(e.sendAsync?e.sendAsync:e.send).bind(e);return new Promise((n,i)=>{r(t,function(o,a){o?i(o):a.error?i(a.error):n(a.result)})})}async function Qb(t,e){const r=await fk(t.address,e).catch(()=>null);return Boolean(r&&r!=="0x"&&r!=="0x0"&&r!=="0x00")}sr.isERC1271=Qb;function b0(t){return t.address=t.address.toLowerCase(),t}sr.normalizeAccountId=b0;function ey(t){const e=zf.fromString(t),r=zf.toString(e,"base16");return"0x"+r}async function ty(t,e,r,n={}){const{message:i,timestamp:o}=Ca.getConsentMessage(t,!n.skipTimestamp),a=ey(i),s=Ca.encodeRpcMessage("personal_sign",[a,e.address]),u=await zs(s,r),f={version:2,type:Zb.ethereumEOA,message:i,signature:u,account:e.toString()};return n.skipTimestamp||(f.timestamp=o),f}async function ck(t,e){const r=Ca.encodeRpcMessage("eth_chainId",[]),n=await zs(r,e),i=parseInt(n,16);if(i!==parseInt(t.chainId.reference))throw new Error(`ChainId in provider (${i}) is different from AccountID (${t.chainId.reference})`)}async function lk(t,e,r,n){const i=(n==null?void 0:n.eoaSignAccount)||e,o=await ty(t,i,r,n);return await ck(e,r),Object.assign(o,{type:Zb.erc1271,account:e.toString()})}async function ry(t,e,r,n){return e=b0(e),await Qb(e,r)?lk(t,e,r,n):ty(t,e,r,n)}sr.createLink=ry;async function ny(t,e,r){if(e&&(e=b0(e)),r.isAuthereum)return r.signMessageWithSigningKey(t);const n=ey(t),i=Ca.encodeRpcMessage("personal_sign",[n,e.address]),o=await zs(i,r),a=zf.fromString(o.slice(2)),s=ak.hash(a);return`0x${zf.toString(s,"base16")}`}sr.authenticate=ny;var Mo={},hk=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dk=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pk=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hk(e,t,r);return dk(e,t),e};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.asTransaction=Mo.FilecoinAuthProvider=void 0;const vk=si,mk=Xr,iy=pk(wr);class y0{constructor(e,r){this.provider=e,this.address=r,this.isAuthProvider=!0}async accountId(){const r=`fil:${this.address[0]}`;return new vk.AccountID({address:this.address,chainId:r})}async authenticate(e){const r=g0(this.address,JSON.stringify(e));return(await this.provider.sign(this.address,r)).Signature.Data}async createLink(e){const{message:r,timestamp:n}=mk.getConsentMessage(e,!0),i=g0(this.address,r),o=await this.provider.sign(this.address,i),a=await this.accountId();return{version:2,type:"eoa-tx",message:r,signature:o.Signature.Data,account:a.toString(),timestamp:n}}withAddress(e){return new y0(this.provider,e)}}Mo.FilecoinAuthProvider=y0;function g0(t,e){const r=iy.toString(iy.fromString(e),"base64");return{From:t,To:t,Value:"0",Method:0,GasPrice:"1",GasLimit:1e3,Nonce:0,Params:r,GasFeeCap:"1",GasPremium:"1"}}Mo.asTransaction=g0;var qs={},bk=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yk=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gk=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bk(e,t,r);return yk(e,t),e};Object.defineProperty(qs,"__esModule",{value:!0});qs.PolkadotAuthProvider=void 0;const wk=si,_k=Xr,oy=gk(wr),xk=t=>`0x${oy.toString(oy.fromString(t),"base16")}`,Ek="polkadot:b0a8d493285c2df73290dfb7e61f870f";class w0{constructor(e,r){this.provider=e,this.address=r,this.isAuthProvider=!0}async authenticate(e){throw new Error(`Not Implemented: PolkadotAuthProvider#authenticate, ${e}`)}async createLink(e){const{message:r,timestamp:n}=_k.getConsentMessage(e),i=xk(r),o=await this.accountId(),a=await this.provider.signRaw({address:this.address,data:i,type:"bytes"});return{version:2,type:"eoa",message:r,signature:a.signature,account:o.toString(),timestamp:n}}async accountId(){return new wk.AccountID({address:this.address,chainId:Ek})}withAddress(e){return new w0(this.provider,e)}}qs.PolkadotAuthProvider=w0;var Ti={},Sk=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ak=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ay=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Sk(e,t,r);return Ak(e,t),e};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.toSignedPayload=Ti.toPayload=Ti.EosioAuthProvider=void 0;const Ik=si,Pk=Xr,Mk=sr,kk=ay(Ki),sy=ay(wr),Tk=12;class _0{constructor(e,r){this.provider=e,this.address=r,this.isAuthProvider=!0}async accountId(){const e=uy(await this.provider.getChainId());return new Ik.AccountID({address:this.address,chainId:`eosio:${e}`})}async authenticate(e){const r=await this.accountId(),n=await x0(e,r,this.provider),i=sy.fromString(n),o=kk.hash(i);return`0x${sy.toString(o,"base16")}`}async createLink(e){const r=Pk.getConsentMessage(e),n=await this.accountId(),i=await x0(r.message,n,this.provider);return{version:2,type:"eosio",message:r.message,signature:i,account:n.toString(),timestamp:r.timestamp}}withAddress(e){return new _0(this.provider,e)}}Ti.EosioAuthProvider=_0;function uy(t){return t.substr(0,32)}function Nk(t,e){return t.replace(/\s/g," ").replace(new RegExp(`(\\S{${e}})`,"g"),"$1 ")}function fy(t,e){const{address:r,chainId:n}=e,i=`${t} [For: ${r} on chain: ${n}]`;return Nk(i,Tk)}Ti.toPayload=fy;async function x0(t,e,r){e=Mk.normalizeAccountId(e);const{chainId:{reference:n},address:i}=e,o=await r.getAccountName(),a=uy(await r.getChainId());if(a!==n)throw new Error(`Provider returned a different chainId than requested [returned: ${a}, requested: ${n}]`);if(o!==i)throw new Error(`Provider returned a different account than requested [returned: ${o}, requested: ${i}]`);const s=fy(t,e),[u]=await r.getKeys();return r.signArbitrary(u,s)}Ti.toSignedPayload=x0;var Ni={},Ok=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$k=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Rk=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ok(e,t,r);return $k(e,t),e};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.CosmosAuthProvider=Ni.getMetaData=Ni.asTransaction=void 0;const Ck=si,Lk=Xr,Dk=Ki,qf=Rk(wr),E0=t=>qf.toString(qf.fromString(t),"base64pad");function S0(t,e){return{fee:{amount:[{amount:"0",denom:""}],gas:"0"},memo:e,msg:[{type:"cosmos-sdk/MsgSend",value:{from_address:t,to_address:t,amount:[{amount:"0",denom:"0"}]}}]}}Ni.asTransaction=S0;function A0(){return{account_number:"1",chain_id:"cosmos",sequence:"0"}}Ni.getMetaData=A0;class I0{constructor(e,r,n){this.provider=e,this.address=r,this.chainRef=n,this.isAuthProvider=!0}async authenticate(e){const r=await this.accountId(),n=E0(e),i=await this.provider.sign(S0(r.address,n),A0()),o=Dk.hash(qf.fromString(JSON.stringify(i.signatures[0])));return`0x${qf.toString(o,"base16")}`}async createLink(e){const{message:r,timestamp:n}=Lk.getConsentMessage(e),i=await this.accountId(),o=E0(r),a=await this.provider.sign(S0(i.address,o),A0()),s=E0(JSON.stringify(a.signatures[0]));return{version:2,message:r,signature:s,account:i.toString(),timestamp:n}}async accountId(){return new Ck.AccountID({address:this.address,chainId:`cosmos:${this.chainRef}`})}withAddress(e){return new I0(this.provider,e,this.chainRef)}}Ni.CosmosAuthProvider=I0;var P0={};(function(t){var e=te&&te.__createBinding||(Object.create?function(b,w,A,_){_===void 0&&(_=A),Object.defineProperty(b,_,{enumerable:!0,get:function(){return w[A]}})}:function(b,w,A,_){_===void 0&&(_=A),b[_]=w[A]}),r=te&&te.__setModuleDefault||(Object.create?function(b,w){Object.defineProperty(b,"default",{enumerable:!0,value:w})}:function(b,w){b.default=w}),n=te&&te.__importStar||function(b){if(b&&b.__esModule)return b;var w={};if(b!=null)for(var A in b)A!=="default"&&Object.prototype.hasOwnProperty.call(b,A)&&e(w,b,A);return r(w,b),w};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosAuthProvider=t.TEZOS_CHAIN_REF=t.TEZOS_NAMESPACE=void 0;const i=si,o=Xr,a=Ki,s=n(wr);t.TEZOS_NAMESPACE="tezos",t.TEZOS_CHAIN_REF="NetXdQprcVkpaWU";function u(b){return s.toString(s.fromString(b,"utf8"),"base16")}async function f(b,w){const{prefixSig:A}=await b.signer.sign(u(w));return A}async function c(b){return b.signer.publicKeyHash()}class h{constructor(w){if(this.provider=w,this.isAuthProvider=!0,w.signer===void 0)throw new Error("a `Signer` is required to use the `TezosAuthProvider`")}async authenticate(w){const A=await f(this.provider,w),_=a.hash(s.fromString(A));return`0x${s.toString(_,"base16")}`}async createLink(w){const{message:A,timestamp:_}=o.getConsentMessage(w),T=await f(this.provider,A),P=await c(this.provider),F=new i.AccountID({address:P,chainId:`${t.TEZOS_NAMESPACE}:${t.TEZOS_CHAIN_REF}`});return{version:2,message:A,signature:T,account:F.toString(),timestamp:_}}async accountId(){const w=await c(this.provider);return new i.AccountID({address:w,chainId:`${t.TEZOS_NAMESPACE}:${t.TEZOS_CHAIN_REF}`})}withAddress(w){throw new Error("TezosAuthProvider does not support withAddress")}}t.TezosAuthProvider=h})(P0);var Gf={},Bk=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Uk=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fk=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bk(e,t,r);return Uk(e,t),e};Object.defineProperty(Gf,"__esModule",{value:!0});Gf.NearAuthProvider=void 0;const cy=si,jk=Xr,zk=Ki,M0=Fk(wr),ly=t=>M0.toString(M0.fromString(t),"base64pad");class k0{constructor(e,r,n){this.provider=e,this.address=r,this.chainRef=n,this.isAuthProvider=!0}async authenticate(e){const r=ly(e),{signature:n}=await this.provider.sign(r),i=zk.hash(n);return`0x${M0.toString(i,"base16")}`}async createLink(e){const{message:r,timestamp:n}=jk.getConsentMessage(e),i=ly(r),{signature:o,account:a}=await this.provider.sign(i),s=new cy.AccountID({address:a,chainId:`near:${this.chainRef}`});return{version:2,message:r,signature:o,account:s.toString(),timestamp:n}}async accountId(){return new cy.AccountID({address:this.address,chainId:`near:${this.chainRef}`})}withAddress(e){return new k0(this.provider,e,this.chainRef)}}Gf.NearAuthProvider=k0;(function(t){var e=te&&te.__createBinding||(Object.create?function(w,A,_,T){T===void 0&&(T=_),Object.defineProperty(w,T,{enumerable:!0,get:function(){return A[_]}})}:function(w,A,_,T){T===void 0&&(T=_),w[T]=A[_]}),r=te&&te.__setModuleDefault||(Object.create?function(w,A){Object.defineProperty(w,"default",{enumerable:!0,value:A})}:function(w,A){w.default=A}),n=te&&te.__exportStar||function(w,A){for(var _ in w)_!=="default"&&!Object.prototype.hasOwnProperty.call(A,_)&&e(A,w,_)},i=te&&te.__importStar||function(w){if(w&&w.__esModule)return w;var A={};if(w!=null)for(var _ in w)_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)&&e(A,w,_);return r(A,w),A};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosAuthProvider=t.NearAuthProvider=t.CosmosAuthProvider=t.PolkadotAuthProvider=t.EosioAuthProvider=t.FilecoinAuthProvider=t.AvalancheAuthProvider=t.EthereumAuthProvider=t.tezos=t.cosmos=t.eosio=t.polkadot=t.filecoin=t.ethereum=void 0,n(Sb,t),t.ethereum=i(sr),n(Xr,t),t.filecoin=i(Mo),t.polkadot=i(qs),t.eosio=i(Ti),t.cosmos=i(Ni),t.tezos=i(P0);var o=sr;Object.defineProperty(t,"EthereumAuthProvider",{enumerable:!0,get:function(){return o.EthereumAuthProvider}});var a=sr;Object.defineProperty(t,"AvalancheAuthProvider",{enumerable:!0,get:function(){return a.EthereumAuthProvider}});var s=Mo;Object.defineProperty(t,"FilecoinAuthProvider",{enumerable:!0,get:function(){return s.FilecoinAuthProvider}});var u=Ti;Object.defineProperty(t,"EosioAuthProvider",{enumerable:!0,get:function(){return u.EosioAuthProvider}});var f=qs;Object.defineProperty(t,"PolkadotAuthProvider",{enumerable:!0,get:function(){return f.PolkadotAuthProvider}});var c=Ni;Object.defineProperty(t,"CosmosAuthProvider",{enumerable:!0,get:function(){return c.CosmosAuthProvider}});var h=Gf;Object.defineProperty(t,"NearAuthProvider",{enumerable:!0,get:function(){return h.NearAuthProvider}});var b=P0;Object.defineProperty(t,"TezosAuthProvider",{enumerable:!0,get:function(){return b.TezosAuthProvider}})})(Eb);let hy=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=r[t]&63;n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n<63?e+="_":e+="-"}return e};function dy(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(f){r(f);return}s.done?e(u):Promise.resolve(u).then(n,i)}function T0(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(u){dy(o,n,i,a,s,"next",u)}function s(u){dy(o,n,i,a,s,"throw",u)}a(void 0)})}}function qk(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function N0(t){return N0=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},N0(t)}function Hf(t,e){return Hf=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Hf(t,e)}function Gk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Wf(t,e,r){return Gk()?Wf=Reflect.construct:Wf=function(i,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(i,s),f=new u;return a&&Hf(f,a.prototype),f},Wf.apply(null,arguments)}function Hk(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function O0(t){var e=typeof Map=="function"?new Map:void 0;return O0=function(n){if(n===null||!Hk(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Wf(n,arguments,N0(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Hf(i,n)},O0(t)}function Wk(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kk(t,e){return e={exports:{}},t(e,e.exports),e.exports}var La=Kk(function(t){var e=function(r){var n=Object.prototype,i=n.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function c(v,d,l){return Object.defineProperty(v,d,{value:l,enumerable:!0,configurable:!0,writable:!0}),v[d]}try{c({},"")}catch{c=function(d,l,x){return d[l]=x}}function h(v,d,l,x){var B=d&&d.prototype instanceof F?d:F,H=Object.create(B.prototype),D=new g(x||[]);return H._invoke=$(v,l,D),H}r.wrap=h;function b(v,d,l){try{return{type:"normal",arg:v.call(d,l)}}catch(x){return{type:"throw",arg:x}}}var w="suspendedStart",A="suspendedYield",_="executing",T="completed",P={};function F(){}function j(){}function U(){}var L={};L[s]=function(){return this};var G=Object.getPrototypeOf,p=G&&G(G(M([])));p&&p!==n&&i.call(p,s)&&(L=p);var I=U.prototype=F.prototype=Object.create(L);j.prototype=I.constructor=U,U.constructor=j,j.displayName=c(U,f,"GeneratorFunction");function C(v){["next","throw","return"].forEach(function(d){c(v,d,function(l){return this._invoke(d,l)})})}r.isGeneratorFunction=function(v){var d=typeof v=="function"&&v.constructor;return d?d===j||(d.displayName||d.name)==="GeneratorFunction":!1},r.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,U):(v.__proto__=U,c(v,f,"GeneratorFunction")),v.prototype=Object.create(I),v},r.awrap=function(v){return{__await:v}};function V(v,d){function l(H,D,k,Z){var z=b(v[H],v,D);if(z.type==="throw")Z(z.arg);else{var K=z.arg,W=K.value;return W&&typeof W=="object"&&i.call(W,"__await")?d.resolve(W.__await).then(function(S){l("next",S,k,Z)},function(S){l("throw",S,k,Z)}):d.resolve(W).then(function(S){K.value=S,k(K)},function(S){return l("throw",S,k,Z)})}}var x;function B(H,D){function k(){return new d(function(Z,z){l(H,D,Z,z)})}return x=x?x.then(k,k):k()}this._invoke=B}C(V.prototype),V.prototype[u]=function(){return this},r.AsyncIterator=V,r.async=function(v,d,l,x,B){B===void 0&&(B=Promise);var H=new V(h(v,d,l,x),B);return r.isGeneratorFunction(d)?H:H.next().then(function(D){return D.done?D.value:H.next()})};function $(v,d,l){var x=w;return function(H,D){if(x===_)throw new Error("Generator is already running");if(x===T){if(H==="throw")throw D;return R()}for(l.method=H,l.arg=D;;){var k=l.delegate;if(k){var Z=m(k,l);if(Z){if(Z===P)continue;return Z}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(x===w)throw x=T,l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);x=_;var z=b(v,d,l);if(z.type==="normal"){if(x=l.done?T:A,z.arg===P)continue;return{value:z.arg,done:l.done}}else z.type==="throw"&&(x=T,l.method="throw",l.arg=z.arg)}}}function m(v,d){var l=v.iterator[d.method];if(l===o){if(d.delegate=null,d.method==="throw"){if(v.iterator.return&&(d.method="return",d.arg=o,m(v,d),d.method==="throw"))return P;d.method="throw",d.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var x=b(l,v.iterator,d.arg);if(x.type==="throw")return d.method="throw",d.arg=x.arg,d.delegate=null,P;var B=x.arg;if(!B)return d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,P;if(B.done)d[v.resultName]=B.value,d.next=v.nextLoc,d.method!=="return"&&(d.method="next",d.arg=o);else return B;return d.delegate=null,P}C(I),c(I,f,"Generator"),I[s]=function(){return this},I.toString=function(){return"[object Generator]"};function E(v){var d={tryLoc:v[0]};1 in v&&(d.catchLoc=v[1]),2 in v&&(d.finallyLoc=v[2],d.afterLoc=v[3]),this.tryEntries.push(d)}function y(v){var d=v.completion||{};d.type="normal",delete d.arg,v.completion=d}function g(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(E,this),this.reset(!0)}r.keys=function(v){var d=[];for(var l in v)d.push(l);return d.reverse(),function x(){for(;d.length;){var B=d.pop();if(B in v)return x.value=B,x.done=!1,x}return x.done=!0,x}};function M(v){if(v){var d=v[s];if(d)return d.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var l=-1,x=function B(){for(;++l<v.length;)if(i.call(v,l))return B.value=v[l],B.done=!1,B;return B.value=o,B.done=!0,B};return x.next=x}}return{next:R}}r.values=M;function R(){return{value:o,done:!0}}return g.prototype={constructor:g,reset:function(v){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(y),!v)for(var d in this)d.charAt(0)==="t"&&i.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=o)},stop:function(){this.done=!0;var v=this.tryEntries[0],d=v.completion;if(d.type==="throw")throw d.arg;return this.rval},dispatchException:function(v){if(this.done)throw v;var d=this;function l(Z,z){return H.type="throw",H.arg=v,d.next=Z,z&&(d.method="next",d.arg=o),!!z}for(var x=this.tryEntries.length-1;x>=0;--x){var B=this.tryEntries[x],H=B.completion;if(B.tryLoc==="root")return l("end");if(B.tryLoc<=this.prev){var D=i.call(B,"catchLoc"),k=i.call(B,"finallyLoc");if(D&&k){if(this.prev<B.catchLoc)return l(B.catchLoc,!0);if(this.prev<B.finallyLoc)return l(B.finallyLoc)}else if(D){if(this.prev<B.catchLoc)return l(B.catchLoc,!0)}else if(k){if(this.prev<B.finallyLoc)return l(B.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(v,d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.tryLoc<=this.prev&&i.call(x,"finallyLoc")&&this.prev<x.finallyLoc){var B=x;break}}B&&(v==="break"||v==="continue")&&B.tryLoc<=d&&d<=B.finallyLoc&&(B=null);var H=B?B.completion:{};return H.type=v,H.arg=d,B?(this.method="next",this.next=B.finallyLoc,P):this.complete(H)},complete:function(v,d){if(v.type==="throw")throw v.arg;return v.type==="break"||v.type==="continue"?this.next=v.arg:v.type==="return"?(this.rval=this.arg=v.arg,this.method="return",this.next="end"):v.type==="normal"&&d&&(this.next=d),P},finish:function(v){for(var d=this.tryEntries.length-1;d>=0;--d){var l=this.tryEntries[d];if(l.finallyLoc===v)return this.complete(l.completion,l.afterLoc),y(l),P}},catch:function(v){for(var d=this.tryEntries.length-1;d>=0;--d){var l=this.tryEntries[d];if(l.tryLoc===v){var x=l.completion;if(x.type==="throw"){var B=x.arg;y(l)}return B}}throw new Error("illegal catch attempt")},delegateYield:function(v,d,l){return this.delegate={iterator:M(v),resultName:d,nextLoc:l},this.method==="next"&&(this.arg=o),P}},r}(t.exports);try{regeneratorRuntime=e}catch{Function("r","regeneratorRuntime = r")(e)}}),ko,Dr;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(Dr||(Dr={}));var py=(ko={},ko[Dr.PARSE_ERROR]="Parse error",ko[Dr.INVALID_REQUEST]="Invalid request",ko[Dr.METHOD_NOT_FOUND]="Method not found",ko[Dr.INVALID_PARAMS]="Invalid params",ko[Dr.INTERNAL_ERROR]="Internal error",ko);function Vk(t){return-32e3>=t&&t>=-32099}function $0(t){var e;return(e=py[t.toString()])!=null?e:Vk(t)?"Server error":"Application error"}var R0=function(t){qk(e,t);function e(n,i,o){var a;return a=t.call(this)||this,Object.setPrototypeOf(Wk(a),e.prototype),a.code=n,a.data=o,a.message=i!=null?i:$0(n),a}e.fromObject=function(i){return new e(i.code,i.message,i.data)};var r=e.prototype;return r.toObject=function(){return{code:this.code,data:this.data,message:this.message}},e}(O0(Error));function Gs(t){var e=py[t];return function(n){return new R0(t,e,n)}}Dr.PARSE_ERROR;Dr.INVALID_REQUEST;Dr.METHOD_NOT_FOUND;Dr.INVALID_PARAMS;Dr.INTERNAL_ERROR;var Jk=function(){function t(r){this.connection=r}var e=t.prototype;return e.createID=function(){return hy()},e.request=function(){var r=T0(La.mark(function i(o,a){var s;return La.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return a===void 0&&(a=void 0),f.next=3,this.connection.send({jsonrpc:"2.0",id:this.createID(),method:o,params:a});case 3:if(s=f.sent,s!=null){f.next=6;break}throw new Error("Missing response");case 6:if(s.error==null){f.next=8;break}throw R0.fromObject(s.error);case 8:return f.abrupt("return",s.result);case 9:case"end":return f.stop()}},i,this)}));function n(i,o){return r.apply(this,arguments)}return n}(),e.notify=function(){var r=T0(La.mark(function i(o,a){return La.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a===void 0&&(a=void 0),u.next=3,this.connection.send({jsonrpc:"2.0",method:o,params:a});case 3:case"end":return u.stop()}},i,this)}));function n(i,o){return r.apply(this,arguments)}return n}(),t}();function vy(t,e){return{jsonrpc:"2.0",id:t,error:{code:e,message:$0(e)}}}function Yk(t,e,r){console.warn("Unhandled handler error",e,r)}function Xk(t,e){console.warn("Unhandled invalid message",e)}function Zk(t,e){console.warn("Unhandled notification",e)}function Qk(t,e){var r,n,i;e===void 0&&(e={});var o=(r=e.onHandlerError)!=null?r:Yk,a=(n=e.onInvalidMessage)!=null?n:Xk,s=(i=e.onNotification)!=null?i:Zk;return function(){var u=T0(La.mark(function c(h,b){var w,A,_,T,P,F,j;return La.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(w=b.id,!(b.jsonrpc!=="2.0"||b.method==null)){L.next=6;break}if(w!=null){L.next=5;break}return a(h,b),L.abrupt("return",null);case 5:return L.abrupt("return",vy(w,Dr.INVALID_REQUEST));case 6:if(A=t[b.method],A!=null){L.next=12;break}if(w!=null){L.next=11;break}return s(h,b),L.abrupt("return",null);case 11:return L.abrupt("return",vy(w,Dr.METHOD_NOT_FOUND));case 12:if(L.prev=12,_=A(h,b.params),_!=null){L.next=18;break}L.t0=_,L.next=26;break;case 18:if(typeof _.then!="function"){L.next=24;break}return L.next=21,_;case 21:L.t1=L.sent,L.next=25;break;case 24:L.t1=_;case 25:L.t0=L.t1;case 26:return T=L.t0,L.abrupt("return",w==null?null:{jsonrpc:"2.0",id:w,result:T});case 30:if(L.prev=30,L.t2=L.catch(12),w!=null){L.next=35;break}return o(h,b,L.t2),L.abrupt("return",null);case 35:return L.t2 instanceof R0?P=L.t2.toObject():(o(h,b,L.t2),j=(F=L.t2.code)!=null?F:-32e3,P={code:j,message:L.t2.message||$0(j)}),L.abrupt("return",{jsonrpc:"2.0",id:w,error:P});case 37:case"end":return L.stop()}},c,null,[[12,30]])}));function f(c,h){return u.apply(this,arguments)}return f}()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var C0=function(t,e){return C0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},C0(t,e)};function Dn(t,e){C0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Hs(t){return typeof t=="function"}var my=!1,Bn={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}my=t},get useDeprecatedSynchronousErrorHandling(){return my}};function Da(t){setTimeout(function(){throw t},0)}var Kf={closed:!0,next:function(t){},error:function(t){if(Bn.useDeprecatedSynchronousErrorHandling)throw t;Da(t)},complete:function(){}},by=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function yy(t){return t!==null&&typeof t=="object"}var eT=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),Vf=eT,Ws=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,o=r._unsubscribe,a=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var s=0;s<n.length;++s){var u=n[s];u.remove(this)}if(Hs(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(h){e=h instanceof Vf?gy(h.errors):[h]}}if(by(a))for(var s=-1,f=a.length;++s<f;){var c=a[s];if(yy(c))try{c.unsubscribe()}catch(b){e=e||[],b instanceof Vf?e=e.concat(gy(b.errors)):e.push(b)}}if(e)throw new Vf(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var o=this._subscriptions;return o===null?this._subscriptions=[r]:o.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function gy(t){return t.reduce(function(e,r){return e.concat(r instanceof Vf?r.errors:r)},[])}var L0=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Qr=function(t){Dn(e,t);function e(r,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Kf;break;case 1:if(!r){o.destination=Kf;break}if(typeof r=="object"){r instanceof e?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new wy(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new wy(o,r,n,i);break}return o}return e.prototype[L0]=function(){return this},e.create=function(r,n,i){var o=new e(r,n,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(Ws),wy=function(t){Dn(e,t);function e(r,n,i,o){var a=t.call(this)||this;a._parentSubscriber=r;var s,u=a;return Hs(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==Kf&&(u=Object.create(n),Hs(u.unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=s,a._error=i,a._complete=o,a}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Bn.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=Bn.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):Da(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;Da(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!Bn.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),Bn.useDeprecatedSynchronousErrorHandling)throw i;Da(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!Bn.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(o){return Bn.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=o,r.syncErrorThrown=!0,!0):(Da(o),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(Qr);function tT(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof Qr?t=n:t=null}return!0}function rT(t,e,r){if(t){if(t instanceof Qr)return t;if(t[L0])return t[L0]()}return!t&&!e&&!r?new Qr(Kf):new Qr(t,e,r)}var Ks=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function _y(t){return t}function nT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xy(t)}function xy(t){return t.length===0?_y:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var ui=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,o=rT(e,r,n);if(i?o.add(i.call(o,this.source)):o.add(this.source||Bn.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Bn.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){Bn.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),tT(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Ey(r),new r(function(i,o){var a;a=n.subscribe(function(s){try{e(s)}catch(u){o(u),a&&a.unsubscribe()}},o,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[Ks]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:xy(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Ey(e),new e(function(n,i){var o;r.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function Ey(t){if(t||(t=Bn.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var iT=new ui(function(t){return t.complete()});function oT(t){return t?aT(t):iT}function aT(t){return new ui(function(e){return t.schedule(function(){return e.complete()})})}var sT=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function uT(t,e){return new ui(function(r){var n=new Ws,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function Vi(){}var fT=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),cT=fT,lT=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Sy=lT;function D0(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new hT(t,e))}}var hT=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new dT(e,this.project,this.thisArg))},t}(),dT=function(t){Dn(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(Qr),pT=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Da),e}};function vT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jf=vT(),mT=function(t){return function(e){var r=t[Jf]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},bT=function(t){return function(e){var r=t[Ks]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Ay=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Iy(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var Py=function(t){if(!!t&&typeof t[Ks]=="function")return bT(t);if(Ay(t))return sT(t);if(Iy(t))return pT(t);if(!!t&&typeof t[Jf]=="function")return mT(t);var e=yy(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function yT(t,e){return new ui(function(r){var n=new Ws;return n.add(e.schedule(function(){var i=t[Ks]();n.add(i.subscribe({next:function(o){n.add(e.schedule(function(){return r.next(o)}))},error:function(o){n.add(e.schedule(function(){return r.error(o)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function gT(t,e){return new ui(function(r){var n=new Ws;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function wT(t,e){if(!t)throw new Error("Iterable cannot be null");return new ui(function(r){var n=new Ws,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[Jf](),n.add(e.schedule(function(){if(!r.closed){var o,a;try{var s=i.next();o=s.value,a=s.done}catch(u){r.error(u);return}a?r.complete():(r.next(o),this.schedule())}}))})),n})}function _T(t){return t&&typeof t[Ks]=="function"}function xT(t){return t&&typeof t[Jf]=="function"}function ET(t,e){if(t!=null){if(_T(t))return yT(t,e);if(Iy(t))return gT(t,e);if(Ay(t))return uT(t,e);if(xT(t)||typeof t=="string")return wT(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function ST(t,e){return e?ET(t,e):t instanceof ui?t:new ui(Py(t))}var AT=function(t){Dn(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Qr),IT=function(t){Dn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Qr);function PT(t,e){if(!e.closed){if(t instanceof ui)return t.subscribe(e);var r;try{r=Py(t)(e)}catch(n){e.error(n)}return r}}function My(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(My(function(i,o){return ST(t(i,o)).pipe(D0(function(a,s){return e(i,a,o,s)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new MT(t,r))})}var MT=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new kT(e,this.project,this.concurrent))},t}(),kT=function(t){Dn(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var o=t.call(this,r)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new AT(this),i=this.destination;i.add(n);var o=PT(r,n);o!==n&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(IT);function ky(t,e,r,n){return Hs(r)&&(n=r,r=void 0),n?ky(t,e,r).pipe(D0(function(i){return by(i)?n.apply(void 0,i):n(i)})):new ui(function(i){function o(a){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(a)}Ty(t,e,o,i,r)})}function Ty(t,e,r,n,i){var o;if(OT(t)){var a=t;t.addEventListener(e,r,i),o=function(){return a.removeEventListener(e,r,i)}}else if(NT(t)){var s=t;t.on(e,r),o=function(){return s.off(e,r)}}else if(TT(t)){var u=t;t.addListener(e,r),o=function(){return u.removeListener(e,r)}}else if(t&&t.length)for(var f=0,c=t.length;f<c;f++)Ty(t[f],e,r,n,i);else throw new TypeError("Invalid event target");n.add(o)}function TT(t){return t&&typeof t.addListener=="function"&&typeof t.removeListener=="function"}function NT(t){return t&&typeof t.on=="function"&&typeof t.off=="function"}function OT(t){return t&&typeof t.addEventListener=="function"&&typeof t.removeEventListener=="function"}function B0(t,e){return function(n){return n.lift(new $T(t,e))}}var $T=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new RT(e,this.predicate,this.thisArg))},t}(),RT=function(t){Dn(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(Qr);function CT(t){return t===void 0&&(t=null),function(e){return e.lift(new LT(t))}}var LT=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new DT(e,this.defaultValue))},t}(),DT=function(t){Dn(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Qr);function BT(t){return t===void 0&&(t=jT),function(e){return e.lift(new UT(t))}}var UT=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new FT(e,this.errorFactory))},t}(),FT=function(t){Dn(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(Qr);function jT(){return new Sy}function zT(t){return function(e){return t===0?oT():e.lift(new qT(t))}}var qT=function(){function t(e){if(this.total=e,this.total<0)throw new cT}return t.prototype.call=function(e,r){return r.subscribe(new GT(e,this.total))},t}(),GT=function(t){Dn(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(Qr);function HT(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?B0(function(i,o){return t(i,o,n)}):_y,zT(1),r?CT(e):BT(function(){return new Sy}))}}function WT(t,e,r){return function(i){return i.lift(new KT(t,e,r))}}var KT=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new VT(e,this.nextOrObserver,this.error,this.complete))},t}(),VT=function(t){Dn(e,t);function e(r,n,i,o){var a=t.call(this,r)||this;return a._tapNext=Vi,a._tapError=Vi,a._tapComplete=Vi,a._tapError=i||Vi,a._tapComplete=o||Vi,Hs(n)?(a._context=a,a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||Vi,a._tapError=n.error||Vi,a._tapComplete=n.complete||Vi),a}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(Qr);function JT(t){return function(r){return{__tw:!0,ns:t,msg:r}}}function YT(t){return function(r){if(r.__tw!==!0)throw new Error("Input is not a wrapped message");if(typeof r.ns!="string")throw new Error("Invalid namespace type for wrapped message: expected a string, got "+typeof r.ns);if(r.ns!==t)throw new Error("Invalid namespace for wrapped message: expected "+t+", got "+r.ns);return r.msg}}function XT(t){return Array.isArray(t)||(t=[t]),function(e){return t.includes(e.origin)}}function Ny(t,e){var r=ky(t,"message");if(e==null)return r;var n=typeof e=="function"?e:XT(e);return r.pipe(B0(n))}function Oy(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(f){r(f);return}s.done?e(u):Promise.resolve(u).then(n,i)}function ZT(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(u){Oy(o,n,i,a,s,"next",u)}function s(u){Oy(o,n,i,a,s,"throw",u)}a(void 0)})}}function QT(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function eN(t,e){return e={exports:{}},t(e,e.exports),e.exports}var $y=eN(function(t){var e=function(r){var n=Object.prototype,i=n.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function c(v,d,l){return Object.defineProperty(v,d,{value:l,enumerable:!0,configurable:!0,writable:!0}),v[d]}try{c({},"")}catch{c=function(d,l,x){return d[l]=x}}function h(v,d,l,x){var B=d&&d.prototype instanceof F?d:F,H=Object.create(B.prototype),D=new g(x||[]);return H._invoke=$(v,l,D),H}r.wrap=h;function b(v,d,l){try{return{type:"normal",arg:v.call(d,l)}}catch(x){return{type:"throw",arg:x}}}var w="suspendedStart",A="suspendedYield",_="executing",T="completed",P={};function F(){}function j(){}function U(){}var L={};c(L,s,function(){return this});var G=Object.getPrototypeOf,p=G&&G(G(M([])));p&&p!==n&&i.call(p,s)&&(L=p);var I=U.prototype=F.prototype=Object.create(L);j.prototype=U,c(I,"constructor",U),c(U,"constructor",j),j.displayName=c(U,f,"GeneratorFunction");function C(v){["next","throw","return"].forEach(function(d){c(v,d,function(l){return this._invoke(d,l)})})}r.isGeneratorFunction=function(v){var d=typeof v=="function"&&v.constructor;return d?d===j||(d.displayName||d.name)==="GeneratorFunction":!1},r.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,U):(v.__proto__=U,c(v,f,"GeneratorFunction")),v.prototype=Object.create(I),v},r.awrap=function(v){return{__await:v}};function V(v,d){function l(H,D,k,Z){var z=b(v[H],v,D);if(z.type==="throw")Z(z.arg);else{var K=z.arg,W=K.value;return W&&typeof W=="object"&&i.call(W,"__await")?d.resolve(W.__await).then(function(S){l("next",S,k,Z)},function(S){l("throw",S,k,Z)}):d.resolve(W).then(function(S){K.value=S,k(K)},function(S){return l("throw",S,k,Z)})}}var x;function B(H,D){function k(){return new d(function(Z,z){l(H,D,Z,z)})}return x=x?x.then(k,k):k()}this._invoke=B}C(V.prototype),c(V.prototype,u,function(){return this}),r.AsyncIterator=V,r.async=function(v,d,l,x,B){B===void 0&&(B=Promise);var H=new V(h(v,d,l,x),B);return r.isGeneratorFunction(d)?H:H.next().then(function(D){return D.done?D.value:H.next()})};function $(v,d,l){var x=w;return function(H,D){if(x===_)throw new Error("Generator is already running");if(x===T){if(H==="throw")throw D;return R()}for(l.method=H,l.arg=D;;){var k=l.delegate;if(k){var Z=m(k,l);if(Z){if(Z===P)continue;return Z}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(x===w)throw x=T,l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);x=_;var z=b(v,d,l);if(z.type==="normal"){if(x=l.done?T:A,z.arg===P)continue;return{value:z.arg,done:l.done}}else z.type==="throw"&&(x=T,l.method="throw",l.arg=z.arg)}}}function m(v,d){var l=v.iterator[d.method];if(l===o){if(d.delegate=null,d.method==="throw"){if(v.iterator.return&&(d.method="return",d.arg=o,m(v,d),d.method==="throw"))return P;d.method="throw",d.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var x=b(l,v.iterator,d.arg);if(x.type==="throw")return d.method="throw",d.arg=x.arg,d.delegate=null,P;var B=x.arg;if(!B)return d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,P;if(B.done)d[v.resultName]=B.value,d.next=v.nextLoc,d.method!=="return"&&(d.method="next",d.arg=o);else return B;return d.delegate=null,P}C(I),c(I,f,"Generator"),c(I,s,function(){return this}),c(I,"toString",function(){return"[object Generator]"});function E(v){var d={tryLoc:v[0]};1 in v&&(d.catchLoc=v[1]),2 in v&&(d.finallyLoc=v[2],d.afterLoc=v[3]),this.tryEntries.push(d)}function y(v){var d=v.completion||{};d.type="normal",delete d.arg,v.completion=d}function g(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(E,this),this.reset(!0)}r.keys=function(v){var d=[];for(var l in v)d.push(l);return d.reverse(),function x(){for(;d.length;){var B=d.pop();if(B in v)return x.value=B,x.done=!1,x}return x.done=!0,x}};function M(v){if(v){var d=v[s];if(d)return d.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var l=-1,x=function B(){for(;++l<v.length;)if(i.call(v,l))return B.value=v[l],B.done=!1,B;return B.value=o,B.done=!0,B};return x.next=x}}return{next:R}}r.values=M;function R(){return{value:o,done:!0}}return g.prototype={constructor:g,reset:function(v){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(y),!v)for(var d in this)d.charAt(0)==="t"&&i.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=o)},stop:function(){this.done=!0;var v=this.tryEntries[0],d=v.completion;if(d.type==="throw")throw d.arg;return this.rval},dispatchException:function(v){if(this.done)throw v;var d=this;function l(Z,z){return H.type="throw",H.arg=v,d.next=Z,z&&(d.method="next",d.arg=o),!!z}for(var x=this.tryEntries.length-1;x>=0;--x){var B=this.tryEntries[x],H=B.completion;if(B.tryLoc==="root")return l("end");if(B.tryLoc<=this.prev){var D=i.call(B,"catchLoc"),k=i.call(B,"finallyLoc");if(D&&k){if(this.prev<B.catchLoc)return l(B.catchLoc,!0);if(this.prev<B.finallyLoc)return l(B.finallyLoc)}else if(D){if(this.prev<B.catchLoc)return l(B.catchLoc,!0)}else if(k){if(this.prev<B.finallyLoc)return l(B.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(v,d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.tryLoc<=this.prev&&i.call(x,"finallyLoc")&&this.prev<x.finallyLoc){var B=x;break}}B&&(v==="break"||v==="continue")&&B.tryLoc<=d&&d<=B.finallyLoc&&(B=null);var H=B?B.completion:{};return H.type=v,H.arg=d,B?(this.method="next",this.next=B.finallyLoc,P):this.complete(H)},complete:function(v,d){if(v.type==="throw")throw v.arg;return v.type==="break"||v.type==="continue"?this.next=v.arg:v.type==="return"?(this.rval=this.arg=v.arg,this.method="return",this.next="end"):v.type==="normal"&&d&&(this.next=d),P},finish:function(v){for(var d=this.tryEntries.length-1;d>=0;--d){var l=this.tryEntries[d];if(l.finallyLoc===v)return this.complete(l.completion,l.afterLoc),y(l),P}},catch:function(v){for(var d=this.tryEntries.length-1;d>=0;--d){var l=this.tryEntries[d];if(l.tryLoc===v){var x=l.completion;if(x.type==="throw"){var B=x.arg;y(l)}return B}}throw new Error("illegal catch attempt")},delegateYield:function(v,d,l){return this.delegate={iterator:M(v),resultName:d,nextLoc:l},this.method==="next"&&(this.arg=o),P}},r}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}),tN=["filter","methods","namespace","target"];function rN(t,e,r){r===void 0&&(r={});var n=Qk(t,r),i=YT(e);return nT(D0(function(o){try{var a=i(o.data);return a.method?{type:"request",message:o,request:a}:null}catch{return null}}),B0(function(o){return o!==null}),My(function(){var o=ZT($y.mark(function a(s){return $y.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=s.message,f.t1=s.request,f.next=4,n(s.message,s.request);case 4:return f.t2=f.sent,f.abrupt("return",{type:"handled",message:f.t0,request:f.t1,response:f.t2});case 6:case"end":return f.stop()}},a)}));return function(a){return o.apply(this,arguments)}}()))}function nN(t){var e=t.filter,r=t.methods,n=t.namespace,i=t.target,o=QT(t,tN),a=JT(n);return Ny(i,e).pipe(rN(r,n,o),WT(function(s){if(s.response!=null){var u,f=(u=s.message.source)!=null?u:window;f.postMessage(a(s.response),s.message.origin||"*")}}))}function U0(t,e,r){return r===void 0&&(r=window),nN({methods:e,namespace:t,target:r})}function Ry(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(f){r(f);return}s.done?e(u):Promise.resolve(u).then(n,i)}function iN(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(u){Ry(o,n,i,a,s,"next",u)}function s(u){Ry(o,n,i,a,s,"throw",u)}a(void 0)})}}function oN(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Cy=oN(function(t){var e=function(r){var n=Object.prototype,i=n.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function c(v,d,l){return Object.defineProperty(v,d,{value:l,enumerable:!0,configurable:!0,writable:!0}),v[d]}try{c({},"")}catch{c=function(l,x,B){return l[x]=B}}function h(v,d,l,x){var B=d&&d.prototype instanceof F?d:F,H=Object.create(B.prototype),D=new g(x||[]);return H._invoke=$(v,l,D),H}r.wrap=h;function b(v,d,l){try{return{type:"normal",arg:v.call(d,l)}}catch(x){return{type:"throw",arg:x}}}var w="suspendedStart",A="suspendedYield",_="executing",T="completed",P={};function F(){}function j(){}function U(){}var L={};c(L,s,function(){return this});var G=Object.getPrototypeOf,p=G&&G(G(M([])));p&&p!==n&&i.call(p,s)&&(L=p);var I=U.prototype=F.prototype=Object.create(L);j.prototype=U,c(I,"constructor",U),c(U,"constructor",j),j.displayName=c(U,f,"GeneratorFunction");function C(v){["next","throw","return"].forEach(function(d){c(v,d,function(l){return this._invoke(d,l)})})}r.isGeneratorFunction=function(v){var d=typeof v=="function"&&v.constructor;return d?d===j||(d.displayName||d.name)==="GeneratorFunction":!1},r.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,U):(v.__proto__=U,c(v,f,"GeneratorFunction")),v.prototype=Object.create(I),v},r.awrap=function(v){return{__await:v}};function V(v,d){function l(H,D,k,Z){var z=b(v[H],v,D);if(z.type==="throw")Z(z.arg);else{var K=z.arg,W=K.value;return W&&typeof W=="object"&&i.call(W,"__await")?d.resolve(W.__await).then(function(S){l("next",S,k,Z)},function(S){l("throw",S,k,Z)}):d.resolve(W).then(function(S){K.value=S,k(K)},function(S){return l("throw",S,k,Z)})}}var x;function B(H,D){function k(){return new d(function(Z,z){l(H,D,Z,z)})}return x=x?x.then(k,k):k()}this._invoke=B}C(V.prototype),c(V.prototype,u,function(){return this}),r.AsyncIterator=V,r.async=function(v,d,l,x,B){B===void 0&&(B=Promise);var H=new V(h(v,d,l,x),B);return r.isGeneratorFunction(d)?H:H.next().then(function(D){return D.done?D.value:H.next()})};function $(v,d,l){var x=w;return function(H,D){if(x===_)throw new Error("Generator is already running");if(x===T){if(H==="throw")throw D;return R()}for(l.method=H,l.arg=D;;){var k=l.delegate;if(k){var Z=m(k,l);if(Z){if(Z===P)continue;return Z}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(x===w)throw x=T,l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);x=_;var z=b(v,d,l);if(z.type==="normal"){if(x=l.done?T:A,z.arg===P)continue;return{value:z.arg,done:l.done}}else z.type==="throw"&&(x=T,l.method="throw",l.arg=z.arg)}}}function m(v,d){var l=v.iterator[d.method];if(l===o){if(d.delegate=null,d.method==="throw"){if(v.iterator.return&&(d.method="return",d.arg=o,m(v,d),d.method==="throw"))return P;d.method="throw",d.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var x=b(l,v.iterator,d.arg);if(x.type==="throw")return d.method="throw",d.arg=x.arg,d.delegate=null,P;var B=x.arg;if(!B)return d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,P;if(B.done)d[v.resultName]=B.value,d.next=v.nextLoc,d.method!=="return"&&(d.method="next",d.arg=o);else return B;return d.delegate=null,P}C(I),c(I,f,"Generator"),c(I,s,function(){return this}),c(I,"toString",function(){return"[object Generator]"});function E(v){var d={tryLoc:v[0]};1 in v&&(d.catchLoc=v[1]),2 in v&&(d.finallyLoc=v[2],d.afterLoc=v[3]),this.tryEntries.push(d)}function y(v){var d=v.completion||{};d.type="normal",delete d.arg,v.completion=d}function g(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(E,this),this.reset(!0)}r.keys=function(v){var d=[];for(var l in v)d.push(l);return d.reverse(),function x(){for(;d.length;){var B=d.pop();if(B in v)return x.value=B,x.done=!1,x}return x.done=!0,x}};function M(v){if(v){var d=v[s];if(d)return d.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var l=-1,x=function B(){for(;++l<v.length;)if(i.call(v,l))return B.value=v[l],B.done=!1,B;return B.value=o,B.done=!0,B};return x.next=x}}return{next:R}}r.values=M;function R(){return{value:o,done:!0}}return g.prototype={constructor:g,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(y),!d)for(var l in this)l.charAt(0)==="t"&&i.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=o)},stop:function(){this.done=!0;var d=this.tryEntries[0],l=d.completion;if(l.type==="throw")throw l.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var l=this;function x(z,K){return D.type="throw",D.arg=d,l.next=z,K&&(l.method="next",l.arg=o),!!K}for(var B=this.tryEntries.length-1;B>=0;--B){var H=this.tryEntries[B],D=H.completion;if(H.tryLoc==="root")return x("end");if(H.tryLoc<=this.prev){var k=i.call(H,"catchLoc"),Z=i.call(H,"finallyLoc");if(k&&Z){if(this.prev<H.catchLoc)return x(H.catchLoc,!0);if(this.prev<H.finallyLoc)return x(H.finallyLoc)}else if(k){if(this.prev<H.catchLoc)return x(H.catchLoc,!0)}else if(Z){if(this.prev<H.finallyLoc)return x(H.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(d,l){for(var x=this.tryEntries.length-1;x>=0;--x){var B=this.tryEntries[x];if(B.tryLoc<=this.prev&&i.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var H=B;break}}H&&(d==="break"||d==="continue")&&H.tryLoc<=l&&l<=H.finallyLoc&&(H=null);var D=H?H.completion:{};return D.type=d,D.arg=l,H?(this.method="next",this.next=H.finallyLoc,P):this.complete(D)},complete:function(d,l){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&l&&(this.next=l),P},finish:function(d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.finallyLoc===d)return this.complete(x.completion,x.afterLoc),y(x),P}},catch:function(d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.tryLoc===d){var B=x.completion;if(B.type==="throw"){var H=B.arg;y(x)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(d,l,x){return this.delegate={iterator:M(d),resultName:l,nextLoc:x},this.method==="next"&&(this.arg=o),P}},r}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}),aN="3id-connect-iframedisplay",sN="3id-connect-managedisplay",Ly=99999,Dy="position: fixed; width:0; height:0; border:0; border:none !important",uN="border:none; border:0; z-index: "+(Ly-2)+"; position: fixed; max-width: 100%;",fN="border:none; border:0; z-index: "+(Ly-1)+"; position: fixed; width: 100%; height: 100%; top: 0; left: 0;",cN="top: 10px; right: 10px",lN="bottom: 0px; left: 0px;",hN=function(e){return function(){return e.style=Dy}},dN=function(e){return function(r,n,i){r===void 0&&(r=!1),n===void 0&&(n="245px"),i===void 0&&(i="440px"),e.style=uN+" width: "+i+"; height: "+n+"; "+(r?lN:cN)}};function pN(t){var e=dN(t),r=hN(t);return U0(aN,{hide:function(){r()},display:function(i,o){var a=o.mobile,s=o.height,u=o.width;e(a,s,u)}})}var vN=function(e){var r=document.createElement("iframe");return r.name="threeid-connect",r.className="threeid-connect",r.src=e,r.style=Dy,r.allowTransparency=!0,r.frameBorder=0,r};function mN(t){var e;return U0(sN,{display:function(){var r=iN(Cy.mark(function i(o,a){var s,u,f;return Cy.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=a.accountId,e=bN(t+"?accountId="+s),document.body.appendChild(e),h.next=5,new Promise(function(b){e.onload=b});case 5:return u=Ny(window),f=function(w){return w.data.ns==="3id-connect-management"},h.next=9,u.pipe(HT(f)).toPromise();case 9:e.remove();case 10:case"end":return h.stop()}},i)}));function n(i,o){return r.apply(this,arguments)}return n}()})}var bN=function(e){var r=document.createElement("iframe");return r.name="threeid-connect-manage",r.className="threeid-connect-manage",r.src=e,r.allowtransparency=!1,r.style=fN,r};function By(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(f){r(f);return}s.done?e(u):Promise.resolve(u).then(n,i)}function F0(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(u){By(o,n,i,a,s,"next",u)}function s(u){By(o,n,i,a,s,"throw",u)}a(void 0)})}}function yN(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Ba=yN(function(t){var e=function(r){var n=Object.prototype,i=n.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function c(v,d,l){return Object.defineProperty(v,d,{value:l,enumerable:!0,configurable:!0,writable:!0}),v[d]}try{c({},"")}catch{c=function(l,x,B){return l[x]=B}}function h(v,d,l,x){var B=d&&d.prototype instanceof F?d:F,H=Object.create(B.prototype),D=new g(x||[]);return H._invoke=$(v,l,D),H}r.wrap=h;function b(v,d,l){try{return{type:"normal",arg:v.call(d,l)}}catch(x){return{type:"throw",arg:x}}}var w="suspendedStart",A="suspendedYield",_="executing",T="completed",P={};function F(){}function j(){}function U(){}var L={};c(L,s,function(){return this});var G=Object.getPrototypeOf,p=G&&G(G(M([])));p&&p!==n&&i.call(p,s)&&(L=p);var I=U.prototype=F.prototype=Object.create(L);j.prototype=U,c(I,"constructor",U),c(U,"constructor",j),j.displayName=c(U,f,"GeneratorFunction");function C(v){["next","throw","return"].forEach(function(d){c(v,d,function(l){return this._invoke(d,l)})})}r.isGeneratorFunction=function(v){var d=typeof v=="function"&&v.constructor;return d?d===j||(d.displayName||d.name)==="GeneratorFunction":!1},r.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,U):(v.__proto__=U,c(v,f,"GeneratorFunction")),v.prototype=Object.create(I),v},r.awrap=function(v){return{__await:v}};function V(v,d){function l(H,D,k,Z){var z=b(v[H],v,D);if(z.type==="throw")Z(z.arg);else{var K=z.arg,W=K.value;return W&&typeof W=="object"&&i.call(W,"__await")?d.resolve(W.__await).then(function(S){l("next",S,k,Z)},function(S){l("throw",S,k,Z)}):d.resolve(W).then(function(S){K.value=S,k(K)},function(S){return l("throw",S,k,Z)})}}var x;function B(H,D){function k(){return new d(function(Z,z){l(H,D,Z,z)})}return x=x?x.then(k,k):k()}this._invoke=B}C(V.prototype),c(V.prototype,u,function(){return this}),r.AsyncIterator=V,r.async=function(v,d,l,x,B){B===void 0&&(B=Promise);var H=new V(h(v,d,l,x),B);return r.isGeneratorFunction(d)?H:H.next().then(function(D){return D.done?D.value:H.next()})};function $(v,d,l){var x=w;return function(H,D){if(x===_)throw new Error("Generator is already running");if(x===T){if(H==="throw")throw D;return R()}for(l.method=H,l.arg=D;;){var k=l.delegate;if(k){var Z=m(k,l);if(Z){if(Z===P)continue;return Z}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(x===w)throw x=T,l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);x=_;var z=b(v,d,l);if(z.type==="normal"){if(x=l.done?T:A,z.arg===P)continue;return{value:z.arg,done:l.done}}else z.type==="throw"&&(x=T,l.method="throw",l.arg=z.arg)}}}function m(v,d){var l=v.iterator[d.method];if(l===o){if(d.delegate=null,d.method==="throw"){if(v.iterator.return&&(d.method="return",d.arg=o,m(v,d),d.method==="throw"))return P;d.method="throw",d.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var x=b(l,v.iterator,d.arg);if(x.type==="throw")return d.method="throw",d.arg=x.arg,d.delegate=null,P;var B=x.arg;if(!B)return d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,P;if(B.done)d[v.resultName]=B.value,d.next=v.nextLoc,d.method!=="return"&&(d.method="next",d.arg=o);else return B;return d.delegate=null,P}C(I),c(I,f,"Generator"),c(I,s,function(){return this}),c(I,"toString",function(){return"[object Generator]"});function E(v){var d={tryLoc:v[0]};1 in v&&(d.catchLoc=v[1]),2 in v&&(d.finallyLoc=v[2],d.afterLoc=v[3]),this.tryEntries.push(d)}function y(v){var d=v.completion||{};d.type="normal",delete d.arg,v.completion=d}function g(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(E,this),this.reset(!0)}r.keys=function(v){var d=[];for(var l in v)d.push(l);return d.reverse(),function x(){for(;d.length;){var B=d.pop();if(B in v)return x.value=B,x.done=!1,x}return x.done=!0,x}};function M(v){if(v){var d=v[s];if(d)return d.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var l=-1,x=function B(){for(;++l<v.length;)if(i.call(v,l))return B.value=v[l],B.done=!1,B;return B.value=o,B.done=!0,B};return x.next=x}}return{next:R}}r.values=M;function R(){return{value:o,done:!0}}return g.prototype={constructor:g,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(y),!d)for(var l in this)l.charAt(0)==="t"&&i.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=o)},stop:function(){this.done=!0;var d=this.tryEntries[0],l=d.completion;if(l.type==="throw")throw l.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var l=this;function x(z,K){return D.type="throw",D.arg=d,l.next=z,K&&(l.method="next",l.arg=o),!!K}for(var B=this.tryEntries.length-1;B>=0;--B){var H=this.tryEntries[B],D=H.completion;if(H.tryLoc==="root")return x("end");if(H.tryLoc<=this.prev){var k=i.call(H,"catchLoc"),Z=i.call(H,"finallyLoc");if(k&&Z){if(this.prev<H.catchLoc)return x(H.catchLoc,!0);if(this.prev<H.finallyLoc)return x(H.finallyLoc)}else if(k){if(this.prev<H.catchLoc)return x(H.catchLoc,!0)}else if(Z){if(this.prev<H.finallyLoc)return x(H.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(d,l){for(var x=this.tryEntries.length-1;x>=0;--x){var B=this.tryEntries[x];if(B.tryLoc<=this.prev&&i.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var H=B;break}}H&&(d==="break"||d==="continue")&&H.tryLoc<=l&&l<=H.finallyLoc&&(H=null);var D=H?H.completion:{};return D.type=d,D.arg=l,H?(this.method="next",this.next=H.finallyLoc,P):this.complete(D)},complete:function(d,l){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&l&&(this.next=l),P},finish:function(d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.finallyLoc===d)return this.complete(x.completion,x.afterLoc),y(x),P}},catch:function(d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.tryLoc===d){var B=x.completion;if(B.type==="throw"){var H=B.arg;y(x)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(d,l,x){return this.delegate={iterator:M(d),resultName:l,nextLoc:x},this.method==="next"&&(this.arg=o),P}},r}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}),Uy="3id-connect-authprovider";typeof process!="undefined"&&(Uy="3id-connect-authprovider");function gN(t,e){return e===void 0&&(e=Uy),U0(e,{accountId:function(){var r=F0(Ba.mark(function i(){return Ba.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.accountId();case 2:return a.abrupt("return",a.sent.toString());case 3:case"end":return a.stop()}},i)}));function n(){return r.apply(this,arguments)}return n}(),authenticate:function(){var r=F0(Ba.mark(function i(o,a){var s;return Ba.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=a.message,f.next=3,t.authenticate(s);case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i)}));function n(i,o){return r.apply(this,arguments)}return n}(),createLink:function(){var r=F0(Ba.mark(function i(o,a){var s;return Ba.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=a.did,f.next=3,t.createLink(s);case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},i)}));function n(i,o){return r.apply(this,arguments)}return n}()})}var Fy={},Yf={},jy={exports:{}},Xf=1;function wN(){return Xf=(Xf*9301+49297)%233280,Xf/233280}function _N(t){Xf=t}var xN={nextValue:wN,seed:_N},j0=xN,To="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",Ji,zy,Vs;function z0(){Vs=!1}function qy(t){if(!t){Ji!==To&&(Ji=To,z0());return}if(t!==Ji){if(t.length!==To.length)throw new Error("Custom alphabet for shortid must be "+To.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(r,n,i){return n!==i.lastIndexOf(r)});if(e.length)throw new Error("Custom alphabet for shortid must be "+To.length+" unique characters. These characters were not unique: "+e.join(", "));Ji=t,z0()}}function EN(t){return qy(t),Ji}function SN(t){j0.seed(t),zy!==t&&(z0(),zy=t)}function AN(){Ji||qy(To);for(var t=Ji.split(""),e=[],r=j0.nextValue(),n;t.length>0;)r=j0.nextValue(),n=Math.floor(r*t.length),e.push(t.splice(n,1)[0]);return e.join("")}function Gy(){return Vs||(Vs=AN(),Vs)}function IN(t){var e=Gy();return e[t]}function PN(){return Ji||To}var q0={get:PN,characters:EN,seed:SN,lookup:IN,shuffled:Gy},G0=typeof window=="object"&&(window.crypto||window.msCrypto),H0;!G0||!G0.getRandomValues?H0=function(t){for(var e=[],r=0;r<t;r++)e.push(Math.floor(Math.random()*256));return e}:H0=function(t){return G0.getRandomValues(new Uint8Array(t))};var MN=H0,kN=function(t,e,r){for(var n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*r/e.length),o="";;)for(var a=t(i),s=i;s--;)if(o+=e[a[s]&n]||"",o.length===+r)return o},TN=q0,NN=MN,ON=kN;function $N(t){for(var e=0,r,n="";!r;)n=n+ON(NN,TN.get(),1),r=t<Math.pow(16,e+1),e++;return n}var RN=$N,Zf=RN,CN=1567752802062,LN=7,Qf,Hy;function DN(t){var e="",r=Math.floor((Date.now()-CN)*.001);return r===Hy?Qf++:(Qf=0,Hy=r),e=e+Zf(LN),e=e+Zf(t),Qf>0&&(e=e+Zf(Qf)),e=e+Zf(r),e}var BN=DN,UN=q0;function FN(t){if(!t||typeof t!="string"||t.length<6)return!1;var e=new RegExp("[^"+UN.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!e.test(t)}var jN=FN;(function(t){var e=q0,r=BN,n=jN,i=0;function o(f){return e.seed(f),t.exports}function a(f){return i=f,t.exports}function s(f){return f!==void 0&&e.characters(f),e.shuffled()}function u(){return r(i)}t.exports=u,t.exports.generate=u,t.exports.seed=o,t.exports.worker=a,t.exports.characters=s,t.exports.isValid=n})(jy);var zN=jy.exports;Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=Wy;Yf.call=WN;var qN=zN,GN=HN(qN);function HN(t){return t&&t.__esModule?t:{default:t}}function Wy(t,e){e=e||{};var r=e.addListener||window.addEventListener,n=e.removeListener||window.removeEventListener,i=e.postMessage||window.postMessage,o=e.targetOrigin||"*",a=e.getMessageData||function(s){return s.data};return function(){var s={sender:"postmsg-rpc/client",id:(0,GN.default)(),func:t,args:Array.from(arguments)},u=void 0,f=new Promise(function(c,h){var b=function w(){var A=a.apply(null,arguments);if(!!A&&!(A.sender!=="postmsg-rpc/server"||A.id!==s.id)){if(n("message",w),A.err){var _=new Error("Unexpected error calling "+t);return Object.assign(_,A.err),h(_)}c(A.res)}};u=function(){n("message",b);var A=new Error("Canceled call to "+t);A.isCanceled=!0,h(A)},r("message",b),i(s,o)});return f.cancel=function(){return u()},f}}function WN(t){return Wy(t).apply(null,[].slice.call(arguments,1))}var W0={};Object.defineProperty(W0,"__esModule",{value:!0});W0.default=KN;function KN(t,e,r){r=r||{};var n=r.addListener||window.addEventListener,i=r.removeListener||window.removeEventListener,o=r.postMessage||window.postMessage,a=r.targetOrigin||"*",s=r.getMessageData||function(c){return c.data},u=r.isCallback||!1,f=function(){var h=s.apply(null,arguments);if(!!h&&!(h.sender!=="postmsg-rpc/client"||h.func!==t)){var b={sender:"postmsg-rpc/server",id:h.id},w=function(P){b.res=P,o(b,a)},A=function(P){b.err=Object.assign({message:P.message},P.output&&P.output.payload),o(b,a)};if(u)e.apply(null,h.args.concat(function(T,P){if(T)return A(T);w(P)}));else{var _=e.apply(null,h.args);Promise.resolve(_).then(w).catch(A)}}};return n("message",f),{close:function(){return i("message",f)}}}(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Yf;Object.defineProperty(t,"caller",{enumerable:!0,get:function(){return n(e).default}}),Object.defineProperty(t,"call",{enumerable:!0,get:function(){return e.call}});var r=W0;Object.defineProperty(t,"expose",{enumerable:!0,get:function(){return n(r).default}});function n(i){return i&&i.__esModule?i:{default:i}}})(Fy);function Ky(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(f){r(f);return}s.done?e(u):Promise.resolve(u).then(n,i)}function ec(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(u){Ky(o,n,i,a,s,"next",u)}function s(u){Ky(o,n,i,a,s,"throw",u)}a(void 0)})}}function Vy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jy(t,e,r){return e&&Vy(t.prototype,e),r&&Vy(t,r),t}function VN(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Yi=VN(function(t){var e=function(r){var n=Object.prototype,i=n.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function c(v,d,l){return Object.defineProperty(v,d,{value:l,enumerable:!0,configurable:!0,writable:!0}),v[d]}try{c({},"")}catch{c=function(l,x,B){return l[x]=B}}function h(v,d,l,x){var B=d&&d.prototype instanceof F?d:F,H=Object.create(B.prototype),D=new g(x||[]);return H._invoke=$(v,l,D),H}r.wrap=h;function b(v,d,l){try{return{type:"normal",arg:v.call(d,l)}}catch(x){return{type:"throw",arg:x}}}var w="suspendedStart",A="suspendedYield",_="executing",T="completed",P={};function F(){}function j(){}function U(){}var L={};c(L,s,function(){return this});var G=Object.getPrototypeOf,p=G&&G(G(M([])));p&&p!==n&&i.call(p,s)&&(L=p);var I=U.prototype=F.prototype=Object.create(L);j.prototype=U,c(I,"constructor",U),c(U,"constructor",j),j.displayName=c(U,f,"GeneratorFunction");function C(v){["next","throw","return"].forEach(function(d){c(v,d,function(l){return this._invoke(d,l)})})}r.isGeneratorFunction=function(v){var d=typeof v=="function"&&v.constructor;return d?d===j||(d.displayName||d.name)==="GeneratorFunction":!1},r.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,U):(v.__proto__=U,c(v,f,"GeneratorFunction")),v.prototype=Object.create(I),v},r.awrap=function(v){return{__await:v}};function V(v,d){function l(H,D,k,Z){var z=b(v[H],v,D);if(z.type==="throw")Z(z.arg);else{var K=z.arg,W=K.value;return W&&typeof W=="object"&&i.call(W,"__await")?d.resolve(W.__await).then(function(S){l("next",S,k,Z)},function(S){l("throw",S,k,Z)}):d.resolve(W).then(function(S){K.value=S,k(K)},function(S){return l("throw",S,k,Z)})}}var x;function B(H,D){function k(){return new d(function(Z,z){l(H,D,Z,z)})}return x=x?x.then(k,k):k()}this._invoke=B}C(V.prototype),c(V.prototype,u,function(){return this}),r.AsyncIterator=V,r.async=function(v,d,l,x,B){B===void 0&&(B=Promise);var H=new V(h(v,d,l,x),B);return r.isGeneratorFunction(d)?H:H.next().then(function(D){return D.done?D.value:H.next()})};function $(v,d,l){var x=w;return function(H,D){if(x===_)throw new Error("Generator is already running");if(x===T){if(H==="throw")throw D;return R()}for(l.method=H,l.arg=D;;){var k=l.delegate;if(k){var Z=m(k,l);if(Z){if(Z===P)continue;return Z}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(x===w)throw x=T,l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);x=_;var z=b(v,d,l);if(z.type==="normal"){if(x=l.done?T:A,z.arg===P)continue;return{value:z.arg,done:l.done}}else z.type==="throw"&&(x=T,l.method="throw",l.arg=z.arg)}}}function m(v,d){var l=v.iterator[d.method];if(l===o){if(d.delegate=null,d.method==="throw"){if(v.iterator.return&&(d.method="return",d.arg=o,m(v,d),d.method==="throw"))return P;d.method="throw",d.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var x=b(l,v.iterator,d.arg);if(x.type==="throw")return d.method="throw",d.arg=x.arg,d.delegate=null,P;var B=x.arg;if(!B)return d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,P;if(B.done)d[v.resultName]=B.value,d.next=v.nextLoc,d.method!=="return"&&(d.method="next",d.arg=o);else return B;return d.delegate=null,P}C(I),c(I,f,"Generator"),c(I,s,function(){return this}),c(I,"toString",function(){return"[object Generator]"});function E(v){var d={tryLoc:v[0]};1 in v&&(d.catchLoc=v[1]),2 in v&&(d.finallyLoc=v[2],d.afterLoc=v[3]),this.tryEntries.push(d)}function y(v){var d=v.completion||{};d.type="normal",delete d.arg,v.completion=d}function g(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(E,this),this.reset(!0)}r.keys=function(v){var d=[];for(var l in v)d.push(l);return d.reverse(),function x(){for(;d.length;){var B=d.pop();if(B in v)return x.value=B,x.done=!1,x}return x.done=!0,x}};function M(v){if(v){var d=v[s];if(d)return d.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var l=-1,x=function B(){for(;++l<v.length;)if(i.call(v,l))return B.value=v[l],B.done=!1,B;return B.value=o,B.done=!0,B};return x.next=x}}return{next:R}}r.values=M;function R(){return{value:o,done:!0}}return g.prototype={constructor:g,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(y),!d)for(var l in this)l.charAt(0)==="t"&&i.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=o)},stop:function(){this.done=!0;var d=this.tryEntries[0],l=d.completion;if(l.type==="throw")throw l.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var l=this;function x(z,K){return D.type="throw",D.arg=d,l.next=z,K&&(l.method="next",l.arg=o),!!K}for(var B=this.tryEntries.length-1;B>=0;--B){var H=this.tryEntries[B],D=H.completion;if(H.tryLoc==="root")return x("end");if(H.tryLoc<=this.prev){var k=i.call(H,"catchLoc"),Z=i.call(H,"finallyLoc");if(k&&Z){if(this.prev<H.catchLoc)return x(H.catchLoc,!0);if(this.prev<H.finallyLoc)return x(H.finallyLoc)}else if(k){if(this.prev<H.catchLoc)return x(H.catchLoc,!0)}else if(Z){if(this.prev<H.finallyLoc)return x(H.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(d,l){for(var x=this.tryEntries.length-1;x>=0;--x){var B=this.tryEntries[x];if(B.tryLoc<=this.prev&&i.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var H=B;break}}H&&(d==="break"||d==="continue")&&H.tryLoc<=l&&l<=H.finallyLoc&&(H=null);var D=H?H.completion:{};return D.type=d,D.arg=l,H?(this.method="next",this.next=H.finallyLoc,P):this.complete(D)},complete:function(d,l){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&l&&(this.next=l),P},finish:function(d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.finallyLoc===d)return this.complete(x.completion,x.afterLoc),y(x),P}},catch:function(d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.tryLoc===d){var B=x.completion;if(B.type==="throw"){var H=B.arg;y(x)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(d,l,x){return this.delegate={iterator:M(d),resultName:l,nextLoc:x},this.method==="next"&&(this.arg=o),P}},r}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}),JN=function(){function t(r,n){this.provider=r,this.accountId=n}var e=t.prototype;return e.send=function(){var r=ec(Yi.mark(function i(o,a){return Yi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o.params=Object.assign({},o.params,{accountId:this.accountId}),u.next=3,this.provider.send(o,a);case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},i,this)}));function n(i,o){return r.apply(this,arguments)}return n}(),Jy(t,[{key:"isDidProvider",get:function(){return!0}}]),t}(),YN="https://app-dev.3idconnect.org",Js="https://app-clay.3idconnect.org",XN="https://app.3idconnect.org",ZN="http://localhost:30001",QN="/management/index.html",Yy=Js,Xy=Js+"/management/index.html";typeof process!="undefined"&&(Yy=Js);typeof process!="undefined"&&(Xy=Js+"/management/index.html");var tc=function(e){return{connect_iframe:e,manage_iframe:""+e+QN}},K0={"dev-unstable":tc(YN),"testnet-clay":tc(Js),mainnet:tc(XN),local:tc(ZN)},eO=function(e){var r=Fy.caller("send",{postMessage:e});return{send:function(){var n=ec(Yi.mark(function o(a){return Yi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=JSON,u.next=3,r(a);case 3:return u.t1=u.sent,u.abrupt("return",u.t0.parse.call(u.t0,u.t1));case 5:case"end":return u.stop()}},o)}));function i(o){return n.apply(this,arguments)}return i}()}},tO=function(){if(typeof window=="undefined"||typeof document=="undefined")throw new Error("ThreeIdConnect not supported in this enviroment")},rO=function(){function t(r,n){var i=this;this._authProviderSubscription=null,this._connected=!1,tO();var o;r&&Object.keys(K0).includes(r)?(o=K0[r].connect_iframe,n=K0[r].manage_iframe):o=r,this.iframe=vN(o||Yy),this.manageUrl=n||Xy,this.iframeLoadedPromise=new Promise(function(a){i.iframe.onload=function(){a()}}),document.body.appendChild(this.iframe)}var e=t.prototype;return e.connect=function(){var r=ec(Yi.mark(function i(o){return Yi.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this._authProviderSubscription&&this._authProviderSubscription.unsubscribe(),!o){s.next=4;break}return s.next=4,this.setAuthProvider(o);case 4:return s.next=6,this.iframeLoadedPromise;case 6:this.postMessage=this.iframe.contentWindow.postMessage.bind(this.iframe.contentWindow),this._authProviderSubscription=gN(o).subscribe(),pN(this.iframe).subscribe(),mN(this.manageUrl).subscribe(),this.RPCProvider=eO(this.postMessage),this.RPCClient=new Jk(this.RPCProvider),this._connected=!0;case 13:case"end":return s.stop()}},i,this)}));function n(i){return r.apply(this,arguments)}return n}(),e.setAuthProvider=function(){var r=ec(Yi.mark(function i(o){return Yi.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.authProvider=o,s.next=3,this.authProvider.accountId();case 3:this.accountId=s.sent.toString();case 4:case"end":return s.stop()}},i,this)}));function n(i){return r.apply(this,arguments)}return n}(),e.getDidProvider=function(){if(!this.authProvider)throw new Error("setAuthProvider required");return new JN(this.RPCProvider,this.accountId)},Jy(t,[{key:"connected",get:function(){return this._connected}}]),t}(),Ua={},Xi={},rc={},fr={},Mr={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var nO=te&&te.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Mr,"__esModule",{value:!0});var iO=Object.prototype.hasOwnProperty;function V0(t,e){return iO.call(t,e)}Mr.hasOwnProperty=V0;function Zy(t){if(Array.isArray(t)){for(var r=new Array(t.length),e=0;e<r.length;e++)r[e]=""+e;return r}if(Object.keys)return Object.keys(t);var r=[];for(var n in t)V0(t,n)&&r.push(n);return r}Mr._objectKeys=Zy;function oO(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}Mr._deepClone=oO;function aO(t){for(var e=0,r=t.length,n;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}Mr.isInteger=aO;function J0(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}Mr.escapePathComponent=J0;function sO(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Mr.unescapePathComponent=sO;function Y0(t,e){var r;for(var n in t)if(V0(t,n)){if(t[n]===e)return J0(n)+"/";if(typeof t[n]=="object"&&(r=Y0(t[n],e),r!=""))return J0(n)+"/"+r}return""}Mr._getPathRecursive=Y0;function uO(t,e){if(t===e)return"/";var r=Y0(t,e);if(r==="")throw new Error("Object not found in root");return"/"+r}Mr.getPath=uO;function X0(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,r=t.length;e<r;e++)if(X0(t[e]))return!0}else if(typeof t=="object"){for(var n=Zy(t),i=n.length,e=0;e<i;e++)if(X0(t[n[e]]))return!0}}return!1}Mr.hasUndefined=X0;function Qy(t,e){var r=[t];for(var n in e){var i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i!="undefined"&&r.push(n+": "+i)}return r.join(`
`)}var fO=function(t){nO(e,t);function e(r,n,i,o,a){var s=this.constructor,u=t.call(this,Qy(r,{name:n,index:i,operation:o,tree:a}))||this;return u.name=n,u.index=i,u.operation=o,u.tree=a,Object.setPrototypeOf(u,s.prototype),u.message=Qy(r,{name:n,index:i,operation:o,tree:a}),u}return e}(Error);Mr.PatchError=fO;var nc={},eg=Array.isArray,tg=Object.keys,cO=Object.prototype.hasOwnProperty,lO=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){var n=eg(e),i=eg(r),o,a,s;if(n&&i){if(a=e.length,a!=r.length)return!1;for(o=a;o--!=0;)if(!t(e[o],r[o]))return!1;return!0}if(n!=i)return!1;var u=e instanceof Date,f=r instanceof Date;if(u!=f)return!1;if(u&&f)return e.getTime()==r.getTime();var c=e instanceof RegExp,h=r instanceof RegExp;if(c!=h)return!1;if(c&&h)return e.toString()==r.toString();var b=tg(e);if(a=b.length,a!==tg(r).length)return!1;for(o=a;o--!=0;)if(!cO.call(r,b[o]))return!1;for(o=a;o--!=0;)if(s=b[o],!t(e[s],r[s]))return!1;return!0}return e!==e&&r!==r};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=lO,r=Mr;t.JsonPatchError=r.PatchError,t.deepClone=r._deepClone;var n={add:function(h,b,w){return h[b]=this.value,{newDocument:w}},remove:function(h,b,w){var A=h[b];return delete h[b],{newDocument:w,removed:A}},replace:function(h,b,w){var A=h[b];return h[b]=this.value,{newDocument:w,removed:A}},move:function(h,b,w){var A=o(w,this.path);A&&(A=r._deepClone(A));var _=a(w,{op:"remove",path:this.from}).removed;return a(w,{op:"add",path:this.path,value:_}),{newDocument:w,removed:A}},copy:function(h,b,w){var A=o(w,this.from);return a(w,{op:"add",path:this.path,value:r._deepClone(A)}),{newDocument:w}},test:function(h,b,w){return{newDocument:w,test:e(h[b],this.value)}},_get:function(h,b,w){return this.value=h[b],{newDocument:w}}},i={add:function(h,b,w){return r.isInteger(b)?h.splice(b,0,this.value):h[b]=this.value,{newDocument:w,index:b}},remove:function(h,b,w){var A=h.splice(b,1);return{newDocument:w,removed:A[0]}},replace:function(h,b,w){var A=h[b];return h[b]=this.value,{newDocument:w,removed:A}},move:n.move,copy:n.copy,test:n.test,_get:n._get};function o(h,b){if(b=="")return h;var w={op:"_get",path:b};return a(h,w),w.value}t.getValueByPointer=o;function a(h,b,w,A,_,T){if(w===void 0&&(w=!1),A===void 0&&(A=!0),_===void 0&&(_=!0),T===void 0&&(T=0),w&&(typeof w=="function"?w(b,0,h,b.path):f(b,0)),b.path===""){var P={newDocument:h};if(b.op==="add")return P.newDocument=b.value,P;if(b.op==="replace")return P.newDocument=b.value,P.removed=h,P;if(b.op==="move"||b.op==="copy")return P.newDocument=o(h,b.from),b.op==="move"&&(P.removed=h),P;if(b.op==="test"){if(P.test=e(h,b.value),P.test===!1)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",T,b,h);return P.newDocument=h,P}else{if(b.op==="remove")return P.removed=h,P.newDocument=null,P;if(b.op==="_get")return b.value=h,P;if(w)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",T,b,h);return P}}else{A||(h=r._deepClone(h));var F=b.path||"",j=F.split("/"),U=h,L=1,G=j.length,p=void 0,I=void 0,C=void 0;for(typeof w=="function"?C=w:C=f;;){if(I=j[L],_&&I=="__proto__")throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(w&&p===void 0&&(U[I]===void 0?p=j.slice(0,L).join("/"):L==G-1&&(p=b.path),p!==void 0&&C(b,0,h,p)),L++,Array.isArray(U)){if(I==="-")I=U.length;else{if(w&&!r.isInteger(I))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",T,b,h);r.isInteger(I)&&(I=~~I)}if(L>=G){if(w&&b.op==="add"&&I>U.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",T,b,h);var P=i[b.op].call(b,U,I,h);if(P.test===!1)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",T,b,h);return P}}else if(I&&I.indexOf("~")!=-1&&(I=r.unescapePathComponent(I)),L>=G){var P=n[b.op].call(b,U,I,h);if(P.test===!1)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",T,b,h);return P}U=U[I]}}}t.applyOperation=a;function s(h,b,w,A,_){if(A===void 0&&(A=!0),_===void 0&&(_=!0),w&&!Array.isArray(b))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");A||(h=r._deepClone(h));for(var T=new Array(b.length),P=0,F=b.length;P<F;P++)T[P]=a(h,b[P],w,!0,_,P),h=T[P].newDocument;return T.newDocument=h,T}t.applyPatch=s;function u(h,b,w){var A=a(h,b);if(A.test===!1)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",w,b,h);return A.newDocument}t.applyReducer=u;function f(h,b,w,A){if(typeof h!="object"||h===null||Array.isArray(h))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",b,h,w);if(n[h.op]){if(typeof h.path!="string")throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",b,h,w);if(h.path.indexOf("/")!==0&&h.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",b,h,w);if((h.op==="move"||h.op==="copy")&&typeof h.from!="string")throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",b,h,w);if((h.op==="add"||h.op==="replace"||h.op==="test")&&h.value===void 0)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",b,h,w);if((h.op==="add"||h.op==="replace"||h.op==="test")&&r.hasUndefined(h.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",b,h,w);if(w){if(h.op=="add"){var _=h.path.split("/").length,T=A.split("/").length;if(_!==T+1&&_!==T)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",b,h,w)}else if(h.op==="replace"||h.op==="remove"||h.op==="_get"){if(h.path!==A)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",b,h,w)}else if(h.op==="move"||h.op==="copy"){var P={op:"_get",path:h.from,value:void 0},F=c([P],w);if(F&&F.name==="OPERATION_PATH_UNRESOLVABLE")throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",b,h,w)}}}else throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",b,h,w)}t.validator=f;function c(h,b,w){try{if(!Array.isArray(h))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(b)s(r._deepClone(b),r._deepClone(h),w||!0);else{w=w||f;for(var A=0;A<h.length;A++)w(h[A],A,b,void 0)}}catch(_){if(_ instanceof t.JsonPatchError)return _;throw _}}t.validate=c,t.default={JsonPatchError:t.JsonPatchError,deepClone:t.deepClone,getValueByPointer:o,applyOperation:a,applyPatch:s,applyReducer:u,validator:f,validate:c}})(nc);var Z0=te&&te.__assign||function(){return Z0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Z0.apply(this,arguments)};Object.defineProperty(fr,"__esModule",{value:!0});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var cr=Mr,hO=nc,Fa=nc;fr.applyOperation=Fa.applyOperation;fr.applyPatch=Fa.applyPatch;fr.applyReducer=Fa.applyReducer;fr.getValueByPointer=Fa.getValueByPointer;fr.validate=Fa.validate;fr.validator=Fa.validator;var ic=Mr;fr.JsonPatchError=ic.PatchError;fr.deepClone=ic._deepClone;fr.escapePathComponent=ic.escapePathComponent;fr.unescapePathComponent=ic.unescapePathComponent;var Q0=new WeakMap,dO=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),pO=function(){function t(e,r){this.callback=e,this.observer=r}return t}();function vO(t){return Q0.get(t)}function mO(t,e){return t.observers.get(e)}function bO(t,e){t.observers.delete(e.callback)}function rg(t,e){e.unobserve()}fr.unobserve=rg;function ng(t,e){var r=[],n,i=vO(t);if(!i)i=new dO(t),Q0.set(t,i);else{var o=mO(i,e);n=o&&o.observer}if(n)return n;if(n={},i.value=cr._deepClone(t),e){n.callback=e,n.next=null;var a=function(){oc(n)},s=function(){clearTimeout(n.next),n.next=setTimeout(a)};typeof window!="undefined"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return n.patches=r,n.object=t,n.unobserve=function(){oc(n),clearTimeout(n.next),bO(i,n),typeof window!="undefined"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(e,new pO(e,n)),n}fr.observe=ng;function oc(t,e){e===void 0&&(e=!1);var r=Q0.get(t.object);ed(r.value,t.object,t.patches,"",e),t.patches.length&&hO.applyPatch(r.value,t.patches);var n=t.patches;return n.length>0&&(t.patches=[],t.callback&&t.callback(n)),n}fr.generate=oc;function ed(t,e,r,n,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=cr._objectKeys(e),a=cr._objectKeys(t),s=!1,u=a.length-1;u>=0;u--){var f=a[u],c=t[f];if(cr.hasOwnProperty(e,f)&&!(e[f]===void 0&&c!==void 0&&Array.isArray(e)===!1)){var h=e[f];typeof c=="object"&&c!=null&&typeof h=="object"&&h!=null?ed(c,h,r,n+"/"+cr.escapePathComponent(f),i):c!==h&&(i&&r.push({op:"test",path:n+"/"+cr.escapePathComponent(f),value:cr._deepClone(c)}),r.push({op:"replace",path:n+"/"+cr.escapePathComponent(f),value:cr._deepClone(h)}))}else Array.isArray(t)===Array.isArray(e)?(i&&r.push({op:"test",path:n+"/"+cr.escapePathComponent(f),value:cr._deepClone(c)}),r.push({op:"remove",path:n+"/"+cr.escapePathComponent(f)}),s=!0):(i&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}))}if(!(!s&&o.length==a.length))for(var u=0;u<o.length;u++){var f=o[u];!cr.hasOwnProperty(t,f)&&e[f]!==void 0&&r.push({op:"add",path:n+"/"+cr.escapePathComponent(f),value:cr._deepClone(e[f])})}}}function ig(t,e,r){r===void 0&&(r=!1);var n=[];return ed(t,e,n,"",r),n}fr.compare=ig;var yO=nc,og=Mr;fr.default=Z0({},yO,{unobserve:rg,observe:ng,generate:oc,compare:ig,JsonPatchError:og.PatchError,deepClone:cr._deepClone,escapePathComponent:cr.escapePathComponent,unescapePathComponent:og.unescapePathComponent});var Zi={},td={},rd={};Object.defineProperty(rd,"__esModule",{value:!0});var ag=65536,gO=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self!="undefined"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(e),n=0;n<r.length;n+=ag)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,ag)));return r},t}();rd.BrowserRandomSource=gO;var nd={},wO={},_O=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wO}),xO=$t(_O);Object.defineProperty(nd,"__esModule",{value:!0});var EO=Zr,SO=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof n4!="undefined"){var e=xO;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var n=new Uint8Array(e),i=0;i<n.length;i++)n[i]=r[i];return EO.wipe(r),n},t}();nd.NodeRandomSource=SO;Object.defineProperty(td,"__esModule",{value:!0});var AO=rd,IO=nd,PO=function(){function t(){if(this.isAvailable=!1,this.name="",this._source=new AO.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new IO.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return t.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},t}();td.SystemRandomSource=PO;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=td,r=Ge,n=Zr;t.defaultRandomSource=new e.SystemRandomSource;function i(f,c){return c===void 0&&(c=t.defaultRandomSource),c.randomBytes(f)}t.randomBytes=i;function o(f){f===void 0&&(f=t.defaultRandomSource);var c=i(4,f),h=r.readUint32LE(c);return n.wipe(c),h}t.randomUint32=o;var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(f,c,h){if(c===void 0&&(c=a),h===void 0&&(h=t.defaultRandomSource),c.length<2)throw new Error("randomString charset is too short");if(c.length>256)throw new Error("randomString charset is too long");for(var b="",w=c.length,A=256-256%w;f>0;){for(var _=i(Math.ceil(f*256/A),h),T=0;T<_.length&&f>0;T++){var P=_[T];P<A&&(b+=c.charAt(P%w),f--)}n.wipe(_)}return b}t.randomString=s;function u(f,c,h){c===void 0&&(c=a),h===void 0&&(h=t.defaultRandomSource);var b=Math.ceil(f/(Math.log(c.length)/Math.LN2));return s(b,c,h)}t.randomStringForEntropy=u})(Zi);var No={},sg={};Object.defineProperty(sg,"__esModule",{value:!0});var ug={};Object.defineProperty(ug,"__esModule",{value:!0});var fg={};Object.defineProperty(fg,"__esModule",{value:!0});var id={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SyncOptions=void 0,function(e){e[e.PREFER_CACHE=0]="PREFER_CACHE",e[e.SYNC_ALWAYS=1]="SYNC_ALWAYS",e[e.NEVER_SYNC=2]="NEVER_SYNC"}(t.SyncOptions||(t.SyncOptions={}))})(id);var od={},ac={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",f="[object Error]",c="[object Function]",h="[object GeneratorFunction]",b="[object Map]",w="[object Number]",A="[object Object]",_="[object Promise]",T="[object RegExp]",P="[object Set]",F="[object String]",j="[object Symbol]",U="[object WeakMap]",L="[object ArrayBuffer]",G="[object DataView]",p="[object Float32Array]",I="[object Float64Array]",C="[object Int8Array]",V="[object Int16Array]",$="[object Int32Array]",m="[object Uint8Array]",E="[object Uint8ClampedArray]",y="[object Uint16Array]",g="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,R=/\w*$/,v=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,l={};l[o]=l[a]=l[L]=l[G]=l[s]=l[u]=l[p]=l[I]=l[C]=l[V]=l[$]=l[b]=l[w]=l[A]=l[T]=l[P]=l[F]=l[j]=l[m]=l[E]=l[y]=l[g]=!0,l[f]=l[c]=l[U]=!1;var x=typeof te=="object"&&te&&te.Object===Object&&te,B=typeof self=="object"&&self&&self.Object===Object&&self,H=x||B||Function("return this")(),D=e&&!e.nodeType&&e,k=D&&!0&&t&&!t.nodeType&&t,Z=k&&k.exports===D;function z(X,oe){return X.set(oe[0],oe[1]),X}function K(X,oe){return X.add(oe),X}function W(X,oe){for(var fe=-1,Ie=X?X.length:0;++fe<Ie&&oe(X[fe],fe,X)!==!1;);return X}function S(X,oe){for(var fe=-1,Ie=oe.length,Wt=X.length;++fe<Ie;)X[Wt+fe]=oe[fe];return X}function J(X,oe,fe,Ie){var Wt=-1,Pr=X?X.length:0;for(Ie&&Pr&&(fe=X[++Wt]);++Wt<Pr;)fe=oe(fe,X[Wt],Wt,X);return fe}function ne(X,oe){for(var fe=-1,Ie=Array(X);++fe<X;)Ie[fe]=oe(fe);return Ie}function ae(X,oe){return X==null?void 0:X[oe]}function ue(X){var oe=!1;if(X!=null&&typeof X.toString!="function")try{oe=!!(X+"")}catch{}return oe}function de(X){var oe=-1,fe=Array(X.size);return X.forEach(function(Ie,Wt){fe[++oe]=[Wt,Ie]}),fe}function q(X,oe){return function(fe){return X(oe(fe))}}function N(X){var oe=-1,fe=Array(X.size);return X.forEach(function(Ie){fe[++oe]=Ie}),fe}var O=Array.prototype,Y=Function.prototype,ee=Object.prototype,re=H["__core-js_shared__"],ie=function(){var X=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}(),pe=Y.toString,le=ee.hasOwnProperty,he=ee.toString,xe=RegExp("^"+pe.call(le).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=Z?H.Buffer:void 0,_e=H.Symbol,$e=H.Uint8Array,Se=q(Object.getPrototypeOf,Object),Pe=Object.create,Ye=ee.propertyIsEnumerable,be=O.splice,ke=Object.getOwnPropertySymbols,rt=se?se.isBuffer:void 0,nt=q(Object.keys,Object),et=ha(H,"DataView"),Ot=ha(H,"Map"),Me=ha(H,"Promise"),at=ha(H,"Set"),er=ha(H,"WeakMap"),st=ha(Object,"create"),Re=go(et),wt=go(Ot),Ne=go(Me),Fe=go(at),It=go(er),Ce=_e?_e.prototype:void 0,Le=Ce?Ce.valueOf:void 0;function Oe(X){var oe=-1,fe=X?X.length:0;for(this.clear();++oe<fe;){var Ie=X[oe];this.set(Ie[0],Ie[1])}}function je(){this.__data__=st?st(null):{}}function ze(X){return this.has(X)&&delete this.__data__[X]}function Pt(X){var oe=this.__data__;if(st){var fe=oe[X];return fe===n?void 0:fe}return le.call(oe,X)?oe[X]:void 0}function De(X){var oe=this.__data__;return st?oe[X]!==void 0:le.call(oe,X)}function Be(X,oe){var fe=this.__data__;return fe[X]=st&&oe===void 0?n:oe,this}Oe.prototype.clear=je,Oe.prototype.delete=ze,Oe.prototype.get=Pt,Oe.prototype.has=De,Oe.prototype.set=Be;function ut(X){var oe=-1,fe=X?X.length:0;for(this.clear();++oe<fe;){var Ie=X[oe];this.set(Ie[0],Ie[1])}}function Ue(){this.__data__=[]}function Ee(X){var oe=this.__data__,fe=Si(oe,X);if(fe<0)return!1;var Ie=oe.length-1;return fe==Ie?oe.pop():be.call(oe,fe,1),!0}function kn(X){var oe=this.__data__,fe=Si(oe,X);return fe<0?void 0:oe[fe][1]}function yt(X){return Si(this.__data__,X)>-1}function gt(X,oe){var fe=this.__data__,Ie=Si(fe,X);return Ie<0?fe.push([X,oe]):fe[Ie][1]=oe,this}ut.prototype.clear=Ue,ut.prototype.delete=Ee,ut.prototype.get=kn,ut.prototype.has=yt,ut.prototype.set=gt;function tr(X){var oe=-1,fe=X?X.length:0;for(this.clear();++oe<fe;){var Ie=X[oe];this.set(Ie[0],Ie[1])}}function on(){this.__data__={hash:new Oe,map:new(Ot||ut),string:new Oe}}function an(X){return Ju(this,X).delete(X)}function sn(X){return Ju(this,X).get(X)}function un(X){return Ju(this,X).has(X)}function it(X,oe){return Ju(this,X).set(X,oe),this}tr.prototype.clear=on,tr.prototype.delete=an,tr.prototype.get=sn,tr.prototype.has=un,tr.prototype.set=it;function rr(X){this.__data__=new ut(X)}function mo(){this.__data__=new ut}function Q(X){return this.__data__.delete(X)}function Xe(X){return this.__data__.get(X)}function Qe(X){return this.__data__.has(X)}function Ve(X,oe){var fe=this.__data__;if(fe instanceof ut){var Ie=fe.__data__;if(!Ot||Ie.length<r-1)return Ie.push([X,oe]),this;fe=this.__data__=new tr(Ie)}return fe.set(X,oe),this}rr.prototype.clear=mo,rr.prototype.delete=Q,rr.prototype.get=Xe,rr.prototype.has=Qe,rr.prototype.set=Ve;function Vn(X,oe){var fe=hh(X)||AS(X)?ne(X.length,String):[],Ie=fe.length,Wt=!!Ie;for(var Pr in X)(oe||le.call(X,Pr))&&!(Wt&&(Pr=="length"||_S(Pr,Ie)))&&fe.push(Pr);return fe}function fn(X,oe,fe){var Ie=X[oe];(!(le.call(X,oe)&&S1(Ie,fe))||fe===void 0&&!(oe in X))&&(X[oe]=fe)}function Si(X,oe){for(var fe=X.length;fe--;)if(S1(X[fe][0],oe))return fe;return-1}function xs(X,oe){return X&&_1(oe,dh(oe),X)}function bo(X,oe,fe,Ie,Wt,Pr,cn){var $r;if(Ie&&($r=Pr?Ie(X,Wt,Pr,cn):Ie(X)),$r!==void 0)return $r;if(!Yu(X))return X;var P1=hh(X);if(P1){if($r=yS(X),!oe)return vS(X,$r)}else{var da=yo(X),M1=da==c||da==h;if(PS(X))return uS(X,oe);if(da==A||da==o||M1&&!Pr){if(ue(X))return Pr?X:{};if($r=gS(M1?{}:X),!oe)return mS(X,xs($r,X))}else{if(!l[da])return Pr?X:{};$r=wS(X,da,bo,oe)}}cn||(cn=new rr);var k1=cn.get(X);if(k1)return k1;if(cn.set(X,$r),!P1)var T1=fe?bS(X):dh(X);return W(T1||X,function(ph,Xu){T1&&(Xu=ph,ph=X[Xu]),fn($r,Xu,bo(ph,oe,fe,Ie,Xu,X,cn))}),$r}function Es(X){return Yu(X)?Pe(X):{}}function Ss(X,oe,fe){var Ie=oe(X);return hh(X)?Ie:S(Ie,fe(X))}function oS(X){return he.call(X)}function aS(X){if(!Yu(X)||ES(X))return!1;var oe=I1(X)||ue(X)?xe:v;return oe.test(go(X))}function sS(X){if(!E1(X))return nt(X);var oe=[];for(var fe in Object(X))le.call(X,fe)&&fe!="constructor"&&oe.push(fe);return oe}function uS(X,oe){if(oe)return X.slice();var fe=new X.constructor(X.length);return X.copy(fe),fe}function lh(X){var oe=new X.constructor(X.byteLength);return new $e(oe).set(new $e(X)),oe}function fS(X,oe){var fe=oe?lh(X.buffer):X.buffer;return new X.constructor(fe,X.byteOffset,X.byteLength)}function cS(X,oe,fe){var Ie=oe?fe(de(X),!0):de(X);return J(Ie,z,new X.constructor)}function lS(X){var oe=new X.constructor(X.source,R.exec(X));return oe.lastIndex=X.lastIndex,oe}function hS(X,oe,fe){var Ie=oe?fe(N(X),!0):N(X);return J(Ie,K,new X.constructor)}function dS(X){return Le?Object(Le.call(X)):{}}function pS(X,oe){var fe=oe?lh(X.buffer):X.buffer;return new X.constructor(fe,X.byteOffset,X.length)}function vS(X,oe){var fe=-1,Ie=X.length;for(oe||(oe=Array(Ie));++fe<Ie;)oe[fe]=X[fe];return oe}function _1(X,oe,fe,Ie){fe||(fe={});for(var Wt=-1,Pr=oe.length;++Wt<Pr;){var cn=oe[Wt],$r=Ie?Ie(fe[cn],X[cn],cn,fe,X):void 0;fn(fe,cn,$r===void 0?X[cn]:$r)}return fe}function mS(X,oe){return _1(X,x1(X),oe)}function bS(X){return Ss(X,dh,x1)}function Ju(X,oe){var fe=X.__data__;return xS(oe)?fe[typeof oe=="string"?"string":"hash"]:fe.map}function ha(X,oe){var fe=ae(X,oe);return aS(fe)?fe:void 0}var x1=ke?q(ke,Object):TS,yo=oS;(et&&yo(new et(new ArrayBuffer(1)))!=G||Ot&&yo(new Ot)!=b||Me&&yo(Me.resolve())!=_||at&&yo(new at)!=P||er&&yo(new er)!=U)&&(yo=function(X){var oe=he.call(X),fe=oe==A?X.constructor:void 0,Ie=fe?go(fe):void 0;if(Ie)switch(Ie){case Re:return G;case wt:return b;case Ne:return _;case Fe:return P;case It:return U}return oe});function yS(X){var oe=X.length,fe=X.constructor(oe);return oe&&typeof X[0]=="string"&&le.call(X,"index")&&(fe.index=X.index,fe.input=X.input),fe}function gS(X){return typeof X.constructor=="function"&&!E1(X)?Es(Se(X)):{}}function wS(X,oe,fe,Ie){var Wt=X.constructor;switch(oe){case L:return lh(X);case s:case u:return new Wt(+X);case G:return fS(X,Ie);case p:case I:case C:case V:case $:case m:case E:case y:case g:return pS(X,Ie);case b:return cS(X,Ie,fe);case w:case F:return new Wt(X);case T:return lS(X);case P:return hS(X,Ie,fe);case j:return dS(X)}}function _S(X,oe){return oe=oe==null?i:oe,!!oe&&(typeof X=="number"||d.test(X))&&X>-1&&X%1==0&&X<oe}function xS(X){var oe=typeof X;return oe=="string"||oe=="number"||oe=="symbol"||oe=="boolean"?X!=="__proto__":X===null}function ES(X){return!!ie&&ie in X}function E1(X){var oe=X&&X.constructor,fe=typeof oe=="function"&&oe.prototype||ee;return X===fe}function go(X){if(X!=null){try{return pe.call(X)}catch{}try{return X+""}catch{}}return""}function SS(X){return bo(X,!0,!0)}function S1(X,oe){return X===oe||X!==X&&oe!==oe}function AS(X){return IS(X)&&le.call(X,"callee")&&(!Ye.call(X,"callee")||he.call(X)==o)}var hh=Array.isArray;function A1(X){return X!=null&&MS(X.length)&&!I1(X)}function IS(X){return kS(X)&&A1(X)}var PS=rt||NS;function I1(X){var oe=Yu(X)?he.call(X):"";return oe==c||oe==h}function MS(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=i}function Yu(X){var oe=typeof X;return!!X&&(oe=="object"||oe=="function")}function kS(X){return!!X&&typeof X=="object"}function dh(X){return A1(X)?Vn(X):sS(X)}function TS(){return[]}function NS(){return!1}t.exports=SS})(ac,ac.exports);var fi={},Oo={},$o={exports:{}};function MO(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var a=t.length,s=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var A=0,_=0,T=0,P=w.length;T!==P&&w[T]===0;)T++,A++;for(var F=(P-T)*f+1>>>0,j=new Uint8Array(F);T!==P;){for(var U=w[T],L=0,G=F-1;(U!==0||L<_)&&G!==-1;G--,L++)U+=256*j[G]>>>0,j[G]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");_=L,T++}for(var p=F-_;p!==F&&j[p]===0;)p++;for(var I=s.repeat(A);p<F;++p)I+=t.charAt(j[p]);return I}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var A=0;if(w[A]!==" "){for(var _=0,T=0;w[A]===s;)_++,A++;for(var P=(w.length-A)*u+1>>>0,F=new Uint8Array(P);w[A];){var j=e[w.charCodeAt(A)];if(j===255)return;for(var U=0,L=P-1;(j!==0||U<T)&&L!==-1;L--,U++)j+=a*F[L]>>>0,F[L]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");T=U,A++}if(w[A]!==" "){for(var G=P-T;G!==P&&F[G]===0;)G++;for(var p=new Uint8Array(_+(P-G)),I=_;G!==P;)p[I++]=F[G++];return p}}}function b(w){var A=h(w);if(A)return A;throw new Error("Non-base"+a+" character")}return{encode:c,decodeUnsafe:h,decode:b}}var kO=MO;const TO=new TextDecoder,NO=t=>TO.decode(t),OO=new TextEncoder,$O=t=>OO.encode(t);function RO(t,e){const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}var ad={decodeText:NO,encodeText:$O,concat:RO};const{encodeText:CO}=ad;class LO{constructor(e,r,n,i){this.name=e,this.code=r,this.codeBuf=CO(this.code),this.alphabet=i,this.codec=n(i)}encode(e){return this.codec.encode(e)}decode(e){for(const r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}}var DO=LO;const BO=(t,e,r)=>{const n={};for(let f=0;f<e.length;++f)n[e[f]]=f;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,s=0,u=0;for(let f=0;f<i;++f){const c=n[t[f]];if(c===void 0)throw new SyntaxError("Invalid character "+t[f]);s=s<<r|c,a+=r,a>=8&&(a-=8,o[u++]=255&s>>a)}if(a>=r||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return o},UO=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let o="",a=0,s=0;for(let u=0;u<t.length;++u)for(s=s<<8|t[u],a+=8;a>r;)a-=r,o+=e[i&s>>a];if(a&&(o+=e[i&s<<r-a]),n)for(;o.length*r&7;)o+="=";return o},FO=t=>e=>({encode(r){return UO(r,e,t)},decode(r){return BO(r,e,t)}});var jO={rfc4648:FO};const Ys=kO,zO=DO,{rfc4648:lr}=jO,{decodeText:qO,encodeText:GO}=ad,HO=()=>({encode:qO,decode:GO}),cg=[["identity","\0",HO,""],["base2","0",lr(1),"01"],["base8","7",lr(3),"01234567"],["base10","9",Ys,"0123456789"],["base16","f",lr(4),"0123456789abcdef"],["base16upper","F",lr(4),"0123456789ABCDEF"],["base32hex","v",lr(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",lr(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",lr(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",lr(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",lr(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",lr(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",lr(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",lr(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",lr(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Ys,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Ys,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Ys,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Ys,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",lr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",lr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",lr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",lr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],lg=cg.reduce((t,e)=>(t[e[0]]=new zO(e[0],e[1],e[2],e[3]),t),{}),WO=cg.reduce((t,e)=>(t[e[1]]=lg[e[0]],t),{});var KO={names:lg,codes:WO};(function(t,e){const r=KO,{encodeText:n,decodeText:i,concat:o}=ad;function a(_,T){if(!T)throw new Error("requires an encoded Uint8Array");const{name:P,codeBuf:F}=h(_);return c(P,T),o([F,T],F.length+T.length)}function s(_,T){const P=h(_),F=n(P.encode(T));return o([P.codeBuf,F],P.codeBuf.length+F.length)}function u(_){_ instanceof Uint8Array&&(_=i(_));const T=_[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(T)&&(_=_.toLowerCase()),h(_[0]).decode(_.substring(1))}function f(_){if(_ instanceof Uint8Array&&(_=i(_)),Object.prototype.toString.call(_)!=="[object String]")return!1;try{return h(_[0]).name}catch{return!1}}function c(_,T){h(_).decode(i(T))}function h(_){if(Object.prototype.hasOwnProperty.call(r.names,_))return r.names[_];if(Object.prototype.hasOwnProperty.call(r.codes,_))return r.codes[_];throw new Error(`Unsupported encoding: ${_}`)}function b(_){return _ instanceof Uint8Array&&(_=i(_)),h(_[0])}e=t.exports=a,e.encode=s,e.decode=u,e.isEncoded=f,e.encoding=h,e.encodingFromData=b;const w=Object.freeze(r.names),A=Object.freeze(r.codes);e.names=w,e.codes=A})($o,$o.exports);var VO=dg,hg=128,JO=127,YO=~JO,XO=Math.pow(2,31);function dg(t,e,r){e=e||[],r=r||0;for(var n=r;t>=XO;)e[r++]=t&255|hg,t/=128;for(;t&YO;)e[r++]=t&255|hg,t>>>=7;return e[r]=t|0,dg.bytes=r-n+1,e}var ZO=sd,QO=128,pg=127;function sd(t,e){var r=0,e=e||0,n=0,i=e,o,a=t.length;do{if(i>=a)throw sd.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=n<28?(o&pg)<<n:(o&pg)*Math.pow(2,n),n+=7}while(o>=QO);return sd.bytes=i-e,r}var e7=Math.pow(2,7),t7=Math.pow(2,14),r7=Math.pow(2,21),n7=Math.pow(2,28),i7=Math.pow(2,35),o7=Math.pow(2,42),a7=Math.pow(2,49),s7=Math.pow(2,56),u7=Math.pow(2,63),f7=function(t){return t<e7?1:t<t7?2:t<r7?3:t<n7?4:t<i7?5:t<o7?6:t<a7?7:t<s7?8:t<u7?9:10},c7={encode:VO,decode:ZO,encodingLength:f7};const l7=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});var h7={names:l7};function vg(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const mg=vg("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ud=vg("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),bg=ye({utf8:mg,"utf-8":mg,hex:vn.base16,latin1:ud,ascii:ud,binary:ud},vn);function d7(t,e="utf8"){const r=bg[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var p7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:d7}),v7=$t(p7);function m7(t,e="utf8"){const r=bg[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var b7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:m7}),y7=$t(b7);function g7(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}var w7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:g7}),_7=$t(w7);const yg=$o.exports,ja=c7,{names:Xs}=h7,{toString:sc}=v7,{fromString:x7}=y7,{concat:E7}=_7,za={};for(const t in Xs){const e=t;za[Xs[e]]=e}Object.freeze(za);function S7(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return sc(t,"base16")}function A7(t){return x7(t,"base16")}function I7(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return sc(yg.encode("base58btc",t)).slice(1)}function P7(t){const e=t instanceof Uint8Array?sc(t):t;return yg.decode("z"+e)}function gg(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");const e=ja.decode(t);if(!_g(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(ja.decode.bytes);const r=ja.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(ja.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${sc(t,"base16")}`);return{code:e,name:za[e],length:r,digest:t}}function M7(t,e,r){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");const n=wg(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");const i=ja.encode(n),o=ja.encode(r);return E7([i,o,t],i.length+o.length+t.length)}function wg(t){let e=t;if(typeof t=="string"){if(Xs[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=Xs[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(za[e]===void 0&&!fd(e))throw new Error(`Unrecognized function code: ${e}`);return e}function fd(t){return t>0&&t<16}function _g(t){return!!(fd(t)||za[t])}function xg(t){gg(t)}function k7(t){return xg(t),t.subarray(0,2)}var Zs={names:Xs,codes:za,toHexString:S7,fromHexString:A7,toB58String:I7,fromB58String:P7,decode:gg,encode:M7,coerceCode:wg,isAppCode:fd,validate:xg,prefix:k7,isValidCode:_g},T7=cd,Eg=128,N7=127,O7=~N7,$7=Math.pow(2,31);function cd(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw cd.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=$7;)e[r++]=t&255|Eg,t/=128;for(;t&O7;)e[r++]=t&255|Eg,t>>>=7;return e[r]=t|0,cd.bytes=r-n+1,e}var R7=ld,C7=128,Sg=127;function ld(t,e){var r=0,e=e||0,n=0,i=e,o,a=t.length;do{if(i>=a||n>49)throw ld.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=n<28?(o&Sg)<<n:(o&Sg)*Math.pow(2,n),n+=7}while(o>=C7);return ld.bytes=i-e,r}var L7=Math.pow(2,7),D7=Math.pow(2,14),B7=Math.pow(2,21),U7=Math.pow(2,28),F7=Math.pow(2,35),j7=Math.pow(2,42),z7=Math.pow(2,49),q7=Math.pow(2,56),G7=Math.pow(2,63),H7=function(t){return t<L7?1:t<D7?2:t<B7?3:t<U7?4:t<F7?5:t<j7?6:t<z7?7:t<q7?8:t<G7?9:10},Ro={encode:T7,decode:R7,encodingLength:H7};function W7(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}var K7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:W7}),V7=$t(K7);function Ag(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Ig=Ag("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),hd=Ag("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Pg=ye({utf8:Ig,"utf-8":Ig,hex:vn.base16,latin1:hd,ascii:hd,binary:hd},vn);function J7(t,e="utf8"){const r=Pg[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var Y7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:J7}),X7=$t(Y7);function Z7(t,e="utf8"){const r=Pg[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var Q7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:Z7}),e$=$t(Q7);const Mg=Ro,{toString:t$}=X7,{fromString:r$}=e$;var kg={numberToUint8Array:n$,uint8ArrayToNumber:Tg,varintUint8ArrayEncode:i$,varintEncode:o$};function Tg(t){return parseInt(t$(t,"base16"),16)}function n$(t){let e=t.toString(16);return e.length%2==1&&(e="0"+e),r$(e,"base16")}function i$(t){return Uint8Array.from(Mg.encode(Tg(t)))}function o$(t){return Uint8Array.from(Mg.encode(t))}const a$=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"eth-receipt-log-trie":153,"eth-reciept-log":154,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,"caip-50":202,streamid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,noise:454,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,"swhid-1-snp":496,json:512,messagepack:513,"libp2p-peer-record":769,"libp2p-relay-rsvp":770,"car-index-sorted":1024,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,"secp256k1-priv":4865,"x25519-priv":4866,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056,"arweave-ns":11704592});var s$={baseTable:a$};const{baseTable:dd}=s$,u$=kg.varintEncode,pd={},vd={},uc={};for(const t in dd){const e=t,r=dd[e];pd[e]=u$(r);const n=e.toUpperCase().replace(/-/g,"_");vd[n]=r,uc[r]||(uc[r]=e)}Object.freeze(pd);Object.freeze(vd);Object.freeze(uc);const f$=Object.freeze(dd);var c$={nameToVarint:pd,constantToCode:vd,nameToCode:f$,codeToName:uc};const fc=Ro,{concat:l$}=V7,Ng=kg,{nameToVarint:cc,constantToCode:h$,nameToCode:Og,codeToName:md}=c$;function d$(t,e){let r;if(t instanceof Uint8Array)r=Ng.varintUint8ArrayEncode(t);else if(cc[t])r=cc[t];else throw new Error("multicodec not recognized");return l$([r,e],r.length+e.length)}function p$(t){return fc.decode(t),t.slice(fc.decode.bytes)}function $g(t){const e=fc.decode(t),r=md[e];if(r===void 0)throw new Error(`Code "${e}" not found`);return r}function Rg(t){return md[t]}function Cg(t){const e=Og[t];if(e===void 0)throw new Error(`Codec "${t}" not found`);return e}function Lg(t){return fc.decode(t)}function Dg(t){const e=cc[t];if(e===void 0)throw new Error(`Codec "${t}" not found`);return e}function Bg(t){return Ng.varintEncode(t)}function v$(t){return $g(t)}function m$(t){return Rg(t)}function b$(t){return Cg(t)}function y$(t){return Lg(t)}function g$(t){return Dg(t)}function w$(t){return Array.from(Bg(t))}var Ug=mr(ye({addPrefix:d$,rmPrefix:p$,getNameFromData:$g,getNameFromCode:Rg,getCodeFromName:Cg,getCodeFromData:Lg,getVarintFromName:Dg,getVarintFromCode:Bg,getCodec:v$,getName:m$,getNumber:b$,getCode:y$,getCodeVarint:g$,getVarint:w$},h$),{nameToVarint:cc,nameToCode:Og,codeToName:md});const _$=Zs,x$={checkCIDComponents:function(t){if(t==null)return"null values are not valid CIDs";if(!(t.version===0||t.version===1))return"Invalid version, must be a number equal to 1 or 0";if(typeof t.codec!="string")return"codec must be string";if(t.version===0){if(t.codec!=="dag-pb")return"codec must be 'dag-pb' for CIDv0";if(t.multibaseName!=="base58btc")return"multibaseName must be 'base58btc' for CIDv0"}if(!(t.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{_$.validate(t.multihash)}catch(e){let r=e.message;return r||(r="Multihash validation failed"),r}}};var E$=x$;function S$(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}var A$=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:S$}),I$=$t(A$);function Fg(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const jg=Fg("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),bd=Fg("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),P$=ye({utf8:jg,"utf-8":jg,hex:vn.base16,latin1:bd,ascii:bd,binary:bd},vn);function M$(t,e="utf8"){const r=P$[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var k$=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:M$}),T$=$t(k$);function N$(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var O$=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:N$}),$$=$t(O$);const lc=Zs,yd=$o.exports,Co=Ug,R$=E$,{concat:zg}=I$,{toString:C$}=T$,{equals:L$}=$$,hc=Co.nameToCode,D$=Object.keys(hc).reduce((t,e)=>(t[hc[e]]=e,t),{}),qg=Symbol.for("@ipld/js-cid/CID");class ci{constructor(e,r,n,i){if(this.version,this.codec,this.multihash,Object.defineProperty(this,qg,{value:!0}),ci.isCID(e)){const o=e;this.version=o.version,this.codec=o.codec,this.multihash=o.multihash,this.multibaseName=o.multibaseName||(o.version===0?"base58btc":"base32");return}if(typeof e=="string"){const o=yd.isEncoded(e);if(o){const a=yd.decode(e);this.version=parseInt(a[0].toString(),16),this.codec=Co.getCodec(a.slice(1)),this.multihash=Co.rmPrefix(a.slice(1)),this.multibaseName=o}else this.version=0,this.codec="dag-pb",this.multihash=lc.fromB58String(e),this.multibaseName="base58btc";ci.validateCID(this),Object.defineProperty(this,"string",{value:e});return}if(e instanceof Uint8Array){const o=parseInt(e[0].toString(),16);if(o===1){const a=e;this.version=o,this.codec=Co.getCodec(a.slice(1)),this.multihash=Co.rmPrefix(a.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";ci.validateCID(this);return}this.version=e,typeof r=="number"&&(r=D$[r]),this.codec=r,this.multihash=n,this.multibaseName=i||(e===0?"base58btc":"base32"),ci.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(this.version===0)e=this.multihash;else if(this.version===1){const r=Co.getCodeVarint(this.codec);e=zg([[1],r,this.multihash],1+r.byteLength+this.multihash.byteLength)}else throw new Error("unsupported version");Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=Co.getCodeVarint(this.codec),r=lc.prefix(this.multihash);return zg([[this.version],e,r],1+e.byteLength+r.byteLength)}get code(){return hc[this.codec]}toV0(){if(this.codec!=="dag-pb")throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:r}=lc.decode(this.multihash);if(e!=="sha2-256")throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(r!==32)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new ci(0,this.codec,this.multihash)}toV1(){return new ci(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&this.string.length!==0&&e===this.multibaseName)return this.string;let r;if(this.version===0){if(e!=="base58btc")throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");r=lc.toB58String(this.multihash)}else if(this.version===1)r=C$(yd.encode(e,this.bytes));else throw new Error("unsupported version");return e===this.multibaseName&&Object.defineProperty(this,"string",{value:r}),r}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&L$(this.multihash,e.multihash)}static validateCID(e){const r=R$.checkCIDComponents(e);if(r)throw new Error(r)}static isCID(e){return e instanceof ci||Boolean(e&&e[qg])}}ci.codecs=hc;var Qi=ci,gd={},Gg={},Qs={},dc={};dc.byteLength=F$;dc.toByteArray=z$;dc.fromByteArray=H$;var li=[],mn=[],B$=typeof Uint8Array!="undefined"?Uint8Array:Array,wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var qa=0,U$=wd.length;qa<U$;++qa)li[qa]=wd[qa],mn[wd.charCodeAt(qa)]=qa;mn["-".charCodeAt(0)]=62;mn["_".charCodeAt(0)]=63;function Hg(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function F$(t){var e=Hg(t),r=e[0],n=e[1];return(r+n)*3/4-n}function j$(t,e,r){return(e+r)*3/4-r}function z$(t){var e,r=Hg(t),n=r[0],i=r[1],o=new B$(j$(t,n,i)),a=0,s=i>0?n-4:n,u;for(u=0;u<s;u+=4)e=mn[t.charCodeAt(u)]<<18|mn[t.charCodeAt(u+1)]<<12|mn[t.charCodeAt(u+2)]<<6|mn[t.charCodeAt(u+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=mn[t.charCodeAt(u)]<<2|mn[t.charCodeAt(u+1)]>>4,o[a++]=e&255),i===1&&(e=mn[t.charCodeAt(u)]<<10|mn[t.charCodeAt(u+1)]<<4|mn[t.charCodeAt(u+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function q$(t){return li[t>>18&63]+li[t>>12&63]+li[t>>6&63]+li[t&63]}function G$(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(q$(n));return i.join("")}function H$(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,s=r-n;a<s;a+=o)i.push(G$(t,a,a+o>s?s:a+o));return n===1?(e=t[r-1],i.push(li[e>>2]+li[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(li[e>>10]+li[e>>4&63]+li[e<<2&63]+"=")),i.join("")}var pc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */pc.read=function(t,e,r,n,i){var o,a,s=i*8-n-1,u=(1<<s)-1,f=u>>1,c=-7,h=r?i-1:0,b=r?-1:1,w=t[e+h];for(h+=b,o=w&(1<<-c)-1,w>>=-c,c+=s;c>0;o=o*256+t[e+h],h+=b,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=a*256+t[e+h],h+=b,c-=8);if(o===0)o=1-f;else{if(o===u)return a?NaN:(w?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-f}return(w?-1:1)*a*Math.pow(2,o-n)};pc.write=function(t,e,r,n,i,o){var a,s,u,f=o*8-i-1,c=(1<<f)-1,h=c>>1,b=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:o-1,A=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+h>=1?e+=b/u:e+=b*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a=a+h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+w]=s&255,w+=A,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;t[r+w]=a&255,w+=A,a/=256,f-=8);t[r+w-A]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=dc,r=pc,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=F,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var q=new Uint8Array(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,Uint8Array.prototype),Object.setPrototypeOf(q,N),q.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function a(q){if(q>i)throw new RangeError('The value "'+q+'" is invalid for option "size"');var N=new Uint8Array(q);return Object.setPrototypeOf(N,s.prototype),N}function s(q,N,O){if(typeof q=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(q)}return u(q,N,O)}s.poolSize=8192;function u(q,N,O){if(typeof q=="string")return b(q,N);if(ArrayBuffer.isView(q))return A(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(ae(q,ArrayBuffer)||q&&ae(q.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ae(q,SharedArrayBuffer)||q&&ae(q.buffer,SharedArrayBuffer)))return _(q,N,O);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Y=q.valueOf&&q.valueOf();if(Y!=null&&Y!==q)return s.from(Y,N,O);var ee=T(q);if(ee)return ee;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return s.from(q[Symbol.toPrimitive]("string"),N,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}s.from=function(q,N,O){return u(q,N,O)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function f(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function c(q,N,O){return f(q),q<=0?a(q):N!==void 0?typeof O=="string"?a(q).fill(N,O):a(q).fill(N):a(q)}s.alloc=function(q,N,O){return c(q,N,O)};function h(q){return f(q),a(q<0?0:P(q)|0)}s.allocUnsafe=function(q){return h(q)},s.allocUnsafeSlow=function(q){return h(q)};function b(q,N){if((typeof N!="string"||N==="")&&(N="utf8"),!s.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var O=j(q,N)|0,Y=a(O),ee=Y.write(q,N);return ee!==O&&(Y=Y.slice(0,ee)),Y}function w(q){for(var N=q.length<0?0:P(q.length)|0,O=a(N),Y=0;Y<N;Y+=1)O[Y]=q[Y]&255;return O}function A(q){if(ae(q,Uint8Array)){var N=new Uint8Array(q);return _(N.buffer,N.byteOffset,N.byteLength)}return w(q)}function _(q,N,O){if(N<0||q.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<N+(O||0))throw new RangeError('"length" is outside of buffer bounds');var Y;return N===void 0&&O===void 0?Y=new Uint8Array(q):O===void 0?Y=new Uint8Array(q,N):Y=new Uint8Array(q,N,O),Object.setPrototypeOf(Y,s.prototype),Y}function T(q){if(s.isBuffer(q)){var N=P(q.length)|0,O=a(N);return O.length===0||q.copy(O,0,0,N),O}if(q.length!==void 0)return typeof q.length!="number"||ue(q.length)?a(0):w(q);if(q.type==="Buffer"&&Array.isArray(q.data))return w(q.data)}function P(q){if(q>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return q|0}function F(q){return+q!=q&&(q=0),s.alloc(+q)}s.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==s.prototype},s.compare=function(N,O){if(ae(N,Uint8Array)&&(N=s.from(N,N.offset,N.byteLength)),ae(O,Uint8Array)&&(O=s.from(O,O.offset,O.byteLength)),!s.isBuffer(N)||!s.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===O)return 0;for(var Y=N.length,ee=O.length,re=0,ie=Math.min(Y,ee);re<ie;++re)if(N[re]!==O[re]){Y=N[re],ee=O[re];break}return Y<ee?-1:ee<Y?1:0},s.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(N,O){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return s.alloc(0);var Y;if(O===void 0)for(O=0,Y=0;Y<N.length;++Y)O+=N[Y].length;var ee=s.allocUnsafe(O),re=0;for(Y=0;Y<N.length;++Y){var ie=N[Y];if(ae(ie,Uint8Array))re+ie.length>ee.length?s.from(ie).copy(ee,re):Uint8Array.prototype.set.call(ee,ie,re);else if(s.isBuffer(ie))ie.copy(ee,re);else throw new TypeError('"list" argument must be an Array of Buffers');re+=ie.length}return ee};function j(q,N){if(s.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||ae(q,ArrayBuffer))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);var O=q.length,Y=arguments.length>2&&arguments[2]===!0;if(!Y&&O===0)return 0;for(var ee=!1;;)switch(N){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return K(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return J(q).length;default:if(ee)return Y?-1:K(q).length;N=(""+N).toLowerCase(),ee=!0}}s.byteLength=j;function U(q,N,O){var Y=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,N>>>=0,O<=N))return"";for(q||(q="utf8");;)switch(q){case"hex":return d(this,N,O);case"utf8":case"utf-8":return y(this,N,O);case"ascii":return R(this,N,O);case"latin1":case"binary":return v(this,N,O);case"base64":return E(this,N,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,N,O);default:if(Y)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),Y=!0}}s.prototype._isBuffer=!0;function L(q,N,O){var Y=q[N];q[N]=q[O],q[O]=Y}s.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<N;O+=2)L(this,O,O+1);return this},s.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<N;O+=4)L(this,O,O+3),L(this,O+1,O+2);return this},s.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<N;O+=8)L(this,O,O+7),L(this,O+1,O+6),L(this,O+2,O+5),L(this,O+3,O+4);return this},s.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?y(this,0,N):U.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(N){if(!s.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:s.compare(this,N)===0},s.prototype.inspect=function(){var N="",O=t.INSPECT_MAX_BYTES;return N=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(N+=" ... "),"<Buffer "+N+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(N,O,Y,ee,re){if(ae(N,Uint8Array)&&(N=s.from(N,N.offset,N.byteLength)),!s.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(O===void 0&&(O=0),Y===void 0&&(Y=N?N.length:0),ee===void 0&&(ee=0),re===void 0&&(re=this.length),O<0||Y>N.length||ee<0||re>this.length)throw new RangeError("out of range index");if(ee>=re&&O>=Y)return 0;if(ee>=re)return-1;if(O>=Y)return 1;if(O>>>=0,Y>>>=0,ee>>>=0,re>>>=0,this===N)return 0;for(var ie=re-ee,pe=Y-O,le=Math.min(ie,pe),he=this.slice(ee,re),xe=N.slice(O,Y),se=0;se<le;++se)if(he[se]!==xe[se]){ie=he[se],pe=xe[se];break}return ie<pe?-1:pe<ie?1:0};function G(q,N,O,Y,ee){if(q.length===0)return-1;if(typeof O=="string"?(Y=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,ue(O)&&(O=ee?0:q.length-1),O<0&&(O=q.length+O),O>=q.length){if(ee)return-1;O=q.length-1}else if(O<0)if(ee)O=0;else return-1;if(typeof N=="string"&&(N=s.from(N,Y)),s.isBuffer(N))return N.length===0?-1:p(q,N,O,Y,ee);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(q,N,O):Uint8Array.prototype.lastIndexOf.call(q,N,O):p(q,[N],O,Y,ee);throw new TypeError("val must be string, number or Buffer")}function p(q,N,O,Y,ee){var re=1,ie=q.length,pe=N.length;if(Y!==void 0&&(Y=String(Y).toLowerCase(),Y==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(q.length<2||N.length<2)return-1;re=2,ie/=2,pe/=2,O/=2}function le($e,Se){return re===1?$e[Se]:$e.readUInt16BE(Se*re)}var he;if(ee){var xe=-1;for(he=O;he<ie;he++)if(le(q,he)===le(N,xe===-1?0:he-xe)){if(xe===-1&&(xe=he),he-xe+1===pe)return xe*re}else xe!==-1&&(he-=he-xe),xe=-1}else for(O+pe>ie&&(O=ie-pe),he=O;he>=0;he--){for(var se=!0,_e=0;_e<pe;_e++)if(le(q,he+_e)!==le(N,_e)){se=!1;break}if(se)return he}return-1}s.prototype.includes=function(N,O,Y){return this.indexOf(N,O,Y)!==-1},s.prototype.indexOf=function(N,O,Y){return G(this,N,O,Y,!0)},s.prototype.lastIndexOf=function(N,O,Y){return G(this,N,O,Y,!1)};function I(q,N,O,Y){O=Number(O)||0;var ee=q.length-O;Y?(Y=Number(Y),Y>ee&&(Y=ee)):Y=ee;var re=N.length;Y>re/2&&(Y=re/2);for(var ie=0;ie<Y;++ie){var pe=parseInt(N.substr(ie*2,2),16);if(ue(pe))return ie;q[O+ie]=pe}return ie}function C(q,N,O,Y){return ne(K(N,q.length-O),q,O,Y)}function V(q,N,O,Y){return ne(W(N),q,O,Y)}function $(q,N,O,Y){return ne(J(N),q,O,Y)}function m(q,N,O,Y){return ne(S(N,q.length-O),q,O,Y)}s.prototype.write=function(N,O,Y,ee){if(O===void 0)ee="utf8",Y=this.length,O=0;else if(Y===void 0&&typeof O=="string")ee=O,Y=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(Y)?(Y=Y>>>0,ee===void 0&&(ee="utf8")):(ee=Y,Y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var re=this.length-O;if((Y===void 0||Y>re)&&(Y=re),N.length>0&&(Y<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var ie=!1;;)switch(ee){case"hex":return I(this,N,O,Y);case"utf8":case"utf-8":return C(this,N,O,Y);case"ascii":case"latin1":case"binary":return V(this,N,O,Y);case"base64":return $(this,N,O,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,N,O,Y);default:if(ie)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),ie=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(q,N,O){return N===0&&O===q.length?e.fromByteArray(q):e.fromByteArray(q.slice(N,O))}function y(q,N,O){O=Math.min(q.length,O);for(var Y=[],ee=N;ee<O;){var re=q[ee],ie=null,pe=re>239?4:re>223?3:re>191?2:1;if(ee+pe<=O){var le,he,xe,se;switch(pe){case 1:re<128&&(ie=re);break;case 2:le=q[ee+1],(le&192)==128&&(se=(re&31)<<6|le&63,se>127&&(ie=se));break;case 3:le=q[ee+1],he=q[ee+2],(le&192)==128&&(he&192)==128&&(se=(re&15)<<12|(le&63)<<6|he&63,se>2047&&(se<55296||se>57343)&&(ie=se));break;case 4:le=q[ee+1],he=q[ee+2],xe=q[ee+3],(le&192)==128&&(he&192)==128&&(xe&192)==128&&(se=(re&15)<<18|(le&63)<<12|(he&63)<<6|xe&63,se>65535&&se<1114112&&(ie=se))}}ie===null?(ie=65533,pe=1):ie>65535&&(ie-=65536,Y.push(ie>>>10&1023|55296),ie=56320|ie&1023),Y.push(ie),ee+=pe}return M(Y)}var g=4096;function M(q){var N=q.length;if(N<=g)return String.fromCharCode.apply(String,q);for(var O="",Y=0;Y<N;)O+=String.fromCharCode.apply(String,q.slice(Y,Y+=g));return O}function R(q,N,O){var Y="";O=Math.min(q.length,O);for(var ee=N;ee<O;++ee)Y+=String.fromCharCode(q[ee]&127);return Y}function v(q,N,O){var Y="";O=Math.min(q.length,O);for(var ee=N;ee<O;++ee)Y+=String.fromCharCode(q[ee]);return Y}function d(q,N,O){var Y=q.length;(!N||N<0)&&(N=0),(!O||O<0||O>Y)&&(O=Y);for(var ee="",re=N;re<O;++re)ee+=de[q[re]];return ee}function l(q,N,O){for(var Y=q.slice(N,O),ee="",re=0;re<Y.length-1;re+=2)ee+=String.fromCharCode(Y[re]+Y[re+1]*256);return ee}s.prototype.slice=function(N,O){var Y=this.length;N=~~N,O=O===void 0?Y:~~O,N<0?(N+=Y,N<0&&(N=0)):N>Y&&(N=Y),O<0?(O+=Y,O<0&&(O=0)):O>Y&&(O=Y),O<N&&(O=N);var ee=this.subarray(N,O);return Object.setPrototypeOf(ee,s.prototype),ee};function x(q,N,O){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(q+N>O)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(N,O,Y){N=N>>>0,O=O>>>0,Y||x(N,O,this.length);for(var ee=this[N],re=1,ie=0;++ie<O&&(re*=256);)ee+=this[N+ie]*re;return ee},s.prototype.readUintBE=s.prototype.readUIntBE=function(N,O,Y){N=N>>>0,O=O>>>0,Y||x(N,O,this.length);for(var ee=this[N+--O],re=1;O>0&&(re*=256);)ee+=this[N+--O]*re;return ee},s.prototype.readUint8=s.prototype.readUInt8=function(N,O){return N=N>>>0,O||x(N,1,this.length),this[N]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(N,O){return N=N>>>0,O||x(N,2,this.length),this[N]|this[N+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(N,O){return N=N>>>0,O||x(N,2,this.length),this[N]<<8|this[N+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(N,O){return N=N>>>0,O||x(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(N,O){return N=N>>>0,O||x(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},s.prototype.readIntLE=function(N,O,Y){N=N>>>0,O=O>>>0,Y||x(N,O,this.length);for(var ee=this[N],re=1,ie=0;++ie<O&&(re*=256);)ee+=this[N+ie]*re;return re*=128,ee>=re&&(ee-=Math.pow(2,8*O)),ee},s.prototype.readIntBE=function(N,O,Y){N=N>>>0,O=O>>>0,Y||x(N,O,this.length);for(var ee=O,re=1,ie=this[N+--ee];ee>0&&(re*=256);)ie+=this[N+--ee]*re;return re*=128,ie>=re&&(ie-=Math.pow(2,8*O)),ie},s.prototype.readInt8=function(N,O){return N=N>>>0,O||x(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},s.prototype.readInt16LE=function(N,O){N=N>>>0,O||x(N,2,this.length);var Y=this[N]|this[N+1]<<8;return Y&32768?Y|4294901760:Y},s.prototype.readInt16BE=function(N,O){N=N>>>0,O||x(N,2,this.length);var Y=this[N+1]|this[N]<<8;return Y&32768?Y|4294901760:Y},s.prototype.readInt32LE=function(N,O){return N=N>>>0,O||x(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},s.prototype.readInt32BE=function(N,O){return N=N>>>0,O||x(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},s.prototype.readFloatLE=function(N,O){return N=N>>>0,O||x(N,4,this.length),r.read(this,N,!0,23,4)},s.prototype.readFloatBE=function(N,O){return N=N>>>0,O||x(N,4,this.length),r.read(this,N,!1,23,4)},s.prototype.readDoubleLE=function(N,O){return N=N>>>0,O||x(N,8,this.length),r.read(this,N,!0,52,8)},s.prototype.readDoubleBE=function(N,O){return N=N>>>0,O||x(N,8,this.length),r.read(this,N,!1,52,8)};function B(q,N,O,Y,ee,re){if(!s.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>ee||N<re)throw new RangeError('"value" argument is out of bounds');if(O+Y>q.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(N,O,Y,ee){if(N=+N,O=O>>>0,Y=Y>>>0,!ee){var re=Math.pow(2,8*Y)-1;B(this,N,O,Y,re,0)}var ie=1,pe=0;for(this[O]=N&255;++pe<Y&&(ie*=256);)this[O+pe]=N/ie&255;return O+Y},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(N,O,Y,ee){if(N=+N,O=O>>>0,Y=Y>>>0,!ee){var re=Math.pow(2,8*Y)-1;B(this,N,O,Y,re,0)}var ie=Y-1,pe=1;for(this[O+ie]=N&255;--ie>=0&&(pe*=256);)this[O+ie]=N/pe&255;return O+Y},s.prototype.writeUint8=s.prototype.writeUInt8=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,1,255,0),this[O]=N&255,O+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,2,65535,0),this[O]=N&255,this[O+1]=N>>>8,O+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,2,65535,0),this[O]=N>>>8,this[O+1]=N&255,O+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,4,4294967295,0),this[O+3]=N>>>24,this[O+2]=N>>>16,this[O+1]=N>>>8,this[O]=N&255,O+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,4,4294967295,0),this[O]=N>>>24,this[O+1]=N>>>16,this[O+2]=N>>>8,this[O+3]=N&255,O+4},s.prototype.writeIntLE=function(N,O,Y,ee){if(N=+N,O=O>>>0,!ee){var re=Math.pow(2,8*Y-1);B(this,N,O,Y,re-1,-re)}var ie=0,pe=1,le=0;for(this[O]=N&255;++ie<Y&&(pe*=256);)N<0&&le===0&&this[O+ie-1]!==0&&(le=1),this[O+ie]=(N/pe>>0)-le&255;return O+Y},s.prototype.writeIntBE=function(N,O,Y,ee){if(N=+N,O=O>>>0,!ee){var re=Math.pow(2,8*Y-1);B(this,N,O,Y,re-1,-re)}var ie=Y-1,pe=1,le=0;for(this[O+ie]=N&255;--ie>=0&&(pe*=256);)N<0&&le===0&&this[O+ie+1]!==0&&(le=1),this[O+ie]=(N/pe>>0)-le&255;return O+Y},s.prototype.writeInt8=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,1,127,-128),N<0&&(N=255+N+1),this[O]=N&255,O+1},s.prototype.writeInt16LE=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,2,32767,-32768),this[O]=N&255,this[O+1]=N>>>8,O+2},s.prototype.writeInt16BE=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,2,32767,-32768),this[O]=N>>>8,this[O+1]=N&255,O+2},s.prototype.writeInt32LE=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,4,2147483647,-2147483648),this[O]=N&255,this[O+1]=N>>>8,this[O+2]=N>>>16,this[O+3]=N>>>24,O+4},s.prototype.writeInt32BE=function(N,O,Y){return N=+N,O=O>>>0,Y||B(this,N,O,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[O]=N>>>24,this[O+1]=N>>>16,this[O+2]=N>>>8,this[O+3]=N&255,O+4};function H(q,N,O,Y,ee,re){if(O+Y>q.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function D(q,N,O,Y,ee){return N=+N,O=O>>>0,ee||H(q,N,O,4),r.write(q,N,O,Y,23,4),O+4}s.prototype.writeFloatLE=function(N,O,Y){return D(this,N,O,!0,Y)},s.prototype.writeFloatBE=function(N,O,Y){return D(this,N,O,!1,Y)};function k(q,N,O,Y,ee){return N=+N,O=O>>>0,ee||H(q,N,O,8),r.write(q,N,O,Y,52,8),O+8}s.prototype.writeDoubleLE=function(N,O,Y){return k(this,N,O,!0,Y)},s.prototype.writeDoubleBE=function(N,O,Y){return k(this,N,O,!1,Y)},s.prototype.copy=function(N,O,Y,ee){if(!s.isBuffer(N))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),!ee&&ee!==0&&(ee=this.length),O>=N.length&&(O=N.length),O||(O=0),ee>0&&ee<Y&&(ee=Y),ee===Y||N.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),N.length-O<ee-Y&&(ee=N.length-O+Y);var re=ee-Y;return this===N&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(O,Y,ee):Uint8Array.prototype.set.call(N,this.subarray(Y,ee),O),re},s.prototype.fill=function(N,O,Y,ee){if(typeof N=="string"){if(typeof O=="string"?(ee=O,O=0,Y=this.length):typeof Y=="string"&&(ee=Y,Y=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!s.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(N.length===1){var re=N.charCodeAt(0);(ee==="utf8"&&re<128||ee==="latin1")&&(N=re)}}else typeof N=="number"?N=N&255:typeof N=="boolean"&&(N=Number(N));if(O<0||this.length<O||this.length<Y)throw new RangeError("Out of range index");if(Y<=O)return this;O=O>>>0,Y=Y===void 0?this.length:Y>>>0,N||(N=0);var ie;if(typeof N=="number")for(ie=O;ie<Y;++ie)this[ie]=N;else{var pe=s.isBuffer(N)?N:s.from(N,ee),le=pe.length;if(le===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ie=0;ie<Y-O;++ie)this[ie+O]=pe[ie%le]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function z(q){if(q=q.split("=")[0],q=q.trim().replace(Z,""),q.length<2)return"";for(;q.length%4!=0;)q=q+"=";return q}function K(q,N){N=N||1/0;for(var O,Y=q.length,ee=null,re=[],ie=0;ie<Y;++ie){if(O=q.charCodeAt(ie),O>55295&&O<57344){if(!ee){if(O>56319){(N-=3)>-1&&re.push(239,191,189);continue}else if(ie+1===Y){(N-=3)>-1&&re.push(239,191,189);continue}ee=O;continue}if(O<56320){(N-=3)>-1&&re.push(239,191,189),ee=O;continue}O=(ee-55296<<10|O-56320)+65536}else ee&&(N-=3)>-1&&re.push(239,191,189);if(ee=null,O<128){if((N-=1)<0)break;re.push(O)}else if(O<2048){if((N-=2)<0)break;re.push(O>>6|192,O&63|128)}else if(O<65536){if((N-=3)<0)break;re.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((N-=4)<0)break;re.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return re}function W(q){for(var N=[],O=0;O<q.length;++O)N.push(q.charCodeAt(O)&255);return N}function S(q,N){for(var O,Y,ee,re=[],ie=0;ie<q.length&&!((N-=2)<0);++ie)O=q.charCodeAt(ie),Y=O>>8,ee=O%256,re.push(ee),re.push(Y);return re}function J(q){return e.toByteArray(z(q))}function ne(q,N,O,Y){for(var ee=0;ee<Y&&!(ee+O>=N.length||ee>=q.length);++ee)N[ee+O]=q[ee];return ee}function ae(q,N){return q instanceof N||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===N.name}function ue(q){return q!==q}var de=function(){for(var q="0123456789abcdef",N=new Array(256),O=0;O<16;++O)for(var Y=O*16,ee=0;ee<16;++ee)N[Y+ee]=q[O]+q[ee];return N}()})(Qs);var W$=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,_d=Math.ceil,hi=Math.floor,Br="[BigNumber Error] ",Wg=Br+"Number primitive has more than 15 significant digits: ",Un=1e14,He=14,xd=9007199254740991,Ed=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],eo=1e7,Vt=1e9;function Kg(t){var e,r,n,i=P.prototype={constructor:P,toString:null,valueOf:null},o=new P(1),a=20,s=4,u=-7,f=21,c=-1e7,h=1e7,b=!1,w=1,A=0,_={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},T="0123456789abcdefghijklmnopqrstuvwxyz";function P(p,I){var C,V,$,m,E,y,g,M,R=this;if(!(R instanceof P))return new P(p,I);if(I==null){if(p&&p._isBigNumber===!0){R.s=p.s,!p.c||p.e>h?R.c=R.e=null:p.e<c?R.c=[R.e=0]:(R.e=p.e,R.c=p.c.slice());return}if((y=typeof p=="number")&&p*0==0){if(R.s=1/p<0?(p=-p,-1):1,p===~~p){for(m=0,E=p;E>=10;E/=10,m++);m>h?R.c=R.e=null:(R.e=m,R.c=[p]);return}M=String(p)}else{if(!W$.test(M=String(p)))return n(R,M,y);R.s=M.charCodeAt(0)==45?(M=M.slice(1),-1):1}(m=M.indexOf("."))>-1&&(M=M.replace(".","")),(E=M.search(/e/i))>0?(m<0&&(m=E),m+=+M.slice(E+1),M=M.substring(0,E)):m<0&&(m=M.length)}else{if(Nt(I,2,T.length,"Base"),I==10)return R=new P(p),L(R,a+R.e+1,s);if(M=String(p),y=typeof p=="number"){if(p*0!=0)return n(R,M,y,I);if(R.s=1/p<0?(M=M.slice(1),-1):1,P.DEBUG&&M.replace(/^0\.0*|\./,"").length>15)throw Error(Wg+p)}else R.s=M.charCodeAt(0)===45?(M=M.slice(1),-1):1;for(C=T.slice(0,I),m=E=0,g=M.length;E<g;E++)if(C.indexOf(V=M.charAt(E))<0){if(V=="."){if(E>m){m=g;continue}}else if(!$&&(M==M.toUpperCase()&&(M=M.toLowerCase())||M==M.toLowerCase()&&(M=M.toUpperCase()))){$=!0,E=-1,m=0;continue}return n(R,String(p),y,I)}y=!1,M=r(M,I,10,R.s),(m=M.indexOf("."))>-1?M=M.replace(".",""):m=M.length}for(E=0;M.charCodeAt(E)===48;E++);for(g=M.length;M.charCodeAt(--g)===48;);if(M=M.slice(E,++g)){if(g-=E,y&&P.DEBUG&&g>15&&(p>xd||p!==hi(p)))throw Error(Wg+R.s*p);if((m=m-E-1)>h)R.c=R.e=null;else if(m<c)R.c=[R.e=0];else{if(R.e=m,R.c=[],E=(m+1)%He,m<0&&(E+=He),E<g){for(E&&R.c.push(+M.slice(0,E)),g-=He;E<g;)R.c.push(+M.slice(E,E+=He));E=He-(M=M.slice(E)).length}else E-=g;for(;E--;M+="0");R.c.push(+M)}}else R.c=[R.e=0]}P.clone=Kg,P.ROUND_UP=0,P.ROUND_DOWN=1,P.ROUND_CEIL=2,P.ROUND_FLOOR=3,P.ROUND_HALF_UP=4,P.ROUND_HALF_DOWN=5,P.ROUND_HALF_EVEN=6,P.ROUND_HALF_CEIL=7,P.ROUND_HALF_FLOOR=8,P.EUCLID=9,P.config=P.set=function(p){var I,C;if(p!=null)if(typeof p=="object"){if(p.hasOwnProperty(I="DECIMAL_PLACES")&&(C=p[I],Nt(C,0,Vt,I),a=C),p.hasOwnProperty(I="ROUNDING_MODE")&&(C=p[I],Nt(C,0,8,I),s=C),p.hasOwnProperty(I="EXPONENTIAL_AT")&&(C=p[I],C&&C.pop?(Nt(C[0],-Vt,0,I),Nt(C[1],0,Vt,I),u=C[0],f=C[1]):(Nt(C,-Vt,Vt,I),u=-(f=C<0?-C:C))),p.hasOwnProperty(I="RANGE"))if(C=p[I],C&&C.pop)Nt(C[0],-Vt,-1,I),Nt(C[1],1,Vt,I),c=C[0],h=C[1];else if(Nt(C,-Vt,Vt,I),C)c=-(h=C<0?-C:C);else throw Error(Br+I+" cannot be zero: "+C);if(p.hasOwnProperty(I="CRYPTO"))if(C=p[I],C===!!C)if(C)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))b=C;else throw b=!C,Error(Br+"crypto unavailable");else b=C;else throw Error(Br+I+" not true or false: "+C);if(p.hasOwnProperty(I="MODULO_MODE")&&(C=p[I],Nt(C,0,9,I),w=C),p.hasOwnProperty(I="POW_PRECISION")&&(C=p[I],Nt(C,0,Vt,I),A=C),p.hasOwnProperty(I="FORMAT"))if(C=p[I],typeof C=="object")_=C;else throw Error(Br+I+" not an object: "+C);if(p.hasOwnProperty(I="ALPHABET"))if(C=p[I],typeof C=="string"&&!/^.$|[+-.\s]|(.).*\1/.test(C))T=C;else throw Error(Br+I+" invalid: "+C)}else throw Error(Br+"Object expected: "+p);return{DECIMAL_PLACES:a,ROUNDING_MODE:s,EXPONENTIAL_AT:[u,f],RANGE:[c,h],CRYPTO:b,MODULO_MODE:w,POW_PRECISION:A,FORMAT:_,ALPHABET:T}},P.isBigNumber=function(p){if(!p||p._isBigNumber!==!0)return!1;if(!P.DEBUG)return!0;var I,C,V=p.c,$=p.e,m=p.s;e:if({}.toString.call(V)=="[object Array]"){if((m===1||m===-1)&&$>=-Vt&&$<=Vt&&$===hi($)){if(V[0]===0){if($===0&&V.length===1)return!0;break e}if(I=($+1)%He,I<1&&(I+=He),String(V[0]).length==I){for(I=0;I<V.length;I++)if(C=V[I],C<0||C>=Un||C!==hi(C))break e;if(C!==0)return!0}}}else if(V===null&&$===null&&(m===null||m===1||m===-1))return!0;throw Error(Br+"Invalid BigNumber: "+p)},P.maximum=P.max=function(){return j(arguments,i.lt)},P.minimum=P.min=function(){return j(arguments,i.gt)},P.random=function(){var p=9007199254740992,I=Math.random()*p&2097151?function(){return hi(Math.random()*p)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(C){var V,$,m,E,y,g=0,M=[],R=new P(o);if(C==null?C=a:Nt(C,0,Vt),E=_d(C/He),b)if(crypto.getRandomValues){for(V=crypto.getRandomValues(new Uint32Array(E*=2));g<E;)y=V[g]*131072+(V[g+1]>>>11),y>=9e15?($=crypto.getRandomValues(new Uint32Array(2)),V[g]=$[0],V[g+1]=$[1]):(M.push(y%1e14),g+=2);g=E/2}else if(crypto.randomBytes){for(V=crypto.randomBytes(E*=7);g<E;)y=(V[g]&31)*281474976710656+V[g+1]*1099511627776+V[g+2]*4294967296+V[g+3]*16777216+(V[g+4]<<16)+(V[g+5]<<8)+V[g+6],y>=9e15?crypto.randomBytes(7).copy(V,g):(M.push(y%1e14),g+=7);g=E/7}else throw b=!1,Error(Br+"crypto unavailable");if(!b)for(;g<E;)y=I(),y<9e15&&(M[g++]=y%1e14);for(E=M[--g],C%=He,E&&C&&(y=Ed[He-C],M[g]=hi(E/y)*y);M[g]===0;M.pop(),g--);if(g<0)M=[m=0];else{for(m=-1;M[0]===0;M.splice(0,1),m-=He);for(g=1,y=M[0];y>=10;y/=10,g++);g<He&&(m-=He-g)}return R.e=m,R.c=M,R}}(),P.sum=function(){for(var p=1,I=arguments,C=new P(I[0]);p<I.length;)C=C.plus(I[p++]);return C},r=function(){var p="0123456789";function I(C,V,$,m){for(var E,y=[0],g,M=0,R=C.length;M<R;){for(g=y.length;g--;y[g]*=V);for(y[0]+=m.indexOf(C.charAt(M++)),E=0;E<y.length;E++)y[E]>$-1&&(y[E+1]==null&&(y[E+1]=0),y[E+1]+=y[E]/$|0,y[E]%=$)}return y.reverse()}return function(C,V,$,m,E){var y,g,M,R,v,d,l,x,B=C.indexOf("."),H=a,D=s;for(B>=0&&(R=A,A=0,C=C.replace(".",""),x=new P(V),d=x.pow(C.length-B),A=R,x.c=I(Oi(yn(d.c),d.e,"0"),10,$,p),x.e=x.c.length),l=I(C,V,$,E?(y=T,p):(y=p,T)),M=R=l.length;l[--R]==0;l.pop());if(!l[0])return y.charAt(0);if(B<0?--M:(d.c=l,d.e=M,d.s=m,d=e(d,x,H,D,$),l=d.c,v=d.r,M=d.e),g=M+H+1,B=l[g],R=$/2,v=v||g<0||l[g+1]!=null,v=D<4?(B!=null||v)&&(D==0||D==(d.s<0?3:2)):B>R||B==R&&(D==4||v||D==6&&l[g-1]&1||D==(d.s<0?8:7)),g<1||!l[0])C=v?Oi(y.charAt(1),-H,y.charAt(0)):y.charAt(0);else{if(l.length=g,v)for(--$;++l[--g]>$;)l[g]=0,g||(++M,l=[1].concat(l));for(R=l.length;!l[--R];);for(B=0,C="";B<=R;C+=y.charAt(l[B++]));C=Oi(C,M,y.charAt(0))}return C}}(),e=function(){function p(V,$,m){var E,y,g,M,R=0,v=V.length,d=$%eo,l=$/eo|0;for(V=V.slice();v--;)g=V[v]%eo,M=V[v]/eo|0,E=l*g+M*d,y=d*g+E%eo*eo+R,R=(y/m|0)+(E/eo|0)+l*M,V[v]=y%m;return R&&(V=[R].concat(V)),V}function I(V,$,m,E){var y,g;if(m!=E)g=m>E?1:-1;else for(y=g=0;y<m;y++)if(V[y]!=$[y]){g=V[y]>$[y]?1:-1;break}return g}function C(V,$,m,E){for(var y=0;m--;)V[m]-=y,y=V[m]<$[m]?1:0,V[m]=y*E+V[m]-$[m];for(;!V[0]&&V.length>1;V.splice(0,1));}return function(V,$,m,E,y){var g,M,R,v,d,l,x,B,H,D,k,Z,z,K,W,S,J,ne=V.s==$.s?1:-1,ae=V.c,ue=$.c;if(!ae||!ae[0]||!ue||!ue[0])return new P(!V.s||!$.s||(ae?ue&&ae[0]==ue[0]:!ue)?NaN:ae&&ae[0]==0||!ue?ne*0:ne/0);for(B=new P(ne),H=B.c=[],M=V.e-$.e,ne=m+M+1,y||(y=Un,M=bn(V.e/He)-bn($.e/He),ne=ne/He|0),R=0;ue[R]==(ae[R]||0);R++);if(ue[R]>(ae[R]||0)&&M--,ne<0)H.push(1),v=!0;else{for(K=ae.length,S=ue.length,R=0,ne+=2,d=hi(y/(ue[0]+1)),d>1&&(ue=p(ue,d,y),ae=p(ae,d,y),S=ue.length,K=ae.length),z=S,D=ae.slice(0,S),k=D.length;k<S;D[k++]=0);J=ue.slice(),J=[0].concat(J),W=ue[0],ue[1]>=y/2&&W++;do{if(d=0,g=I(ue,D,S,k),g<0){if(Z=D[0],S!=k&&(Z=Z*y+(D[1]||0)),d=hi(Z/W),d>1)for(d>=y&&(d=y-1),l=p(ue,d,y),x=l.length,k=D.length;I(l,D,x,k)==1;)d--,C(l,S<x?J:ue,x,y),x=l.length,g=1;else d==0&&(g=d=1),l=ue.slice(),x=l.length;if(x<k&&(l=[0].concat(l)),C(D,l,k,y),k=D.length,g==-1)for(;I(ue,D,S,k)<1;)d++,C(D,S<k?J:ue,k,y),k=D.length}else g===0&&(d++,D=[0]);H[R++]=d,D[0]?D[k++]=ae[z]||0:(D=[ae[z]],k=1)}while((z++<K||D[0]!=null)&&ne--);v=D[0]!=null,H[0]||H.splice(0,1)}if(y==Un){for(R=1,ne=H[0];ne>=10;ne/=10,R++);L(B,m+(B.e=R+M*He-1)+1,E,v)}else B.e=M,B.r=+v;return B}}();function F(p,I,C,V){var $,m,E,y,g;if(C==null?C=s:Nt(C,0,8),!p.c)return p.toString();if($=p.c[0],E=p.e,I==null)g=yn(p.c),g=V==1||V==2&&(E<=u||E>=f)?mc(g,E):Oi(g,E,"0");else if(p=L(new P(p),I,C),m=p.e,g=yn(p.c),y=g.length,V==1||V==2&&(I<=m||m<=u)){for(;y<I;g+="0",y++);g=mc(g,m)}else if(I-=E,g=Oi(g,m,"0"),m+1>y){if(--I>0)for(g+=".";I--;g+="0");}else if(I+=m-y,I>0)for(m+1==y&&(g+=".");I--;g+="0");return p.s<0&&$?"-"+g:g}function j(p,I){for(var C,V=1,$=new P(p[0]);V<p.length;V++)if(C=new P(p[V]),C.s)I.call($,C)&&($=C);else{$=C;break}return $}function U(p,I,C){for(var V=1,$=I.length;!I[--$];I.pop());for($=I[0];$>=10;$/=10,V++);return(C=V+C*He-1)>h?p.c=p.e=null:C<c?p.c=[p.e=0]:(p.e=C,p.c=I),p}n=function(){var p=/^(-?)0([xbo])(?=\w[\w.]*$)/i,I=/^([^.]+)\.$/,C=/^\.([^.]+)$/,V=/^-?(Infinity|NaN)$/,$=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(m,E,y,g){var M,R=y?E:E.replace($,"");if(V.test(R))m.s=isNaN(R)?null:R<0?-1:1;else{if(!y&&(R=R.replace(p,function(v,d,l){return M=(l=l.toLowerCase())=="x"?16:l=="b"?2:8,!g||g==M?d:v}),g&&(M=g,R=R.replace(I,"$1").replace(C,"0.$1")),E!=R))return new P(R,M);if(P.DEBUG)throw Error(Br+"Not a"+(g?" base "+g:"")+" number: "+E);m.s=null}m.c=m.e=null}}();function L(p,I,C,V){var $,m,E,y,g,M,R,v=p.c,d=Ed;if(v){e:{for($=1,y=v[0];y>=10;y/=10,$++);if(m=I-$,m<0)m+=He,E=I,g=v[M=0],R=g/d[$-E-1]%10|0;else if(M=_d((m+1)/He),M>=v.length)if(V){for(;v.length<=M;v.push(0));g=R=0,$=1,m%=He,E=m-He+1}else break e;else{for(g=y=v[M],$=1;y>=10;y/=10,$++);m%=He,E=m-He+$,R=E<0?0:g/d[$-E-1]%10|0}if(V=V||I<0||v[M+1]!=null||(E<0?g:g%d[$-E-1]),V=C<4?(R||V)&&(C==0||C==(p.s<0?3:2)):R>5||R==5&&(C==4||V||C==6&&(m>0?E>0?g/d[$-E]:0:v[M-1])%10&1||C==(p.s<0?8:7)),I<1||!v[0])return v.length=0,V?(I-=p.e+1,v[0]=d[(He-I%He)%He],p.e=-I||0):v[0]=p.e=0,p;if(m==0?(v.length=M,y=1,M--):(v.length=M+1,y=d[He-m],v[M]=E>0?hi(g/d[$-E]%d[E])*y:0),V)for(;;)if(M==0){for(m=1,E=v[0];E>=10;E/=10,m++);for(E=v[0]+=y,y=1;E>=10;E/=10,y++);m!=y&&(p.e++,v[0]==Un&&(v[0]=1));break}else{if(v[M]+=y,v[M]!=Un)break;v[M--]=0,y=1}for(m=v.length;v[--m]===0;v.pop());}p.e>h?p.c=p.e=null:p.e<c&&(p.c=[p.e=0])}return p}function G(p){var I,C=p.e;return C===null?p.toString():(I=yn(p.c),I=C<=u||C>=f?mc(I,C):Oi(I,C,"0"),p.s<0?"-"+I:I)}return i.absoluteValue=i.abs=function(){var p=new P(this);return p.s<0&&(p.s=1),p},i.comparedTo=function(p,I){return Ga(this,new P(p,I))},i.decimalPlaces=i.dp=function(p,I){var C,V,$,m=this;if(p!=null)return Nt(p,0,Vt),I==null?I=s:Nt(I,0,8),L(new P(m),p+m.e+1,I);if(!(C=m.c))return null;if(V=(($=C.length-1)-bn(this.e/He))*He,$=C[$])for(;$%10==0;$/=10,V--);return V<0&&(V=0),V},i.dividedBy=i.div=function(p,I){return e(this,new P(p,I),a,s)},i.dividedToIntegerBy=i.idiv=function(p,I){return e(this,new P(p,I),0,1)},i.exponentiatedBy=i.pow=function(p,I){var C,V,$,m,E,y,g,M,R,v=this;if(p=new P(p),p.c&&!p.isInteger())throw Error(Br+"Exponent not an integer: "+G(p));if(I!=null&&(I=new P(I)),y=p.e>14,!v.c||!v.c[0]||v.c[0]==1&&!v.e&&v.c.length==1||!p.c||!p.c[0])return R=new P(Math.pow(+G(v),y?2-vc(p):+G(p))),I?R.mod(I):R;if(g=p.s<0,I){if(I.c?!I.c[0]:!I.s)return new P(NaN);V=!g&&v.isInteger()&&I.isInteger(),V&&(v=v.mod(I))}else{if(p.e>9&&(v.e>0||v.e<-1||(v.e==0?v.c[0]>1||y&&v.c[1]>=24e7:v.c[0]<8e13||y&&v.c[0]<=9999975e7)))return m=v.s<0&&vc(p)?-0:0,v.e>-1&&(m=1/m),new P(g?1/m:m);A&&(m=_d(A/He+2))}for(y?(C=new P(.5),g&&(p.s=1),M=vc(p)):($=Math.abs(+G(p)),M=$%2),R=new P(o);;){if(M){if(R=R.times(v),!R.c)break;m?R.c.length>m&&(R.c.length=m):V&&(R=R.mod(I))}if($){if($=hi($/2),$===0)break;M=$%2}else if(p=p.times(C),L(p,p.e+1,1),p.e>14)M=vc(p);else{if($=+G(p),$===0)break;M=$%2}v=v.times(v),m?v.c&&v.c.length>m&&(v.c.length=m):V&&(v=v.mod(I))}return V?R:(g&&(R=o.div(R)),I?R.mod(I):m?L(R,A,s,E):R)},i.integerValue=function(p){var I=new P(this);return p==null?p=s:Nt(p,0,8),L(I,I.e+1,p)},i.isEqualTo=i.eq=function(p,I){return Ga(this,new P(p,I))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(p,I){return Ga(this,new P(p,I))>0},i.isGreaterThanOrEqualTo=i.gte=function(p,I){return(I=Ga(this,new P(p,I)))===1||I===0},i.isInteger=function(){return!!this.c&&bn(this.e/He)>this.c.length-2},i.isLessThan=i.lt=function(p,I){return Ga(this,new P(p,I))<0},i.isLessThanOrEqualTo=i.lte=function(p,I){return(I=Ga(this,new P(p,I)))===-1||I===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(p,I){var C,V,$,m,E=this,y=E.s;if(p=new P(p,I),I=p.s,!y||!I)return new P(NaN);if(y!=I)return p.s=-I,E.plus(p);var g=E.e/He,M=p.e/He,R=E.c,v=p.c;if(!g||!M){if(!R||!v)return R?(p.s=-I,p):new P(v?E:NaN);if(!R[0]||!v[0])return v[0]?(p.s=-I,p):new P(R[0]?E:s==3?-0:0)}if(g=bn(g),M=bn(M),R=R.slice(),y=g-M){for((m=y<0)?(y=-y,$=R):(M=g,$=v),$.reverse(),I=y;I--;$.push(0));$.reverse()}else for(V=(m=(y=R.length)<(I=v.length))?y:I,y=I=0;I<V;I++)if(R[I]!=v[I]){m=R[I]<v[I];break}if(m&&($=R,R=v,v=$,p.s=-p.s),I=(V=v.length)-(C=R.length),I>0)for(;I--;R[C++]=0);for(I=Un-1;V>y;){if(R[--V]<v[V]){for(C=V;C&&!R[--C];R[C]=I);--R[C],R[V]+=Un}R[V]-=v[V]}for(;R[0]==0;R.splice(0,1),--M);return R[0]?U(p,R,M):(p.s=s==3?-1:1,p.c=[p.e=0],p)},i.modulo=i.mod=function(p,I){var C,V,$=this;return p=new P(p,I),!$.c||!p.s||p.c&&!p.c[0]?new P(NaN):!p.c||$.c&&!$.c[0]?new P($):(w==9?(V=p.s,p.s=1,C=e($,p,0,3),p.s=V,C.s*=V):C=e($,p,0,w),p=$.minus(C.times(p)),!p.c[0]&&w==1&&(p.s=$.s),p)},i.multipliedBy=i.times=function(p,I){var C,V,$,m,E,y,g,M,R,v,d,l,x,B,H,D=this,k=D.c,Z=(p=new P(p,I)).c;if(!k||!Z||!k[0]||!Z[0])return!D.s||!p.s||k&&!k[0]&&!Z||Z&&!Z[0]&&!k?p.c=p.e=p.s=null:(p.s*=D.s,!k||!Z?p.c=p.e=null:(p.c=[0],p.e=0)),p;for(V=bn(D.e/He)+bn(p.e/He),p.s*=D.s,g=k.length,v=Z.length,g<v&&(x=k,k=Z,Z=x,$=g,g=v,v=$),$=g+v,x=[];$--;x.push(0));for(B=Un,H=eo,$=v;--$>=0;){for(C=0,d=Z[$]%H,l=Z[$]/H|0,E=g,m=$+E;m>$;)M=k[--E]%H,R=k[E]/H|0,y=l*M+R*d,M=d*M+y%H*H+x[m]+C,C=(M/B|0)+(y/H|0)+l*R,x[m--]=M%B;x[m]=C}return C?++V:x.splice(0,1),U(p,x,V)},i.negated=function(){var p=new P(this);return p.s=-p.s||null,p},i.plus=function(p,I){var C,V=this,$=V.s;if(p=new P(p,I),I=p.s,!$||!I)return new P(NaN);if($!=I)return p.s=-I,V.minus(p);var m=V.e/He,E=p.e/He,y=V.c,g=p.c;if(!m||!E){if(!y||!g)return new P($/0);if(!y[0]||!g[0])return g[0]?p:new P(y[0]?V:$*0)}if(m=bn(m),E=bn(E),y=y.slice(),$=m-E){for($>0?(E=m,C=g):($=-$,C=y),C.reverse();$--;C.push(0));C.reverse()}for($=y.length,I=g.length,$-I<0&&(C=g,g=y,y=C,I=$),$=0;I;)$=(y[--I]=y[I]+g[I]+$)/Un|0,y[I]=Un===y[I]?0:y[I]%Un;return $&&(y=[$].concat(y),++E),U(p,y,E)},i.precision=i.sd=function(p,I){var C,V,$,m=this;if(p!=null&&p!==!!p)return Nt(p,1,Vt),I==null?I=s:Nt(I,0,8),L(new P(m),p,I);if(!(C=m.c))return null;if($=C.length-1,V=$*He+1,$=C[$]){for(;$%10==0;$/=10,V--);for($=C[0];$>=10;$/=10,V++);}return p&&m.e+1>V&&(V=m.e+1),V},i.shiftedBy=function(p){return Nt(p,-xd,xd),this.times("1e"+p)},i.squareRoot=i.sqrt=function(){var p,I,C,V,$,m=this,E=m.c,y=m.s,g=m.e,M=a+4,R=new P("0.5");if(y!==1||!E||!E[0])return new P(!y||y<0&&(!E||E[0])?NaN:E?m:1/0);if(y=Math.sqrt(+G(m)),y==0||y==1/0?(I=yn(E),(I.length+g)%2==0&&(I+="0"),y=Math.sqrt(+I),g=bn((g+1)/2)-(g<0||g%2),y==1/0?I="5e"+g:(I=y.toExponential(),I=I.slice(0,I.indexOf("e")+1)+g),C=new P(I)):C=new P(y+""),C.c[0]){for(g=C.e,y=g+M,y<3&&(y=0);;)if($=C,C=R.times($.plus(e(m,$,M,1))),yn($.c).slice(0,y)===(I=yn(C.c)).slice(0,y))if(C.e<g&&--y,I=I.slice(y-3,y+1),I=="9999"||!V&&I=="4999"){if(!V&&(L($,$.e+a+2,0),$.times($).eq(m))){C=$;break}M+=4,y+=4,V=1}else{(!+I||!+I.slice(1)&&I.charAt(0)=="5")&&(L(C,C.e+a+2,1),p=!C.times(C).eq(m));break}}return L(C,C.e+a+1,s,p)},i.toExponential=function(p,I){return p!=null&&(Nt(p,0,Vt),p++),F(this,p,I,1)},i.toFixed=function(p,I){return p!=null&&(Nt(p,0,Vt),p=p+this.e+1),F(this,p,I)},i.toFormat=function(p,I,C){var V,$=this;if(C==null)p!=null&&I&&typeof I=="object"?(C=I,I=null):p&&typeof p=="object"?(C=p,p=I=null):C=_;else if(typeof C!="object")throw Error(Br+"Argument not an object: "+C);if(V=$.toFixed(p,I),$.c){var m,E=V.split("."),y=+C.groupSize,g=+C.secondaryGroupSize,M=C.groupSeparator||"",R=E[0],v=E[1],d=$.s<0,l=d?R.slice(1):R,x=l.length;if(g&&(m=y,y=g,g=m,x-=m),y>0&&x>0){for(m=x%y||y,R=l.substr(0,m);m<x;m+=y)R+=M+l.substr(m,y);g>0&&(R+=M+l.slice(m)),d&&(R="-"+R)}V=v?R+(C.decimalSeparator||"")+((g=+C.fractionGroupSize)?v.replace(new RegExp("\\d{"+g+"}\\B","g"),"$&"+(C.fractionGroupSeparator||"")):v):R}return(C.prefix||"")+V+(C.suffix||"")},i.toFraction=function(p){var I,C,V,$,m,E,y,g,M,R,v,d,l=this,x=l.c;if(p!=null&&(y=new P(p),!y.isInteger()&&(y.c||y.s!==1)||y.lt(o)))throw Error(Br+"Argument "+(y.isInteger()?"out of range: ":"not an integer: ")+G(y));if(!x)return new P(l);for(I=new P(o),M=C=new P(o),V=g=new P(o),d=yn(x),m=I.e=d.length-l.e-1,I.c[0]=Ed[(E=m%He)<0?He+E:E],p=!p||y.comparedTo(I)>0?m>0?I:M:y,E=h,h=1/0,y=new P(d),g.c[0]=0;R=e(y,I,0,1),$=C.plus(R.times(V)),$.comparedTo(p)!=1;)C=V,V=$,M=g.plus(R.times($=M)),g=$,I=y.minus(R.times($=I)),y=$;return $=e(p.minus(C),V,0,1),g=g.plus($.times(M)),C=C.plus($.times(V)),g.s=M.s=l.s,m=m*2,v=e(M,V,m,s).minus(l).abs().comparedTo(e(g,C,m,s).minus(l).abs())<1?[M,V]:[g,C],h=E,v},i.toNumber=function(){return+G(this)},i.toPrecision=function(p,I){return p!=null&&Nt(p,1,Vt),F(this,p,I,2)},i.toString=function(p){var I,C=this,V=C.s,$=C.e;return $===null?V?(I="Infinity",V<0&&(I="-"+I)):I="NaN":(p==null?I=$<=u||$>=f?mc(yn(C.c),$):Oi(yn(C.c),$,"0"):p===10?(C=L(new P(C),a+$+1,s),I=Oi(yn(C.c),C.e,"0")):(Nt(p,2,T.length,"Base"),I=r(Oi(yn(C.c),$,"0"),10,p,V,!0)),V<0&&C.c[0]&&(I="-"+I)),I},i.valueOf=i.toJSON=function(){return G(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&P.set(t),P}function bn(t){var e=t|0;return t>0||t===e?e:e-1}function yn(t){for(var e,r,n=1,i=t.length,o=t[0]+"";n<i;){for(e=t[n++]+"",r=He-e.length;r--;e="0"+e);o+=e}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function Ga(t,e){var r,n,i=t.c,o=e.c,a=t.s,s=e.s,u=t.e,f=e.e;if(!a||!s)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=u==f,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>f^r?1:-1;for(s=(u=i.length)<(f=o.length)?u:f,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^r?1:-1;return u==f?0:u>f^r?1:-1}function Nt(t,e,r,n){if(t<e||t>r||t!==hi(t))throw Error(Br+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function vc(t){var e=t.c.length-1;return bn(t.e/He)==e&&t.c[e]%2!=0}function mc(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function Oi(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Vg=Kg(),K$=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",BigNumber:Vg,default:Vg}),bc=$t(K$),V$=function(e,r,n){var i=new e.Uint8Array(n),o=r.pushInt,a=r.pushInt32,s=r.pushInt32Neg,u=r.pushInt64,f=r.pushInt64Neg,c=r.pushFloat,h=r.pushFloatSingle,b=r.pushFloatDouble,w=r.pushTrue,A=r.pushFalse,_=r.pushUndefined,T=r.pushNull,P=r.pushInfinity,F=r.pushInfinityNeg,j=r.pushNaN,U=r.pushNaNNeg,L=r.pushArrayStart,G=r.pushArrayStartFixed,p=r.pushArrayStartFixed32,I=r.pushArrayStartFixed64,C=r.pushObjectStart,V=r.pushObjectStartFixed,$=r.pushObjectStartFixed32,m=r.pushObjectStartFixed64,E=r.pushByteString,y=r.pushByteStringStart,g=r.pushUtf8String,M=r.pushUtf8StringStart,R=r.pushSimpleUnassigned,v=r.pushTagStart,d=r.pushTagStart4,l=r.pushTagStart8,x=r.pushTagUnassigned,B=r.pushBreak,H=e.Math.pow,D=0,k=0,Z=0;function z(Q){for(Q=Q|0,D=0,k=Q;(D|0)<(k|0)&&(Z=mo[i[D]&255](i[D]|0)|0,!((Z|0)>0)););return Z|0}function K(Q){return Q=Q|0,((D|0)+(Q|0)|0)<(k|0)?0:1}function W(Q){return Q=Q|0,i[Q|0]<<8|i[Q+1|0]|0}function S(Q){return Q=Q|0,i[Q|0]<<24|i[Q+1|0]<<16|i[Q+2|0]<<8|i[Q+3|0]|0}function J(Q){return Q=Q|0,o(Q|0),D=D+1|0,0}function ne(Q){return Q=Q|0,K(1)|0?1:(o(i[D+1|0]|0),D=D+2|0,0)}function ae(Q){return Q=Q|0,K(2)|0?1:(o(W(D+1|0)|0),D=D+3|0,0)}function ue(Q){return Q=Q|0,K(4)|0?1:(a(W(D+1|0)|0,W(D+3|0)|0),D=D+5|0,0)}function de(Q){return Q=Q|0,K(8)|0?1:(u(W(D+1|0)|0,W(D+3|0)|0,W(D+5|0)|0,W(D+7|0)|0),D=D+9|0,0)}function q(Q){return Q=Q|0,o(-1-(Q-32|0)|0),D=D+1|0,0}function N(Q){return Q=Q|0,K(1)|0?1:(o(-1-(i[D+1|0]|0)|0),D=D+2|0,0)}function O(Q){Q=Q|0;var Xe=0;return K(2)|0?1:(Xe=W(D+1|0)|0,o(-1-(Xe|0)|0),D=D+3|0,0)}function Y(Q){return Q=Q|0,K(4)|0?1:(s(W(D+1|0)|0,W(D+3|0)|0),D=D+5|0,0)}function ee(Q){return Q=Q|0,K(8)|0?1:(f(W(D+1|0)|0,W(D+3|0)|0,W(D+5|0)|0,W(D+7|0)|0),D=D+9|0,0)}function re(Q){Q=Q|0;var Xe=0,Qe=0,Ve=0;return Ve=Q-64|0,K(Ve|0)|0?1:(Xe=D+1|0,Qe=(D+1|0)+(Ve|0)|0,E(Xe|0,Qe|0),D=Qe|0,0)}function ie(Q){Q=Q|0;var Xe=0,Qe=0,Ve=0;return K(1)|0||(Ve=i[D+1|0]|0,Xe=D+2|0,Qe=(D+2|0)+(Ve|0)|0,K(Ve+1|0)|0)?1:(E(Xe|0,Qe|0),D=Qe|0,0)}function pe(Q){Q=Q|0;var Xe=0,Qe=0,Ve=0;return K(2)|0||(Ve=W(D+1|0)|0,Xe=D+3|0,Qe=(D+3|0)+(Ve|0)|0,K(Ve+2|0)|0)?1:(E(Xe|0,Qe|0),D=Qe|0,0)}function le(Q){Q=Q|0;var Xe=0,Qe=0,Ve=0;return K(4)|0||(Ve=S(D+1|0)|0,Xe=D+5|0,Qe=(D+5|0)+(Ve|0)|0,K(Ve+4|0)|0)?1:(E(Xe|0,Qe|0),D=Qe|0,0)}function he(Q){return Q=Q|0,1}function xe(Q){return Q=Q|0,y(),D=D+1|0,0}function se(Q){Q=Q|0;var Xe=0,Qe=0,Ve=0;return Ve=Q-96|0,K(Ve|0)|0?1:(Xe=D+1|0,Qe=(D+1|0)+(Ve|0)|0,g(Xe|0,Qe|0),D=Qe|0,0)}function _e(Q){Q=Q|0;var Xe=0,Qe=0,Ve=0;return K(1)|0||(Ve=i[D+1|0]|0,Xe=D+2|0,Qe=(D+2|0)+(Ve|0)|0,K(Ve+1|0)|0)?1:(g(Xe|0,Qe|0),D=Qe|0,0)}function $e(Q){Q=Q|0;var Xe=0,Qe=0,Ve=0;return K(2)|0||(Ve=W(D+1|0)|0,Xe=D+3|0,Qe=(D+3|0)+(Ve|0)|0,K(Ve+2|0)|0)?1:(g(Xe|0,Qe|0),D=Qe|0,0)}function Se(Q){Q=Q|0;var Xe=0,Qe=0,Ve=0;return K(4)|0||(Ve=S(D+1|0)|0,Xe=D+5|0,Qe=(D+5|0)+(Ve|0)|0,K(Ve+4|0)|0)?1:(g(Xe|0,Qe|0),D=Qe|0,0)}function Pe(Q){return Q=Q|0,1}function Ye(Q){return Q=Q|0,M(),D=D+1|0,0}function be(Q){return Q=Q|0,G(Q-128|0),D=D+1|0,0}function ke(Q){return Q=Q|0,K(1)|0?1:(G(i[D+1|0]|0),D=D+2|0,0)}function rt(Q){return Q=Q|0,K(2)|0?1:(G(W(D+1|0)|0),D=D+3|0,0)}function nt(Q){return Q=Q|0,K(4)|0?1:(p(W(D+1|0)|0,W(D+3|0)|0),D=D+5|0,0)}function et(Q){return Q=Q|0,K(8)|0?1:(I(W(D+1|0)|0,W(D+3|0)|0,W(D+5|0)|0,W(D+7|0)|0),D=D+9|0,0)}function Ot(Q){return Q=Q|0,L(),D=D+1|0,0}function Me(Q){Q=Q|0;var Xe=0;return Xe=Q-160|0,K(Xe|0)|0?1:(V(Xe|0),D=D+1|0,0)}function at(Q){return Q=Q|0,K(1)|0?1:(V(i[D+1|0]|0),D=D+2|0,0)}function er(Q){return Q=Q|0,K(2)|0?1:(V(W(D+1|0)|0),D=D+3|0,0)}function st(Q){return Q=Q|0,K(4)|0?1:($(W(D+1|0)|0,W(D+3|0)|0),D=D+5|0,0)}function Re(Q){return Q=Q|0,K(8)|0?1:(m(W(D+1|0)|0,W(D+3|0)|0,W(D+5|0)|0,W(D+7|0)|0),D=D+9|0,0)}function wt(Q){return Q=Q|0,C(),D=D+1|0,0}function Ne(Q){return Q=Q|0,v(Q-192|0|0),D=D+1|0,0}function Fe(Q){return Q=Q|0,v(Q|0),D=D+1|0,0}function It(Q){return Q=Q|0,v(Q|0),D=D+1|0,0}function Ce(Q){return Q=Q|0,v(Q|0),D=D+1|0,0}function Le(Q){return Q=Q|0,v(Q|0),D=D+1|0,0}function Oe(Q){return Q=Q|0,v(Q-192|0|0),D=D+1|0,0}function je(Q){return Q=Q|0,v(Q|0),D=D+1|0,0}function ze(Q){return Q=Q|0,v(Q|0),D=D+1|0,0}function Pt(Q){return Q=Q|0,v(Q|0),D=D+1|0,0}function De(Q){return Q=Q|0,K(1)|0?1:(v(i[D+1|0]|0),D=D+2|0,0)}function Be(Q){return Q=Q|0,K(2)|0?1:(v(W(D+1|0)|0),D=D+3|0,0)}function ut(Q){return Q=Q|0,K(4)|0?1:(d(W(D+1|0)|0,W(D+3|0)|0),D=D+5|0,0)}function Ue(Q){return Q=Q|0,K(8)|0?1:(l(W(D+1|0)|0,W(D+3|0)|0,W(D+5|0)|0,W(D+7|0)|0),D=D+9|0,0)}function Ee(Q){return Q=Q|0,R((Q|0)-224|0),D=D+1|0,0}function kn(Q){return Q=Q|0,A(),D=D+1|0,0}function yt(Q){return Q=Q|0,w(),D=D+1|0,0}function gt(Q){return Q=Q|0,T(),D=D+1|0,0}function tr(Q){return Q=Q|0,_(),D=D+1|0,0}function on(Q){return Q=Q|0,K(1)|0?1:(R(i[D+1|0]|0),D=D+2|0,0)}function an(Q){Q=Q|0;var Xe=0,Qe=0,Ve=1,Vn=0,fn=0,Si=0;return K(2)|0?1:(Xe=i[D+1|0]|0,Qe=i[D+2|0]|0,(Xe|0)&128&&(Ve=-1),Vn=+(((Xe|0)&124)>>2),fn=+(((Xe|0)&3)<<8|Qe),+Vn==0?c(+(+Ve*5960464477539063e-23*+fn)):+Vn==31?+Ve==1?+fn>0?j():P():+fn>0?U():F():c(+(+Ve*H(2,+(+Vn-25))*+(1024+fn))),D=D+3|0,0)}function sn(Q){return Q=Q|0,K(4)|0?1:(h(i[D+1|0]|0,i[D+2|0]|0,i[D+3|0]|0,i[D+4|0]|0),D=D+5|0,0)}function un(Q){return Q=Q|0,K(8)|0?1:(b(i[D+1|0]|0,i[D+2|0]|0,i[D+3|0]|0,i[D+4|0]|0,i[D+5|0]|0,i[D+6|0]|0,i[D+7|0]|0,i[D+8|0]|0),D=D+9|0,0)}function it(Q){return Q=Q|0,1}function rr(Q){return Q=Q|0,B(),D=D+1|0,0}var mo=[J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,ne,ae,ue,de,it,it,it,it,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,N,O,Y,ee,it,it,it,it,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,ie,pe,le,he,it,it,it,xe,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,_e,$e,Se,Pe,it,it,it,Ye,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,ke,rt,nt,et,it,it,it,Ot,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,at,er,st,Re,it,it,it,wt,Ne,Ne,Ne,Ne,Ne,Ne,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,De,Be,ut,Ue,it,it,it,it,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,Ee,kn,yt,gt,tr,on,an,sn,un,it,it,it,rr];return{parse:z}},yc={},_r={};const Sd=bc.BigNumber;_r.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};_r.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};_r.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};_r.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};_r.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};_r.SHIFT32=Math.pow(2,32);_r.SHIFT16=Math.pow(2,16);_r.MAX_SAFE_HIGH=2097151;_r.NEG_ONE=new Sd(-1);_r.TEN=new Sd(10);_r.TWO=new Sd(2);_r.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=Qs,r=bc.BigNumber,n=_r,i=n.SHIFT32,o=n.SHIFT16,a=2097151;t.parseHalf=function(f){var c,h,b;return b=f[0]&128?-1:1,c=(f[0]&124)>>2,h=(f[0]&3)<<8|f[1],c?c===31?b*(h?0/0:1/0):b*Math.pow(2,c-25)*(1024+h):b*5960464477539063e-23*h};function s(u){return u<16?"0"+u.toString(16):u.toString(16)}t.arrayBufferToBignumber=function(u){const f=u.byteLength;let c="";for(let h=0;h<f;h++)c+=s(u[h]);return new r(c,16)},t.buildMap=u=>{const f=new Map,c=Object.keys(u),h=c.length;for(let b=0;b<h;b++)f.set(c[b],u[c[b]]);return f},t.buildInt32=(u,f)=>u*o+f,t.buildInt64=(u,f,c,h)=>{const b=t.buildInt32(u,f),w=t.buildInt32(c,h);return b>a?new r(b).times(i).plus(w):b*i+w},t.writeHalf=function(f,c){const h=e.allocUnsafe(4);h.writeFloatBE(c,0);const b=h.readUInt32BE(0);if((b&8191)!=0)return!1;var w=b>>16&32768;const A=b>>23&255,_=b&8388607;if(A>=113&&A<=142)w+=(A-112<<10)+(_>>13);else if(A>=103&&A<113){if(_&(1<<126-A)-1)return!1;w+=_+8388608>>126-A}else return!1;return f.writeUInt16BE(w,0),!0},t.keySorter=function(u,f){var c=u[0].byteLength,h=f[0].byteLength;return c>h?1:h>c?-1:u[0].compare(f[0])},t.isNegativeZero=u=>u===0&&1/u<0,t.nextPowerOf2=u=>{let f=0;if(u&&!(u&u-1))return u;for(;u!==0;)u>>=1,f+=1;return 1<<f}})(yc);const Ad=_r,J$=Ad.MT,gc=Ad.SIMPLE,Id=Ad.SYMS;class wc{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,J$.SIMPLE_FLOAT)}static isSimple(e){return e instanceof wc}static decode(e,r){switch(r==null&&(r=!0),e){case gc.FALSE:return!1;case gc.TRUE:return!0;case gc.NULL:return r?null:Id.NULL;case gc.UNDEFINED:return r?void 0:Id.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Id.BREAK;default:return new wc(e)}}}var Jg=wc;class _c{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=_c["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(_c,this.value)}catch(i){return r=i,this.err=r,this}}}var Yg=_c;const Xg=self.location?self.location.protocol+"//"+self.location.host:"",Pd=self.URL;class Y${constructor(e="",r=Xg){this.super=new Pd(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function X$(t){if(typeof t=="string")return new Pd(t).toString();if(!(t instanceof Pd)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",o=t.host||"",a=t.hostname||"",s=t.search||(t.query?"?"+t.query:""),u=t.hash||"",f=t.pathname||"",c=t.path||f+s;return`${i}${e||r}${o||a+n}${c}${u}`}}var Zg={URLWithLegacySupport:Y$,URLSearchParams:self.URLSearchParams,defaultBase:Xg,format:X$};const{URLWithLegacySupport:Qg,format:Z$}=Zg;var Q$=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let o;try{o=new Qg(t)}catch{o={}}const a=Object.assign({},e,{protocol:i||o.protocol,host:e.host||o.host});return new Qg(t,Z$(a)).toString()};const{URLWithLegacySupport:eR,format:tR,URLSearchParams:rR,defaultBase:nR}=Zg,iR=Q$;var e2={URL:eR,URLSearchParams:rR,format:tR,relative:iR,defaultBase:nR};const{Buffer:Ha}=Qs,t2=pc,oR=bc.BigNumber,aR=V$,kr=yc,_t=_r,sR=Jg,uR=Yg,{URL:fR}=e2;class Wa{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=kr.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Ha.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>kr.arrayBufferToBignumber(r),3:r=>_t.NEG_ONE.minus(kr.arrayBufferToBignumber(r)),4:r=>_t.TEN.pow(r[0]).times(r[1]),5:r=>_t.TWO.pow(r[0]).times(r[1]),32:r=>new fR(r),35:r=>new RegExp(r)},e.tags),this.parser=aR(te,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case _t.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case _t.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case _t.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case _t.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case _t.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case _t.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===_t.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case _t.PARENT.ARRAY:case _t.PARENT.BYTE_STRING:case _t.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case _t.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=_t.PARENT.MAP,n.ref=kr.buildMap(n.ref)));break;case _t.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case _t.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:_t.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new uR(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return Ha.concat(e)}createByteStringFromHeap(e,r){return e===r?Ha.alloc(0):Ha.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return kr.buildInt32(e,r)}createInt64(e,r,n,i){return kr.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return t2.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,o,a,s,u){return t2.read([e,r,n,i,o,a,s,u],0,!1,52,8)}createInt32Neg(e,r){return-1-kr.buildInt32(e,r)}createInt64Neg(e,r,n,i){const o=kr.buildInt32(e,r),a=kr.buildInt32(n,i);return o>_t.MAX_SAFE_HIGH?_t.NEG_ONE.minus(new oR(o).times(_t.SHIFT32).plus(a)):-1-(o*_t.SHIFT32+a)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new sR(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,o,a,s,u){this._push(this.createFloatDouble(e,r,n,i,o,a,s,u))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],_t.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=kr.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const o=kr.buildInt64(e,r,n,i);this._createArrayStartFixed(o)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=kr.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const o=kr.buildInt64(e,r,n,i);this._createObjectStartFixed(o)}pushByteStringStart(){this._parents[this._depth]={type:_t.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:_t.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:_t.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(kr.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(kr.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},_t.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),_t.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=Ha.from(e,r||"hex")),new Wa({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=Ha.from(e,r||"hex")),new Wa({size:e.length}).decodeAll(e)}}Wa.decodeFirst=Wa.decode;var r2=Wa;const{Buffer:Md}=Qs,cR=r2,lR=yc;class kd extends cR{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return lR.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,o,a,s,u){return`${super.createFloatDouble(e,r,n,i,o,a,s,u)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${Md.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(n2(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(n2(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${Md.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=Md.from(e,r||"hex")),new kd().decodeFirst(e)}}var hR=kd;function n2(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:di}=Qs,{URL:dR}=e2,Td=bc.BigNumber,Nd=yc,zt=_r,Fn=zt.MT,xc=zt.NUMBYTES,i2=zt.SHIFT32,o2=zt.SYMS,Ka=zt.TAG,pR=zt.MT.SIMPLE_FLOAT<<5|zt.NUMBYTES.TWO,vR=zt.MT.SIMPLE_FLOAT<<5|zt.NUMBYTES.FOUR,mR=zt.MT.SIMPLE_FLOAT<<5|zt.NUMBYTES.EIGHT,bR=zt.MT.SIMPLE_FLOAT<<5|zt.SIMPLE.TRUE,yR=zt.MT.SIMPLE_FLOAT<<5|zt.SIMPLE.FALSE,gR=zt.MT.SIMPLE_FLOAT<<5|zt.SIMPLE.UNDEFINED,a2=zt.MT.SIMPLE_FLOAT<<5|zt.SIMPLE.NULL,wR=new Td("0x20000000000000"),_R=di.from("f97e00","hex"),xR=di.from("f9fc00","hex"),ER=di.from("f97c00","hex");function SR(t){return{}.toString.call(t).slice(8,-1)}class Ec{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[dR,this._pushUrl],[Td,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const a=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,a}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(_R)}_pushInfinity(e){const r=e<0?xR:ER;return this.push(r)}_pushFloat(e){const r=di.allocUnsafe(2);if(Nd.writeHalf(r,e)&&Nd.parseHalf(r)===e)return this._pushUInt8(pR)&&this.push(r);const n=di.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(vR)&&this.push(n):this._pushUInt8(mR)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|xc.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|xc.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|xc.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|xc.EIGHT)&&this._pushUInt32BE(Math.floor(e/i2))&&this._pushUInt32BE(e%i2):r===Fn.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,Fn.NEG_INT,e):this._pushInt(e,Fn.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=di.byteLength(e,"utf8");return this._pushInt(r,Fn.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?bR:yR)}_pushUndefined(e){return this._pushUInt8(gR)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,Fn.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,Fn.TAG)}_pushDate(e,r){return e._pushTag(Ka.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,Fn.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(Ka.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,Fn.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(Ka.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=Ka.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=Ka.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=di.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(Ka.DECIMAL_FRAC)&&e._pushInt(2,Fn.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new Td(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(wR)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,Fn.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(a2);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var o=Object.keys(e),a=o.length;return this._pushInt(a,Fn.MAP)?this._pushRawMap(a,o.map(s=>[s,e[s]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=Ec.encode(i[0]),i}).sort(Nd.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=SR(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,di.isBuffer(e)?e:di.from(e));case"Null":return this._pushUInt8(a2);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case o2.NULL:return this._pushObject(null);case o2.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,o=0,a=0;a<i;a++)o+=r[a];var s=di.allocUnsafe(o),u=0,f=0;for(a=0;a<i;a++){switch(f=r[a],n[a]){case 0:e[a].copy(s,u);break;case 1:s.writeUInt8(e[a],u,!0);break;case 2:s.writeUInt16BE(e[a],u,!0);break;case 3:s.writeUInt32BE(e[a],u,!0);break;case 4:s.writeDoubleBE(e[a],u,!0);break;case 5:s.write(e[a],u,f,"utf8");break;default:throw new Error("unkown method")}u+=f}var c=s;return this._reset(),c}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new Ec;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var AR=Ec;(function(t){t.Diagnose=hR,t.Decoder=r2,t.Encoder=AR,t.Simple=Jg,t.Tagged=Yg,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(Gg);function s2(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function IR(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return s2(t,r)}catch{r.message=t.message,r.stack=t.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),s2(new i,r)}}var PR=IR,Od={exports:{}};(function(t,e){(function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function o(_){if(!Array.isArray(_)&&!ArrayBuffer.isView(_))return!1;for(var T=0;T<_.length;T++)if(!Number.isInteger(_[T])||_[T]<0||_[T]>255)return!1;return!0}function a(_,T){return(_&65535)*T+(((_>>>16)*T&65535)<<16)}function s(_,T){return _<<T|_>>>32-T}function u(_){return _^=_>>>16,_=a(_,2246822507),_^=_>>>13,_=a(_,3266489909),_^=_>>>16,_}function f(_,T){_=[_[0]>>>16,_[0]&65535,_[1]>>>16,_[1]&65535],T=[T[0]>>>16,T[0]&65535,T[1]>>>16,T[1]&65535];var P=[0,0,0,0];return P[3]+=_[3]+T[3],P[2]+=P[3]>>>16,P[3]&=65535,P[2]+=_[2]+T[2],P[1]+=P[2]>>>16,P[2]&=65535,P[1]+=_[1]+T[1],P[0]+=P[1]>>>16,P[1]&=65535,P[0]+=_[0]+T[0],P[0]&=65535,[P[0]<<16|P[1],P[2]<<16|P[3]]}function c(_,T){_=[_[0]>>>16,_[0]&65535,_[1]>>>16,_[1]&65535],T=[T[0]>>>16,T[0]&65535,T[1]>>>16,T[1]&65535];var P=[0,0,0,0];return P[3]+=_[3]*T[3],P[2]+=P[3]>>>16,P[3]&=65535,P[2]+=_[2]*T[3],P[1]+=P[2]>>>16,P[2]&=65535,P[2]+=_[3]*T[2],P[1]+=P[2]>>>16,P[2]&=65535,P[1]+=_[1]*T[3],P[0]+=P[1]>>>16,P[1]&=65535,P[1]+=_[2]*T[2],P[0]+=P[1]>>>16,P[1]&=65535,P[1]+=_[3]*T[1],P[0]+=P[1]>>>16,P[1]&=65535,P[0]+=_[0]*T[3]+_[1]*T[2]+_[2]*T[1]+_[3]*T[0],P[0]&=65535,[P[0]<<16|P[1],P[2]<<16|P[3]]}function h(_,T){return T%=64,T===32?[_[1],_[0]]:T<32?[_[0]<<T|_[1]>>>32-T,_[1]<<T|_[0]>>>32-T]:(T-=32,[_[1]<<T|_[0]>>>32-T,_[0]<<T|_[1]>>>32-T])}function b(_,T){return T%=64,T===0?_:T<32?[_[0]<<T|_[1]>>>32-T,_[1]<<T]:[_[1]<<T-32,0]}function w(_,T){return[_[0]^T[0],_[1]^T[1]]}function A(_){return _=w(_,[0,_[0]>>>1]),_=c(_,[4283543511,3981806797]),_=w(_,[0,_[0]>>>1]),_=c(_,[3301882366,444984403]),_=w(_,[0,_[0]>>>1]),_}i.x86.hash32=function(_,T){if(i.inputValidation&&!o(_))return n;T=T||0;for(var P=_.length%4,F=_.length-P,j=T,U=0,L=3432918353,G=461845907,p=0;p<F;p=p+4)U=_[p]|_[p+1]<<8|_[p+2]<<16|_[p+3]<<24,U=a(U,L),U=s(U,15),U=a(U,G),j^=U,j=s(j,13),j=a(j,5)+3864292196;switch(U=0,P){case 3:U^=_[p+2]<<16;case 2:U^=_[p+1]<<8;case 1:U^=_[p],U=a(U,L),U=s(U,15),U=a(U,G),j^=U}return j^=_.length,j=u(j),j>>>0},i.x86.hash128=function(_,T){if(i.inputValidation&&!o(_))return n;T=T||0;for(var P=_.length%16,F=_.length-P,j=T,U=T,L=T,G=T,p=0,I=0,C=0,V=0,$=597399067,m=2869860233,E=951274213,y=2716044179,g=0;g<F;g=g+16)p=_[g]|_[g+1]<<8|_[g+2]<<16|_[g+3]<<24,I=_[g+4]|_[g+5]<<8|_[g+6]<<16|_[g+7]<<24,C=_[g+8]|_[g+9]<<8|_[g+10]<<16|_[g+11]<<24,V=_[g+12]|_[g+13]<<8|_[g+14]<<16|_[g+15]<<24,p=a(p,$),p=s(p,15),p=a(p,m),j^=p,j=s(j,19),j+=U,j=a(j,5)+1444728091,I=a(I,m),I=s(I,16),I=a(I,E),U^=I,U=s(U,17),U+=L,U=a(U,5)+197830471,C=a(C,E),C=s(C,17),C=a(C,y),L^=C,L=s(L,15),L+=G,L=a(L,5)+2530024501,V=a(V,y),V=s(V,18),V=a(V,$),G^=V,G=s(G,13),G+=j,G=a(G,5)+850148119;switch(p=0,I=0,C=0,V=0,P){case 15:V^=_[g+14]<<16;case 14:V^=_[g+13]<<8;case 13:V^=_[g+12],V=a(V,y),V=s(V,18),V=a(V,$),G^=V;case 12:C^=_[g+11]<<24;case 11:C^=_[g+10]<<16;case 10:C^=_[g+9]<<8;case 9:C^=_[g+8],C=a(C,E),C=s(C,17),C=a(C,y),L^=C;case 8:I^=_[g+7]<<24;case 7:I^=_[g+6]<<16;case 6:I^=_[g+5]<<8;case 5:I^=_[g+4],I=a(I,m),I=s(I,16),I=a(I,E),U^=I;case 4:p^=_[g+3]<<24;case 3:p^=_[g+2]<<16;case 2:p^=_[g+1]<<8;case 1:p^=_[g],p=a(p,$),p=s(p,15),p=a(p,m),j^=p}return j^=_.length,U^=_.length,L^=_.length,G^=_.length,j+=U,j+=L,j+=G,U+=j,L+=j,G+=j,j=u(j),U=u(U),L=u(L),G=u(G),j+=U,j+=L,j+=G,U+=j,L+=j,G+=j,("00000000"+(j>>>0).toString(16)).slice(-8)+("00000000"+(U>>>0).toString(16)).slice(-8)+("00000000"+(L>>>0).toString(16)).slice(-8)+("00000000"+(G>>>0).toString(16)).slice(-8)},i.x64.hash128=function(_,T){if(i.inputValidation&&!o(_))return n;T=T||0;for(var P=_.length%16,F=_.length-P,j=[0,T],U=[0,T],L=[0,0],G=[0,0],p=[2277735313,289559509],I=[1291169091,658871167],C=0;C<F;C=C+16)L=[_[C+4]|_[C+5]<<8|_[C+6]<<16|_[C+7]<<24,_[C]|_[C+1]<<8|_[C+2]<<16|_[C+3]<<24],G=[_[C+12]|_[C+13]<<8|_[C+14]<<16|_[C+15]<<24,_[C+8]|_[C+9]<<8|_[C+10]<<16|_[C+11]<<24],L=c(L,p),L=h(L,31),L=c(L,I),j=w(j,L),j=h(j,27),j=f(j,U),j=f(c(j,[0,5]),[0,1390208809]),G=c(G,I),G=h(G,33),G=c(G,p),U=w(U,G),U=h(U,31),U=f(U,j),U=f(c(U,[0,5]),[0,944331445]);switch(L=[0,0],G=[0,0],P){case 15:G=w(G,b([0,_[C+14]],48));case 14:G=w(G,b([0,_[C+13]],40));case 13:G=w(G,b([0,_[C+12]],32));case 12:G=w(G,b([0,_[C+11]],24));case 11:G=w(G,b([0,_[C+10]],16));case 10:G=w(G,b([0,_[C+9]],8));case 9:G=w(G,[0,_[C+8]]),G=c(G,I),G=h(G,33),G=c(G,p),U=w(U,G);case 8:L=w(L,b([0,_[C+7]],56));case 7:L=w(L,b([0,_[C+6]],48));case 6:L=w(L,b([0,_[C+5]],40));case 5:L=w(L,b([0,_[C+4]],32));case 4:L=w(L,b([0,_[C+3]],24));case 3:L=w(L,b([0,_[C+2]],16));case 2:L=w(L,b([0,_[C+1]],8));case 1:L=w(L,[0,_[C]]),L=c(L,p),L=h(L,31),L=c(L,I),j=w(j,L)}return j=w(j,[0,_.length]),U=w(U,[0,_.length]),j=f(j,U),U=f(U,j),j=A(j),U=A(U),j=f(j,U),U=f(U,j),("00000000"+(j[0]>>>0).toString(16)).slice(-8)+("00000000"+(j[1]>>>0).toString(16)).slice(-8)+("00000000"+(U[0]>>>0).toString(16)).slice(-8)+("00000000"+(U[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i})()})(Od,Od.exports);var MR=Od.exports;const kR=Zs,Va=self.crypto||self.msCrypto,$d=async(t,e)=>{if(typeof self=="undefined"||!Va)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");switch(e){case"sha1":return new Uint8Array(await Va.subtle.digest({name:"SHA-1"},t));case"sha2-256":return new Uint8Array(await Va.subtle.digest({name:"SHA-256"},t));case"sha2-512":return new Uint8Array(await Va.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const r=await Va.subtle.digest({name:"SHA-256"},t);return new Uint8Array(await Va.subtle.digest({name:"SHA-256"},r))}default:throw new Error(`${e} is not a supported algorithm`)}};var TR={factory:t=>async e=>$d(e,t),digest:$d,multihashing:async(t,e,r)=>{const n=await $d(t,e);return kR.encode(n,e,r)}};const NR=t=>{const e=new Uint8Array(4);for(let r=0;r<4;r++)e[r]=t&255,t=t>>8;return e};var OR={fromNumberTo32BitBuf:NR};function u2(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const f2=u2("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),Rd=u2("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),$R=ye({utf8:f2,"utf-8":f2,hex:vn.base16,latin1:Rd,ascii:Rd,binary:Rd},vn);function RR(t,e="utf8"){const r=$R[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var CR=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:RR}),LR=$t(CR);const DR="Input must be an string, Buffer or Uint8Array";function BR(t){let e;if(t instanceof Uint8Array)e=t;else if(t instanceof Buffer)e=new Uint8Array(t);else if(typeof t=="string")e=new Uint8Array(Buffer.from(t,"utf8"));else throw new Error(DR);return e}function UR(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Sc(t){return(4294967296+t).toString(16).substring(1)}function FR(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=Sc(e[i]).toUpperCase(),n+=" ",n+=Sc(e[i+1]).toUpperCase();else if(r===64)n+=Sc(e[i+1]).toUpperCase(),n+=Sc(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6==4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function jR(t,e,r){let n=new Date().getTime();const i=new Uint8Array(e);for(let a=0;a<e;a++)i[a]=a%256;const o=new Date().getTime();console.log("Generated random input in "+(o-n)+"ms"),n=o;for(let a=0;a<r;a++){const s=t(i),u=new Date().getTime(),f=u-n;n=u,console.log("Hashed in "+f+"ms: "+s.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(f/1e3)*100)/100+" MB PER SECOND")}}var c2={normalizeInput:BR,toHex:UR,debugPrint:FR,testSpeed:jR};const l2=c2;function Ac(t,e,r){const n=t[e]+t[r];let i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function h2(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let o=t[e+1]+n;i>=4294967296&&o++,t[e]=i,t[e+1]=o}function zR(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function to(t,e,r,n,i,o){const a=eu[i],s=eu[i+1],u=eu[o],f=eu[o+1];Ac(Je,t,e),h2(Je,t,a,s);let c=Je[n]^Je[t],h=Je[n+1]^Je[t+1];Je[n]=h,Je[n+1]=c,Ac(Je,r,n),c=Je[e]^Je[r],h=Je[e+1]^Je[r+1],Je[e]=c>>>24^h<<8,Je[e+1]=h>>>24^c<<8,Ac(Je,t,e),h2(Je,t,u,f),c=Je[n]^Je[t],h=Je[n+1]^Je[t+1],Je[n]=c>>>16^h<<16,Je[n+1]=h>>>16^c<<16,Ac(Je,r,n),c=Je[e]^Je[r],h=Je[e+1]^Je[r+1],Je[e]=h>>>31^c<<1,Je[e+1]=c>>>31^h<<1}const d2=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),qR=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],xr=new Uint8Array(qR.map(function(t){return t*2})),Je=new Uint32Array(32),eu=new Uint32Array(32);function p2(t,e){let r=0;for(r=0;r<16;r++)Je[r]=t.h[r],Je[r+16]=d2[r];for(Je[24]=Je[24]^t.t,Je[25]=Je[25]^t.t/4294967296,e&&(Je[28]=~Je[28],Je[29]=~Je[29]),r=0;r<32;r++)eu[r]=zR(t.b,4*r);for(r=0;r<12;r++)to(0,8,16,24,xr[r*16+0],xr[r*16+1]),to(2,10,18,26,xr[r*16+2],xr[r*16+3]),to(4,12,20,28,xr[r*16+4],xr[r*16+5]),to(6,14,22,30,xr[r*16+6],xr[r*16+7]),to(0,10,20,30,xr[r*16+8],xr[r*16+9]),to(2,12,22,24,xr[r*16+10],xr[r*16+11]),to(4,14,16,26,xr[r*16+12],xr[r*16+13]),to(6,8,18,28,xr[r*16+14],xr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Je[r]^Je[r+16]}function v2(t,e){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");const r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};for(let i=0;i<16;i++)r.h[i]=d2[i];const n=e?e.length:0;return r.h[0]^=16842752^n<<8^t,e&&(Cd(r,e),r.c=128),r}function Cd(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,p2(t,!1),t.c=0),t.b[t.c++]=e[r]}function m2(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;p2(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function b2(t,e,r){r=r||64,t=l2.normalizeInput(t);const n=v2(r,e);return Cd(n,t),m2(n)}function GR(t,e,r){const n=b2(t,e,r);return l2.toHex(n)}var HR={blake2b:b2,blake2bHex:GR,blake2bInit:v2,blake2bUpdate:Cd,blake2bFinal:m2};const y2=c2;function WR(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ro(t,e,r,n,i,o){mt[t]=mt[t]+mt[e]+i,mt[n]=Ic(mt[n]^mt[t],16),mt[r]=mt[r]+mt[n],mt[e]=Ic(mt[e]^mt[r],12),mt[t]=mt[t]+mt[e]+o,mt[n]=Ic(mt[n]^mt[t],8),mt[r]=mt[r]+mt[n],mt[e]=Ic(mt[e]^mt[r],7)}function Ic(t,e){return t>>>e^t<<32-e}const g2=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Er=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),mt=new Uint32Array(16),hr=new Uint32Array(16);function w2(t,e){let r=0;for(r=0;r<8;r++)mt[r]=t.h[r],mt[r+8]=g2[r];for(mt[12]^=t.t,mt[13]^=t.t/4294967296,e&&(mt[14]=~mt[14]),r=0;r<16;r++)hr[r]=WR(t.b,4*r);for(r=0;r<10;r++)ro(0,4,8,12,hr[Er[r*16+0]],hr[Er[r*16+1]]),ro(1,5,9,13,hr[Er[r*16+2]],hr[Er[r*16+3]]),ro(2,6,10,14,hr[Er[r*16+4]],hr[Er[r*16+5]]),ro(3,7,11,15,hr[Er[r*16+6]],hr[Er[r*16+7]]),ro(0,5,10,15,hr[Er[r*16+8]],hr[Er[r*16+9]]),ro(1,6,11,12,hr[Er[r*16+10]],hr[Er[r*16+11]]),ro(2,7,8,13,hr[Er[r*16+12]],hr[Er[r*16+13]]),ro(3,4,9,14,hr[Er[r*16+14]],hr[Er[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=mt[r]^mt[r+8]}function _2(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(g2),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(Ld(n,e),n.c=64),n}function Ld(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,w2(t,!1),t.c=0),t.b[t.c++]=e[r]}function x2(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;w2(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function E2(t,e,r){r=r||32,t=y2.normalizeInput(t);const n=_2(r,e);return Ld(n,t),x2(n)}function KR(t,e,r){const n=E2(t,e,r);return y2.toHex(n)}var VR={blake2s:E2,blake2sHex:KR,blake2sInit:_2,blake2sUpdate:Ld,blake2sFinal:x2};const tu=HR,ru=VR;var JR={blake2b:tu.blake2b,blake2bHex:tu.blake2bHex,blake2bInit:tu.blake2bInit,blake2bUpdate:tu.blake2bUpdate,blake2bFinal:tu.blake2bFinal,blake2s:ru.blake2s,blake2sHex:ru.blake2sHex,blake2sInit:ru.blake2sInit,blake2sUpdate:ru.blake2sUpdate,blake2sFinal:ru.blake2sFinal};const Ja=JR,YR=45569,XR=45633,ZR={init:Ja.blake2bInit,update:Ja.blake2bUpdate,digest:Ja.blake2bFinal},QR={init:Ja.blake2sInit,update:Ja.blake2sUpdate,digest:Ja.blake2sFinal},S2=(t,e)=>async r=>{const n=e.init(t,null);return e.update(n,r),e.digest(n)};var e9=t=>{for(let e=0;e<64;e++)t[YR+e]=S2(e+1,ZR);for(let e=0;e<32;e++)t[XR+e]=S2(e+1,QR)};const pi=hf.exports,A2=MR,{factory:Pc}=TR,{fromNumberTo32BitBuf:t9}=OR,{fromString:r9}=LR,gn=t=>async e=>{switch(t){case"sha3-224":return new Uint8Array(pi.sha3_224.arrayBuffer(e));case"sha3-256":return new Uint8Array(pi.sha3_256.arrayBuffer(e));case"sha3-384":return new Uint8Array(pi.sha3_384.arrayBuffer(e));case"sha3-512":return new Uint8Array(pi.sha3_512.arrayBuffer(e));case"shake-128":return new Uint8Array(pi.shake128.create(128).update(e).arrayBuffer());case"shake-256":return new Uint8Array(pi.shake256.create(256).update(e).arrayBuffer());case"keccak-224":return new Uint8Array(pi.keccak224.arrayBuffer(e));case"keccak-256":return new Uint8Array(pi.keccak256.arrayBuffer(e));case"keccak-384":return new Uint8Array(pi.keccak384.arrayBuffer(e));case"keccak-512":return new Uint8Array(pi.keccak512.arrayBuffer(e));case"murmur3-128":return r9(A2.x64.hash128(e),"base16");case"murmur3-32":return t9(A2.x86.hash32(e));default:throw new TypeError(`${t} is not a supported algorithm`)}},n9=t=>t;var i9={identity:n9,sha1:Pc("sha1"),sha2256:Pc("sha2-256"),sha2512:Pc("sha2-512"),dblSha2256:Pc("dbl-sha2-256"),sha3224:gn("sha3-224"),sha3256:gn("sha3-256"),sha3384:gn("sha3-384"),sha3512:gn("sha3-512"),shake128:gn("shake-128"),shake256:gn("shake-256"),keccak224:gn("keccak-224"),keccak256:gn("keccak-256"),keccak384:gn("keccak-384"),keccak512:gn("keccak-512"),murmur3128:gn("murmur3-128"),murmur332:gn("murmur3-32"),addBlake:e9};function o9(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var a9=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:o9}),s9=$t(a9);const I2=PR,Mc=Zs,Jt=i9,{equals:u9}=s9;async function wn(t,e,r){const n=await wn.digest(t,e,r);return Mc.encode(n,e,r)}wn.multihash=Mc;wn.digest=async(t,e,r)=>{const i=await wn.createHash(e)(t);return r?i.slice(0,r):i};wn.createHash=function(t){if(!t)throw I2(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");const e=Mc.coerceCode(t);if(!wn.functions[e])throw I2(new Error(`multihash function '${t}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return wn.functions[e]};wn.functions={0:Jt.identity,17:Jt.sha1,18:Jt.sha2256,19:Jt.sha2512,20:Jt.sha3512,21:Jt.sha3384,22:Jt.sha3256,23:Jt.sha3224,24:Jt.shake128,25:Jt.shake256,26:Jt.keccak224,27:Jt.keccak256,28:Jt.keccak384,29:Jt.keccak512,34:Jt.murmur3128,35:Jt.murmur332,86:Jt.dblSha2256};Jt.addBlake(wn.functions);wn.validate=async(t,e)=>{const r=await wn(t,Mc.decode(e).name);return u9(e,r)};var f9=wn,c9=P2;function P2(t,e){this.value=t,this.next=e}P2.prototype.contains=function(t){for(var e=this;e;){if(e.value===t)return!0;e=e.next}return!1};var l9=c9,h9=d9;function d9(t){if(!(t instanceof Object))throw new TypeError('"obj" must be an object (or inherit from it)');return M2(t)}function M2(t,e){e=new l9(t,e);for(var r in t){var n=t[r];if(n instanceof Object&&(e.contains(n)||M2(n,e)))return!0}return!1}const Dd=Gg,Bd=Ug,p9=f9,nu=Qi,v9=h9,m9=$f,b9=Gb,k2=42;function y9(t){return typeof t=="string"?t=new nu(t).bytes:nu.isCID(t)&&(t=t.bytes),new Dd.Tagged(k2,m9([b9("00","base16"),t],1+t.length))}function g9(t){let e;try{e=v9(t)}catch{e=!1}if(e)throw new Error("The object passed has circular references");function r(n){if(!n||n instanceof Uint8Array||typeof n=="string")return n;if(Array.isArray(n))return n.map(r);if(nu.isCID(n))return y9(n);const i=Object.keys(n);if(i.length>0){const o={};return i.forEach(a=>{typeof n[a]=="object"?o[a]=r(n[a]):o[a]=n[a]}),o}else return n}return r(t)}const T2=Bd.DAG_CBOR,N2=Bd.SHA2_256,O2={[k2]:t=>(t=t.slice(1),new nu(t))},$2=64*1024;let Ya=$2;const R2=64*1024*1024;let Ud=R2,C2=null;function Fd(t){let e=O2;t?(typeof t.size=="number"&&(Ya=t.size),typeof t.maxSize=="number"&&(Ud=t.maxSize),t.tags&&(e=Object.assign({},O2,t&&t.tags))):(Ya=$2,Ud=R2);const r={tags:e,size:Ya};C2=new Dd.Decoder(r),Ya=r.size}Fd();function w9(t){const e=g9(t);return Dd.encode(e)}function _9(t){if(t.length>Ya&&t.length<=Ud&&Fd({size:t.length}),t.length>Ya)throw new Error("Data is too large to deserialize with current decoder");const e=C2.decodeAll(t);if(e.length!==1)throw new Error("Extraneous CBOR data found beyond initial top-level object");return e[0]}async function x9(t,e){const n=Object.assign({cidVersion:1,hashAlg:N2},e),i=await p9(t,n.hashAlg),o=Bd.getNameFromCode(T2);return new nu(n.cidVersion,o,i)}var L2={codec:T2,defaultHashAlg:N2,configureDecoder:Fd,serialize:w9,deserialize:_9,cid:x9},jd={};const D2=Qi,B2=L2;jd.resolve=(t,e)=>{let r=B2.deserialize(t);const n=e.split("/").filter(Boolean);for(;n.length;){const i=n.shift();if(r[i]===void 0)throw new Error(`Object has no property '${i}'`);if(r=r[i],D2.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};const U2=function*(t,e){if(!(t instanceof Uint8Array||D2.isCID(t)||typeof t=="string"||t===null))for(const r of Object.keys(t)){const n=e===void 0?r:e+"/"+r;yield n,yield*U2(t[r],n)}};jd.tree=function*(t){const e=B2.deserialize(t);yield*U2(e)};(function(t){t.util=L2,t.resolver=jd,t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg})(gd);var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.DEFAULT_BASE=Lo.STREAMID_CODEC=void 0;Lo.STREAMID_CODEC=206;Lo.DEFAULT_BASE="base36";var Do={},F2=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Do,"__esModule",{value:!0});Do.readCid=Do.readVarint=void 0;const E9=F2(Qi),j2=F2(Ro);function iu(t){const e=j2.default.decode(t),r=j2.default.decode.bytes,n=t.slice(r);return[e,n,r]}Do.readVarint=iu;function S9(t){return t===0||t===1}function A9(t){const[e,r]=iu(t);if(!S9(e))throw new Error(`Unknown CID version ${e}`);const[n,i]=iu(r),[,o,a]=iu(i),[s,,u]=iu(o),f=i.slice(0,a+u+s),c=i.slice(a+u+s);return[new E9.default(e,n,f),c]}Do.readCid=A9;function I9(t){return(e,r,n)=>{if(n.value!=null)n.value=kc(n.value,t);else if(n.get!=null)n.get=kc(n.get,t);else throw"Only put a Memoize() decorator on a method or get accessor."}}function P9(t,e){return(r,n,i)=>{if(i.value!=null)i.value=kc(i.value,e,t);else if(i.get!=null)i.get=kc(i.get,e,t);else throw"Only put a Memoize() decorator on a method or get accessor."}}let M9=0;function kc(t,e,r=0){const n=++M9;return function(...i){const o=`__memoized_value_${n}`,a=`__memoized_map_${n}`;let s;if(e||i.length>0||r>0){this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let u=this[a],f;e===!0?f=i.map(b=>b.toString()).join("!"):e?f=e.apply(this,i):f=i[0];const c=`${f}__timestamp`;let h=!1;if(r>0)if(!u.has(c))h=!0;else{let b=u.get(c);h=Date.now()-b>r}u.has(f)&&!h?s=u.get(f):(s=t.apply(this,i),u.set(f,s),r>0&&u.set(c,Date.now()))}else this.hasOwnProperty(o)?s=this[o]:(s=t.apply(this,i),Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:s}));return s}}var k9=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Memoize:I9,MemoizeExpiring:P9}),z2=$t(k9),Xa={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.StreamType=void 0;const q2={tile:0,"caip10-link":1};function T9(t){const e=q2[t];if(typeof e!="undefined")return e;throw new Error(`No stream type registered for name ${t}`)}function N9(t){const e=Object.entries(q2).find(([,r])=>r===t);if(e)return e[0];throw new Error(`No stream type registered for index ${t}`)}class zd{}Za.StreamType=zd;zd.nameByCode=N9;zd.codeByName=T9;var Qa=te&&te.__decorate||function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},Ur=te&&te.__metadata||function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},qd=te&&te.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},jn=te&&te.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ou=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Bo,no,au;Object.defineProperty(Xa,"__esModule",{value:!0});Xa.CommitID=void 0;const Gd=ou(Qi),G2=ou($o.exports),H2=Za,W2=ou(Ro),O9=ou($f),$9=ou(l0),es=z2,Hd=Lo,Tc=Do,Wd=Oo;function K2(t){const[e,r]=Tc.readVarint(t);if(e!==Hd.STREAMID_CODEC)throw new Error("fromBytes: invalid streamid, does not include streamid codec");const[n,i]=Tc.readVarint(r),[o,a]=Tc.readCid(i);if(a.length===0)throw new Error("No commit information provided");if(a.length===1)return new en(n,o,a[0]);{const[s]=Tc.readCid(a);return new en(n,o,s)}}function R9(t){try{return new Gd.default(t)}catch{return}}function C9(t,e=null){if(!e)return null;const r=R9(e);if(r)return t.equals(r)?null:r;if(String(e)==="0")return null;throw new Error("Cannot specify commit as a number except to request commit 0 (the genesis commit)")}function L9(t){const e=t.replace("ceramic://","").replace("/ceramic/","");if(e.includes("commit")){const r=e.split("?")[1].split("=")[1],n=e.split("?")[0];return Wd.StreamID.fromString(n).atCommit(r)}else return K2(G2.default.decode(e))}const V2=Symbol.for("@ceramicnetwork/streamid/CommitID");class en{constructor(e,r,n=null){if(this._tag=V2,Bo.set(this,void 0),no.set(this,void 0),au.set(this,void 0),!e&&e!==0)throw new Error("constructor: type required");if(!r)throw new Error("constructor: cid required");qd(this,Bo,typeof e=="string"?H2.StreamType.codeByName(e):e,"f"),qd(this,no,typeof r=="string"?new Gd.default(r):r,"f"),qd(this,au,C9(jn(this,no,"f"),n),"f")}static isInstance(e){return typeof e=="object"&&"_tag"in e&&e._tag===V2}get baseID(){return new Wd.StreamID(jn(this,Bo,"f"),jn(this,no,"f"))}get type(){return jn(this,Bo,"f")}get typeName(){return H2.StreamType.nameByCode(jn(this,Bo,"f"))}get cid(){return jn(this,no,"f")}get commit(){return jn(this,au,"f")||jn(this,no,"f")}get bytes(){var e;const r=W2.default.encode(Hd.STREAMID_CODEC),n=W2.default.encode(this.type),i=((e=jn(this,au,"f"))===null||e===void 0?void 0:e.bytes)||new Uint8Array([0]);return O9.default([r,n,this.cid.bytes,i])}atCommit(e){return new en(jn(this,Bo,"f"),jn(this,no,"f"),e)}equals(e){return this.type===e.type&&this.cid.equals(e.cid)&&this.commit.equals(e.commit)}toString(){return $9.default(G2.default.encode(Hd.DEFAULT_BASE,this.bytes))}toUrl(){return`ceramic://${this.toString()}`}[(Bo=new WeakMap,no=new WeakMap,au=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`CommitID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}}en.fromBytes=K2;en.fromString=L9;Qa([es.Memoize(),Ur("design:type",Wd.StreamID),Ur("design:paramtypes",[])],en.prototype,"baseID",null);Qa([es.Memoize(),Ur("design:type",String),Ur("design:paramtypes",[])],en.prototype,"typeName",null);Qa([es.Memoize(),Ur("design:type",Gd.default),Ur("design:paramtypes",[])],en.prototype,"commit",null);Qa([es.Memoize(),Ur("design:type",Uint8Array),Ur("design:paramtypes",[])],en.prototype,"bytes",null);Qa([es.Memoize(),Ur("design:type",Function),Ur("design:paramtypes",[]),Ur("design:returntype",String)],en.prototype,"toString",null);Qa([es.Memoize(),Ur("design:type",Function),Ur("design:paramtypes",[]),Ur("design:returntype",String)],en.prototype,"toUrl",null);Xa.CommitID=en;var su=te&&te.__decorate||function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},_n=te&&te.__metadata||function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},J2=te&&te.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Uo=te&&te.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ts=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Fo,rs;Object.defineProperty(Oo,"__esModule",{value:!0});Oo.StreamID=void 0;const D9=ts(Qi),Y2=ts($o.exports),X2=ts(Ro),Z2=ts(gd),B9=ts($f),U9=ts(l0),Kd=Lo,Vd=Do,uu=z2,F9=Xa,Q2=Za;function ew(t){const[e,r]=Vd.readVarint(t);if(e!==Kd.STREAMID_CODEC)throw new Error("fromBytes: invalid streamid, does not include streamid codec");const[n,i]=Vd.readVarint(r),[o,a]=Vd.readCid(i);if(a.length>0)throw new Error("Invalid StreamID: contains commit");return new Fr(n,o)}function j9(t){const e=t.replace("ceramic://","").replace("/ceramic/",""),r=e.includes("commit")?e.split("?")[0]:e,n=Y2.default.decode(r);return ew(n)}const tw=Symbol.for("@ceramicnetwork/streamid/StreamID");class Fr{constructor(e,r){if(this._tag=tw,Fo.set(this,void 0),rs.set(this,void 0),!(e||e===0))throw new Error("constructor: type required");if(!r)throw new Error("constructor: cid required");J2(this,Fo,typeof e=="string"?Q2.StreamType.codeByName(e):e,"f"),J2(this,rs,typeof r=="string"?new D9.default(r):r,"f")}static isInstance(e){return typeof e=="object"&&"_tag"in e&&e._tag===tw}static async fromGenesis(e,r){const n=await Z2.default.util.cid(new Uint8Array(Z2.default.util.serialize(r)));return new Fr(e,n)}get type(){return Uo(this,Fo,"f")}get typeName(){return Q2.StreamType.nameByCode(Uo(this,Fo,"f"))}get cid(){return Uo(this,rs,"f")}get bytes(){const e=X2.default.encode(Kd.STREAMID_CODEC),r=X2.default.encode(this.type);return B9.default([e,r,this.cid.bytes])}get baseID(){return new Fr(Uo(this,Fo,"f"),Uo(this,rs,"f"))}atCommit(e){return new F9.CommitID(Uo(this,Fo,"f"),Uo(this,rs,"f"),e)}equals(e){return Fr.isInstance(e)?this.type===e.type&&this.cid.equals(e.cid):!1}toString(){return U9.default(Y2.default.encode(Kd.DEFAULT_BASE,this.bytes))}toUrl(){return`ceramic://${this.toString()}`}[(Fo=new WeakMap,rs=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`StreamID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}}Fr.fromBytes=ew;Fr.fromString=j9;su([uu.Memoize(),_n("design:type",String),_n("design:paramtypes",[])],Fr.prototype,"typeName",null);su([uu.Memoize(),_n("design:type",Uint8Array),_n("design:paramtypes",[])],Fr.prototype,"bytes",null);su([uu.Memoize(),_n("design:type",Fr),_n("design:paramtypes",[])],Fr.prototype,"baseID",null);su([uu.Memoize(),_n("design:type",Function),_n("design:paramtypes",[]),_n("design:returntype",String)],Fr.prototype,"toString",null);su([uu.Memoize(),_n("design:type",Function),_n("design:paramtypes",[]),_n("design:returntype",String)],Fr.prototype,"toUrl",null);Oo.StreamID=Fr;var rw={};(function(t){var e=te&&te.__createBinding||(Object.create?function(f,c,h,b){b===void 0&&(b=h),Object.defineProperty(f,b,{enumerable:!0,get:function(){return c[h]}})}:function(f,c,h,b){b===void 0&&(b=h),f[b]=c[h]}),r=te&&te.__setModuleDefault||(Object.create?function(f,c){Object.defineProperty(f,"default",{enumerable:!0,value:c})}:function(f,c){f.default=c}),n=te&&te.__importStar||function(f){if(f&&f.__esModule)return f;var c={};if(f!=null)for(var h in f)h!=="default"&&Object.prototype.hasOwnProperty.call(f,h)&&e(c,f,h);return r(c,f),c};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamRef=void 0;const i=Oo,o=Xa,a=n(wr);function s(f){try{return f()}catch{return null}}function u(f){throw new Error(f)}(function(f){function c(h){if(i.StreamID.isInstance(h))return h;if(o.CommitID.isInstance(h))return h;if(h instanceof Uint8Array)return s(()=>o.CommitID.fromBytes(h))||s(()=>i.StreamID.fromBytes(h))||u(`Can not build CommitID or StreamID from bytes ${a.toString(h,"base36")}`);if(typeof h=="string")return s(()=>o.CommitID.fromString(h))||s(()=>i.StreamID.fromString(h))||u(`Can not build CommitID or StreamID from string ${h}`);throw new Error("Can not build CommitID or StreamID")}f.from=c})(t.StreamRef||(t.StreamRef={}))})(rw);(function(t){var e=te&&te.__createBinding||(Object.create?function(s,u,f,c){c===void 0&&(c=f),Object.defineProperty(s,c,{enumerable:!0,get:function(){return u[f]}})}:function(s,u,f,c){c===void 0&&(c=f),s[c]=u[f]}),r=te&&te.__exportStar||function(s,u){for(var f in s)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&e(u,s,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamRef=t.StreamID=t.CommitID=void 0;const n=Oo;var i=Xa;Object.defineProperty(t,"CommitID",{enumerable:!0,get:function(){return i.CommitID}});var o=Oo;Object.defineProperty(t,"StreamID",{enumerable:!0,get:function(){return o.StreamID}});var a=rw;Object.defineProperty(t,"StreamRef",{enumerable:!0,get:function(){return a.StreamRef}}),r(Za,t),t.default=n.StreamID})(fi);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jd=function(t,e){return Jd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Jd(t,e)};function Bt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jd(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function z9(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})}function Yd(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(f){return function(c){return u([f,c])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(c){f=[6,c],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function jr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function Et(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}function ns(t){return this instanceof ns?(this.v=t,this):new ns(t)}function q9(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(b){n[b]&&(i[b]=function(w){return new Promise(function(A,_){o.push([b,w,A,_])>1||s(b,w)})})}function s(b,w){try{u(n[b](w))}catch(A){h(o[0][3],A)}}function u(b){b.value instanceof ns?Promise.resolve(b.value.v).then(f,c):h(o[0][2],b)}function f(b){s("next",b)}function c(b){s("throw",b)}function h(b,w){b(w),o.shift(),o.length&&s(o[0][0],o[0][1])}}function G9(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof jr=="function"?jr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(s,u){a=t[o](a),i(s,u,a.done,a.value)})}}function i(o,a,s,u){Promise.resolve(u).then(function(f){o({value:f,done:s})},a)}}function We(t){return typeof t=="function"}function jo(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Nc=jo(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function $i(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var Tr=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=jr(a),u=s.next();!u.done;u=s.next()){var f=u.value;f.remove(this)}}catch(_){e={error:_}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}else a.remove(this);var c=this.initialTeardown;if(We(c))try{c()}catch(_){o=_ instanceof Nc?_.errors:[_]}var h=this._teardowns;if(h){this._teardowns=null;try{for(var b=jr(h),w=b.next();!w.done;w=b.next()){var A=w.value;try{ow(A)}catch(_){o=o!=null?o:[],_ instanceof Nc?o=Et(Et([],xt(o)),xt(_.errors)):o.push(_)}}}catch(_){n={error:_}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}}if(o)throw new Nc(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)ow(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=(r=this._teardowns)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&$i(r,e)},t.prototype.remove=function(e){var r=this._teardowns;r&&$i(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),nw=Tr.EMPTY;function iw(t){return t instanceof Tr||t&&"closed"in t&&We(t.remove)&&We(t.add)&&We(t.unsubscribe)}function ow(t){We(t)?t():t.unsubscribe()}var io={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Oc={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Oc.delegate;return((r==null?void 0:r.setTimeout)||setTimeout).apply(void 0,Et([],xt(t)))},clearTimeout:function(t){var e=Oc.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function aw(t){Oc.setTimeout(function(){var e=io.onUnhandledError;if(e)e(t);else throw t})}function Ct(){}var H9=function(){return Xd("C",void 0,void 0)}();function W9(t){return Xd("E",void 0,t)}function K9(t){return Xd("N",t,void 0)}function Xd(t,e,r){return{kind:t,value:e,error:r}}var zo=null;function $c(t){if(io.useDeprecatedSynchronousErrorHandling){var e=!zo;if(e&&(zo={errorThrown:!1,error:null}),t(),e){var r=zo,n=r.errorThrown,i=r.error;if(zo=null,n)throw i}}else t()}function V9(t){io.useDeprecatedSynchronousErrorHandling&&zo&&(zo.errorThrown=!0,zo.error=t)}var Rc=function(t){Bt(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,iw(r)&&r.add(n)):n.destination=J9,n}return e.create=function(r,n,i){return new Cc(r,n,i)},e.prototype.next=function(r){this.isStopped?Qd(K9(r),this):this._next(r)},e.prototype.error=function(r){this.isStopped?Qd(W9(r),this):(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped?Qd(H9,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Tr),Cc=function(t){Bt(e,t);function e(r,n,i){var o=t.call(this)||this,a;if(We(r))a=r;else if(r){a=r.next,n=r.error,i=r.complete;var s;o&&io.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=function(){return o.unsubscribe()}):s=r,a=a==null?void 0:a.bind(s),n=n==null?void 0:n.bind(s),i=i==null?void 0:i.bind(s)}return o.destination={next:a?Zd(a):Ct,error:Zd(n!=null?n:sw),complete:i?Zd(i):Ct},o}return e}(Rc);function Zd(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{t.apply(void 0,Et([],xt(r)))}catch(i){io.useDeprecatedSynchronousErrorHandling?V9(i):aw(i)}}}function sw(t){throw t}function Qd(t,e){var r=io.onStoppedNotification;r&&Oc.setTimeout(function(){return r(t,e)})}var J9={closed:!0,next:Ct,error:sw,complete:Ct},Lc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function dr(t){return t}function ep(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return uw(t)}function uw(t){return t.length===0?dr:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var pt=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=X9(e)?e:new Cc(e,r,n);return $c(function(){var a=i,s=a.operator,u=a.source;o.add(s?s.call(o,u):u?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=fw(r),new r(function(i,o){var a;a=n.subscribe(function(s){try{e(s)}catch(u){o(u),a==null||a.unsubscribe()}},o,i)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Lc]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return uw(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=fw(e),new e(function(n,i){var o;r.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function fw(t){var e;return(e=t!=null?t:io.Promise)!==null&&e!==void 0?e:Promise}function Y9(t){return t&&We(t.next)&&We(t.error)&&We(t.complete)}function X9(t){return t&&t instanceof Rc||Y9(t)&&iw(t)}function cw(t){return We(t==null?void 0:t.lift)}function ge(t){return function(e){if(cw(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}var ve=function(t){Bt(e,t);function e(r,n,i,o,a){var s=t.call(this,r)||this;return s.onFinalize=a,s._next=n?function(u){try{n(u)}catch(f){r.error(f)}}:t.prototype._next,s._error=o?function(u){try{o(u)}catch(f){r.error(f)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=i?function(){try{i()}catch(u){r.error(u)}finally{this.unsubscribe()}}:t.prototype._complete,s}return e.prototype.unsubscribe=function(){var r,n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))},e}(Rc);function tp(){return ge(function(t,e){var r=null;t._refCount++;var n=new ve(e,void 0,void 0,void 0,function(){if(!t||t._refCount<=0||0<--t._refCount){r=null;return}var i=t._connection,o=r;r=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(n),n.closed||(r=t.connect())})}var Dc=function(t){Bt(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,cw(r)&&(i.lift=r.lift),i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var r=this._connection;this._subject=this._connection=null,r==null||r.unsubscribe()},e.prototype.connect=function(){var r=this,n=this._connection;if(!n){n=this._connection=new Tr;var i=this.getSubject();n.add(this.source.subscribe(new ve(i,void 0,function(){r._teardown(),i.complete()},function(o){r._teardown(),i.error(o)},function(){return r._teardown()}))),n.closed&&(this._connection=null,n=Tr.EMPTY)}return n},e.prototype.refCount=function(){return tp()(this)},e}(pt),lw={now:function(){return(lw.delegate||performance).now()},delegate:void 0},is={schedule:function(t){var e=requestAnimationFrame,r=cancelAnimationFrame,n=is.delegate;n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame);var i=e(function(o){r=void 0,t(o)});return new Tr(function(){return r==null?void 0:r(i)})},requestAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=is.delegate;return((r==null?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,Et([],xt(t)))},cancelAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=is.delegate;return((r==null?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,Et([],xt(t)))},delegate:void 0};function Z9(t){return t?hw(t):Q9}function hw(t){var e=is.schedule;return new pt(function(r){var n=new Tr,i=t||lw,o=i.now(),a=function(s){var u=i.now();r.next({timestamp:t?u:s,elapsed:u-o}),r.closed||n.add(e(a))};return n.add(e(a)),n})}var Q9=hw(),dw=jo(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),qt=function(t){Bt(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new pw(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new dw},e.prototype.next=function(r){var n=this;$c(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){var a=n.observers.slice();try{for(var s=jr(a),u=s.next();!u.done;u=s.next()){var f=u.value;f.next(r)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(r){var n=this;$c(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},e.prototype.complete=function(){var r=this;$c(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,i=n.hasError,o=n.isStopped,a=n.observers;return i||o?nw:(a.push(r),new Tr(function(){return $i(a,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,a=n.isStopped;i?r.error(o):a&&r.complete()},e.prototype.asObservable=function(){var r=new pt;return r.source=this,r},e.create=function(r,n){return new pw(r,n)},e}(pt),pw=function(t){Bt(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},e.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:nw},e}(qt),vw=function(t){Bt(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){var r=this,n=r.hasError,i=r.thrownError,o=r._value;if(n)throw i;return this._throwIfClosed(),o},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(qt),Bc={now:function(){return(Bc.delegate||Date).now()},delegate:void 0},rp=function(t){Bt(e,t);function e(r,n,i){r===void 0&&(r=1/0),n===void 0&&(n=1/0),i===void 0&&(i=Bc);var o=t.call(this)||this;return o._bufferSize=r,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,r),o._windowTime=Math.max(1,n),o}return e.prototype.next=function(r){var n=this,i=n.isStopped,o=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,u=n._windowTime;i||(o.push(r),!a&&o.push(s.now()+u)),this._trimBuffer(),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),i=this,o=i._infiniteTimeWindow,a=i._buffer,s=a.slice(),u=0;u<s.length&&!r.closed;u+=o?1:2)r.next(s[u]);return this._checkFinalizedStatuses(r),n},e.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,i=r._timestampProvider,o=r._buffer,a=r._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<o.length&&o.splice(0,o.length-s),!a){for(var u=i.now(),f=0,c=1;c<o.length&&o[c]<=u;c+=2)f=c;f&&o.splice(0,f+1)}},e}(qt),np=function(t){Bt(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._value=null,r._hasValue=!1,r._isComplete=!1,r}return e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n._hasValue,a=n._value,s=n.thrownError,u=n.isStopped,f=n._isComplete;i?r.error(s):(u||f)&&(o&&r.next(a),r.complete())},e.prototype.next=function(r){this.isStopped||(this._value=r,this._hasValue=!0)},e.prototype.complete=function(){var r=this,n=r._hasValue,i=r._value,o=r._isComplete;o||(this._isComplete=!0,n&&t.prototype.next.call(this,i),t.prototype.complete.call(this))},e}(qt),eC=function(t){Bt(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(Tr),Uc={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Uc.delegate;return((r==null?void 0:r.setInterval)||setInterval).apply(void 0,Et([],xt(t)))},clearInterval:function(t){var e=Uc.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},fu=function(t){Bt(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),Uc.setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;Uc.clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,$i(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(eC),tC=1,ip,op={};function mw(t){return t in op?(delete op[t],!0):!1}var bw={setImmediate:function(t){var e=tC++;return op[e]=!0,ip||(ip=Promise.resolve()),ip.then(function(){return mw(e)&&t()}),e},clearImmediate:function(t){mw(t)}},rC=bw.setImmediate,nC=bw.clearImmediate,Fc={setImmediate:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Fc.delegate;return((r==null?void 0:r.setImmediate)||rC).apply(void 0,Et([],xt(t)))},clearImmediate:function(t){var e=Fc.delegate;return((e==null?void 0:e.clearImmediate)||nC)(t)},delegate:void 0},iC=function(t){Bt(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=Fc.setImmediate(r.flush.bind(r,void 0))))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(Fc.clearImmediate(n),r._scheduled=void 0)},e}(fu),ap=function(){function t(e,r){r===void 0&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(n,r)},t.now=Bc.now,t}(),cu=function(t){Bt(e,t);function e(r,n){n===void 0&&(n=ap.now);var i=t.call(this,r,n)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return e.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(ap),oC=function(t){Bt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this._active=!0,this._scheduled=void 0;var n=this.actions,i,o=-1;r=r||n.shift();var a=n.length;do if(i=r.execute(r.state,r.delay))break;while(++o<a&&(r=n.shift()));if(this._active=!1,i){for(;++o<a&&(r=n.shift());)r.unsubscribe();throw i}},e}(cu),yw=new oC(iC),aC=yw,vi=new cu(fu),lu=vi,sC=function(t){Bt(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(fu),uC=function(t){Bt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(cu),gw=new uC(sC),fC=gw,cC=function(t){Bt(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=is.requestAnimationFrame(function(){return r.flush(void 0)})))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(is.cancelAnimationFrame(n),r._scheduled=void 0)},e}(fu),lC=function(t){Bt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this._active=!0,this._scheduled=void 0;var n=this.actions,i,o=-1;r=r||n.shift();var a=n.length;do if(i=r.execute(r.state,r.delay))break;while(++o<a&&(r=n.shift()));if(this._active=!1,i){for(;++o<a&&(r=n.shift());)r.unsubscribe();throw i}},e}(cu),ww=new lC(cC),hC=ww,dC=function(t){Bt(e,t);function e(r,n){r===void 0&&(r=_w),n===void 0&&(n=1/0);var i=t.call(this,r,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return e.prototype.flush=function(){for(var r=this,n=r.actions,i=r.maxFrames,o,a;(a=n[0])&&a.delay<=i&&(n.shift(),this.frame=a.delay,!(o=a.execute(a.state,a.delay))););if(o){for(;a=n.shift();)a.unsubscribe();throw o}},e.frameTimeFactor=10,e}(cu),_w=function(t){Bt(e,t);function e(r,n,i){i===void 0&&(i=r.index+=1);var o=t.call(this,r,n)||this;return o.scheduler=r,o.work=n,o.index=i,o.active=!0,o.index=r.index=i,o}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return t.prototype.schedule.call(this,r,n);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(r,n)}else return Tr.EMPTY},e.prototype.requestAsyncId=function(r,n,i){i===void 0&&(i=0),this.delay=r.frame+i;var o=r.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(r,n,i){},e.prototype._execute=function(r,n){if(this.active===!0)return t.prototype._execute.call(this,r,n)},e.sortActions=function(r,n){return r.delay===n.delay?r.index===n.index?0:r.index>n.index?1:-1:r.delay>n.delay?1:-1},e}(fu),zn=new pt(function(t){return t.complete()});function pC(t){return t?vC(t):zn}function vC(t){return new pt(function(e){return t.schedule(function(){return e.complete()})})}function jc(t){return t&&We(t.schedule)}function sp(t){return t[t.length-1]}function hu(t){return We(sp(t))?t.pop():void 0}function Ri(t){return jc(sp(t))?t.pop():void 0}function xw(t,e){return typeof sp(t)=="number"?t.pop():e}var up=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Ew(t){return We(t==null?void 0:t.then)}function Sw(t){return We(t[Lc])}function Aw(t){return Symbol.asyncIterator&&We(t==null?void 0:t[Symbol.asyncIterator])}function Iw(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function mC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pw=mC();function Mw(t){return We(t==null?void 0:t[Pw])}function kw(t){return q9(this,arguments,function(){var r,n,i,o;return Yd(this,function(a){switch(a.label){case 0:r=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,ns(r.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,ns(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,ns(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Tw(t){return We(t==null?void 0:t.getReader)}function lt(t){if(t instanceof pt)return t;if(t!=null){if(Sw(t))return bC(t);if(up(t))return yC(t);if(Ew(t))return gC(t);if(Aw(t))return Nw(t);if(Mw(t))return wC(t);if(Tw(t))return _C(t)}throw Iw(t)}function bC(t){return new pt(function(e){var r=t[Lc]();if(We(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yC(t){return new pt(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function gC(t){return new pt(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,aw)})}function wC(t){return new pt(function(e){var r,n;try{for(var i=jr(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()})}function Nw(t){return new pt(function(e){xC(t,e).catch(function(r){return e.error(r)})})}function _C(t){return Nw(kw(t))}function xC(t,e){var r,n,i,o;return z9(this,void 0,void 0,function(){var a,s;return Yd(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=G9(t),u.label=1;case 1:return[4,r.next()];case 2:if(n=u.sent(),!!n.done)return[3,4];if(a=n.value,e.next(a),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),i={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function zr(t,e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=e.schedule(function(){r(),i?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(o),!i)return o}function du(t,e){return e===void 0&&(e=0),ge(function(r,n){r.subscribe(new ve(n,function(i){return zr(n,t,function(){return n.next(i)},e)},function(){return zr(n,t,function(){return n.complete()},e)},function(i){return zr(n,t,function(){return n.error(i)},e)}))})}function pu(t,e){return e===void 0&&(e=0),ge(function(r,n){n.add(t.schedule(function(){return r.subscribe(n)},e))})}function EC(t,e){return lt(t).pipe(pu(e),du(e))}function SC(t,e){return lt(t).pipe(pu(e),du(e))}function AC(t,e){return new pt(function(r){var n=0;return e.schedule(function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())})})}function Ow(t,e){return new pt(function(r){var n;return zr(r,e,function(){n=t[Pw](),zr(r,e,function(){var i,o,a;try{i=n.next(),o=i.value,a=i.done}catch(s){r.error(s);return}a?r.complete():r.next(o)},0,!0)}),function(){return We(n==null?void 0:n.return)&&n.return()}})}function $w(t,e){if(!t)throw new Error("Iterable cannot be null");return new pt(function(r){zr(r,e,function(){var n=t[Symbol.asyncIterator]();zr(r,e,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function IC(t,e){return $w(kw(t),e)}function Rw(t,e){if(t!=null){if(Sw(t))return EC(t,e);if(up(t))return AC(t,e);if(Ew(t))return SC(t,e);if(Aw(t))return $w(t,e);if(Mw(t))return Ow(t,e);if(Tw(t))return IC(t,e)}throw Iw(t)}function qn(t,e){return e?Rw(t,e):lt(t)}function fp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ri(t);return qn(t,r)}function Cw(t,e){var r=We(t)?t:function(){return t},n=function(i){return i.error(r())};return new pt(e?function(i){return e.schedule(n,0,i)}:n)}var cp;(function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"})(cp||(cp={}));var zc=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){return Lw(this,e)},t.prototype.do=function(e,r,n){var i=this,o=i.kind,a=i.value,s=i.error;return o==="N"?e==null?void 0:e(a):o==="E"?r==null?void 0:r(s):n==null?void 0:n()},t.prototype.accept=function(e,r,n){var i;return We((i=e)===null||i===void 0?void 0:i.next)?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this,r=e.kind,n=e.value,i=e.error,o=r==="N"?fp(n):r==="E"?Cw(function(){return i}):r==="C"?zn:0;if(!o)throw new TypeError("Unexpected notification kind "+r);return o},t.createNext=function(e){return new t("N",e)},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t}();function Lw(t,e){var r,n,i,o=t,a=o.kind,s=o.value,u=o.error;if(typeof a!="string")throw new TypeError('Invalid notification, missing "kind"');a==="N"?(r=e.next)===null||r===void 0||r.call(e,s):a==="E"?(n=e.error)===null||n===void 0||n.call(e,u):(i=e.complete)===null||i===void 0||i.call(e)}function PC(t){return!!t&&(t instanceof pt||We(t.lift)&&We(t.subscribe))}var qo=jo(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function MC(t,e){var r=typeof e=="object";return new Promise(function(n,i){var o=!1,a;t.subscribe({next:function(s){a=s,o=!0},error:i,complete:function(){o?n(a):r?n(e.defaultValue):i(new qo)}})})}function kC(t,e){var r=typeof e=="object";return new Promise(function(n,i){var o=new Cc({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){r?n(e.defaultValue):i(new qo)}});t.subscribe(o)})}var lp=jo(function(t){return function(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),Dw=jo(function(t){return function(r){t(this),this.name="NotFoundError",this.message=r}}),Bw=jo(function(t){return function(r){t(this),this.name="SequenceError",this.message=r}});function hp(t){return t instanceof Date&&!isNaN(t)}var Uw=jo(function(t){return function(r){r===void 0&&(r=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}});function dp(t,e){var r=hp(t)?{first:t}:typeof t=="number"?{each:t}:t,n=r.first,i=r.each,o=r.with,a=o===void 0?TC:o,s=r.scheduler,u=s===void 0?e!=null?e:vi:s,f=r.meta,c=f===void 0?null:f;if(n==null&&i==null)throw new TypeError("No timeout provided.");return ge(function(h,b){var w,A,_=null,T=0,P=function(F){A=zr(b,u,function(){try{w.unsubscribe(),lt(a({meta:c,lastValue:_,seen:T})).subscribe(b)}catch(j){b.error(j)}},F)};w=h.subscribe(new ve(b,function(F){A==null||A.unsubscribe(),T++,b.next(_=F),i>0&&P(i)},void 0,void 0,function(){(A==null?void 0:A.closed)||A==null||A.unsubscribe(),_=null})),P(n!=null?typeof n=="number"?n:+n-u.now():i)})}function TC(t){throw new Uw(t)}function Ci(t,e){return ge(function(r,n){var i=0;r.subscribe(new ve(n,function(o){n.next(t.call(e,o,i++))}))})}var NC=Array.isArray;function OC(t,e){return NC(e)?t.apply(void 0,Et([],xt(e))):t(e)}function Go(t){return Ci(function(e){return OC(t,e)})}function qc(t,e,r,n){if(r)if(jc(r))n=r;else return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return qc(t,e,n).apply(this,i).pipe(Go(r))};return n?function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return qc(t,e).apply(this,i).pipe(pu(n),du(n))}:function(){for(var i=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=new np,u=!0;return new pt(function(f){var c=s.subscribe(f);if(u){u=!1;var h=!1,b=!1;e.apply(i,Et(Et([],xt(o)),[function(){for(var w=[],A=0;A<arguments.length;A++)w[A]=arguments[A];if(t){var _=w.shift();if(_!=null){s.error(_);return}}s.next(1<w.length?w:w[0]),b=!0,h&&s.complete()}])),b&&s.complete(),h=!0}return c})}}function $C(t,e,r){return qc(!1,t,e,r)}function RC(t,e,r){return qc(!0,t,e,r)}var CC=Array.isArray,LC=Object.getPrototypeOf,DC=Object.prototype,BC=Object.keys;function Fw(t){if(t.length===1){var e=t[0];if(CC(e))return{args:e,keys:null};if(UC(e)){var r=BC(e);return{args:r.map(function(n){return e[n]}),keys:r}}}return{args:t,keys:null}}function UC(t){return t&&typeof t=="object"&&LC(t)===DC}function jw(t,e){return t.reduce(function(r,n,i){return r[n]=e[i],r},{})}function zw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ri(t),n=hu(t),i=Fw(t),o=i.args,a=i.keys;if(o.length===0)return qn([],r);var s=new pt(qw(o,r,a?function(u){return jw(a,u)}:dr));return n?s.pipe(Go(n)):s}function qw(t,e,r){return r===void 0&&(r=dr),function(n){Gw(e,function(){for(var i=t.length,o=new Array(i),a=i,s=i,u=function(c){Gw(e,function(){var h=qn(t[c],e),b=!1;h.subscribe(new ve(n,function(w){o[c]=w,b||(b=!0,s--),s||n.next(r(o.slice()))},function(){--a||n.complete()}))},n)},f=0;f<i;f++)u(f)},n)}}function Gw(t,e,r){t?zr(r,t,e):e()}function pp(t,e,r,n,i,o,a,s){var u=[],f=0,c=0,h=!1,b=function(){h&&!u.length&&!f&&e.complete()},w=function(_){return f<n?A(_):u.push(_)},A=function(_){o&&e.next(_),f++;var T=!1;lt(r(_,c++)).subscribe(new ve(e,function(P){i==null||i(P),o?w(P):e.next(P)},function(){T=!0},void 0,function(){if(T)try{f--;for(var P=function(){var F=u.shift();a?zr(e,a,function(){return A(F)}):A(F)};u.length&&f<n;)P();b()}catch(F){e.error(F)}}))};return t.subscribe(new ve(e,w,function(){h=!0,b()})),function(){s==null||s()}}function xn(t,e,r){return r===void 0&&(r=1/0),We(e)?xn(function(n,i){return Ci(function(o,a){return e(n,o,i,a)})(lt(t(n,i)))},r):(typeof e=="number"&&(r=e),ge(function(n,i){return pp(n,i,t,r)}))}function vu(t){return t===void 0&&(t=1/0),xn(dr,t)}function Gc(){return vu(1)}function mu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gc()(qn(t,Ri(t)))}function bu(t){return new pt(function(e){lt(t()).subscribe(e)})}var FC={connector:function(){return new qt},resetOnDisconnect:!0};function jC(t,e){e===void 0&&(e=FC);var r=null,n=e.connector,i=e.resetOnDisconnect,o=i===void 0?!0:i,a=n(),s=new pt(function(u){return a.subscribe(u)});return s.connect=function(){return(!r||r.closed)&&(r=bu(function(){return t}).subscribe(a),o&&r.add(function(){return a=n()})),r},s}function zC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=hu(t),n=Fw(t),i=n.args,o=n.keys,a=new pt(function(s){var u=i.length;if(!u){s.complete();return}for(var f=new Array(u),c=u,h=u,b=function(A){var _=!1;lt(i[A]).subscribe(new ve(s,function(T){_||(_=!0,h--),f[A]=T},function(){return c--},void 0,function(){(!c||!_)&&(h||s.next(o?jw(o,f):f),s.complete())}))},w=0;w<u;w++)b(w)});return r?a.pipe(Go(r)):a}var qC=["addListener","removeListener"],GC=["addEventListener","removeEventListener"],HC=["on","off"];function vp(t,e,r,n){if(We(r)&&(n=r,r=void 0),n)return vp(t,e,r).pipe(Go(n));var i=xt(VC(t)?GC.map(function(s){return function(u){return t[s](e,u,r)}}):WC(t)?qC.map(Hw(t,e)):KC(t)?HC.map(Hw(t,e)):[],2),o=i[0],a=i[1];if(!o&&up(t))return xn(function(s){return vp(s,e,r)})(lt(t));if(!o)throw new TypeError("Invalid event target");return new pt(function(s){var u=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return s.next(1<f.length?f:f[0])};return o(u),function(){return a(u)}})}function Hw(t,e){return function(r){return function(n){return t[r](e,n)}}}function WC(t){return We(t.addListener)&&We(t.removeListener)}function KC(t){return We(t.on)&&We(t.off)}function VC(t){return We(t.addEventListener)&&We(t.removeEventListener)}function Ww(t,e,r){return r?Ww(t,e).pipe(Go(r)):new pt(function(n){var i=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},o=t(i);return We(e)?function(){return e(i,o)}:void 0})}function JC(t,e,r,n,i){var o,a,s,u;arguments.length===1?(o=t,u=o.initialState,e=o.condition,r=o.iterate,a=o.resultSelector,s=a===void 0?dr:a,i=o.scheduler):(u=t,!n||jc(n)?(s=dr,i=n):s=n);function f(){var c;return Yd(this,function(h){switch(h.label){case 0:c=u,h.label=1;case 1:return!e||e(c)?[4,s(c)]:[3,4];case 2:h.sent(),h.label=3;case 3:return c=r(c),[3,1];case 4:return[2]}})}return bu(i?function(){return Ow(f(),i)}:f)}function YC(t,e,r){return bu(function(){return t()?e:r})}function os(t,e,r){t===void 0&&(t=0),r===void 0&&(r=lu);var n=-1;return e!=null&&(jc(e)?r=e:n=e),new pt(function(i){var o=hp(t)?+t-r.now():t;o<0&&(o=0);var a=0;return r.schedule(function(){i.closed||(i.next(a++),0<=n?this.schedule(void 0,n):i.complete())},o)})}function Kw(t,e){return t===void 0&&(t=0),e===void 0&&(e=vi),t<0&&(t=0),os(t,t,e)}function XC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ri(t),n=xw(t,1/0),i=t;return i.length?i.length===1?lt(i[0]):vu(n)(qn(i,r)):zn}var Vw=new pt(Ct);function ZC(){return Vw}var QC=Array.isArray;function Ho(t){return t.length===1&&QC(t[0])?t[0]:t}function Jw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ho(t);return ge(function(n,i){var o=Et([n],xt(r)),a=function(){if(!i.closed)if(o.length>0){var s=void 0;try{s=lt(o.shift())}catch{a();return}var u=new ve(i,void 0,Ct,Ct);i.add(s.subscribe(u)),u.add(a)}else i.complete()};a()})}function eL(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jw(Ho(t))(zn)}function tL(t,e){return qn(Object.entries(t),e)}function Yw(t,e){return function(r,n){return!t.call(e,r,n)}}function mi(t,e){return ge(function(r,n){var i=0;r.subscribe(new ve(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}function rL(t,e,r){return[mi(e,r)(lt(t)),mi(Yw(e,r))(lt(t))]}function nL(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=Ho(t),t.length===1?lt(t[0]):new pt(Xw(t))}function Xw(t){return function(e){for(var r=[],n=function(o){r.push(lt(t[o]).subscribe(new ve(e,function(a){if(r){for(var s=0;s<r.length;s++)s!==o&&r[s].unsubscribe();r=null}e.next(a)})))},i=0;r&&!e.closed&&i<t.length;i++)n(i)}}function iL(t,e,r){if(e==null&&(e=t,t=0),e<=0)return zn;var n=e+t;return new pt(r?function(i){var o=t;return r.schedule(function(){o<n?(i.next(o++),this.schedule()):i.complete()})}:function(i){for(var o=t;o<n&&!i.closed;)i.next(o++);i.complete()})}function oL(t,e){return new pt(function(r){var n=t(),i=e(n),o=i?lt(i):zn;return o.subscribe(r),function(){n&&n.unsubscribe()}})}function mp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=hu(t),n=Ho(t);return n.length?new pt(function(i){var o=n.map(function(){return[]}),a=n.map(function(){return!1});i.add(function(){o=a=null});for(var s=function(f){lt(n[f]).subscribe(new ve(i,function(c){if(o[f].push(c),o.every(function(b){return b.length})){var h=o.map(function(b){return b.shift()});i.next(r?r.apply(void 0,Et([],xt(h))):h),o.some(function(b,w){return!b.length&&a[w]})&&i.complete()}},function(){a[f]=!0,!o[f].length&&i.complete()}))},u=0;!i.closed&&u<n.length;u++)s(u);return function(){o=a=null}}):zn}function bp(t){return ge(function(e,r){var n=!1,i=null,o=null,a=!1,s=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var f=i;i=null,r.next(f)}a&&r.complete()},u=function(){o=null,a&&r.complete()};e.subscribe(new ve(r,function(f){n=!0,i=f,o||lt(t(f)).subscribe(o=new ve(r,s,u))},function(){a=!0,(!n||!o||o.closed)&&r.complete()}))})}function Zw(t,e){return e===void 0&&(e=lu),bp(function(){return os(t,e)})}function Qw(t){return ge(function(e,r){var n=[];return e.subscribe(new ve(r,function(i){return n.push(i)},function(){r.next(n),r.complete()})),t.subscribe(new ve(r,function(){var i=n;n=[],r.next(i)},Ct)),function(){n=null}})}function e_(t,e){return e===void 0&&(e=null),e=e!=null?e:t,ge(function(r,n){var i=[],o=0;r.subscribe(new ve(n,function(a){var s,u,f,c,h=null;o++%e==0&&i.push([]);try{for(var b=jr(i),w=b.next();!w.done;w=b.next()){var A=w.value;A.push(a),t<=A.length&&(h=h!=null?h:[],h.push(A))}}catch(P){s={error:P}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}if(h)try{for(var _=jr(h),T=_.next();!T.done;T=_.next()){var A=T.value;$i(i,A),n.next(A)}}catch(P){f={error:P}}finally{try{T&&!T.done&&(c=_.return)&&c.call(_)}finally{if(f)throw f.error}}},function(){var a,s;try{for(var u=jr(i),f=u.next();!f.done;f=u.next()){var c=f.value;n.next(c)}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}n.complete()},void 0,function(){i=null}))})}function t_(t){for(var e,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(e=Ri(n))!==null&&e!==void 0?e:vi,a=(r=n[0])!==null&&r!==void 0?r:null,s=n[1]||1/0;return ge(function(u,f){var c=[],h=!1,b=function(_){var T=_.buffer,P=_.subs;P.unsubscribe(),$i(c,_),f.next(T),h&&w()},w=function(){if(c){var _=new Tr;f.add(_);var T=[],P={buffer:T,subs:_};c.push(P),zr(_,o,function(){return b(P)},t)}};a!==null&&a>=0?zr(f,o,w,a,!0):h=!0,w();var A=new ve(f,function(_){var T,P,F=c.slice();try{for(var j=jr(F),U=j.next();!U.done;U=j.next()){var L=U.value,G=L.buffer;G.push(_),s<=G.length&&b(L)}}catch(p){T={error:p}}finally{try{U&&!U.done&&(P=j.return)&&P.call(j)}finally{if(T)throw T.error}}},function(){for(;c==null?void 0:c.length;)f.next(c.shift().buffer);A==null||A.unsubscribe(),f.complete(),f.unsubscribe()},void 0,function(){return c=null});u.subscribe(A)})}function r_(t,e){return ge(function(r,n){var i=[];lt(t).subscribe(new ve(n,function(o){var a=[];i.push(a);var s=new Tr,u=function(){$i(i,a),n.next(a),s.unsubscribe()};s.add(lt(e(o)).subscribe(new ve(n,u,Ct)))},Ct)),r.subscribe(new ve(n,function(o){var a,s;try{for(var u=jr(i),f=u.next();!f.done;f=u.next()){var c=f.value;c.push(o)}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}},function(){for(;i.length>0;)n.next(i.shift());n.complete()}))})}function n_(t){return ge(function(e,r){var n=null,i=null,o=function(){i==null||i.unsubscribe();var a=n;n=[],a&&r.next(a),lt(t()).subscribe(i=new ve(r,o,Ct))};o(),e.subscribe(new ve(r,function(a){return n==null?void 0:n.push(a)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=i=null}))})}function yp(t){return ge(function(e,r){var n=null,i=!1,o;n=e.subscribe(new ve(r,void 0,void 0,function(a){o=lt(t(a,yp(t)(e))),n?(n.unsubscribe(),n=null,o.subscribe(r)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(r))})}function i_(t,e,r,n,i){return function(o,a){var s=r,u=e,f=0;o.subscribe(new ve(a,function(c){var h=f++;u=s?t(u,c,h):(s=!0,c),n&&a.next(u)},i&&function(){s&&a.next(u),a.complete()}))}}function as(t,e){return ge(i_(t,e,arguments.length>=2,!1,!0))}var aL=function(t,e){return t.push(e),t};function gp(){return ge(function(t,e){as(aL,[])(t).subscribe(e)})}function o_(t,e){return ep(gp(),xn(function(r){return t(r)}),e?Go(e):dr)}function wp(t){return o_(zw,t)}var a_=wp;function _p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=hu(t);return r?ep(_p.apply(void 0,Et([],xt(t))),Go(r)):ge(function(n,i){qw(Et([n],xt(Ho(t))))(i)})}function s_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _p.apply(void 0,Et([],xt(t)))}function Hc(t,e){return We(e)?xn(t,e,1):xn(t,1)}function u_(t,e){return We(e)?Hc(function(){return t},e):Hc(function(){return t})}function f_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ri(t);return ge(function(n,i){Gc()(qn(Et([n],xt(t)),r)).subscribe(i)})}function c_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f_.apply(void 0,Et([],xt(t)))}function sL(t){return new pt(function(e){return t.subscribe(e)})}var uL={connector:function(){return new qt}};function Wc(t,e){e===void 0&&(e=uL);var r=e.connector;return ge(function(n,i){var o=r();qn(t(sL(o))).subscribe(i),i.add(n.subscribe(o))})}function l_(t){return as(function(e,r,n){return!t||t(r,n)?e+1:e},0)}function h_(t){return ge(function(e,r){var n=!1,i=null,o=null,a=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var s=i;i=null,r.next(s)}};e.subscribe(new ve(r,function(s){o==null||o.unsubscribe(),n=!0,i=s,o=new ve(r,a,Ct),lt(t(s)).subscribe(o)},function(){a(),r.complete()},void 0,function(){i=o=null}))})}function d_(t,e){return e===void 0&&(e=vi),ge(function(r,n){var i=null,o=null,a=null,s=function(){if(i){i.unsubscribe(),i=null;var f=o;o=null,n.next(f)}};function u(){var f=a+t,c=e.now();if(c<f){i=this.schedule(void 0,f-c),n.add(i);return}s()}r.subscribe(new ve(n,function(f){o=f,a=e.now(),i||(i=e.schedule(u,t),n.add(i))},function(){s(),n.complete()},void 0,function(){o=i=null}))})}function yu(t){return ge(function(e,r){var n=!1;e.subscribe(new ve(r,function(i){n=!0,r.next(i)},function(){n||r.next(t),r.complete()}))})}function Wo(t){return t<=0?function(){return zn}:ge(function(e,r){var n=0;e.subscribe(new ve(r,function(i){++n<=t&&(r.next(i),t<=n&&r.complete())}))})}function xp(){return ge(function(t,e){t.subscribe(new ve(e,Ct))})}function Ep(t){return Ci(function(){return t})}function Kc(t,e){return e?function(r){return mu(e.pipe(Wo(1),xp()),r.pipe(Kc(t)))}:xn(function(r,n){return t(r,n).pipe(Wo(1),Ep(r))})}function p_(t,e){e===void 0&&(e=vi);var r=os(t,e);return Kc(function(){return r})}function v_(){return ge(function(t,e){t.subscribe(new ve(e,function(r){return Lw(r,e)}))})}function m_(t,e){return ge(function(r,n){var i=new Set;r.subscribe(new ve(n,function(o){var a=t?t(o):o;i.has(a)||(i.add(a),n.next(o))})),e==null||e.subscribe(new ve(n,function(){return i.clear()},Ct))})}function Sp(t,e){return e===void 0&&(e=dr),t=t!=null?t:fL,ge(function(r,n){var i,o=!0;r.subscribe(new ve(n,function(a){var s=e(a);(o||!t(i,s))&&(o=!1,i=s,n.next(a))}))})}function fL(t,e){return t===e}function b_(t,e){return Sp(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function gu(t){return t===void 0&&(t=cL),ge(function(e,r){var n=!1;e.subscribe(new ve(r,function(i){n=!0,r.next(i)},function(){return n?r.complete():r.error(t())}))})}function cL(){return new qo}function y_(t,e){if(t<0)throw new lp;var r=arguments.length>=2;return function(n){return n.pipe(mi(function(i,o){return o===t}),Wo(1),r?yu(e):gu(function(){return new lp}))}}function g_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return mu(r,fp.apply(void 0,Et([],xt(t))))}}function w_(t,e){return ge(function(r,n){var i=0;r.subscribe(new ve(n,function(o){t.call(e,o,i++,r)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}function Ap(){return ge(function(t,e){var r=!1,n=null;t.subscribe(new ve(e,function(i){n||(n=lt(i).subscribe(new ve(e,void 0,function(){n=null,r&&e.complete()})))},function(){r=!0,!n&&e.complete()}))})}var __=Ap;function Ip(t,e){return e?function(r){return r.pipe(Ip(function(n,i){return lt(t(n,i)).pipe(Ci(function(o,a){return e(n,o,i,a)}))}))}:ge(function(r,n){var i=0,o=null,a=!1;r.subscribe(new ve(n,function(s){o||(o=new ve(n,void 0,function(){o=null,a&&n.complete()}),lt(t(s,i++)).subscribe(o))},function(){a=!0,!o&&n.complete()}))})}function x_(t,e,r){return e===void 0&&(e=1/0),e=(e||0)<1?1/0:e,ge(function(n,i){return pp(n,i,t,e,void 0,!0,r)})}function E_(t){return ge(function(e,r){try{e.subscribe(r)}finally{r.add(t)}})}function S_(t,e){return ge(A_(t,e,"value"))}function A_(t,e,r){var n=r==="index";return function(i,o){var a=0;i.subscribe(new ve(o,function(s){var u=a++;t.call(e,s,u,i)&&(o.next(n?u:s),o.complete())},function(){o.next(n?-1:void 0),o.complete()}))}}function I_(t,e){return ge(A_(t,e,"index"))}function P_(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?mi(function(i,o){return t(i,o,n)}):dr,Wo(1),r?yu(e):gu(function(){return new qo}))}}function M_(t,e,r,n){return ge(function(i,o){var a;!e||typeof e=="function"?a=e:(r=e.duration,a=e.element,n=e.connector);var s=new Map,u=function(b){s.forEach(b),b(o)},f=function(b){return u(function(w){return w.error(b)})},c=new lL(o,function(b){try{var w=t(b),A=s.get(w);if(!A){s.set(w,A=n?n():new qt);var _=h(w,A);if(o.next(_),r){var T=new ve(A,function(){A.complete(),T==null||T.unsubscribe()},void 0,void 0,function(){return s.delete(w)});c.add(lt(r(_)).subscribe(T))}}A.next(a?a(b):b)}catch(P){f(P)}},function(){return u(function(b){return b.complete()})},f,function(){return s.clear()});i.subscribe(c);function h(b,w){var A=new pt(function(_){c.activeGroups++;var T=w.subscribe(_);return function(){T.unsubscribe(),--c.activeGroups==0&&c.teardownAttempted&&c.unsubscribe()}});return A.key=b,A}})}var lL=function(t){Bt(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.activeGroups=0,r.teardownAttempted=!1,r}return e.prototype.unsubscribe=function(){this.teardownAttempted=!0,this.activeGroups===0&&t.prototype.unsubscribe.call(this)},e}(ve);function k_(){return ge(function(t,e){t.subscribe(new ve(e,function(){e.next(!1),e.complete()},function(){e.next(!0),e.complete()}))})}function Pp(t){return t<=0?function(){return zn}:ge(function(e,r){var n=[];e.subscribe(new ve(r,function(i){n.push(i),t<n.length&&n.shift()},function(){var i,o;try{for(var a=jr(n),s=a.next();!s.done;s=a.next()){var u=s.value;r.next(u)}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}r.complete()},void 0,function(){n=null}))})}function T_(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?mi(function(i,o){return t(i,o,n)}):dr,Pp(1),r?yu(e):gu(function(){return new qo}))}}function N_(){return ge(function(t,e){t.subscribe(new ve(e,function(r){e.next(zc.createNext(r))},function(){e.next(zc.createComplete()),e.complete()},function(r){e.next(zc.createError(r)),e.complete()}))})}function O_(t){return as(We(t)?function(e,r){return t(e,r)>0?e:r}:function(e,r){return e>r?e:r})}var $_=xn;function R_(t,e,r){return r===void 0&&(r=1/0),We(e)?xn(function(){return t},e,r):(typeof e=="number"&&(r=e),xn(function(){return t},r))}function C_(t,e,r){return r===void 0&&(r=1/0),ge(function(n,i){var o=e;return pp(n,i,function(a,s){return t(o,a,s)},r,function(a){o=a},!1,void 0,function(){return o=null})})}function L_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ri(t),n=xw(t,1/0);return t=Ho(t),ge(function(i,o){vu(n)(qn(Et([i],xt(t)),r)).subscribe(o)})}function D_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L_.apply(void 0,Et([],xt(t)))}function B_(t){return as(We(t)?function(e,r){return t(e,r)<0?e:r}:function(e,r){return e<r?e:r})}function Vc(t,e){var r=We(t)?t:function(){return t};return We(e)?Wc(e,{connector:r}):function(n){return new Dc(n,r)}}function U_(){return ge(function(t,e){var r,n=!1;t.subscribe(new ve(e,function(i){var o=r;r=i,n&&e.next([o,i]),n=!0}))})}function F_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return Ci(function(n){for(var i=n,o=0;o<r;o++){var a=i==null?void 0:i[t[o]];if(typeof a!="undefined")i=a;else return}return i})}function j_(t){return t?function(e){return Wc(t)(e)}:function(e){return Vc(new qt)(e)}}function z_(t){return function(e){var r=new vw(t);return new Dc(e,function(){return r})}}function q_(){return function(t){var e=new np;return new Dc(t,function(){return e})}}function G_(t,e,r,n){r&&!We(r)&&(n=r);var i=We(r)?r:void 0;return function(o){return Vc(new rp(t,e,n),i)(o)}}function Mp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?ge(function(r,n){Xw(Et([r],xt(t)))(n)}):dr}function H_(t){return t===void 0&&(t=1/0),t<=0?function(){return zn}:ge(function(e,r){var n=0,i,o=function(){var a=!1;i=e.subscribe(new ve(r,void 0,function(){++n<t?i?(i.unsubscribe(),i=null,o()):a=!0:r.complete()})),a&&(i.unsubscribe(),i=null,o())};o()})}function W_(t){return ge(function(e,r){var n,i=!1,o,a=!1,s=!1,u=function(){return s&&a&&(r.complete(),!0)},f=function(){return o||(o=new qt,t(o).subscribe(new ve(r,function(){n?c():i=!0},function(){a=!0,u()}))),o},c=function(){s=!1,n=e.subscribe(new ve(r,void 0,function(){s=!0,!u()&&f().next()})),i&&(n.unsubscribe(),n=null,i=!1,c())};c()})}function K_(t){t===void 0&&(t=1/0);var e;t&&typeof t=="object"?e=t:e={count:t};var r=e.count,n=r===void 0?1/0:r,i=e.delay,o=e.resetOnSuccess,a=o===void 0?!1:o;return n<=0?dr:ge(function(s,u){var f=0,c,h=function(){var b=!1;c=s.subscribe(new ve(u,function(w){a&&(f=0),u.next(w)},void 0,function(w){if(f++<n){var A=function(){c?(c.unsubscribe(),c=null,h()):b=!0};if(i!=null){var _=typeof i=="number"?os(i):lt(i(w,f)),T=new ve(u,function(){T.unsubscribe(),A()},function(){u.complete()});_.subscribe(T)}else A()}else u.error(w)})),b&&(c.unsubscribe(),c=null,h())};h()})}function V_(t){return ge(function(e,r){var n,i=!1,o,a=function(){n=e.subscribe(new ve(r,void 0,void 0,function(s){o||(o=new qt,t(o).subscribe(new ve(r,function(){return n?a():i=!0}))),o&&o.next(s)})),i&&(n.unsubscribe(),n=null,i=!1,a())};a()})}function kp(t){return ge(function(e,r){var n=!1,i=null;e.subscribe(new ve(r,function(a){n=!0,i=a}));var o=function(){if(n){n=!1;var a=i;i=null,r.next(a)}};t.subscribe(new ve(r,o,Ct))})}function J_(t,e){return e===void 0&&(e=vi),kp(Kw(t,e))}function Tp(t,e){return ge(i_(t,e,arguments.length>=2,!0))}function Y_(t,e){return e===void 0&&(e=function(r,n){return r===n}),ge(function(r,n){var i=X_(),o=X_(),a=function(u){n.next(u),n.complete()},s=function(u,f){var c=new ve(n,function(h){var b=f.buffer,w=f.complete;b.length===0?w?a(!1):u.buffer.push(h):!e(h,b.shift())&&a(!1)},function(){u.complete=!0;var h=f.complete,b=f.buffer;h&&a(b.length===0),c==null||c.unsubscribe()});return c};r.subscribe(s(i,o)),t.subscribe(s(o,i))})}function X_(){return{buffer:[],complete:!1}}function Np(t){t===void 0&&(t={});var e=t.connector,r=e===void 0?function(){return new qt}:e,n=t.resetOnError,i=n===void 0?!0:n,o=t.resetOnComplete,a=o===void 0?!0:o,s=t.resetOnRefCountZero,u=s===void 0?!0:s;return function(f){var c=null,h=null,b=null,w=0,A=!1,_=!1,T=function(){h==null||h.unsubscribe(),h=null},P=function(){T(),c=b=null,A=_=!1},F=function(){var j=c;P(),j==null||j.unsubscribe()};return ge(function(j,U){w++,!_&&!A&&T();var L=b=b!=null?b:r();U.add(function(){w--,w===0&&!_&&!A&&(h=Op(F,u))}),L.subscribe(U),c||(c=new Cc({next:function(G){return L.next(G)},error:function(G){_=!0,T(),h=Op(P,i,G),L.error(G)},complete:function(){A=!0,T(),h=Op(P,a),L.complete()}}),qn(j).subscribe(c))})(f)}}function Op(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return e===!0?(t(),null):e===!1?null:e.apply(void 0,Et([],xt(r))).pipe(Wo(1)).subscribe(function(){return t()})}function Z_(t,e,r){var n,i,o,a=!1;return t&&typeof t=="object"?(o=(n=t.bufferSize)!==null&&n!==void 0?n:1/0,e=(i=t.windowTime)!==null&&i!==void 0?i:1/0,a=!!t.refCount,r=t.scheduler):o=t!=null?t:1/0,Np({connector:function(){return new rp(o,e,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function Q_(t){return ge(function(e,r){var n=!1,i,o=!1,a=0;e.subscribe(new ve(r,function(s){o=!0,(!t||t(s,a++,e))&&(n&&r.error(new Bw("Too many matching values")),n=!0,i=s)},function(){n?(r.next(i),r.complete()):r.error(o?new Dw("No matching values"):new qo)}))})}function e3(t){return mi(function(e,r){return t<=r})}function t3(t){return t<=0?dr:ge(function(e,r){var n=new Array(t),i=0;return e.subscribe(new ve(r,function(o){var a=i++;if(a<t)n[a]=o;else{var s=a%t,u=n[s];n[s]=o,r.next(u)}})),function(){n=null}})}function r3(t){return ge(function(e,r){var n=!1,i=new ve(r,function(){i==null||i.unsubscribe(),n=!0},Ct);lt(t).subscribe(i),e.subscribe(new ve(r,function(o){return n&&r.next(o)}))})}function n3(t){return ge(function(e,r){var n=!1,i=0;e.subscribe(new ve(r,function(o){return(n||(n=!t(o,i++)))&&r.next(o)}))})}function i3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ri(t);return ge(function(n,i){(r?mu(t,n,r):mu(t,n)).subscribe(i)})}function ss(t,e){return ge(function(r,n){var i=null,o=0,a=!1,s=function(){return a&&!i&&n.complete()};r.subscribe(new ve(n,function(u){i==null||i.unsubscribe();var f=0,c=o++;lt(t(u,c)).subscribe(i=new ve(n,function(h){return n.next(e?e(u,h,c,f++):h)},function(){i=null,s()}))},function(){a=!0,s()}))})}function o3(){return ss(dr)}function a3(t,e){return We(e)?ss(function(){return t},e):ss(function(){return t})}function s3(t,e){return ge(function(r,n){var i=e;return ss(function(o,a){return t(i,o,a)},function(o,a){return i=a,a})(r).subscribe(n),function(){i=null}})}function u3(t){return ge(function(e,r){lt(t).subscribe(new ve(r,function(){return r.complete()},Ct)),!r.closed&&e.subscribe(r)})}function f3(t,e){return e===void 0&&(e=!1),ge(function(r,n){var i=0;r.subscribe(new ve(n,function(o){var a=t(o,i++);(a||e)&&n.next(o),!a&&n.complete()}))})}function c3(t,e,r){var n=We(t)||e||r?{next:t,error:e,complete:r}:t;return n?ge(function(i,o){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;i.subscribe(new ve(o,function(u){var f;(f=n.next)===null||f===void 0||f.call(n,u),o.next(u)},function(){var u;s=!1,(u=n.complete)===null||u===void 0||u.call(n),o.complete()},function(u){var f;s=!1,(f=n.error)===null||f===void 0||f.call(n,u),o.error(u)},function(){var u,f;s&&((u=n.unsubscribe)===null||u===void 0||u.call(n)),(f=n.finalize)===null||f===void 0||f.call(n)}))}):dr}var l3={leading:!0,trailing:!1};function $p(t,e){var r=e===void 0?l3:e,n=r.leading,i=r.trailing;return ge(function(o,a){var s=!1,u=null,f=null,c=!1,h=function(){f==null||f.unsubscribe(),f=null,i&&(A(),c&&a.complete())},b=function(){f=null,c&&a.complete()},w=function(_){return f=lt(t(_)).subscribe(new ve(a,h,b))},A=function(){if(s){s=!1;var _=u;u=null,a.next(_),!c&&w(_)}};o.subscribe(new ve(a,function(_){s=!0,u=_,!(f&&!f.closed)&&(n?A():w(_))},function(){c=!0,!(i&&s&&f&&!f.closed)&&a.complete()}))})}function h3(t,e,r){e===void 0&&(e=vi),r===void 0&&(r=l3);var n=os(t,e);return $p(function(){return n},r)}function d3(t){return t===void 0&&(t=lu),function(e){return bu(function(){return e.pipe(Tp(function(r,n){var i=r.current;return{value:n,current:t.now(),last:i}},{current:t.now(),value:void 0,last:void 0}),Ci(function(r){var n=r.current,i=r.last,o=r.value;return new hL(o,n-i)}))})}}var hL=function(){function t(e,r){this.value=e,this.interval=r}return t}();function p3(t,e,r){var n,i,o;if(r=r!=null?r:lu,hp(t)?n=t:typeof t=="number"&&(i=t),e)o=function(){return e};else throw new TypeError("No observable provided to switch to");if(n==null&&i==null)throw new TypeError("No timeout provided.");return dp({first:n,each:i,scheduler:r,with:o})}function v3(t){return t===void 0&&(t=Bc),Ci(function(e){return{value:e,timestamp:t.now()}})}function m3(t){return ge(function(e,r){var n=new qt;r.next(n.asObservable());var i=function(o){n.error(o),r.error(o)};return e.subscribe(new ve(r,function(o){return n==null?void 0:n.next(o)},function(){n.complete(),r.complete()},i)),t.subscribe(new ve(r,function(){n.complete(),r.next(n=new qt)},Ct,i)),function(){n==null||n.unsubscribe(),n=null}})}function b3(t,e){e===void 0&&(e=0);var r=e>0?e:t;return ge(function(n,i){var o=[new qt],a=[],s=0;i.next(o[0].asObservable()),n.subscribe(new ve(i,function(u){var f,c;try{for(var h=jr(o),b=h.next();!b.done;b=h.next()){var w=b.value;w.next(u)}}catch(T){f={error:T}}finally{try{b&&!b.done&&(c=h.return)&&c.call(h)}finally{if(f)throw f.error}}var A=s-t+1;if(A>=0&&A%r==0&&o.shift().complete(),++s%r==0){var _=new qt;o.push(_),i.next(_.asObservable())}},function(){for(;o.length>0;)o.shift().complete();i.complete()},function(u){for(;o.length>0;)o.shift().error(u);i.error(u)},function(){a=null,o=null}))})}function y3(t){for(var e,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(e=Ri(n))!==null&&e!==void 0?e:vi,a=(r=n[0])!==null&&r!==void 0?r:null,s=n[1]||1/0;return ge(function(u,f){var c=[],h=!1,b=function(T){var P=T.window,F=T.subs;P.complete(),F.unsubscribe(),$i(c,T),h&&w()},w=function(){if(c){var T=new Tr;f.add(T);var P=new qt,F={window:P,subs:T,seen:0};c.push(F),f.next(P.asObservable()),zr(T,o,function(){return b(F)},t)}};a!==null&&a>=0?zr(f,o,w,a,!0):h=!0,w();var A=function(T){return c.slice().forEach(T)},_=function(T){A(function(P){var F=P.window;return T(F)}),T(f),f.unsubscribe()};return u.subscribe(new ve(f,function(T){A(function(P){P.window.next(T),s<=++P.seen&&b(P)})},function(){return _(function(T){return T.complete()})},function(T){return _(function(P){return P.error(T)})})),function(){c=null}})}function g3(t,e){return ge(function(r,n){var i=[],o=function(a){for(;0<i.length;)i.shift().error(a);n.error(a)};lt(t).subscribe(new ve(n,function(a){var s=new qt;i.push(s);var u=new Tr,f=function(){$i(i,s),s.complete(),u.unsubscribe()},c;try{c=lt(e(a))}catch(h){o(h);return}n.next(s.asObservable()),u.add(c.subscribe(new ve(n,f,Ct,o)))},Ct)),r.subscribe(new ve(n,function(a){var s,u,f=i.slice();try{for(var c=jr(f),h=c.next();!h.done;h=c.next()){var b=h.value;b.next(a)}}catch(w){s={error:w}}finally{try{h&&!h.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}},function(){for(;0<i.length;)i.shift().complete();n.complete()},o,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}function w3(t){return ge(function(e,r){var n,i,o=function(s){n.error(s),r.error(s)},a=function(){i==null||i.unsubscribe(),n==null||n.complete(),n=new qt,r.next(n.asObservable());var s;try{s=lt(t())}catch(u){o(u);return}s.subscribe(i=new ve(r,a,a,o))};a(),e.subscribe(new ve(r,function(s){return n.next(s)},function(){n.complete(),r.complete()},o,function(){i==null||i.unsubscribe(),n=null}))})}function _3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=hu(t);return ge(function(n,i){for(var o=t.length,a=new Array(o),s=t.map(function(){return!1}),u=!1,f=function(h){lt(t[h]).subscribe(new ve(i,function(b){a[h]=b,!u&&!s[h]&&(s[h]=!0,(u=s.every(dr))&&(s=null))},Ct))},c=0;c<o;c++)f(c);n.subscribe(new ve(i,function(h){if(u){var b=Et([h],xt(a));i.next(r?r.apply(void 0,Et([],xt(b))):b)}}))})}function x3(t){return o_(mp,t)}function E3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ge(function(r,n){mp.apply(void 0,Et([r],xt(t))).subscribe(n)})}function S3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return E3.apply(void 0,Et([],xt(t)))}var dL=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Observable:pt,ConnectableObservable:Dc,observable:Lc,animationFrames:Z9,Subject:qt,BehaviorSubject:vw,ReplaySubject:rp,AsyncSubject:np,asap:aC,asapScheduler:yw,async:lu,asyncScheduler:vi,queue:fC,queueScheduler:gw,animationFrame:hC,animationFrameScheduler:ww,VirtualTimeScheduler:dC,VirtualAction:_w,Scheduler:ap,Subscription:Tr,Subscriber:Rc,Notification:zc,get NotificationKind(){return cp},pipe:ep,noop:Ct,identity:dr,isObservable:PC,lastValueFrom:MC,firstValueFrom:kC,ArgumentOutOfRangeError:lp,EmptyError:qo,NotFoundError:Dw,ObjectUnsubscribedError:dw,SequenceError:Bw,TimeoutError:Uw,UnsubscriptionError:Nc,bindCallback:$C,bindNodeCallback:RC,combineLatest:zw,concat:mu,connectable:jC,defer:bu,empty:pC,forkJoin:zC,from:qn,fromEvent:vp,fromEventPattern:Ww,generate:JC,iif:YC,interval:Kw,merge:XC,never:ZC,of:fp,onErrorResumeNext:eL,pairs:tL,partition:rL,race:nL,range:iL,throwError:Cw,timer:os,using:oL,zip:mp,scheduled:Rw,EMPTY:zn,NEVER:Vw,config:io,audit:bp,auditTime:Zw,buffer:Qw,bufferCount:e_,bufferTime:t_,bufferToggle:r_,bufferWhen:n_,catchError:yp,combineAll:a_,combineLatestAll:wp,combineLatestWith:s_,concatAll:Gc,concatMap:Hc,concatMapTo:u_,concatWith:c_,connect:Wc,count:l_,debounce:h_,debounceTime:d_,defaultIfEmpty:yu,delay:p_,delayWhen:Kc,dematerialize:v_,distinct:m_,distinctUntilChanged:Sp,distinctUntilKeyChanged:b_,elementAt:y_,endWith:g_,every:w_,exhaust:__,exhaustAll:Ap,exhaustMap:Ip,expand:x_,filter:mi,finalize:E_,find:S_,findIndex:I_,first:P_,groupBy:M_,ignoreElements:xp,isEmpty:k_,last:T_,map:Ci,mapTo:Ep,materialize:N_,max:O_,mergeAll:vu,flatMap:$_,mergeMap:xn,mergeMapTo:R_,mergeScan:C_,mergeWith:D_,min:B_,multicast:Vc,observeOn:du,pairwise:U_,pluck:F_,publish:j_,publishBehavior:z_,publishLast:q_,publishReplay:G_,raceWith:Mp,reduce:as,repeat:H_,repeatWhen:W_,retry:K_,retryWhen:V_,refCount:tp,sample:kp,sampleTime:J_,scan:Tp,sequenceEqual:Y_,share:Np,shareReplay:Z_,single:Q_,skip:e3,skipLast:t3,skipUntil:r3,skipWhile:n3,startWith:i3,subscribeOn:pu,switchAll:o3,switchMap:ss,switchMapTo:a3,switchScan:s3,take:Wo,takeLast:Pp,takeUntil:u3,takeWhile:f3,tap:c3,throttle:$p,throttleTime:h3,throwIfEmpty:gu,timeInterval:d3,timeout:dp,timeoutWith:p3,timestamp:v3,toArray:gp,window:m3,windowCount:b3,windowTime:y3,windowToggle:g3,windowWhen:w3,withLatestFrom:_3,zipAll:x3,zipWith:S3}),Rp=$t(dL);(function(t){var e=te&&te.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamStatic=t.Stream=t.CommitType=t.AnchorStatus=t.SignatureStatus=void 0;const r=e(ac.exports),n=fi,i=Rp,o=id;(function(f){f[f.GENESIS=0]="GENESIS",f[f.PARTIAL=1]="PARTIAL",f[f.SIGNED=2]="SIGNED"})(t.SignatureStatus||(t.SignatureStatus={})),function(f){f[f.NOT_REQUESTED=0]="NOT_REQUESTED",f[f.PENDING=1]="PENDING",f[f.PROCESSING=2]="PROCESSING",f[f.ANCHORED=3]="ANCHORED",f[f.FAILED=4]="FAILED"}(t.AnchorStatus||(t.AnchorStatus={}));var a;(function(f){f[f.GENESIS=0]="GENESIS",f[f.SIGNED=1]="SIGNED",f[f.ANCHOR=2]="ANCHOR"})(a=t.CommitType||(t.CommitType={}));class s extends i.Observable{constructor(c,h){super(b=>{c.subscribe(b)});this.state$=c,this._context=h}get id(){return new n.StreamID(this.state$.value.type,this.state$.value.log[0].cid)}get api(){return this._context.api}get metadata(){var c;const{next:h,metadata:b}=this.state$.value;return r.default((c=h==null?void 0:h.metadata)!==null&&c!==void 0?c:b)}get content(){var c;const{next:h,content:b}=this.state$.value;return r.default((c=h==null?void 0:h.content)!==null&&c!==void 0?c:b)}get controllers(){return this.metadata.controllers}get tip(){return this.state$.value.log[this.state$.value.log.length-1].cid}get commitId(){return this.id.atCommit(this.tip)}get allCommitIds(){return this.state$.value.log.map(({cid:c})=>this.id.atCommit(c))}get anchorCommitIds(){return this.state$.value.log.filter(({type:c})=>c===a.ANCHOR).map(({cid:c})=>this.id.atCommit(c))}get state(){return r.default(this.state$.value)}async sync(c={}){c=ye({sync:o.SyncOptions.PREFER_CACHE},c);const h=await this.api.loadStream(this.id,c);this.state$.next(h.state)}async requestAnchor(){return this.api.requestAnchor(this.id)}}t.Stream=s;function u(){return f=>{}}t.StreamStatic=u})(od);var Jc={},Yc={exports:{}};(function(t,e){var r=typeof self!="undefined"?self:te,n=function(){function o(){this.fetch=!1,this.DOMException=r.DOMException}return o.prototype=r,new o}();(function(o){(function(a){var s={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function u(y){return y&&DataView.prototype.isPrototypeOf(y)}if(s.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(y){return y&&f.indexOf(Object.prototype.toString.call(y))>-1};function h(y){if(typeof y!="string"&&(y=String(y)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(y))throw new TypeError("Invalid character in header field name");return y.toLowerCase()}function b(y){return typeof y!="string"&&(y=String(y)),y}function w(y){var g={next:function(){var M=y.shift();return{done:M===void 0,value:M}}};return s.iterable&&(g[Symbol.iterator]=function(){return g}),g}function A(y){this.map={},y instanceof A?y.forEach(function(g,M){this.append(M,g)},this):Array.isArray(y)?y.forEach(function(g){this.append(g[0],g[1])},this):y&&Object.getOwnPropertyNames(y).forEach(function(g){this.append(g,y[g])},this)}A.prototype.append=function(y,g){y=h(y),g=b(g);var M=this.map[y];this.map[y]=M?M+", "+g:g},A.prototype.delete=function(y){delete this.map[h(y)]},A.prototype.get=function(y){return y=h(y),this.has(y)?this.map[y]:null},A.prototype.has=function(y){return this.map.hasOwnProperty(h(y))},A.prototype.set=function(y,g){this.map[h(y)]=b(g)},A.prototype.forEach=function(y,g){for(var M in this.map)this.map.hasOwnProperty(M)&&y.call(g,this.map[M],M,this)},A.prototype.keys=function(){var y=[];return this.forEach(function(g,M){y.push(M)}),w(y)},A.prototype.values=function(){var y=[];return this.forEach(function(g){y.push(g)}),w(y)},A.prototype.entries=function(){var y=[];return this.forEach(function(g,M){y.push([M,g])}),w(y)},s.iterable&&(A.prototype[Symbol.iterator]=A.prototype.entries);function _(y){if(y.bodyUsed)return Promise.reject(new TypeError("Already read"));y.bodyUsed=!0}function T(y){return new Promise(function(g,M){y.onload=function(){g(y.result)},y.onerror=function(){M(y.error)}})}function P(y){var g=new FileReader,M=T(g);return g.readAsArrayBuffer(y),M}function F(y){var g=new FileReader,M=T(g);return g.readAsText(y),M}function j(y){for(var g=new Uint8Array(y),M=new Array(g.length),R=0;R<g.length;R++)M[R]=String.fromCharCode(g[R]);return M.join("")}function U(y){if(y.slice)return y.slice(0);var g=new Uint8Array(y.byteLength);return g.set(new Uint8Array(y)),g.buffer}function L(){return this.bodyUsed=!1,this._initBody=function(y){this._bodyInit=y,y?typeof y=="string"?this._bodyText=y:s.blob&&Blob.prototype.isPrototypeOf(y)?this._bodyBlob=y:s.formData&&FormData.prototype.isPrototypeOf(y)?this._bodyFormData=y:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)?this._bodyText=y.toString():s.arrayBuffer&&s.blob&&u(y)?(this._bodyArrayBuffer=U(y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(y)||c(y))?this._bodyArrayBuffer=U(y):this._bodyText=y=Object.prototype.toString.call(y):this._bodyText="",this.headers.get("content-type")||(typeof y=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var y=_(this);if(y)return y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(P)}),this.text=function(){var y=_(this);if(y)return y;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}var G=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(y){var g=y.toUpperCase();return G.indexOf(g)>-1?g:y}function I(y,g){g=g||{};var M=g.body;if(y instanceof I){if(y.bodyUsed)throw new TypeError("Already read");this.url=y.url,this.credentials=y.credentials,g.headers||(this.headers=new A(y.headers)),this.method=y.method,this.mode=y.mode,this.signal=y.signal,!M&&y._bodyInit!=null&&(M=y._bodyInit,y.bodyUsed=!0)}else this.url=String(y);if(this.credentials=g.credentials||this.credentials||"same-origin",(g.headers||!this.headers)&&(this.headers=new A(g.headers)),this.method=p(g.method||this.method||"GET"),this.mode=g.mode||this.mode||null,this.signal=g.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function C(y){var g=new FormData;return y.trim().split("&").forEach(function(M){if(M){var R=M.split("="),v=R.shift().replace(/\+/g," "),d=R.join("=").replace(/\+/g," ");g.append(decodeURIComponent(v),decodeURIComponent(d))}}),g}function V(y){var g=new A,M=y.replace(/\r?\n[\t ]+/g," ");return M.split(/\r?\n/).forEach(function(R){var v=R.split(":"),d=v.shift().trim();if(d){var l=v.join(":").trim();g.append(d,l)}}),g}L.call(I.prototype);function $(y,g){g||(g={}),this.type="default",this.status=g.status===void 0?200:g.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in g?g.statusText:"OK",this.headers=new A(g.headers),this.url=g.url||"",this._initBody(y)}L.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new A(this.headers),url:this.url})},$.error=function(){var y=new $(null,{status:0,statusText:""});return y.type="error",y};var m=[301,302,303,307,308];$.redirect=function(y,g){if(m.indexOf(g)===-1)throw new RangeError("Invalid status code");return new $(null,{status:g,headers:{location:y}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(g,M){this.message=g,this.name=M;var R=Error(g);this.stack=R.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function E(y,g){return new Promise(function(M,R){var v=new I(y,g);if(v.signal&&v.signal.aborted)return R(new a.DOMException("Aborted","AbortError"));var d=new XMLHttpRequest;function l(){d.abort()}d.onload=function(){var x={status:d.status,statusText:d.statusText,headers:V(d.getAllResponseHeaders()||"")};x.url="responseURL"in d?d.responseURL:x.headers.get("X-Request-URL");var B="response"in d?d.response:d.responseText;M(new $(B,x))},d.onerror=function(){R(new TypeError("Network request failed"))},d.ontimeout=function(){R(new TypeError("Network request failed"))},d.onabort=function(){R(new a.DOMException("Aborted","AbortError"))},d.open(v.method,v.url,!0),v.credentials==="include"?d.withCredentials=!0:v.credentials==="omit"&&(d.withCredentials=!1),"responseType"in d&&s.blob&&(d.responseType="blob"),v.headers.forEach(function(x,B){d.setRequestHeader(B,x)}),v.signal&&(v.signal.addEventListener("abort",l),d.onreadystatechange=function(){d.readyState===4&&v.signal.removeEventListener("abort",l)}),d.send(typeof v._bodyInit=="undefined"?null:v._bodyInit)})}return E.polyfill=!0,o.fetch||(o.fetch=E,o.Headers=A,o.Request=I,o.Response=$),a.Headers=A,a.Request=I,a.Response=$,a.fetch=E,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(Yc,Yc.exports);var pL=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.fetchJson=void 0;const vL=pL(Yc.exports);async function mL(t,e={}){e.body&&Object.assign(e,{body:JSON.stringify(e.body),headers:{"Content-Type":"application/json"}});const r=await vL.default(t,e);if(!r.ok){const n=await r.text();throw new Error(`HTTP request to '${t}' failed with status '${r.statusText}': ${n}`)}return r.json()}Jc.fetchJson=mL;var wu={},bL=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yL=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gL=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bL(e,t,r);return yL(e,t),e},A3=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wu,"__esModule",{value:!0});wu.StreamUtils=void 0;const Li=A3(Qi),Xc=A3(ac.exports),I3=gL(wr),Zc=od,Cp=fi;class Gn{static streamIdFromState(e){return new Cp.StreamID(e.type,e.log[0].cid)}static serializeCommit(e){const r=Xc.default(e);return Gn.isSignedCommitContainer(r)?(r.jws.link=r.jws.link.toString(),r.linkedBlock=I3.toString(r.linkedBlock,"base64"),r):(Gn.isSignedCommit(e)&&(r.link=r.link.toString()),Gn.isAnchorCommit(e)&&(r.proof=r.proof.toString()),r.id&&(r.id=r.id.toString()),r.prev&&(r.prev=r.prev.toString()),r)}static deserializeCommit(e){const r=Xc.default(e);return Gn.isSignedCommitContainer(r)?(r.jws.link=new Li.default(r.jws.link),r.linkedBlock=I3.fromString(r.linkedBlock,"base64"),r):(Gn.isSignedCommit(r)&&(r.link=new Li.default(r.link)),Gn.isAnchorCommit(r)&&(r.proof=new Li.default(r.proof)),r.id&&(r.id=new Li.default(r.id)),r.prev&&(r.prev=new Li.default(r.prev)),r)}static serializeState(e){const r=Xc.default(e);return r.log=r.log.map(n=>mr(ye({},n),{cid:n.cid.toString()})),r.anchorStatus!=null&&(r.anchorStatus=Zc.AnchorStatus[r.anchorStatus]),r.anchorScheduledFor!=null&&(r.anchorScheduledFor=new Date(r.anchorScheduledFor).toISOString()),r.anchorProof!=null&&(r.anchorProof.txHash=r.anchorProof.txHash.toString(),r.anchorProof.root=r.anchorProof.root.toString()),r.lastAnchored!=null&&(r.lastAnchored=r.lastAnchored.toString()),r.doctype=Cp.StreamType.nameByCode(r.type),r}static deserializeState(e){const r=Xc.default(e);r.doctype&&(r.type=Cp.StreamType.codeByName(r.doctype),delete r.doctype),r.log=r.log.map(i=>mr(ye({},i),{cid:new Li.default(i.cid)})),r.anchorProof&&(r.anchorProof.txHash=new Li.default(r.anchorProof.txHash),r.anchorProof.root=new Li.default(r.anchorProof.root));let n=!0;return r.anchorStatus&&(r.anchorStatus=Zc.AnchorStatus[r.anchorStatus],n=r.anchorStatus!==Zc.AnchorStatus.FAILED&&r.anchorStatus!==Zc.AnchorStatus.ANCHORED),r.anchorScheduledFor&&(n?r.anchorScheduledFor=Date.parse(r.anchorScheduledFor):delete r.anchorScheduledFor),r.lastAnchored&&(r.lastAnchored=new Li.default(r.lastAnchored)),r}static statesEqual(e,r){return JSON.stringify(Gn.serializeState(e))===JSON.stringify(Gn.serializeState(r))}static isStateSupersetOf(e,r){if(e.log.length<r.log.length)return!1;for(const n in r.log)if(!e.log[n].cid.equals(r.log[n].cid))return!1;return!0}static async convertCommitToSignedCommitContainer(e,r){if(Gn.isSignedCommit(e)){const n=await r.block.get(e.link);return{jws:e,linkedBlock:n.data}}return e}static isSignedCommitContainer(e){return e&&e.jws!==void 0}static isSignedCommit(e){return e&&e.link!==void 0}static isAnchorCommit(e){return e&&e.proof!==void 0}}wu.StreamUtils=Gn;var Qc={};function wL(t,e){return function(r){return[mi(t,e)(r),mi(Yw(t,e))(r)]}}function _L(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mp.apply(void 0,Et([],xt(Ho(t))))}var xL=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",audit:bp,auditTime:Zw,buffer:Qw,bufferCount:e_,bufferTime:t_,bufferToggle:r_,bufferWhen:n_,catchError:yp,combineAll:a_,combineLatestAll:wp,combineLatest:_p,combineLatestWith:s_,concat:f_,concatAll:Gc,concatMap:Hc,concatMapTo:u_,concatWith:c_,connect:Wc,count:l_,debounce:h_,debounceTime:d_,defaultIfEmpty:yu,delay:p_,delayWhen:Kc,dematerialize:v_,distinct:m_,distinctUntilChanged:Sp,distinctUntilKeyChanged:b_,elementAt:y_,endWith:g_,every:w_,exhaust:__,exhaustAll:Ap,exhaustMap:Ip,expand:x_,filter:mi,finalize:E_,find:S_,findIndex:I_,first:P_,groupBy:M_,ignoreElements:xp,isEmpty:k_,last:T_,map:Ci,mapTo:Ep,materialize:N_,max:O_,merge:L_,mergeAll:vu,flatMap:$_,mergeMap:xn,mergeMapTo:R_,mergeScan:C_,mergeWith:D_,min:B_,multicast:Vc,observeOn:du,onErrorResumeNext:Jw,pairwise:U_,partition:wL,pluck:F_,publish:j_,publishBehavior:z_,publishLast:q_,publishReplay:G_,race:_L,raceWith:Mp,reduce:as,repeat:H_,repeatWhen:W_,retry:K_,retryWhen:V_,refCount:tp,sample:kp,sampleTime:J_,scan:Tp,sequenceEqual:Y_,share:Np,shareReplay:Z_,single:Q_,skip:e3,skipLast:t3,skipUntil:r3,skipWhile:n3,startWith:i3,subscribeOn:pu,switchAll:o3,switchMap:ss,switchMapTo:a3,switchScan:s3,take:Wo,takeLast:Pp,takeUntil:u3,takeWhile:f3,tap:c3,throttle:$p,throttleTime:h3,throwIfEmpty:gu,timeInterval:d3,timeout:dp,timeoutWith:p3,timestamp:v3,toArray:gp,window:m3,windowCount:b3,windowTime:y3,windowToggle:g3,windowWhen:w3,withLatestFrom:_3,zip:E3,zipAll:x3,zipWith:S3}),EL=$t(xL);Object.defineProperty(Qc,"__esModule",{value:!0});Qc.TestUtils=void 0;const P3=EL,SL=Rp,AL=fi;class IL extends SL.BehaviorSubject{constructor(e){super(e);this.state=this.value,this.id=new AL.StreamID(this.state.type,this.state.log[0].cid)}}class PL{static registerChangeListener(e){return e.pipe(P3.take(1)).toPromise()}static async waitForState(e,r,n,i){if(n(e.state))return;const o=new Promise(s=>setTimeout(s,r)),a=e.pipe(P3.filter(s=>n(s))).toPromise();await Promise.race([o,a]),n(e.state)||i()}static runningState(e){return new IL(e)}}Qc.TestUtils=PL;var el={},Ko={},tl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerProviderBase=t.ServiceLoggerBase=t.DiagnosticsLoggerBase=t.LogLevel=t.LogStyle=void 0;var e;(function(s){s.verbose="info",s.info="info",s.imp="imp",s.warn="warn",s.err="err"})(e=t.LogStyle||(t.LogStyle={}));var r;(function(s){s[s.verbose=0]="verbose",s[s.debug=1]="debug",s[s.important=2]="important",s[s.warn=3]="warn"})(r=t.LogLevel||(t.LogLevel={}));class n{constructor(u,f,c){this.logLevel=u,this.includeStackTrace=this.logLevel<=r.debug,this.logToFiles=f,this.fileLogger=c}write(u){this.debug(u)}verbose(u){this.logLevel>r.verbose||this.log(e.verbose,u)}debug(u){this.logLevel>r.debug||this.log(e.info,u)}imp(u){this.logLevel>r.important||this.log(e.imp,u)}warn(u){this.log(e.warn,u)}err(u){this.log(e.err,u)}log(u,f){throw new Error("Not implmented in base class")}}t.DiagnosticsLoggerBase=n;class i{constructor(u,f,c,h){this.service=u,this.logLevel=f,this.logToFiles=c,this.stream=h,this.logToConsole=this.logLevel<=r.debug}log(u){this.write(this.format(u))}write(u){u=`[${new Date().toUTCString()}] service=${this.service} ${u}`,this.logToConsole&&console.log(u)}format(u){throw new Error("Not implmented in base class")}}t.ServiceLoggerBase=i;const o={logLevel:r.important,logToFiles:!1};class a{constructor(u={},f){if(this.config={logLevel:u.logLevel!==void 0?u.logLevel:o.logLevel,logToFiles:u.logToFiles!==void 0?u.logToFiles:o.logToFiles,logDirectory:u.logDirectory},this._fileLoggerFactory=f,this.config.logToFiles&&!this._fileLoggerFactory)throw new Error("Must provide a FileLoggerFactory in order to log to files");this._diagnosticLogger=this._makeDiagnosticLogger()}_makeDiagnosticLogger(){throw new Error("Not implmented in base class")}getDiagnosticsLogger(){return this._diagnosticLogger}makeServiceLogger(u){throw new Error("Not implmented in base class")}}t.LoggerProviderBase=a})(tl);var ML=_u;_u.flatten=_u;_u.unflatten=T3;function M3(t){return t&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function k3(t){return t}function _u(t,e){e=e||{};const r=e.delimiter||".",n=e.maxDepth,i=e.transformKey||k3,o={};function a(s,u,f){f=f||1,Object.keys(s).forEach(function(c){const h=s[c],b=e.safe&&Array.isArray(h),w=Object.prototype.toString.call(h),A=M3(h),_=w==="[object Object]"||w==="[object Array]",T=u?u+r+i(c):i(c);if(!b&&!A&&_&&Object.keys(h).length&&(!e.maxDepth||f<n))return a(h,T,f+1);o[T]=h})}return a(t),o}function T3(t,e){e=e||{};const r=e.delimiter||".",n=e.overwrite||!1,i=e.transformKey||k3,o={};if(M3(t)||Object.prototype.toString.call(t)!=="[object Object]")return t;function s(c){const h=Number(c);return isNaN(h)||c.indexOf(".")!==-1||e.object?c:h}function u(c,h,b){return Object.keys(b).reduce(function(w,A){return w[c+r+A]=b[A],w},h)}function f(c){const h=Object.prototype.toString.call(c),b=h==="[object Array]",w=h==="[object Object]";if(c){if(b)return!c.length;if(w)return!Object.keys(c).length}else return!0}return t=Object.keys(t).reduce(function(c,h){const b=Object.prototype.toString.call(t[h]);return!(b==="[object Object]"||b==="[object Array]")||f(t[h])?(c[h]=t[h],c):u(h,c,_u(t[h],e))},{}),Object.keys(t).forEach(function(c){const h=c.split(r).map(i);let b=s(h.shift()),w=s(h[0]),A=o;for(;w!==void 0;){if(b==="__proto__")return;const _=Object.prototype.toString.call(A[b]),T=_==="[object Object]"||_==="[object Array]";if(!n&&!T&&typeof A[b]!="undefined")return;(n&&!T||!n&&A[b]==null)&&(A[b]=typeof w=="number"&&!e.object?[]:{}),A=A[b],h.length>0&&(b=s(h.shift()),w=s(h[0]))}A[b]=T3(t[c],e)}),o}var kL=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.ServiceLogger=Ko.DiagnosticsLogger=void 0;const N3=tl,TL=kL(ML),NL={info:console.log,imp:console.log,warn:console.warn,err:console.error};class OL extends N3.DiagnosticsLoggerBase{constructor(e){super(e,!1);this.logger=NL}log(e,r){this.logger[e](r)}}Ko.DiagnosticsLogger=OL;class $L extends N3.ServiceLoggerBase{constructor(e,r){super(e,r,!1)}format(e){return JSON.stringify(TL.default(e))}}Ko.ServiceLogger=$L;Object.defineProperty(el,"__esModule",{value:!0});el.LoggerProvider=void 0;const O3=Ko,RL=tl;class CL extends RL.LoggerProviderBase{_makeDiagnosticLogger(){return new O3.DiagnosticsLogger(this.config.logLevel)}makeServiceLogger(e){return new O3.ServiceLogger(e,this.config.logLevel)}}el.LoggerProvider=CL;var $3={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Networks=void 0,function(e){e.MAINNET="mainnet",e.ELP="elp",e.TESTNET_CLAY="testnet-clay",e.DEV_UNSTABLE="dev-unstable",e.LOCAL="local",e.INMEMORY="inmemory"}(t.Networks||(t.Networks={}))})($3);var R3={};Object.defineProperty(R3,"__esModule",{value:!0});var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.UnreachableCaseError=void 0;class LL extends Error{constructor(e,r){super(`Unhandled ${JSON.stringify(e)}: ${r}`)}}rl.UnreachableCaseError=LL;var C3={};Object.defineProperty(C3,"__esModule",{value:!0});var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.StreamStateSubject=void 0;const DL=Rp,BL=wu;class UL extends DL.BehaviorSubject{next(e){const r=this.value;BL.StreamUtils.statesEqual(r,e)||super.next(e)}}nl.StreamStateSubject=UL;var il={};Object.defineProperty(il,"__esModule",{value:!0});il.SubscriptionSet=void 0;class FL{constructor(e=new Set){this.subscriptions=e}add(e){e.add(()=>{this.subscriptions.delete(e)}),this.subscriptions.add(e)}unsubscribe(){this.subscriptions.forEach(e=>e.unsubscribe())}}il.SubscriptionSet=FL;(function(t){var e=te&&te.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),r=te&&te.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(sg,t),r(ug,t),r(fg,t),r(id,t),r(od,t),r(Jc,t),r(wu,t),r(Qc,t),r(el,t),r(Ko,t),r($3,t),r(tl,t),r(R3,t),r(rl,t),r(C3,t),r(nl,t),r(il,t)})(No);var jL=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zL=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qL=te&&te.__decorate||function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},GL=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jL(e,t,r);return zL(e,t),e},HL=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Vo;Object.defineProperty(rc,"__esModule",{value:!0});rc.TileDocument=void 0;const WL=HL(fr),KL=GL(wr),VL=Zi,ol=No,L3=fi,D3={anchor:!0,publish:!0,sync:ol.SyncOptions.PREFER_CACHE},JL={sync:ol.SyncOptions.PREFER_CACHE},B3={anchor:!0,publish:!0,throwOnInvalidCommit:!0};function Lp(t,e){var r,n;if(typeof(t==null?void 0:t.schema)=="string")try{L3.CommitID.fromString(t.schema)}catch{throw new Error("Schema must be a CommitID")}const i={controllers:t==null?void 0:t.controllers,family:t==null?void 0:t.family,schema:(r=t==null?void 0:t.schema)===null||r===void 0?void 0:r.toString(),tags:t==null?void 0:t.tags};if(e)(t==null?void 0:t.deterministic)||(i.unique=KL.toString(VL.randomBytes(12),"base64")),(t==null?void 0:t.forbidControllerChange)&&(i.forbidControllerChange=!0);else{if((t==null?void 0:t.deterministic)!==void 0||((n=t)===null||n===void 0?void 0:n.unique)!==void 0)throw new Error("Cannot change 'deterministic' or 'unique' properties on existing Streams");if((t==null?void 0:t.forbidControllerChange)!==void 0)throw new Error("Cannot change 'forbidControllerChange' property on existing Streams")}return Object.keys(i).forEach(o=>i[o]===void 0&&delete i[o]),i}async function U3(t){if(t.did==null)throw new Error("No DID provided");t.did.authenticated||(await t.did.authenticate(),t.loggerProvider&&t.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${t.did.id}`))}async function al(t,e){return await U3(t),t.did.createDagJWS(e)}async function Dp(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}let xu=Vo=class extends ol.Stream{constructor(){super(...arguments);this._isReadOnly=!1}get content(){return super.content}static async create(e,r,n,i={}){i=ye(ye({},D3),i),!(n==null?void 0:n.deterministic)&&i.syncTimeoutSeconds==null&&(i.syncTimeoutSeconds=0);const o=await Vo.makeGenesis(e,r,n);return e.createStreamFromGenesis(Vo.STREAM_TYPE_ID,o,i)}static async createFromGenesis(e,r,n={}){var i;n=ye(ye({},D3),n),((i=r.header)===null||i===void 0?void 0:i.unique)&&n.syncTimeoutSeconds==null&&(n.syncTimeoutSeconds=0);const o=r.data?await al(e,r):r;return e.createStreamFromGenesis(Vo.STREAM_TYPE_ID,o,n)}static async load(e,r,n={}){n=ye(ye({},JL),n);const i=L3.StreamRef.from(r);if(i.type!=Vo.STREAM_TYPE_ID)throw new Error(`StreamID ${i.toString()} does not refer to a '${Vo.STREAM_TYPE_NAME}' stream, but to a ${i.typeName}`);return e.loadStream(i,n)}async update(e,r,n={}){n=ye(ye({},B3),n);const i=await this.makeCommit(this.api,e,r),o=await this.api.applyCommit(this.id,i,n);this.state$.next(o.state)}async patch(e,r={}){r=ye(ye({},B3),r);const i={header:Lp(this.metadata,!1),data:e,prev:this.tip,id:this.state$.id.cid},o=await al(this.api,i),a=await this.api.applyCommit(this.id,o,r);this.state$.next(a.state)}makeReadOnly(){this.update=Dp,this.patch=Dp,this.sync=Dp,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}async makeCommit(e,r,n){var i;const o=Lp(n,!1);if(r==null&&(r=this.content),o.controllers&&((i=o.controllers)===null||i===void 0?void 0:i.length)!==1)throw new Error("Exactly one controller must be specified");const a=WL.default.compare(this.content,r),s={header:o,data:a,prev:this.tip,id:this.state.log[0].cid};return al(e,s)}static async makeGenesis(e,r,n){var i;if(n||(n={}),!n.controllers||n.controllers.length===0)if(e.did)await U3(e),n.controllers=[e.did.id];else throw new Error("No controllers specified");if(((i=n.controllers)===null||i===void 0?void 0:i.length)!==1)throw new Error("Exactly one controller must be specified");const o=Lp(n,!0);if((n==null?void 0:n.deterministic)&&r)throw new Error("Initial content must be null when creating a deterministic Tile document");return r==null?{header:o}:await al(e,{data:r,header:o})}};xu.STREAM_TYPE_NAME="tile";xu.STREAM_TYPE_ID=0;xu=Vo=qL([ol.StreamStatic()],xu);rc.TileDocument=xu;(function(t){var e=te&&te.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),r=te&&te.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(rc,t)})(Xi);var Bp={},Up={exports:{}};(function(t,e){(function(r,n){n(e)})(te,function(r){const n=Symbol("newer"),i=Symbol("older");class o{constructor(h,b){typeof h!="number"&&(b=h,h=0),this.size=0,this.limit=h,this.oldest=this.newest=void 0,this._keymap=new Map,b&&(this.assign(b),h<1&&(this.limit=this.size))}_markEntryAsUsed(h){h!==this.newest&&(h[n]&&(h===this.oldest&&(this.oldest=h[n]),h[n][i]=h[i]),h[i]&&(h[i][n]=h[n]),h[n]=void 0,h[i]=this.newest,this.newest&&(this.newest[n]=h),this.newest=h)}assign(h){let b,w=this.limit||Number.MAX_VALUE;this._keymap.clear();let A=h[Symbol.iterator]();for(let _=A.next();!_.done;_=A.next()){let T=new a(_.value[0],_.value[1]);if(this._keymap.set(T.key,T),b?(b[n]=T,T[i]=b):this.oldest=T,b=T,w--==0)throw new Error("overflow")}this.newest=b,this.size=this._keymap.size}get(h){var b=this._keymap.get(h);return b?(this._markEntryAsUsed(b),b.value):void 0}set(h,b){var w=this._keymap.get(h);return w?(w.value=b,this._markEntryAsUsed(w),this):(this._keymap.set(h,w=new a(h,b)),this.newest?(this.newest[n]=w,w[i]=this.newest):this.oldest=w,this.newest=w,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var h=this.oldest;if(h)return this.oldest[n]?(this.oldest=this.oldest[n],this.oldest[i]=void 0):(this.oldest=void 0,this.newest=void 0),h[n]=h[i]=void 0,this._keymap.delete(h.key),--this.size,[h.key,h.value]}find(h){let b=this._keymap.get(h);return b?b.value:void 0}has(h){return this._keymap.has(h)}delete(h){var b=this._keymap.get(h);return b?(this._keymap.delete(b.key),b[n]&&b[i]?(b[i][n]=b[n],b[n][i]=b[i]):b[n]?(b[n][i]=void 0,this.oldest=b[n]):b[i]?(b[i][n]=void 0,this.newest=b[i]):this.oldest=this.newest=void 0,this.size--,b.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new u(this.oldest)}values(){return new f(this.oldest)}entries(){return this}[Symbol.iterator](){return new s(this.oldest)}forEach(h,b){typeof b!="object"&&(b=this);let w=this.oldest;for(;w;)h.call(b,w.value,w.key,this),w=w[n]}toJSON(){for(var h=new Array(this.size),b=0,w=this.oldest;w;)h[b++]={key:w.key,value:w.value},w=w[n];return h}toString(){for(var h="",b=this.oldest;b;)h+=String(b.key)+":"+b.value,b=b[n],b&&(h+=" < ");return h}}r.LRUMap=o;function a(c,h){this.key=c,this.value=h,this[n]=void 0,this[i]=void 0}function s(c){this.entry=c}s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let c=this.entry;return c?(this.entry=c[n],{done:!1,value:[c.key,c.value]}):{done:!0,value:void 0}};function u(c){this.entry=c}u.prototype[Symbol.iterator]=function(){return this},u.prototype.next=function(){let c=this.entry;return c?(this.entry=c[n],{done:!1,value:c.key}):{done:!0,value:void 0}};function f(c){this.entry=c}f.prototype[Symbol.iterator]=function(){return this},f.prototype.next=function(){let c=this.entry;return c?(this.entry=c[n],{done:!1,value:c.value}):{done:!0,value:void 0}}})})(Up,Up.exports);var YL=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XL=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ZL=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YL(e,t,r);return XL(e,t),e},QL=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bp,"__esModule",{value:!0});const eD=QL(Yc.exports),Fp=ZL(wr),tD=Up.exports,rD="https://ipfs.3box.io",nD=100,F3=new tD.LRUMap(nD),iD=async t=>{const e=F3.get(t);if(e)return e;const r=await eD.default(t);if(r.ok){const n=await r.json();return F3.set(t,n),n}else throw new Error("Not a valid 3ID")},oD=t=>`${rD}/did-doc?cid=${encodeURIComponent(t)}`,aD={dag:{get:async t=>iD(oD(t))}},j3=(t,e)=>{const r=new Uint8Array(t.length+2);return e?r[0]=236:r[0]=231,r[1]=1,r.set(t,2),`z${Fp.toString(r,"base58btc")}`},sD=t=>{const e=t.slice(2,66);return`${(t.slice(66,130)&1)==0?"02":"03"}${e}`},uD=async(t,e=aD)=>{const r=(await e.dag.get(t)).value;let n,i;try{const u=r.publicKey.findIndex(c=>c.id.endsWith("signingKey")),f=r.publicKey.findIndex(c=>c.id.endsWith("encryptionKey"));n=r.publicKey[u].publicKeyHex,i=r.publicKey[f].publicKeyBase64}catch{throw new Error("Not a valid 3ID")}const o=sD(n),a=j3(Fp.fromString(o,"base16")),s=j3(Fp.fromString(i,"base64pad"),!0);return{keyDid:`did:key:${a}`,publicKeys:{[a.slice(-15)]:a,[s.slice(-15)]:s}}};Bp.default=uD;var z3={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withResolutionError=t.errorRepresentation=void 0;const e=n=>({didResolutionMetadata:n,didDocument:null,didDocumentMetadata:{}});t.errorRepresentation=e;const r=n=>n().catch(i=>t.errorRepresentation({error:"invalidDid",message:i.toString()}));t.withResolutionError=r})(z3);var fD=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cD=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lD=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fD(e,t,r);return cD(e,t),e},q3=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ua,"__esModule",{value:!0});var G3=Ua.getResolver=Ua.wrapDocument=void 0;const hD=Xi,dD=q3(Bp),H3=lD(wr),pD=fi,vD=q3(Qi),W3=z3,mD=No,K3="application/did+ld+json",jp="application/did+json",bD=t=>{try{return new vD.default(t),!0}catch{return!1}},V3=t=>new Date(t*1e3).toISOString().split(".")[0]+"Z";function zp(t,e){if(!(t&&t.publicKeys))return null;const r={id:e,verificationMethod:[],authentication:[],keyAgreement:[]};return Object.entries(t.publicKeys).reduce((n,[i,o])=>{const a=H3.fromString(o.slice(1),"base58btc"),s={id:`${e}#${i}`,type:"",controller:e,publicKeyBase58:H3.toString(a.slice(2),"base58btc")};return a[0]===231?(s.type="EcdsaSecp256k1Signature2019",n.verificationMethod.push(s),n.authentication.push(s)):a[0]===236&&(s.type="X25519KeyAgreementKey2019",n.verificationMethod.push(s),n.keyAgreement.push(s)),n},r)}Ua.wrapDocument=zp;function yD(t){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r.type===mD.CommitType.ANCHOR)return r}return t[0]}function gD(t,e){const r={},{timestamp:n,cid:i}=yD(t.log),{timestamp:o,cid:a}=e.log.find(({timestamp:s})=>s>n||!n&&s)||{};return n&&(r.updated=V3(n)),o&&(r.nextUpdate=V3(o)),i&&(r.versionId=t.log.length===1?"0":i==null?void 0:i.toString()),a&&(r.nextVersionId=a.toString()),r}function wD(t=""){const e=t.split("&").find(n=>n.includes("versionId")||n.includes("version-id")),r=t.split("&").find(n=>n.includes("versionTime"));return{commit:e?e.split("=")[1]:void 0,timestamp:r?Math.floor(new Date(r.split("=")[1]).getTime()/1e3):void 0}}const _D=async(t,e,r)=>{const n=await dD.default(e),i={controllers:[n.keyDid],family:"3id",deterministic:!0},o=(await hD.TileDocument.create(t,null,i,{anchor:!1,publish:!1})).id,a=await J3(t,o.toString(),r,e);return a.didDocument===null&&(a.didDocument=zp(n,`did:3:${e}`)),a},J3=async(t,e,r,n)=>{var i;const o=pD.StreamID.fromString(e);let a;const s=[{streamId:o}];r.commit?(a=o.atCommit(r.commit),s.push({streamId:a})):r.timestamp&&s.push({streamId:o,atTime:r.timestamp});const u=await t.multiQuery(s),f=u[e].state,c=(a==null?void 0:a.toString())||Object.keys(u).find(T=>T!==e),h=((i=u[c])===null||i===void 0?void 0:i.state)||f,b=gD(h,f),w=u[c||e];if(c&&!w)throw new Error(`No resolution for commit ${c}`);const A=w.state.content,_=zp(A,`did:3:${n||e}`);return{didResolutionMetadata:{contentType:jp},didDocument:_,didDocumentMetadata:b}};function Y3(t){return{"3":(e,r,n,i)=>W3.withResolutionError(async()=>{const o=i.accept||jp,a=wD(r.query),s=r.id,u=()=>bD(s)?_D(t,s,a):J3(t,s,a);switch(o){case jp:return u();case K3:{const f=await u();return f.didDocument["@context"]="https://www.w3.org/ns/did/v1",f.didResolutionMetadata.contentType=K3,f}default:return W3.errorRepresentation({error:"representationNotSupported"})}})}}G3=Ua.getResolver=Y3;Ua.default={getResolver:Y3};var X3={},oo={},xD=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0});oo.delay=oo.combineURLs=oo.typeStreamID=void 0;const ED=xD(fi);function SD(t){return typeof t=="string"?ED.default.fromString(t):t}oo.typeStreamID=SD;function AD(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}oo.combineURLs=AD;async function ID(t){await new Promise(e=>setTimeout(()=>e(),t))}oo.delay=ID;var sl={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qp=function(t,e){return qp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},qp(t,e)};function Ut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function PD(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})}function Gp(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(f){return function(c){return u([f,c])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(c){f=[6,c],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function qr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function At(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}function us(t){return this instanceof us?(this.v=t,this):new us(t)}function MD(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(b){n[b]&&(i[b]=function(w){return new Promise(function(A,_){o.push([b,w,A,_])>1||s(b,w)})})}function s(b,w){try{u(n[b](w))}catch(A){h(o[0][3],A)}}function u(b){b.value instanceof us?Promise.resolve(b.value.v).then(f,c):h(o[0][2],b)}function f(b){s("next",b)}function c(b){s("throw",b)}function h(b,w){b(w),o.shift(),o.length&&s(o[0][0],o[0][1])}}function kD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof qr=="function"?qr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(s,u){a=t[o](a),i(s,u,a.done,a.value)})}}function i(o,a,s,u){Promise.resolve(u).then(function(f){o({value:f,done:s})},a)}}function Ke(t){return typeof t=="function"}function Jo(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var ul=Jo(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Di(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var Nr=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=qr(a),u=s.next();!u.done;u=s.next()){var f=u.value;f.remove(this)}}catch(_){e={error:_}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}else a.remove(this);var c=this.initialTeardown;if(Ke(c))try{c()}catch(_){o=_ instanceof ul?_.errors:[_]}var h=this._teardowns;if(h){this._teardowns=null;try{for(var b=qr(h),w=b.next();!w.done;w=b.next()){var A=w.value;try{ex(A)}catch(_){o=o!=null?o:[],_ instanceof ul?o=At(At([],St(o)),St(_.errors)):o.push(_)}}}catch(_){n={error:_}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}}if(o)throw new ul(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)ex(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=(r=this._teardowns)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Di(r,e)},t.prototype.remove=function(e){var r=this._teardowns;r&&Di(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Z3=Nr.EMPTY;function Q3(t){return t instanceof Nr||t&&"closed"in t&&Ke(t.remove)&&Ke(t.add)&&Ke(t.unsubscribe)}function ex(t){Ke(t)?t():t.unsubscribe()}var ao={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fl={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=fl.delegate;return((r==null?void 0:r.setTimeout)||setTimeout).apply(void 0,At([],St(t)))},clearTimeout:function(t){var e=fl.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function tx(t){fl.setTimeout(function(){var e=ao.onUnhandledError;if(e)e(t);else throw t})}function Lt(){}var TD=function(){return Hp("C",void 0,void 0)}();function ND(t){return Hp("E",void 0,t)}function OD(t){return Hp("N",t,void 0)}function Hp(t,e,r){return{kind:t,value:e,error:r}}var Yo=null;function cl(t){if(ao.useDeprecatedSynchronousErrorHandling){var e=!Yo;if(e&&(Yo={errorThrown:!1,error:null}),t(),e){var r=Yo,n=r.errorThrown,i=r.error;if(Yo=null,n)throw i}}else t()}function $D(t){ao.useDeprecatedSynchronousErrorHandling&&Yo&&(Yo.errorThrown=!0,Yo.error=t)}var ll=function(t){Ut(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Q3(r)&&r.add(n)):n.destination=RD,n}return e.create=function(r,n,i){return new hl(r,n,i)},e.prototype.next=function(r){this.isStopped?Kp(OD(r),this):this._next(r)},e.prototype.error=function(r){this.isStopped?Kp(ND(r),this):(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped?Kp(TD,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Nr),hl=function(t){Ut(e,t);function e(r,n,i){var o=t.call(this)||this,a;if(Ke(r))a=r;else if(r){a=r.next,n=r.error,i=r.complete;var s;o&&ao.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=function(){return o.unsubscribe()}):s=r,a=a==null?void 0:a.bind(s),n=n==null?void 0:n.bind(s),i=i==null?void 0:i.bind(s)}return o.destination={next:a?Wp(a):Lt,error:Wp(n!=null?n:rx),complete:i?Wp(i):Lt},o}return e}(ll);function Wp(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{t.apply(void 0,At([],St(r)))}catch(i){ao.useDeprecatedSynchronousErrorHandling?$D(i):tx(i)}}}function rx(t){throw t}function Kp(t,e){var r=ao.onStoppedNotification;r&&fl.setTimeout(function(){return r(t,e)})}var RD={closed:!0,next:Lt,error:rx,complete:Lt},dl=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function pr(t){return t}function Vp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return nx(t)}function nx(t){return t.length===0?pr:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var vt=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=LD(e)?e:new hl(e,r,n);return cl(function(){var a=i,s=a.operator,u=a.source;o.add(s?s.call(o,u):u?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=ix(r),new r(function(i,o){var a;a=n.subscribe(function(s){try{e(s)}catch(u){o(u),a==null||a.unsubscribe()}},o,i)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[dl]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return nx(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=ix(e),new e(function(n,i){var o;r.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function ix(t){var e;return(e=t!=null?t:ao.Promise)!==null&&e!==void 0?e:Promise}function CD(t){return t&&Ke(t.next)&&Ke(t.error)&&Ke(t.complete)}function LD(t){return t&&t instanceof ll||CD(t)&&Q3(t)}function ox(t){return Ke(t==null?void 0:t.lift)}function we(t){return function(e){if(ox(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}var me=function(t){Ut(e,t);function e(r,n,i,o,a){var s=t.call(this,r)||this;return s.onFinalize=a,s._next=n?function(u){try{n(u)}catch(f){r.error(f)}}:t.prototype._next,s._error=o?function(u){try{o(u)}catch(f){r.error(f)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=i?function(){try{i()}catch(u){r.error(u)}finally{this.unsubscribe()}}:t.prototype._complete,s}return e.prototype.unsubscribe=function(){var r,n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))},e}(ll);function Jp(){return we(function(t,e){var r=null;t._refCount++;var n=new me(e,void 0,void 0,void 0,function(){if(!t||t._refCount<=0||0<--t._refCount){r=null;return}var i=t._connection,o=r;r=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(n),n.closed||(r=t.connect())})}var pl=function(t){Ut(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,ox(r)&&(i.lift=r.lift),i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var r=this._connection;this._subject=this._connection=null,r==null||r.unsubscribe()},e.prototype.connect=function(){var r=this,n=this._connection;if(!n){n=this._connection=new Nr;var i=this.getSubject();n.add(this.source.subscribe(new me(i,void 0,function(){r._teardown(),i.complete()},function(o){r._teardown(),i.error(o)},function(){return r._teardown()}))),n.closed&&(this._connection=null,n=Nr.EMPTY)}return n},e.prototype.refCount=function(){return Jp()(this)},e}(vt),ax={now:function(){return(ax.delegate||performance).now()},delegate:void 0},fs={schedule:function(t){var e=requestAnimationFrame,r=cancelAnimationFrame,n=fs.delegate;n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame);var i=e(function(o){r=void 0,t(o)});return new Nr(function(){return r==null?void 0:r(i)})},requestAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=fs.delegate;return((r==null?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,At([],St(t)))},cancelAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=fs.delegate;return((r==null?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,At([],St(t)))},delegate:void 0};function DD(t){return t?sx(t):BD}function sx(t){var e=fs.schedule;return new vt(function(r){var n=new Nr,i=t||ax,o=i.now(),a=function(s){var u=i.now();r.next({timestamp:t?u:s,elapsed:u-o}),r.closed||n.add(e(a))};return n.add(e(a)),n})}var BD=sx(),ux=Jo(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Gt=function(t){Ut(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new fx(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new ux},e.prototype.next=function(r){var n=this;cl(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){var a=n.observers.slice();try{for(var s=qr(a),u=s.next();!u.done;u=s.next()){var f=u.value;f.next(r)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(r){var n=this;cl(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},e.prototype.complete=function(){var r=this;cl(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,i=n.hasError,o=n.isStopped,a=n.observers;return i||o?Z3:(a.push(r),new Nr(function(){return Di(a,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,a=n.isStopped;i?r.error(o):a&&r.complete()},e.prototype.asObservable=function(){var r=new vt;return r.source=this,r},e.create=function(r,n){return new fx(r,n)},e}(vt),fx=function(t){Ut(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},e.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:Z3},e}(Gt),cx=function(t){Ut(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){var r=this,n=r.hasError,i=r.thrownError,o=r._value;if(n)throw i;return this._throwIfClosed(),o},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(Gt),vl={now:function(){return(vl.delegate||Date).now()},delegate:void 0},Yp=function(t){Ut(e,t);function e(r,n,i){r===void 0&&(r=1/0),n===void 0&&(n=1/0),i===void 0&&(i=vl);var o=t.call(this)||this;return o._bufferSize=r,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,r),o._windowTime=Math.max(1,n),o}return e.prototype.next=function(r){var n=this,i=n.isStopped,o=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,u=n._windowTime;i||(o.push(r),!a&&o.push(s.now()+u)),this._trimBuffer(),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),i=this,o=i._infiniteTimeWindow,a=i._buffer,s=a.slice(),u=0;u<s.length&&!r.closed;u+=o?1:2)r.next(s[u]);return this._checkFinalizedStatuses(r),n},e.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,i=r._timestampProvider,o=r._buffer,a=r._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<o.length&&o.splice(0,o.length-s),!a){for(var u=i.now(),f=0,c=1;c<o.length&&o[c]<=u;c+=2)f=c;f&&o.splice(0,f+1)}},e}(Gt),Xp=function(t){Ut(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._value=null,r._hasValue=!1,r._isComplete=!1,r}return e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n._hasValue,a=n._value,s=n.thrownError,u=n.isStopped,f=n._isComplete;i?r.error(s):(u||f)&&(o&&r.next(a),r.complete())},e.prototype.next=function(r){this.isStopped||(this._value=r,this._hasValue=!0)},e.prototype.complete=function(){var r=this,n=r._hasValue,i=r._value,o=r._isComplete;o||(this._isComplete=!0,n&&t.prototype.next.call(this,i),t.prototype.complete.call(this))},e}(Gt),UD=function(t){Ut(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(Nr),ml={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ml.delegate;return((r==null?void 0:r.setInterval)||setInterval).apply(void 0,At([],St(t)))},clearInterval:function(t){var e=ml.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},Eu=function(t){Ut(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),ml.setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;ml.clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Di(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(UD),FD=1,Zp,Qp={};function lx(t){return t in Qp?(delete Qp[t],!0):!1}var hx={setImmediate:function(t){var e=FD++;return Qp[e]=!0,Zp||(Zp=Promise.resolve()),Zp.then(function(){return lx(e)&&t()}),e},clearImmediate:function(t){lx(t)}},jD=hx.setImmediate,zD=hx.clearImmediate,bl={setImmediate:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=bl.delegate;return((r==null?void 0:r.setImmediate)||jD).apply(void 0,At([],St(t)))},clearImmediate:function(t){var e=bl.delegate;return((e==null?void 0:e.clearImmediate)||zD)(t)},delegate:void 0},qD=function(t){Ut(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=bl.setImmediate(r.flush.bind(r,void 0))))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(bl.clearImmediate(n),r._scheduled=void 0)},e}(Eu),ev=function(){function t(e,r){r===void 0&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(n,r)},t.now=vl.now,t}(),Su=function(t){Ut(e,t);function e(r,n){n===void 0&&(n=ev.now);var i=t.call(this,r,n)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return e.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(ev),GD=function(t){Ut(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this._active=!0,this._scheduled=void 0;var n=this.actions,i,o=-1;r=r||n.shift();var a=n.length;do if(i=r.execute(r.state,r.delay))break;while(++o<a&&(r=n.shift()));if(this._active=!1,i){for(;++o<a&&(r=n.shift());)r.unsubscribe();throw i}},e}(Su),dx=new GD(qD),HD=dx,bi=new Su(Eu),Au=bi,WD=function(t){Ut(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(Eu),KD=function(t){Ut(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Su),px=new KD(WD),VD=px,JD=function(t){Ut(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=fs.requestAnimationFrame(function(){return r.flush(void 0)})))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(fs.cancelAnimationFrame(n),r._scheduled=void 0)},e}(Eu),YD=function(t){Ut(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this._active=!0,this._scheduled=void 0;var n=this.actions,i,o=-1;r=r||n.shift();var a=n.length;do if(i=r.execute(r.state,r.delay))break;while(++o<a&&(r=n.shift()));if(this._active=!1,i){for(;++o<a&&(r=n.shift());)r.unsubscribe();throw i}},e}(Su),vx=new YD(JD),XD=vx,ZD=function(t){Ut(e,t);function e(r,n){r===void 0&&(r=mx),n===void 0&&(n=1/0);var i=t.call(this,r,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return e.prototype.flush=function(){for(var r=this,n=r.actions,i=r.maxFrames,o,a;(a=n[0])&&a.delay<=i&&(n.shift(),this.frame=a.delay,!(o=a.execute(a.state,a.delay))););if(o){for(;a=n.shift();)a.unsubscribe();throw o}},e.frameTimeFactor=10,e}(Su),mx=function(t){Ut(e,t);function e(r,n,i){i===void 0&&(i=r.index+=1);var o=t.call(this,r,n)||this;return o.scheduler=r,o.work=n,o.index=i,o.active=!0,o.index=r.index=i,o}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return t.prototype.schedule.call(this,r,n);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(r,n)}else return Nr.EMPTY},e.prototype.requestAsyncId=function(r,n,i){i===void 0&&(i=0),this.delay=r.frame+i;var o=r.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(r,n,i){},e.prototype._execute=function(r,n){if(this.active===!0)return t.prototype._execute.call(this,r,n)},e.sortActions=function(r,n){return r.delay===n.delay?r.index===n.index?0:r.index>n.index?1:-1:r.delay>n.delay?1:-1},e}(Eu),Hn=new vt(function(t){return t.complete()});function QD(t){return t?eB(t):Hn}function eB(t){return new vt(function(e){return t.schedule(function(){return e.complete()})})}function yl(t){return t&&Ke(t.schedule)}function tv(t){return t[t.length-1]}function Iu(t){return Ke(tv(t))?t.pop():void 0}function Bi(t){return yl(tv(t))?t.pop():void 0}function bx(t,e){return typeof tv(t)=="number"?t.pop():e}var rv=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function yx(t){return Ke(t==null?void 0:t.then)}function gx(t){return Ke(t[dl])}function wx(t){return Symbol.asyncIterator&&Ke(t==null?void 0:t[Symbol.asyncIterator])}function _x(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function tB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xx=tB();function Ex(t){return Ke(t==null?void 0:t[xx])}function Sx(t){return MD(this,arguments,function(){var r,n,i,o;return Gp(this,function(a){switch(a.label){case 0:r=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,us(r.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,us(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,us(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Ax(t){return Ke(t==null?void 0:t.getReader)}function ht(t){if(t instanceof vt)return t;if(t!=null){if(gx(t))return rB(t);if(rv(t))return nB(t);if(yx(t))return iB(t);if(wx(t))return Ix(t);if(Ex(t))return oB(t);if(Ax(t))return aB(t)}throw _x(t)}function rB(t){return new vt(function(e){var r=t[dl]();if(Ke(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nB(t){return new vt(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function iB(t){return new vt(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,tx)})}function oB(t){return new vt(function(e){var r,n;try{for(var i=qr(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()})}function Ix(t){return new vt(function(e){sB(t,e).catch(function(r){return e.error(r)})})}function aB(t){return Ix(Sx(t))}function sB(t,e){var r,n,i,o;return PD(this,void 0,void 0,function(){var a,s;return Gp(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=kD(t),u.label=1;case 1:return[4,r.next()];case 2:if(n=u.sent(),!!n.done)return[3,4];if(a=n.value,e.next(a),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),i={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Gr(t,e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=e.schedule(function(){r(),i?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(o),!i)return o}function Pu(t,e){return e===void 0&&(e=0),we(function(r,n){r.subscribe(new me(n,function(i){return Gr(n,t,function(){return n.next(i)},e)},function(){return Gr(n,t,function(){return n.complete()},e)},function(i){return Gr(n,t,function(){return n.error(i)},e)}))})}function Mu(t,e){return e===void 0&&(e=0),we(function(r,n){n.add(t.schedule(function(){return r.subscribe(n)},e))})}function uB(t,e){return ht(t).pipe(Mu(e),Pu(e))}function fB(t,e){return ht(t).pipe(Mu(e),Pu(e))}function cB(t,e){return new vt(function(r){var n=0;return e.schedule(function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())})})}function Px(t,e){return new vt(function(r){var n;return Gr(r,e,function(){n=t[xx](),Gr(r,e,function(){var i,o,a;try{i=n.next(),o=i.value,a=i.done}catch(s){r.error(s);return}a?r.complete():r.next(o)},0,!0)}),function(){return Ke(n==null?void 0:n.return)&&n.return()}})}function Mx(t,e){if(!t)throw new Error("Iterable cannot be null");return new vt(function(r){Gr(r,e,function(){var n=t[Symbol.asyncIterator]();Gr(r,e,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function lB(t,e){return Mx(Sx(t),e)}function kx(t,e){if(t!=null){if(gx(t))return uB(t,e);if(rv(t))return cB(t,e);if(yx(t))return fB(t,e);if(wx(t))return Mx(t,e);if(Ex(t))return Px(t,e);if(Ax(t))return lB(t,e)}throw _x(t)}function Wn(t,e){return e?kx(t,e):ht(t)}function nv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Bi(t);return Wn(t,r)}function Tx(t,e){var r=Ke(t)?t:function(){return t},n=function(i){return i.error(r())};return new vt(e?function(i){return e.schedule(n,0,i)}:n)}var iv;(function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"})(iv||(iv={}));var gl=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){return Nx(this,e)},t.prototype.do=function(e,r,n){var i=this,o=i.kind,a=i.value,s=i.error;return o==="N"?e==null?void 0:e(a):o==="E"?r==null?void 0:r(s):n==null?void 0:n()},t.prototype.accept=function(e,r,n){var i;return Ke((i=e)===null||i===void 0?void 0:i.next)?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this,r=e.kind,n=e.value,i=e.error,o=r==="N"?nv(n):r==="E"?Tx(function(){return i}):r==="C"?Hn:0;if(!o)throw new TypeError("Unexpected notification kind "+r);return o},t.createNext=function(e){return new t("N",e)},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t}();function Nx(t,e){var r,n,i,o=t,a=o.kind,s=o.value,u=o.error;if(typeof a!="string")throw new TypeError('Invalid notification, missing "kind"');a==="N"?(r=e.next)===null||r===void 0||r.call(e,s):a==="E"?(n=e.error)===null||n===void 0||n.call(e,u):(i=e.complete)===null||i===void 0||i.call(e)}function hB(t){return!!t&&(t instanceof vt||Ke(t.lift)&&Ke(t.subscribe))}var Xo=Jo(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function dB(t,e){var r=typeof e=="object";return new Promise(function(n,i){var o=!1,a;t.subscribe({next:function(s){a=s,o=!0},error:i,complete:function(){o?n(a):r?n(e.defaultValue):i(new Xo)}})})}function pB(t,e){var r=typeof e=="object";return new Promise(function(n,i){var o=new hl({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){r?n(e.defaultValue):i(new Xo)}});t.subscribe(o)})}var ov=Jo(function(t){return function(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),Ox=Jo(function(t){return function(r){t(this),this.name="NotFoundError",this.message=r}}),$x=Jo(function(t){return function(r){t(this),this.name="SequenceError",this.message=r}});function av(t){return t instanceof Date&&!isNaN(t)}var Rx=Jo(function(t){return function(r){r===void 0&&(r=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}});function sv(t,e){var r=av(t)?{first:t}:typeof t=="number"?{each:t}:t,n=r.first,i=r.each,o=r.with,a=o===void 0?vB:o,s=r.scheduler,u=s===void 0?e!=null?e:bi:s,f=r.meta,c=f===void 0?null:f;if(n==null&&i==null)throw new TypeError("No timeout provided.");return we(function(h,b){var w,A,_=null,T=0,P=function(F){A=Gr(b,u,function(){try{w.unsubscribe(),ht(a({meta:c,lastValue:_,seen:T})).subscribe(b)}catch(j){b.error(j)}},F)};w=h.subscribe(new me(b,function(F){A==null||A.unsubscribe(),T++,b.next(_=F),i>0&&P(i)},void 0,void 0,function(){(A==null?void 0:A.closed)||A==null||A.unsubscribe(),_=null})),P(n!=null?typeof n=="number"?n:+n-u.now():i)})}function vB(t){throw new Rx(t)}function Ui(t,e){return we(function(r,n){var i=0;r.subscribe(new me(n,function(o){n.next(t.call(e,o,i++))}))})}var mB=Array.isArray;function bB(t,e){return mB(e)?t.apply(void 0,At([],St(e))):t(e)}function Zo(t){return Ui(function(e){return bB(t,e)})}function wl(t,e,r,n){if(r)if(yl(r))n=r;else return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return wl(t,e,n).apply(this,i).pipe(Zo(r))};return n?function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return wl(t,e).apply(this,i).pipe(Mu(n),Pu(n))}:function(){for(var i=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=new Xp,u=!0;return new vt(function(f){var c=s.subscribe(f);if(u){u=!1;var h=!1,b=!1;e.apply(i,At(At([],St(o)),[function(){for(var w=[],A=0;A<arguments.length;A++)w[A]=arguments[A];if(t){var _=w.shift();if(_!=null){s.error(_);return}}s.next(1<w.length?w:w[0]),b=!0,h&&s.complete()}])),b&&s.complete(),h=!0}return c})}}function yB(t,e,r){return wl(!1,t,e,r)}function gB(t,e,r){return wl(!0,t,e,r)}var wB=Array.isArray,_B=Object.getPrototypeOf,xB=Object.prototype,EB=Object.keys;function Cx(t){if(t.length===1){var e=t[0];if(wB(e))return{args:e,keys:null};if(SB(e)){var r=EB(e);return{args:r.map(function(n){return e[n]}),keys:r}}}return{args:t,keys:null}}function SB(t){return t&&typeof t=="object"&&_B(t)===xB}function Lx(t,e){return t.reduce(function(r,n,i){return r[n]=e[i],r},{})}function Dx(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Bi(t),n=Iu(t),i=Cx(t),o=i.args,a=i.keys;if(o.length===0)return Wn([],r);var s=new vt(Bx(o,r,a?function(u){return Lx(a,u)}:pr));return n?s.pipe(Zo(n)):s}function Bx(t,e,r){return r===void 0&&(r=pr),function(n){Ux(e,function(){for(var i=t.length,o=new Array(i),a=i,s=i,u=function(c){Ux(e,function(){var h=Wn(t[c],e),b=!1;h.subscribe(new me(n,function(w){o[c]=w,b||(b=!0,s--),s||n.next(r(o.slice()))},function(){--a||n.complete()}))},n)},f=0;f<i;f++)u(f)},n)}}function Ux(t,e,r){t?Gr(r,t,e):e()}function uv(t,e,r,n,i,o,a,s){var u=[],f=0,c=0,h=!1,b=function(){h&&!u.length&&!f&&e.complete()},w=function(_){return f<n?A(_):u.push(_)},A=function(_){o&&e.next(_),f++;var T=!1;ht(r(_,c++)).subscribe(new me(e,function(P){i==null||i(P),o?w(P):e.next(P)},function(){T=!0},void 0,function(){if(T)try{f--;for(var P=function(){var F=u.shift();a?Gr(e,a,function(){return A(F)}):A(F)};u.length&&f<n;)P();b()}catch(F){e.error(F)}}))};return t.subscribe(new me(e,w,function(){h=!0,b()})),function(){s==null||s()}}function En(t,e,r){return r===void 0&&(r=1/0),Ke(e)?En(function(n,i){return Ui(function(o,a){return e(n,o,i,a)})(ht(t(n,i)))},r):(typeof e=="number"&&(r=e),we(function(n,i){return uv(n,i,t,r)}))}function ku(t){return t===void 0&&(t=1/0),En(pr,t)}function _l(){return ku(1)}function Tu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _l()(Wn(t,Bi(t)))}function Nu(t){return new vt(function(e){ht(t()).subscribe(e)})}var AB={connector:function(){return new Gt},resetOnDisconnect:!0};function IB(t,e){e===void 0&&(e=AB);var r=null,n=e.connector,i=e.resetOnDisconnect,o=i===void 0?!0:i,a=n(),s=new vt(function(u){return a.subscribe(u)});return s.connect=function(){return(!r||r.closed)&&(r=Nu(function(){return t}).subscribe(a),o&&r.add(function(){return a=n()})),r},s}function PB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Iu(t),n=Cx(t),i=n.args,o=n.keys,a=new vt(function(s){var u=i.length;if(!u){s.complete();return}for(var f=new Array(u),c=u,h=u,b=function(A){var _=!1;ht(i[A]).subscribe(new me(s,function(T){_||(_=!0,h--),f[A]=T},function(){return c--},void 0,function(){(!c||!_)&&(h||s.next(o?Lx(o,f):f),s.complete())}))},w=0;w<u;w++)b(w)});return r?a.pipe(Zo(r)):a}var MB=["addListener","removeListener"],kB=["addEventListener","removeEventListener"],TB=["on","off"];function fv(t,e,r,n){if(Ke(r)&&(n=r,r=void 0),n)return fv(t,e,r).pipe(Zo(n));var i=St($B(t)?kB.map(function(s){return function(u){return t[s](e,u,r)}}):NB(t)?MB.map(Fx(t,e)):OB(t)?TB.map(Fx(t,e)):[],2),o=i[0],a=i[1];if(!o&&rv(t))return En(function(s){return fv(s,e,r)})(ht(t));if(!o)throw new TypeError("Invalid event target");return new vt(function(s){var u=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return s.next(1<f.length?f:f[0])};return o(u),function(){return a(u)}})}function Fx(t,e){return function(r){return function(n){return t[r](e,n)}}}function NB(t){return Ke(t.addListener)&&Ke(t.removeListener)}function OB(t){return Ke(t.on)&&Ke(t.off)}function $B(t){return Ke(t.addEventListener)&&Ke(t.removeEventListener)}function jx(t,e,r){return r?jx(t,e).pipe(Zo(r)):new vt(function(n){var i=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},o=t(i);return Ke(e)?function(){return e(i,o)}:void 0})}function RB(t,e,r,n,i){var o,a,s,u;arguments.length===1?(o=t,u=o.initialState,e=o.condition,r=o.iterate,a=o.resultSelector,s=a===void 0?pr:a,i=o.scheduler):(u=t,!n||yl(n)?(s=pr,i=n):s=n);function f(){var c;return Gp(this,function(h){switch(h.label){case 0:c=u,h.label=1;case 1:return!e||e(c)?[4,s(c)]:[3,4];case 2:h.sent(),h.label=3;case 3:return c=r(c),[3,1];case 4:return[2]}})}return Nu(i?function(){return Px(f(),i)}:f)}function CB(t,e,r){return Nu(function(){return t()?e:r})}function cs(t,e,r){t===void 0&&(t=0),r===void 0&&(r=Au);var n=-1;return e!=null&&(yl(e)?r=e:n=e),new vt(function(i){var o=av(t)?+t-r.now():t;o<0&&(o=0);var a=0;return r.schedule(function(){i.closed||(i.next(a++),0<=n?this.schedule(void 0,n):i.complete())},o)})}function zx(t,e){return t===void 0&&(t=0),e===void 0&&(e=bi),t<0&&(t=0),cs(t,t,e)}function LB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Bi(t),n=bx(t,1/0),i=t;return i.length?i.length===1?ht(i[0]):ku(n)(Wn(i,r)):Hn}var qx=new vt(Lt);function DB(){return qx}var BB=Array.isArray;function Qo(t){return t.length===1&&BB(t[0])?t[0]:t}function Gx(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Qo(t);return we(function(n,i){var o=At([n],St(r)),a=function(){if(!i.closed)if(o.length>0){var s=void 0;try{s=ht(o.shift())}catch{a();return}var u=new me(i,void 0,Lt,Lt);i.add(s.subscribe(u)),u.add(a)}else i.complete()};a()})}function UB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gx(Qo(t))(Hn)}function FB(t,e){return Wn(Object.entries(t),e)}function Hx(t,e){return function(r,n){return!t.call(e,r,n)}}function yi(t,e){return we(function(r,n){var i=0;r.subscribe(new me(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}function jB(t,e,r){return[yi(e,r)(ht(t)),yi(Hx(e,r))(ht(t))]}function zB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=Qo(t),t.length===1?ht(t[0]):new vt(Wx(t))}function Wx(t){return function(e){for(var r=[],n=function(o){r.push(ht(t[o]).subscribe(new me(e,function(a){if(r){for(var s=0;s<r.length;s++)s!==o&&r[s].unsubscribe();r=null}e.next(a)})))},i=0;r&&!e.closed&&i<t.length;i++)n(i)}}function qB(t,e,r){if(e==null&&(e=t,t=0),e<=0)return Hn;var n=e+t;return new vt(r?function(i){var o=t;return r.schedule(function(){o<n?(i.next(o++),this.schedule()):i.complete()})}:function(i){for(var o=t;o<n&&!i.closed;)i.next(o++);i.complete()})}function GB(t,e){return new vt(function(r){var n=t(),i=e(n),o=i?ht(i):Hn;return o.subscribe(r),function(){n&&n.unsubscribe()}})}function cv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Iu(t),n=Qo(t);return n.length?new vt(function(i){var o=n.map(function(){return[]}),a=n.map(function(){return!1});i.add(function(){o=a=null});for(var s=function(f){ht(n[f]).subscribe(new me(i,function(c){if(o[f].push(c),o.every(function(b){return b.length})){var h=o.map(function(b){return b.shift()});i.next(r?r.apply(void 0,At([],St(h))):h),o.some(function(b,w){return!b.length&&a[w]})&&i.complete()}},function(){a[f]=!0,!o[f].length&&i.complete()}))},u=0;!i.closed&&u<n.length;u++)s(u);return function(){o=a=null}}):Hn}function lv(t){return we(function(e,r){var n=!1,i=null,o=null,a=!1,s=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var f=i;i=null,r.next(f)}a&&r.complete()},u=function(){o=null,a&&r.complete()};e.subscribe(new me(r,function(f){n=!0,i=f,o||ht(t(f)).subscribe(o=new me(r,s,u))},function(){a=!0,(!n||!o||o.closed)&&r.complete()}))})}function Kx(t,e){return e===void 0&&(e=Au),lv(function(){return cs(t,e)})}function Vx(t){return we(function(e,r){var n=[];return e.subscribe(new me(r,function(i){return n.push(i)},function(){r.next(n),r.complete()})),t.subscribe(new me(r,function(){var i=n;n=[],r.next(i)},Lt)),function(){n=null}})}function Jx(t,e){return e===void 0&&(e=null),e=e!=null?e:t,we(function(r,n){var i=[],o=0;r.subscribe(new me(n,function(a){var s,u,f,c,h=null;o++%e==0&&i.push([]);try{for(var b=qr(i),w=b.next();!w.done;w=b.next()){var A=w.value;A.push(a),t<=A.length&&(h=h!=null?h:[],h.push(A))}}catch(P){s={error:P}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}if(h)try{for(var _=qr(h),T=_.next();!T.done;T=_.next()){var A=T.value;Di(i,A),n.next(A)}}catch(P){f={error:P}}finally{try{T&&!T.done&&(c=_.return)&&c.call(_)}finally{if(f)throw f.error}}},function(){var a,s;try{for(var u=qr(i),f=u.next();!f.done;f=u.next()){var c=f.value;n.next(c)}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}n.complete()},void 0,function(){i=null}))})}function Yx(t){for(var e,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(e=Bi(n))!==null&&e!==void 0?e:bi,a=(r=n[0])!==null&&r!==void 0?r:null,s=n[1]||1/0;return we(function(u,f){var c=[],h=!1,b=function(_){var T=_.buffer,P=_.subs;P.unsubscribe(),Di(c,_),f.next(T),h&&w()},w=function(){if(c){var _=new Nr;f.add(_);var T=[],P={buffer:T,subs:_};c.push(P),Gr(_,o,function(){return b(P)},t)}};a!==null&&a>=0?Gr(f,o,w,a,!0):h=!0,w();var A=new me(f,function(_){var T,P,F=c.slice();try{for(var j=qr(F),U=j.next();!U.done;U=j.next()){var L=U.value,G=L.buffer;G.push(_),s<=G.length&&b(L)}}catch(p){T={error:p}}finally{try{U&&!U.done&&(P=j.return)&&P.call(j)}finally{if(T)throw T.error}}},function(){for(;c==null?void 0:c.length;)f.next(c.shift().buffer);A==null||A.unsubscribe(),f.complete(),f.unsubscribe()},void 0,function(){return c=null});u.subscribe(A)})}function Xx(t,e){return we(function(r,n){var i=[];ht(t).subscribe(new me(n,function(o){var a=[];i.push(a);var s=new Nr,u=function(){Di(i,a),n.next(a),s.unsubscribe()};s.add(ht(e(o)).subscribe(new me(n,u,Lt)))},Lt)),r.subscribe(new me(n,function(o){var a,s;try{for(var u=qr(i),f=u.next();!f.done;f=u.next()){var c=f.value;c.push(o)}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}},function(){for(;i.length>0;)n.next(i.shift());n.complete()}))})}function Zx(t){return we(function(e,r){var n=null,i=null,o=function(){i==null||i.unsubscribe();var a=n;n=[],a&&r.next(a),ht(t()).subscribe(i=new me(r,o,Lt))};o(),e.subscribe(new me(r,function(a){return n==null?void 0:n.push(a)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=i=null}))})}function hv(t){return we(function(e,r){var n=null,i=!1,o;n=e.subscribe(new me(r,void 0,void 0,function(a){o=ht(t(a,hv(t)(e))),n?(n.unsubscribe(),n=null,o.subscribe(r)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(r))})}function Qx(t,e,r,n,i){return function(o,a){var s=r,u=e,f=0;o.subscribe(new me(a,function(c){var h=f++;u=s?t(u,c,h):(s=!0,c),n&&a.next(u)},i&&function(){s&&a.next(u),a.complete()}))}}function ls(t,e){return we(Qx(t,e,arguments.length>=2,!1,!0))}var HB=function(t,e){return t.push(e),t};function dv(){return we(function(t,e){ls(HB,[])(t).subscribe(e)})}function e6(t,e){return Vp(dv(),En(function(r){return t(r)}),e?Zo(e):pr)}function pv(t){return e6(Dx,t)}var t6=pv;function vv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Iu(t);return r?Vp(vv.apply(void 0,At([],St(t))),Zo(r)):we(function(n,i){Bx(At([n],St(Qo(t))))(i)})}function r6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return vv.apply(void 0,At([],St(t)))}function xl(t,e){return Ke(e)?En(t,e,1):En(t,1)}function n6(t,e){return Ke(e)?xl(function(){return t},e):xl(function(){return t})}function i6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Bi(t);return we(function(n,i){_l()(Wn(At([n],St(t)),r)).subscribe(i)})}function o6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i6.apply(void 0,At([],St(t)))}function WB(t){return new vt(function(e){return t.subscribe(e)})}var KB={connector:function(){return new Gt}};function El(t,e){e===void 0&&(e=KB);var r=e.connector;return we(function(n,i){var o=r();Wn(t(WB(o))).subscribe(i),i.add(n.subscribe(o))})}function a6(t){return ls(function(e,r,n){return!t||t(r,n)?e+1:e},0)}function s6(t){return we(function(e,r){var n=!1,i=null,o=null,a=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var s=i;i=null,r.next(s)}};e.subscribe(new me(r,function(s){o==null||o.unsubscribe(),n=!0,i=s,o=new me(r,a,Lt),ht(t(s)).subscribe(o)},function(){a(),r.complete()},void 0,function(){i=o=null}))})}function u6(t,e){return e===void 0&&(e=bi),we(function(r,n){var i=null,o=null,a=null,s=function(){if(i){i.unsubscribe(),i=null;var f=o;o=null,n.next(f)}};function u(){var f=a+t,c=e.now();if(c<f){i=this.schedule(void 0,f-c),n.add(i);return}s()}r.subscribe(new me(n,function(f){o=f,a=e.now(),i||(i=e.schedule(u,t),n.add(i))},function(){s(),n.complete()},void 0,function(){o=i=null}))})}function Ou(t){return we(function(e,r){var n=!1;e.subscribe(new me(r,function(i){n=!0,r.next(i)},function(){n||r.next(t),r.complete()}))})}function ea(t){return t<=0?function(){return Hn}:we(function(e,r){var n=0;e.subscribe(new me(r,function(i){++n<=t&&(r.next(i),t<=n&&r.complete())}))})}function mv(){return we(function(t,e){t.subscribe(new me(e,Lt))})}function bv(t){return Ui(function(){return t})}function Sl(t,e){return e?function(r){return Tu(e.pipe(ea(1),mv()),r.pipe(Sl(t)))}:En(function(r,n){return t(r,n).pipe(ea(1),bv(r))})}function f6(t,e){e===void 0&&(e=bi);var r=cs(t,e);return Sl(function(){return r})}function c6(){return we(function(t,e){t.subscribe(new me(e,function(r){return Nx(r,e)}))})}function l6(t,e){return we(function(r,n){var i=new Set;r.subscribe(new me(n,function(o){var a=t?t(o):o;i.has(a)||(i.add(a),n.next(o))})),e==null||e.subscribe(new me(n,function(){return i.clear()},Lt))})}function yv(t,e){return e===void 0&&(e=pr),t=t!=null?t:VB,we(function(r,n){var i,o=!0;r.subscribe(new me(n,function(a){var s=e(a);(o||!t(i,s))&&(o=!1,i=s,n.next(a))}))})}function VB(t,e){return t===e}function h6(t,e){return yv(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function $u(t){return t===void 0&&(t=JB),we(function(e,r){var n=!1;e.subscribe(new me(r,function(i){n=!0,r.next(i)},function(){return n?r.complete():r.error(t())}))})}function JB(){return new Xo}function d6(t,e){if(t<0)throw new ov;var r=arguments.length>=2;return function(n){return n.pipe(yi(function(i,o){return o===t}),ea(1),r?Ou(e):$u(function(){return new ov}))}}function p6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return Tu(r,nv.apply(void 0,At([],St(t))))}}function v6(t,e){return we(function(r,n){var i=0;r.subscribe(new me(n,function(o){t.call(e,o,i++,r)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}function gv(){return we(function(t,e){var r=!1,n=null;t.subscribe(new me(e,function(i){n||(n=ht(i).subscribe(new me(e,void 0,function(){n=null,r&&e.complete()})))},function(){r=!0,!n&&e.complete()}))})}var m6=gv;function wv(t,e){return e?function(r){return r.pipe(wv(function(n,i){return ht(t(n,i)).pipe(Ui(function(o,a){return e(n,o,i,a)}))}))}:we(function(r,n){var i=0,o=null,a=!1;r.subscribe(new me(n,function(s){o||(o=new me(n,void 0,function(){o=null,a&&n.complete()}),ht(t(s,i++)).subscribe(o))},function(){a=!0,!o&&n.complete()}))})}function b6(t,e,r){return e===void 0&&(e=1/0),e=(e||0)<1?1/0:e,we(function(n,i){return uv(n,i,t,e,void 0,!0,r)})}function y6(t){return we(function(e,r){try{e.subscribe(r)}finally{r.add(t)}})}function g6(t,e){return we(w6(t,e,"value"))}function w6(t,e,r){var n=r==="index";return function(i,o){var a=0;i.subscribe(new me(o,function(s){var u=a++;t.call(e,s,u,i)&&(o.next(n?u:s),o.complete())},function(){o.next(n?-1:void 0),o.complete()}))}}function _6(t,e){return we(w6(t,e,"index"))}function x6(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?yi(function(i,o){return t(i,o,n)}):pr,ea(1),r?Ou(e):$u(function(){return new Xo}))}}function E6(t,e,r,n){return we(function(i,o){var a;!e||typeof e=="function"?a=e:(r=e.duration,a=e.element,n=e.connector);var s=new Map,u=function(b){s.forEach(b),b(o)},f=function(b){return u(function(w){return w.error(b)})},c=new YB(o,function(b){try{var w=t(b),A=s.get(w);if(!A){s.set(w,A=n?n():new Gt);var _=h(w,A);if(o.next(_),r){var T=new me(A,function(){A.complete(),T==null||T.unsubscribe()},void 0,void 0,function(){return s.delete(w)});c.add(ht(r(_)).subscribe(T))}}A.next(a?a(b):b)}catch(P){f(P)}},function(){return u(function(b){return b.complete()})},f,function(){return s.clear()});i.subscribe(c);function h(b,w){var A=new vt(function(_){c.activeGroups++;var T=w.subscribe(_);return function(){T.unsubscribe(),--c.activeGroups==0&&c.teardownAttempted&&c.unsubscribe()}});return A.key=b,A}})}var YB=function(t){Ut(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.activeGroups=0,r.teardownAttempted=!1,r}return e.prototype.unsubscribe=function(){this.teardownAttempted=!0,this.activeGroups===0&&t.prototype.unsubscribe.call(this)},e}(me);function S6(){return we(function(t,e){t.subscribe(new me(e,function(){e.next(!1),e.complete()},function(){e.next(!0),e.complete()}))})}function _v(t){return t<=0?function(){return Hn}:we(function(e,r){var n=[];e.subscribe(new me(r,function(i){n.push(i),t<n.length&&n.shift()},function(){var i,o;try{for(var a=qr(n),s=a.next();!s.done;s=a.next()){var u=s.value;r.next(u)}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}r.complete()},void 0,function(){n=null}))})}function A6(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?yi(function(i,o){return t(i,o,n)}):pr,_v(1),r?Ou(e):$u(function(){return new Xo}))}}function I6(){return we(function(t,e){t.subscribe(new me(e,function(r){e.next(gl.createNext(r))},function(){e.next(gl.createComplete()),e.complete()},function(r){e.next(gl.createError(r)),e.complete()}))})}function P6(t){return ls(Ke(t)?function(e,r){return t(e,r)>0?e:r}:function(e,r){return e>r?e:r})}var M6=En;function k6(t,e,r){return r===void 0&&(r=1/0),Ke(e)?En(function(){return t},e,r):(typeof e=="number"&&(r=e),En(function(){return t},r))}function T6(t,e,r){return r===void 0&&(r=1/0),we(function(n,i){var o=e;return uv(n,i,function(a,s){return t(o,a,s)},r,function(a){o=a},!1,void 0,function(){return o=null})})}function N6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Bi(t),n=bx(t,1/0);return t=Qo(t),we(function(i,o){ku(n)(Wn(At([i],St(t)),r)).subscribe(o)})}function O6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N6.apply(void 0,At([],St(t)))}function $6(t){return ls(Ke(t)?function(e,r){return t(e,r)<0?e:r}:function(e,r){return e<r?e:r})}function Al(t,e){var r=Ke(t)?t:function(){return t};return Ke(e)?El(e,{connector:r}):function(n){return new pl(n,r)}}function R6(){return we(function(t,e){var r,n=!1;t.subscribe(new me(e,function(i){var o=r;r=i,n&&e.next([o,i]),n=!0}))})}function C6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return Ui(function(n){for(var i=n,o=0;o<r;o++){var a=i==null?void 0:i[t[o]];if(typeof a!="undefined")i=a;else return}return i})}function L6(t){return t?function(e){return El(t)(e)}:function(e){return Al(new Gt)(e)}}function D6(t){return function(e){var r=new cx(t);return new pl(e,function(){return r})}}function B6(){return function(t){var e=new Xp;return new pl(t,function(){return e})}}function U6(t,e,r,n){r&&!Ke(r)&&(n=r);var i=Ke(r)?r:void 0;return function(o){return Al(new Yp(t,e,n),i)(o)}}function xv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?we(function(r,n){Wx(At([r],St(t)))(n)}):pr}function F6(t){return t===void 0&&(t=1/0),t<=0?function(){return Hn}:we(function(e,r){var n=0,i,o=function(){var a=!1;i=e.subscribe(new me(r,void 0,function(){++n<t?i?(i.unsubscribe(),i=null,o()):a=!0:r.complete()})),a&&(i.unsubscribe(),i=null,o())};o()})}function j6(t){return we(function(e,r){var n,i=!1,o,a=!1,s=!1,u=function(){return s&&a&&(r.complete(),!0)},f=function(){return o||(o=new Gt,t(o).subscribe(new me(r,function(){n?c():i=!0},function(){a=!0,u()}))),o},c=function(){s=!1,n=e.subscribe(new me(r,void 0,function(){s=!0,!u()&&f().next()})),i&&(n.unsubscribe(),n=null,i=!1,c())};c()})}function z6(t){t===void 0&&(t=1/0);var e;t&&typeof t=="object"?e=t:e={count:t};var r=e.count,n=r===void 0?1/0:r,i=e.delay,o=e.resetOnSuccess,a=o===void 0?!1:o;return n<=0?pr:we(function(s,u){var f=0,c,h=function(){var b=!1;c=s.subscribe(new me(u,function(w){a&&(f=0),u.next(w)},void 0,function(w){if(f++<n){var A=function(){c?(c.unsubscribe(),c=null,h()):b=!0};if(i!=null){var _=typeof i=="number"?cs(i):ht(i(w,f)),T=new me(u,function(){T.unsubscribe(),A()},function(){u.complete()});_.subscribe(T)}else A()}else u.error(w)})),b&&(c.unsubscribe(),c=null,h())};h()})}function q6(t){return we(function(e,r){var n,i=!1,o,a=function(){n=e.subscribe(new me(r,void 0,void 0,function(s){o||(o=new Gt,t(o).subscribe(new me(r,function(){return n?a():i=!0}))),o&&o.next(s)})),i&&(n.unsubscribe(),n=null,i=!1,a())};a()})}function Ev(t){return we(function(e,r){var n=!1,i=null;e.subscribe(new me(r,function(a){n=!0,i=a}));var o=function(){if(n){n=!1;var a=i;i=null,r.next(a)}};t.subscribe(new me(r,o,Lt))})}function G6(t,e){return e===void 0&&(e=bi),Ev(zx(t,e))}function Sv(t,e){return we(Qx(t,e,arguments.length>=2,!0))}function H6(t,e){return e===void 0&&(e=function(r,n){return r===n}),we(function(r,n){var i=W6(),o=W6(),a=function(u){n.next(u),n.complete()},s=function(u,f){var c=new me(n,function(h){var b=f.buffer,w=f.complete;b.length===0?w?a(!1):u.buffer.push(h):!e(h,b.shift())&&a(!1)},function(){u.complete=!0;var h=f.complete,b=f.buffer;h&&a(b.length===0),c==null||c.unsubscribe()});return c};r.subscribe(s(i,o)),t.subscribe(s(o,i))})}function W6(){return{buffer:[],complete:!1}}function Av(t){t===void 0&&(t={});var e=t.connector,r=e===void 0?function(){return new Gt}:e,n=t.resetOnError,i=n===void 0?!0:n,o=t.resetOnComplete,a=o===void 0?!0:o,s=t.resetOnRefCountZero,u=s===void 0?!0:s;return function(f){var c=null,h=null,b=null,w=0,A=!1,_=!1,T=function(){h==null||h.unsubscribe(),h=null},P=function(){T(),c=b=null,A=_=!1},F=function(){var j=c;P(),j==null||j.unsubscribe()};return we(function(j,U){w++,!_&&!A&&T();var L=b=b!=null?b:r();U.add(function(){w--,w===0&&!_&&!A&&(h=Iv(F,u))}),L.subscribe(U),c||(c=new hl({next:function(G){return L.next(G)},error:function(G){_=!0,T(),h=Iv(P,i,G),L.error(G)},complete:function(){A=!0,T(),h=Iv(P,a),L.complete()}}),Wn(j).subscribe(c))})(f)}}function Iv(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return e===!0?(t(),null):e===!1?null:e.apply(void 0,At([],St(r))).pipe(ea(1)).subscribe(function(){return t()})}function K6(t,e,r){var n,i,o,a=!1;return t&&typeof t=="object"?(o=(n=t.bufferSize)!==null&&n!==void 0?n:1/0,e=(i=t.windowTime)!==null&&i!==void 0?i:1/0,a=!!t.refCount,r=t.scheduler):o=t!=null?t:1/0,Av({connector:function(){return new Yp(o,e,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function V6(t){return we(function(e,r){var n=!1,i,o=!1,a=0;e.subscribe(new me(r,function(s){o=!0,(!t||t(s,a++,e))&&(n&&r.error(new $x("Too many matching values")),n=!0,i=s)},function(){n?(r.next(i),r.complete()):r.error(o?new Ox("No matching values"):new Xo)}))})}function J6(t){return yi(function(e,r){return t<=r})}function Y6(t){return t<=0?pr:we(function(e,r){var n=new Array(t),i=0;return e.subscribe(new me(r,function(o){var a=i++;if(a<t)n[a]=o;else{var s=a%t,u=n[s];n[s]=o,r.next(u)}})),function(){n=null}})}function X6(t){return we(function(e,r){var n=!1,i=new me(r,function(){i==null||i.unsubscribe(),n=!0},Lt);ht(t).subscribe(i),e.subscribe(new me(r,function(o){return n&&r.next(o)}))})}function Z6(t){return we(function(e,r){var n=!1,i=0;e.subscribe(new me(r,function(o){return(n||(n=!t(o,i++)))&&r.next(o)}))})}function Q6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Bi(t);return we(function(n,i){(r?Tu(t,n,r):Tu(t,n)).subscribe(i)})}function hs(t,e){return we(function(r,n){var i=null,o=0,a=!1,s=function(){return a&&!i&&n.complete()};r.subscribe(new me(n,function(u){i==null||i.unsubscribe();var f=0,c=o++;ht(t(u,c)).subscribe(i=new me(n,function(h){return n.next(e?e(u,h,c,f++):h)},function(){i=null,s()}))},function(){a=!0,s()}))})}function e5(){return hs(pr)}function t5(t,e){return Ke(e)?hs(function(){return t},e):hs(function(){return t})}function r5(t,e){return we(function(r,n){var i=e;return hs(function(o,a){return t(i,o,a)},function(o,a){return i=a,a})(r).subscribe(n),function(){i=null}})}function n5(t){return we(function(e,r){ht(t).subscribe(new me(r,function(){return r.complete()},Lt)),!r.closed&&e.subscribe(r)})}function i5(t,e){return e===void 0&&(e=!1),we(function(r,n){var i=0;r.subscribe(new me(n,function(o){var a=t(o,i++);(a||e)&&n.next(o),!a&&n.complete()}))})}function o5(t,e,r){var n=Ke(t)||e||r?{next:t,error:e,complete:r}:t;return n?we(function(i,o){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;i.subscribe(new me(o,function(u){var f;(f=n.next)===null||f===void 0||f.call(n,u),o.next(u)},function(){var u;s=!1,(u=n.complete)===null||u===void 0||u.call(n),o.complete()},function(u){var f;s=!1,(f=n.error)===null||f===void 0||f.call(n,u),o.error(u)},function(){var u,f;s&&((u=n.unsubscribe)===null||u===void 0||u.call(n)),(f=n.finalize)===null||f===void 0||f.call(n)}))}):pr}var a5={leading:!0,trailing:!1};function Pv(t,e){var r=e===void 0?a5:e,n=r.leading,i=r.trailing;return we(function(o,a){var s=!1,u=null,f=null,c=!1,h=function(){f==null||f.unsubscribe(),f=null,i&&(A(),c&&a.complete())},b=function(){f=null,c&&a.complete()},w=function(_){return f=ht(t(_)).subscribe(new me(a,h,b))},A=function(){if(s){s=!1;var _=u;u=null,a.next(_),!c&&w(_)}};o.subscribe(new me(a,function(_){s=!0,u=_,!(f&&!f.closed)&&(n?A():w(_))},function(){c=!0,!(i&&s&&f&&!f.closed)&&a.complete()}))})}function s5(t,e,r){e===void 0&&(e=bi),r===void 0&&(r=a5);var n=cs(t,e);return Pv(function(){return n},r)}function u5(t){return t===void 0&&(t=Au),function(e){return Nu(function(){return e.pipe(Sv(function(r,n){var i=r.current;return{value:n,current:t.now(),last:i}},{current:t.now(),value:void 0,last:void 0}),Ui(function(r){var n=r.current,i=r.last,o=r.value;return new XB(o,n-i)}))})}}var XB=function(){function t(e,r){this.value=e,this.interval=r}return t}();function f5(t,e,r){var n,i,o;if(r=r!=null?r:Au,av(t)?n=t:typeof t=="number"&&(i=t),e)o=function(){return e};else throw new TypeError("No observable provided to switch to");if(n==null&&i==null)throw new TypeError("No timeout provided.");return sv({first:n,each:i,scheduler:r,with:o})}function c5(t){return t===void 0&&(t=vl),Ui(function(e){return{value:e,timestamp:t.now()}})}function l5(t){return we(function(e,r){var n=new Gt;r.next(n.asObservable());var i=function(o){n.error(o),r.error(o)};return e.subscribe(new me(r,function(o){return n==null?void 0:n.next(o)},function(){n.complete(),r.complete()},i)),t.subscribe(new me(r,function(){n.complete(),r.next(n=new Gt)},Lt,i)),function(){n==null||n.unsubscribe(),n=null}})}function h5(t,e){e===void 0&&(e=0);var r=e>0?e:t;return we(function(n,i){var o=[new Gt],a=[],s=0;i.next(o[0].asObservable()),n.subscribe(new me(i,function(u){var f,c;try{for(var h=qr(o),b=h.next();!b.done;b=h.next()){var w=b.value;w.next(u)}}catch(T){f={error:T}}finally{try{b&&!b.done&&(c=h.return)&&c.call(h)}finally{if(f)throw f.error}}var A=s-t+1;if(A>=0&&A%r==0&&o.shift().complete(),++s%r==0){var _=new Gt;o.push(_),i.next(_.asObservable())}},function(){for(;o.length>0;)o.shift().complete();i.complete()},function(u){for(;o.length>0;)o.shift().error(u);i.error(u)},function(){a=null,o=null}))})}function d5(t){for(var e,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(e=Bi(n))!==null&&e!==void 0?e:bi,a=(r=n[0])!==null&&r!==void 0?r:null,s=n[1]||1/0;return we(function(u,f){var c=[],h=!1,b=function(T){var P=T.window,F=T.subs;P.complete(),F.unsubscribe(),Di(c,T),h&&w()},w=function(){if(c){var T=new Nr;f.add(T);var P=new Gt,F={window:P,subs:T,seen:0};c.push(F),f.next(P.asObservable()),Gr(T,o,function(){return b(F)},t)}};a!==null&&a>=0?Gr(f,o,w,a,!0):h=!0,w();var A=function(T){return c.slice().forEach(T)},_=function(T){A(function(P){var F=P.window;return T(F)}),T(f),f.unsubscribe()};return u.subscribe(new me(f,function(T){A(function(P){P.window.next(T),s<=++P.seen&&b(P)})},function(){return _(function(T){return T.complete()})},function(T){return _(function(P){return P.error(T)})})),function(){c=null}})}function p5(t,e){return we(function(r,n){var i=[],o=function(a){for(;0<i.length;)i.shift().error(a);n.error(a)};ht(t).subscribe(new me(n,function(a){var s=new Gt;i.push(s);var u=new Nr,f=function(){Di(i,s),s.complete(),u.unsubscribe()},c;try{c=ht(e(a))}catch(h){o(h);return}n.next(s.asObservable()),u.add(c.subscribe(new me(n,f,Lt,o)))},Lt)),r.subscribe(new me(n,function(a){var s,u,f=i.slice();try{for(var c=qr(f),h=c.next();!h.done;h=c.next()){var b=h.value;b.next(a)}}catch(w){s={error:w}}finally{try{h&&!h.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}},function(){for(;0<i.length;)i.shift().complete();n.complete()},o,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}function v5(t){return we(function(e,r){var n,i,o=function(s){n.error(s),r.error(s)},a=function(){i==null||i.unsubscribe(),n==null||n.complete(),n=new Gt,r.next(n.asObservable());var s;try{s=ht(t())}catch(u){o(u);return}s.subscribe(i=new me(r,a,a,o))};a(),e.subscribe(new me(r,function(s){return n.next(s)},function(){n.complete(),r.complete()},o,function(){i==null||i.unsubscribe(),n=null}))})}function m5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Iu(t);return we(function(n,i){for(var o=t.length,a=new Array(o),s=t.map(function(){return!1}),u=!1,f=function(h){ht(t[h]).subscribe(new me(i,function(b){a[h]=b,!u&&!s[h]&&(s[h]=!0,(u=s.every(pr))&&(s=null))},Lt))},c=0;c<o;c++)f(c);n.subscribe(new me(i,function(h){if(u){var b=At([h],St(a));i.next(r?r.apply(void 0,At([],St(b))):b)}}))})}function b5(t){return e6(cv,t)}function y5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return we(function(r,n){cv.apply(void 0,At([r],St(t))).subscribe(n)})}function g5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y5.apply(void 0,At([],St(t)))}var ZB=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Observable:vt,ConnectableObservable:pl,observable:dl,animationFrames:DD,Subject:Gt,BehaviorSubject:cx,ReplaySubject:Yp,AsyncSubject:Xp,asap:HD,asapScheduler:dx,async:Au,asyncScheduler:bi,queue:VD,queueScheduler:px,animationFrame:XD,animationFrameScheduler:vx,VirtualTimeScheduler:ZD,VirtualAction:mx,Scheduler:ev,Subscription:Nr,Subscriber:ll,Notification:gl,get NotificationKind(){return iv},pipe:Vp,noop:Lt,identity:pr,isObservable:hB,lastValueFrom:dB,firstValueFrom:pB,ArgumentOutOfRangeError:ov,EmptyError:Xo,NotFoundError:Ox,ObjectUnsubscribedError:ux,SequenceError:$x,TimeoutError:Rx,UnsubscriptionError:ul,bindCallback:yB,bindNodeCallback:gB,combineLatest:Dx,concat:Tu,connectable:IB,defer:Nu,empty:QD,forkJoin:PB,from:Wn,fromEvent:fv,fromEventPattern:jx,generate:RB,iif:CB,interval:zx,merge:LB,never:DB,of:nv,onErrorResumeNext:UB,pairs:FB,partition:jB,race:zB,range:qB,throwError:Tx,timer:cs,using:GB,zip:cv,scheduled:kx,EMPTY:Hn,NEVER:qx,config:ao,audit:lv,auditTime:Kx,buffer:Vx,bufferCount:Jx,bufferTime:Yx,bufferToggle:Xx,bufferWhen:Zx,catchError:hv,combineAll:t6,combineLatestAll:pv,combineLatestWith:r6,concatAll:_l,concatMap:xl,concatMapTo:n6,concatWith:o6,connect:El,count:a6,debounce:s6,debounceTime:u6,defaultIfEmpty:Ou,delay:f6,delayWhen:Sl,dematerialize:c6,distinct:l6,distinctUntilChanged:yv,distinctUntilKeyChanged:h6,elementAt:d6,endWith:p6,every:v6,exhaust:m6,exhaustAll:gv,exhaustMap:wv,expand:b6,filter:yi,finalize:y6,find:g6,findIndex:_6,first:x6,groupBy:E6,ignoreElements:mv,isEmpty:S6,last:A6,map:Ui,mapTo:bv,materialize:I6,max:P6,mergeAll:ku,flatMap:M6,mergeMap:En,mergeMapTo:k6,mergeScan:T6,mergeWith:O6,min:$6,multicast:Al,observeOn:Pu,pairwise:R6,pluck:C6,publish:L6,publishBehavior:D6,publishLast:B6,publishReplay:U6,raceWith:xv,reduce:ls,repeat:F6,repeatWhen:j6,retry:z6,retryWhen:q6,refCount:Jp,sample:Ev,sampleTime:G6,scan:Sv,sequenceEqual:H6,share:Av,shareReplay:K6,single:V6,skip:J6,skipLast:Y6,skipUntil:X6,skipWhile:Z6,startWith:Q6,subscribeOn:Mu,switchAll:e5,switchMap:hs,switchMapTo:t5,switchScan:r5,take:ea,takeLast:_v,takeUntil:n5,takeWhile:i5,tap:o5,throttle:Pv,throttleTime:s5,throwIfEmpty:$u,timeInterval:u5,timeout:sv,timeoutWith:f5,timestamp:c5,toArray:dv,window:l5,windowCount:h5,windowTime:d5,windowToggle:p5,windowWhen:v5,withLatestFrom:m5,zipAll:b5,zipWith:g5}),QB=$t(ZB);function eU(t,e){return function(r){return[yi(t,e)(r),yi(Hx(t,e))(r)]}}function tU(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xv.apply(void 0,At([],St(Qo(t))))}var rU=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",audit:lv,auditTime:Kx,buffer:Vx,bufferCount:Jx,bufferTime:Yx,bufferToggle:Xx,bufferWhen:Zx,catchError:hv,combineAll:t6,combineLatestAll:pv,combineLatest:vv,combineLatestWith:r6,concat:i6,concatAll:_l,concatMap:xl,concatMapTo:n6,concatWith:o6,connect:El,count:a6,debounce:s6,debounceTime:u6,defaultIfEmpty:Ou,delay:f6,delayWhen:Sl,dematerialize:c6,distinct:l6,distinctUntilChanged:yv,distinctUntilKeyChanged:h6,elementAt:d6,endWith:p6,every:v6,exhaust:m6,exhaustAll:gv,exhaustMap:wv,expand:b6,filter:yi,finalize:y6,find:g6,findIndex:_6,first:x6,groupBy:E6,ignoreElements:mv,isEmpty:S6,last:A6,map:Ui,mapTo:bv,materialize:I6,max:P6,merge:N6,mergeAll:ku,flatMap:M6,mergeMap:En,mergeMapTo:k6,mergeScan:T6,mergeWith:O6,min:$6,multicast:Al,observeOn:Pu,onErrorResumeNext:Gx,pairwise:R6,partition:eU,pluck:C6,publish:L6,publishBehavior:D6,publishLast:B6,publishReplay:U6,race:tU,raceWith:xv,reduce:ls,repeat:F6,repeatWhen:j6,retry:z6,retryWhen:q6,refCount:Jp,sample:Ev,sampleTime:G6,scan:Sv,sequenceEqual:H6,share:Av,shareReplay:K6,single:V6,skip:J6,skipLast:Y6,skipUntil:X6,skipWhile:Z6,startWith:Q6,subscribeOn:Mu,switchAll:e5,switchMap:hs,switchMapTo:t5,switchScan:r5,take:ea,takeLast:_v,takeUntil:n5,takeWhile:i5,tap:o5,throttle:Pv,throttleTime:s5,throwIfEmpty:$u,timeInterval:u5,timeout:sv,timeoutWith:f5,timestamp:c5,toArray:dv,window:l5,windowCount:h5,windowTime:d5,windowToggle:p5,windowWhen:v5,withLatestFrom:m5,zip:y5,zipAll:b5,zipWith:g5}),nU=$t(rU),w5={},iU=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),_5="%[a-f0-9]{2}",x5=new RegExp(_5,"gi"),E5=new RegExp("("+_5+")+","gi");function Mv(t,e){try{return decodeURIComponent(t.join(""))}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Mv(r),Mv(n))}function oU(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(x5),r=1;r<e.length;r++)t=Mv(e,r).join(""),e=t.match(x5);return t}}function aU(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=E5.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=oU(r[0]);n!==r[0]&&(e[r[0]]=n)}r=E5.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),o=0;o<i.length;o++){var a=i[o];t=t.replace(new RegExp(a,"g"),e[a])}return t}var sU=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return aU(t)}},uU=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},fU=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),o=0;o<n.length;o++){var a=n[o],s=t[a];(i?e.indexOf(a)!==-1:e(a,s,t))&&(r[a]=s)}return r};(function(t){const e=iU,r=sU,n=uU,i=fU,o=F=>F==null,a=Symbol("encodeFragmentIdentifier");function s(F){switch(F.arrayFormat){case"index":return j=>(U,L)=>{const G=U.length;return L===void 0||F.skipNull&&L===null||F.skipEmptyString&&L===""?U:L===null?[...U,[c(j,F),"[",G,"]"].join("")]:[...U,[c(j,F),"[",c(G,F),"]=",c(L,F)].join("")]};case"bracket":return j=>(U,L)=>L===void 0||F.skipNull&&L===null||F.skipEmptyString&&L===""?U:L===null?[...U,[c(j,F),"[]"].join("")]:[...U,[c(j,F),"[]=",c(L,F)].join("")];case"comma":case"separator":case"bracket-separator":{const j=F.arrayFormat==="bracket-separator"?"[]=":"=";return U=>(L,G)=>G===void 0||F.skipNull&&G===null||F.skipEmptyString&&G===""?L:(G=G===null?"":G,L.length===0?[[c(U,F),j,c(G,F)].join("")]:[[L,c(G,F)].join(F.arrayFormatSeparator)])}default:return j=>(U,L)=>L===void 0||F.skipNull&&L===null||F.skipEmptyString&&L===""?U:L===null?[...U,c(j,F)]:[...U,[c(j,F),"=",c(L,F)].join("")]}}function u(F){let j;switch(F.arrayFormat){case"index":return(U,L,G)=>{if(j=/\[(\d*)\]$/.exec(U),U=U.replace(/\[\d*\]$/,""),!j){G[U]=L;return}G[U]===void 0&&(G[U]={}),G[U][j[1]]=L};case"bracket":return(U,L,G)=>{if(j=/(\[\])$/.exec(U),U=U.replace(/\[\]$/,""),!j){G[U]=L;return}if(G[U]===void 0){G[U]=[L];return}G[U]=[].concat(G[U],L)};case"comma":case"separator":return(U,L,G)=>{const p=typeof L=="string"&&L.includes(F.arrayFormatSeparator),I=typeof L=="string"&&!p&&h(L,F).includes(F.arrayFormatSeparator);L=I?h(L,F):L;const C=p||I?L.split(F.arrayFormatSeparator).map(V=>h(V,F)):L===null?L:h(L,F);G[U]=C};case"bracket-separator":return(U,L,G)=>{const p=/(\[\])$/.test(U);if(U=U.replace(/\[\]$/,""),!p){G[U]=L&&h(L,F);return}const I=L===null?[]:L.split(F.arrayFormatSeparator).map(C=>h(C,F));if(G[U]===void 0){G[U]=I;return}G[U]=[].concat(G[U],I)};default:return(U,L,G)=>{if(G[U]===void 0){G[U]=L;return}G[U]=[].concat(G[U],L)}}}function f(F){if(typeof F!="string"||F.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function c(F,j){return j.encode?j.strict?e(F):encodeURIComponent(F):F}function h(F,j){return j.decode?r(F):F}function b(F){return Array.isArray(F)?F.sort():typeof F=="object"?b(Object.keys(F)).sort((j,U)=>Number(j)-Number(U)).map(j=>F[j]):F}function w(F){const j=F.indexOf("#");return j!==-1&&(F=F.slice(0,j)),F}function A(F){let j="";const U=F.indexOf("#");return U!==-1&&(j=F.slice(U)),j}function _(F){F=w(F);const j=F.indexOf("?");return j===-1?"":F.slice(j+1)}function T(F,j){return j.parseNumbers&&!Number.isNaN(Number(F))&&typeof F=="string"&&F.trim()!==""?F=Number(F):j.parseBooleans&&F!==null&&(F.toLowerCase()==="true"||F.toLowerCase()==="false")&&(F=F.toLowerCase()==="true"),F}function P(F,j){j=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},j),f(j.arrayFormatSeparator);const U=u(j),L=Object.create(null);if(typeof F!="string"||(F=F.trim().replace(/^[?#&]/,""),!F))return L;for(const G of F.split("&")){if(G==="")continue;let[p,I]=n(j.decode?G.replace(/\+/g," "):G,"=");I=I===void 0?null:["comma","separator","bracket-separator"].includes(j.arrayFormat)?I:h(I,j),U(h(p,j),I,L)}for(const G of Object.keys(L)){const p=L[G];if(typeof p=="object"&&p!==null)for(const I of Object.keys(p))p[I]=T(p[I],j);else L[G]=T(p,j)}return j.sort===!1?L:(j.sort===!0?Object.keys(L).sort():Object.keys(L).sort(j.sort)).reduce((G,p)=>{const I=L[p];return Boolean(I)&&typeof I=="object"&&!Array.isArray(I)?G[p]=b(I):G[p]=I,G},Object.create(null))}t.extract=_,t.parse=P,t.stringify=(F,j)=>{if(!F)return"";j=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},j),f(j.arrayFormatSeparator);const U=I=>j.skipNull&&o(F[I])||j.skipEmptyString&&F[I]==="",L=s(j),G={};for(const I of Object.keys(F))U(I)||(G[I]=F[I]);const p=Object.keys(G);return j.sort!==!1&&p.sort(j.sort),p.map(I=>{const C=F[I];return C===void 0?"":C===null?c(I,j):Array.isArray(C)?C.length===0&&j.arrayFormat==="bracket-separator"?c(I,j)+"[]":C.reduce(L(I),[]).join("&"):c(I,j)+"="+c(C,j)}).filter(I=>I.length>0).join("&")},t.parseUrl=(F,j)=>{j=Object.assign({decode:!0},j);const[U,L]=n(F,"#");return Object.assign({url:U.split("?")[0]||"",query:P(_(F),j)},j&&j.parseFragmentIdentifier&&L?{fragmentIdentifier:h(L,j)}:{})},t.stringifyUrl=(F,j)=>{j=Object.assign({encode:!0,strict:!0,[a]:!0},j);const U=w(F.url).split("?")[0]||"",L=t.extract(F.url),G=t.parse(L,{sort:!1}),p=Object.assign(G,F.query);let I=t.stringify(p,j);I&&(I=`?${I}`);let C=A(F.url);return F.fragmentIdentifier&&(C=`#${j[a]?c(F.fragmentIdentifier,j):F.fragmentIdentifier}`),`${U}${I}${C}`},t.pick=(F,j,U)=>{U=Object.assign({parseFragmentIdentifier:!0,[a]:!1},U);const{url:L,query:G,fragmentIdentifier:p}=t.parseUrl(F,U);return t.stringifyUrl({url:L,query:i(G,j),fragmentIdentifier:p},U)},t.exclude=(F,j,U)=>{const L=Array.isArray(j)?G=>!j.includes(G):(G,p)=>!j(G,p);return t.pick(F,L,U)}})(w5);var cU=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sl,"__esModule",{value:!0});sl.Document=void 0;const S5=QB,lU=nU,tn=No,hU=fi,dU=cU(w5);class ta extends S5.Observable{constructor(e,r,n){super(i=>{this.state$.observers.length===0&&(this.periodicSubscription=S5.timer(0,n).pipe(lU.throttle(()=>this._syncState(this.id,{sync:tn.SyncOptions.PREFER_CACHE}))).subscribe()),this.state$.subscribe(i).add(()=>{var a;this.state$.observers.length===0&&((a=this.periodicSubscription)===null||a===void 0||a.unsubscribe())})});this._apiUrl=r,this.state$=new tn.StreamStateSubject(e)}get value(){return this.state$.value}get state(){return this.state$.value}next(e){this.state$.next(e)}async _syncState(e,r){const n=await ta._load(e,this._apiUrl,r);this.state$.next(tn.StreamUtils.deserializeState(n))}get id(){return new hU.StreamID(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(e,r,n,i,o){const{state:a}=await tn.fetchJson(e+"/streams",{method:"post",body:{type:r,genesis:tn.StreamUtils.serializeCommit(n),opts:i}});return new ta(tn.StreamUtils.deserializeState(a),e,o)}static async applyCommit(e,r,n,i,o){const{state:a}=await tn.fetchJson(e+"/commits",{method:"post",body:{streamId:r.toString(),commit:tn.StreamUtils.serializeCommit(n),opts:i}});return new ta(tn.StreamUtils.deserializeState(a),e,o)}static async _load(e,r,n){const i=r+"/streams/"+e.toString()+"?"+dU.default.stringify(n),{state:o}=await tn.fetchJson(i);return o}static async load(e,r,n,i){const o=await ta._load(e,r,i);return new ta(tn.StreamUtils.deserializeState(o),r,n)}static async loadStreamCommits(e,r){const{commits:n}=await tn.fetchJson(`${r}/commits/${e}`);return n.map(i=>({cid:i.cid,value:tn.StreamUtils.deserializeCommit(i.value)}))}complete(){this.state$.complete()}}sl.Document=ta;var kv={},Il={},pU=te&&te.__decorate||function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},ra;Object.defineProperty(Il,"__esModule",{value:!0});Il.Caip10Link=void 0;const Pl=No,vU=fi,mU=si,Tv=()=>{throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")},A5={anchor:!1,publish:!0,sync:Pl.SyncOptions.PREFER_CACHE},I5={anchor:!0,publish:!0,throwOnInvalidCommit:!0},bU={sync:Pl.SyncOptions.PREFER_CACHE};let Ru=ra=class extends Pl.Stream{constructor(){super(...arguments);this._isReadOnly=!1}get did(){return this.content}static async fromAccount(e,r,n={}){n=ye(ye({},A5),n);const i=new mU.AccountID(r),o=ra.makeGenesis(i);return ra.fromGenesis(e,o,n)}static async fromGenesis(e,r,n={}){return n=ye(ye({},A5),n),e.createStreamFromGenesis(ra.STREAM_TYPE_ID,r,n)}async setDid(e,r,n={}){n=ye(ye({},I5),n);const i=typeof e=="string"?e:e.id,o=await r.createLink(i);return this.setDidProof(o,n)}async setDidProof(e,r={}){r=ye(ye({},I5),r);const n=this.makeCommit(e),i=await this.api.applyCommit(this.id,n,r);this.state$.next(i.state)}static async load(e,r,n={}){n=ye(ye({},bU),n);const i=vU.StreamRef.from(r);if(i.type!=ra.STREAM_TYPE_ID)throw new Error(`StreamID ${i.toString()} does not refer to a '${ra.STREAM_TYPE_NAME}' stream, but to a ${i.typeName}`);return e.loadStream(i,n)}static makeGenesis(e){return e.chainId.namespace==="eip155"&&(e.address=e.address.toLowerCase()),{header:{controllers:[e.toString()],family:`caip10-${e.chainId.toString()}`}}}makeCommit(e){return{data:e,prev:this.tip,id:this.state$.id.cid}}makeReadOnly(){this.setDidProof=Tv,this.setDid=Tv,this.sync=Tv,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}};Ru.STREAM_TYPE_NAME="caip10-link";Ru.STREAM_TYPE_ID=1;Ru=ra=pU([Pl.StreamStatic()],Ru);Il.Caip10Link=Ru;(function(t){var e=te&&te.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),r=te&&te.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(Il,t)})(kv);var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.RemotePinApi=void 0;const Nv=No;class yU{constructor(e){this._apiUrl=e}async add(e){await Nv.fetchJson(this._apiUrl+`/pins/${e.toString()}`,{method:"post"})}async rm(e,r){await Nv.fetchJson(this._apiUrl+`/pins/${e.toString()}`,{method:"delete",body:{opts:r}})}async ls(e){let r=this._apiUrl+"/pins";e&&(r+=`/${e.toString()}`);const n=await Nv.fetchJson(r),{pinnedStreamIds:i}=n;return{[Symbol.asyncIterator](){let o=0;return{next(){return o===i.length?Promise.resolve({value:null,done:!0}):Promise.resolve({value:i[o++],done:!1})}}}}}}Ml.RemotePinApi=yU;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CeramicClient=t.DEFAULT_CLIENT_CONFIG=void 0;const e=oo,r=sl,n=No,i=Xi,o=kv,a=fi,s=Ml,u="/api/v0",f="http://localhost:7007";t.DEFAULT_CLIENT_CONFIG={syncInterval:5e3};const c={anchor:!0,publish:!0,sync:n.SyncOptions.PREFER_CACHE},h={anchor:!0,publish:!0,sync:n.SyncOptions.PREFER_CACHE},b={sync:n.SyncOptions.PREFER_CACHE};class w{constructor(_=f,T={}){this._config=ye(ye({},t.DEFAULT_CLIENT_CONFIG),T),this._apiUrl=e.combineURLs(_,u),this._streamCache=new Map,this.context={api:this},this.pin=new s.RemotePinApi(this._apiUrl),this._streamConstructors={[i.TileDocument.STREAM_TYPE_ID]:i.TileDocument,[o.Caip10Link.STREAM_TYPE_ID]:o.Caip10Link}}get did(){return this.context.did}set did(_){this.context.did=_}async createStreamFromGenesis(_,T,P={}){P=ye(ye({},h),P);const F=await r.Document.createFromGenesis(this._apiUrl,_,T,P,this._config.syncInterval),j=this._streamCache.get(F.id.toString());return j?(n.StreamUtils.statesEqual(F.state,j.state)||j.next(F.state),this.buildStream(j)):(this._streamCache.set(F.id.toString(),F),this.buildStream(F))}async loadStream(_,T={}){T=ye(ye({},b),T);const P=a.StreamRef.from(_);let F=this._streamCache.get(P.baseID.toString());return F?await F._syncState(P,T):(F=await r.Document.load(P,this._apiUrl,this._config.syncInterval,T),this._streamCache.set(F.id.toString(),F)),this.buildStream(F)}async multiQuery(_){const T=_.map(F=>({streamId:typeof F.streamId=="string"?F.streamId:F.streamId.toString(),paths:F.paths,atTime:F.atTime})),P=await n.fetchJson(this._apiUrl+"/multiqueries",{method:"post",body:{queries:T}});return Object.entries(P).reduce((F,j)=>{const[U,L]=j,G=n.StreamUtils.deserializeState(L),p=new r.Document(G,this._apiUrl,this._config.syncInterval);return F[U]=this.buildStream(p),F},{})}loadStreamCommits(_){const T=e.typeStreamID(_);return r.Document.loadStreamCommits(T,this._apiUrl)}async applyCommit(_,T,P={}){P=ye(ye({},c),P);const F=e.typeStreamID(_),j=await r.Document.applyCommit(this._apiUrl,F,T,P,this._config.syncInterval),U=this._streamCache.get(F.toString());return U?(U.next(j.state),this.buildStream(j)):(this._streamCache.set(F.toString(),j),this.buildStream(j))}async requestAnchor(_,T={}){T=ye(ye({},b),T);const{anchorStatus:P}=await n.fetchJson(`${this._apiUrl}/streams/${_.toString()}/anchor`,{method:"post",body:{opts:T}});return P}addStreamHandler(_){this._streamConstructors[_.name]=_.stream_constructor}findStreamConstructor(_){const T=this._streamConstructors[_];if(T)return T;throw new Error(`Failed to find constructor for stream ${_}`)}buildStream(_){const T=this.findStreamConstructor(_.state.type);return new T(_,this.context)}async setDID(_){this.context.did=_}async getSupportedChains(){if(this._supportedChains)return this._supportedChains;const{supportedChains:_}=await n.fetchJson(this._apiUrl+"/node/chains");return this._supportedChains=_,_}async close(){Array.from(this._streamCache).map(([,_])=>{_.complete()}),this._streamCache.clear()}}t.CeramicClient=w,t.default=w})(X3);var P5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},so=(t,e,r)=>(P5(t,e,"read from private field"),r?r.call(t):e.get(t)),Ov=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},$v=(t,e,r,n)=>(P5(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),kl,na,ds;class Rv{constructor({autopin:e,ceramic:r,model:n}){Ov(this,kl,void 0),Ov(this,na,void 0),Ov(this,ds,void 0),$v(this,kl,e!==!1),$v(this,na,r),$v(this,ds,n)}get ceramic(){return so(this,na)}getDefinitionID(e){var r;return(r=so(this,ds).definitions[e])!=null?r:null}getSchemaURL(e){var r;return(r=so(this,ds).schemas[e])!=null?r:null}getTileID(e){var r;return(r=so(this,ds).tiles[e])!=null?r:null}async loadTile(e){const r=this.getTileID(e);if(r==null)throw new Error(`Tile alias "${e}" is not defined`);return await Xi.TileDocument.load(so(this,na),r)}async createTile(e,r,{pin:n}={}){const i=this.getSchemaURL(e);if(i==null)throw new Error(`Schema alias "${e}" is not defined`);const o=await Xi.TileDocument.create(so(this,na),r,{schema:i});return(n!=null?n:so(this,kl))&&await so(this,na).pin.add(o.id),o}}kl=new WeakMap;na=new WeakMap;ds=new WeakMap;const gU="ceramic://k3y52l7qbv1fry1fp4s0nwdarh0vahusarpposgevy0pemiykymd2ord6swtharcw",Cv="ceramic://k3y52l7qbv1fryjn62sggjh1lpn11c56qfofzmty190d62hwk1cal1c7qc5he54ow";var M5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},gi=(t,e,r)=>(M5(t,e,"read from private field"),r?r.call(t):e.get(t)),Tl=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Nl=(t,e,r,n)=>(M5(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Cu,uo,Ol,Lu;class wU{constructor(e){Tl(this,Cu,void 0),Tl(this,uo,[]),Tl(this,Ol,void 0),Tl(this,Lu,void 0),Nl(this,Cu,e),this._createValuePromise()}_createValuePromise(){Nl(this,Ol,new Promise((e,r)=>{Nl(this,Lu,{resolve:e,reject:r})}))}change(e){return new Promise((r,n)=>{const i=async o=>{try{const a=await e(o);r(),this._next(a)}catch(a){n(a),this._next(o)}};gi(this,uo).push({reject:n,run:i}),gi(this,uo).length===1&&this._start()})}async changeContent(e){const r=async n=>(await n.update(e(n.content),n.metadata),n);return await this.change(r)}async get(){return gi(this,uo).length===0?await gi(this,Cu).call(this):await gi(this,Ol)}async _start(){try{const e=await gi(this,Cu).call(this);this._next(e)}catch(e){gi(this,uo).forEach(r=>{r.reject(e)}),Nl(this,uo,[]),gi(this,Lu).reject(e),this._createValuePromise()}}_next(e){const r=gi(this,uo).shift();r==null?this._end(e):r.run(e)}_end(e){gi(this,Lu).resolve(e),this._createValuePromise()}}Cu=new WeakMap,uo=new WeakMap,Ol=new WeakMap,Lu=new WeakMap;const _U=/^did:([A-Za-z0-9]+):([A-Za-z0-9.\-:_]+)$/;function xU(t){return _U.test(t)}function EU(t){if(!xU(t))throw new Error(`Invalid DID: ${t}`)}var k5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},rn=(t,e,r)=>(k5(t,e,"read from private field"),r?r.call(t):e.get(t)),Lv=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Dv=(t,e,r,n)=>(k5(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Du,Sn,Bu;class SU{constructor({autopin:e,ceramic:r,model:n}){Lv(this,Du,void 0),Lv(this,Sn,void 0),Lv(this,Bu,void 0),Dv(this,Du,e!==!1),Dv(this,Sn,r),this._indexProxy=new wU(this._getOwnIDXDoc.bind(this)),Dv(this,Bu,n instanceof Rv?n:new Rv({autopin:e,ceramic:r,model:n}))}get authenticated(){return rn(this,Sn).did!=null}get ceramic(){return rn(this,Sn)}get id(){if(rn(this,Sn).did==null)throw new Error("Ceramic instance is not authenticated");return rn(this,Sn).did.id}get model(){return rn(this,Bu)}async has(e,r){const n=this.getDefinitionID(e);return await this.getRecordID(n,r)!=null}async get(e,r){const n=this.getDefinitionID(e);return await this.getRecord(n,r)}async set(e,r,n){const i=this.getDefinitionID(e),[o,a]=await this._setRecordOnly(i,r,n);return o&&await this._setReference(i,a),a}async merge(e,r,n){const i=this.getDefinitionID(e),o=await this.getRecord(i),a=o?ye(ye({},o),r):r;return await this.setRecord(i,a,n)}async setAll(e,r){const n=Object.entries(e).map(async([o,a])=>{const s=this.getDefinitionID(o),[u,f]=await this._setRecordOnly(s,a,r);return[u,s,f]}),i=(await Promise.all(n)).reduce((o,[a,s,u])=>(a&&(o[s]=u.toUrl()),o),{});return await this._setReferences(i),i}async setDefaults(e,r){var a;const n=(a=await this.getIndex())!=null?a:{},i=Object.entries(e).map(([s,u])=>[this.getDefinitionID(s),u]).filter(s=>n[s[0]]==null).map(async([s,u])=>{const f=await this.getDefinition(s),c=await this._createRecord(f,u,r);return{[s]:c.toUrl()}}),o=(await Promise.all(i)).reduce((s,u)=>Object.assign(s,u),{});return await this._setReferences(o),o}async remove(e){await this._indexProxy.changeContent(r=>(r&&delete r[this.getDefinitionID(e)],r))}async getIndex(e){const r=this.authenticated&&(e===this.id||e==null)?await this._indexProxy.get():await this._getIDXDoc(e!=null?e:this.id);return r?r.content:null}iterator(e){let r,n=0;return{[Symbol.asyncIterator](){return this},next:async()=>{if(r==null){const s=await this.getIndex(e);r=Object.entries(s!=null?s:{})}if(n===r.length)return{done:!0,value:null};const[i,o]=r[n++],a=await this._loadDocument(o);return{done:!1,value:{key:i,id:o,record:a.content}}}}}async _createIDXDoc(e){return EU(e),await Xi.TileDocument.create(rn(this,Sn),null,{deterministic:!0,controllers:[e],family:"IDX"},{anchor:!1,publish:!1})}async _getIDXDoc(e){const r=await this._createIDXDoc(e);if(r.content==null||r.metadata.schema==null)return null;if(r.metadata.schema!==Cv)throw new Error("Invalid document: schema is not IdentityIndex");return r}async _getOwnIDXDoc(){const e=await this._createIDXDoc(this.id);if(e.content==null||e.metadata.schema==null)await e.update({},{schema:Cv}),rn(this,Du)&&await rn(this,Sn).pin.add(e.id);else if(e.metadata.schema!==Cv)throw new Error("Invalid document: schema is not IdentityIndex");return e}getDefinitionID(e){var r;return(r=rn(this,Bu).getDefinitionID(e))!=null?r:e}async getDefinition(e){const r=await this._loadDocument(e);if(r.metadata.schema!==gU)throw new Error("Invalid document: schema is not Definition");return mr(ye({},r.content),{id:r.id})}async getRecordID(e,r){var n,i;return(i=(n=await this.getIndex(r!=null?r:this.id))==null?void 0:n[e])!=null?i:null}async getRecordDocument(e,r){const n=await this.getRecordID(e,r);return n?await this._loadDocument(n):null}async getRecord(e,r){const n=await this.getRecordDocument(e,r);return n?n.content:null}async setRecord(e,r,n){const[i,o]=await this._setRecordOnly(e,r,n);return i&&await this._setReference(e,o),o}async _setRecordOnly(e,r,{pin:n}={}){const i=await this.getRecordID(e,this.id);if(i==null){const o=await this.getDefinition(e),a=await this._createRecord(o,r,{pin:n});return[!0,a]}else{const o=await this._loadDocument(i);return await o.update(r),[!1,o.id]}}async _loadDocument(e){return await Xi.TileDocument.load(rn(this,Sn),e)}async _createRecord(e,r,{pin:n}={}){const i=await Xi.TileDocument.create(rn(this,Sn),null,{deterministic:!0,controllers:[this.id],family:e.id.toString()},{anchor:!1,publish:!1}),o=i.update(r,{schema:e.schema});return(n!=null?n:rn(this,Du))?await Promise.all([o,rn(this,Sn).pin.add(i.id)]):await o,i.id}async _setReference(e,r){await this._indexProxy.changeContent(n=>mr(ye({},n),{[e]:r.toUrl()}))}async _setReferences(e){Object.keys(e).length!==0&&await this._indexProxy.changeContent(r=>ye(ye({},r),e))}}Du=new WeakMap,Sn=new WeakMap,Bu=new WeakMap;function AU(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}function T5(){const t=new Map;return function(e,r){try{let i=function(a){if(n)return a;const s=t.get(e.didUrl);return s!==void 0?s:Promise.resolve(r()).then(function(u){var f;return((f=u.didResolutionMetadata)==null?void 0:f.error)!=="notFound"&&t.set(e.didUrl,u),u})},n;const o=function(){if(e.params&&e.params["no-cache"]==="true")return n=1,Promise.resolve(r())}();return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(n){return Promise.reject(n)}}}function N5(t,e){return e()}const O5="[a-zA-Z0-9_.%-]",IU="([a-zA-Z0-9_]+)",PU=`(${O5}+(:${O5}+)*)`,$5="[a-zA-Z0-9_.:%-]",MU=`;${$5}+=${$5}*`,kU=`((${MU})*)`,TU="(/[^#?]*)?",NU="([?][^#]*)?",OU="(#.*)?",$U=new RegExp(`^did:${IU}:${PU}${kU}${TU}${NU}${OU}$`);function R5(t){if(t===""||!t)return null;const e=t.match($U);if(e){const r={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:t};if(e[4]){const n=e[4].slice(1).split(";");r.params={};for(const i of n){const o=i.split("=");r.params[o[0]]=o[1]}}return e[6]&&(r.path=e[6]),e[7]&&(r.query=e[7].slice(1)),e[8]&&(r.fragment=e[8].slice(1)),r}return null}const $l={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function C5(t){return function(e,r,n){try{return Promise.resolve(AU(function(){return Promise.resolve(t(e,r,n)).then(function(i){return mr(ye({},$l),{didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:i})})},function(i){return mr(ye({},$l),{didResolutionMetadata:{error:"notFound",message:i.toString()}})}))}catch(i){return Promise.reject(i)}}}class L5{constructor(e={},r={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=r.cache===!0?T5():r.cache||N5,r.legacyResolvers&&Object.keys(r.legacyResolvers).map(n=>{this.registry[n]||(this.registry[n]=C5(r.legacyResolvers[n]))})}resolve(e,r={}){try{const n=this,i=R5(e);if(i===null)return Promise.resolve(mr(ye({},$l),{didResolutionMetadata:{error:"invalidDid"}}));const o=n.registry[i.method];return o?Promise.resolve(n.cache(i,()=>o(i.did,i,n,r))):Promise.resolve(mr(ye({},$l),{didResolutionMetadata:{error:"unsupportedDidMethod"}}))}catch(n){return Promise.reject(n)}}}var RU=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Resolver:L5,inMemoryCache:T5,noCache:N5,parse:R5,wrapLegacyResolver:C5}),Rl={},Cl={},CU=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),LU=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DU=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&CU(e,t,r);return LU(e,t),e};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.keyToDidDoc=void 0;const BU=DU(wr);function UU(t,e){const r=`did:key:${e}`,n=`${r}#${e}`;return{id:r,verificationMethod:[{id:n,type:"Secp256k1VerificationKey2018",controller:r,publicKeyBase58:BU.toString(t,"base58btc")}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}Cl.keyToDidDoc=UU;var Ll={},Dl={},D5={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ge,r=Zr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function s(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},s.prototype.update=function(u,f){if(f===void 0&&(f=u.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var c=0;if(this._bytesHashed+=f,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&f>0;)this._buffer[this._bufferLength++]=u[c++],f--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(f>=this.blockSize&&(c=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,u,c,f),f%=this.blockSize);f>0;)this._buffer[this._bufferLength++]=u[c++],f--;return this},s.prototype.finish=function(u){if(!this._finished){var f=this._bytesHashed,c=this._bufferLength,h=f/536870912|0,b=f<<3,w=f%128<112?128:256;this._buffer[c]=128;for(var A=c+1;A<w-8;A++)this._buffer[A]=0;e.writeUint32BE(h,this._buffer,w-8),e.writeUint32BE(b,this._buffer,w-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,w),this._finished=!0}for(var A=0;A<this.digestLength/8;A++)e.writeUint32BE(this._stateHi[A],u,A*8),e.writeUint32BE(this._stateLo[A],u,A*8+4);return this},s.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(u){return this._stateHi.set(u.stateHi),this._stateLo.set(u.stateLo),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(u){r.wipe(u.stateHi),r.wipe(u.stateLo),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},s}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(s,u,f,c,h,b,w){for(var A=f[0],_=f[1],T=f[2],P=f[3],F=f[4],j=f[5],U=f[6],L=f[7],G=c[0],p=c[1],I=c[2],C=c[3],V=c[4],$=c[5],m=c[6],E=c[7],y,g,M,R,v,d,l,x;w>=128;){for(var B=0;B<16;B++){var H=8*B+b;s[B]=e.readUint32BE(h,H),u[B]=e.readUint32BE(h,H+4)}for(var B=0;B<80;B++){var D=A,k=_,Z=T,z=P,K=F,W=j,S=U,J=L,ne=G,ae=p,ue=I,de=C,q=V,N=$,O=m,Y=E;if(y=L,g=E,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=(F>>>14|V<<32-14)^(F>>>18|V<<32-18)^(V>>>41-32|F<<32-(41-32)),g=(V>>>14|F<<32-14)^(V>>>18|F<<32-18)^(F>>>41-32|V<<32-(41-32)),v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,y=F&j^~F&U,g=V&$^~V&m,v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,y=i[B*2],g=i[B*2+1],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,y=s[B%16],g=u[B%16],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,M=l&65535|x<<16,R=v&65535|d<<16,y=M,g=R,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=(A>>>28|G<<32-28)^(G>>>34-32|A<<32-(34-32))^(G>>>39-32|A<<32-(39-32)),g=(G>>>28|A<<32-28)^(A>>>34-32|G<<32-(34-32))^(A>>>39-32|G<<32-(39-32)),v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,y=A&_^A&T^_&T,g=G&p^G&I^p&I,v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,J=l&65535|x<<16,Y=v&65535|d<<16,y=z,g=de,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=M,g=R,v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,z=l&65535|x<<16,de=v&65535|d<<16,_=D,T=k,P=Z,F=z,j=K,U=W,L=S,A=J,p=ne,I=ae,C=ue,V=de,$=q,m=N,E=O,G=Y,B%16==15)for(var H=0;H<16;H++)y=s[H],g=u[H],v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=s[(H+9)%16],g=u[(H+9)%16],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,M=s[(H+1)%16],R=u[(H+1)%16],y=(M>>>1|R<<32-1)^(M>>>8|R<<32-8)^M>>>7,g=(R>>>1|M<<32-1)^(R>>>8|M<<32-8)^(R>>>7|M<<32-7),v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,M=s[(H+14)%16],R=u[(H+14)%16],y=(M>>>19|R<<32-19)^(R>>>61-32|M<<32-(61-32))^M>>>6,g=(R>>>19|M<<32-19)^(M>>>61-32|R<<32-(61-32))^(R>>>6|M<<32-6),v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,s[H]=l&65535|x<<16,u[H]=v&65535|d<<16}y=A,g=G,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=f[0],g=c[0],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,f[0]=A=l&65535|x<<16,c[0]=G=v&65535|d<<16,y=_,g=p,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=f[1],g=c[1],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,f[1]=_=l&65535|x<<16,c[1]=p=v&65535|d<<16,y=T,g=I,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=f[2],g=c[2],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,f[2]=T=l&65535|x<<16,c[2]=I=v&65535|d<<16,y=P,g=C,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=f[3],g=c[3],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,f[3]=P=l&65535|x<<16,c[3]=C=v&65535|d<<16,y=F,g=V,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=f[4],g=c[4],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,f[4]=F=l&65535|x<<16,c[4]=V=v&65535|d<<16,y=j,g=$,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=f[5],g=c[5],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,f[5]=j=l&65535|x<<16,c[5]=$=v&65535|d<<16,y=U,g=m,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=f[6],g=c[6],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,f[6]=U=l&65535|x<<16,c[6]=m=v&65535|d<<16,y=L,g=E,v=g&65535,d=g>>>16,l=y&65535,x=y>>>16,y=f[7],g=c[7],v+=g&65535,d+=g>>>16,l+=y&65535,x+=y>>>16,d+=v>>>16,l+=d>>>16,x+=l>>>16,f[7]=L=l&65535|x<<16,c[7]=E=v&65535|d<<16,b+=128,w-=128}return b}function a(s){var u=new n;u.update(s);var f=u.digest();return u.clean(),f}t.hash=a})(D5);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Zi,r=D5,n=Zr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(z){var K=new Float64Array(16);if(z)for(var W=0;W<z.length;W++)K[W]=z[W];return K}var o=new Uint8Array(32);o[0]=9;var a=i(),s=i([1]),u=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),b=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(z,K){for(var W=0;W<16;W++)z[W]=K[W]|0}function A(z){for(var K=1,W=0;W<16;W++){var S=z[W]+K+65535;K=Math.floor(S/65536),z[W]=S-K*65536}z[0]+=K-1+37*(K-1)}function _(z,K,W){for(var S=~(W-1),J=0;J<16;J++){var ne=S&(z[J]^K[J]);z[J]^=ne,K[J]^=ne}}function T(z,K){for(var W=i(),S=i(),J=0;J<16;J++)S[J]=K[J];A(S),A(S),A(S);for(var ne=0;ne<2;ne++){W[0]=S[0]-65517;for(var J=1;J<15;J++)W[J]=S[J]-65535-(W[J-1]>>16&1),W[J-1]&=65535;W[15]=S[15]-32767-(W[14]>>16&1);var ae=W[15]>>16&1;W[14]&=65535,_(S,W,1-ae)}for(var J=0;J<16;J++)z[2*J]=S[J]&255,z[2*J+1]=S[J]>>8}function P(z,K){for(var W=0,S=0;S<32;S++)W|=z[S]^K[S];return(1&W-1>>>8)-1}function F(z,K){var W=new Uint8Array(32),S=new Uint8Array(32);return T(W,z),T(S,K),P(W,S)}function j(z){var K=new Uint8Array(32);return T(K,z),K[0]&1}function U(z,K){for(var W=0;W<16;W++)z[W]=K[2*W]+(K[2*W+1]<<8);z[15]&=32767}function L(z,K,W){for(var S=0;S<16;S++)z[S]=K[S]+W[S]}function G(z,K,W){for(var S=0;S<16;S++)z[S]=K[S]-W[S]}function p(z,K,W){var S,J,ne=0,ae=0,ue=0,de=0,q=0,N=0,O=0,Y=0,ee=0,re=0,ie=0,pe=0,le=0,he=0,xe=0,se=0,_e=0,$e=0,Se=0,Pe=0,Ye=0,be=0,ke=0,rt=0,nt=0,et=0,Ot=0,Me=0,at=0,er=0,st=0,Re=W[0],wt=W[1],Ne=W[2],Fe=W[3],It=W[4],Ce=W[5],Le=W[6],Oe=W[7],je=W[8],ze=W[9],Pt=W[10],De=W[11],Be=W[12],ut=W[13],Ue=W[14],Ee=W[15];S=K[0],ne+=S*Re,ae+=S*wt,ue+=S*Ne,de+=S*Fe,q+=S*It,N+=S*Ce,O+=S*Le,Y+=S*Oe,ee+=S*je,re+=S*ze,ie+=S*Pt,pe+=S*De,le+=S*Be,he+=S*ut,xe+=S*Ue,se+=S*Ee,S=K[1],ae+=S*Re,ue+=S*wt,de+=S*Ne,q+=S*Fe,N+=S*It,O+=S*Ce,Y+=S*Le,ee+=S*Oe,re+=S*je,ie+=S*ze,pe+=S*Pt,le+=S*De,he+=S*Be,xe+=S*ut,se+=S*Ue,_e+=S*Ee,S=K[2],ue+=S*Re,de+=S*wt,q+=S*Ne,N+=S*Fe,O+=S*It,Y+=S*Ce,ee+=S*Le,re+=S*Oe,ie+=S*je,pe+=S*ze,le+=S*Pt,he+=S*De,xe+=S*Be,se+=S*ut,_e+=S*Ue,$e+=S*Ee,S=K[3],de+=S*Re,q+=S*wt,N+=S*Ne,O+=S*Fe,Y+=S*It,ee+=S*Ce,re+=S*Le,ie+=S*Oe,pe+=S*je,le+=S*ze,he+=S*Pt,xe+=S*De,se+=S*Be,_e+=S*ut,$e+=S*Ue,Se+=S*Ee,S=K[4],q+=S*Re,N+=S*wt,O+=S*Ne,Y+=S*Fe,ee+=S*It,re+=S*Ce,ie+=S*Le,pe+=S*Oe,le+=S*je,he+=S*ze,xe+=S*Pt,se+=S*De,_e+=S*Be,$e+=S*ut,Se+=S*Ue,Pe+=S*Ee,S=K[5],N+=S*Re,O+=S*wt,Y+=S*Ne,ee+=S*Fe,re+=S*It,ie+=S*Ce,pe+=S*Le,le+=S*Oe,he+=S*je,xe+=S*ze,se+=S*Pt,_e+=S*De,$e+=S*Be,Se+=S*ut,Pe+=S*Ue,Ye+=S*Ee,S=K[6],O+=S*Re,Y+=S*wt,ee+=S*Ne,re+=S*Fe,ie+=S*It,pe+=S*Ce,le+=S*Le,he+=S*Oe,xe+=S*je,se+=S*ze,_e+=S*Pt,$e+=S*De,Se+=S*Be,Pe+=S*ut,Ye+=S*Ue,be+=S*Ee,S=K[7],Y+=S*Re,ee+=S*wt,re+=S*Ne,ie+=S*Fe,pe+=S*It,le+=S*Ce,he+=S*Le,xe+=S*Oe,se+=S*je,_e+=S*ze,$e+=S*Pt,Se+=S*De,Pe+=S*Be,Ye+=S*ut,be+=S*Ue,ke+=S*Ee,S=K[8],ee+=S*Re,re+=S*wt,ie+=S*Ne,pe+=S*Fe,le+=S*It,he+=S*Ce,xe+=S*Le,se+=S*Oe,_e+=S*je,$e+=S*ze,Se+=S*Pt,Pe+=S*De,Ye+=S*Be,be+=S*ut,ke+=S*Ue,rt+=S*Ee,S=K[9],re+=S*Re,ie+=S*wt,pe+=S*Ne,le+=S*Fe,he+=S*It,xe+=S*Ce,se+=S*Le,_e+=S*Oe,$e+=S*je,Se+=S*ze,Pe+=S*Pt,Ye+=S*De,be+=S*Be,ke+=S*ut,rt+=S*Ue,nt+=S*Ee,S=K[10],ie+=S*Re,pe+=S*wt,le+=S*Ne,he+=S*Fe,xe+=S*It,se+=S*Ce,_e+=S*Le,$e+=S*Oe,Se+=S*je,Pe+=S*ze,Ye+=S*Pt,be+=S*De,ke+=S*Be,rt+=S*ut,nt+=S*Ue,et+=S*Ee,S=K[11],pe+=S*Re,le+=S*wt,he+=S*Ne,xe+=S*Fe,se+=S*It,_e+=S*Ce,$e+=S*Le,Se+=S*Oe,Pe+=S*je,Ye+=S*ze,be+=S*Pt,ke+=S*De,rt+=S*Be,nt+=S*ut,et+=S*Ue,Ot+=S*Ee,S=K[12],le+=S*Re,he+=S*wt,xe+=S*Ne,se+=S*Fe,_e+=S*It,$e+=S*Ce,Se+=S*Le,Pe+=S*Oe,Ye+=S*je,be+=S*ze,ke+=S*Pt,rt+=S*De,nt+=S*Be,et+=S*ut,Ot+=S*Ue,Me+=S*Ee,S=K[13],he+=S*Re,xe+=S*wt,se+=S*Ne,_e+=S*Fe,$e+=S*It,Se+=S*Ce,Pe+=S*Le,Ye+=S*Oe,be+=S*je,ke+=S*ze,rt+=S*Pt,nt+=S*De,et+=S*Be,Ot+=S*ut,Me+=S*Ue,at+=S*Ee,S=K[14],xe+=S*Re,se+=S*wt,_e+=S*Ne,$e+=S*Fe,Se+=S*It,Pe+=S*Ce,Ye+=S*Le,be+=S*Oe,ke+=S*je,rt+=S*ze,nt+=S*Pt,et+=S*De,Ot+=S*Be,Me+=S*ut,at+=S*Ue,er+=S*Ee,S=K[15],se+=S*Re,_e+=S*wt,$e+=S*Ne,Se+=S*Fe,Pe+=S*It,Ye+=S*Ce,be+=S*Le,ke+=S*Oe,rt+=S*je,nt+=S*ze,et+=S*Pt,Ot+=S*De,Me+=S*Be,at+=S*ut,er+=S*Ue,st+=S*Ee,ne+=38*_e,ae+=38*$e,ue+=38*Se,de+=38*Pe,q+=38*Ye,N+=38*be,O+=38*ke,Y+=38*rt,ee+=38*nt,re+=38*et,ie+=38*Ot,pe+=38*Me,le+=38*at,he+=38*er,xe+=38*st,J=1,S=ne+J+65535,J=Math.floor(S/65536),ne=S-J*65536,S=ae+J+65535,J=Math.floor(S/65536),ae=S-J*65536,S=ue+J+65535,J=Math.floor(S/65536),ue=S-J*65536,S=de+J+65535,J=Math.floor(S/65536),de=S-J*65536,S=q+J+65535,J=Math.floor(S/65536),q=S-J*65536,S=N+J+65535,J=Math.floor(S/65536),N=S-J*65536,S=O+J+65535,J=Math.floor(S/65536),O=S-J*65536,S=Y+J+65535,J=Math.floor(S/65536),Y=S-J*65536,S=ee+J+65535,J=Math.floor(S/65536),ee=S-J*65536,S=re+J+65535,J=Math.floor(S/65536),re=S-J*65536,S=ie+J+65535,J=Math.floor(S/65536),ie=S-J*65536,S=pe+J+65535,J=Math.floor(S/65536),pe=S-J*65536,S=le+J+65535,J=Math.floor(S/65536),le=S-J*65536,S=he+J+65535,J=Math.floor(S/65536),he=S-J*65536,S=xe+J+65535,J=Math.floor(S/65536),xe=S-J*65536,S=se+J+65535,J=Math.floor(S/65536),se=S-J*65536,ne+=J-1+37*(J-1),J=1,S=ne+J+65535,J=Math.floor(S/65536),ne=S-J*65536,S=ae+J+65535,J=Math.floor(S/65536),ae=S-J*65536,S=ue+J+65535,J=Math.floor(S/65536),ue=S-J*65536,S=de+J+65535,J=Math.floor(S/65536),de=S-J*65536,S=q+J+65535,J=Math.floor(S/65536),q=S-J*65536,S=N+J+65535,J=Math.floor(S/65536),N=S-J*65536,S=O+J+65535,J=Math.floor(S/65536),O=S-J*65536,S=Y+J+65535,J=Math.floor(S/65536),Y=S-J*65536,S=ee+J+65535,J=Math.floor(S/65536),ee=S-J*65536,S=re+J+65535,J=Math.floor(S/65536),re=S-J*65536,S=ie+J+65535,J=Math.floor(S/65536),ie=S-J*65536,S=pe+J+65535,J=Math.floor(S/65536),pe=S-J*65536,S=le+J+65535,J=Math.floor(S/65536),le=S-J*65536,S=he+J+65535,J=Math.floor(S/65536),he=S-J*65536,S=xe+J+65535,J=Math.floor(S/65536),xe=S-J*65536,S=se+J+65535,J=Math.floor(S/65536),se=S-J*65536,ne+=J-1+37*(J-1),z[0]=ne,z[1]=ae,z[2]=ue,z[3]=de,z[4]=q,z[5]=N,z[6]=O,z[7]=Y,z[8]=ee,z[9]=re,z[10]=ie,z[11]=pe,z[12]=le,z[13]=he,z[14]=xe,z[15]=se}function I(z,K){p(z,K,K)}function C(z,K){var W=i(),S;for(S=0;S<16;S++)W[S]=K[S];for(S=253;S>=0;S--)I(W,W),S!==2&&S!==4&&p(W,W,K);for(S=0;S<16;S++)z[S]=W[S]}function V(z,K){var W=i(),S;for(S=0;S<16;S++)W[S]=K[S];for(S=250;S>=0;S--)I(W,W),S!==1&&p(W,W,K);for(S=0;S<16;S++)z[S]=W[S]}function $(z,K){var W=i(),S=i(),J=i(),ne=i(),ae=i(),ue=i(),de=i(),q=i(),N=i();G(W,z[1],z[0]),G(N,K[1],K[0]),p(W,W,N),L(S,z[0],z[1]),L(N,K[0],K[1]),p(S,S,N),p(J,z[3],K[3]),p(J,J,f),p(ne,z[2],K[2]),L(ne,ne,ne),G(ae,S,W),G(ue,ne,J),L(de,ne,J),L(q,S,W),p(z[0],ae,ue),p(z[1],q,de),p(z[2],de,ue),p(z[3],ae,q)}function m(z,K,W){for(var S=0;S<4;S++)_(z[S],K[S],W)}function E(z,K){var W=i(),S=i(),J=i();C(J,K[2]),p(W,K[0],J),p(S,K[1],J),T(z,S),z[31]^=j(W)<<7}function y(z,K,W){w(z[0],a),w(z[1],s),w(z[2],s),w(z[3],a);for(var S=255;S>=0;--S){var J=W[S/8|0]>>(S&7)&1;m(z,K,J),$(K,z),$(z,z),m(z,K,J)}}function g(z,K){var W=[i(),i(),i(),i()];w(W[0],c),w(W[1],h),w(W[2],s),p(W[3],c,h),y(z,W,K)}function M(z){if(z.length!==t.SEED_LENGTH)throw new Error("ed25519: seed must be "+t.SEED_LENGTH+" bytes");var K=r.hash(z);K[0]&=248,K[31]&=127,K[31]|=64;var W=new Uint8Array(32),S=[i(),i(),i(),i()];g(S,K),E(W,S);var J=new Uint8Array(64);return J.set(z),J.set(W,32),{publicKey:W,secretKey:J}}t.generateKeyPairFromSeed=M;function R(z){var K=e.randomBytes(32,z),W=M(K);return n.wipe(K),W}t.generateKeyPair=R;function v(z){if(z.length!==t.SECRET_KEY_LENGTH)throw new Error("ed25519: secret key must be "+t.SECRET_KEY_LENGTH+" bytes");return new Uint8Array(z.subarray(32))}t.extractPublicKeyFromSecretKey=v;var d=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function l(z,K){var W,S,J,ne;for(S=63;S>=32;--S){for(W=0,J=S-32,ne=S-12;J<ne;++J)K[J]+=W-16*K[S]*d[J-(S-32)],W=Math.floor((K[J]+128)/256),K[J]-=W*256;K[J]+=W,K[S]=0}for(W=0,J=0;J<32;J++)K[J]+=W-(K[31]>>4)*d[J],W=K[J]>>8,K[J]&=255;for(J=0;J<32;J++)K[J]-=W*d[J];for(S=0;S<32;S++)K[S+1]+=K[S]>>8,z[S]=K[S]&255}function x(z){for(var K=new Float64Array(64),W=0;W<64;W++)K[W]=z[W];for(var W=0;W<64;W++)z[W]=0;l(z,K)}function B(z,K){var W=new Float64Array(64),S=[i(),i(),i(),i()],J=r.hash(z.subarray(0,32));J[0]&=248,J[31]&=127,J[31]|=64;var ne=new Uint8Array(64);ne.set(J.subarray(32),32);var ae=new r.SHA512;ae.update(ne.subarray(32)),ae.update(K);var ue=ae.digest();ae.clean(),x(ue),g(S,ue),E(ne,S),ae.reset(),ae.update(ne.subarray(0,32)),ae.update(z.subarray(32)),ae.update(K);var de=ae.digest();x(de);for(var q=0;q<32;q++)W[q]=ue[q];for(var q=0;q<32;q++)for(var N=0;N<32;N++)W[q+N]+=de[q]*J[N];return l(ne.subarray(32),W),ne}t.sign=B;function H(z,K){var W=i(),S=i(),J=i(),ne=i(),ae=i(),ue=i(),de=i();return w(z[2],s),U(z[1],K),I(J,z[1]),p(ne,J,u),G(J,J,z[2]),L(ne,z[2],ne),I(ae,ne),I(ue,ae),p(de,ue,ae),p(W,de,J),p(W,W,ne),V(W,W),p(W,W,J),p(W,W,ne),p(W,W,ne),p(z[0],W,ne),I(S,z[0]),p(S,S,ne),F(S,J)&&p(z[0],z[0],b),I(S,z[0]),p(S,S,ne),F(S,J)?-1:(j(z[0])===K[31]>>7&&G(z[0],a,z[0]),p(z[3],z[0],z[1]),0)}function D(z,K,W){var S=new Uint8Array(32),J=[i(),i(),i(),i()],ne=[i(),i(),i(),i()];if(W.length!==t.SIGNATURE_LENGTH)throw new Error("ed25519: signature must be "+t.SIGNATURE_LENGTH+" bytes");if(H(ne,z))return!1;var ae=new r.SHA512;ae.update(W.subarray(0,32)),ae.update(z),ae.update(K);var ue=ae.digest();return x(ue),y(J,ne,ue),g(ne,W.subarray(32)),$(J,ne),E(S,J),!P(W,S)}t.verify=D;function k(z){var K=[i(),i(),i(),i()];if(H(K,z))throw new Error("Ed25519: invalid public key");var W=i(),S=i(),J=K[1];L(W,s,J),G(S,s,J),C(S,S),p(W,W,S);var ne=new Uint8Array(32);return T(ne,W),ne}t.convertPublicKeyToX25519=k;function Z(z){var K=r.hash(z.subarray(0,32));K[0]&=248,K[31]&=127,K[31]|=64;var W=new Uint8Array(K.subarray(0,32));return n.wipe(K),W}t.convertSecretKeyToX25519=Z})(Dl);var FU=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jU=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zU=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&FU(e,t,r);return jU(e,t),e};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.keyToDidDoc=void 0;const Bv=zU(wr),qU=Dl;function GU(t){const e=new Uint8Array(t.length+2);return e[0]=236,e[1]=1,e.set(t,2),`z${Bv.toString(e,"base58btc")}`}function HU(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=qU.convertPublicKeyToX25519(t),o=`${r}#${GU(i)}`;return{id:r,verificationMethod:[{id:n,type:"Ed25519VerificationKey2018",controller:r,publicKeyBase58:Bv.toString(t,"base58btc")}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n],keyAgreement:[{id:o,type:"X25519KeyAgreementKey2019",controller:r,publicKeyBase58:Bv.toString(i,"base58btc")}]}}Ll.keyToDidDoc=HU;var WU=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KU=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),B5=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&WU(e,t,r);return KU(e,t),e},U5=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rl,"__esModule",{value:!0});var F5=Rl.getResolver=void 0;const j5=U5(Ro),VU=U5($o.exports),JU=B5(Cl),YU=B5(Ll),XU="application/did+ld+json",z5="application/did+json",ZU={231:JU,237:YU};function q5(){return{key:async(t,e,r,n)=>{const i=n.accept||z5,o={didResolutionMetadata:{contentType:i},didDocument:null,didDocumentMetadata:{}};try{const a=VU.default.decode(e.id),s=j5.default.decode(a),u=a.slice(j5.default.decode.bytes),f=await ZU[s].keyToDidDoc(u,e.id);i===XU?(f["@context"]="https://w3id.org/did/v1",o.didDocument=f):i===z5?o.didDocument=f:(delete o.didResolutionMetadata.contentType,o.didResolutionMetadata.error="representationNotSupported")}catch(a){o.didResolutionMetadata.error="invalidDid",o.didResolutionMetadata.message=a.toString()}return o}}}F5=Rl.getResolver=q5;Rl.default={getResolver:q5};const QU={definitions:{cryptoAccounts:"kjzl6cwe1jw149z4rvwzi56mjjukafta30kojzktd9dsrgqdgz4wlnceu59f95f",alsoKnownAs:"kjzl6cwe1jw146zfmqa10a5x1vry6au3t362p44uttz4l0k4hi88o41zplhmxnf",basicProfile:"kjzl6cwe1jw145cjbeko9kil8g9bxszjhyde21ob8epxuxkaon1izyqsu8wgcic"},schemas:{CryptoAccounts:"ceramic://k3y52l7qbv1frypussjburqg4fykyyycfu0p9znc75lv2t5cg4xaslhagkd7h7mkg",AlsoKnownAs:"ceramic://k3y52l7qbv1fryojt8n8cw2k04p9wp67ly59iwqs65dejso566fij5wsdrb871yio",BasicProfile:"ceramic://k3y52l7qbv1frxt706gqfzmq6cbqdkptzk8uudaryhlkf6ly9vx21hqu4r6k1jqio"},tiles:{}};function eF(t){try{return si.AccountID.parse(t),!0}catch{return!1}}var G5=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},wi=(t,e,r)=>(G5(t,e,"read from private field"),r?r.call(t):e.get(t)),Bl=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ul=(t,e,r,n)=>(G5(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),fo,Uu,Fu,Fl;const tF={local:"http://localhost:7007","mainnet-gateway":"https://gateway.ceramic.network","testnet-clay":"https://ceramic-clay.3boxlabs.com","testnet-clay-gateway":"https://gateway-clay.ceramic.network"};class rF{constructor(e){var n,i;Bl(this,fo,void 0),Bl(this,Uu,void 0),Bl(this,Fu,void 0),Bl(this,Fl,void 0);const r=(n=tF[e.ceramic])!=null?n:e.ceramic;Ul(this,fo,new X3.CeramicClient(r)),Ul(this,Uu,new Rv({autopin:!0,ceramic:wi(this,fo),model:(i=e.model)!=null?i:QU})),Ul(this,Fu,new SU({autopin:!0,ceramic:wi(this,fo),model:wi(this,Uu)})),Ul(this,Fl,new L5(ye(ye({},F5()),G3(wi(this,fo)))))}get ceramic(){return wi(this,fo)}get dataModel(){return wi(this,Uu)}get dataStore(){return wi(this,Fu)}get resolver(){return wi(this,Fl)}async getAccountDID(e){const r=await kv.Caip10Link.fromAccount(wi(this,fo),e);if(r.did==null)throw new Error(`No DID found for ${e}`);return r.did}async toDID(e){return eF(e)?await this.getAccountDID(e):e}async get(e,r){const n=await this.toDID(r);return await wi(this,Fu).get(e,n)}}fo=new WeakMap,Uu=new WeakMap,Fu=new WeakMap,Fl=new WeakMap,typeof require!="undefined"&&require;var H5={},W5={};Object.defineProperty(W5,"__esModule",{value:!0});var jl={},nF=$t(RU);function zl(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function K5(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const V5=K5("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),Uv=K5("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),J5=ye({utf8:V5,"utf-8":V5,hex:vn.base16,latin1:Uv,ascii:Uv,binary:Uv},vn);function Kn(t,e="utf8"){const r=J5[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function ql(t,e="utf8"){const r=J5[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var Fv={};const iF="elliptic",oF="6.5.4",aF="EC cryptography",sF="lib/elliptic.js",uF=["lib"],fF={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},cF={type:"git",url:"git@github.com:indutny/elliptic"},lF=["EC","Elliptic","curve","Cryptography"],hF="Fedor Indutny <fedor@indutny.com>",dF="MIT",pF={url:"https://github.com/indutny/elliptic/issues"},vF="https://github.com/indutny/elliptic",mF={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},bF={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"};var yF={name:iF,version:oF,description:aF,main:sF,files:uF,scripts:fF,repository:cF,keywords:lF,author:hF,license:dF,bugs:pF,homepage:vF,devDependencies:mF,dependencies:bF},nn={},jv={};(function(t){var e=t;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var s=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)s[u]=o[u]|0;return s}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!=0&&(o="0"+o);for(var u=0;u<o.length;u+=2)s.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var f=o.charCodeAt(u),c=f>>8,h=f&255;c?s.push(c,h):s.push(h)}return s}e.toArray=r;function n(o){return o.length===1?"0"+o:o}e.zero2=n;function i(o){for(var a="",s=0;s<o.length;s++)a+=n(o[s].toString(16));return a}e.toHex=i,e.encode=function(a,s){return s==="hex"?i(a):a}})(jv);(function(t){var e=t,r=Tn.exports,n=xo,i=jv;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function o(c,h,b){var w=new Array(Math.max(c.bitLength(),b)+1);w.fill(0);for(var A=1<<h+1,_=c.clone(),T=0;T<w.length;T++){var P,F=_.andln(A-1);_.isOdd()?(F>(A>>1)-1?P=(A>>1)-F:P=F,_.isubn(P)):P=0,w[T]=P,_.iushrn(1)}return w}e.getNAF=o;function a(c,h){var b=[[],[]];c=c.clone(),h=h.clone();for(var w=0,A=0,_;c.cmpn(-w)>0||h.cmpn(-A)>0;){var T=c.andln(3)+w&3,P=h.andln(3)+A&3;T===3&&(T=-1),P===3&&(P=-1);var F;(T&1)==0?F=0:(_=c.andln(7)+w&7,(_===3||_===5)&&P===2?F=-T:F=T),b[0].push(F);var j;(P&1)==0?j=0:(_=h.andln(7)+A&7,(_===3||_===5)&&T===2?j=-P:j=P),b[1].push(j),2*w===F+1&&(w=1-w),2*A===j+1&&(A=1-A),c.iushrn(1),h.iushrn(1)}return b}e.getJSF=a;function s(c,h,b){var w="_"+h;c.prototype[h]=function(){return this[w]!==void 0?this[w]:this[w]=b.call(this)}}e.cachedProperty=s;function u(c){return typeof c=="string"?e.toArray(c,"hex"):c}e.parseBytes=u;function f(c){return new r(c,"hex","le")}e.intFromLE=f})(nn);var Gl={exports:{}},zv;Gl.exports=function(e){return zv||(zv=new co(null)),zv.generate(e)};function co(t){this.rand=t}Gl.exports.Rand=co;co.prototype.generate=function(e){return this._rand(e)};co.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?co.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?co.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(co.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Y5=require("crypto");if(typeof Y5.randomBytes!="function")throw new Error("Not supported");co.prototype._rand=function(e){return Y5.randomBytes(e)}}catch{}var qv={},ia=Tn.exports,ju=nn,Hl=ju.getNAF,gF=ju.getJSF,Wl=ju.assert;function lo(t,e){this.type=t,this.p=new ia(e.p,16),this.red=e.prime?ia.red(e.prime):ia.mont(this.p),this.zero=new ia(0).toRed(this.red),this.one=new ia(1).toRed(this.red),this.two=new ia(2).toRed(this.red),this.n=e.n&&new ia(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Kl=lo;lo.prototype.point=function(){throw new Error("Not implemented")};lo.prototype.validate=function(){throw new Error("Not implemented")};lo.prototype._fixedNafMul=function(e,r){Wl(e.precomputed);var n=e._getDoubles(),i=Hl(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2==0?2:1);o/=3;var a=[],s,u;for(s=0;s<i.length;s+=n.step){u=0;for(var f=s+n.step-1;f>=s;f--)u=(u<<1)+i[f];a.push(u)}for(var c=this.jpoint(null,null,null),h=this.jpoint(null,null,null),b=o;b>0;b--){for(s=0;s<a.length;s++)u=a[s],u===b?h=h.mixedAdd(n.points[s]):u===-b&&(h=h.mixedAdd(n.points[s].neg()));c=c.add(h)}return c.toP()};lo.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,a=Hl(r,n,this._bitLength),s=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var f=0;u>=0&&a[u]===0;u--)f++;if(u>=0&&f++,s=s.dblp(f),u<0)break;var c=a[u];Wl(c!==0),e.type==="affine"?c>0?s=s.mixedAdd(o[c-1>>1]):s=s.mixedAdd(o[-c-1>>1].neg()):c>0?s=s.add(o[c-1>>1]):s=s.add(o[-c-1>>1].neg())}return e.type==="affine"?s.toP():s};lo.prototype._wnafMulAdd=function(e,r,n,i,o){var a=this._wnafT1,s=this._wnafT2,u=this._wnafT3,f=0,c,h,b;for(c=0;c<i;c++){b=r[c];var w=b._getNAFPoints(e);a[c]=w.wnd,s[c]=w.points}for(c=i-1;c>=1;c-=2){var A=c-1,_=c;if(a[A]!==1||a[_]!==1){u[A]=Hl(n[A],a[A],this._bitLength),u[_]=Hl(n[_],a[_],this._bitLength),f=Math.max(u[A].length,f),f=Math.max(u[_].length,f);continue}var T=[r[A],null,null,r[_]];r[A].y.cmp(r[_].y)===0?(T[1]=r[A].add(r[_]),T[2]=r[A].toJ().mixedAdd(r[_].neg())):r[A].y.cmp(r[_].y.redNeg())===0?(T[1]=r[A].toJ().mixedAdd(r[_]),T[2]=r[A].add(r[_].neg())):(T[1]=r[A].toJ().mixedAdd(r[_]),T[2]=r[A].toJ().mixedAdd(r[_].neg()));var P=[-3,-1,-5,-7,0,7,5,1,3],F=gF(n[A],n[_]);for(f=Math.max(F[0].length,f),u[A]=new Array(f),u[_]=new Array(f),h=0;h<f;h++){var j=F[0][h]|0,U=F[1][h]|0;u[A][h]=P[(j+1)*3+(U+1)],u[_][h]=0,s[A]=T}}var L=this.jpoint(null,null,null),G=this._wnafT4;for(c=f;c>=0;c--){for(var p=0;c>=0;){var I=!0;for(h=0;h<i;h++)G[h]=u[h][c]|0,G[h]!==0&&(I=!1);if(!I)break;p++,c--}if(c>=0&&p++,L=L.dblp(p),c<0)break;for(h=0;h<i;h++){var C=G[h];C!==0&&(C>0?b=s[h][C-1>>1]:C<0&&(b=s[h][-C-1>>1].neg()),b.type==="affine"?L=L.mixedAdd(b):L=L.add(b))}}for(c=0;c<i;c++)s[c]=null;return o?L:L.toP()};function An(t,e){this.curve=t,this.type=e,this.precomputed=null}lo.BasePoint=An;An.prototype.eq=function(){throw new Error("Not implemented")};An.prototype.validate=function(){return this.curve.validate(this)};lo.prototype.decodePoint=function(e,r){e=ju.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*n){e[0]===6?Wl(e[e.length-1]%2==0):e[0]===7&&Wl(e[e.length-1]%2==1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};An.prototype.encodeCompressed=function(e){return this.encode(e,!0)};An.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};An.prototype.encode=function(e,r){return ju.encode(this._encode(r),e)};An.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};An.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};An.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};An.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:e,points:r}};An.prototype._getBeta=function(){return null};An.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var wF=nn,Dt=Tn.exports,Gv=_a.exports,ps=Kl,_F=wF.assert;function In(t){ps.call(this,"short",t),this.a=new Dt(t.a,16).toRed(this.red),this.b=new Dt(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Gv(In,ps);var xF=In;In.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Dt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Dt(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],_F(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(s){return{a:new Dt(s.a,16),b:new Dt(s.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};In.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Dt.mont(e),n=new Dt(2).toRed(r).redInvm(),i=n.redNeg(),o=new Dt(3).toRed(r).redNeg().redSqrt().redMul(n),a=i.redAdd(o).fromRed(),s=i.redSub(o).fromRed();return[a,s]};In.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new Dt(1),a=new Dt(0),s=new Dt(0),u=new Dt(1),f,c,h,b,w,A,_,T=0,P,F;n.cmpn(0)!==0;){var j=i.div(n);P=i.sub(j.mul(n)),F=s.sub(j.mul(o));var U=u.sub(j.mul(a));if(!h&&P.cmp(r)<0)f=_.neg(),c=o,h=P.neg(),b=F;else if(h&&++T==2)break;_=P,i=n,n=P,s=o,o=F,u=a,a=U}w=P.neg(),A=F;var L=h.sqr().add(b.sqr()),G=w.sqr().add(A.sqr());return G.cmp(L)>=0&&(w=f,A=c),h.negative&&(h=h.neg(),b=b.neg()),w.negative&&(w=w.neg(),A=A.neg()),[{a:h,b},{a:w,b:A}]};In.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),s=o.mul(n.a),u=a.mul(i.a),f=o.mul(n.b),c=a.mul(i.b),h=e.sub(s).sub(u),b=f.add(c).neg();return{k1:h,k2:b}};In.prototype.pointFromX=function(e,r){e=new Dt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(e,i)};In.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};In.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(r[a]),u=e[a],f=u._getBeta();s.k1.negative&&(s.k1.ineg(),u=u.neg(!0)),s.k2.negative&&(s.k2.ineg(),f=f.neg(!0)),i[a*2]=u,i[a*2+1]=f,o[a*2]=s.k1,o[a*2+1]=s.k2}for(var c=this._wnafMulAdd(1,i,o,a*2,n),h=0;h<a*2;h++)i[h]=null,o[h]=null;return c};function Yt(t,e,r,n){ps.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Dt(e,16),this.y=new Dt(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Gv(Yt,ps.BasePoint);In.prototype.point=function(e,r,n){return new Yt(this,e,r,n)};In.prototype.pointFromJSON=function(e,r){return Yt.fromJSON(this,e,r)};Yt.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Yt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Yt.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function o(s){return e.point(s[0],s[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(o))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(o))}},i};Yt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Yt.prototype.isInfinity=function(){return this.inf};Yt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Yt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),a=o.redSqr().redISub(this.x.redAdd(this.x)),s=o.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)};Yt.prototype.getX=function(){return this.x.fromRed()};Yt.prototype.getY=function(){return this.y.fromRed()};Yt.prototype.mul=function(e){return e=new Dt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Yt.prototype.mulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};Yt.prototype.jmulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};Yt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Yt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Yt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function vr(t,e,r,n){ps.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Dt(0)):(this.x=new Dt(e,16),this.y=new Dt(r,16),this.z=new Dt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Gv(vr,ps.BasePoint);In.prototype.jpoint=function(e,r,n){return new vr(this,e,r,n)};vr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};vr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};vr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),u=i.redSub(o),f=a.redSub(s);if(u.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=u.redSqr(),h=c.redMul(u),b=i.redMul(c),w=f.redSqr().redIAdd(h).redISub(b).redISub(b),A=f.redMul(b.redISub(w)).redISub(a.redMul(h)),_=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(w,A,_)};vr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),o=this.y,a=e.y.redMul(r).redMul(this.z),s=n.redSub(i),u=o.redSub(a);if(s.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=s.redSqr(),c=f.redMul(s),h=n.redMul(f),b=u.redSqr().redIAdd(c).redISub(h).redISub(h),w=u.redMul(h.redISub(b)).redISub(o.redMul(c)),A=this.z.redMul(s);return this.curve.jpoint(b,w,A)};vr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,a=this.x,s=this.y,u=this.z,f=u.redSqr().redSqr(),c=s.redAdd(s);for(r=0;r<e;r++){var h=a.redSqr(),b=c.redSqr(),w=b.redSqr(),A=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(f)),_=a.redMul(b),T=A.redSqr().redISub(_.redAdd(_)),P=_.redISub(T),F=A.redMul(P);F=F.redIAdd(F).redISub(w);var j=c.redMul(u);r+1<e&&(f=f.redMul(w)),a=T,u=j,c=F}return this.curve.jpoint(a,c.redMul(o),u)};vr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};vr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var u=i.redAdd(i).redIAdd(i),f=u.redSqr().redISub(s).redISub(s),c=a.redIAdd(a);c=c.redIAdd(c),c=c.redIAdd(c),e=f,r=u.redMul(s.redISub(f)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),b=this.y.redSqr(),w=b.redSqr(),A=this.x.redAdd(b).redSqr().redISub(h).redISub(w);A=A.redIAdd(A);var _=h.redAdd(h).redIAdd(h),T=_.redSqr(),P=w.redIAdd(w);P=P.redIAdd(P),P=P.redIAdd(P),e=T.redISub(A).redISub(A),r=_.redMul(A.redISub(e)).redISub(P),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};vr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),f=u.redSqr().redISub(s).redISub(s);e=f;var c=a.redIAdd(a);c=c.redIAdd(c),c=c.redIAdd(c),r=u.redMul(s.redISub(f)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),b=this.y.redSqr(),w=this.x.redMul(b),A=this.x.redSub(h).redMul(this.x.redAdd(h));A=A.redAdd(A).redIAdd(A);var _=w.redIAdd(w);_=_.redIAdd(_);var T=_.redAdd(_);e=A.redSqr().redISub(T),n=this.y.redAdd(this.z).redSqr().redISub(b).redISub(h);var P=b.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P),r=A.redMul(_.redISub(e)).redISub(P)}return this.curve.jpoint(e,r,n)};vr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),a=r.redSqr(),s=n.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(o)),f=r.redAdd(r);f=f.redIAdd(f);var c=f.redMul(s),h=u.redSqr().redISub(c.redAdd(c)),b=c.redISub(h),w=s.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var A=u.redMul(b).redISub(w),_=n.redAdd(n).redMul(i);return this.curve.jpoint(h,A,_)};vr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=e.redAdd(e).redIAdd(e),a=o.redSqr(),s=this.x.redAdd(r).redSqr().redISub(e).redISub(i);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(a);var u=s.redSqr(),f=i.redIAdd(i);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var c=o.redIAdd(s).redSqr().redISub(a).redISub(u).redISub(f),h=r.redMul(c);h=h.redIAdd(h),h=h.redIAdd(h);var b=this.x.redMul(u).redISub(h);b=b.redIAdd(b),b=b.redIAdd(b);var w=this.y.redMul(c.redMul(f.redISub(c)).redISub(s.redMul(u)));w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var A=this.z.redAdd(s).redSqr().redISub(n).redISub(u);return this.curve.jpoint(b,w,A)};vr.prototype.mul=function(e,r){return e=new Dt(e,r),this.curve._wnafMul(this,e)};vr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};vr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};vr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};vr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var vs=Tn.exports,X5=_a.exports,Vl=Kl,EF=nn;function ms(t){Vl.call(this,"mont",t),this.a=new vs(t.a,16).toRed(this.red),this.b=new vs(t.b,16).toRed(this.red),this.i4=new vs(4).toRed(this.red).redInvm(),this.two=new vs(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}X5(ms,Vl);var SF=ms;ms.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),o=i.redSqrt();return o.redSqr().cmp(i)===0};function Xt(t,e,r){Vl.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new vs(e,16),this.z=new vs(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}X5(Xt,Vl.BasePoint);ms.prototype.decodePoint=function(e,r){return this.point(EF.toArray(e,r),1)};ms.prototype.point=function(e,r){return new Xt(this,e,r)};ms.prototype.pointFromJSON=function(e){return Xt.fromJSON(this,e)};Xt.prototype.precompute=function(){};Xt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Xt.fromJSON=function(e,r){return new Xt(e,r[0],r[1]||e.one)};Xt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Xt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Xt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),o=r.redSub(i),a=r.redMul(i),s=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(a,s)};Xt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Xt.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=e.x.redAdd(e.z),a=e.x.redSub(e.z),s=a.redMul(n),u=o.redMul(i),f=r.z.redMul(s.redAdd(u).redSqr()),c=r.x.redMul(s.redISub(u).redSqr());return this.curve.point(f,c)};Xt.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),o=this,a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var s=a.length-1;s>=0;s--)a[s]===0?(n=n.diffAdd(i,o),i=i.dbl()):(i=n.diffAdd(i,o),n=n.dbl());return i};Xt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Xt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Xt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Xt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Xt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var AF=nn,Fi=Tn.exports,Z5=_a.exports,Jl=Kl,IF=AF.assert;function _i(t){this.twisted=(t.a|0)!=1,this.mOneA=this.twisted&&(t.a|0)==-1,this.extended=this.mOneA,Jl.call(this,"edwards",t),this.a=new Fi(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Fi(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Fi(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),IF(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)==1}Z5(_i,Jl);var PF=_i;_i.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};_i.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};_i.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};_i.prototype.pointFromX=function(e,r){e=new Fi(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(o.redInvm()),s=a.redSqrt();if(s.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var u=s.fromRed().isOdd();return(r&&!u||!r&&u)&&(s=s.redNeg()),this.point(e,s)};_i.prototype.pointFromY=function(e,r){e=new Fi(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(o.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var s=a.redSqrt();if(s.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return s.fromRed().isOdd()!==r&&(s=s.redNeg()),this.point(s,e)};_i.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(o)===0};function kt(t,e,r,n,i){Jl.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Fi(e,16),this.y=new Fi(r,16),this.z=n?new Fi(n,16):this.curve.one,this.t=i&&new Fi(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Z5(kt,Jl.BasePoint);_i.prototype.pointFromJSON=function(e){return kt.fromJSON(this,e)};_i.prototype.point=function(e,r,n,i){return new kt(this,e,r,n,i)};kt.fromJSON=function(e,r){return new kt(e,r[0],r[1],r[2])};kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};kt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};kt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),a=i.redAdd(r),s=a.redSub(n),u=i.redSub(r),f=o.redMul(s),c=a.redMul(u),h=o.redMul(u),b=s.redMul(a);return this.curve.point(f,c,b,h)};kt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,o,a,s,u,f;if(this.curve.twisted){s=this.curve._mulA(r);var c=s.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(c.redSub(this.curve.two)),o=c.redMul(s.redSub(n)),a=c.redSqr().redSub(c).redSub(c)):(u=this.z.redSqr(),f=c.redSub(u).redISub(u),i=e.redSub(r).redISub(n).redMul(f),o=c.redMul(s.redSub(n)),a=c.redMul(f))}else s=r.redAdd(n),u=this.curve._mulC(this.z).redSqr(),f=s.redSub(u).redSub(u),i=this.curve._mulC(e.redISub(s)).redMul(f),o=this.curve._mulC(s).redMul(r.redISub(n)),a=s.redMul(f);return this.curve.point(i,o,a)};kt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};kt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(r),s=o.redSub(i),u=o.redAdd(i),f=n.redAdd(r),c=a.redMul(s),h=u.redMul(f),b=a.redMul(f),w=s.redMul(u);return this.curve.point(c,h,w,b)};kt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(i).redMul(o),s=n.redSub(a),u=n.redAdd(a),f=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),c=r.redMul(s).redMul(f),h,b;return this.curve.twisted?(h=r.redMul(u).redMul(o.redSub(this.curve._mulA(i))),b=s.redMul(u)):(h=r.redMul(u).redMul(o.redSub(i)),b=this.curve._mulC(s).redMul(u)),this.curve.point(c,h,b)};kt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};kt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};kt.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};kt.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};kt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};kt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};kt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};kt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};kt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};kt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};kt.prototype.toP=kt.prototype.normalize;kt.prototype.mixedAdd=kt.prototype.add;(function(t){var e=t;e.base=Kl,e.short=xF,e.mont=SF,e.edwards=PF})(qv);var Yl={};(function(t){var e=t,r=Cr,n=qv,i=nn,o=i.assert;function a(f){f.type==="short"?this.curve=new n.short(f):f.type==="edwards"?this.curve=new n.edwards(f):this.curve=new n.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function s(f,c){Object.defineProperty(e,f,{configurable:!0,enumerable:!0,get:function(){var h=new a(c);return Object.defineProperty(e,f,{configurable:!0,enumerable:!0,value:h}),h}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=require("./precomputed/secp256k1")}catch{u=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})})(Yl);var MF=Cr,oa=jv,Q5=xo;function ho(t){if(!(this instanceof ho))return new ho(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=oa.toArray(t.entropy,t.entropyEnc||"hex"),r=oa.toArray(t.nonce,t.nonceEnc||"hex"),n=oa.toArray(t.pers,t.persEnc||"hex");Q5(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var kF=ho;ho.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ho.prototype._hmac=function(){return new MF.hmac(this.hash,this.K)};ho.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ho.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=oa.toArray(e,r),n=oa.toArray(n,i),Q5(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ho.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=oa.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(n),this._reseed++,oa.encode(a,r)};var TF=Tn.exports,NF=nn,Hv=NF.assert;function Sr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var OF=Sr;Sr.fromPublic=function(e,r,n){return r instanceof Sr?r:new Sr(e,{pub:r,pubEnc:n})};Sr.fromPrivate=function(e,r,n){return r instanceof Sr?r:new Sr(e,{priv:r,privEnc:n})};Sr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Sr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Sr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Sr.prototype._importPrivate=function(e,r){this.priv=new TF(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Sr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Hv(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Hv(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Sr.prototype.derive=function(e){return e.validate()||Hv(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Sr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Sr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Sr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Xl=Tn.exports,Wv=nn,$F=Wv.assert;function Zl(t,e){if(t instanceof Zl)return t;this._importDER(t,e)||($F(t.r&&t.s,"Signature without r or s"),this.r=new Xl(t.r,16),this.s=new Xl(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var RF=Zl;function CF(){this.place=0}function Kv(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function eE(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Zl.prototype._importDER=function(e,r){e=Wv.toArray(e,r);var n=new CF;if(e[n.place++]!==48)return!1;var i=Kv(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=Kv(e,n);if(o===!1)return!1;var a=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var s=Kv(e,n);if(s===!1||e.length!==s+n.place)return!1;var u=e.slice(n.place,s+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new Xl(a),this.s=new Xl(u),this.recoveryParam=null,!0};function Vv(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Zl.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=eE(r),n=eE(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Vv(i,r.length),i=i.concat(r),i.push(2),Vv(i,n.length);var o=i.concat(n),a=[48];return Vv(a,o.length),a=a.concat(o),Wv.encode(a,e)};var aa=Tn.exports,tE=kF,LF=nn,Jv=Yl,DF=Gl.exports,rE=LF.assert,Yv=OF,Ql=RF;function Pn(t){if(!(this instanceof Pn))return new Pn(t);typeof t=="string"&&(rE(Object.prototype.hasOwnProperty.call(Jv,t),"Unknown curve "+t),t=Jv[t]),t instanceof Jv.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var BF=Pn;Pn.prototype.keyPair=function(e){return new Yv(this,e)};Pn.prototype.keyFromPrivate=function(e,r){return Yv.fromPrivate(this,e,r)};Pn.prototype.keyFromPublic=function(e,r){return Yv.fromPublic(this,e,r)};Pn.prototype.genKeyPair=function(e){e||(e={});for(var r=new tE({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||DF(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new aa(2));;){var o=new aa(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Pn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Pn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new aa(e,16));for(var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),s=e.toArray("be",o),u=new tE({hash:this.hash,entropy:a,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new aa(1)),c=0;;c++){var h=i.k?i.k(c):new aa(u.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(f)>=0)){var b=this.g.mul(h);if(!b.isInfinity()){var w=b.getX(),A=w.umod(this.n);if(A.cmpn(0)!==0){var _=h.invm(this.n).mul(A.mul(r.getPrivate()).iadd(e));if(_=_.umod(this.n),_.cmpn(0)!==0){var T=(b.getY().isOdd()?1:0)|(w.cmp(A)!==0?2:0);return i.canonical&&_.cmp(this.nh)>0&&(_=this.n.sub(_),T^=1),new Ql({r:A,s:_,recoveryParam:T})}}}}}};Pn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new aa(e,16)),n=this.keyFromPublic(n,i),r=new Ql(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s=a.invm(this.n),u=s.mul(e).umod(this.n),f=s.mul(o).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(u,n.getPublic(),f),c.isInfinity()?!1:c.eqXToP(o)):(c=this.g.mulAdd(u,n.getPublic(),f),c.isInfinity()?!1:c.getX().umod(this.n).cmp(o)===0)};Pn.prototype.recoverPubKey=function(t,e,r,n){rE((3&r)===r,"The recovery param is more than two bits"),e=new Ql(e,n);var i=this.n,o=new aa(t),a=e.r,s=e.s,u=r&1,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?a=this.curve.pointFromX(a.add(this.curve.n),u):a=this.curve.pointFromX(a,u);var c=e.r.invm(i),h=i.sub(o).mul(c).umod(i),b=s.mul(c).umod(i);return this.g.mulAdd(h,a,b)};Pn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Ql(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var zu=nn,nE=zu.assert,iE=zu.parseBytes,bs=zu.cachedProperty;function Zt(t,e){this.eddsa=t,this._secret=iE(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=iE(e.pub)}Zt.fromPublic=function(e,r){return r instanceof Zt?r:new Zt(e,{pub:r})};Zt.fromSecret=function(e,r){return r instanceof Zt?r:new Zt(e,{secret:r})};Zt.prototype.secret=function(){return this._secret};bs(Zt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});bs(Zt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});bs(Zt,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});bs(Zt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});bs(Zt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});bs(Zt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Zt.prototype.sign=function(e){return nE(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Zt.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Zt.prototype.getSecret=function(e){return nE(this._secret,"KeyPair is public only"),zu.encode(this.secret(),e)};Zt.prototype.getPublic=function(e){return zu.encode(this.pubBytes(),e)};var UF=Zt,FF=Tn.exports,eh=nn,jF=eh.assert,th=eh.cachedProperty,zF=eh.parseBytes;function sa(t,e){this.eddsa=t,typeof e!="object"&&(e=zF(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),jF(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof FF&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}th(sa,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});th(sa,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});th(sa,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});th(sa,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});sa.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};sa.prototype.toHex=function(){return eh.encode(this.toBytes(),"hex").toUpperCase()};var qF=sa,GF=Cr,HF=Yl,ys=nn,WF=ys.assert,oE=ys.parseBytes,aE=UF,sE=qF;function Hr(t){if(WF(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Hr))return new Hr(t);t=HF[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=GF.sha512}var KF=Hr;Hr.prototype.sign=function(e,r){e=oE(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),o=this.g.mul(i),a=this.encodePoint(o),s=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),u=i.add(s).umod(this.curve.n);return this.makeSignature({R:o,S:u,Rencoded:a})};Hr.prototype.verify=function(e,r,n){e=oE(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),o=this.hashInt(r.Rencoded(),i.pubBytes(),e),a=this.g.mul(r.S()),s=r.R().add(i.pub().mul(o));return s.eq(a)};Hr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return ys.intFromLE(e.digest()).umod(this.curve.n)};Hr.prototype.keyFromPublic=function(e){return aE.fromPublic(this,e)};Hr.prototype.keyFromSecret=function(e){return aE.fromSecret(this,e)};Hr.prototype.makeSignature=function(e){return e instanceof sE?e:new sE(this,e)};Hr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Hr.prototype.decodePoint=function(e){e=ys.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&~128),i=(e[r]&128)!=0,o=ys.intFromLE(n);return this.curve.pointFromY(o,i)};Hr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Hr.prototype.decodeInt=function(e){return ys.intFromLE(e)};Hr.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=yF.version,e.utils=nn,e.rand=Gl.exports,e.curve=qv,e.curves=Yl,e.ec=BF,e.eddsa=KF})(Fv);var VF=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((r,n,i)=>{const o=i===0?"":",",a=n===void 0||typeof n=="symbol"?null:n;return r+o+t(a)},"")+"]":"{"+Object.keys(e).sort().reduce((r,n,i)=>{if(e[n]===void 0||typeof e[n]=="symbol")return r;const o=r.length===0?"":",";return r+o+t(n)+":"+t(e[n])},"")+"}"},xi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Zi,r=Zr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(U){var L=new Float64Array(16);if(U)for(var G=0;G<U.length;G++)L[G]=U[G];return L}var i=new Uint8Array(32);i[0]=9;var o=n([56129,1]);function a(U){for(var L=1,G=0;G<16;G++){var p=U[G]+L+65535;L=Math.floor(p/65536),U[G]=p-L*65536}U[0]+=L-1+37*(L-1)}function s(U,L,G){for(var p=~(G-1),I=0;I<16;I++){var C=p&(U[I]^L[I]);U[I]^=C,L[I]^=C}}function u(U,L){for(var G=n(),p=n(),I=0;I<16;I++)p[I]=L[I];a(p),a(p),a(p);for(var C=0;C<2;C++){G[0]=p[0]-65517;for(var I=1;I<15;I++)G[I]=p[I]-65535-(G[I-1]>>16&1),G[I-1]&=65535;G[15]=p[15]-32767-(G[14]>>16&1);var V=G[15]>>16&1;G[14]&=65535,s(p,G,1-V)}for(var I=0;I<16;I++)U[2*I]=p[I]&255,U[2*I+1]=p[I]>>8}function f(U,L){for(var G=0;G<16;G++)U[G]=L[2*G]+(L[2*G+1]<<8);U[15]&=32767}function c(U,L,G){for(var p=0;p<16;p++)U[p]=L[p]+G[p]}function h(U,L,G){for(var p=0;p<16;p++)U[p]=L[p]-G[p]}function b(U,L,G){var p,I,C=0,V=0,$=0,m=0,E=0,y=0,g=0,M=0,R=0,v=0,d=0,l=0,x=0,B=0,H=0,D=0,k=0,Z=0,z=0,K=0,W=0,S=0,J=0,ne=0,ae=0,ue=0,de=0,q=0,N=0,O=0,Y=0,ee=G[0],re=G[1],ie=G[2],pe=G[3],le=G[4],he=G[5],xe=G[6],se=G[7],_e=G[8],$e=G[9],Se=G[10],Pe=G[11],Ye=G[12],be=G[13],ke=G[14],rt=G[15];p=L[0],C+=p*ee,V+=p*re,$+=p*ie,m+=p*pe,E+=p*le,y+=p*he,g+=p*xe,M+=p*se,R+=p*_e,v+=p*$e,d+=p*Se,l+=p*Pe,x+=p*Ye,B+=p*be,H+=p*ke,D+=p*rt,p=L[1],V+=p*ee,$+=p*re,m+=p*ie,E+=p*pe,y+=p*le,g+=p*he,M+=p*xe,R+=p*se,v+=p*_e,d+=p*$e,l+=p*Se,x+=p*Pe,B+=p*Ye,H+=p*be,D+=p*ke,k+=p*rt,p=L[2],$+=p*ee,m+=p*re,E+=p*ie,y+=p*pe,g+=p*le,M+=p*he,R+=p*xe,v+=p*se,d+=p*_e,l+=p*$e,x+=p*Se,B+=p*Pe,H+=p*Ye,D+=p*be,k+=p*ke,Z+=p*rt,p=L[3],m+=p*ee,E+=p*re,y+=p*ie,g+=p*pe,M+=p*le,R+=p*he,v+=p*xe,d+=p*se,l+=p*_e,x+=p*$e,B+=p*Se,H+=p*Pe,D+=p*Ye,k+=p*be,Z+=p*ke,z+=p*rt,p=L[4],E+=p*ee,y+=p*re,g+=p*ie,M+=p*pe,R+=p*le,v+=p*he,d+=p*xe,l+=p*se,x+=p*_e,B+=p*$e,H+=p*Se,D+=p*Pe,k+=p*Ye,Z+=p*be,z+=p*ke,K+=p*rt,p=L[5],y+=p*ee,g+=p*re,M+=p*ie,R+=p*pe,v+=p*le,d+=p*he,l+=p*xe,x+=p*se,B+=p*_e,H+=p*$e,D+=p*Se,k+=p*Pe,Z+=p*Ye,z+=p*be,K+=p*ke,W+=p*rt,p=L[6],g+=p*ee,M+=p*re,R+=p*ie,v+=p*pe,d+=p*le,l+=p*he,x+=p*xe,B+=p*se,H+=p*_e,D+=p*$e,k+=p*Se,Z+=p*Pe,z+=p*Ye,K+=p*be,W+=p*ke,S+=p*rt,p=L[7],M+=p*ee,R+=p*re,v+=p*ie,d+=p*pe,l+=p*le,x+=p*he,B+=p*xe,H+=p*se,D+=p*_e,k+=p*$e,Z+=p*Se,z+=p*Pe,K+=p*Ye,W+=p*be,S+=p*ke,J+=p*rt,p=L[8],R+=p*ee,v+=p*re,d+=p*ie,l+=p*pe,x+=p*le,B+=p*he,H+=p*xe,D+=p*se,k+=p*_e,Z+=p*$e,z+=p*Se,K+=p*Pe,W+=p*Ye,S+=p*be,J+=p*ke,ne+=p*rt,p=L[9],v+=p*ee,d+=p*re,l+=p*ie,x+=p*pe,B+=p*le,H+=p*he,D+=p*xe,k+=p*se,Z+=p*_e,z+=p*$e,K+=p*Se,W+=p*Pe,S+=p*Ye,J+=p*be,ne+=p*ke,ae+=p*rt,p=L[10],d+=p*ee,l+=p*re,x+=p*ie,B+=p*pe,H+=p*le,D+=p*he,k+=p*xe,Z+=p*se,z+=p*_e,K+=p*$e,W+=p*Se,S+=p*Pe,J+=p*Ye,ne+=p*be,ae+=p*ke,ue+=p*rt,p=L[11],l+=p*ee,x+=p*re,B+=p*ie,H+=p*pe,D+=p*le,k+=p*he,Z+=p*xe,z+=p*se,K+=p*_e,W+=p*$e,S+=p*Se,J+=p*Pe,ne+=p*Ye,ae+=p*be,ue+=p*ke,de+=p*rt,p=L[12],x+=p*ee,B+=p*re,H+=p*ie,D+=p*pe,k+=p*le,Z+=p*he,z+=p*xe,K+=p*se,W+=p*_e,S+=p*$e,J+=p*Se,ne+=p*Pe,ae+=p*Ye,ue+=p*be,de+=p*ke,q+=p*rt,p=L[13],B+=p*ee,H+=p*re,D+=p*ie,k+=p*pe,Z+=p*le,z+=p*he,K+=p*xe,W+=p*se,S+=p*_e,J+=p*$e,ne+=p*Se,ae+=p*Pe,ue+=p*Ye,de+=p*be,q+=p*ke,N+=p*rt,p=L[14],H+=p*ee,D+=p*re,k+=p*ie,Z+=p*pe,z+=p*le,K+=p*he,W+=p*xe,S+=p*se,J+=p*_e,ne+=p*$e,ae+=p*Se,ue+=p*Pe,de+=p*Ye,q+=p*be,N+=p*ke,O+=p*rt,p=L[15],D+=p*ee,k+=p*re,Z+=p*ie,z+=p*pe,K+=p*le,W+=p*he,S+=p*xe,J+=p*se,ne+=p*_e,ae+=p*$e,ue+=p*Se,de+=p*Pe,q+=p*Ye,N+=p*be,O+=p*ke,Y+=p*rt,C+=38*k,V+=38*Z,$+=38*z,m+=38*K,E+=38*W,y+=38*S,g+=38*J,M+=38*ne,R+=38*ae,v+=38*ue,d+=38*de,l+=38*q,x+=38*N,B+=38*O,H+=38*Y,I=1,p=C+I+65535,I=Math.floor(p/65536),C=p-I*65536,p=V+I+65535,I=Math.floor(p/65536),V=p-I*65536,p=$+I+65535,I=Math.floor(p/65536),$=p-I*65536,p=m+I+65535,I=Math.floor(p/65536),m=p-I*65536,p=E+I+65535,I=Math.floor(p/65536),E=p-I*65536,p=y+I+65535,I=Math.floor(p/65536),y=p-I*65536,p=g+I+65535,I=Math.floor(p/65536),g=p-I*65536,p=M+I+65535,I=Math.floor(p/65536),M=p-I*65536,p=R+I+65535,I=Math.floor(p/65536),R=p-I*65536,p=v+I+65535,I=Math.floor(p/65536),v=p-I*65536,p=d+I+65535,I=Math.floor(p/65536),d=p-I*65536,p=l+I+65535,I=Math.floor(p/65536),l=p-I*65536,p=x+I+65535,I=Math.floor(p/65536),x=p-I*65536,p=B+I+65535,I=Math.floor(p/65536),B=p-I*65536,p=H+I+65535,I=Math.floor(p/65536),H=p-I*65536,p=D+I+65535,I=Math.floor(p/65536),D=p-I*65536,C+=I-1+37*(I-1),I=1,p=C+I+65535,I=Math.floor(p/65536),C=p-I*65536,p=V+I+65535,I=Math.floor(p/65536),V=p-I*65536,p=$+I+65535,I=Math.floor(p/65536),$=p-I*65536,p=m+I+65535,I=Math.floor(p/65536),m=p-I*65536,p=E+I+65535,I=Math.floor(p/65536),E=p-I*65536,p=y+I+65535,I=Math.floor(p/65536),y=p-I*65536,p=g+I+65535,I=Math.floor(p/65536),g=p-I*65536,p=M+I+65535,I=Math.floor(p/65536),M=p-I*65536,p=R+I+65535,I=Math.floor(p/65536),R=p-I*65536,p=v+I+65535,I=Math.floor(p/65536),v=p-I*65536,p=d+I+65535,I=Math.floor(p/65536),d=p-I*65536,p=l+I+65535,I=Math.floor(p/65536),l=p-I*65536,p=x+I+65535,I=Math.floor(p/65536),x=p-I*65536,p=B+I+65535,I=Math.floor(p/65536),B=p-I*65536,p=H+I+65535,I=Math.floor(p/65536),H=p-I*65536,p=D+I+65535,I=Math.floor(p/65536),D=p-I*65536,C+=I-1+37*(I-1),U[0]=C,U[1]=V,U[2]=$,U[3]=m,U[4]=E,U[5]=y,U[6]=g,U[7]=M,U[8]=R,U[9]=v,U[10]=d,U[11]=l,U[12]=x,U[13]=B,U[14]=H,U[15]=D}function w(U,L){b(U,L,L)}function A(U,L){for(var G=n(),p=0;p<16;p++)G[p]=L[p];for(var p=253;p>=0;p--)w(G,G),p!==2&&p!==4&&b(G,G,L);for(var p=0;p<16;p++)U[p]=G[p]}function _(U,L){for(var G=new Uint8Array(32),p=new Float64Array(80),I=n(),C=n(),V=n(),$=n(),m=n(),E=n(),y=0;y<31;y++)G[y]=U[y];G[31]=U[31]&127|64,G[0]&=248,f(p,L);for(var y=0;y<16;y++)C[y]=p[y];I[0]=$[0]=1;for(var y=254;y>=0;--y){var g=G[y>>>3]>>>(y&7)&1;s(I,C,g),s(V,$,g),c(m,I,V),h(I,I,V),c(V,C,$),h(C,C,$),w($,m),w(E,I),b(I,V,I),b(V,C,m),c(m,I,V),h(I,I,V),w(C,I),h(V,$,E),b(I,V,o),c(I,I,$),b(V,V,I),b(I,$,E),b($,C,p),w(C,m),s(I,C,g),s(V,$,g)}for(var y=0;y<16;y++)p[y+16]=I[y],p[y+32]=V[y],p[y+48]=C[y],p[y+64]=$[y];var M=p.subarray(32),R=p.subarray(16);A(M,M),b(R,R,M);var v=new Uint8Array(32);return u(v,R),v}t.scalarMult=_;function T(U){return _(U,i)}t.scalarMultBase=T;function P(U){if(U.length!==t.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+t.SECRET_KEY_LENGTH+" bytes");var L=new Uint8Array(U),G=T(L);return{publicKey:G,secretKey:L}}t.generateKeyPairFromSeed=P;function F(U){var L=e.randomBytes(32,U),G=P(L);return r.wipe(L),G}t.generateKeyPair=F;function j(U,L,G){if(G===void 0&&(G=!1),U.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(L.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var p=_(U,L);if(G){for(var I=0,C=0;C<p.length;C++)I|=p[C];if(I===0)throw new Error("X25519: invalid shared key")}return p}t.sharedKey=j})(xi);var Xv={},qu={},Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});var Ar=Ge,Zv=Zr,JF=20;function YF(t,e,r){for(var n=1634760805,i=857760878,o=2036477234,a=1797285236,s=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],f=r[11]<<24|r[10]<<16|r[9]<<8|r[8],c=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],b=r[23]<<24|r[22]<<16|r[21]<<8|r[20],w=r[27]<<24|r[26]<<16|r[25]<<8|r[24],A=r[31]<<24|r[30]<<16|r[29]<<8|r[28],_=e[3]<<24|e[2]<<16|e[1]<<8|e[0],T=e[7]<<24|e[6]<<16|e[5]<<8|e[4],P=e[11]<<24|e[10]<<16|e[9]<<8|e[8],F=e[15]<<24|e[14]<<16|e[13]<<8|e[12],j=n,U=i,L=o,G=a,p=s,I=u,C=f,V=c,$=h,m=b,E=w,y=A,g=_,M=T,R=P,v=F,d=0;d<JF;d+=2)j=j+p|0,g^=j,g=g>>>32-16|g<<16,$=$+g|0,p^=$,p=p>>>32-12|p<<12,U=U+I|0,M^=U,M=M>>>32-16|M<<16,m=m+M|0,I^=m,I=I>>>32-12|I<<12,L=L+C|0,R^=L,R=R>>>32-16|R<<16,E=E+R|0,C^=E,C=C>>>32-12|C<<12,G=G+V|0,v^=G,v=v>>>32-16|v<<16,y=y+v|0,V^=y,V=V>>>32-12|V<<12,L=L+C|0,R^=L,R=R>>>32-8|R<<8,E=E+R|0,C^=E,C=C>>>32-7|C<<7,G=G+V|0,v^=G,v=v>>>32-8|v<<8,y=y+v|0,V^=y,V=V>>>32-7|V<<7,U=U+I|0,M^=U,M=M>>>32-8|M<<8,m=m+M|0,I^=m,I=I>>>32-7|I<<7,j=j+p|0,g^=j,g=g>>>32-8|g<<8,$=$+g|0,p^=$,p=p>>>32-7|p<<7,j=j+I|0,v^=j,v=v>>>32-16|v<<16,E=E+v|0,I^=E,I=I>>>32-12|I<<12,U=U+C|0,g^=U,g=g>>>32-16|g<<16,y=y+g|0,C^=y,C=C>>>32-12|C<<12,L=L+V|0,M^=L,M=M>>>32-16|M<<16,$=$+M|0,V^=$,V=V>>>32-12|V<<12,G=G+p|0,R^=G,R=R>>>32-16|R<<16,m=m+R|0,p^=m,p=p>>>32-12|p<<12,L=L+V|0,M^=L,M=M>>>32-8|M<<8,$=$+M|0,V^=$,V=V>>>32-7|V<<7,G=G+p|0,R^=G,R=R>>>32-8|R<<8,m=m+R|0,p^=m,p=p>>>32-7|p<<7,U=U+C|0,g^=U,g=g>>>32-8|g<<8,y=y+g|0,C^=y,C=C>>>32-7|C<<7,j=j+I|0,v^=j,v=v>>>32-8|v<<8,E=E+v|0,I^=E,I=I>>>32-7|I<<7;Ar.writeUint32LE(j+n|0,t,0),Ar.writeUint32LE(U+i|0,t,4),Ar.writeUint32LE(L+o|0,t,8),Ar.writeUint32LE(G+a|0,t,12),Ar.writeUint32LE(p+s|0,t,16),Ar.writeUint32LE(I+u|0,t,20),Ar.writeUint32LE(C+f|0,t,24),Ar.writeUint32LE(V+c|0,t,28),Ar.writeUint32LE($+h|0,t,32),Ar.writeUint32LE(m+b|0,t,36),Ar.writeUint32LE(E+w|0,t,40),Ar.writeUint32LE(y+A|0,t,44),Ar.writeUint32LE(g+_|0,t,48),Ar.writeUint32LE(M+T|0,t,52),Ar.writeUint32LE(R+P|0,t,56),Ar.writeUint32LE(v+F|0,t,60)}function uE(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var o,a;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),a=o.length-e.length,o.set(e,a)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,a=i}for(var s=new Uint8Array(64),u=0;u<r.length;u+=64){YF(s,o,t);for(var f=u;f<u+64&&f<r.length;f++)n[f]=r[f]^s[f-u];ZF(o,0,a)}return Zv.wipe(s),i===0&&Zv.wipe(o),n}Gu.streamXOR=uE;function XF(t,e,r,n){return n===void 0&&(n=0),Zv.wipe(r),uE(t,e,r,r,n)}Gu.stream=XF;function ZF(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}Object.defineProperty(qu,"__esModule",{value:!0});var po=Ge,fE=Zr,QF=Gu,ej=20;function cE(t,e,r,n){if(e.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var i=lE(t,e.subarray(0,16),new Uint8Array(32)),o=new Uint8Array(12);o.set(e.subarray(16),4);var a=QF.streamXOR(i,o,r,n);return fE.wipe(i),a}qu.streamXOR=cE;function tj(t,e,r){return fE.wipe(r),cE(t,e,r,r)}qu.stream=tj;function lE(t,e,r){for(var n=1634760805,i=857760878,o=2036477234,a=1797285236,s=t[3]<<24|t[2]<<16|t[1]<<8|t[0],u=t[7]<<24|t[6]<<16|t[5]<<8|t[4],f=t[11]<<24|t[10]<<16|t[9]<<8|t[8],c=t[15]<<24|t[14]<<16|t[13]<<8|t[12],h=t[19]<<24|t[18]<<16|t[17]<<8|t[16],b=t[23]<<24|t[22]<<16|t[21]<<8|t[20],w=t[27]<<24|t[26]<<16|t[25]<<8|t[24],A=t[31]<<24|t[30]<<16|t[29]<<8|t[28],_=e[3]<<24|e[2]<<16|e[1]<<8|e[0],T=e[7]<<24|e[6]<<16|e[5]<<8|e[4],P=e[11]<<24|e[10]<<16|e[9]<<8|e[8],F=e[15]<<24|e[14]<<16|e[13]<<8|e[12],j=n,U=i,L=o,G=a,p=s,I=u,C=f,V=c,$=h,m=b,E=w,y=A,g=_,M=T,R=P,v=F,d=0;d<ej;d+=2)j=j+p|0,g^=j,g=g>>>32-16|g<<16,$=$+g|0,p^=$,p=p>>>32-12|p<<12,U=U+I|0,M^=U,M=M>>>32-16|M<<16,m=m+M|0,I^=m,I=I>>>32-12|I<<12,L=L+C|0,R^=L,R=R>>>32-16|R<<16,E=E+R|0,C^=E,C=C>>>32-12|C<<12,G=G+V|0,v^=G,v=v>>>32-16|v<<16,y=y+v|0,V^=y,V=V>>>32-12|V<<12,L=L+C|0,R^=L,R=R>>>32-8|R<<8,E=E+R|0,C^=E,C=C>>>32-7|C<<7,G=G+V|0,v^=G,v=v>>>32-8|v<<8,y=y+v|0,V^=y,V=V>>>32-7|V<<7,U=U+I|0,M^=U,M=M>>>32-8|M<<8,m=m+M|0,I^=m,I=I>>>32-7|I<<7,j=j+p|0,g^=j,g=g>>>32-8|g<<8,$=$+g|0,p^=$,p=p>>>32-7|p<<7,j=j+I|0,v^=j,v=v>>>32-16|v<<16,E=E+v|0,I^=E,I=I>>>32-12|I<<12,U=U+C|0,g^=U,g=g>>>32-16|g<<16,y=y+g|0,C^=y,C=C>>>32-12|C<<12,L=L+V|0,M^=L,M=M>>>32-16|M<<16,$=$+M|0,V^=$,V=V>>>32-12|V<<12,G=G+p|0,R^=G,R=R>>>32-16|R<<16,m=m+R|0,p^=m,p=p>>>32-12|p<<12,L=L+V|0,M^=L,M=M>>>32-8|M<<8,$=$+M|0,V^=$,V=V>>>32-7|V<<7,G=G+p|0,R^=G,R=R>>>32-8|R<<8,m=m+R|0,p^=m,p=p>>>32-7|p<<7,U=U+C|0,g^=U,g=g>>>32-8|g<<8,y=y+g|0,C^=y,C=C>>>32-7|C<<7,j=j+I|0,v^=j,v=v>>>32-8|v<<8,E=E+v|0,I^=E,I=I>>>32-7|I<<7;return po.writeUint32LE(j,r,0),po.writeUint32LE(U,r,4),po.writeUint32LE(L,r,8),po.writeUint32LE(G,r,12),po.writeUint32LE(g,r,16),po.writeUint32LE(M,r,20),po.writeUint32LE(R,r,24),po.writeUint32LE(v,r,28),r}qu.hchacha=lE;var hE={},dE={},ua={};Object.defineProperty(ua,"__esModule",{value:!0});function rj(t,e,r){return~(t-1)&e|t-1&r}ua.select=rj;function nj(t,e){return(t|0)-(e|0)-1>>>31&1}ua.lessOrEqual=nj;function pE(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}ua.compare=pE;function ij(t,e){return t.length===0||e.length===0?!1:pE(t,e)!==0}ua.equal=ij;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ua,r=Zr;t.DIGEST_LENGTH=16;var n=function(){function a(s){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var u=s[0]|s[1]<<8;this._r[0]=u&8191;var f=s[2]|s[3]<<8;this._r[1]=(u>>>13|f<<3)&8191;var c=s[4]|s[5]<<8;this._r[2]=(f>>>10|c<<6)&7939;var h=s[6]|s[7]<<8;this._r[3]=(c>>>7|h<<9)&8191;var b=s[8]|s[9]<<8;this._r[4]=(h>>>4|b<<12)&255,this._r[5]=b>>>1&8190;var w=s[10]|s[11]<<8;this._r[6]=(b>>>14|w<<2)&8191;var A=s[12]|s[13]<<8;this._r[7]=(w>>>11|A<<5)&8065;var _=s[14]|s[15]<<8;this._r[8]=(A>>>8|_<<8)&8191,this._r[9]=_>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return a.prototype._blocks=function(s,u,f){for(var c=this._fin?0:1<<11,h=this._h[0],b=this._h[1],w=this._h[2],A=this._h[3],_=this._h[4],T=this._h[5],P=this._h[6],F=this._h[7],j=this._h[8],U=this._h[9],L=this._r[0],G=this._r[1],p=this._r[2],I=this._r[3],C=this._r[4],V=this._r[5],$=this._r[6],m=this._r[7],E=this._r[8],y=this._r[9];f>=16;){var g=s[u+0]|s[u+1]<<8;h+=g&8191;var M=s[u+2]|s[u+3]<<8;b+=(g>>>13|M<<3)&8191;var R=s[u+4]|s[u+5]<<8;w+=(M>>>10|R<<6)&8191;var v=s[u+6]|s[u+7]<<8;A+=(R>>>7|v<<9)&8191;var d=s[u+8]|s[u+9]<<8;_+=(v>>>4|d<<12)&8191,T+=d>>>1&8191;var l=s[u+10]|s[u+11]<<8;P+=(d>>>14|l<<2)&8191;var x=s[u+12]|s[u+13]<<8;F+=(l>>>11|x<<5)&8191;var B=s[u+14]|s[u+15]<<8;j+=(x>>>8|B<<8)&8191,U+=B>>>5|c;var H=0,D=H;D+=h*L,D+=b*(5*y),D+=w*(5*E),D+=A*(5*m),D+=_*(5*$),H=D>>>13,D&=8191,D+=T*(5*V),D+=P*(5*C),D+=F*(5*I),D+=j*(5*p),D+=U*(5*G),H+=D>>>13,D&=8191;var k=H;k+=h*G,k+=b*L,k+=w*(5*y),k+=A*(5*E),k+=_*(5*m),H=k>>>13,k&=8191,k+=T*(5*$),k+=P*(5*V),k+=F*(5*C),k+=j*(5*I),k+=U*(5*p),H+=k>>>13,k&=8191;var Z=H;Z+=h*p,Z+=b*G,Z+=w*L,Z+=A*(5*y),Z+=_*(5*E),H=Z>>>13,Z&=8191,Z+=T*(5*m),Z+=P*(5*$),Z+=F*(5*V),Z+=j*(5*C),Z+=U*(5*I),H+=Z>>>13,Z&=8191;var z=H;z+=h*I,z+=b*p,z+=w*G,z+=A*L,z+=_*(5*y),H=z>>>13,z&=8191,z+=T*(5*E),z+=P*(5*m),z+=F*(5*$),z+=j*(5*V),z+=U*(5*C),H+=z>>>13,z&=8191;var K=H;K+=h*C,K+=b*I,K+=w*p,K+=A*G,K+=_*L,H=K>>>13,K&=8191,K+=T*(5*y),K+=P*(5*E),K+=F*(5*m),K+=j*(5*$),K+=U*(5*V),H+=K>>>13,K&=8191;var W=H;W+=h*V,W+=b*C,W+=w*I,W+=A*p,W+=_*G,H=W>>>13,W&=8191,W+=T*L,W+=P*(5*y),W+=F*(5*E),W+=j*(5*m),W+=U*(5*$),H+=W>>>13,W&=8191;var S=H;S+=h*$,S+=b*V,S+=w*C,S+=A*I,S+=_*p,H=S>>>13,S&=8191,S+=T*G,S+=P*L,S+=F*(5*y),S+=j*(5*E),S+=U*(5*m),H+=S>>>13,S&=8191;var J=H;J+=h*m,J+=b*$,J+=w*V,J+=A*C,J+=_*I,H=J>>>13,J&=8191,J+=T*p,J+=P*G,J+=F*L,J+=j*(5*y),J+=U*(5*E),H+=J>>>13,J&=8191;var ne=H;ne+=h*E,ne+=b*m,ne+=w*$,ne+=A*V,ne+=_*C,H=ne>>>13,ne&=8191,ne+=T*I,ne+=P*p,ne+=F*G,ne+=j*L,ne+=U*(5*y),H+=ne>>>13,ne&=8191;var ae=H;ae+=h*y,ae+=b*E,ae+=w*m,ae+=A*$,ae+=_*V,H=ae>>>13,ae&=8191,ae+=T*C,ae+=P*I,ae+=F*p,ae+=j*G,ae+=U*L,H+=ae>>>13,ae&=8191,H=(H<<2)+H|0,H=H+D|0,D=H&8191,H=H>>>13,k+=H,h=D,b=k,w=Z,A=z,_=K,T=W,P=S,F=J,j=ne,U=ae,u+=16,f-=16}this._h[0]=h,this._h[1]=b,this._h[2]=w,this._h[3]=A,this._h[4]=_,this._h[5]=T,this._h[6]=P,this._h[7]=F,this._h[8]=j,this._h[9]=U},a.prototype.finish=function(s,u){u===void 0&&(u=0);var f=new Uint16Array(10),c,h,b,w;if(this._leftover){for(w=this._leftover,this._buffer[w++]=1;w<16;w++)this._buffer[w]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(c=this._h[1]>>>13,this._h[1]&=8191,w=2;w<10;w++)this._h[w]+=c,c=this._h[w]>>>13,this._h[w]&=8191;for(this._h[0]+=c*5,c=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=c,c=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=c,f[0]=this._h[0]+5,c=f[0]>>>13,f[0]&=8191,w=1;w<10;w++)f[w]=this._h[w]+c,c=f[w]>>>13,f[w]&=8191;for(f[9]-=1<<13,h=(c^1)-1,w=0;w<10;w++)f[w]&=h;for(h=~h,w=0;w<10;w++)this._h[w]=this._h[w]&h|f[w];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,b=this._h[0]+this._pad[0],this._h[0]=b&65535,w=1;w<8;w++)b=(this._h[w]+this._pad[w]|0)+(b>>>16)|0,this._h[w]=b&65535;return s[u+0]=this._h[0]>>>0,s[u+1]=this._h[0]>>>8,s[u+2]=this._h[1]>>>0,s[u+3]=this._h[1]>>>8,s[u+4]=this._h[2]>>>0,s[u+5]=this._h[2]>>>8,s[u+6]=this._h[3]>>>0,s[u+7]=this._h[3]>>>8,s[u+8]=this._h[4]>>>0,s[u+9]=this._h[4]>>>8,s[u+10]=this._h[5]>>>0,s[u+11]=this._h[5]>>>8,s[u+12]=this._h[6]>>>0,s[u+13]=this._h[6]>>>8,s[u+14]=this._h[7]>>>0,s[u+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(s){var u=0,f=s.length,c;if(this._leftover){c=16-this._leftover,c>f&&(c=f);for(var h=0;h<c;h++)this._buffer[this._leftover+h]=s[u+h];if(f-=c,u+=c,this._leftover+=c,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(f>=16&&(c=f-f%16,this._blocks(s,u,c),u+=c,f-=c),f){for(var h=0;h<f;h++)this._buffer[this._leftover+h]=s[u+h];this._leftover+=f}return this},a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},a.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a}();t.Poly1305=n;function i(a,s){var u=new n(a);u.update(s);var f=u.digest();return u.clean(),f}t.oneTimeAuth=i;function o(a,s){return a.length!==t.DIGEST_LENGTH||s.length!==t.DIGEST_LENGTH?!1:e.equal(a,s)}t.equal=o})(dE);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Gu,r=dE,n=Zr,i=Ge,o=ua;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var a=new Uint8Array(16),s=function(){function u(f){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,f.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(f)}return u.prototype.seal=function(f,c,h,b){if(f.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var w=new Uint8Array(16);w.set(f,w.length-f.length);var A=new Uint8Array(32);e.stream(this._key,w,A,4);var _=c.length+this.tagLength,T;if(b){if(b.length!==_)throw new Error("ChaCha20Poly1305: incorrect destination length");T=b}else T=new Uint8Array(_);return e.streamXOR(this._key,w,c,T,4),this._authenticate(T.subarray(T.length-this.tagLength,T.length),A,T.subarray(0,T.length-this.tagLength),h),n.wipe(w),T},u.prototype.open=function(f,c,h,b){if(f.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(c.length<this.tagLength)return null;var w=new Uint8Array(16);w.set(f,w.length-f.length);var A=new Uint8Array(32);e.stream(this._key,w,A,4);var _=new Uint8Array(this.tagLength);if(this._authenticate(_,A,c.subarray(0,c.length-this.tagLength),h),!o.equal(_,c.subarray(c.length-this.tagLength,c.length)))return null;var T=c.length-this.tagLength,P;if(b){if(b.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");P=b}else P=new Uint8Array(T);return e.streamXOR(this._key,w,c.subarray(0,c.length-this.tagLength),P,4),n.wipe(w),P},u.prototype.clean=function(){return n.wipe(this._key),this},u.prototype._authenticate=function(f,c,h,b){var w=new r.Poly1305(c);b&&(w.update(b),b.length%16>0&&w.update(a.subarray(b.length%16))),w.update(h),h.length%16>0&&w.update(a.subarray(h.length%16));var A=new Uint8Array(8);b&&i.writeUint64LE(b.length,A),w.update(A),i.writeUint64LE(h.length,A),w.update(A);for(var _=w.digest(),T=0;T<_.length;T++)f[T]=_[T];w.clean(),n.wipe(_),n.wipe(A)},u}();t.ChaCha20Poly1305=s})(hE);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=qu,r=hE,n=Zr;t.KEY_LENGTH=32,t.NONCE_LENGTH=24,t.TAG_LENGTH=16;var i=function(){function o(a){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,a.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(a)}return o.prototype.seal=function(a,s,u,f){if(a.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var c=e.hchacha(this._key,a.subarray(0,16),new Uint8Array(32)),h=new Uint8Array(12);h.set(a.subarray(16),4);var b=new r.ChaCha20Poly1305(c),w=b.seal(h,s,u,f);return n.wipe(c),n.wipe(h),b.clean(),w},o.prototype.open=function(a,s,u,f){if(a.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(s.length<this.tagLength)return null;var c=e.hchacha(this._key,a.subarray(0,16),new Uint8Array(32)),h=new Uint8Array(12);h.set(a.subarray(16),4);var b=new r.ChaCha20Poly1305(c),w=b.open(h,s,u,f);return n.wipe(c),n.wipe(h),b.clean(),w},o.prototype.clean=function(){return n.wipe(this._key),this},o}();t.XChaCha20Poly1305=i})(Xv);function Ir(t){return ql(t,"base64url")}function Ft(t){const e=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return Kn(e,"base64url")}function Qv(t){return Kn(t,"base58btc")}function e1(t){const e=t.startsWith("0x")?t.substring(2):t;return Kn(e.toLowerCase(),"base16")}function t1(t){return Ir(Kn(t))}function r1(t){return ql(Ft(t))}function fa(t){return ql(t,"base16")}function vE(t){return Kn(t)}function mE({r:t,s:e,recoveryParam:r},n){const i=new Uint8Array(n?65:64);if(i.set(Kn(t,"base16"),0),i.set(Kn(e,"base16"),32),n){if(typeof r=="undefined")throw new Error("Signer did not return a recoveryParam");i[64]=r}return Ir(i)}function bE(t){const e=Ft(t);if(e.length<64||e.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${e.length}`);const r=fa(e.slice(0,32)),n=fa(e.slice(32,64)),i=e.length===65?e[64]:void 0;return{r,s:n,recoveryParam:i}}function n1(t,e){return zl([Ft(t),Ft(e)])}const oj=/^(0x)?([a-fA-F0-9]{64}|[a-fA-F0-9]{128})$/,aj=/^([1-9A-HJ-NP-Za-km-z]{44}|[1-9A-HJ-NP-Za-km-z]{88})$/,sj=/^([0-9a-zA-Z=\-_+/]{43}|[0-9a-zA-Z=\-_+/]{86})(={0,2})$/;function yE(t){if(typeof t=="string"){if(oj.test(t))return e1(t);if(aj.test(t))return Qv(t);if(sj.test(t))return Ft(t);throw TypeError("bad_key: Invalid private key format")}else{if(t instanceof Uint8Array)return t;throw TypeError("bad_key: Invalid private key format")}}function gE(t,e=64){return t.length===e?t:"0".repeat(e-t.length)+t}function i1(t){const e=typeof t=="string"?Kn(t):t;return Ki.hash(e)}function uj(t){return new Uint8Array(hf.exports.keccak_256.arrayBuffer(t))}function wE(t){const e=Kn(t.slice(2),"base16");return`0x${ql(uj(e).slice(-20),"base16")}`}function o1(t,e=new Uint8Array(4)){const r=Kn(t.toString(),"base10");return e.set(r,4-r.length),e}const a1=t=>zl([o1(t.length),t]);function rh(t,e,r,n,i){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const o=zl([a1(Kn(r)),a1(typeof n=="undefined"?new Uint8Array(0):n),a1(typeof i=="undefined"?new Uint8Array(0):i),o1(e)]),a=1;return Ki.hash(zl([o1(a),t,o]))}const fj=new Fv.ec("secp256k1");function s1(t,e=!1){const r=yE(t);if(r.length!==32)throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${r.length}`);const n=fj.keyFromPrivate(r);return function(i){try{const{r:o,s:a,recoveryParam:s}=n.sign(i1(i));return Promise.resolve(mE({r:gE(o.toString("hex")),s:gE(a.toString("hex")),recoveryParam:s},e))}catch(o){return Promise.reject(o)}}}function cj(t){const e=s1(t,!0);return function(r){try{return Promise.resolve(e(r)).then(bE)}catch(n){return Promise.reject(n)}}}function lj(t){return s1(t)}function _E(t){const e=yE(t);if(e.length!==64)throw new Error(`bad_key: Invalid private key format. Expecting 64 bytes, but got ${e.length}`);return function(r){try{const n=typeof r=="string"?vE(r):r,i=Dl.sign(e,n);return Promise.resolve(Ir(i))}catch(n){return Promise.reject(n)}}}function hj(t){return _E(t)}function xE(t){return typeof t=="object"&&"r"in t&&"s"in t}function EE(t){return function(r,n){try{return Promise.resolve(n(r)).then(function(i){if(xE(i))return mE(i,t);if(t&&typeof bE(i).recoveryParam=="undefined")throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return i})}catch(i){return Promise.reject(i)}}}function SE(){return function(e,r){try{return Promise.resolve(r(e)).then(function(n){if(xE(n))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return n})}catch(n){return Promise.reject(n)}}}const dj={ES256K:EE(),"ES256K-R":EE(!0),Ed25519:SE(),EdDSA:SE()};function pj(t){const e=dj[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}const u1=new Fv.ec("secp256k1");function nh(t,e=!1){const r=Ft(t);if(r.length!==(e?65:64))throw new Error("wrong signature length");const n=fa(r.slice(0,32)),i=fa(r.slice(32,64)),o={r:n,s:i};return e&&(o.recoveryParam=r[64]),o}function f1(t){if(t.publicKeyBase58)return Qv(t.publicKeyBase58);if(t.publicKeyBase64)return Ft(t.publicKeyBase64);if(t.publicKeyHex)return e1(t.publicKeyHex);if(t.publicKeyJwk&&t.publicKeyJwk.crv==="secp256k1"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return e1(u1.keyFromPublic({x:fa(Ft(t.publicKeyJwk.x)),y:fa(Ft(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyMultibase){const{base16:e,base58btc:r,base64:n,base64url:i}=vn;return e.decoder.or(r.decoder.or(n.decoder.or(i.decoder))).decode(t.publicKeyMultibase)}return new Uint8Array}function vj(t,e,r){const n=i1(t),i=nh(e),o=r.filter(({ethereumAddress:u,blockchainAccountId:f})=>typeof u=="undefined"&&typeof f=="undefined"),a=r.filter(({ethereumAddress:u,blockchainAccountId:f})=>typeof u!="undefined"||typeof f!==void 0);let s=o.find(u=>{try{const f=f1(u);return u1.keyFromPublic(f).verify(n,i)}catch{return!1}});if(!s&&a.length>0&&(s=AE(t,e,a)),!s)throw new Error("invalid_signature: Signature invalid for JWT");return s}function AE(t,e,r){let n;if(e.length>86)n=[nh(e,!0)];else{const a=nh(e,!1);n=[mr(ye({},a),{recoveryParam:0}),mr(ye({},a),{recoveryParam:1})]}const i=a=>{const s=i1(t),u=u1.recoverPubKey(s,a,a.recoveryParam),f=u.encode("hex"),c=u.encode("hex",!0),h=wE(f);return r.find(w=>{var A,_,T;const P=fa(f1(w));return P===f||P===c||((A=w.ethereumAddress)==null?void 0:A.toLowerCase())===h||((_=w.blockchainAccountId)==null||(T=_.split("@eip155"))==null?void 0:T[0].toLowerCase())===h})},o=n.map(i).filter(a=>typeof a!="undefined");if(o.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return o[0]}function IE(t,e,r){const n=vE(t),i=Ft(e),o=r.find(a=>Dl.verify(f1(a),n,i));if(!o)throw new Error("invalid_signature: Signature invalid for JWT");return o}const mj={ES256K:vj,"ES256K-R":AE,Ed25519:IE,EdDSA:IE};function PE(t){const e=mj[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}PE.toSignatureObject=nh;const bj=function(t,e,r,n){try{const i=wj[e];if(!i||i.length===0)throw new Error(`not_supported: No supported signature types for algorithm ${e}`);let o;return Promise.resolve(t.resolve(r,{accept:kE})).then(function(a){var s,u,f,c,h;if(Object.getOwnPropertyNames(a).indexOf("didDocument")===-1?o={didDocument:a,didDocumentMetadata:{},didResolutionMetadata:{contentType:kE}}:o=a,(s=o.didResolutionMetadata)!=null&&s.error||o.didDocument==null){const{error:T,message:P}=o.didResolutionMetadata;throw new Error(`resolver_error: Unable to resolve DID document for ${r}: ${T}, ${P||""}`)}const b=(T,P)=>{const F=T.filter(({id:j})=>P===j);return F.length>0?F[0]:null};let w=[...((u=o)==null||(f=u.didDocument)==null?void 0:f.verificationMethod)||[],...((c=o)==null||(h=c.didDocument)==null?void 0:h.publicKey)||[]];if(typeof n=="string"){var A;n.startsWith("assertion")&&!Object.getOwnPropertyNames((A=o)==null?void 0:A.didDocument).includes("assertionMethod")&&(o.didDocument=ye({},o.didDocument),o.didDocument.assertionMethod=[...w.map(T=>T.id)]),w=(o.didDocument[n]||[]).map(T=>typeof T=="string"?b(w,T):typeof T.publicKey=="string"?b(w,T.publicKey):T).filter(T=>T!=null)}const _=w.filter(({type:T})=>i.find(P=>P===T));if(typeof n=="string"&&(!_||_.length===0))throw new Error(`no_suitable_keys: DID document for ${r} does not have public keys suitable for ${e} with ${n} purpose`);if(!_||_.length===0)throw new Error(`no_suitable_keys: DID document for ${r} does not have public keys for ${e}`);return{authenticators:_,issuer:r,didResolutionResult:o}})}catch(i){return Promise.reject(i)}},yj=function(t,e={resolver:void 0,auth:void 0,audience:void 0,callbackUrl:void 0,skewTime:void 0,proofPurpose:void 0}){try{if(!e.resolver)throw new Error("missing_resolver: No DID resolver has been configured");const{payload:r,header:n,signature:i,data:o}=OE(t),a=Object.prototype.hasOwnProperty.call(e,"auth")?e.auth?"authentication":void 0:e.proofPurpose;return Promise.resolve(bj(e.resolver,n.alg,r.iss||"",a)).then(function({didResolutionResult:s,authenticators:u,issuer:f}){return Promise.resolve($E({header:n,data:o,signature:i},u)).then(function(c){const h=Math.floor(Date.now()/1e3),b=typeof e.skewTime!="undefined"&&e.skewTime>=0?e.skewTime:xj;if(c){const w=h+b;if(r.nbf){if(r.nbf>w)throw new Error(`invalid_jwt: JWT not valid before nbf: ${r.nbf}`)}else if(r.iat&&r.iat>w)throw new Error(`invalid_jwt: JWT not valid yet (issued in the future) iat: ${r.iat}`);if(r.exp&&r.exp<=h-b)throw new Error(`invalid_jwt: JWT has expired: exp: ${r.exp} < now: ${h}`);if(r.aud){if(!e.audience&&!e.callbackUrl)throw new Error("invalid_config: JWT audience is required but your app address has not been configured");if(typeof(Array.isArray(r.aud)?r.aud:[r.aud]).find(T=>e.audience===T||e.callbackUrl===T)=="undefined")throw new Error("invalid_config: JWT audience does not match your DID or callback url")}return{payload:r,didResolutionResult:s,issuer:f,signer:c,jwt:t}}throw new Error("invalid_signature: JWT not valid. issuer DID document does not contain a verificationMethod that matches the signature.")})})}catch(r){return Promise.reject(r)}},gj=function(t,{issuer:e,signer:r,alg:n,expiresIn:i,canonicalize:o},a={}){try{if(!r)throw new Error("missing_signer: No Signer functionality has been configured");if(!e)throw new Error("missing_issuer: No issuing DID has been configured");a.typ||(a.typ="JWT"),a.alg||(a.alg=n);const s={iat:Math.floor(Date.now()/1e3),exp:void 0};if(i)if(typeof i=="number")s.exp=(t.nbf||s.iat)+Math.floor(i);else throw new Error("invalid_argument: JWT expiresIn is not a number");const u=mr(ye(ye({},s),t),{iss:e});return ME(u,r,a,{canonicalize:o})}catch(s){return Promise.reject(s)}},ME=function(t,e,r={},n={}){try{r.alg||(r.alg=_j);const i=typeof t=="string"?t:TE(t,n.canonicalize),o=[TE(r,n.canonicalize),i].join("."),a=pj(r.alg);return Promise.resolve(a(o,e)).then(function(s){return[o,s].join(".")})}catch(i){return Promise.reject(i)}},wj={ES256K:["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1"],"ES256K-R":["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1"],Ed25519:["ED25519SignatureVerification","Ed25519VerificationKey2018"],EdDSA:["ED25519SignatureVerification","Ed25519VerificationKey2018"]},_j="ES256K",kE="application/did+json";function TE(t,e=!1){return t1(e?VF(t):JSON.stringify(t))}const xj=300;function NE(t){const e=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(e)return{header:JSON.parse(r1(e[1])),payload:e[2],signature:e[3],data:`${e[1]}.${e[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function OE(t){if(!t)throw new Error("invalid_argument: no JWT passed into decodeJWT");try{const e=NE(t);return Object.assign(e,{payload:JSON.parse(r1(e.payload))})}catch{throw new Error("invalid_argument: Incorrect format JWT")}}function $E({header:t,data:e,signature:r},n){return Array.isArray(n)||(n=[n]),PE(t.alg)(e,r,n)}function Ej(t,e){const r=NE(t);return $E(r,e)}function Sj(t,e,r){for(var n;;){var i=t();if(vo(i)&&(i=i.v),!i)return o;if(i.then){n=0;break}var o=r();if(o&&o.then)if(vo(o))o=o.s;else{n=1;break}if(e){var a=e();if(a&&a.then&&!vo(a)){n=2;break}}}var s=new ca,u=Ht.bind(null,s,2);return(n===0?i.then(c):n===1?o.then(f):a.then(h)).then(void 0,u),s;function f(b){o=b;do{if(e&&(a=e(),a&&a.then&&!vo(a))){a.then(h).then(void 0,u);return}if(i=t(),!i||vo(i)&&!i.v){Ht(s,1,o);return}if(i.then){i.then(c).then(void 0,u);return}o=r(),vo(o)&&(o=o.v)}while(!o||!o.then);o.then(f).then(void 0,u)}function c(b){b?(o=r(),o&&o.then?o.then(f).then(void 0,u):f(o)):Ht(s,1,o)}function h(){(i=t())?i.then?i.then(c).then(void 0,u):c(i):Ht(s,1,o)}}const Aj=function(t,e){try{let n=function(f){if(s===null)throw new Error("failure: Failed to decrypt");return s},r;Mj(t);const i=JSON.parse(r1(t.protected));if(i.enc!==e.enc)throw new Error(`not_supported: Decrypter does not supported: '${i.enc}'`);const o=n1(t.ciphertext,t.tag),a=new Uint8Array(Buffer.from(t.aad?`${t.protected}.${t.aad}`:t.protected));let s=null;const u=function(){return i.alg==="dir"&&e.alg==="dir"?Promise.resolve(e.decrypt(o,Ft(t.iv),a)).then(function(f){s=f}):function(){if(!t.recipients||t.recipients.length===0)throw new Error("bad_jwe: missing recipients");{let f=0;return Sj(function(){return!s&&f<t.recipients.length},function(){return f++},function(){const c=t.recipients[f];Object.assign(c.header,i);const h=function(){if(c.header.alg===e.alg)return Promise.resolve(e.decrypt(o,Ft(t.iv),a,c)).then(function(b){s=b})}();if(h&&h.then)return h.then(function(){})})}}()}();return Promise.resolve(u&&u.then?u.then(n):n(u))}catch(r){return Promise.reject(r)}},RE=typeof Symbol!="undefined"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Ht(t,e,r){if(!t.s){if(r instanceof ca)if(r.s)e&1&&(e=r.s),r=r.v;else{r.o=Ht.bind(null,t,e);return}if(r&&r.then){r.then(Ht.bind(null,t,e),Ht.bind(null,t,2));return}t.s=e,t.v=r;const n=t.o;n&&n(t)}}const ca=function(){function t(){}return t.prototype.then=function(e,r){const n=new t,i=this.s;if(i){const o=i&1?e:r;if(o){try{Ht(n,1,o(this.v))}catch(a){Ht(n,2,a)}return n}else return this}return this.o=function(o){try{const a=o.v;o.s&1?Ht(n,1,e?e(a):a):r?Ht(n,1,r(a)):Ht(n,2,a)}catch(a){Ht(n,2,a)}},n},t}();function vo(t){return t instanceof ca&&t.s&1}function Ij(t,e,r){var n=-1,i,o;function a(s){try{for(;++n<t.length&&(!r||!r());)if(s=e(n),s&&s.then)if(vo(s))s=s.v;else{s.then(a,o||(o=Ht.bind(null,i=new ca,2)));return}i?Ht(i,1,s):i=s}catch(u){Ht(i||(i=new ca),2,u)}}return a(),i}function Pj(t,e,r){if(typeof t[RE]=="function"){let c=function(h){try{for(;!(i=n.next()).done&&(!r||!r());)if(h=e(i.value),h&&h.then)if(vo(h))h=h.v;else{h.then(c,a||(a=Ht.bind(null,o=new ca,2)));return}o?Ht(o,1,h):o=h}catch(b){Ht(o||(o=new ca),2,b)}};var n=t[RE](),i,o,a;if(c(),n.return){var s=function(h){try{i.done||n.return()}catch{}return h};if(o&&o.then)return o.then(s,function(h){throw s(h)});s()}return o}if(!("length"in t))throw new TypeError("Object is not iterable");for(var u=[],f=0;f<t.length;f++)u.push(t[f]);return Ij(u,function(c){return e(u[c])},r)}function Mj(t){if(!(t.protected&&t.iv&&t.ciphertext&&t.tag))throw new Error("bad_jwe: missing properties");t.recipients&&t.recipients.map(e=>{if(!(e.header&&e.encrypted_key))throw new Error("bad_jwe: malformed recipients")})}function CE({ciphertext:t,tag:e,iv:r,protectedHeader:n,recipient:i},o){const a={protected:n,iv:Ir(r),ciphertext:Ir(t),tag:Ir(e)};return o&&(a.aad=Ir(o)),i&&(a.recipients=[i]),a}const kj=function(t,e,r={},n){try{if(e[0].alg==="dir"){if(e.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(e[0].encrypt(t,r,n)).then(function(i){return CE(i,n)})}else{const i=e[0].enc;if(!e.reduce((u,f)=>u&&f.enc===i,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let o,a;const s=Pj(e,function(u){const f=function(){return o?Promise.resolve(u.encryptCek==null?void 0:u.encryptCek(o)).then(function(c){if(c){var h,b;(h=a)==null||(b=h.recipients)==null||b.push(c)}}):Promise.resolve(u.encrypt(t,r,n)).then(function(c){o=c.cek,a=CE(c,n)})}();if(f&&f.then)return f.then(function(){})});return Promise.resolve(s&&s.then?s.then(function(){return a}):a)}}catch(i){return Promise.reject(i)}};function Tj(t){if(t.length!==32)throw new Error("invalid_argument: incorrect secret key length for X25519");return function(e){try{if(e.length!==32)throw new Error("invalid_argument: incorrect publicKey key length for X25519");return Promise.resolve(xi.sharedKey(t,e))}catch(r){return Promise.reject(r)}}}const Nj=function(t,e){try{const r=function(i){try{return Promise.resolve(e.resolve(i)).then(function({didResolutionMetadata:o,didDocument:a}){var s;if(o!=null&&o.error||a==null)throw new Error(`resolver_error: Could not resolve ${i}: ${o.error}, ${o.message}`);if(!a.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${i}`);const f=((s=a.keyAgreement)==null?void 0:s.map(c=>typeof c=="string"?[...a.publicKey||[],...a.verificationMethod||[]].find(h=>h.id===c):c).filter(c=>typeof c!="undefined")).filter(c=>c.type==="X25519KeyAgreementKey2019"&&Boolean(c.publicKeyBase58));if(!f.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${i}`);return f.map(c=>h1(Qv(c.publicKeyBase58),c.id))})}catch(o){return Promise.reject(o)}},n=t.map(i=>r(i));return Promise.resolve(Promise.all(n)).then(function(i){return[].concat(...i)})}catch(r){return Promise.reject(r)}};function Oj(t,e,r={}){return LE(t,e,r)}function $j(t,e={}){return h1(t,e==null?void 0:e.kid)}function Rj(t,e){return UE(t,e)}function Cj(t){return BE(t)}function c1(t){const e=new Xv.XChaCha20Poly1305(t);return(r,n)=>{const i=Zi.randomBytes(e.nonceLength),o=e.seal(i,r,n);return{ciphertext:o.subarray(0,o.length-e.tagLength),tag:o.subarray(o.length-e.tagLength),iv:i}}}function l1(t){const e=function(o,a={},s){try{const u=t1(JSON.stringify(Object.assign({alg:i},a,{enc:n}))),f=new Uint8Array(Buffer.from(s?`${u}.${Ir(s)}`:u));return Promise.resolve(mr(ye({},r(o,f)),{protectedHeader:u}))}catch(u){return Promise.reject(u)}},r=c1(t),n="XC20P",i="dir";return{alg:i,enc:n,encrypt:e}}function Hu(t){const e=function(n,i,o){try{return Promise.resolve(r.open(i,n,o))}catch(a){return Promise.reject(a)}},r=new Xv.XChaCha20Poly1305(t);return{alg:"dir",enc:"XC20P",decrypt:e}}function h1(t,e){const r=function(s,u={},f){try{Object.assign(u,{alg:void 0});const c=Zi.randomBytes(32);return Promise.resolve(l1(c).encrypt(s,u,f)).then(function(h){return Promise.resolve(n(c)).then(function(b){return mr(ye({},h),{recipient:b,cek:c})})})}catch(c){return Promise.reject(c)}},n=function(s){try{const u=xi.generateKeyPair(),f=xi.sharedKey(u.secretKey,t),c=rh(f,o,i),h=c1(c)(s),b={encrypted_key:Ir(h.ciphertext),header:{alg:i,iv:Ir(h.iv),tag:Ir(h.tag),epk:{kty:"OKP",crv:a,x:Ir(u.publicKey)}}};return e&&(b.header.kid=e),Promise.resolve(b)}catch(u){return Promise.reject(u)}},i="ECDH-ES+XC20PKW",o=256,a="X25519";return{alg:i,enc:"XC20P",encrypt:r,encryptCek:n}}function LE(t,e,r={}){const n=function(c,h={},b){try{Object.assign(h,{alg:void 0});const w=Zi.randomBytes(32);return Promise.resolve(l1(w).encrypt(c,h,b)).then(function(A){return Promise.resolve(i(w)).then(function(_){return mr(ye({},A),{recipient:_,cek:w})})})}catch(w){return Promise.reject(w)}},i=function(c){try{let h=function(){const T=new Uint8Array(w.length+A.length);T.set(w),T.set(A,w.length);const P=rh(T,a,o,u,f),F=c1(P)(c),j={encrypted_key:Ir(F.ciphertext),header:{alg:o,iv:Ir(F.iv),tag:Ir(F.tag),epk:{kty:"OKP",crv:s,x:Ir(b.publicKey)}}};return r.kid&&(j.header.kid=r.kid),r.apu&&(j.header.apu=r.apu),r.apv&&(j.header.apv=r.apv),j};const b=xi.generateKeyPair(),w=xi.sharedKey(b.secretKey,t);let A;const _=function(){if(e instanceof Uint8Array)A=xi.sharedKey(e,t);else return Promise.resolve(e(t)).then(function(T){A=T})}();return Promise.resolve(_&&_.then?_.then(h):h(_))}catch(h){return Promise.reject(h)}},o="ECDH-1PU+XC20PKW",a=256,s="X25519";let u,f;return r.apu!==void 0&&(u=Ft(r.apu)),r.apv!==void 0&&(f=Ft(r.apv)),{alg:o,enc:"XC20P",encrypt:n,encryptCek:i}}function DE(t){if(!(t&&t.epk&&t.iv&&t.tag))throw new Error("bad_jwe: malformed header")}function BE(t){const e=function(o,a,s,u){try{let h=function(){const _=rh(w,n,r),T=n1(u.encrypted_key,u.header.tag);return Promise.resolve(Hu(_).decrypt(T,Ft(u.header.iv))).then(function(P){return P===null?null:Hu(P).decrypt(o,a,s)})};var f,c;if(DE((f=u)==null?void 0:f.header),u=u,((c=u.header.epk)==null?void 0:c.crv)!==i||typeof u.header.epk.x=="undefined")return Promise.resolve(null);const b=Ft(u.header.epk.x);let w;const A=function(){if(t instanceof Uint8Array)w=xi.sharedKey(t,b);else return Promise.resolve(t(b)).then(function(_){w=_})}();return Promise.resolve(A&&A.then?A.then(h):h(A))}catch(h){return Promise.reject(h)}},r="ECDH-ES+XC20PKW",n=256,i="X25519";return{alg:r,enc:"XC20P",decrypt:e}}function UE(t,e){const r=function(a,s,u,f){try{let h=function(){const T=new Uint8Array(w.length+A.length);T.set(w),T.set(A,w.length);let P,F;f.header.apu&&(P=Ft(f.header.apu)),f.header.apv&&(F=Ft(f.header.apv));const j=rh(T,i,n,P,F),U=n1(f.encrypted_key,f.header.tag);return Promise.resolve(Hu(j).decrypt(U,Ft(f.header.iv))).then(function(L){return L===null?null:Hu(L).decrypt(a,s,u)})};var c;if(f=f,DE(f.header),((c=f.header.epk)==null?void 0:c.crv)!==o||typeof f.header.epk.x=="undefined")return Promise.resolve(null);const b=Ft(f.header.epk.x);let w,A;const _=function(){if(t instanceof Uint8Array)w=xi.sharedKey(t,b),A=xi.sharedKey(t,e);else return Promise.resolve(t(b)).then(function(T){return w=T,Promise.resolve(t(e)).then(function(P){A=P})})}();return Promise.resolve(_&&_.then?_.then(h):h(_))}catch(h){return Promise.reject(h)}},n="ECDH-1PU+XC20PKW",i=256,o="X25519";return{alg:n,enc:"XC20P",decrypt:r}}var Lj=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ES256KSigner:s1,EdDSASigner:_E,EllipticSigner:lj,NaclSigner:hj,SimpleSigner:cj,createAnonDecrypter:Cj,createAnonEncrypter:$j,createAuthDecrypter:Rj,createAuthEncrypter:Oj,createJWE:kj,createJWS:ME,createJWT:gj,createX25519ECDH:Tj,decodeJWT:OE,decryptJWE:Aj,resolveX25519Encrypters:Nj,toEthereumAddress:wE,verifyJWS:Ej,verifyJWT:yj,x25519Decrypter:BE,x25519Encrypter:h1,xc20pAuthDecrypterEcdh1PuV3x25519WithXc20PkwV2:UE,xc20pAuthEncrypterEcdh1PuV3x25519WithXc20PkwV2:LE,xc20pDirDecrypter:Hu,xc20pDirEncrypter:l1}),Dj=$t(Lj),Mn={},Bj=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Uj=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fj=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bj(e,t,r);return Uj(e,t),e},jj=te&&te.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})},ih=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.decodeCleartext=Mn.prepareCleartext=Mn.decodeIdentityCID=Mn.encodeIdentityCID=Mn.encodePayload=void 0;const oh=ih(gd),d1=ih(Qi),FE=ih(Zs),zj=Fj(wr),jE=ih(Ro),zE=113,qE=0,qj=24;function Gj(t){return jj(this,void 0,void 0,function*(){const e=new Uint8Array(oh.default.util.serialize(t));return{cid:yield oh.default.util.cid(e),linkedBlock:e}})}Mn.encodePayload=Gj;function Hj(t,e=qj){const r=(e-t.length%e)%e;return zj.concat([t,new Uint8Array(r)])}function Wj(t){let e=0,r;for(let n=0;n<4;n++)r=jE.default.decode(t,e),e+=jE.default.decode.bytes;return new d1.default(t.slice(0,e+r))}function GE(t){const e=oh.default.util.serialize(t),r=FE.default.encode(e,qE);return new d1.default(1,zE,r)}Mn.encodeIdentityCID=GE;function HE(t){if(d1.default.validateCID(t),t.code!==zE)throw new Error("CID codec must be dag-cbor");const{code:e,digest:r}=FE.default.decode(t.multihash);if(e!==qE)throw new Error("CID must use identity multihash");return oh.default.util.deserialize(r)}Mn.decodeIdentityCID=HE;function Kj(t,e){return Hj(GE(t).bytes,e)}Mn.prepareCleartext=Kj;function Vj(t){return HE(Wj(t))}Mn.decodeCleartext=Vj;function WE(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(f){r(f);return}s.done?e(u):Promise.resolve(u).then(n,i)}function KE(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(u){WE(o,n,i,a,s,"next",u)}function s(u){WE(o,n,i,a,s,"throw",u)}a(void 0)})}}function Jj(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function p1(t){return p1=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},p1(t)}function ah(t,e){return ah=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ah(t,e)}function Yj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function sh(t,e,r){return Yj()?sh=Reflect.construct:sh=function(i,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(i,s),f=new u;return a&&ah(f,a.prototype),f},sh.apply(null,arguments)}function Xj(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function v1(t){var e=typeof Map=="function"?new Map:void 0;return v1=function(n){if(n===null||!Xj(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return sh(n,arguments,p1(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ah(i,n)},v1(t)}function Zj(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qj(t,e){return e={exports:{}},t(e,e.exports),e.exports}var uh=Qj(function(t){var e=function(r){var n=Object.prototype,i=n.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function c(v,d,l){return Object.defineProperty(v,d,{value:l,enumerable:!0,configurable:!0,writable:!0}),v[d]}try{c({},"")}catch{c=function(d,l,x){return d[l]=x}}function h(v,d,l,x){var B=d&&d.prototype instanceof F?d:F,H=Object.create(B.prototype),D=new g(x||[]);return H._invoke=$(v,l,D),H}r.wrap=h;function b(v,d,l){try{return{type:"normal",arg:v.call(d,l)}}catch(x){return{type:"throw",arg:x}}}var w="suspendedStart",A="suspendedYield",_="executing",T="completed",P={};function F(){}function j(){}function U(){}var L={};L[s]=function(){return this};var G=Object.getPrototypeOf,p=G&&G(G(M([])));p&&p!==n&&i.call(p,s)&&(L=p);var I=U.prototype=F.prototype=Object.create(L);j.prototype=I.constructor=U,U.constructor=j,j.displayName=c(U,f,"GeneratorFunction");function C(v){["next","throw","return"].forEach(function(d){c(v,d,function(l){return this._invoke(d,l)})})}r.isGeneratorFunction=function(v){var d=typeof v=="function"&&v.constructor;return d?d===j||(d.displayName||d.name)==="GeneratorFunction":!1},r.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,U):(v.__proto__=U,c(v,f,"GeneratorFunction")),v.prototype=Object.create(I),v},r.awrap=function(v){return{__await:v}};function V(v,d){function l(H,D,k,Z){var z=b(v[H],v,D);if(z.type==="throw")Z(z.arg);else{var K=z.arg,W=K.value;return W&&typeof W=="object"&&i.call(W,"__await")?d.resolve(W.__await).then(function(S){l("next",S,k,Z)},function(S){l("throw",S,k,Z)}):d.resolve(W).then(function(S){K.value=S,k(K)},function(S){return l("throw",S,k,Z)})}}var x;function B(H,D){function k(){return new d(function(Z,z){l(H,D,Z,z)})}return x=x?x.then(k,k):k()}this._invoke=B}C(V.prototype),V.prototype[u]=function(){return this},r.AsyncIterator=V,r.async=function(v,d,l,x,B){B===void 0&&(B=Promise);var H=new V(h(v,d,l,x),B);return r.isGeneratorFunction(d)?H:H.next().then(function(D){return D.done?D.value:H.next()})};function $(v,d,l){var x=w;return function(H,D){if(x===_)throw new Error("Generator is already running");if(x===T){if(H==="throw")throw D;return R()}for(l.method=H,l.arg=D;;){var k=l.delegate;if(k){var Z=m(k,l);if(Z){if(Z===P)continue;return Z}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(x===w)throw x=T,l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);x=_;var z=b(v,d,l);if(z.type==="normal"){if(x=l.done?T:A,z.arg===P)continue;return{value:z.arg,done:l.done}}else z.type==="throw"&&(x=T,l.method="throw",l.arg=z.arg)}}}function m(v,d){var l=v.iterator[d.method];if(l===o){if(d.delegate=null,d.method==="throw"){if(v.iterator.return&&(d.method="return",d.arg=o,m(v,d),d.method==="throw"))return P;d.method="throw",d.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var x=b(l,v.iterator,d.arg);if(x.type==="throw")return d.method="throw",d.arg=x.arg,d.delegate=null,P;var B=x.arg;if(!B)return d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,P;if(B.done)d[v.resultName]=B.value,d.next=v.nextLoc,d.method!=="return"&&(d.method="next",d.arg=o);else return B;return d.delegate=null,P}C(I),c(I,f,"Generator"),I[s]=function(){return this},I.toString=function(){return"[object Generator]"};function E(v){var d={tryLoc:v[0]};1 in v&&(d.catchLoc=v[1]),2 in v&&(d.finallyLoc=v[2],d.afterLoc=v[3]),this.tryEntries.push(d)}function y(v){var d=v.completion||{};d.type="normal",delete d.arg,v.completion=d}function g(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(E,this),this.reset(!0)}r.keys=function(v){var d=[];for(var l in v)d.push(l);return d.reverse(),function x(){for(;d.length;){var B=d.pop();if(B in v)return x.value=B,x.done=!1,x}return x.done=!0,x}};function M(v){if(v){var d=v[s];if(d)return d.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var l=-1,x=function B(){for(;++l<v.length;)if(i.call(v,l))return B.value=v[l],B.done=!1,B;return B.value=o,B.done=!0,B};return x.next=x}}return{next:R}}r.values=M;function R(){return{value:o,done:!0}}return g.prototype={constructor:g,reset:function(v){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(y),!v)for(var d in this)d.charAt(0)==="t"&&i.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=o)},stop:function(){this.done=!0;var v=this.tryEntries[0],d=v.completion;if(d.type==="throw")throw d.arg;return this.rval},dispatchException:function(v){if(this.done)throw v;var d=this;function l(Z,z){return H.type="throw",H.arg=v,d.next=Z,z&&(d.method="next",d.arg=o),!!z}for(var x=this.tryEntries.length-1;x>=0;--x){var B=this.tryEntries[x],H=B.completion;if(B.tryLoc==="root")return l("end");if(B.tryLoc<=this.prev){var D=i.call(B,"catchLoc"),k=i.call(B,"finallyLoc");if(D&&k){if(this.prev<B.catchLoc)return l(B.catchLoc,!0);if(this.prev<B.finallyLoc)return l(B.finallyLoc)}else if(D){if(this.prev<B.catchLoc)return l(B.catchLoc,!0)}else if(k){if(this.prev<B.finallyLoc)return l(B.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(v,d){for(var l=this.tryEntries.length-1;l>=0;--l){var x=this.tryEntries[l];if(x.tryLoc<=this.prev&&i.call(x,"finallyLoc")&&this.prev<x.finallyLoc){var B=x;break}}B&&(v==="break"||v==="continue")&&B.tryLoc<=d&&d<=B.finallyLoc&&(B=null);var H=B?B.completion:{};return H.type=v,H.arg=d,B?(this.method="next",this.next=B.finallyLoc,P):this.complete(H)},complete:function(v,d){if(v.type==="throw")throw v.arg;return v.type==="break"||v.type==="continue"?this.next=v.arg:v.type==="return"?(this.rval=this.arg=v.arg,this.method="return",this.next="end"):v.type==="normal"&&d&&(this.next=d),P},finish:function(v){for(var d=this.tryEntries.length-1;d>=0;--d){var l=this.tryEntries[d];if(l.finallyLoc===v)return this.complete(l.completion,l.afterLoc),y(l),P}},catch:function(v){for(var d=this.tryEntries.length-1;d>=0;--d){var l=this.tryEntries[d];if(l.tryLoc===v){var x=l.completion;if(x.type==="throw"){var B=x.arg;y(l)}return B}}throw new Error("illegal catch attempt")},delegateYield:function(v,d,l){return this.delegate={iterator:M(v),resultName:d,nextLoc:l},this.method==="next"&&(this.arg=o),P}},r}(t.exports);try{regeneratorRuntime=e}catch{Function("r","regeneratorRuntime = r")(e)}}),la,Or;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(Or||(Or={}));var m1=(la={},la[Or.PARSE_ERROR]="Parse error",la[Or.INVALID_REQUEST]="Invalid request",la[Or.METHOD_NOT_FOUND]="Method not found",la[Or.INVALID_PARAMS]="Invalid params",la[Or.INTERNAL_ERROR]="Internal error",la);function VE(t){return-32e3>=t&&t>=-32099}function fh(t){var e;return(e=m1[t.toString()])!=null?e:VE(t)?"Server error":"Application error"}var ch=function(t){Jj(e,t);function e(n,i,o){var a;return a=t.call(this)||this,Object.setPrototypeOf(Zj(a),e.prototype),a.code=n,a.data=o,a.message=i!=null?i:fh(n),a}e.fromObject=function(i){return new e(i.code,i.message,i.data)};var r=e.prototype;return r.toObject=function(){return{code:this.code,data:this.data,message:this.message}},e}(v1(Error));function Wu(t){var e=m1[t];return function(n){return new ch(t,e,n)}}var JE=Wu(Or.PARSE_ERROR),ez=Wu(Or.INVALID_REQUEST),tz=Wu(Or.METHOD_NOT_FOUND),rz=Wu(Or.INVALID_PARAMS),nz=Wu(Or.INTERNAL_ERROR),iz=function(){function t(r){this.connection=r}var e=t.prototype;return e.createID=function(){return hy()},e.request=function(){var r=KE(uh.mark(function i(o,a){var s;return uh.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return a===void 0&&(a=void 0),f.next=3,this.connection.send({jsonrpc:"2.0",id:this.createID(),method:o,params:a});case 3:if(s=f.sent,s!=null){f.next=6;break}throw new Error("Missing response");case 6:if(s.error==null){f.next=8;break}throw ch.fromObject(s.error);case 8:return f.abrupt("return",s.result);case 9:case"end":return f.stop()}},i,this)}));function n(i,o){return r.apply(this,arguments)}return n}(),t}();function oz(t){try{return JSON.parse(t)}catch{throw JE()}}function b1(t,e){return{jsonrpc:"2.0",id:t,error:{code:e,message:fh(e)}}}function az(t,e,r){console.warn("Unhandled handler error",e,r)}function sz(t,e){console.warn("Unhandled invalid message",e)}function uz(t,e){console.warn("Unhandled notification",e)}function fz(t,e){var r,n,i;e===void 0&&(e={});var o=(r=e.onHandlerError)!=null?r:az,a=(n=e.onInvalidMessage)!=null?n:sz,s=(i=e.onNotification)!=null?i:uz;return function(){var u=KE(uh.mark(function c(h,b){var w,A,_,T,P,F,j;return uh.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(w=b.id,!(b.jsonrpc!=="2.0"||b.method==null)){L.next=6;break}if(w!=null){L.next=5;break}return a(h,b),L.abrupt("return",null);case 5:return L.abrupt("return",b1(w,Or.INVALID_REQUEST));case 6:if(w!=null){L.next=9;break}return s(h,b),L.abrupt("return",null);case 9:if(A=t[b.method],A!=null){L.next=12;break}return L.abrupt("return",b1(w,Or.METHOD_NOT_FOUND));case 12:if(L.prev=12,_=A(h,b.params),_!=null){L.next=18;break}L.t0=_,L.next=26;break;case 18:if(typeof _.then!="function"){L.next=24;break}return L.next=21,_;case 21:L.t1=L.sent,L.next=25;break;case 24:L.t1=_;case 25:L.t0=L.t1;case 26:return T=L.t0,L.abrupt("return",{jsonrpc:"2.0",id:w,result:T});case 30:return L.prev=30,L.t2=L.catch(12),L.t2 instanceof ch?P=L.t2.toObject():(o(h,b,L.t2),j=(F=L.t2.code)!=null?F:-32e3,P={code:j,message:L.t2.message||fh(j)}),L.abrupt("return",{jsonrpc:"2.0",id:w,error:P});case 34:case"end":return L.stop()}},c,null,[[12,30]])}));function f(c,h){return u.apply(this,arguments)}return f}()}var cz=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get ERROR_CODE(){return Or},ERROR_MESSAGE:m1,RPCClient:iz,RPCError:ch,createErrorResponse:b1,createHandler:fz,createInternalError:nz,createInvalidParams:rz,createInvalidRequest:ez,createMethodNotFound:tz,createParseError:JE,getErrorMessage:fh,isServerError:VE,parseJSON:oz}),lz=$t(cz),Qt={},hz=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dz=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pz=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hz(e,t,r);return dz(e,t),e};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.extractControllers=Qt.didWithTime=Qt.fromDagJWS=Qt.randomString=Qt.base64urlToJSON=Qt.decodeBase64=Qt.encodeBase64Url=Qt.encodeBase64=void 0;const gs=pz(wr),vz=Zi,YE="base64pad",XE="base64url";function mz(t){return gs.toString(t,YE)}Qt.encodeBase64=mz;function bz(t){return gs.toString(t,XE)}Qt.encodeBase64Url=bz;function yz(t){return gs.fromString(t,YE)}Qt.decodeBase64=yz;function gz(t){return JSON.parse(gs.toString(gs.fromString(t,XE)))}Qt.base64urlToJSON=gz;function wz(){return gs.toString(vz.randomBytes(16),"base64")}Qt.randomString=wz;function _z(t){if(t.signatures.length>1)throw new Error("Cant convert to compact jws");return`${t.signatures[0].protected}.${t.payload}.${t.signatures[0].signature}`}Qt.fromDagJWS=_z;function xz(t,e){if(e){const r=new Date(e).toISOString().split(".")[0]+"Z";return`${t}?versionTime=${r}`}else return t}Qt.didWithTime=xz;function Ez(t){return t?Array.isArray(t)?t:[t]:[]}Qt.extractControllers=Ez;var ji=te&&te.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{f(n.next(c))}catch(h){a(h)}}function u(c){try{f(n.throw(c))}catch(h){a(h)}}function f(c){c.done?o(c.value):i(c.value).then(s,u)}f((n=n.apply(t,e||[])).next())})};Object.defineProperty(jl,"__esModule",{value:!0});jl.DID=void 0;const Sz=nF,y1=Dj,g1=Mn,ZE=lz,Ei=Qt;function Az(t){return"registry"in t&&"cache"in t}class Iz{constructor({provider:e,resolver:r={},resolverOptions:n}={}){e!=null&&(this._client=new ZE.RPCClient(e)),this.setResolver(r,n)}get authenticated(){return this._id!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}setProvider(e){if(this._client==null)this._client=new ZE.RPCClient(e);else if(this._client.connection!==e)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(e,r){this._resolver=Az(e)?e:new Sz.Resolver(e,r)}authenticate({provider:e,paths:r=[],aud:n}={}){return ji(this,void 0,void 0,function*(){if(e!=null&&this.setProvider(e),this._client==null)throw new Error("No provider available");const i=Ei.randomString(),o=yield this._client.request("did_authenticate",{nonce:i,aud:n,paths:r}),{kid:a}=yield this.verifyJWS(o),s=Ei.base64urlToJSON(o.payload);if(!a.includes(s.did))throw new Error("Invalid authencation response, kid mismatch");if(s.nonce!==i)throw new Error("Invalid authencation response, wrong nonce");if(s.aud!==n)throw new Error("Invalid authencation response, wrong aud");if(s.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=s.did,this._id})}createJWS(e,r={}){return ji(this,void 0,void 0,function*(){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{jws:n}=yield this._client.request("did_createJWS",Object.assign(Object.assign({did:this._id},r),{payload:e}));return n})}createDagJWS(e,r={}){return ji(this,void 0,void 0,function*(){const{cid:n,linkedBlock:i}=yield g1.encodePayload(e),o=Ei.encodeBase64Url(n.bytes);Object.assign(r,{linkedBlock:Ei.encodeBase64(i)});const a=yield this.createJWS(o,r);return a.link=n,{jws:a,linkedBlock:i}})}verifyJWS(e,r={}){var n,i,o,a,s;return ji(this,void 0,void 0,function*(){typeof e!="string"&&(e=Ei.fromDagJWS(e));const u=Ei.base64urlToJSON(e.split(".")[0]).kid;if(!u)throw new Error('No "kid" found in jws');const f=yield this.resolve(u);if(!r.disableTimecheck){const A=(n=f.didDocumentMetadata)===null||n===void 0?void 0:n.nextUpdate;if(A&&!(r.atTime&&r.atTime<new Date(A).valueOf()))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${u}`);const _=(i=f.didDocumentMetadata)===null||i===void 0?void 0:i.updated;if(_&&r.atTime&&r.atTime<new Date(_).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${u}`)}const h=(o=f.didDocument)===null||o===void 0?void 0:o.id;if(r.issuer&&r.issuer!==h){const A=Ei.didWithTime(r.issuer,r.atTime),T=(a=(yield this.resolve(A)).didDocument)===null||a===void 0?void 0:a.controller,P=Ei.extractControllers(T);if(!(h?P.includes(h):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${u}`)}const b=((s=f.didDocument)===null||s===void 0?void 0:s.verificationMethod)||[];y1.verifyJWS(e,b);let w;try{w=Ei.base64urlToJSON(e.split(".")[1])}catch{}return{kid:u,payload:w,didResolutionResult:f}})}createJWE(e,r,n={}){return ji(this,void 0,void 0,function*(){const i=yield y1.resolveX25519Encrypters(r,this._resolver);return y1.createJWE(e,i,n.protectedHeader,n.aad)})}createDagJWE(e,r,n={}){return ji(this,void 0,void 0,function*(){return this.createJWE(g1.prepareCleartext(e),r,n)})}decryptJWE(e,r={}){return ji(this,void 0,void 0,function*(){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{cleartext:n}=yield this._client.request("did_decryptJWE",Object.assign(Object.assign({did:this._id},r),{jwe:e}));return Ei.decodeBase64(n)})}decryptDagJWE(e){return ji(this,void 0,void 0,function*(){const r=yield this.decryptJWE(e);return g1.decodeCleartext(r)})}resolve(e){return ji(this,void 0,void 0,function*(){const r=yield this._resolver.resolve(e);if(r.didResolutionMetadata.error){const{error:n,message:i}=r.didResolutionMetadata,o=i?`, ${i}`:"";throw new Error(`Failed to resolve ${e}: ${n}${o}`)}return r})}}jl.DID=Iz;(function(t){var e=te&&te.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),r=te&&te.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(W5,t),r(jl,t)})(H5);var QE=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},w1=(t,e,r)=>(QE(t,e,"read from private field"),r?r.call(t):e.get(t)),Pz=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Mz=(t,e,r,n)=>(QE(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ws;class eS extends rF{constructor(e){super(e);var r;Pz(this,ws,void 0),Mz(this,ws,new rO((r=e.connectNetwork)!=null?r:e.ceramic))}get threeId(){return w1(this,ws)}async authenticate(e,r=!1){const n=await this.connect(e);return await n.authenticate(),r&&(this.ceramic.did=n),n}async connect(e){return await w1(this,ws).connect(e),new H5.DID({provider:w1(this,ws).getDidProvider(),resolver:this.resolver})}}ws=new WeakMap,typeof require!="undefined"&&require;var tS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ku=(t,e,r)=>(tS(t,e,"read from private field"),r?r.call(t):e.get(t)),rS=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},nS=(t,e,r,n)=>(tS(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),_s,Vu;const iS=class{constructor(t){if(rS(this,_s,void 0),rS(this,Vu,void 0),!t.did.authenticated)throw new Error("Input DID must be authenticated, use SelfID.authenticate() instead of new SelfID()");nS(this,_s,t.client),nS(this,Vu,t.did)}static async authenticate(t){const o=t,{authProvider:e}=o,r=R1(o,["authProvider"]),n=new eS(r),i=await n.authenticate(e,!0);return new iS({client:n,did:i})}get client(){return Ku(this,_s)}get id(){return Ku(this,Vu).id}async get(t){return await Ku(this,_s).dataStore.get(t,Ku(this,Vu).id)}async set(t,e){return await Ku(this,_s).dataStore.set(t,e)}};let kz=iS;_s=new WeakMap,Vu=new WeakMap;var lq=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SelfID:kz,WebClient:eS,EthereumAuthProvider:Eb.EthereumAuthProvider});export{Jz as A,CS as B,uq as C,qS as D,$z as E,pa as F,Nz as G,Rz as H,Lz as I,Dz as J,Cz as K,Zz as L,lq as M,Oz as N,jz as O,WS as P,Gz as Q,Vz as R,sq as S,OE as T,Kz as U,xb as W,KS as a,zz as b,qz as c,GS as d,HS as e,Bz as f,JS as g,Wz as h,aq as i,iq as j,Uz as k,Fz as l,oq as m,Hz as n,e4 as o,rq as p,nq as q,Qz as r,DS as s,vh as t,tq as u,t4 as v,eq as w,QS as x,Xz as y,Yz as z};
