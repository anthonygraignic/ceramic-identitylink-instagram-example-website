var Xr=Object.defineProperty,Yr=Object.defineProperties;var Zr=Object.getOwnPropertyDescriptors;var Er=Object.getOwnPropertySymbols;var Fr=Object.prototype.hasOwnProperty,Dr=Object.prototype.propertyIsEnumerable;var Lr=(t,e,b)=>e in t?Xr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:b}):t[e]=b,Tt=(t,e)=>{for(var b in e||(e={}))Fr.call(e,b)&&Lr(t,b,e[b]);if(Er)for(var b of Er(e))Dr.call(e,b)&&Lr(t,b,e[b]);return t},gr=(t,e)=>Yr(t,Zr(e));var Ur=(t,e)=>{var b={};for(var w in t)Fr.call(t,w)&&e.indexOf(w)<0&&(b[w]=t[w]);if(t!=null&&Er)for(var w of Er(t))e.indexOf(w)<0&&Dr.call(t,w)&&(b[w]=t[w]);return b};function noop$3(){}function assign$1(t,e){for(const b in e)t[b]=e[b];return t}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return typeof t=="function"}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let src_url_equal_anchor;function src_url_equal(t,e){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=e,t===src_url_equal_anchor.href}function is_empty(t){return Object.keys(t).length===0}function subscribe(t,...e){if(t==null)return noop$3;const b=t.subscribe(...e);return b.unsubscribe?()=>b.unsubscribe():b}function get_store_value(t){let e;return subscribe(t,b=>e=b)(),e}function component_subscribe(t,e,b){t.$$.on_destroy.push(subscribe(e,b))}function create_slot(t,e,b,w){if(t){const $=get_slot_context(t,e,b,w);return t[0]($)}}function get_slot_context(t,e,b,w){return t[1]&&w?assign$1(b.ctx.slice(),t[1](w(e))):b.ctx}function get_slot_changes(t,e,b,w){if(t[2]&&w){const $=t[2](w(b));if(e.dirty===void 0)return $;if(typeof $=="object"){const T=[],N=Math.max(e.dirty.length,$.length);for(let C=0;C<N;C+=1)T[C]=e.dirty[C]|$[C];return T}return e.dirty|$}return e.dirty}function update_slot_base(t,e,b,w,$,T){if($){const N=get_slot_context(e,b,w,T);t.p(N,$)}}function get_all_dirty_from_scope(t){if(t.ctx.length>32){const e=[],b=t.ctx.length/32;for(let w=0;w<b;w++)e[w]=-1;return e}return-1}let is_hydrating=!1;function start_hydrating(){is_hydrating=!0}function end_hydrating(){is_hydrating=!1}function upper_bound(t,e,b,w){for(;t<e;){const $=t+(e-t>>1);b($)<=w?t=$+1:e=$}return t}function init_hydrate(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const F=[];for(let G=0;G<e.length;G++){const J=e[G];J.claim_order!==void 0&&F.push(J)}e=F}const b=new Int32Array(e.length+1),w=new Int32Array(e.length);b[0]=-1;let $=0;for(let F=0;F<e.length;F++){const G=e[F].claim_order,J=($>0&&e[b[$]].claim_order<=G?$+1:upper_bound(1,$,re=>e[b[re]].claim_order,G))-1;w[F]=b[J]+1;const Z=J+1;b[Z]=F,$=Math.max(Z,$)}const T=[],N=[];let C=e.length-1;for(let F=b[$]+1;F!=0;F=w[F-1]){for(T.push(e[F-1]);C>=F;C--)N.push(e[C]);C--}for(;C>=0;C--)N.push(e[C]);T.reverse(),N.sort((F,G)=>F.claim_order-G.claim_order);for(let F=0,G=0;F<N.length;F++){for(;G<T.length&&N[F].claim_order>=T[G].claim_order;)G++;const J=G<T.length?T[G]:null;t.insertBefore(N[F],J)}}function append_hydration(t,e){if(is_hydrating){for(init_hydrate(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function insert_hydration(t,e,b){is_hydrating&&!b?append_hydration(t,e):(e.parentNode!==t||e.nextSibling!=b)&&t.insertBefore(e,b||null)}function detach(t){t.parentNode.removeChild(t)}function element(t){return document.createElement(t)}function svg_element(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty$5(){return text("")}function listen(t,e,b,w){return t.addEventListener(e,b,w),()=>t.removeEventListener(e,b,w)}function attr(t,e,b){b==null?t.removeAttribute(e):t.getAttribute(e)!==b&&t.setAttribute(e,b)}function children(t){return Array.from(t.childNodes)}function init_claim_info(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function claim_node(t,e,b,w,$=!1){init_claim_info(t);const T=(()=>{for(let N=t.claim_info.last_index;N<t.length;N++){const C=t[N];if(e(C)){const F=b(C);return F===void 0?t.splice(N,1):t[N]=F,$||(t.claim_info.last_index=N),C}}for(let N=t.claim_info.last_index-1;N>=0;N--){const C=t[N];if(e(C)){const F=b(C);return F===void 0?t.splice(N,1):t[N]=F,$?F===void 0&&t.claim_info.last_index--:t.claim_info.last_index=N,C}}return w()})();return T.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,T}function claim_element_base(t,e,b,w){return claim_node(t,$=>$.nodeName===e,$=>{const T=[];for(let N=0;N<$.attributes.length;N++){const C=$.attributes[N];b[C.name]||T.push(C.name)}T.forEach(N=>$.removeAttribute(N))},()=>w(e))}function claim_element(t,e,b){return claim_element_base(t,e,b,element)}function claim_svg_element(t,e,b){return claim_element_base(t,e,b,svg_element)}function claim_text(t,e){return claim_node(t,b=>b.nodeType===3,b=>{const w=""+e;if(b.data.startsWith(w)){if(b.data.length!==w.length)return b.splitText(w.length)}else b.data=w},()=>text(e),!0)}function claim_space(t){return claim_text(t," ")}function set_data(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function set_input_value(t,e){t.value=e==null?"":e}function query_selector_all(t,e=document.body){return Array.from(e.querySelectorAll(t))}let current_component;function set_current_component(t){current_component=t}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(t){get_current_component().$$.on_mount.push(t)}function afterUpdate(t){get_current_component().$$.after_update.push(t)}function setContext(t,e){get_current_component().$$.context.set(t,e)}function getContext(t){return get_current_component().$$.context.get(t)}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(t){render_callbacks.push(t)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let t=0;t<dirty_components.length;t+=1){const e=dirty_components[t];set_current_component(e),update(e.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const e=render_callbacks[t];seen_callbacks.has(e)||(seen_callbacks.add(e),e())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update(t){if(t.fragment!==null){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,b,w){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),w&&(b&&t.d(1),w())}),t.o(e)}}function get_spread_update(t,e){const b={},w={},$={$$scope:1};let T=t.length;for(;T--;){const N=t[T],C=e[T];if(C){for(const F in N)F in C||(w[F]=1);for(const F in C)$[F]||(b[F]=C[F],$[F]=1);t[T]=C}else for(const F in N)$[F]=1}for(const N in w)N in b||(b[N]=void 0);return b}function get_spread_object(t){return typeof t=="object"&&t!==null?t:{}}function create_component(t){t&&t.c()}function claim_component(t,e){t&&t.l(e)}function mount_component(t,e,b,w){const{fragment:$,on_mount:T,on_destroy:N,after_update:C}=t.$$;$&&$.m(e,b),w||add_render_callback(()=>{const F=T.map(run).filter(is_function);N?N.push(...F):run_all(F),t.$$.on_mount=[]}),C.forEach(add_render_callback)}function destroy_component(t,e){const b=t.$$;b.fragment!==null&&(run_all(b.on_destroy),b.fragment&&b.fragment.d(e),b.on_destroy=b.fragment=null,b.ctx=[])}function make_dirty(t,e){t.$$.dirty[0]===-1&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function init(t,e,b,w,$,T,N,C=[-1]){const F=current_component;set_current_component(t);const G=t.$$={fragment:null,ctx:null,props:T,update:noop$3,not_equal:$,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(F?F.$$.context:[])),callbacks:blank_object(),dirty:C,skip_bound:!1,root:e.target||F.$$.root};N&&N(G.root);let J=!1;if(G.ctx=b?b(t,e.props||{},(Z,re,...ie)=>{const ue=ie.length?ie[0]:re;return G.ctx&&$(G.ctx[Z],G.ctx[Z]=ue)&&(!G.skip_bound&&G.bound[Z]&&G.bound[Z](ue),J&&make_dirty(t,Z)),re}):[],G.update(),J=!0,run_all(G.before_update),G.fragment=w?w(G.ctx):!1,e.target){if(e.hydrate){start_hydrating();const Z=children(e.target);G.fragment&&G.fragment.l(Z),Z.forEach(detach)}else G.fragment&&G.fragment.c();e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor,e.customElement),end_hydrating(),flush()}set_current_component(F)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$3}$on(e,b){const w=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return w.push(b),()=>{const $=w.indexOf(b);$!==-1&&w.splice($,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const subscriber_queue=[];function writable(t,e=noop$3){let b;const w=new Set;function $(C){if(safe_not_equal(t,C)&&(t=C,b)){const F=!subscriber_queue.length;for(const G of w)G[1](),subscriber_queue.push(G,t);if(F){for(let G=0;G<subscriber_queue.length;G+=2)subscriber_queue[G][0](subscriber_queue[G+1]);subscriber_queue.length=0}}}function T(C){$(C(t))}function N(C,F=noop$3){const G=[C,F];return w.add(G),w.size===1&&(b=e($)||noop$3),C(t),()=>{w.delete(G),w.size===0&&(b(),b=null)}}return{set:$,update:T,subscribe:N}}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(b){var w=Object.getOwnPropertyDescriptor(t,b);Object.defineProperty(e,b,w.get?w:{enumerable:!0,get:function(){return t[b]}})}),e}function commonjsRequire$1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bn$2={exports:{}};(function(t){(function(e,b){function w(pe,te){if(!pe)throw new Error(te||"Assertion failed")}function $(pe,te){pe.super_=te;var Y=function(){};Y.prototype=te.prototype,pe.prototype=new Y,pe.prototype.constructor=pe}function T(pe,te,Y){if(T.isBN(pe))return pe;this.negative=0,this.words=null,this.length=0,this.red=null,pe!==null&&((te==="le"||te==="be")&&(Y=te,te=10),this._init(pe||0,te||10,Y||"be"))}typeof e=="object"?e.exports=T:b.BN=T,T.BN=T,T.wordSize=26;var N;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?N=window.Buffer:N=require("buffer").Buffer}catch{}T.isBN=function(te){return te instanceof T?!0:te!==null&&typeof te=="object"&&te.constructor.wordSize===T.wordSize&&Array.isArray(te.words)},T.max=function(te,Y){return te.cmp(Y)>0?te:Y},T.min=function(te,Y){return te.cmp(Y)<0?te:Y},T.prototype._init=function(te,Y,R){if(typeof te=="number")return this._initNumber(te,Y,R);if(typeof te=="object")return this._initArray(te,Y,R);Y==="hex"&&(Y=16),w(Y===(Y|0)&&Y>=2&&Y<=36),te=te.toString().replace(/\s+/g,"");var B=0;te[0]==="-"&&(B++,this.negative=1),B<te.length&&(Y===16?this._parseHex(te,B,R):(this._parseBase(te,Y,B),R==="le"&&this._initArray(this.toArray(),Y,R)))},T.prototype._initNumber=function(te,Y,R){te<0&&(this.negative=1,te=-te),te<67108864?(this.words=[te&67108863],this.length=1):te<4503599627370496?(this.words=[te&67108863,te/67108864&67108863],this.length=2):(w(te<9007199254740992),this.words=[te&67108863,te/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),Y,R)},T.prototype._initArray=function(te,Y,R){if(w(typeof te.length=="number"),te.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(te.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var V,Q,H=0;if(R==="be")for(B=te.length-1,V=0;B>=0;B-=3)Q=te[B]|te[B-1]<<8|te[B-2]<<16,this.words[V]|=Q<<H&67108863,this.words[V+1]=Q>>>26-H&67108863,H+=24,H>=26&&(H-=26,V++);else if(R==="le")for(B=0,V=0;B<te.length;B+=3)Q=te[B]|te[B+1]<<8|te[B+2]<<16,this.words[V]|=Q<<H&67108863,this.words[V+1]=Q>>>26-H&67108863,H+=24,H>=26&&(H-=26,V++);return this.strip()};function C(pe,te){var Y=pe.charCodeAt(te);return Y>=65&&Y<=70?Y-55:Y>=97&&Y<=102?Y-87:Y-48&15}function F(pe,te,Y){var R=C(pe,Y);return Y-1>=te&&(R|=C(pe,Y-1)<<4),R}T.prototype._parseHex=function(te,Y,R){this.length=Math.ceil((te.length-Y)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var V=0,Q=0,H;if(R==="be")for(B=te.length-1;B>=Y;B-=2)H=F(te,Y,B)<<V,this.words[Q]|=H&67108863,V>=18?(V-=18,Q+=1,this.words[Q]|=H>>>26):V+=8;else{var j=te.length-Y;for(B=j%2==0?Y+1:Y;B<te.length;B+=2)H=F(te,Y,B)<<V,this.words[Q]|=H&67108863,V>=18?(V-=18,Q+=1,this.words[Q]|=H>>>26):V+=8}this.strip()};function G(pe,te,Y,R){for(var B=0,V=Math.min(pe.length,Y),Q=te;Q<V;Q++){var H=pe.charCodeAt(Q)-48;B*=R,H>=49?B+=H-49+10:H>=17?B+=H-17+10:B+=H}return B}T.prototype._parseBase=function(te,Y,R){this.words=[0],this.length=1;for(var B=0,V=1;V<=67108863;V*=Y)B++;B--,V=V/Y|0;for(var Q=te.length-R,H=Q%B,j=Math.min(Q,Q-H)+R,L=0,q=R;q<j;q+=B)L=G(te,q,q+B,Y),this.imuln(V),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L);if(H!==0){var U=1;for(L=G(te,q,te.length,Y),q=0;q<H;q++)U*=Y;this.imuln(U),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L)}this.strip()},T.prototype.copy=function(te){te.words=new Array(this.length);for(var Y=0;Y<this.length;Y++)te.words[Y]=this.words[Y];te.length=this.length,te.negative=this.negative,te.red=this.red},T.prototype.clone=function(){var te=new T(null);return this.copy(te),te},T.prototype._expand=function(te){for(;this.length<te;)this.words[this.length++]=0;return this},T.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},T.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var J=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Z=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],re=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(te,Y){te=te||10,Y=Y|0||1;var R;if(te===16||te==="hex"){R="";for(var B=0,V=0,Q=0;Q<this.length;Q++){var H=this.words[Q],j=((H<<B|V)&16777215).toString(16);V=H>>>24-B&16777215,V!==0||Q!==this.length-1?R=J[6-j.length]+j+R:R=j+R,B+=2,B>=26&&(B-=26,Q--)}for(V!==0&&(R=V.toString(16)+R);R.length%Y!=0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(te===(te|0)&&te>=2&&te<=36){var L=Z[te],q=re[te];R="";var U=this.clone();for(U.negative=0;!U.isZero();){var oe=U.modn(q).toString(te);U=U.idivn(q),U.isZero()?R=oe+R:R=J[L-oe.length]+oe+R}for(this.isZero()&&(R="0"+R);R.length%Y!=0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}w(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var te=this.words[0];return this.length===2?te+=this.words[1]*67108864:this.length===3&&this.words[2]===1?te+=4503599627370496+this.words[1]*67108864:this.length>2&&w(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-te:te},T.prototype.toJSON=function(){return this.toString(16)},T.prototype.toBuffer=function(te,Y){return w(typeof N!="undefined"),this.toArrayLike(N,te,Y)},T.prototype.toArray=function(te,Y){return this.toArrayLike(Array,te,Y)},T.prototype.toArrayLike=function(te,Y,R){var B=this.byteLength(),V=R||Math.max(1,B);w(B<=V,"byte array longer than desired length"),w(V>0,"Requested array length <= 0"),this.strip();var Q=Y==="le",H=new te(V),j,L,q=this.clone();if(Q){for(L=0;!q.isZero();L++)j=q.andln(255),q.iushrn(8),H[L]=j;for(;L<V;L++)H[L]=0}else{for(L=0;L<V-B;L++)H[L]=0;for(L=0;!q.isZero();L++)j=q.andln(255),q.iushrn(8),H[V-L-1]=j}return H},Math.clz32?T.prototype._countBits=function(te){return 32-Math.clz32(te)}:T.prototype._countBits=function(te){var Y=te,R=0;return Y>=4096&&(R+=13,Y>>>=13),Y>=64&&(R+=7,Y>>>=7),Y>=8&&(R+=4,Y>>>=4),Y>=2&&(R+=2,Y>>>=2),R+Y},T.prototype._zeroBits=function(te){if(te===0)return 26;var Y=te,R=0;return(Y&8191)==0&&(R+=13,Y>>>=13),(Y&127)==0&&(R+=7,Y>>>=7),(Y&15)==0&&(R+=4,Y>>>=4),(Y&3)==0&&(R+=2,Y>>>=2),(Y&1)==0&&R++,R},T.prototype.bitLength=function(){var te=this.words[this.length-1],Y=this._countBits(te);return(this.length-1)*26+Y};function ie(pe){for(var te=new Array(pe.bitLength()),Y=0;Y<te.length;Y++){var R=Y/26|0,B=Y%26;te[Y]=(pe.words[R]&1<<B)>>>B}return te}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var te=0,Y=0;Y<this.length;Y++){var R=this._zeroBits(this.words[Y]);if(te+=R,R!==26)break}return te},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(te){return this.negative!==0?this.abs().inotn(te).iaddn(1):this.clone()},T.prototype.fromTwos=function(te){return this.testn(te-1)?this.notn(te).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(te){for(;this.length<te.length;)this.words[this.length++]=0;for(var Y=0;Y<te.length;Y++)this.words[Y]=this.words[Y]|te.words[Y];return this.strip()},T.prototype.ior=function(te){return w((this.negative|te.negative)==0),this.iuor(te)},T.prototype.or=function(te){return this.length>te.length?this.clone().ior(te):te.clone().ior(this)},T.prototype.uor=function(te){return this.length>te.length?this.clone().iuor(te):te.clone().iuor(this)},T.prototype.iuand=function(te){var Y;this.length>te.length?Y=te:Y=this;for(var R=0;R<Y.length;R++)this.words[R]=this.words[R]&te.words[R];return this.length=Y.length,this.strip()},T.prototype.iand=function(te){return w((this.negative|te.negative)==0),this.iuand(te)},T.prototype.and=function(te){return this.length>te.length?this.clone().iand(te):te.clone().iand(this)},T.prototype.uand=function(te){return this.length>te.length?this.clone().iuand(te):te.clone().iuand(this)},T.prototype.iuxor=function(te){var Y,R;this.length>te.length?(Y=this,R=te):(Y=te,R=this);for(var B=0;B<R.length;B++)this.words[B]=Y.words[B]^R.words[B];if(this!==Y)for(;B<Y.length;B++)this.words[B]=Y.words[B];return this.length=Y.length,this.strip()},T.prototype.ixor=function(te){return w((this.negative|te.negative)==0),this.iuxor(te)},T.prototype.xor=function(te){return this.length>te.length?this.clone().ixor(te):te.clone().ixor(this)},T.prototype.uxor=function(te){return this.length>te.length?this.clone().iuxor(te):te.clone().iuxor(this)},T.prototype.inotn=function(te){w(typeof te=="number"&&te>=0);var Y=Math.ceil(te/26)|0,R=te%26;this._expand(Y),R>0&&Y--;for(var B=0;B<Y;B++)this.words[B]=~this.words[B]&67108863;return R>0&&(this.words[B]=~this.words[B]&67108863>>26-R),this.strip()},T.prototype.notn=function(te){return this.clone().inotn(te)},T.prototype.setn=function(te,Y){w(typeof te=="number"&&te>=0);var R=te/26|0,B=te%26;return this._expand(R+1),Y?this.words[R]=this.words[R]|1<<B:this.words[R]=this.words[R]&~(1<<B),this.strip()},T.prototype.iadd=function(te){var Y;if(this.negative!==0&&te.negative===0)return this.negative=0,Y=this.isub(te),this.negative^=1,this._normSign();if(this.negative===0&&te.negative!==0)return te.negative=0,Y=this.isub(te),te.negative=1,Y._normSign();var R,B;this.length>te.length?(R=this,B=te):(R=te,B=this);for(var V=0,Q=0;Q<B.length;Q++)Y=(R.words[Q]|0)+(B.words[Q]|0)+V,this.words[Q]=Y&67108863,V=Y>>>26;for(;V!==0&&Q<R.length;Q++)Y=(R.words[Q]|0)+V,this.words[Q]=Y&67108863,V=Y>>>26;if(this.length=R.length,V!==0)this.words[this.length]=V,this.length++;else if(R!==this)for(;Q<R.length;Q++)this.words[Q]=R.words[Q];return this},T.prototype.add=function(te){var Y;return te.negative!==0&&this.negative===0?(te.negative=0,Y=this.sub(te),te.negative^=1,Y):te.negative===0&&this.negative!==0?(this.negative=0,Y=te.sub(this),this.negative=1,Y):this.length>te.length?this.clone().iadd(te):te.clone().iadd(this)},T.prototype.isub=function(te){if(te.negative!==0){te.negative=0;var Y=this.iadd(te);return te.negative=1,Y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(te),this.negative=1,this._normSign();var R=this.cmp(te);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;var B,V;R>0?(B=this,V=te):(B=te,V=this);for(var Q=0,H=0;H<V.length;H++)Y=(B.words[H]|0)-(V.words[H]|0)+Q,Q=Y>>26,this.words[H]=Y&67108863;for(;Q!==0&&H<B.length;H++)Y=(B.words[H]|0)+Q,Q=Y>>26,this.words[H]=Y&67108863;if(Q===0&&H<B.length&&B!==this)for(;H<B.length;H++)this.words[H]=B.words[H];return this.length=Math.max(this.length,H),B!==this&&(this.negative=1),this.strip()},T.prototype.sub=function(te){return this.clone().isub(te)};function ue(pe,te,Y){Y.negative=te.negative^pe.negative;var R=pe.length+te.length|0;Y.length=R,R=R-1|0;var B=pe.words[0]|0,V=te.words[0]|0,Q=B*V,H=Q&67108863,j=Q/67108864|0;Y.words[0]=H;for(var L=1;L<R;L++){for(var q=j>>>26,U=j&67108863,oe=Math.min(L,te.length-1),ve=Math.max(0,L-pe.length+1);ve<=oe;ve++){var fe=L-ve|0;B=pe.words[fe]|0,V=te.words[ve]|0,Q=B*V+U,q+=Q/67108864|0,U=Q&67108863}Y.words[L]=U|0,j=q|0}return j!==0?Y.words[L]=j|0:Y.length--,Y.strip()}var ne=function(te,Y,R){var B=te.words,V=Y.words,Q=R.words,H=0,j,L,q,U=B[0]|0,oe=U&8191,ve=U>>>13,fe=B[1]|0,Oe=fe&8191,Se=fe>>>13,Te=B[2]|0,Ae=Te&8191,le=Te>>>13,ke=B[3]|0,je=ke&8191,Ve=ke>>>13,qe=B[4]|0,Ze=qe&8191,Pe=qe>>>13,de=B[5]|0,me=de&8191,Re=de>>>13,Fe=B[6]|0,Ue=Fe&8191,ze=Fe>>>13,Qe=B[7]|0,Ye=Qe&8191,ht=Qe>>>13,at=B[8]|0,Ke=at&8191,kt=at>>>13,yt=B[9]|0,ct=yt&8191,Bt=yt>>>13,Et=V[0]|0,et=Et&8191,Ft=Et>>>13,At=V[1]|0,Mt=At&8191,Xt=At>>>13,Dt=V[2]|0,lt=Dt&8191,Yt=Dt>>>13,jt=V[3]|0,Pt=jt&8191,Wt=jt>>>13,Ot=V[4]|0,dt=Ot&8191,zt=Ot>>>13,Ct=V[5]|0,wt=Ct&8191,Kt=Ct>>>13,mt=V[6]|0,pt=mt&8191,Jt=mt>>>13,ge=V[7]|0,Ee=ge&8191,Me=ge>>>13,se=V[8]|0,Ie=se&8191,De=se>>>13,Ge=V[9]|0,He=Ge&8191,rt=Ge>>>13;R.negative=te.negative^Y.negative,R.length=19,j=Math.imul(oe,et),L=Math.imul(oe,Ft),L=L+Math.imul(ve,et)|0,q=Math.imul(ve,Ft);var it=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(it>>>26)|0,it&=67108863,j=Math.imul(Oe,et),L=Math.imul(Oe,Ft),L=L+Math.imul(Se,et)|0,q=Math.imul(Se,Ft),j=j+Math.imul(oe,Mt)|0,L=L+Math.imul(oe,Xt)|0,L=L+Math.imul(ve,Mt)|0,q=q+Math.imul(ve,Xt)|0;var tt=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(tt>>>26)|0,tt&=67108863,j=Math.imul(Ae,et),L=Math.imul(Ae,Ft),L=L+Math.imul(le,et)|0,q=Math.imul(le,Ft),j=j+Math.imul(Oe,Mt)|0,L=L+Math.imul(Oe,Xt)|0,L=L+Math.imul(Se,Mt)|0,q=q+Math.imul(Se,Xt)|0,j=j+Math.imul(oe,lt)|0,L=L+Math.imul(oe,Yt)|0,L=L+Math.imul(ve,lt)|0,q=q+Math.imul(ve,Yt)|0;var Vt=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,j=Math.imul(je,et),L=Math.imul(je,Ft),L=L+Math.imul(Ve,et)|0,q=Math.imul(Ve,Ft),j=j+Math.imul(Ae,Mt)|0,L=L+Math.imul(Ae,Xt)|0,L=L+Math.imul(le,Mt)|0,q=q+Math.imul(le,Xt)|0,j=j+Math.imul(Oe,lt)|0,L=L+Math.imul(Oe,Yt)|0,L=L+Math.imul(Se,lt)|0,q=q+Math.imul(Se,Yt)|0,j=j+Math.imul(oe,Pt)|0,L=L+Math.imul(oe,Wt)|0,L=L+Math.imul(ve,Pt)|0,q=q+Math.imul(ve,Wt)|0;var St=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(St>>>26)|0,St&=67108863,j=Math.imul(Ze,et),L=Math.imul(Ze,Ft),L=L+Math.imul(Pe,et)|0,q=Math.imul(Pe,Ft),j=j+Math.imul(je,Mt)|0,L=L+Math.imul(je,Xt)|0,L=L+Math.imul(Ve,Mt)|0,q=q+Math.imul(Ve,Xt)|0,j=j+Math.imul(Ae,lt)|0,L=L+Math.imul(Ae,Yt)|0,L=L+Math.imul(le,lt)|0,q=q+Math.imul(le,Yt)|0,j=j+Math.imul(Oe,Pt)|0,L=L+Math.imul(Oe,Wt)|0,L=L+Math.imul(Se,Pt)|0,q=q+Math.imul(Se,Wt)|0,j=j+Math.imul(oe,dt)|0,L=L+Math.imul(oe,zt)|0,L=L+Math.imul(ve,dt)|0,q=q+Math.imul(ve,zt)|0;var Lt=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,j=Math.imul(me,et),L=Math.imul(me,Ft),L=L+Math.imul(Re,et)|0,q=Math.imul(Re,Ft),j=j+Math.imul(Ze,Mt)|0,L=L+Math.imul(Ze,Xt)|0,L=L+Math.imul(Pe,Mt)|0,q=q+Math.imul(Pe,Xt)|0,j=j+Math.imul(je,lt)|0,L=L+Math.imul(je,Yt)|0,L=L+Math.imul(Ve,lt)|0,q=q+Math.imul(Ve,Yt)|0,j=j+Math.imul(Ae,Pt)|0,L=L+Math.imul(Ae,Wt)|0,L=L+Math.imul(le,Pt)|0,q=q+Math.imul(le,Wt)|0,j=j+Math.imul(Oe,dt)|0,L=L+Math.imul(Oe,zt)|0,L=L+Math.imul(Se,dt)|0,q=q+Math.imul(Se,zt)|0,j=j+Math.imul(oe,wt)|0,L=L+Math.imul(oe,Kt)|0,L=L+Math.imul(ve,wt)|0,q=q+Math.imul(ve,Kt)|0;var _t=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(_t>>>26)|0,_t&=67108863,j=Math.imul(Ue,et),L=Math.imul(Ue,Ft),L=L+Math.imul(ze,et)|0,q=Math.imul(ze,Ft),j=j+Math.imul(me,Mt)|0,L=L+Math.imul(me,Xt)|0,L=L+Math.imul(Re,Mt)|0,q=q+Math.imul(Re,Xt)|0,j=j+Math.imul(Ze,lt)|0,L=L+Math.imul(Ze,Yt)|0,L=L+Math.imul(Pe,lt)|0,q=q+Math.imul(Pe,Yt)|0,j=j+Math.imul(je,Pt)|0,L=L+Math.imul(je,Wt)|0,L=L+Math.imul(Ve,Pt)|0,q=q+Math.imul(Ve,Wt)|0,j=j+Math.imul(Ae,dt)|0,L=L+Math.imul(Ae,zt)|0,L=L+Math.imul(le,dt)|0,q=q+Math.imul(le,zt)|0,j=j+Math.imul(Oe,wt)|0,L=L+Math.imul(Oe,Kt)|0,L=L+Math.imul(Se,wt)|0,q=q+Math.imul(Se,Kt)|0,j=j+Math.imul(oe,pt)|0,L=L+Math.imul(oe,Jt)|0,L=L+Math.imul(ve,pt)|0,q=q+Math.imul(ve,Jt)|0;var Ut=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,j=Math.imul(Ye,et),L=Math.imul(Ye,Ft),L=L+Math.imul(ht,et)|0,q=Math.imul(ht,Ft),j=j+Math.imul(Ue,Mt)|0,L=L+Math.imul(Ue,Xt)|0,L=L+Math.imul(ze,Mt)|0,q=q+Math.imul(ze,Xt)|0,j=j+Math.imul(me,lt)|0,L=L+Math.imul(me,Yt)|0,L=L+Math.imul(Re,lt)|0,q=q+Math.imul(Re,Yt)|0,j=j+Math.imul(Ze,Pt)|0,L=L+Math.imul(Ze,Wt)|0,L=L+Math.imul(Pe,Pt)|0,q=q+Math.imul(Pe,Wt)|0,j=j+Math.imul(je,dt)|0,L=L+Math.imul(je,zt)|0,L=L+Math.imul(Ve,dt)|0,q=q+Math.imul(Ve,zt)|0,j=j+Math.imul(Ae,wt)|0,L=L+Math.imul(Ae,Kt)|0,L=L+Math.imul(le,wt)|0,q=q+Math.imul(le,Kt)|0,j=j+Math.imul(Oe,pt)|0,L=L+Math.imul(Oe,Jt)|0,L=L+Math.imul(Se,pt)|0,q=q+Math.imul(Se,Jt)|0,j=j+Math.imul(oe,Ee)|0,L=L+Math.imul(oe,Me)|0,L=L+Math.imul(ve,Ee)|0,q=q+Math.imul(ve,Me)|0;var Ht=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,j=Math.imul(Ke,et),L=Math.imul(Ke,Ft),L=L+Math.imul(kt,et)|0,q=Math.imul(kt,Ft),j=j+Math.imul(Ye,Mt)|0,L=L+Math.imul(Ye,Xt)|0,L=L+Math.imul(ht,Mt)|0,q=q+Math.imul(ht,Xt)|0,j=j+Math.imul(Ue,lt)|0,L=L+Math.imul(Ue,Yt)|0,L=L+Math.imul(ze,lt)|0,q=q+Math.imul(ze,Yt)|0,j=j+Math.imul(me,Pt)|0,L=L+Math.imul(me,Wt)|0,L=L+Math.imul(Re,Pt)|0,q=q+Math.imul(Re,Wt)|0,j=j+Math.imul(Ze,dt)|0,L=L+Math.imul(Ze,zt)|0,L=L+Math.imul(Pe,dt)|0,q=q+Math.imul(Pe,zt)|0,j=j+Math.imul(je,wt)|0,L=L+Math.imul(je,Kt)|0,L=L+Math.imul(Ve,wt)|0,q=q+Math.imul(Ve,Kt)|0,j=j+Math.imul(Ae,pt)|0,L=L+Math.imul(Ae,Jt)|0,L=L+Math.imul(le,pt)|0,q=q+Math.imul(le,Jt)|0,j=j+Math.imul(Oe,Ee)|0,L=L+Math.imul(Oe,Me)|0,L=L+Math.imul(Se,Ee)|0,q=q+Math.imul(Se,Me)|0,j=j+Math.imul(oe,Ie)|0,L=L+Math.imul(oe,De)|0,L=L+Math.imul(ve,Ie)|0,q=q+Math.imul(ve,De)|0;var Be=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(Be>>>26)|0,Be&=67108863,j=Math.imul(ct,et),L=Math.imul(ct,Ft),L=L+Math.imul(Bt,et)|0,q=Math.imul(Bt,Ft),j=j+Math.imul(Ke,Mt)|0,L=L+Math.imul(Ke,Xt)|0,L=L+Math.imul(kt,Mt)|0,q=q+Math.imul(kt,Xt)|0,j=j+Math.imul(Ye,lt)|0,L=L+Math.imul(Ye,Yt)|0,L=L+Math.imul(ht,lt)|0,q=q+Math.imul(ht,Yt)|0,j=j+Math.imul(Ue,Pt)|0,L=L+Math.imul(Ue,Wt)|0,L=L+Math.imul(ze,Pt)|0,q=q+Math.imul(ze,Wt)|0,j=j+Math.imul(me,dt)|0,L=L+Math.imul(me,zt)|0,L=L+Math.imul(Re,dt)|0,q=q+Math.imul(Re,zt)|0,j=j+Math.imul(Ze,wt)|0,L=L+Math.imul(Ze,Kt)|0,L=L+Math.imul(Pe,wt)|0,q=q+Math.imul(Pe,Kt)|0,j=j+Math.imul(je,pt)|0,L=L+Math.imul(je,Jt)|0,L=L+Math.imul(Ve,pt)|0,q=q+Math.imul(Ve,Jt)|0,j=j+Math.imul(Ae,Ee)|0,L=L+Math.imul(Ae,Me)|0,L=L+Math.imul(le,Ee)|0,q=q+Math.imul(le,Me)|0,j=j+Math.imul(Oe,Ie)|0,L=L+Math.imul(Oe,De)|0,L=L+Math.imul(Se,Ie)|0,q=q+Math.imul(Se,De)|0,j=j+Math.imul(oe,He)|0,L=L+Math.imul(oe,rt)|0,L=L+Math.imul(ve,He)|0,q=q+Math.imul(ve,rt)|0;var gt=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(gt>>>26)|0,gt&=67108863,j=Math.imul(ct,Mt),L=Math.imul(ct,Xt),L=L+Math.imul(Bt,Mt)|0,q=Math.imul(Bt,Xt),j=j+Math.imul(Ke,lt)|0,L=L+Math.imul(Ke,Yt)|0,L=L+Math.imul(kt,lt)|0,q=q+Math.imul(kt,Yt)|0,j=j+Math.imul(Ye,Pt)|0,L=L+Math.imul(Ye,Wt)|0,L=L+Math.imul(ht,Pt)|0,q=q+Math.imul(ht,Wt)|0,j=j+Math.imul(Ue,dt)|0,L=L+Math.imul(Ue,zt)|0,L=L+Math.imul(ze,dt)|0,q=q+Math.imul(ze,zt)|0,j=j+Math.imul(me,wt)|0,L=L+Math.imul(me,Kt)|0,L=L+Math.imul(Re,wt)|0,q=q+Math.imul(Re,Kt)|0,j=j+Math.imul(Ze,pt)|0,L=L+Math.imul(Ze,Jt)|0,L=L+Math.imul(Pe,pt)|0,q=q+Math.imul(Pe,Jt)|0,j=j+Math.imul(je,Ee)|0,L=L+Math.imul(je,Me)|0,L=L+Math.imul(Ve,Ee)|0,q=q+Math.imul(Ve,Me)|0,j=j+Math.imul(Ae,Ie)|0,L=L+Math.imul(Ae,De)|0,L=L+Math.imul(le,Ie)|0,q=q+Math.imul(le,De)|0,j=j+Math.imul(Oe,He)|0,L=L+Math.imul(Oe,rt)|0,L=L+Math.imul(Se,He)|0,q=q+Math.imul(Se,rt)|0;var bt=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(bt>>>26)|0,bt&=67108863,j=Math.imul(ct,lt),L=Math.imul(ct,Yt),L=L+Math.imul(Bt,lt)|0,q=Math.imul(Bt,Yt),j=j+Math.imul(Ke,Pt)|0,L=L+Math.imul(Ke,Wt)|0,L=L+Math.imul(kt,Pt)|0,q=q+Math.imul(kt,Wt)|0,j=j+Math.imul(Ye,dt)|0,L=L+Math.imul(Ye,zt)|0,L=L+Math.imul(ht,dt)|0,q=q+Math.imul(ht,zt)|0,j=j+Math.imul(Ue,wt)|0,L=L+Math.imul(Ue,Kt)|0,L=L+Math.imul(ze,wt)|0,q=q+Math.imul(ze,Kt)|0,j=j+Math.imul(me,pt)|0,L=L+Math.imul(me,Jt)|0,L=L+Math.imul(Re,pt)|0,q=q+Math.imul(Re,Jt)|0,j=j+Math.imul(Ze,Ee)|0,L=L+Math.imul(Ze,Me)|0,L=L+Math.imul(Pe,Ee)|0,q=q+Math.imul(Pe,Me)|0,j=j+Math.imul(je,Ie)|0,L=L+Math.imul(je,De)|0,L=L+Math.imul(Ve,Ie)|0,q=q+Math.imul(Ve,De)|0,j=j+Math.imul(Ae,He)|0,L=L+Math.imul(Ae,rt)|0,L=L+Math.imul(le,He)|0,q=q+Math.imul(le,rt)|0;var ot=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(ot>>>26)|0,ot&=67108863,j=Math.imul(ct,Pt),L=Math.imul(ct,Wt),L=L+Math.imul(Bt,Pt)|0,q=Math.imul(Bt,Wt),j=j+Math.imul(Ke,dt)|0,L=L+Math.imul(Ke,zt)|0,L=L+Math.imul(kt,dt)|0,q=q+Math.imul(kt,zt)|0,j=j+Math.imul(Ye,wt)|0,L=L+Math.imul(Ye,Kt)|0,L=L+Math.imul(ht,wt)|0,q=q+Math.imul(ht,Kt)|0,j=j+Math.imul(Ue,pt)|0,L=L+Math.imul(Ue,Jt)|0,L=L+Math.imul(ze,pt)|0,q=q+Math.imul(ze,Jt)|0,j=j+Math.imul(me,Ee)|0,L=L+Math.imul(me,Me)|0,L=L+Math.imul(Re,Ee)|0,q=q+Math.imul(Re,Me)|0,j=j+Math.imul(Ze,Ie)|0,L=L+Math.imul(Ze,De)|0,L=L+Math.imul(Pe,Ie)|0,q=q+Math.imul(Pe,De)|0,j=j+Math.imul(je,He)|0,L=L+Math.imul(je,rt)|0,L=L+Math.imul(Ve,He)|0,q=q+Math.imul(Ve,rt)|0;var Nt=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,j=Math.imul(ct,dt),L=Math.imul(ct,zt),L=L+Math.imul(Bt,dt)|0,q=Math.imul(Bt,zt),j=j+Math.imul(Ke,wt)|0,L=L+Math.imul(Ke,Kt)|0,L=L+Math.imul(kt,wt)|0,q=q+Math.imul(kt,Kt)|0,j=j+Math.imul(Ye,pt)|0,L=L+Math.imul(Ye,Jt)|0,L=L+Math.imul(ht,pt)|0,q=q+Math.imul(ht,Jt)|0,j=j+Math.imul(Ue,Ee)|0,L=L+Math.imul(Ue,Me)|0,L=L+Math.imul(ze,Ee)|0,q=q+Math.imul(ze,Me)|0,j=j+Math.imul(me,Ie)|0,L=L+Math.imul(me,De)|0,L=L+Math.imul(Re,Ie)|0,q=q+Math.imul(Re,De)|0,j=j+Math.imul(Ze,He)|0,L=L+Math.imul(Ze,rt)|0,L=L+Math.imul(Pe,He)|0,q=q+Math.imul(Pe,rt)|0;var $t=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+($t>>>26)|0,$t&=67108863,j=Math.imul(ct,wt),L=Math.imul(ct,Kt),L=L+Math.imul(Bt,wt)|0,q=Math.imul(Bt,Kt),j=j+Math.imul(Ke,pt)|0,L=L+Math.imul(Ke,Jt)|0,L=L+Math.imul(kt,pt)|0,q=q+Math.imul(kt,Jt)|0,j=j+Math.imul(Ye,Ee)|0,L=L+Math.imul(Ye,Me)|0,L=L+Math.imul(ht,Ee)|0,q=q+Math.imul(ht,Me)|0,j=j+Math.imul(Ue,Ie)|0,L=L+Math.imul(Ue,De)|0,L=L+Math.imul(ze,Ie)|0,q=q+Math.imul(ze,De)|0,j=j+Math.imul(me,He)|0,L=L+Math.imul(me,rt)|0,L=L+Math.imul(Re,He)|0,q=q+Math.imul(Re,rt)|0;var It=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(It>>>26)|0,It&=67108863,j=Math.imul(ct,pt),L=Math.imul(ct,Jt),L=L+Math.imul(Bt,pt)|0,q=Math.imul(Bt,Jt),j=j+Math.imul(Ke,Ee)|0,L=L+Math.imul(Ke,Me)|0,L=L+Math.imul(kt,Ee)|0,q=q+Math.imul(kt,Me)|0,j=j+Math.imul(Ye,Ie)|0,L=L+Math.imul(Ye,De)|0,L=L+Math.imul(ht,Ie)|0,q=q+Math.imul(ht,De)|0,j=j+Math.imul(Ue,He)|0,L=L+Math.imul(Ue,rt)|0,L=L+Math.imul(ze,He)|0,q=q+Math.imul(ze,rt)|0;var Rt=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,j=Math.imul(ct,Ee),L=Math.imul(ct,Me),L=L+Math.imul(Bt,Ee)|0,q=Math.imul(Bt,Me),j=j+Math.imul(Ke,Ie)|0,L=L+Math.imul(Ke,De)|0,L=L+Math.imul(kt,Ie)|0,q=q+Math.imul(kt,De)|0,j=j+Math.imul(Ye,He)|0,L=L+Math.imul(Ye,rt)|0,L=L+Math.imul(ht,He)|0,q=q+Math.imul(ht,rt)|0;var xt=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(xt>>>26)|0,xt&=67108863,j=Math.imul(ct,Ie),L=Math.imul(ct,De),L=L+Math.imul(Bt,Ie)|0,q=Math.imul(Bt,De),j=j+Math.imul(Ke,He)|0,L=L+Math.imul(Ke,rt)|0,L=L+Math.imul(kt,He)|0,q=q+Math.imul(kt,rt)|0;var We=(H+j|0)+((L&8191)<<13)|0;H=(q+(L>>>13)|0)+(We>>>26)|0,We&=67108863,j=Math.imul(ct,He),L=Math.imul(ct,rt),L=L+Math.imul(Bt,He)|0,q=Math.imul(Bt,rt);var Je=(H+j|0)+((L&8191)<<13)|0;return H=(q+(L>>>13)|0)+(Je>>>26)|0,Je&=67108863,Q[0]=it,Q[1]=tt,Q[2]=Vt,Q[3]=St,Q[4]=Lt,Q[5]=_t,Q[6]=Ut,Q[7]=Ht,Q[8]=Be,Q[9]=gt,Q[10]=bt,Q[11]=ot,Q[12]=Nt,Q[13]=$t,Q[14]=It,Q[15]=Rt,Q[16]=xt,Q[17]=We,Q[18]=Je,H!==0&&(Q[19]=H,R.length++),R};Math.imul||(ne=ue);function ce(pe,te,Y){Y.negative=te.negative^pe.negative,Y.length=pe.length+te.length;for(var R=0,B=0,V=0;V<Y.length-1;V++){var Q=B;B=0;for(var H=R&67108863,j=Math.min(V,te.length-1),L=Math.max(0,V-pe.length+1);L<=j;L++){var q=V-L,U=pe.words[q]|0,oe=te.words[L]|0,ve=U*oe,fe=ve&67108863;Q=Q+(ve/67108864|0)|0,fe=fe+H|0,H=fe&67108863,Q=Q+(fe>>>26)|0,B+=Q>>>26,Q&=67108863}Y.words[V]=H,R=Q,Q=B}return R!==0?Y.words[V]=R:Y.length--,Y.strip()}function ae(pe,te,Y){var R=new ye;return R.mulp(pe,te,Y)}T.prototype.mulTo=function(te,Y){var R,B=this.length+te.length;return this.length===10&&te.length===10?R=ne(this,te,Y):B<63?R=ue(this,te,Y):B<1024?R=ce(this,te,Y):R=ae(this,te,Y),R};function ye(pe,te){this.x=pe,this.y=te}ye.prototype.makeRBT=function(te){for(var Y=new Array(te),R=T.prototype._countBits(te)-1,B=0;B<te;B++)Y[B]=this.revBin(B,R,te);return Y},ye.prototype.revBin=function(te,Y,R){if(te===0||te===R-1)return te;for(var B=0,V=0;V<Y;V++)B|=(te&1)<<Y-V-1,te>>=1;return B},ye.prototype.permute=function(te,Y,R,B,V,Q){for(var H=0;H<Q;H++)B[H]=Y[te[H]],V[H]=R[te[H]]},ye.prototype.transform=function(te,Y,R,B,V,Q){this.permute(Q,te,Y,R,B,V);for(var H=1;H<V;H<<=1)for(var j=H<<1,L=Math.cos(2*Math.PI/j),q=Math.sin(2*Math.PI/j),U=0;U<V;U+=j)for(var oe=L,ve=q,fe=0;fe<H;fe++){var Oe=R[U+fe],Se=B[U+fe],Te=R[U+fe+H],Ae=B[U+fe+H],le=oe*Te-ve*Ae;Ae=oe*Ae+ve*Te,Te=le,R[U+fe]=Oe+Te,B[U+fe]=Se+Ae,R[U+fe+H]=Oe-Te,B[U+fe+H]=Se-Ae,fe!==j&&(le=L*oe-q*ve,ve=L*ve+q*oe,oe=le)}},ye.prototype.guessLen13b=function(te,Y){var R=Math.max(Y,te)|1,B=R&1,V=0;for(R=R/2|0;R;R=R>>>1)V++;return 1<<V+1+B},ye.prototype.conjugate=function(te,Y,R){if(!(R<=1))for(var B=0;B<R/2;B++){var V=te[B];te[B]=te[R-B-1],te[R-B-1]=V,V=Y[B],Y[B]=-Y[R-B-1],Y[R-B-1]=-V}},ye.prototype.normalize13b=function(te,Y){for(var R=0,B=0;B<Y/2;B++){var V=Math.round(te[2*B+1]/Y)*8192+Math.round(te[2*B]/Y)+R;te[B]=V&67108863,V<67108864?R=0:R=V/67108864|0}return te},ye.prototype.convert13b=function(te,Y,R,B){for(var V=0,Q=0;Q<Y;Q++)V=V+(te[Q]|0),R[2*Q]=V&8191,V=V>>>13,R[2*Q+1]=V&8191,V=V>>>13;for(Q=2*Y;Q<B;++Q)R[Q]=0;w(V===0),w((V&~8191)==0)},ye.prototype.stub=function(te){for(var Y=new Array(te),R=0;R<te;R++)Y[R]=0;return Y},ye.prototype.mulp=function(te,Y,R){var B=2*this.guessLen13b(te.length,Y.length),V=this.makeRBT(B),Q=this.stub(B),H=new Array(B),j=new Array(B),L=new Array(B),q=new Array(B),U=new Array(B),oe=new Array(B),ve=R.words;ve.length=B,this.convert13b(te.words,te.length,H,B),this.convert13b(Y.words,Y.length,q,B),this.transform(H,Q,j,L,B,V),this.transform(q,Q,U,oe,B,V);for(var fe=0;fe<B;fe++){var Oe=j[fe]*U[fe]-L[fe]*oe[fe];L[fe]=j[fe]*oe[fe]+L[fe]*U[fe],j[fe]=Oe}return this.conjugate(j,L,B),this.transform(j,L,ve,Q,B,V),this.conjugate(ve,Q,B),this.normalize13b(ve,B),R.negative=te.negative^Y.negative,R.length=te.length+Y.length,R.strip()},T.prototype.mul=function(te){var Y=new T(null);return Y.words=new Array(this.length+te.length),this.mulTo(te,Y)},T.prototype.mulf=function(te){var Y=new T(null);return Y.words=new Array(this.length+te.length),ae(this,te,Y)},T.prototype.imul=function(te){return this.clone().mulTo(te,this)},T.prototype.imuln=function(te){w(typeof te=="number"),w(te<67108864);for(var Y=0,R=0;R<this.length;R++){var B=(this.words[R]|0)*te,V=(B&67108863)+(Y&67108863);Y>>=26,Y+=B/67108864|0,Y+=V>>>26,this.words[R]=V&67108863}return Y!==0&&(this.words[R]=Y,this.length++),this},T.prototype.muln=function(te){return this.clone().imuln(te)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(te){var Y=ie(te);if(Y.length===0)return new T(1);for(var R=this,B=0;B<Y.length&&Y[B]===0;B++,R=R.sqr());if(++B<Y.length)for(var V=R.sqr();B<Y.length;B++,V=V.sqr())Y[B]!==0&&(R=R.mul(V));return R},T.prototype.iushln=function(te){w(typeof te=="number"&&te>=0);var Y=te%26,R=(te-Y)/26,B=67108863>>>26-Y<<26-Y,V;if(Y!==0){var Q=0;for(V=0;V<this.length;V++){var H=this.words[V]&B,j=(this.words[V]|0)-H<<Y;this.words[V]=j|Q,Q=H>>>26-Y}Q&&(this.words[V]=Q,this.length++)}if(R!==0){for(V=this.length-1;V>=0;V--)this.words[V+R]=this.words[V];for(V=0;V<R;V++)this.words[V]=0;this.length+=R}return this.strip()},T.prototype.ishln=function(te){return w(this.negative===0),this.iushln(te)},T.prototype.iushrn=function(te,Y,R){w(typeof te=="number"&&te>=0);var B;Y?B=(Y-Y%26)/26:B=0;var V=te%26,Q=Math.min((te-V)/26,this.length),H=67108863^67108863>>>V<<V,j=R;if(B-=Q,B=Math.max(0,B),j){for(var L=0;L<Q;L++)j.words[L]=this.words[L];j.length=Q}if(Q!==0)if(this.length>Q)for(this.length-=Q,L=0;L<this.length;L++)this.words[L]=this.words[L+Q];else this.words[0]=0,this.length=1;var q=0;for(L=this.length-1;L>=0&&(q!==0||L>=B);L--){var U=this.words[L]|0;this.words[L]=q<<26-V|U>>>V,q=U&H}return j&&q!==0&&(j.words[j.length++]=q),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},T.prototype.ishrn=function(te,Y,R){return w(this.negative===0),this.iushrn(te,Y,R)},T.prototype.shln=function(te){return this.clone().ishln(te)},T.prototype.ushln=function(te){return this.clone().iushln(te)},T.prototype.shrn=function(te){return this.clone().ishrn(te)},T.prototype.ushrn=function(te){return this.clone().iushrn(te)},T.prototype.testn=function(te){w(typeof te=="number"&&te>=0);var Y=te%26,R=(te-Y)/26,B=1<<Y;if(this.length<=R)return!1;var V=this.words[R];return!!(V&B)},T.prototype.imaskn=function(te){w(typeof te=="number"&&te>=0);var Y=te%26,R=(te-Y)/26;if(w(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(Y!==0&&R++,this.length=Math.min(R,this.length),Y!==0){var B=67108863^67108863>>>Y<<Y;this.words[this.length-1]&=B}return this.strip()},T.prototype.maskn=function(te){return this.clone().imaskn(te)},T.prototype.iaddn=function(te){return w(typeof te=="number"),w(te<67108864),te<0?this.isubn(-te):this.negative!==0?this.length===1&&(this.words[0]|0)<te?(this.words[0]=te-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(te),this.negative=1,this):this._iaddn(te)},T.prototype._iaddn=function(te){this.words[0]+=te;for(var Y=0;Y<this.length&&this.words[Y]>=67108864;Y++)this.words[Y]-=67108864,Y===this.length-1?this.words[Y+1]=1:this.words[Y+1]++;return this.length=Math.max(this.length,Y+1),this},T.prototype.isubn=function(te){if(w(typeof te=="number"),w(te<67108864),te<0)return this.iaddn(-te);if(this.negative!==0)return this.negative=0,this.iaddn(te),this.negative=1,this;if(this.words[0]-=te,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Y=0;Y<this.length&&this.words[Y]<0;Y++)this.words[Y]+=67108864,this.words[Y+1]-=1;return this.strip()},T.prototype.addn=function(te){return this.clone().iaddn(te)},T.prototype.subn=function(te){return this.clone().isubn(te)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(te,Y,R){var B=te.length+R,V;this._expand(B);var Q,H=0;for(V=0;V<te.length;V++){Q=(this.words[V+R]|0)+H;var j=(te.words[V]|0)*Y;Q-=j&67108863,H=(Q>>26)-(j/67108864|0),this.words[V+R]=Q&67108863}for(;V<this.length-R;V++)Q=(this.words[V+R]|0)+H,H=Q>>26,this.words[V+R]=Q&67108863;if(H===0)return this.strip();for(w(H===-1),H=0,V=0;V<this.length;V++)Q=-(this.words[V]|0)+H,H=Q>>26,this.words[V]=Q&67108863;return this.negative=1,this.strip()},T.prototype._wordDiv=function(te,Y){var R=this.length-te.length,B=this.clone(),V=te,Q=V.words[V.length-1]|0,H=this._countBits(Q);R=26-H,R!==0&&(V=V.ushln(R),B.iushln(R),Q=V.words[V.length-1]|0);var j=B.length-V.length,L;if(Y!=="mod"){L=new T(null),L.length=j+1,L.words=new Array(L.length);for(var q=0;q<L.length;q++)L.words[q]=0}var U=B.clone()._ishlnsubmul(V,1,j);U.negative===0&&(B=U,L&&(L.words[j]=1));for(var oe=j-1;oe>=0;oe--){var ve=(B.words[V.length+oe]|0)*67108864+(B.words[V.length+oe-1]|0);for(ve=Math.min(ve/Q|0,67108863),B._ishlnsubmul(V,ve,oe);B.negative!==0;)ve--,B.negative=0,B._ishlnsubmul(V,1,oe),B.isZero()||(B.negative^=1);L&&(L.words[oe]=ve)}return L&&L.strip(),B.strip(),Y!=="div"&&R!==0&&B.iushrn(R),{div:L||null,mod:B}},T.prototype.divmod=function(te,Y,R){if(w(!te.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var B,V,Q;return this.negative!==0&&te.negative===0?(Q=this.neg().divmod(te,Y),Y!=="mod"&&(B=Q.div.neg()),Y!=="div"&&(V=Q.mod.neg(),R&&V.negative!==0&&V.iadd(te)),{div:B,mod:V}):this.negative===0&&te.negative!==0?(Q=this.divmod(te.neg(),Y),Y!=="mod"&&(B=Q.div.neg()),{div:B,mod:Q.mod}):(this.negative&te.negative)!=0?(Q=this.neg().divmod(te.neg(),Y),Y!=="div"&&(V=Q.mod.neg(),R&&V.negative!==0&&V.isub(te)),{div:Q.div,mod:V}):te.length>this.length||this.cmp(te)<0?{div:new T(0),mod:this}:te.length===1?Y==="div"?{div:this.divn(te.words[0]),mod:null}:Y==="mod"?{div:null,mod:new T(this.modn(te.words[0]))}:{div:this.divn(te.words[0]),mod:new T(this.modn(te.words[0]))}:this._wordDiv(te,Y)},T.prototype.div=function(te){return this.divmod(te,"div",!1).div},T.prototype.mod=function(te){return this.divmod(te,"mod",!1).mod},T.prototype.umod=function(te){return this.divmod(te,"mod",!0).mod},T.prototype.divRound=function(te){var Y=this.divmod(te);if(Y.mod.isZero())return Y.div;var R=Y.div.negative!==0?Y.mod.isub(te):Y.mod,B=te.ushrn(1),V=te.andln(1),Q=R.cmp(B);return Q<0||V===1&&Q===0?Y.div:Y.div.negative!==0?Y.div.isubn(1):Y.div.iaddn(1)},T.prototype.modn=function(te){w(te<=67108863);for(var Y=(1<<26)%te,R=0,B=this.length-1;B>=0;B--)R=(Y*R+(this.words[B]|0))%te;return R},T.prototype.idivn=function(te){w(te<=67108863);for(var Y=0,R=this.length-1;R>=0;R--){var B=(this.words[R]|0)+Y*67108864;this.words[R]=B/te|0,Y=B%te}return this.strip()},T.prototype.divn=function(te){return this.clone().idivn(te)},T.prototype.egcd=function(te){w(te.negative===0),w(!te.isZero());var Y=this,R=te.clone();Y.negative!==0?Y=Y.umod(te):Y=Y.clone();for(var B=new T(1),V=new T(0),Q=new T(0),H=new T(1),j=0;Y.isEven()&&R.isEven();)Y.iushrn(1),R.iushrn(1),++j;for(var L=R.clone(),q=Y.clone();!Y.isZero();){for(var U=0,oe=1;(Y.words[0]&oe)==0&&U<26;++U,oe<<=1);if(U>0)for(Y.iushrn(U);U-- >0;)(B.isOdd()||V.isOdd())&&(B.iadd(L),V.isub(q)),B.iushrn(1),V.iushrn(1);for(var ve=0,fe=1;(R.words[0]&fe)==0&&ve<26;++ve,fe<<=1);if(ve>0)for(R.iushrn(ve);ve-- >0;)(Q.isOdd()||H.isOdd())&&(Q.iadd(L),H.isub(q)),Q.iushrn(1),H.iushrn(1);Y.cmp(R)>=0?(Y.isub(R),B.isub(Q),V.isub(H)):(R.isub(Y),Q.isub(B),H.isub(V))}return{a:Q,b:H,gcd:R.iushln(j)}},T.prototype._invmp=function(te){w(te.negative===0),w(!te.isZero());var Y=this,R=te.clone();Y.negative!==0?Y=Y.umod(te):Y=Y.clone();for(var B=new T(1),V=new T(0),Q=R.clone();Y.cmpn(1)>0&&R.cmpn(1)>0;){for(var H=0,j=1;(Y.words[0]&j)==0&&H<26;++H,j<<=1);if(H>0)for(Y.iushrn(H);H-- >0;)B.isOdd()&&B.iadd(Q),B.iushrn(1);for(var L=0,q=1;(R.words[0]&q)==0&&L<26;++L,q<<=1);if(L>0)for(R.iushrn(L);L-- >0;)V.isOdd()&&V.iadd(Q),V.iushrn(1);Y.cmp(R)>=0?(Y.isub(R),B.isub(V)):(R.isub(Y),V.isub(B))}var U;return Y.cmpn(1)===0?U=B:U=V,U.cmpn(0)<0&&U.iadd(te),U},T.prototype.gcd=function(te){if(this.isZero())return te.abs();if(te.isZero())return this.abs();var Y=this.clone(),R=te.clone();Y.negative=0,R.negative=0;for(var B=0;Y.isEven()&&R.isEven();B++)Y.iushrn(1),R.iushrn(1);do{for(;Y.isEven();)Y.iushrn(1);for(;R.isEven();)R.iushrn(1);var V=Y.cmp(R);if(V<0){var Q=Y;Y=R,R=Q}else if(V===0||R.cmpn(1)===0)break;Y.isub(R)}while(!0);return R.iushln(B)},T.prototype.invm=function(te){return this.egcd(te).a.umod(te)},T.prototype.isEven=function(){return(this.words[0]&1)==0},T.prototype.isOdd=function(){return(this.words[0]&1)==1},T.prototype.andln=function(te){return this.words[0]&te},T.prototype.bincn=function(te){w(typeof te=="number");var Y=te%26,R=(te-Y)/26,B=1<<Y;if(this.length<=R)return this._expand(R+1),this.words[R]|=B,this;for(var V=B,Q=R;V!==0&&Q<this.length;Q++){var H=this.words[Q]|0;H+=V,V=H>>>26,H&=67108863,this.words[Q]=H}return V!==0&&(this.words[Q]=V,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(te){var Y=te<0;if(this.negative!==0&&!Y)return-1;if(this.negative===0&&Y)return 1;this.strip();var R;if(this.length>1)R=1;else{Y&&(te=-te),w(te<=67108863,"Number is too big");var B=this.words[0]|0;R=B===te?0:B<te?-1:1}return this.negative!==0?-R|0:R},T.prototype.cmp=function(te){if(this.negative!==0&&te.negative===0)return-1;if(this.negative===0&&te.negative!==0)return 1;var Y=this.ucmp(te);return this.negative!==0?-Y|0:Y},T.prototype.ucmp=function(te){if(this.length>te.length)return 1;if(this.length<te.length)return-1;for(var Y=0,R=this.length-1;R>=0;R--){var B=this.words[R]|0,V=te.words[R]|0;if(B!==V){B<V?Y=-1:B>V&&(Y=1);break}}return Y},T.prototype.gtn=function(te){return this.cmpn(te)===1},T.prototype.gt=function(te){return this.cmp(te)===1},T.prototype.gten=function(te){return this.cmpn(te)>=0},T.prototype.gte=function(te){return this.cmp(te)>=0},T.prototype.ltn=function(te){return this.cmpn(te)===-1},T.prototype.lt=function(te){return this.cmp(te)===-1},T.prototype.lten=function(te){return this.cmpn(te)<=0},T.prototype.lte=function(te){return this.cmp(te)<=0},T.prototype.eqn=function(te){return this.cmpn(te)===0},T.prototype.eq=function(te){return this.cmp(te)===0},T.red=function(te){return new we(te)},T.prototype.toRed=function(te){return w(!this.red,"Already a number in reduction context"),w(this.negative===0,"red works only with positives"),te.convertTo(this)._forceRed(te)},T.prototype.fromRed=function(){return w(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(te){return this.red=te,this},T.prototype.forceRed=function(te){return w(!this.red,"Already a number in reduction context"),this._forceRed(te)},T.prototype.redAdd=function(te){return w(this.red,"redAdd works only with red numbers"),this.red.add(this,te)},T.prototype.redIAdd=function(te){return w(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,te)},T.prototype.redSub=function(te){return w(this.red,"redSub works only with red numbers"),this.red.sub(this,te)},T.prototype.redISub=function(te){return w(this.red,"redISub works only with red numbers"),this.red.isub(this,te)},T.prototype.redShl=function(te){return w(this.red,"redShl works only with red numbers"),this.red.shl(this,te)},T.prototype.redMul=function(te){return w(this.red,"redMul works only with red numbers"),this.red._verify2(this,te),this.red.mul(this,te)},T.prototype.redIMul=function(te){return w(this.red,"redMul works only with red numbers"),this.red._verify2(this,te),this.red.imul(this,te)},T.prototype.redSqr=function(){return w(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return w(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return w(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return w(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return w(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(te){return w(this.red&&!te.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,te)};var $e={k256:null,p224:null,p192:null,p25519:null};function _e(pe,te){this.name=pe,this.p=new T(te,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_e.prototype._tmp=function(){var te=new T(null);return te.words=new Array(Math.ceil(this.n/13)),te},_e.prototype.ireduce=function(te){var Y=te,R;do this.split(Y,this.tmp),Y=this.imulK(Y),Y=Y.iadd(this.tmp),R=Y.bitLength();while(R>this.n);var B=R<this.n?-1:Y.ucmp(this.p);return B===0?(Y.words[0]=0,Y.length=1):B>0?Y.isub(this.p):Y.strip!==void 0?Y.strip():Y._strip(),Y},_e.prototype.split=function(te,Y){te.iushrn(this.n,0,Y)},_e.prototype.imulK=function(te){return te.imul(this.k)};function be(){_e.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(be,_e),be.prototype.split=function(te,Y){for(var R=4194303,B=Math.min(te.length,9),V=0;V<B;V++)Y.words[V]=te.words[V];if(Y.length=B,te.length<=9){te.words[0]=0,te.length=1;return}var Q=te.words[9];for(Y.words[Y.length++]=Q&R,V=10;V<te.length;V++){var H=te.words[V]|0;te.words[V-10]=(H&R)<<4|Q>>>22,Q=H}Q>>>=22,te.words[V-10]=Q,Q===0&&te.length>10?te.length-=10:te.length-=9},be.prototype.imulK=function(te){te.words[te.length]=0,te.words[te.length+1]=0,te.length+=2;for(var Y=0,R=0;R<te.length;R++){var B=te.words[R]|0;Y+=B*977,te.words[R]=Y&67108863,Y=B*64+(Y/67108864|0)}return te.words[te.length-1]===0&&(te.length--,te.words[te.length-1]===0&&te.length--),te};function xe(){_e.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(xe,_e);function ee(){_e.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(ee,_e);function he(){_e.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(he,_e),he.prototype.imulK=function(te){for(var Y=0,R=0;R<te.length;R++){var B=(te.words[R]|0)*19+Y,V=B&67108863;B>>>=26,te.words[R]=V,Y=B}return Y!==0&&(te.words[te.length++]=Y),te},T._prime=function(te){if($e[te])return $e[te];var Y;if(te==="k256")Y=new be;else if(te==="p224")Y=new xe;else if(te==="p192")Y=new ee;else if(te==="p25519")Y=new he;else throw new Error("Unknown prime "+te);return $e[te]=Y,Y};function we(pe){if(typeof pe=="string"){var te=T._prime(pe);this.m=te.p,this.prime=te}else w(pe.gtn(1),"modulus must be greater than 1"),this.m=pe,this.prime=null}we.prototype._verify1=function(te){w(te.negative===0,"red works only with positives"),w(te.red,"red works only with red numbers")},we.prototype._verify2=function(te,Y){w((te.negative|Y.negative)==0,"red works only with positives"),w(te.red&&te.red===Y.red,"red works only with red numbers")},we.prototype.imod=function(te){return this.prime?this.prime.ireduce(te)._forceRed(this):te.umod(this.m)._forceRed(this)},we.prototype.neg=function(te){return te.isZero()?te.clone():this.m.sub(te)._forceRed(this)},we.prototype.add=function(te,Y){this._verify2(te,Y);var R=te.add(Y);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},we.prototype.iadd=function(te,Y){this._verify2(te,Y);var R=te.iadd(Y);return R.cmp(this.m)>=0&&R.isub(this.m),R},we.prototype.sub=function(te,Y){this._verify2(te,Y);var R=te.sub(Y);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},we.prototype.isub=function(te,Y){this._verify2(te,Y);var R=te.isub(Y);return R.cmpn(0)<0&&R.iadd(this.m),R},we.prototype.shl=function(te,Y){return this._verify1(te),this.imod(te.ushln(Y))},we.prototype.imul=function(te,Y){return this._verify2(te,Y),this.imod(te.imul(Y))},we.prototype.mul=function(te,Y){return this._verify2(te,Y),this.imod(te.mul(Y))},we.prototype.isqr=function(te){return this.imul(te,te.clone())},we.prototype.sqr=function(te){return this.mul(te,te)},we.prototype.sqrt=function(te){if(te.isZero())return te.clone();var Y=this.m.andln(3);if(w(Y%2==1),Y===3){var R=this.m.add(new T(1)).iushrn(2);return this.pow(te,R)}for(var B=this.m.subn(1),V=0;!B.isZero()&&B.andln(1)===0;)V++,B.iushrn(1);w(!B.isZero());var Q=new T(1).toRed(this),H=Q.redNeg(),j=this.m.subn(1).iushrn(1),L=this.m.bitLength();for(L=new T(2*L*L).toRed(this);this.pow(L,j).cmp(H)!==0;)L.redIAdd(H);for(var q=this.pow(L,B),U=this.pow(te,B.addn(1).iushrn(1)),oe=this.pow(te,B),ve=V;oe.cmp(Q)!==0;){for(var fe=oe,Oe=0;fe.cmp(Q)!==0;Oe++)fe=fe.redSqr();w(Oe<ve);var Se=this.pow(q,new T(1).iushln(ve-Oe-1));U=U.redMul(Se),q=Se.redSqr(),oe=oe.redMul(q),ve=Oe}return U},we.prototype.invm=function(te){var Y=te._invmp(this.m);return Y.negative!==0?(Y.negative=0,this.imod(Y).redNeg()):this.imod(Y)},we.prototype.pow=function(te,Y){if(Y.isZero())return new T(1).toRed(this);if(Y.cmpn(1)===0)return te.clone();var R=4,B=new Array(1<<R);B[0]=new T(1).toRed(this),B[1]=te;for(var V=2;V<B.length;V++)B[V]=this.mul(B[V-1],te);var Q=B[0],H=0,j=0,L=Y.bitLength()%26;for(L===0&&(L=26),V=Y.length-1;V>=0;V--){for(var q=Y.words[V],U=L-1;U>=0;U--){var oe=q>>U&1;if(Q!==B[0]&&(Q=this.sqr(Q)),oe===0&&H===0){j=0;continue}H<<=1,H|=oe,j++,!(j!==R&&(V!==0||U!==0))&&(Q=this.mul(Q,B[H]),j=0,H=0)}L=26}return Q},we.prototype.convertTo=function(te){var Y=te.umod(this.m);return Y===te?Y.clone():Y},we.prototype.convertFrom=function(te){var Y=te.clone();return Y.red=null,Y},T.mont=function(te){return new Ne(te)};function Ne(pe){we.call(this,pe),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(Ne,we),Ne.prototype.convertTo=function(te){return this.imod(te.ushln(this.shift))},Ne.prototype.convertFrom=function(te){var Y=this.imod(te.mul(this.rinv));return Y.red=null,Y},Ne.prototype.imul=function(te,Y){if(te.isZero()||Y.isZero())return te.words[0]=0,te.length=1,te;var R=te.imul(Y),B=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=R.isub(B).iushrn(this.shift),Q=V;return V.cmp(this.m)>=0?Q=V.isub(this.m):V.cmpn(0)<0&&(Q=V.iadd(this.m)),Q._forceRed(this)},Ne.prototype.mul=function(te,Y){if(te.isZero()||Y.isZero())return new T(0)._forceRed(this);var R=te.mul(Y),B=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=R.isub(B).iushrn(this.shift),Q=V;return V.cmp(this.m)>=0?Q=V.isub(this.m):V.cmpn(0)<0&&(Q=V.iadd(this.m)),Q._forceRed(this)},Ne.prototype.invm=function(te){var Y=this.imod(te._invmp(this.m).mul(this.r2));return Y._forceRed(this)}})(t,commonjsGlobal)})(bn$2);var BN$9=bn$2.exports;const version$i="logger/5.5.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,b){const w=e.toLowerCase();LogLevels[w]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(_logLevel>LogLevels[w])&&console.log.apply(console,b)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,b,w){if(_censorErrors)return this.makeError("censored error",b,{});b||(b=Logger.errors.UNKNOWN_ERROR),w||(w={});const $=[];Object.keys(w).forEach(C=>{const F=w[C];try{if(F instanceof Uint8Array){let G="";for(let J=0;J<F.length;J++)G+=HEX[F[J]>>4],G+=HEX[F[J]&15];$.push(C+"=Uint8Array(0x"+G+")")}else $.push(C+"="+JSON.stringify(F))}catch{$.push(C+"="+JSON.stringify(w[C].toString()))}}),$.push(`code=${b}`),$.push(`version=${this.version}`);const T=e;$.length&&(e+=" ("+$.join(", ")+")");const N=new Error(e);return N.reason=T,N.code=b,Object.keys(w).forEach(function(C){N[C]=w[C]}),N}throwError(e,b,w){throw this.makeError(e,b,w)}throwArgumentError(e,b,w){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:b,value:w})}assert(e,b,w,$){e||this.throwError(b,w,$)}assertArgument(e,b,w,$){e||this.throwArgumentError(b,w,$)}checkNormalize(e){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(e,b){typeof e=="number"&&(b==null&&(b="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(b,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(b,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,b,w){w?w=": "+w:w="",e<b&&this.throwError("missing argument"+w,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:b}),e>b&&this.throwError("too many arguments"+w,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:b})}checkNew(e,b){(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:b.name})}checkAbstract(e,b){e===b?this.throwError("cannot instantiate abstract class "+JSON.stringify(b.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:b.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$i)),_globalLogger}static setCensorship(e,b){if(!e&&b&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!e)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!e,_permanentCensorErrors=!!b}static setLogLevel(e){const b=LogLevels[e.toLowerCase()];if(b==null){Logger.globalLogger().warn("invalid log level - "+e);return}_logLevel=b}static from(e){return new Logger(e)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$h="bytes/5.5.0",logger$h=new Logger(version$h);function isHexable(t){return!!t.toHexString}function addSlice(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function isBytesLike(t){return isHexString(t)&&!(t.length%2)||isBytes(t)}function isInteger$1(t){return typeof t=="number"&&t==t&&t%1==0}function isBytes(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!isInteger$1(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const b=t[e];if(!isInteger$1(b)||b<0||b>=256)return!1}return!0}function arrayify(t,e){if(e||(e={}),typeof t=="number"){logger$h.checkSafeUint53(t,"invalid arrayify value");const b=[];for(;t;)b.unshift(t&255),t=parseInt(String(t/256));return b.length===0&&b.push(0),addSlice(new Uint8Array(b))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t)&&(t=t.toHexString()),isHexString(t)){let b=t.substring(2);b.length%2&&(e.hexPad==="left"?b="0x0"+b.substring(2):e.hexPad==="right"?b+="0":logger$h.throwArgumentError("hex data is odd-length","value",t));const w=[];for(let $=0;$<b.length;$+=2)w.push(parseInt(b.substring($,$+2),16));return addSlice(new Uint8Array(w))}return isBytes(t)?addSlice(new Uint8Array(t)):logger$h.throwArgumentError("invalid arrayify value","value",t)}function concat$e(t){const e=t.map($=>arrayify($)),b=e.reduce(($,T)=>$+T.length,0),w=new Uint8Array(b);return e.reduce(($,T)=>(w.set(T,$),$+T.length),0),addSlice(w)}function stripZeros(t){let e=arrayify(t);if(e.length===0)return e;let b=0;for(;b<e.length&&e[b]===0;)b++;return b&&(e=e.slice(b)),e}function zeroPad(t,e){t=arrayify(t),t.length>e&&logger$h.throwArgumentError("value out of range","value",arguments[0]);const b=new Uint8Array(e);return b.set(t,e-t.length),addSlice(b)}function isHexString(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const HexCharacters="0123456789abcdef";function hexlify(t,e){if(e||(e={}),typeof t=="number"){logger$h.checkSafeUint53(t,"invalid hexlify value");let b="";for(;t;)b=HexCharacters[t&15]+b,t=Math.floor(t/16);return b.length?(b.length%2&&(b="0"+b),"0x"+b):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t))return t.toHexString();if(isHexString(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":logger$h.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(isBytes(t)){let b="0x";for(let w=0;w<t.length;w++){let $=t[w];b+=HexCharacters[($&240)>>4]+HexCharacters[$&15]}return b}return logger$h.throwArgumentError("invalid hexlify value","value",t)}function hexDataLength(t){if(typeof t!="string")t=hexlify(t);else if(!isHexString(t)||t.length%2)return null;return(t.length-2)/2}function hexDataSlice(t,e,b){return typeof t!="string"?t=hexlify(t):(!isHexString(t)||t.length%2)&&logger$h.throwArgumentError("invalid hexData","value",t),e=2+2*e,b!=null?"0x"+t.substring(e,2+2*b):"0x"+t.substring(e)}function hexConcat(t){let e="0x";return t.forEach(b=>{e+=hexlify(b).substring(2)}),e}function hexValue(t){const e=hexStripZeros(hexlify(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function hexStripZeros(t){typeof t!="string"&&(t=hexlify(t)),isHexString(t)||logger$h.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function hexZeroPad(t,e){for(typeof t!="string"?t=hexlify(t):isHexString(t)||logger$h.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&logger$h.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function splitSignature(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(isBytesLike(t)){const b=arrayify(t);b.length!==65&&logger$h.throwArgumentError("invalid signature string; must be 65 bytes","signature",t),e.r=hexlify(b.slice(0,32)),e.s=hexlify(b.slice(32,64)),e.v=b[64],e.v<27&&(e.v===0||e.v===1?e.v+=27:logger$h.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(b[32]|=128),e._vs=hexlify(b.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const $=zeroPad(arrayify(e._vs),32);e._vs=hexlify($);const T=$[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=T:e.recoveryParam!==T&&logger$h.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),$[0]&=127;const N=hexlify($);e.s==null?e.s=N:e.s!==N&&logger$h.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?logger$h.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const $=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==$&&logger$h.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!isHexString(e.r)?logger$h.throwArgumentError("signature missing or invalid r","signature",t):e.r=hexZeroPad(e.r,32),e.s==null||!isHexString(e.s)?logger$h.throwArgumentError("signature missing or invalid s","signature",t):e.s=hexZeroPad(e.s,32);const b=arrayify(e.s);b[0]>=128&&logger$h.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(b[0]|=128);const w=hexlify(b);e._vs&&(isHexString(e._vs)||logger$h.throwArgumentError("signature invalid _vs","signature",t),e._vs=hexZeroPad(e._vs,32)),e._vs==null?e._vs=w:e._vs!==w&&logger$h.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e}const version$g="bignumber/5.5.0";var BN$8=BN$9.BN;const logger$g=new Logger(version$g),_constructorGuard$1={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1;class BigNumber$1{constructor(e,b){logger$g.checkNew(new.target,BigNumber$1),e!==_constructorGuard$1&&logger$g.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=b,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){return this._hex[0]==="-"?BigNumber$1.from(this._hex.substring(1)):this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(e){return BigNumber$1.from(e).isZero()&&throwFault("division by zero","div"),toBigNumber(toBN(this).div(toBN(e)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const b=toBN(e);return b.isNeg()&&throwFault("cannot modulo negative values","mod"),toBigNumber(toBN(this).umod(b))}pow(e){const b=toBN(e);return b.isNeg()&&throwFault("cannot raise to negative values","pow"),toBigNumber(toBN(this).pow(b))}and(e){const b=toBN(e);return(this.isNegative()||b.isNeg())&&throwFault("cannot 'and' negative values","and"),toBigNumber(toBN(this).and(b))}or(e){const b=toBN(e);return(this.isNegative()||b.isNeg())&&throwFault("cannot 'or' negative values","or"),toBigNumber(toBN(this).or(b))}xor(e){const b=toBN(e);return(this.isNegative()||b.isNeg())&&throwFault("cannot 'xor' negative values","xor"),toBigNumber(toBN(this).xor(b))}mask(e){return(this.isNegative()||e<0)&&throwFault("cannot mask negative values","mask"),toBigNumber(toBN(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&throwFault("cannot shift negative values","shl"),toBigNumber(toBN(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&throwFault("cannot shift negative values","shr"),toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$g.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$g.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$g.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$g.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof BigNumber$1)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new BigNumber$1(_constructorGuard$1,toHex$3(e)):e.match(/^-?[0-9]+$/)?new BigNumber$1(_constructorGuard$1,toHex$3(new BN$8(e))):logger$g.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&throwFault("underflow","BigNumber.from",e),(e>=MAX_SAFE||e<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",e),BigNumber$1.from(String(e));const b=e;if(typeof b=="bigint")return BigNumber$1.from(b.toString());if(isBytes(b))return BigNumber$1.from(hexlify(b));if(b)if(b.toHexString){const w=b.toHexString();if(typeof w=="string")return BigNumber$1.from(w)}else{let w=b._hex;if(w==null&&b.type==="BigNumber"&&(w=b.hex),typeof w=="string"&&(isHexString(w)||w[0]==="-"&&isHexString(w.substring(1))))return BigNumber$1.from(w)}return logger$g.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function toHex$3(t){if(typeof t!="string")return toHex$3(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&logger$g.throwArgumentError("invalid hex","value",t),t=toHex$3(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function toBigNumber(t){return BigNumber$1.from(toHex$3(t))}function toBN(t){const e=BigNumber$1.from(t).toHexString();return e[0]==="-"?new BN$8("-"+e.substring(3),16):new BN$8(e.substring(2),16)}function throwFault(t,e,b){const w={fault:t,operation:e};return b!=null&&(w.value=b),logger$g.throwError(t,Logger.errors.NUMERIC_FAULT,w)}function _base36To16(t){return new BN$8(t,36).toString(16)}const version$f="properties/5.5.0";var __awaiter$b=globalThis&&globalThis.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};const logger$f=new Logger(version$f);function defineReadOnly(t,e,b){Object.defineProperty(t,e,{enumerable:!0,value:b,writable:!1})}function getStatic(t,e){for(let b=0;b<32;b++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function resolveProperties(t){return __awaiter$b(this,void 0,void 0,function*(){const e=Object.keys(t).map(w=>{const $=t[w];return Promise.resolve($).then(T=>({key:w,value:T}))});return(yield Promise.all(e)).reduce((w,$)=>(w[$.key]=$.value,w),{})})}function checkProperties(t,e){(!t||typeof t!="object")&&logger$f.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(b=>{e[b]||logger$f.throwArgumentError("invalid object key - "+b,"transaction:"+b,t)})}function shallowCopy(t){const e={};for(const b in t)e[b]=t[b];return e}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(t){if(t==null||opaque[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let b=0;b<e.length;b++){let w=null;try{w=t[e[b]]}catch{continue}if(!_isFrozen(w))return!1}return!0}return logger$f.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function _deepCopy(t){if(_isFrozen(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>deepCopy(e)));if(typeof t=="object"){const e={};for(const b in t){const w=t[b];w!==void 0&&defineReadOnly(e,b,deepCopy(w))}return e}return logger$f.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function deepCopy(t){return _deepCopy(t)}class Description{constructor(e){for(const b in e)this[b]=deepCopy(e[b])}}var sha3$2={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",b="finalize already called",w=typeof window=="object",$=w?window:{};$.JS_SHA3_NO_WINDOW&&(w=!1);var T=!w&&typeof self=="object",N=!$.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;N?$=commonjsGlobal:T&&($=self);var C=!$.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,F=!$.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",G="0123456789abcdef".split(""),J=[31,7936,2031616,520093696],Z=[4,1024,262144,67108864],re=[1,256,65536,16777216],ie=[6,1536,393216,100663296],ue=[0,8,16,24],ne=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],ce=[224,256,384,512],ae=[128,256],ye=["hex","buffer","arrayBuffer","array","digest"],$e={"128":168,"256":136};($.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(fe){return Object.prototype.toString.call(fe)==="[object Array]"}),F&&($.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(fe){return typeof fe=="object"&&fe.buffer&&fe.buffer.constructor===ArrayBuffer});for(var _e=function(fe,Oe,Se){return function(Te){return new U(fe,Oe,fe).update(Te)[Se]()}},be=function(fe,Oe,Se){return function(Te,Ae){return new U(fe,Oe,Ae).update(Te)[Se]()}},xe=function(fe,Oe,Se){return function(Te,Ae,le,ke){return R["cshake"+fe].update(Te,Ae,le,ke)[Se]()}},ee=function(fe,Oe,Se){return function(Te,Ae,le,ke){return R["kmac"+fe].update(Te,Ae,le,ke)[Se]()}},he=function(fe,Oe,Se,Te){for(var Ae=0;Ae<ye.length;++Ae){var le=ye[Ae];fe[le]=Oe(Se,Te,le)}return fe},we=function(fe,Oe){var Se=_e(fe,Oe,"hex");return Se.create=function(){return new U(fe,Oe,fe)},Se.update=function(Te){return Se.create().update(Te)},he(Se,_e,fe,Oe)},Ne=function(fe,Oe){var Se=be(fe,Oe,"hex");return Se.create=function(Te){return new U(fe,Oe,Te)},Se.update=function(Te,Ae){return Se.create(Ae).update(Te)},he(Se,be,fe,Oe)},pe=function(fe,Oe){var Se=$e[fe],Te=xe(fe,Oe,"hex");return Te.create=function(Ae,le,ke){return!le&&!ke?R["shake"+fe].create(Ae):new U(fe,Oe,Ae).bytepad([le,ke],Se)},Te.update=function(Ae,le,ke,je){return Te.create(le,ke,je).update(Ae)},he(Te,xe,fe,Oe)},te=function(fe,Oe){var Se=$e[fe],Te=ee(fe,Oe,"hex");return Te.create=function(Ae,le,ke){return new oe(fe,Oe,le).bytepad(["KMAC",ke],Se).bytepad([Ae],Se)},Te.update=function(Ae,le,ke,je){return Te.create(Ae,ke,je).update(le)},he(Te,ee,fe,Oe)},Y=[{name:"keccak",padding:re,bits:ce,createMethod:we},{name:"sha3",padding:ie,bits:ce,createMethod:we},{name:"shake",padding:J,bits:ae,createMethod:Ne},{name:"cshake",padding:Z,bits:ae,createMethod:pe},{name:"kmac",padding:Z,bits:ae,createMethod:te}],R={},B=[],V=0;V<Y.length;++V)for(var Q=Y[V],H=Q.bits,j=0;j<H.length;++j){var L=Q.name+"_"+H[j];if(B.push(L),R[L]=Q.createMethod(H[j],Q.padding),Q.name!=="sha3"){var q=Q.name+H[j];B.push(q),R[q]=R[L]}}function U(fe,Oe,Se){this.blocks=[],this.s=[],this.padding=Oe,this.outputBits=Se,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(fe<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Se>>5,this.extraBytes=(Se&31)>>3;for(var Te=0;Te<50;++Te)this.s[Te]=0}U.prototype.update=function(fe){if(this.finalized)throw new Error(b);var Oe,Se=typeof fe;if(Se!=="string"){if(Se==="object"){if(fe===null)throw new Error(e);if(F&&fe.constructor===ArrayBuffer)fe=new Uint8Array(fe);else if(!Array.isArray(fe)&&(!F||!ArrayBuffer.isView(fe)))throw new Error(e)}else throw new Error(e);Oe=!0}for(var Te=this.blocks,Ae=this.byteCount,le=fe.length,ke=this.blockCount,je=0,Ve=this.s,qe,Ze;je<le;){if(this.reset)for(this.reset=!1,Te[0]=this.block,qe=1;qe<ke+1;++qe)Te[qe]=0;if(Oe)for(qe=this.start;je<le&&qe<Ae;++je)Te[qe>>2]|=fe[je]<<ue[qe++&3];else for(qe=this.start;je<le&&qe<Ae;++je)Ze=fe.charCodeAt(je),Ze<128?Te[qe>>2]|=Ze<<ue[qe++&3]:Ze<2048?(Te[qe>>2]|=(192|Ze>>6)<<ue[qe++&3],Te[qe>>2]|=(128|Ze&63)<<ue[qe++&3]):Ze<55296||Ze>=57344?(Te[qe>>2]|=(224|Ze>>12)<<ue[qe++&3],Te[qe>>2]|=(128|Ze>>6&63)<<ue[qe++&3],Te[qe>>2]|=(128|Ze&63)<<ue[qe++&3]):(Ze=65536+((Ze&1023)<<10|fe.charCodeAt(++je)&1023),Te[qe>>2]|=(240|Ze>>18)<<ue[qe++&3],Te[qe>>2]|=(128|Ze>>12&63)<<ue[qe++&3],Te[qe>>2]|=(128|Ze>>6&63)<<ue[qe++&3],Te[qe>>2]|=(128|Ze&63)<<ue[qe++&3]);if(this.lastByteIndex=qe,qe>=Ae){for(this.start=qe-Ae,this.block=Te[ke],qe=0;qe<ke;++qe)Ve[qe]^=Te[qe];ve(Ve),this.reset=!0}else this.start=qe}return this},U.prototype.encode=function(fe,Oe){var Se=fe&255,Te=1,Ae=[Se];for(fe=fe>>8,Se=fe&255;Se>0;)Ae.unshift(Se),fe=fe>>8,Se=fe&255,++Te;return Oe?Ae.push(Te):Ae.unshift(Te),this.update(Ae),Ae.length},U.prototype.encodeString=function(fe){var Oe,Se=typeof fe;if(Se!=="string"){if(Se==="object"){if(fe===null)throw new Error(e);if(F&&fe.constructor===ArrayBuffer)fe=new Uint8Array(fe);else if(!Array.isArray(fe)&&(!F||!ArrayBuffer.isView(fe)))throw new Error(e)}else throw new Error(e);Oe=!0}var Te=0,Ae=fe.length;if(Oe)Te=Ae;else for(var le=0;le<fe.length;++le){var ke=fe.charCodeAt(le);ke<128?Te+=1:ke<2048?Te+=2:ke<55296||ke>=57344?Te+=3:(ke=65536+((ke&1023)<<10|fe.charCodeAt(++le)&1023),Te+=4)}return Te+=this.encode(Te*8),this.update(fe),Te},U.prototype.bytepad=function(fe,Oe){for(var Se=this.encode(Oe),Te=0;Te<fe.length;++Te)Se+=this.encodeString(fe[Te]);var Ae=Oe-Se%Oe,le=[];return le.length=Ae,this.update(le),this},U.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var fe=this.blocks,Oe=this.lastByteIndex,Se=this.blockCount,Te=this.s;if(fe[Oe>>2]|=this.padding[Oe&3],this.lastByteIndex===this.byteCount)for(fe[0]=fe[Se],Oe=1;Oe<Se+1;++Oe)fe[Oe]=0;for(fe[Se-1]|=2147483648,Oe=0;Oe<Se;++Oe)Te[Oe]^=fe[Oe];ve(Te)}},U.prototype.toString=U.prototype.hex=function(){this.finalize();for(var fe=this.blockCount,Oe=this.s,Se=this.outputBlocks,Te=this.extraBytes,Ae=0,le=0,ke="",je;le<Se;){for(Ae=0;Ae<fe&&le<Se;++Ae,++le)je=Oe[Ae],ke+=G[je>>4&15]+G[je&15]+G[je>>12&15]+G[je>>8&15]+G[je>>20&15]+G[je>>16&15]+G[je>>28&15]+G[je>>24&15];le%fe==0&&(ve(Oe),Ae=0)}return Te&&(je=Oe[Ae],ke+=G[je>>4&15]+G[je&15],Te>1&&(ke+=G[je>>12&15]+G[je>>8&15]),Te>2&&(ke+=G[je>>20&15]+G[je>>16&15])),ke},U.prototype.arrayBuffer=function(){this.finalize();var fe=this.blockCount,Oe=this.s,Se=this.outputBlocks,Te=this.extraBytes,Ae=0,le=0,ke=this.outputBits>>3,je;Te?je=new ArrayBuffer(Se+1<<2):je=new ArrayBuffer(ke);for(var Ve=new Uint32Array(je);le<Se;){for(Ae=0;Ae<fe&&le<Se;++Ae,++le)Ve[le]=Oe[Ae];le%fe==0&&ve(Oe)}return Te&&(Ve[Ae]=Oe[Ae],je=je.slice(0,ke)),je},U.prototype.buffer=U.prototype.arrayBuffer,U.prototype.digest=U.prototype.array=function(){this.finalize();for(var fe=this.blockCount,Oe=this.s,Se=this.outputBlocks,Te=this.extraBytes,Ae=0,le=0,ke=[],je,Ve;le<Se;){for(Ae=0;Ae<fe&&le<Se;++Ae,++le)je=le<<2,Ve=Oe[Ae],ke[je]=Ve&255,ke[je+1]=Ve>>8&255,ke[je+2]=Ve>>16&255,ke[je+3]=Ve>>24&255;le%fe==0&&ve(Oe)}return Te&&(je=le<<2,Ve=Oe[Ae],ke[je]=Ve&255,Te>1&&(ke[je+1]=Ve>>8&255),Te>2&&(ke[je+2]=Ve>>16&255)),ke};function oe(fe,Oe,Se){U.call(this,fe,Oe,Se)}oe.prototype=new U,oe.prototype.finalize=function(){return this.encode(this.outputBits,!0),U.prototype.finalize.call(this)};var ve=function(fe){var Oe,Se,Te,Ae,le,ke,je,Ve,qe,Ze,Pe,de,me,Re,Fe,Ue,ze,Qe,Ye,ht,at,Ke,kt,yt,ct,Bt,Et,et,Ft,At,Mt,Xt,Dt,lt,Yt,jt,Pt,Wt,Ot,dt,zt,Ct,wt,Kt,mt,pt,Jt,ge,Ee,Me,se,Ie,De,Ge,He,rt,it,tt,Vt,St,Lt,_t,Ut;for(Te=0;Te<48;Te+=2)Ae=fe[0]^fe[10]^fe[20]^fe[30]^fe[40],le=fe[1]^fe[11]^fe[21]^fe[31]^fe[41],ke=fe[2]^fe[12]^fe[22]^fe[32]^fe[42],je=fe[3]^fe[13]^fe[23]^fe[33]^fe[43],Ve=fe[4]^fe[14]^fe[24]^fe[34]^fe[44],qe=fe[5]^fe[15]^fe[25]^fe[35]^fe[45],Ze=fe[6]^fe[16]^fe[26]^fe[36]^fe[46],Pe=fe[7]^fe[17]^fe[27]^fe[37]^fe[47],de=fe[8]^fe[18]^fe[28]^fe[38]^fe[48],me=fe[9]^fe[19]^fe[29]^fe[39]^fe[49],Oe=de^(ke<<1|je>>>31),Se=me^(je<<1|ke>>>31),fe[0]^=Oe,fe[1]^=Se,fe[10]^=Oe,fe[11]^=Se,fe[20]^=Oe,fe[21]^=Se,fe[30]^=Oe,fe[31]^=Se,fe[40]^=Oe,fe[41]^=Se,Oe=Ae^(Ve<<1|qe>>>31),Se=le^(qe<<1|Ve>>>31),fe[2]^=Oe,fe[3]^=Se,fe[12]^=Oe,fe[13]^=Se,fe[22]^=Oe,fe[23]^=Se,fe[32]^=Oe,fe[33]^=Se,fe[42]^=Oe,fe[43]^=Se,Oe=ke^(Ze<<1|Pe>>>31),Se=je^(Pe<<1|Ze>>>31),fe[4]^=Oe,fe[5]^=Se,fe[14]^=Oe,fe[15]^=Se,fe[24]^=Oe,fe[25]^=Se,fe[34]^=Oe,fe[35]^=Se,fe[44]^=Oe,fe[45]^=Se,Oe=Ve^(de<<1|me>>>31),Se=qe^(me<<1|de>>>31),fe[6]^=Oe,fe[7]^=Se,fe[16]^=Oe,fe[17]^=Se,fe[26]^=Oe,fe[27]^=Se,fe[36]^=Oe,fe[37]^=Se,fe[46]^=Oe,fe[47]^=Se,Oe=Ze^(Ae<<1|le>>>31),Se=Pe^(le<<1|Ae>>>31),fe[8]^=Oe,fe[9]^=Se,fe[18]^=Oe,fe[19]^=Se,fe[28]^=Oe,fe[29]^=Se,fe[38]^=Oe,fe[39]^=Se,fe[48]^=Oe,fe[49]^=Se,Re=fe[0],Fe=fe[1],pt=fe[11]<<4|fe[10]>>>28,Jt=fe[10]<<4|fe[11]>>>28,et=fe[20]<<3|fe[21]>>>29,Ft=fe[21]<<3|fe[20]>>>29,St=fe[31]<<9|fe[30]>>>23,Lt=fe[30]<<9|fe[31]>>>23,Ct=fe[40]<<18|fe[41]>>>14,wt=fe[41]<<18|fe[40]>>>14,lt=fe[2]<<1|fe[3]>>>31,Yt=fe[3]<<1|fe[2]>>>31,Ue=fe[13]<<12|fe[12]>>>20,ze=fe[12]<<12|fe[13]>>>20,ge=fe[22]<<10|fe[23]>>>22,Ee=fe[23]<<10|fe[22]>>>22,At=fe[33]<<13|fe[32]>>>19,Mt=fe[32]<<13|fe[33]>>>19,_t=fe[42]<<2|fe[43]>>>30,Ut=fe[43]<<2|fe[42]>>>30,Ge=fe[5]<<30|fe[4]>>>2,He=fe[4]<<30|fe[5]>>>2,jt=fe[14]<<6|fe[15]>>>26,Pt=fe[15]<<6|fe[14]>>>26,Qe=fe[25]<<11|fe[24]>>>21,Ye=fe[24]<<11|fe[25]>>>21,Me=fe[34]<<15|fe[35]>>>17,se=fe[35]<<15|fe[34]>>>17,Xt=fe[45]<<29|fe[44]>>>3,Dt=fe[44]<<29|fe[45]>>>3,yt=fe[6]<<28|fe[7]>>>4,ct=fe[7]<<28|fe[6]>>>4,rt=fe[17]<<23|fe[16]>>>9,it=fe[16]<<23|fe[17]>>>9,Wt=fe[26]<<25|fe[27]>>>7,Ot=fe[27]<<25|fe[26]>>>7,ht=fe[36]<<21|fe[37]>>>11,at=fe[37]<<21|fe[36]>>>11,Ie=fe[47]<<24|fe[46]>>>8,De=fe[46]<<24|fe[47]>>>8,Kt=fe[8]<<27|fe[9]>>>5,mt=fe[9]<<27|fe[8]>>>5,Bt=fe[18]<<20|fe[19]>>>12,Et=fe[19]<<20|fe[18]>>>12,tt=fe[29]<<7|fe[28]>>>25,Vt=fe[28]<<7|fe[29]>>>25,dt=fe[38]<<8|fe[39]>>>24,zt=fe[39]<<8|fe[38]>>>24,Ke=fe[48]<<14|fe[49]>>>18,kt=fe[49]<<14|fe[48]>>>18,fe[0]=Re^~Ue&Qe,fe[1]=Fe^~ze&Ye,fe[10]=yt^~Bt&et,fe[11]=ct^~Et&Ft,fe[20]=lt^~jt&Wt,fe[21]=Yt^~Pt&Ot,fe[30]=Kt^~pt&ge,fe[31]=mt^~Jt&Ee,fe[40]=Ge^~rt&tt,fe[41]=He^~it&Vt,fe[2]=Ue^~Qe&ht,fe[3]=ze^~Ye&at,fe[12]=Bt^~et&At,fe[13]=Et^~Ft&Mt,fe[22]=jt^~Wt&dt,fe[23]=Pt^~Ot&zt,fe[32]=pt^~ge&Me,fe[33]=Jt^~Ee&se,fe[42]=rt^~tt&St,fe[43]=it^~Vt&Lt,fe[4]=Qe^~ht&Ke,fe[5]=Ye^~at&kt,fe[14]=et^~At&Xt,fe[15]=Ft^~Mt&Dt,fe[24]=Wt^~dt&Ct,fe[25]=Ot^~zt&wt,fe[34]=ge^~Me&Ie,fe[35]=Ee^~se&De,fe[44]=tt^~St&_t,fe[45]=Vt^~Lt&Ut,fe[6]=ht^~Ke&Re,fe[7]=at^~kt&Fe,fe[16]=At^~Xt&yt,fe[17]=Mt^~Dt&ct,fe[26]=dt^~Ct&lt,fe[27]=zt^~wt&Yt,fe[36]=Me^~Ie&Kt,fe[37]=se^~De&mt,fe[46]=St^~_t&Ge,fe[47]=Lt^~Ut&He,fe[8]=Ke^~Re&Ue,fe[9]=kt^~Fe&ze,fe[18]=Xt^~yt&Bt,fe[19]=Dt^~ct&Et,fe[28]=Ct^~lt&jt,fe[29]=wt^~Yt&Pt,fe[38]=Ie^~Kt&pt,fe[39]=De^~mt&Jt,fe[48]=_t^~Ge&rt,fe[49]=Ut^~He&it,fe[0]^=ne[Te],fe[1]^=ne[Te+1]};if(C)t.exports=R;else for(V=0;V<B.length;++V)$[B[V]]=R[B[V]]})()})(sha3$2);var sha3$1=sha3$2.exports;function keccak256(t){return"0x"+sha3$1.keccak_256(arrayify(t))}const version$e="rlp/5.5.0",logger$e=new Logger(version$e);function arrayifyInteger(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function unarrayifyInteger(t,e,b){let w=0;for(let $=0;$<b;$++)w=w*256+t[e+$];return w}function _encode(t){if(Array.isArray(t)){let w=[];if(t.forEach(function(T){w=w.concat(_encode(T))}),w.length<=55)return w.unshift(192+w.length),w;const $=arrayifyInteger(w.length);return $.unshift(247+$.length),$.concat(w)}isBytesLike(t)||logger$e.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(arrayify(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const b=arrayifyInteger(e.length);return b.unshift(183+b.length),b.concat(e)}function encode$a(t){return hexlify(_encode(t))}function _decodeChildren(t,e,b,w){const $=[];for(;b<e+1+w;){const T=_decode(t,b);$.push(T.result),b+=T.consumed,b>e+1+w&&logger$e.throwError("child data too short",Logger.errors.BUFFER_OVERRUN,{})}return{consumed:1+w,result:$}}function _decode(t,e){if(t.length===0&&logger$e.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{}),t[e]>=248){const b=t[e]-247;e+1+b>t.length&&logger$e.throwError("data short segment too short",Logger.errors.BUFFER_OVERRUN,{});const w=unarrayifyInteger(t,e+1,b);return e+1+b+w>t.length&&logger$e.throwError("data long segment too short",Logger.errors.BUFFER_OVERRUN,{}),_decodeChildren(t,e,e+1+b,b+w)}else if(t[e]>=192){const b=t[e]-192;return e+1+b>t.length&&logger$e.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{}),_decodeChildren(t,e,e+1,b)}else if(t[e]>=184){const b=t[e]-183;e+1+b>t.length&&logger$e.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{});const w=unarrayifyInteger(t,e+1,b);e+1+b+w>t.length&&logger$e.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{});const $=hexlify(t.slice(e+1+b,e+1+b+w));return{consumed:1+b+w,result:$}}else if(t[e]>=128){const b=t[e]-128;e+1+b>t.length&&logger$e.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{});const w=hexlify(t.slice(e+1,e+1+b));return{consumed:1+b,result:w}}return{consumed:1,result:hexlify(t[e])}}function decode$c(t){const e=arrayify(t),b=_decode(e,0);return b.consumed!==e.length&&logger$e.throwArgumentError("invalid rlp data","data",t),b.result}const version$d="address/5.5.0",logger$d=new Logger(version$d);function getChecksumAddress(t){isHexString(t,20)||logger$d.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),b=new Uint8Array(40);for(let $=0;$<40;$++)b[$]=e[$].charCodeAt(0);const w=arrayify(keccak256(b));for(let $=0;$<40;$+=2)w[$>>1]>>4>=8&&(e[$]=e[$].toUpperCase()),(w[$>>1]&15)>=8&&(e[$+1]=e[$+1].toUpperCase());return"0x"+e.join("")}const MAX_SAFE_INTEGER$1=9007199254740991;function log10(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const ibanLookup={};for(let t=0;t<10;t++)ibanLookup[String(t)]=String(t);for(let t=0;t<26;t++)ibanLookup[String.fromCharCode(65+t)]=String(10+t);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER$1));function ibanChecksum(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(w=>ibanLookup[w]).join("");for(;e.length>=safeDigits;){let w=e.substring(0,safeDigits);e=parseInt(w,10)%97+e.substring(w.length)}let b=String(98-parseInt(e,10)%97);for(;b.length<2;)b="0"+b;return b}function getAddress(t){let e=null;if(typeof t!="string"&&logger$d.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=getChecksumAddress(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&logger$d.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==ibanChecksum(t)&&logger$d.throwArgumentError("bad icap checksum","address",t),e=_base36To16(t.substring(4));e.length<40;)e="0"+e;e=getChecksumAddress("0x"+e)}else logger$d.throwArgumentError("invalid address","address",t);return e}function getContractAddress(t){let e=null;try{e=getAddress(t.from)}catch{logger$d.throwArgumentError("missing from address","transaction",t)}const b=stripZeros(arrayify(BigNumber$1.from(t.nonce).toHexString()));return getAddress(hexDataSlice(keccak256(encode$a([e,b])),12))}const AddressZero="0x0000000000000000000000000000000000000000",Zero$1=BigNumber$1.from(0),HashZero="0x0000000000000000000000000000000000000000000000000000000000000000",version$c="strings/5.5.0",logger$c=new Logger(version$c);var UnicodeNormalizationForm;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function errorFunc(t,e,b,w,$){return logger$c.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",b)}function ignoreFunc(t,e,b,w,$){if(t===Utf8ErrorReason.BAD_PREFIX||t===Utf8ErrorReason.UNEXPECTED_CONTINUE){let T=0;for(let N=e+1;N<b.length&&b[N]>>6==2;N++)T++;return T}return t===Utf8ErrorReason.OVERRUN?b.length-e-1:0}function replaceFunc(t,e,b,w,$){return t===Utf8ErrorReason.OVERLONG?(w.push($),0):(w.push(65533),ignoreFunc(t,e,b))}const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(t,e){e==null&&(e=Utf8ErrorFuncs.error),t=arrayify(t);const b=[];let w=0;for(;w<t.length;){const $=t[w++];if($>>7==0){b.push($);continue}let T=null,N=null;if(($&224)==192)T=1,N=127;else if(($&240)==224)T=2,N=2047;else if(($&248)==240)T=3,N=65535;else{($&192)==128?w+=e(Utf8ErrorReason.UNEXPECTED_CONTINUE,w-1,t,b):w+=e(Utf8ErrorReason.BAD_PREFIX,w-1,t,b);continue}if(w-1+T>=t.length){w+=e(Utf8ErrorReason.OVERRUN,w-1,t,b);continue}let C=$&(1<<8-T-1)-1;for(let F=0;F<T;F++){let G=t[w];if((G&192)!=128){w+=e(Utf8ErrorReason.MISSING_CONTINUE,w,t,b),C=null;break}C=C<<6|G&63,w++}if(C!==null){if(C>1114111){w+=e(Utf8ErrorReason.OUT_OF_RANGE,w-1-T,t,b,C);continue}if(C>=55296&&C<=57343){w+=e(Utf8ErrorReason.UTF16_SURROGATE,w-1-T,t,b,C);continue}if(C<=N){w+=e(Utf8ErrorReason.OVERLONG,w-1-T,t,b,C);continue}b.push(C)}}return b}function toUtf8Bytes(t,e=UnicodeNormalizationForm.current){e!=UnicodeNormalizationForm.current&&(logger$c.checkNormalize(),t=t.normalize(e));let b=[];for(let w=0;w<t.length;w++){const $=t.charCodeAt(w);if($<128)b.push($);else if($<2048)b.push($>>6|192),b.push($&63|128);else if(($&64512)==55296){w++;const T=t.charCodeAt(w);if(w>=t.length||(T&64512)!=56320)throw new Error("invalid utf-8 string");const N=65536+(($&1023)<<10)+(T&1023);b.push(N>>18|240),b.push(N>>12&63|128),b.push(N>>6&63|128),b.push(N&63|128)}else b.push($>>12|224),b.push($>>6&63|128),b.push($&63|128)}return arrayify(b)}function _toUtf8String(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function toUtf8String(t,e){return _toUtf8String(getUtf8CodePoints(t,e))}function toUtf8CodePoints(t,e=UnicodeNormalizationForm.current){return getUtf8CodePoints(toUtf8Bytes(t,e))}function bytes2(t){if(t.length%4!=0)throw new Error("bad data");let e=[];for(let b=0;b<t.length;b+=4)e.push(parseInt(t.substring(b,b+4),16));return e}function createTable(t,e){e||(e=function($){return[parseInt($,16)]});let b=0,w={};return t.split(",").forEach($=>{let T=$.split(":");b+=parseInt(T[0],16),w[b]=e(T[1])}),w}function createRangeTable(t){let e=0;return t.split(",").map(b=>{let w=b.split("-");w.length===1?w[1]="0":w[1]===""&&(w[1]="1");let $=e+parseInt(w[0],16);return e=parseInt(w[1],16),{l:$,h:e}})}function matchMap(t,e){let b=0;for(let w=0;w<e.length;w++){let $=e[w];if(b+=$.l,t>=b&&t<=b+$.h&&(t-b)%($.d||1)==0){if($.e&&$.e.indexOf(t-b)!==-1)continue;return $}}return null}const Table_A_1_ranges=createRangeTable("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Table_B_1_flags="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),Table_B_2_ranges=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Table_B_2_lut_abs=createTable("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Table_B_2_lut_rel=createTable("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Table_B_2_complex=createTable("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",bytes2),Table_C_ranges=createRangeTable("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function flatten$1(t){return t.reduce((e,b)=>(b.forEach(w=>{e.push(w)}),e),[])}function _nameprepTableA1(t){return!!matchMap(t,Table_A_1_ranges)}function _nameprepTableB2(t){let e=matchMap(t,Table_B_2_ranges);if(e)return[t+e.s];let b=Table_B_2_lut_abs[t];if(b)return b;let w=Table_B_2_lut_rel[t];if(w)return[t+w[0]];let $=Table_B_2_complex[t];return $||null}function _nameprepTableC(t){return!!matchMap(t,Table_C_ranges)}function nameprep(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=toUtf8CodePoints(t);e=flatten$1(e.map(w=>{if(Table_B_1_flags.indexOf(w)>=0)return[];if(w>=65024&&w<=65039)return[];let $=_nameprepTableB2(w);return $||[w]})),e=toUtf8CodePoints(_toUtf8String(e),UnicodeNormalizationForm.NFKC),e.forEach(w=>{if(_nameprepTableC(w))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(w=>{if(_nameprepTableA1(w))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let b=_toUtf8String(e);if(b.substring(0,1)==="-"||b.substring(2,4)==="--"||b.substring(b.length-1)==="-")throw new Error("invalid hyphen");if(b.length>63)throw new Error("too long");return b}function id(t){return keccak256(toUtf8Bytes(t))}const version$b="hash/5.5.0",logger$b=new Logger(version$b),Zeros=new Uint8Array(32);Zeros.fill(0);const Partition=new RegExp("^((.*)\\.)?([^.]+)$");function namehash(t){typeof t!="string"&&logger$b.throwArgumentError("invalid ENS name; not a string","name",t);let e=t,b=Zeros;for(;e.length;){const w=e.match(Partition);(w==null||w[2]==="")&&logger$b.throwArgumentError("invalid ENS address; missing component","name",t);const $=toUtf8Bytes(nameprep(w[3]));b=keccak256(concat$e([b,keccak256($)])),e=w[2]||""}return hexlify(b)}var __awaiter$a=globalThis&&globalThis.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};const logger$a=new Logger(version$b),padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber$1.from(-1),Zero=BigNumber$1.from(0),One=BigNumber$1.from(1),MaxUint256=BigNumber$1.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(t){const e=arrayify(t),b=e.length%32;return b?hexConcat([e,padding.slice(b)]):hexlify(e)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(t){return function(e){return typeof e!="string"&&logger$a.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(t){try{return BigNumber$1.from(t).toString()}catch{}return logger$a.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return getAddress(t).toLowerCase()}catch{}return logger$a.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=arrayify(t);if(e.length!==32)throw new Error("bad length");return hexlify(e)}catch{}return logger$a.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function getBaseEncoder(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const b=e[1]==="",w=parseInt(e[2]||"256");(w%8!=0||w>256||e[2]&&e[2]!==String(w))&&logger$a.throwArgumentError("invalid numeric width","type",t);const $=MaxUint256.mask(b?w-1:w),T=b?$.add(One).mul(NegativeOne):Zero;return function(N){const C=BigNumber$1.from(N);return(C.lt(T)||C.gt($))&&logger$a.throwArgumentError(`value out-of-bounds for ${t}`,"value",N),hexZeroPad(C.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const b=parseInt(e[1]);return(b===0||b>32||e[1]!==String(b))&&logger$a.throwArgumentError("invalid bytes width","type",t),function(w){return arrayify(w).length!==b&&logger$a.throwArgumentError(`invalid length for ${t}`,"value",w),hexPadRight(w)}}}switch(t){case"address":return function(e){return hexZeroPad(getAddress(e),32)};case"bool":return function(e){return e?hexTrue:hexFalse};case"bytes":return function(e){return keccak256(e)};case"string":return function(e){return id(e)}}return null}function encodeType(t,e){return`${t}(${e.map(({name:b,type:w})=>w+" "+b).join(",")})`}class TypedDataEncoder{constructor(e){defineReadOnly(this,"types",Object.freeze(deepCopy(e))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const b={},w={},$={};Object.keys(e).forEach(C=>{b[C]={},w[C]=[],$[C]={}});for(const C in e){const F={};e[C].forEach(G=>{F[G.name]&&logger$a.throwArgumentError(`duplicate variable name ${JSON.stringify(G.name)} in ${JSON.stringify(C)}`,"types",e),F[G.name]=!0;const J=G.type.match(/^([^\x5b]*)(\x5b|$)/)[1];J===C&&logger$a.throwArgumentError(`circular type reference to ${JSON.stringify(J)}`,"types",e),!getBaseEncoder(J)&&(w[J]||logger$a.throwArgumentError(`unknown type ${JSON.stringify(J)}`,"types",e),w[J].push(C),b[C][J]=!0)})}const T=Object.keys(w).filter(C=>w[C].length===0);T.length===0?logger$a.throwArgumentError("missing primary type","types",e):T.length>1&&logger$a.throwArgumentError(`ambiguous primary types or unused types: ${T.map(C=>JSON.stringify(C)).join(", ")}`,"types",e),defineReadOnly(this,"primaryType",T[0]);function N(C,F){F[C]&&logger$a.throwArgumentError(`circular type reference to ${JSON.stringify(C)}`,"types",e),F[C]=!0,Object.keys(b[C]).forEach(G=>{!w[G]||(N(G,F),Object.keys(F).forEach(J=>{$[J][G]=!0}))}),delete F[C]}N(this.primaryType,{});for(const C in $){const F=Object.keys($[C]);F.sort(),this._types[C]=encodeType(C,e[C])+F.map(G=>encodeType(G,e[G])).join("")}}getEncoder(e){let b=this._encoderCache[e];return b||(b=this._encoderCache[e]=this._getEncoder(e)),b}_getEncoder(e){{const $=getBaseEncoder(e);if($)return $}const b=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(b){const $=b[1],T=this.getEncoder($),N=parseInt(b[3]);return C=>{N>=0&&C.length!==N&&logger$a.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",C);let F=C.map(T);return this._types[$]&&(F=F.map(keccak256)),keccak256(hexConcat(F))}}const w=this.types[e];if(w){const $=id(this._types[e]);return T=>{const N=w.map(({name:C,type:F})=>{const G=this.getEncoder(F)(T[C]);return this._types[F]?keccak256(G):G});return N.unshift($),hexConcat(N)}}return logger$a.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const b=this._types[e];return b||logger$a.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),b}encodeData(e,b){return this.getEncoder(e)(b)}hashStruct(e,b){return keccak256(this.encodeData(e,b))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,b,w){if(getBaseEncoder(e))return w(e,b);const $=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if($){const N=$[1],C=parseInt($[3]);return C>=0&&b.length!==C&&logger$a.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",b),b.map(F=>this._visit(N,F,w))}const T=this.types[e];return T?T.reduce((N,{name:C,type:F})=>(N[C]=this._visit(F,b[C],w),N),{}):logger$a.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,b){return this._visit(this.primaryType,e,b)}static from(e){return new TypedDataEncoder(e)}static getPrimaryType(e){return TypedDataEncoder.from(e).primaryType}static hashStruct(e,b,w){return TypedDataEncoder.from(b).hashStruct(e,w)}static hashDomain(e){const b=[];for(const w in e){const $=domainFieldTypes[w];$||logger$a.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(w)}`,"domain",e),b.push({name:w,type:$})}return b.sort((w,$)=>domainFieldNames.indexOf(w.name)-domainFieldNames.indexOf($.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:b},e)}static encode(e,b,w){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(e),TypedDataEncoder.from(b).hash(w)])}static hash(e,b,w){return keccak256(TypedDataEncoder.encode(e,b,w))}static resolveNames(e,b,w,$){return __awaiter$a(this,void 0,void 0,function*(){e=shallowCopy(e);const T={};e.verifyingContract&&!isHexString(e.verifyingContract,20)&&(T[e.verifyingContract]="0x");const N=TypedDataEncoder.from(b);N.visit(w,(C,F)=>(C==="address"&&!isHexString(F,20)&&(T[F]="0x"),F));for(const C in T)T[C]=yield $(C);return e.verifyingContract&&T[e.verifyingContract]&&(e.verifyingContract=T[e.verifyingContract]),w=N.visit(w,(C,F)=>C==="address"&&T[F]?T[F]:F),{domain:e,value:w}})}static getPayload(e,b,w){TypedDataEncoder.hashDomain(e);const $={},T=[];domainFieldNames.forEach(F=>{const G=e[F];G!=null&&($[F]=domainChecks[F](G),T.push({name:F,type:domainFieldTypes[F]}))});const N=TypedDataEncoder.from(b),C=shallowCopy(b);return C.EIP712Domain?logger$a.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",b):C.EIP712Domain=T,N.encode(w),{types:C,domain:$,primaryType:N.primaryType,message:N.visit(w,(F,G)=>{if(F.match(/^bytes(\d*)/))return hexlify(arrayify(G));if(F.match(/^u?int/))return BigNumber$1.from(G).toString();switch(F){case"address":return G.toLowerCase();case"bool":return!!G;case"string":return typeof G!="string"&&logger$a.throwArgumentError("invalid string","value",G),G}return logger$a.throwArgumentError("unsupported type","type",F)})}}}const version$a="abstract-provider/5.5.1";var __awaiter$9=globalThis&&globalThis.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};const logger$9=new Logger(version$a);class ForkEvent extends Description{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Provider{constructor(){logger$9.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$9(this,void 0,void 0,function*(){const{block:e,gasPrice:b}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(T=>null)});let w=null,$=null;return e&&e.baseFeePerGas&&($=BigNumber$1.from("2500000000"),w=e.baseFeePerGas.mul(2).add($)),{maxFeePerGas:w,maxPriorityFeePerGas:$,gasPrice:b}})}addListener(e,b){return this.on(e,b)}removeListener(e,b){return this.off(e,b)}static isProvider(e){return!!(e&&e._isProvider)}}const version$9="abstract-signer/5.5.0";var __awaiter$8=globalThis&&globalThis.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};const logger$8=new Logger(version$9),allowedTransactionKeys$1=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer$1{constructor(){logger$8.checkAbstract(new.target,Signer$1),defineReadOnly(this,"_isSigner",!0)}getBalance(e){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return __awaiter$8(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const b=yield resolveProperties(this.checkTransaction(e));return yield this.provider.estimateGas(b)})}call(e,b){return __awaiter$8(this,void 0,void 0,function*(){this._checkProvider("call");const w=yield resolveProperties(this.checkTransaction(e));return yield this.provider.call(w,b)})}sendTransaction(e){return __awaiter$8(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const b=yield this.populateTransaction(e),w=yield this.signTransaction(b);return yield this.provider.sendTransaction(w)})}getChainId(){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const w in e)allowedTransactionKeys$1.indexOf(w)===-1&&logger$8.throwArgumentError("invalid transaction key: "+w,"transaction",e);const b=shallowCopy(e);return b.from==null?b.from=this.getAddress():b.from=Promise.all([Promise.resolve(b.from),this.getAddress()]).then(w=>(w[0].toLowerCase()!==w[1].toLowerCase()&&logger$8.throwArgumentError("from address mismatch","transaction",e),w[0])),b}populateTransaction(e){return __awaiter$8(this,void 0,void 0,function*(){const b=yield resolveProperties(this.checkTransaction(e));b.to!=null&&(b.to=Promise.resolve(b.to).then($=>__awaiter$8(this,void 0,void 0,function*(){if($==null)return null;const T=yield this.resolveName($);return T==null&&logger$8.throwArgumentError("provided ENS name resolves to null","tx.to",$),T})),b.to.catch($=>{}));const w=b.maxFeePerGas!=null||b.maxPriorityFeePerGas!=null;if(b.gasPrice!=null&&(b.type===2||w)?logger$8.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(b.type===0||b.type===1)&&w&&logger$8.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(b.type===2||b.type==null)&&b.maxFeePerGas!=null&&b.maxPriorityFeePerGas!=null)b.type=2;else if(b.type===0||b.type===1)b.gasPrice==null&&(b.gasPrice=this.getGasPrice());else{const $=yield this.getFeeData();if(b.type==null)if($.maxFeePerGas!=null&&$.maxPriorityFeePerGas!=null)if(b.type=2,b.gasPrice!=null){const T=b.gasPrice;delete b.gasPrice,b.maxFeePerGas=T,b.maxPriorityFeePerGas=T}else b.maxFeePerGas==null&&(b.maxFeePerGas=$.maxFeePerGas),b.maxPriorityFeePerGas==null&&(b.maxPriorityFeePerGas=$.maxPriorityFeePerGas);else $.gasPrice!=null?(w&&logger$8.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),b.gasPrice==null&&(b.gasPrice=$.gasPrice),b.type=0):logger$8.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else b.type===2&&(b.maxFeePerGas==null&&(b.maxFeePerGas=$.maxFeePerGas),b.maxPriorityFeePerGas==null&&(b.maxPriorityFeePerGas=$.maxPriorityFeePerGas))}return b.nonce==null&&(b.nonce=this.getTransactionCount("pending")),b.gasLimit==null&&(b.gasLimit=this.estimateGas(b).catch($=>{if(forwardErrors.indexOf($.code)>=0)throw $;return logger$8.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:$,tx:b})})),b.chainId==null?b.chainId=this.getChainId():b.chainId=Promise.all([Promise.resolve(b.chainId),this.getChainId()]).then($=>($[1]!==0&&$[0]!==$[1]&&logger$8.throwArgumentError("chainId address mismatch","transaction",e),$[0])),yield resolveProperties(b)})}_checkProvider(e){this.provider||logger$8.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}var hash$3={},utils$v={},minimalisticAssert$1=assert$g;function assert$g(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$g.equal=function(e,b,w){if(e!=b)throw new Error(w||"Assertion failed: "+e+" != "+b)};var inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(e,b){b&&(e.super_=b,e.prototype=Object.create(b.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(e,b){if(b){e.super_=b;var w=function(){};w.prototype=b.prototype,e.prototype=new w,e.prototype.constructor=e}};var assert$f=minimalisticAssert$1,inherits$3=inherits_browser$1.exports;utils$v.inherits=inherits$3;function isSurrogatePair(t,e){return(t.charCodeAt(e)&64512)!=55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)==56320}function toArray$2(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var b=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t),$=0;$<t.length;$+=2)b.push(parseInt(t[$]+t[$+1],16))}else for(var w=0,$=0;$<t.length;$++){var T=t.charCodeAt($);T<128?b[w++]=T:T<2048?(b[w++]=T>>6|192,b[w++]=T&63|128):isSurrogatePair(t,$)?(T=65536+((T&1023)<<10)+(t.charCodeAt(++$)&1023),b[w++]=T>>18|240,b[w++]=T>>12&63|128,b[w++]=T>>6&63|128,b[w++]=T&63|128):(b[w++]=T>>12|224,b[w++]=T>>6&63|128,b[w++]=T&63|128)}else for($=0;$<t.length;$++)b[$]=t[$]|0;return b}utils$v.toArray=toArray$2;function toHex$2(t){for(var e="",b=0;b<t.length;b++)e+=zero2(t[b].toString(16));return e}utils$v.toHex=toHex$2;function htonl(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}utils$v.htonl=htonl;function toHex32(t,e){for(var b="",w=0;w<t.length;w++){var $=t[w];e==="little"&&($=htonl($)),b+=zero8($.toString(16))}return b}utils$v.toHex32=toHex32;function zero2(t){return t.length===1?"0"+t:t}utils$v.zero2=zero2;function zero8(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}utils$v.zero8=zero8;function join32(t,e,b,w){var $=b-e;assert$f($%4==0);for(var T=new Array($/4),N=0,C=e;N<T.length;N++,C+=4){var F;w==="big"?F=t[C]<<24|t[C+1]<<16|t[C+2]<<8|t[C+3]:F=t[C+3]<<24|t[C+2]<<16|t[C+1]<<8|t[C],T[N]=F>>>0}return T}utils$v.join32=join32;function split32(t,e){for(var b=new Array(t.length*4),w=0,$=0;w<t.length;w++,$+=4){var T=t[w];e==="big"?(b[$]=T>>>24,b[$+1]=T>>>16&255,b[$+2]=T>>>8&255,b[$+3]=T&255):(b[$+3]=T>>>24,b[$+2]=T>>>16&255,b[$+1]=T>>>8&255,b[$]=T&255)}return b}utils$v.split32=split32;function rotr32$1(t,e){return t>>>e|t<<32-e}utils$v.rotr32=rotr32$1;function rotl32$2(t,e){return t<<e|t>>>32-e}utils$v.rotl32=rotl32$2;function sum32$3(t,e){return t+e>>>0}utils$v.sum32=sum32$3;function sum32_3$1(t,e,b){return t+e+b>>>0}utils$v.sum32_3=sum32_3$1;function sum32_4$2(t,e,b,w){return t+e+b+w>>>0}utils$v.sum32_4=sum32_4$2;function sum32_5$2(t,e,b,w,$){return t+e+b+w+$>>>0}utils$v.sum32_5=sum32_5$2;function sum64$1(t,e,b,w){var $=t[e],T=t[e+1],N=w+T>>>0,C=(N<w?1:0)+b+$;t[e]=C>>>0,t[e+1]=N}utils$v.sum64=sum64$1;function sum64_hi$1(t,e,b,w){var $=e+w>>>0,T=($<e?1:0)+t+b;return T>>>0}utils$v.sum64_hi=sum64_hi$1;function sum64_lo$1(t,e,b,w){var $=e+w;return $>>>0}utils$v.sum64_lo=sum64_lo$1;function sum64_4_hi$1(t,e,b,w,$,T,N,C){var F=0,G=e;G=G+w>>>0,F+=G<e?1:0,G=G+T>>>0,F+=G<T?1:0,G=G+C>>>0,F+=G<C?1:0;var J=t+b+$+N+F;return J>>>0}utils$v.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(t,e,b,w,$,T,N,C){var F=e+w+T+C;return F>>>0}utils$v.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(t,e,b,w,$,T,N,C,F,G){var J=0,Z=e;Z=Z+w>>>0,J+=Z<e?1:0,Z=Z+T>>>0,J+=Z<T?1:0,Z=Z+C>>>0,J+=Z<C?1:0,Z=Z+G>>>0,J+=Z<G?1:0;var re=t+b+$+N+F+J;return re>>>0}utils$v.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(t,e,b,w,$,T,N,C,F,G){var J=e+w+T+C+G;return J>>>0}utils$v.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(t,e,b){var w=e<<32-b|t>>>b;return w>>>0}utils$v.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(t,e,b){var w=t<<32-b|e>>>b;return w>>>0}utils$v.rotr64_lo=rotr64_lo$1;function shr64_hi$1(t,e,b){return t>>>b}utils$v.shr64_hi=shr64_hi$1;function shr64_lo$1(t,e,b){var w=t<<32-b|e>>>b;return w>>>0}utils$v.shr64_lo=shr64_lo$1;var common$5={},utils$u=utils$v,assert$e=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,b){if(e=utils$u.toArray(e,b),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var w=e.length%this._delta8;this.pending=e.slice(e.length-w,e.length),this.pending.length===0&&(this.pending=null),e=utils$u.join32(e,0,e.length-w,this.endian);for(var $=0;$<e.length;$+=this._delta32)this._update(e,$,$+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$e(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,b=this._delta8,w=b-(e+this.padLength)%b,$=new Array(w+this.padLength);$[0]=128;for(var T=1;T<w;T++)$[T]=0;if(e<<=3,this.endian==="big"){for(var N=8;N<this.padLength;N++)$[T++]=0;$[T++]=0,$[T++]=0,$[T++]=0,$[T++]=0,$[T++]=e>>>24&255,$[T++]=e>>>16&255,$[T++]=e>>>8&255,$[T++]=e&255}else for($[T++]=e&255,$[T++]=e>>>8&255,$[T++]=e>>>16&255,$[T++]=e>>>24&255,$[T++]=0,$[T++]=0,$[T++]=0,$[T++]=0,N=8;N<this.padLength;N++)$[T++]=0;return $};var sha$2={},common$4={},utils$t=utils$v,rotr32=utils$t.rotr32;function ft_1$1(t,e,b,w){if(t===0)return ch32$1(e,b,w);if(t===1||t===3)return p32(e,b,w);if(t===2)return maj32$1(e,b,w)}common$4.ft_1=ft_1$1;function ch32$1(t,e,b){return t&e^~t&b}common$4.ch32=ch32$1;function maj32$1(t,e,b){return t&e^t&b^e&b}common$4.maj32=maj32$1;function p32(t,e,b){return t^e^b}common$4.p32=p32;function s0_256$1(t){return rotr32(t,2)^rotr32(t,13)^rotr32(t,22)}common$4.s0_256=s0_256$1;function s1_256$1(t){return rotr32(t,6)^rotr32(t,11)^rotr32(t,25)}common$4.s1_256=s1_256$1;function g0_256$1(t){return rotr32(t,7)^rotr32(t,18)^t>>>3}common$4.g0_256=g0_256$1;function g1_256$1(t){return rotr32(t,17)^rotr32(t,19)^t>>>10}common$4.g1_256=g1_256$1;var utils$s=utils$v,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$s.rotl32,sum32$2=utils$s.sum32,sum32_5$1=utils$s.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$s.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(e,b){for(var w=this.W,$=0;$<16;$++)w[$]=e[b+$];for(;$<w.length;$++)w[$]=rotl32$1(w[$-3]^w[$-8]^w[$-14]^w[$-16],1);var T=this.h[0],N=this.h[1],C=this.h[2],F=this.h[3],G=this.h[4];for($=0;$<w.length;$++){var J=~~($/20),Z=sum32_5$1(rotl32$1(T,5),ft_1(J,N,C,F),G,w[$],sha1_K[J]);G=F,F=C,C=rotl32$1(N,30),N=T,T=Z}this.h[0]=sum32$2(this.h[0],T),this.h[1]=sum32$2(this.h[1],N),this.h[2]=sum32$2(this.h[2],C),this.h[3]=sum32$2(this.h[3],F),this.h[4]=sum32$2(this.h[4],G)};SHA1.prototype._digest=function(e){return e==="hex"?utils$s.toHex32(this.h,"big"):utils$s.split32(this.h,"big")};var utils$r=utils$v,common$2=common$5,shaCommon=common$4,assert$d=minimalisticAssert$1,sum32$1=utils$r.sum32,sum32_4$1=utils$r.sum32_4,sum32_5=utils$r.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$r.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(e,b){for(var w=this.W,$=0;$<16;$++)w[$]=e[b+$];for(;$<w.length;$++)w[$]=sum32_4$1(g1_256(w[$-2]),w[$-7],g0_256(w[$-15]),w[$-16]);var T=this.h[0],N=this.h[1],C=this.h[2],F=this.h[3],G=this.h[4],J=this.h[5],Z=this.h[6],re=this.h[7];for(assert$d(this.k.length===w.length),$=0;$<w.length;$++){var ie=sum32_5(re,s1_256(G),ch32(G,J,Z),this.k[$],w[$]),ue=sum32$1(s0_256(T),maj32(T,N,C));re=Z,Z=J,J=G,G=sum32$1(F,ie),F=C,C=N,N=T,T=sum32$1(ie,ue)}this.h[0]=sum32$1(this.h[0],T),this.h[1]=sum32$1(this.h[1],N),this.h[2]=sum32$1(this.h[2],C),this.h[3]=sum32$1(this.h[3],F),this.h[4]=sum32$1(this.h[4],G),this.h[5]=sum32$1(this.h[5],J),this.h[6]=sum32$1(this.h[6],Z),this.h[7]=sum32$1(this.h[7],re)};SHA256$1.prototype._digest=function(e){return e==="hex"?utils$r.toHex32(this.h,"big"):utils$r.split32(this.h,"big")};var utils$q=utils$v,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$q.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(e){return e==="hex"?utils$q.toHex32(this.h.slice(0,7),"big"):utils$q.split32(this.h.slice(0,7),"big")};var utils$p=utils$v,common$1=common$5,assert$c=minimalisticAssert$1,rotr64_hi=utils$p.rotr64_hi,rotr64_lo=utils$p.rotr64_lo,shr64_hi=utils$p.shr64_hi,shr64_lo=utils$p.shr64_lo,sum64=utils$p.sum64,sum64_hi=utils$p.sum64_hi,sum64_lo=utils$p.sum64_lo,sum64_4_hi=utils$p.sum64_4_hi,sum64_4_lo=utils$p.sum64_4_lo,sum64_5_hi=utils$p.sum64_5_hi,sum64_5_lo=utils$p.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$p.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(e,b){for(var w=this.W,$=0;$<32;$++)w[$]=e[b+$];for(;$<w.length;$+=2){var T=g1_512_hi(w[$-4],w[$-3]),N=g1_512_lo(w[$-4],w[$-3]),C=w[$-14],F=w[$-13],G=g0_512_hi(w[$-30],w[$-29]),J=g0_512_lo(w[$-30],w[$-29]),Z=w[$-32],re=w[$-31];w[$]=sum64_4_hi(T,N,C,F,G,J,Z,re),w[$+1]=sum64_4_lo(T,N,C,F,G,J,Z,re)}};SHA512$1.prototype._update=function(e,b){this._prepareBlock(e,b);var w=this.W,$=this.h[0],T=this.h[1],N=this.h[2],C=this.h[3],F=this.h[4],G=this.h[5],J=this.h[6],Z=this.h[7],re=this.h[8],ie=this.h[9],ue=this.h[10],ne=this.h[11],ce=this.h[12],ae=this.h[13],ye=this.h[14],$e=this.h[15];assert$c(this.k.length===w.length);for(var _e=0;_e<w.length;_e+=2){var be=ye,xe=$e,ee=s1_512_hi(re,ie),he=s1_512_lo(re,ie),we=ch64_hi(re,ie,ue,ne,ce),Ne=ch64_lo(re,ie,ue,ne,ce,ae),pe=this.k[_e],te=this.k[_e+1],Y=w[_e],R=w[_e+1],B=sum64_5_hi(be,xe,ee,he,we,Ne,pe,te,Y,R),V=sum64_5_lo(be,xe,ee,he,we,Ne,pe,te,Y,R);be=s0_512_hi($,T),xe=s0_512_lo($,T),ee=maj64_hi($,T,N,C,F),he=maj64_lo($,T,N,C,F,G);var Q=sum64_hi(be,xe,ee,he),H=sum64_lo(be,xe,ee,he);ye=ce,$e=ae,ce=ue,ae=ne,ue=re,ne=ie,re=sum64_hi(J,Z,B,V),ie=sum64_lo(Z,Z,B,V),J=F,Z=G,F=N,G=C,N=$,C=T,$=sum64_hi(B,V,Q,H),T=sum64_lo(B,V,Q,H)}sum64(this.h,0,$,T),sum64(this.h,2,N,C),sum64(this.h,4,F,G),sum64(this.h,6,J,Z),sum64(this.h,8,re,ie),sum64(this.h,10,ue,ne),sum64(this.h,12,ce,ae),sum64(this.h,14,ye,$e)};SHA512$1.prototype._digest=function(e){return e==="hex"?utils$p.toHex32(this.h,"big"):utils$p.split32(this.h,"big")};function ch64_hi(t,e,b,w,$){var T=t&b^~t&$;return T<0&&(T+=4294967296),T}function ch64_lo(t,e,b,w,$,T){var N=e&w^~e&T;return N<0&&(N+=4294967296),N}function maj64_hi(t,e,b,w,$){var T=t&b^t&$^b&$;return T<0&&(T+=4294967296),T}function maj64_lo(t,e,b,w,$,T){var N=e&w^e&T^w&T;return N<0&&(N+=4294967296),N}function s0_512_hi(t,e){var b=rotr64_hi(t,e,28),w=rotr64_hi(e,t,2),$=rotr64_hi(e,t,7),T=b^w^$;return T<0&&(T+=4294967296),T}function s0_512_lo(t,e){var b=rotr64_lo(t,e,28),w=rotr64_lo(e,t,2),$=rotr64_lo(e,t,7),T=b^w^$;return T<0&&(T+=4294967296),T}function s1_512_hi(t,e){var b=rotr64_hi(t,e,14),w=rotr64_hi(t,e,18),$=rotr64_hi(e,t,9),T=b^w^$;return T<0&&(T+=4294967296),T}function s1_512_lo(t,e){var b=rotr64_lo(t,e,14),w=rotr64_lo(t,e,18),$=rotr64_lo(e,t,9),T=b^w^$;return T<0&&(T+=4294967296),T}function g0_512_hi(t,e){var b=rotr64_hi(t,e,1),w=rotr64_hi(t,e,8),$=shr64_hi(t,e,7),T=b^w^$;return T<0&&(T+=4294967296),T}function g0_512_lo(t,e){var b=rotr64_lo(t,e,1),w=rotr64_lo(t,e,8),$=shr64_lo(t,e,7),T=b^w^$;return T<0&&(T+=4294967296),T}function g1_512_hi(t,e){var b=rotr64_hi(t,e,19),w=rotr64_hi(e,t,29),$=shr64_hi(t,e,6),T=b^w^$;return T<0&&(T+=4294967296),T}function g1_512_lo(t,e){var b=rotr64_lo(t,e,19),w=rotr64_lo(e,t,29),$=shr64_lo(t,e,6),T=b^w^$;return T<0&&(T+=4294967296),T}var utils$o=utils$v,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$o.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(e){return e==="hex"?utils$o.toHex32(this.h.slice(0,12),"big"):utils$o.split32(this.h.slice(0,12),"big")};sha$2.sha1=_1;sha$2.sha224=_224;sha$2.sha256=_256;sha$2.sha384=_384;sha$2.sha512=_512;var ripemd={},utils$n=utils$v,common=common$5,rotl32=utils$n.rotl32,sum32=utils$n.sum32,sum32_3=utils$n.sum32_3,sum32_4=utils$n.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$n.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(e,b){for(var w=this.h[0],$=this.h[1],T=this.h[2],N=this.h[3],C=this.h[4],F=w,G=$,J=T,Z=N,re=C,ie=0;ie<80;ie++){var ue=sum32(rotl32(sum32_4(w,f$3(ie,$,T,N),e[r$1[ie]+b],K(ie)),s$2[ie]),C);w=C,C=N,N=rotl32(T,10),T=$,$=ue,ue=sum32(rotl32(sum32_4(F,f$3(79-ie,G,J,Z),e[rh[ie]+b],Kh(ie)),sh[ie]),re),F=re,re=Z,Z=rotl32(J,10),J=G,G=ue}ue=sum32_3(this.h[1],T,Z),this.h[1]=sum32_3(this.h[2],N,re),this.h[2]=sum32_3(this.h[3],C,F),this.h[3]=sum32_3(this.h[4],w,G),this.h[4]=sum32_3(this.h[0],$,J),this.h[0]=ue};RIPEMD160.prototype._digest=function(e){return e==="hex"?utils$n.toHex32(this.h,"little"):utils$n.split32(this.h,"little")};function f$3(t,e,b,w){return t<=15?e^b^w:t<=31?e&b|~e&w:t<=47?(e|~b)^w:t<=63?e&w|b&~w:e^(b|~w)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var r$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$2=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$m=utils$v,assert$b=minimalisticAssert$1;function Hmac(t,e,b){if(!(this instanceof Hmac))return new Hmac(t,e,b);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(utils$m.toArray(e,b))}var hmac=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$b(e.length<=this.blockSize);for(var b=e.length;b<this.blockSize;b++)e.push(0);for(b=0;b<e.length;b++)e[b]^=54;for(this.inner=new this.Hash().update(e),b=0;b<e.length;b++)e[b]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function(e,b){return this.inner.update(e,b),this};Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=utils$v,e.common=common$5,e.sha=sha$2,e.ripemd=ripemd,e.hmac=hmac,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$3);function createCommonjsModule$6(t,e,b){return b={path:e,exports:{},require:function(w,$){return commonjsRequire(w,$==null?b.path:$)}},t(b,b.exports),b.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert$a;function assert$a(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$a.equal=function(e,b,w){if(e!=b)throw new Error(w||"Assertion failed: "+e+" != "+b)};var utils_1$4=createCommonjsModule$6(function(t,e){var b=e;function w(N,C){if(Array.isArray(N))return N.slice();if(!N)return[];var F=[];if(typeof N!="string"){for(var G=0;G<N.length;G++)F[G]=N[G]|0;return F}if(C==="hex"){N=N.replace(/[^a-z0-9]+/ig,""),N.length%2!=0&&(N="0"+N);for(var G=0;G<N.length;G+=2)F.push(parseInt(N[G]+N[G+1],16))}else for(var G=0;G<N.length;G++){var J=N.charCodeAt(G),Z=J>>8,re=J&255;Z?F.push(Z,re):F.push(re)}return F}b.toArray=w;function $(N){return N.length===1?"0"+N:N}b.zero2=$;function T(N){for(var C="",F=0;F<N.length;F++)C+=$(N[F].toString(16));return C}b.toHex=T,b.encode=function(C,F){return F==="hex"?T(C):C}}),utils_1$1$1=createCommonjsModule$6(function(t,e){var b=e;b.assert=minimalisticAssert,b.toArray=utils_1$4.toArray,b.zero2=utils_1$4.zero2,b.toHex=utils_1$4.toHex,b.encode=utils_1$4.encode;function w(F,G,J){var Z=new Array(Math.max(F.bitLength(),J)+1);Z.fill(0);for(var re=1<<G+1,ie=F.clone(),ue=0;ue<Z.length;ue++){var ne,ce=ie.andln(re-1);ie.isOdd()?(ce>(re>>1)-1?ne=(re>>1)-ce:ne=ce,ie.isubn(ne)):ne=0,Z[ue]=ne,ie.iushrn(1)}return Z}b.getNAF=w;function $(F,G){var J=[[],[]];F=F.clone(),G=G.clone();for(var Z=0,re=0,ie;F.cmpn(-Z)>0||G.cmpn(-re)>0;){var ue=F.andln(3)+Z&3,ne=G.andln(3)+re&3;ue===3&&(ue=-1),ne===3&&(ne=-1);var ce;(ue&1)==0?ce=0:(ie=F.andln(7)+Z&7,(ie===3||ie===5)&&ne===2?ce=-ue:ce=ue),J[0].push(ce);var ae;(ne&1)==0?ae=0:(ie=G.andln(7)+re&7,(ie===3||ie===5)&&ue===2?ae=-ne:ae=ne),J[1].push(ae),2*Z===ce+1&&(Z=1-Z),2*re===ae+1&&(re=1-re),F.iushrn(1),G.iushrn(1)}return J}b.getJSF=$;function T(F,G,J){var Z="_"+G;F.prototype[G]=function(){return this[Z]!==void 0?this[Z]:this[Z]=J.call(this)}}b.cachedProperty=T;function N(F){return typeof F=="string"?b.toArray(F,"hex"):F}b.parseBytes=N;function C(F){return new BN$9(F,"hex","le")}b.intFromLE=C}),getNAF$1=utils_1$1$1.getNAF,getJSF$1=utils_1$1$1.getJSF,assert$1$1=utils_1$1$1.assert;function BaseCurve$1(t,e){this.type=t,this.p=new BN$9(e.p,16),this.red=e.prime?BN$9.red(e.prime):BN$9.mont(this.p),this.zero=new BN$9(0).toRed(this.red),this.one=new BN$9(1).toRed(this.red),this.two=new BN$9(2).toRed(this.red),this.n=e.n&&new BN$9(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var b=this.n&&this.p.div(this.n);!b||b.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$5=BaseCurve$1;BaseCurve$1.prototype.point=function(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function(e,b){assert$1$1(e.precomputed);var w=e._getDoubles(),$=getNAF$1(b,1,this._bitLength),T=(1<<w.step+1)-(w.step%2==0?2:1);T/=3;var N=[],C,F;for(C=0;C<$.length;C+=w.step){F=0;for(var G=C+w.step-1;G>=C;G--)F=(F<<1)+$[G];N.push(F)}for(var J=this.jpoint(null,null,null),Z=this.jpoint(null,null,null),re=T;re>0;re--){for(C=0;C<N.length;C++)F=N[C],F===re?Z=Z.mixedAdd(w.points[C]):F===-re&&(Z=Z.mixedAdd(w.points[C].neg()));J=J.add(Z)}return J.toP()};BaseCurve$1.prototype._wnafMul=function(e,b){var w=4,$=e._getNAFPoints(w);w=$.wnd;for(var T=$.points,N=getNAF$1(b,w,this._bitLength),C=this.jpoint(null,null,null),F=N.length-1;F>=0;F--){for(var G=0;F>=0&&N[F]===0;F--)G++;if(F>=0&&G++,C=C.dblp(G),F<0)break;var J=N[F];assert$1$1(J!==0),e.type==="affine"?J>0?C=C.mixedAdd(T[J-1>>1]):C=C.mixedAdd(T[-J-1>>1].neg()):J>0?C=C.add(T[J-1>>1]):C=C.add(T[-J-1>>1].neg())}return e.type==="affine"?C.toP():C};BaseCurve$1.prototype._wnafMulAdd=function(e,b,w,$,T){var N=this._wnafT1,C=this._wnafT2,F=this._wnafT3,G=0,J,Z,re;for(J=0;J<$;J++){re=b[J];var ie=re._getNAFPoints(e);N[J]=ie.wnd,C[J]=ie.points}for(J=$-1;J>=1;J-=2){var ue=J-1,ne=J;if(N[ue]!==1||N[ne]!==1){F[ue]=getNAF$1(w[ue],N[ue],this._bitLength),F[ne]=getNAF$1(w[ne],N[ne],this._bitLength),G=Math.max(F[ue].length,G),G=Math.max(F[ne].length,G);continue}var ce=[b[ue],null,null,b[ne]];b[ue].y.cmp(b[ne].y)===0?(ce[1]=b[ue].add(b[ne]),ce[2]=b[ue].toJ().mixedAdd(b[ne].neg())):b[ue].y.cmp(b[ne].y.redNeg())===0?(ce[1]=b[ue].toJ().mixedAdd(b[ne]),ce[2]=b[ue].add(b[ne].neg())):(ce[1]=b[ue].toJ().mixedAdd(b[ne]),ce[2]=b[ue].toJ().mixedAdd(b[ne].neg()));var ae=[-3,-1,-5,-7,0,7,5,1,3],ye=getJSF$1(w[ue],w[ne]);for(G=Math.max(ye[0].length,G),F[ue]=new Array(G),F[ne]=new Array(G),Z=0;Z<G;Z++){var $e=ye[0][Z]|0,_e=ye[1][Z]|0;F[ue][Z]=ae[($e+1)*3+(_e+1)],F[ne][Z]=0,C[ue]=ce}}var be=this.jpoint(null,null,null),xe=this._wnafT4;for(J=G;J>=0;J--){for(var ee=0;J>=0;){var he=!0;for(Z=0;Z<$;Z++)xe[Z]=F[Z][J]|0,xe[Z]!==0&&(he=!1);if(!he)break;ee++,J--}if(J>=0&&ee++,be=be.dblp(ee),J<0)break;for(Z=0;Z<$;Z++){var we=xe[Z];we!==0&&(we>0?re=C[Z][we-1>>1]:we<0&&(re=C[Z][-we-1>>1].neg()),re.type==="affine"?be=be.mixedAdd(re):be=be.add(re))}}for(J=0;J<$;J++)C[J]=null;return T?be:be.toP()};function BasePoint$1(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function(e,b){e=utils_1$1$1.toArray(e,b);var w=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*w){e[0]===6?assert$1$1(e[e.length-1]%2==0):e[0]===7&&assert$1$1(e[e.length-1]%2==1);var $=this.point(e.slice(1,1+w),e.slice(1+w,1+2*w));return $}else if((e[0]===2||e[0]===3)&&e.length-1===w)return this.pointFromX(e.slice(1,1+w),e[0]===3);throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function(e){return this.encode(e,!0)};BasePoint$1.prototype._encode=function(e){var b=this.curve.p.byteLength(),w=this.getX().toArray("be",b);return e?[this.getY().isEven()?2:3].concat(w):[4].concat(w,this.getY().toArray("be",b))};BasePoint$1.prototype.encode=function(e,b){return utils_1$1$1.encode(this._encode(b),e)};BasePoint$1.prototype.precompute=function(e){if(this.precomputed)return this;var b={doubles:null,naf:null,beta:null};return b.naf=this._getNAFPoints(8),b.doubles=this._getDoubles(4,e),b.beta=this._getBeta(),this.precomputed=b,this};BasePoint$1.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var b=this.precomputed.doubles;return b?b.points.length>=Math.ceil((e.bitLength()+1)/b.step):!1};BasePoint$1.prototype._getDoubles=function(e,b){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var w=[this],$=this,T=0;T<b;T+=e){for(var N=0;N<e;N++)$=$.dbl();w.push($)}return{step:e,points:w}};BasePoint$1.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var b=[this],w=(1<<e)-1,$=w===1?null:this.dbl(),T=1;T<w;T++)b[T]=b[T-1].add($);return{wnd:e,points:b}};BasePoint$1.prototype._getBeta=function(){return null};BasePoint$1.prototype.dblp=function(e){for(var b=this,w=0;w<e;w++)b=b.dbl();return b};var inherits_browser=createCommonjsModule$6(function(t){typeof Object.create=="function"?t.exports=function(b,w){w&&(b.super_=w,b.prototype=Object.create(w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(b,w){if(w){b.super_=w;var $=function(){};$.prototype=w.prototype,b.prototype=new $,b.prototype.constructor=b}}}),assert$2$1=utils_1$1$1.assert;function ShortCurve$1(t){base$5.call(this,"short",t),this.a=new BN$9(t.a,16).toRed(this.red),this.b=new BN$9(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve$1,base$5);var short_1=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var b,w;if(e.beta)b=new BN$9(e.beta,16).toRed(this.red);else{var $=this._getEndoRoots(this.p);b=$[0].cmp($[1])<0?$[0]:$[1],b=b.toRed(this.red)}if(e.lambda)w=new BN$9(e.lambda,16);else{var T=this._getEndoRoots(this.n);this.g.mul(T[0]).x.cmp(this.g.x.redMul(b))===0?w=T[0]:(w=T[1],assert$2$1(this.g.mul(w).x.cmp(this.g.x.redMul(b))===0))}var N;return e.basis?N=e.basis.map(function(C){return{a:new BN$9(C.a,16),b:new BN$9(C.b,16)}}):N=this._getEndoBasis(w),{beta:b,lambda:w,basis:N}}};ShortCurve$1.prototype._getEndoRoots=function(e){var b=e===this.p?this.red:BN$9.mont(e),w=new BN$9(2).toRed(b).redInvm(),$=w.redNeg(),T=new BN$9(3).toRed(b).redNeg().redSqrt().redMul(w),N=$.redAdd(T).fromRed(),C=$.redSub(T).fromRed();return[N,C]};ShortCurve$1.prototype._getEndoBasis=function(e){for(var b=this.n.ushrn(Math.floor(this.n.bitLength()/2)),w=e,$=this.n.clone(),T=new BN$9(1),N=new BN$9(0),C=new BN$9(0),F=new BN$9(1),G,J,Z,re,ie,ue,ne,ce=0,ae,ye;w.cmpn(0)!==0;){var $e=$.div(w);ae=$.sub($e.mul(w)),ye=C.sub($e.mul(T));var _e=F.sub($e.mul(N));if(!Z&&ae.cmp(b)<0)G=ne.neg(),J=T,Z=ae.neg(),re=ye;else if(Z&&++ce==2)break;ne=ae,$=w,w=ae,C=T,T=ye,F=N,N=_e}ie=ae.neg(),ue=ye;var be=Z.sqr().add(re.sqr()),xe=ie.sqr().add(ue.sqr());return xe.cmp(be)>=0&&(ie=G,ue=J),Z.negative&&(Z=Z.neg(),re=re.neg()),ie.negative&&(ie=ie.neg(),ue=ue.neg()),[{a:Z,b:re},{a:ie,b:ue}]};ShortCurve$1.prototype._endoSplit=function(e){var b=this.endo.basis,w=b[0],$=b[1],T=$.b.mul(e).divRound(this.n),N=w.b.neg().mul(e).divRound(this.n),C=T.mul(w.a),F=N.mul($.a),G=T.mul(w.b),J=N.mul($.b),Z=e.sub(C).sub(F),re=G.add(J).neg();return{k1:Z,k2:re}};ShortCurve$1.prototype.pointFromX=function(e,b){e=new BN$9(e,16),e.red||(e=e.toRed(this.red));var w=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),$=w.redSqrt();if($.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");var T=$.fromRed().isOdd();return(b&&!T||!b&&T)&&($=$.redNeg()),this.point(e,$)};ShortCurve$1.prototype.validate=function(e){if(e.inf)return!0;var b=e.x,w=e.y,$=this.a.redMul(b),T=b.redSqr().redMul(b).redIAdd($).redIAdd(this.b);return w.redSqr().redISub(T).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function(e,b,w){for(var $=this._endoWnafT1,T=this._endoWnafT2,N=0;N<e.length;N++){var C=this._endoSplit(b[N]),F=e[N],G=F._getBeta();C.k1.negative&&(C.k1.ineg(),F=F.neg(!0)),C.k2.negative&&(C.k2.ineg(),G=G.neg(!0)),$[N*2]=F,$[N*2+1]=G,T[N*2]=C.k1,T[N*2+1]=C.k2}for(var J=this._wnafMulAdd(1,$,T,N*2,w),Z=0;Z<N*2;Z++)$[Z]=null,T[Z]=null;return J};function Point$3(t,e,b,w){base$5.BasePoint.call(this,t,"affine"),e===null&&b===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$9(e,16),this.y=new BN$9(b,16),w&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point$3,base$5.BasePoint);ShortCurve$1.prototype.point=function(e,b,w){return new Point$3(this,e,b,w)};ShortCurve$1.prototype.pointFromJSON=function(e,b){return Point$3.fromJSON(this,e,b)};Point$3.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var w=this.curve,$=function(T){return w.point(T.x.redMul(w.endo.beta),T.y)};e.beta=b,b.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map($)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map($)}}}return b}};Point$3.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$3.fromJSON=function(e,b,w){typeof b=="string"&&(b=JSON.parse(b));var $=e.point(b[0],b[1],w);if(!b[2])return $;function T(C){return e.point(C[0],C[1],w)}var N=b[2];return $.precomputed={beta:null,doubles:N.doubles&&{step:N.doubles.step,points:[$].concat(N.doubles.points.map(T))},naf:N.naf&&{wnd:N.naf.wnd,points:[$].concat(N.naf.points.map(T))}},$};Point$3.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function(){return this.inf};Point$3.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var b=this.y.redSub(e.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(e.x).redInvm()));var w=b.redSqr().redISub(this.x).redISub(e.x),$=b.redMul(this.x.redSub(w)).redISub(this.y);return this.curve.point(w,$)};Point$3.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,w=this.x.redSqr(),$=e.redInvm(),T=w.redAdd(w).redIAdd(w).redIAdd(b).redMul($),N=T.redSqr().redISub(this.x.redAdd(this.x)),C=T.redMul(this.x.redSub(N)).redISub(this.y);return this.curve.point(N,C)};Point$3.prototype.getX=function(){return this.x.fromRed()};Point$3.prototype.getY=function(){return this.y.fromRed()};Point$3.prototype.mul=function(e){return e=new BN$9(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$3.prototype.mulAdd=function(e,b,w){var $=[this,b],T=[e,w];return this.curve.endo?this.curve._endoWnafMulAdd($,T):this.curve._wnafMulAdd(1,$,T,2)};Point$3.prototype.jmulAdd=function(e,b,w){var $=[this,b],T=[e,w];return this.curve.endo?this.curve._endoWnafMulAdd($,T,!0):this.curve._wnafMulAdd(1,$,T,2,!0)};Point$3.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$3.prototype.neg=function(e){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var w=this.precomputed,$=function(T){return T.neg()};b.precomputed={naf:w.naf&&{wnd:w.naf.wnd,points:w.naf.points.map($)},doubles:w.doubles&&{step:w.doubles.step,points:w.doubles.points.map($)}}}return b};Point$3.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint$1(t,e,b,w){base$5.BasePoint.call(this,t,"jacobian"),e===null&&b===null&&w===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$9(0)):(this.x=new BN$9(e,16),this.y=new BN$9(b,16),this.z=new BN$9(w,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint$1,base$5.BasePoint);ShortCurve$1.prototype.jpoint=function(e,b,w){return new JPoint$1(this,e,b,w)};JPoint$1.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),b=e.redSqr(),w=this.x.redMul(b),$=this.y.redMul(b).redMul(e);return this.curve.point(w,$)};JPoint$1.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var b=e.z.redSqr(),w=this.z.redSqr(),$=this.x.redMul(b),T=e.x.redMul(w),N=this.y.redMul(b.redMul(e.z)),C=e.y.redMul(w.redMul(this.z)),F=$.redSub(T),G=N.redSub(C);if(F.cmpn(0)===0)return G.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var J=F.redSqr(),Z=J.redMul(F),re=$.redMul(J),ie=G.redSqr().redIAdd(Z).redISub(re).redISub(re),ue=G.redMul(re.redISub(ie)).redISub(N.redMul(Z)),ne=this.z.redMul(e.z).redMul(F);return this.curve.jpoint(ie,ue,ne)};JPoint$1.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var b=this.z.redSqr(),w=this.x,$=e.x.redMul(b),T=this.y,N=e.y.redMul(b).redMul(this.z),C=w.redSub($),F=T.redSub(N);if(C.cmpn(0)===0)return F.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var G=C.redSqr(),J=G.redMul(C),Z=w.redMul(G),re=F.redSqr().redIAdd(J).redISub(Z).redISub(Z),ie=F.redMul(Z.redISub(re)).redISub(T.redMul(J)),ue=this.z.redMul(C);return this.curve.jpoint(re,ie,ue)};JPoint$1.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var w=this;for(b=0;b<e;b++)w=w.dbl();return w}var $=this.curve.a,T=this.curve.tinv,N=this.x,C=this.y,F=this.z,G=F.redSqr().redSqr(),J=C.redAdd(C);for(b=0;b<e;b++){var Z=N.redSqr(),re=J.redSqr(),ie=re.redSqr(),ue=Z.redAdd(Z).redIAdd(Z).redIAdd($.redMul(G)),ne=N.redMul(re),ce=ue.redSqr().redISub(ne.redAdd(ne)),ae=ne.redISub(ce),ye=ue.redMul(ae);ye=ye.redIAdd(ye).redISub(ie);var $e=J.redMul(F);b+1<e&&(G=G.redMul(ie)),N=ce,F=$e,J=ye}return this.curve.jpoint(N,J.redMul(T),F)};JPoint$1.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint$1.prototype._zeroDbl=function(){var e,b,w;if(this.zOne){var $=this.x.redSqr(),T=this.y.redSqr(),N=T.redSqr(),C=this.x.redAdd(T).redSqr().redISub($).redISub(N);C=C.redIAdd(C);var F=$.redAdd($).redIAdd($),G=F.redSqr().redISub(C).redISub(C),J=N.redIAdd(N);J=J.redIAdd(J),J=J.redIAdd(J),e=G,b=F.redMul(C.redISub(G)).redISub(J),w=this.y.redAdd(this.y)}else{var Z=this.x.redSqr(),re=this.y.redSqr(),ie=re.redSqr(),ue=this.x.redAdd(re).redSqr().redISub(Z).redISub(ie);ue=ue.redIAdd(ue);var ne=Z.redAdd(Z).redIAdd(Z),ce=ne.redSqr(),ae=ie.redIAdd(ie);ae=ae.redIAdd(ae),ae=ae.redIAdd(ae),e=ce.redISub(ue).redISub(ue),b=ne.redMul(ue.redISub(e)).redISub(ae),w=this.y.redMul(this.z),w=w.redIAdd(w)}return this.curve.jpoint(e,b,w)};JPoint$1.prototype._threeDbl=function(){var e,b,w;if(this.zOne){var $=this.x.redSqr(),T=this.y.redSqr(),N=T.redSqr(),C=this.x.redAdd(T).redSqr().redISub($).redISub(N);C=C.redIAdd(C);var F=$.redAdd($).redIAdd($).redIAdd(this.curve.a),G=F.redSqr().redISub(C).redISub(C);e=G;var J=N.redIAdd(N);J=J.redIAdd(J),J=J.redIAdd(J),b=F.redMul(C.redISub(G)).redISub(J),w=this.y.redAdd(this.y)}else{var Z=this.z.redSqr(),re=this.y.redSqr(),ie=this.x.redMul(re),ue=this.x.redSub(Z).redMul(this.x.redAdd(Z));ue=ue.redAdd(ue).redIAdd(ue);var ne=ie.redIAdd(ie);ne=ne.redIAdd(ne);var ce=ne.redAdd(ne);e=ue.redSqr().redISub(ce),w=this.y.redAdd(this.z).redSqr().redISub(re).redISub(Z);var ae=re.redSqr();ae=ae.redIAdd(ae),ae=ae.redIAdd(ae),ae=ae.redIAdd(ae),b=ue.redMul(ne.redISub(e)).redISub(ae)}return this.curve.jpoint(e,b,w)};JPoint$1.prototype._dbl=function(){var e=this.curve.a,b=this.x,w=this.y,$=this.z,T=$.redSqr().redSqr(),N=b.redSqr(),C=w.redSqr(),F=N.redAdd(N).redIAdd(N).redIAdd(e.redMul(T)),G=b.redAdd(b);G=G.redIAdd(G);var J=G.redMul(C),Z=F.redSqr().redISub(J.redAdd(J)),re=J.redISub(Z),ie=C.redSqr();ie=ie.redIAdd(ie),ie=ie.redIAdd(ie),ie=ie.redIAdd(ie);var ue=F.redMul(re).redISub(ie),ne=w.redAdd(w).redMul($);return this.curve.jpoint(Z,ue,ne)};JPoint$1.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),b=this.y.redSqr(),w=this.z.redSqr(),$=b.redSqr(),T=e.redAdd(e).redIAdd(e),N=T.redSqr(),C=this.x.redAdd(b).redSqr().redISub(e).redISub($);C=C.redIAdd(C),C=C.redAdd(C).redIAdd(C),C=C.redISub(N);var F=C.redSqr(),G=$.redIAdd($);G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G);var J=T.redIAdd(C).redSqr().redISub(N).redISub(F).redISub(G),Z=b.redMul(J);Z=Z.redIAdd(Z),Z=Z.redIAdd(Z);var re=this.x.redMul(F).redISub(Z);re=re.redIAdd(re),re=re.redIAdd(re);var ie=this.y.redMul(J.redMul(G.redISub(J)).redISub(C.redMul(F)));ie=ie.redIAdd(ie),ie=ie.redIAdd(ie),ie=ie.redIAdd(ie);var ue=this.z.redAdd(C).redSqr().redISub(w).redISub(F);return this.curve.jpoint(re,ie,ue)};JPoint$1.prototype.mul=function(e,b){return e=new BN$9(e,b),this.curve._wnafMul(this,e)};JPoint$1.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var b=this.z.redSqr(),w=e.z.redSqr();if(this.x.redMul(w).redISub(e.x.redMul(b)).cmpn(0)!==0)return!1;var $=b.redMul(this.z),T=w.redMul(e.z);return this.y.redMul(T).redISub(e.y.redMul($)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function(e){var b=this.z.redSqr(),w=e.toRed(this.curve.red).redMul(b);if(this.x.cmp(w)===0)return!0;for(var $=e.clone(),T=this.curve.redN.redMul(b);;){if($.iadd(this.curve.n),$.cmp(this.curve.p)>=0)return!1;if(w.redIAdd(T),this.x.cmp(w)===0)return!0}};JPoint$1.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule$6(function(t,e){var b=e;b.base=base$5,b.short=short_1,b.mont=null,b.edwards=null}),curves_1=createCommonjsModule$6(function(t,e){var b=e,w=utils_1$1$1.assert;function $(C){C.type==="short"?this.curve=new curve_1.short(C):C.type==="edwards"?this.curve=new curve_1.edwards(C):this.curve=new curve_1.mont(C),this.g=this.curve.g,this.n=this.curve.n,this.hash=C.hash,w(this.g.validate(),"Invalid curve"),w(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}b.PresetCurve=$;function T(C,F){Object.defineProperty(b,C,{configurable:!0,enumerable:!0,get:function(){var G=new $(F);return Object.defineProperty(b,C,{configurable:!0,enumerable:!0,value:G}),G}})}T("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$3.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),T("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$3.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),T("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$3.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),T("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$3.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),T("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$3.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),T("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["9"]}),T("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var N;try{N=null.crash()}catch{N=void 0}T("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",N]})});function HmacDRBG$2(t){if(!(this instanceof HmacDRBG$2))return new HmacDRBG$2(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils_1$4.toArray(t.entropy,t.entropyEnc||"hex"),b=utils_1$4.toArray(t.nonce,t.nonceEnc||"hex"),w=utils_1$4.toArray(t.pers,t.persEnc||"hex");minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,b,w)}var hmacDrbg$1=HmacDRBG$2;HmacDRBG$2.prototype._init=function(e,b,w){var $=e.concat(b).concat(w);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var T=0;T<this.V.length;T++)this.K[T]=0,this.V[T]=1;this._update($),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$2.prototype._hmac=function(){return new hash$3.hmac(this.hash,this.K)};HmacDRBG$2.prototype._update=function(e){var b=this._hmac().update(this.V).update([0]);e&&(b=b.update(e)),this.K=b.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$2.prototype.reseed=function(e,b,w,$){typeof b!="string"&&($=w,w=b,b=null),e=utils_1$4.toArray(e,b),w=utils_1$4.toArray(w,$),minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(w||[])),this._reseed=1};HmacDRBG$2.prototype.generate=function(e,b,w,$){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof b!="string"&&($=w,w=b,b=null),w&&(w=utils_1$4.toArray(w,$||"hex"),this._update(w));for(var T=[];T.length<e;)this.V=this._hmac().update(this.V).digest(),T=T.concat(this.V);var N=T.slice(0,e);return this._update(w),this._reseed++,utils_1$4.encode(N,b)};var assert$3$1=utils_1$1$1.assert;function KeyPair$4(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$2=KeyPair$4;KeyPair$4.fromPublic=function(e,b,w){return b instanceof KeyPair$4?b:new KeyPair$4(e,{pub:b,pubEnc:w})};KeyPair$4.fromPrivate=function(e,b,w){return b instanceof KeyPair$4?b:new KeyPair$4(e,{priv:b,privEnc:w})};KeyPair$4.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$4.prototype.getPublic=function(e,b){return typeof e=="string"&&(b=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),b?this.pub.encode(b,e):this.pub};KeyPair$4.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$4.prototype._importPrivate=function(e,b){this.priv=new BN$9(e,b||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$4.prototype._importPublic=function(e,b){if(e.x||e.y){this.ec.curve.type==="mont"?assert$3$1(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3$1(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,b)};KeyPair$4.prototype.derive=function(e){return e.validate()||assert$3$1(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$4.prototype.sign=function(e,b,w){return this.ec.sign(e,this,b,w)};KeyPair$4.prototype.verify=function(e,b){return this.ec.verify(e,b,this)};KeyPair$4.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4$1=utils_1$1$1.assert;function Signature$4(t,e){if(t instanceof Signature$4)return t;this._importDER(t,e)||(assert$4$1(t.r&&t.s,"Signature without r or s"),this.r=new BN$9(t.r,16),this.s=new BN$9(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature$2=Signature$4;function Position$1(){this.place=0}function getLength$1(t,e){var b=t[e.place++];if(!(b&128))return b;var w=b&15;if(w===0||w>4)return!1;for(var $=0,T=0,N=e.place;T<w;T++,N++)$<<=8,$|=t[N],$>>>=0;return $<=127?!1:(e.place=N,$)}function rmPadding$1(t){for(var e=0,b=t.length-1;!t[e]&&!(t[e+1]&128)&&e<b;)e++;return e===0?t:t.slice(e)}Signature$4.prototype._importDER=function(e,b){e=utils_1$1$1.toArray(e,b);var w=new Position$1;if(e[w.place++]!==48)return!1;var $=getLength$1(e,w);if($===!1||$+w.place!==e.length||e[w.place++]!==2)return!1;var T=getLength$1(e,w);if(T===!1)return!1;var N=e.slice(w.place,T+w.place);if(w.place+=T,e[w.place++]!==2)return!1;var C=getLength$1(e,w);if(C===!1||e.length!==C+w.place)return!1;var F=e.slice(w.place,C+w.place);if(N[0]===0)if(N[1]&128)N=N.slice(1);else return!1;if(F[0]===0)if(F[1]&128)F=F.slice(1);else return!1;return this.r=new BN$9(N),this.s=new BN$9(F),this.recoveryParam=null,!0};function constructLength$1(t,e){if(e<128){t.push(e);return}var b=1+(Math.log(e)/Math.LN2>>>3);for(t.push(b|128);--b;)t.push(e>>>(b<<3)&255);t.push(e)}Signature$4.prototype.toDER=function(e){var b=this.r.toArray(),w=this.s.toArray();for(b[0]&128&&(b=[0].concat(b)),w[0]&128&&(w=[0].concat(w)),b=rmPadding$1(b),w=rmPadding$1(w);!w[0]&&!(w[1]&128);)w=w.slice(1);var $=[2];constructLength$1($,b.length),$=$.concat(b),$.push(2),constructLength$1($,w.length);var T=$.concat(w),N=[48];return constructLength$1(N,T.length),N=N.concat(T),utils_1$1$1.encode(N,e)};var rand$1=function(){throw new Error("unsupported")},assert$5$1=utils_1$1$1.assert;function EC$1(t){if(!(this instanceof EC$1))return new EC$1(t);typeof t=="string"&&(assert$5$1(Object.prototype.hasOwnProperty.call(curves_1,t),"Unknown curve "+t),t=curves_1[t]),t instanceof curves_1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ec$1=EC$1;EC$1.prototype.keyPair=function(e){return new key$2(this,e)};EC$1.prototype.keyFromPrivate=function(e,b){return key$2.fromPrivate(this,e,b)};EC$1.prototype.keyFromPublic=function(e,b){return key$2.fromPublic(this,e,b)};EC$1.prototype.genKeyPair=function(e){e||(e={});for(var b=new hmacDrbg$1({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand$1(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),w=this.n.byteLength(),$=this.n.sub(new BN$9(2));;){var T=new BN$9(b.generate(w));if(!(T.cmp($)>0))return T.iaddn(1),this.keyFromPrivate(T)}};EC$1.prototype._truncateToN=function(e,b){var w=e.byteLength()*8-this.n.bitLength();return w>0&&(e=e.ushrn(w)),!b&&e.cmp(this.n)>=0?e.sub(this.n):e};EC$1.prototype.sign=function(e,b,w,$){typeof w=="object"&&($=w,w=null),$||($={}),b=this.keyFromPrivate(b,w),e=this._truncateToN(new BN$9(e,16));for(var T=this.n.byteLength(),N=b.getPrivate().toArray("be",T),C=e.toArray("be",T),F=new hmacDrbg$1({hash:this.hash,entropy:N,nonce:C,pers:$.pers,persEnc:$.persEnc||"utf8"}),G=this.n.sub(new BN$9(1)),J=0;;J++){var Z=$.k?$.k(J):new BN$9(F.generate(this.n.byteLength()));if(Z=this._truncateToN(Z,!0),!(Z.cmpn(1)<=0||Z.cmp(G)>=0)){var re=this.g.mul(Z);if(!re.isInfinity()){var ie=re.getX(),ue=ie.umod(this.n);if(ue.cmpn(0)!==0){var ne=Z.invm(this.n).mul(ue.mul(b.getPrivate()).iadd(e));if(ne=ne.umod(this.n),ne.cmpn(0)!==0){var ce=(re.getY().isOdd()?1:0)|(ie.cmp(ue)!==0?2:0);return $.canonical&&ne.cmp(this.nh)>0&&(ne=this.n.sub(ne),ce^=1),new signature$2({r:ue,s:ne,recoveryParam:ce})}}}}}};EC$1.prototype.verify=function(e,b,w,$){e=this._truncateToN(new BN$9(e,16)),w=this.keyFromPublic(w,$),b=new signature$2(b,"hex");var T=b.r,N=b.s;if(T.cmpn(1)<0||T.cmp(this.n)>=0||N.cmpn(1)<0||N.cmp(this.n)>=0)return!1;var C=N.invm(this.n),F=C.mul(e).umod(this.n),G=C.mul(T).umod(this.n),J;return this.curve._maxwellTrick?(J=this.g.jmulAdd(F,w.getPublic(),G),J.isInfinity()?!1:J.eqXToP(T)):(J=this.g.mulAdd(F,w.getPublic(),G),J.isInfinity()?!1:J.getX().umod(this.n).cmp(T)===0)};EC$1.prototype.recoverPubKey=function(t,e,b,w){assert$5$1((3&b)===b,"The recovery param is more than two bits"),e=new signature$2(e,w);var $=this.n,T=new BN$9(t),N=e.r,C=e.s,F=b&1,G=b>>1;if(N.cmp(this.curve.p.umod(this.curve.n))>=0&&G)throw new Error("Unable to find sencond key candinate");G?N=this.curve.pointFromX(N.add(this.curve.n),F):N=this.curve.pointFromX(N,F);var J=e.r.invm($),Z=$.sub(T).mul(J).umod($),re=C.mul(J).umod($);return this.g.mulAdd(Z,N,re)};EC$1.prototype.getKeyRecoveryParam=function(t,e,b,w){if(e=new signature$2(e,w),e.recoveryParam!==null)return e.recoveryParam;for(var $=0;$<4;$++){var T;try{T=this.recoverPubKey(t,e,$)}catch{continue}if(T.eq(b))return $}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule$6(function(t,e){var b=e;b.version="6.5.4",b.utils=utils_1$1$1,b.rand=function(){throw new Error("unsupported")},b.curve=curve_1,b.curves=curves_1,b.ec=ec$1,b.eddsa=null}),EC$1$1=elliptic_1.ec;const version$8="signing-key/5.5.0",logger$7=new Logger(version$8);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1$1("secp256k1")),_curve}class SigningKey{constructor(e){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(e));const b=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+b.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+b.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(e){const b=getCurve().keyFromPublic(arrayify(this.publicKey)),w=getCurve().keyFromPublic(arrayify(e));return"0x"+b.pub.add(w.pub).encodeCompressed("hex")}signDigest(e){const b=getCurve().keyFromPrivate(arrayify(this.privateKey)),w=arrayify(e);w.length!==32&&logger$7.throwArgumentError("bad digest length","digest",e);const $=b.sign(w,{canonical:!0});return splitSignature({recoveryParam:$.recoveryParam,r:hexZeroPad("0x"+$.r.toString(16),32),s:hexZeroPad("0x"+$.s.toString(16),32)})}computeSharedSecret(e){const b=getCurve().keyFromPrivate(arrayify(this.privateKey)),w=getCurve().keyFromPublic(arrayify(computePublicKey(e)));return hexZeroPad("0x"+b.derive(w.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey(t,e){const b=splitSignature(e),w={r:arrayify(b.r),s:arrayify(b.s)};return"0x"+getCurve().recoverPubKey(arrayify(t),w,b.recoveryParam).encode("hex",!1)}function computePublicKey(t,e){const b=arrayify(t);if(b.length===32){const w=new SigningKey(b);return e?"0x"+getCurve().keyFromPrivate(b).getPublic(!0,"hex"):w.publicKey}else{if(b.length===33)return e?hexlify(b):"0x"+getCurve().keyFromPublic(b).getPublic(!1,"hex");if(b.length===65)return e?"0x"+getCurve().keyFromPublic(b).getPublic(!0,"hex"):hexlify(b)}return logger$7.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$7="transactions/5.5.0",logger$6=new Logger(version$7);var TransactionTypes;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));function handleAddress(t){return t==="0x"?null:getAddress(t)}function handleNumber(t){return t==="0x"?Zero$1:BigNumber$1.from(t)}function computeAddress(t){const e=computePublicKey(t);return getAddress(hexDataSlice(keccak256(hexDataSlice(e,1)),12))}function recoverAddress(t,e){return computeAddress(recoverPublicKey(arrayify(t),e))}function formatNumber(t,e){const b=stripZeros(BigNumber$1.from(t).toHexString());return b.length>32&&logger$6.throwArgumentError("invalid length for "+e,"transaction:"+e,t),b}function accessSetify(t,e){return{address:getAddress(t),storageKeys:(e||[]).map((b,w)=>(hexDataLength(b)!==32&&logger$6.throwArgumentError("invalid access list storageKey",`accessList[${t}:${w}]`,b),b.toLowerCase()))}}function accessListify(t){if(Array.isArray(t))return t.map((b,w)=>Array.isArray(b)?(b.length>2&&logger$6.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${w}]`,b),accessSetify(b[0],b[1])):accessSetify(b.address,b.storageKeys));const e=Object.keys(t).map(b=>{const w=t[b].reduce(($,T)=>($[T]=!0,$),{});return accessSetify(b,Object.keys(w).sort())});return e.sort((b,w)=>b.address.localeCompare(w.address)),e}function formatAccessList(t){return accessListify(t).map(e=>[e.address,e.storageKeys])}function _serializeEip1559(t,e){if(t.gasPrice!=null){const w=BigNumber$1.from(t.gasPrice),$=BigNumber$1.from(t.maxFeePerGas||0);w.eq($)||logger$6.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:w,maxFeePerGas:$})}const b=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const w=splitSignature(e);b.push(formatNumber(w.recoveryParam,"recoveryParam")),b.push(stripZeros(w.r)),b.push(stripZeros(w.s))}return hexConcat(["0x02",encode$a(b)])}function _serializeEip2930(t,e){const b=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.gasPrice||0,"gasPrice"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const w=splitSignature(e);b.push(formatNumber(w.recoveryParam,"recoveryParam")),b.push(stripZeros(w.r)),b.push(stripZeros(w.s))}return hexConcat(["0x01",encode$a(b)])}function _parseEipSignature(t,e,b){try{const w=handleNumber(e[0]).toNumber();if(w!==0&&w!==1)throw new Error("bad recid");t.v=w}catch{logger$6.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=hexZeroPad(e[1],32),t.s=hexZeroPad(e[2],32);try{const w=keccak256(b(t));t.from=recoverAddress(w,{r:t.r,s:t.s,recoveryParam:t.v})}catch(w){console.log(w)}}function _parseEip1559(t){const e=decode$c(t.slice(1));e.length!==9&&e.length!==12&&logger$6.throwArgumentError("invalid component count for transaction type: 2","payload",hexlify(t));const b=handleNumber(e[2]),w=handleNumber(e[3]),$={type:2,chainId:handleNumber(e[0]).toNumber(),nonce:handleNumber(e[1]).toNumber(),maxPriorityFeePerGas:b,maxFeePerGas:w,gasPrice:null,gasLimit:handleNumber(e[4]),to:handleAddress(e[5]),value:handleNumber(e[6]),data:e[7],accessList:accessListify(e[8])};return e.length===9||($.hash=keccak256(t),_parseEipSignature($,e.slice(9),_serializeEip1559)),$}function _parseEip2930(t){const e=decode$c(t.slice(1));e.length!==8&&e.length!==11&&logger$6.throwArgumentError("invalid component count for transaction type: 1","payload",hexlify(t));const b={type:1,chainId:handleNumber(e[0]).toNumber(),nonce:handleNumber(e[1]).toNumber(),gasPrice:handleNumber(e[2]),gasLimit:handleNumber(e[3]),to:handleAddress(e[4]),value:handleNumber(e[5]),data:e[6],accessList:accessListify(e[7])};return e.length===8||(b.hash=keccak256(t),_parseEipSignature(b,e.slice(8),_serializeEip2930)),b}function _parse(t){const e=decode$c(t);e.length!==9&&e.length!==6&&logger$6.throwArgumentError("invalid raw transaction","rawTransaction",t);const b={nonce:handleNumber(e[0]).toNumber(),gasPrice:handleNumber(e[1]),gasLimit:handleNumber(e[2]),to:handleAddress(e[3]),value:handleNumber(e[4]),data:e[5],chainId:0};if(e.length===6)return b;try{b.v=BigNumber$1.from(e[6]).toNumber()}catch(w){return console.log(w),b}if(b.r=hexZeroPad(e[7],32),b.s=hexZeroPad(e[8],32),BigNumber$1.from(b.r).isZero()&&BigNumber$1.from(b.s).isZero())b.chainId=b.v,b.v=0;else{b.chainId=Math.floor((b.v-35)/2),b.chainId<0&&(b.chainId=0);let w=b.v-27;const $=e.slice(0,6);b.chainId!==0&&($.push(hexlify(b.chainId)),$.push("0x"),$.push("0x"),w-=b.chainId*2+8);const T=keccak256(encode$a($));try{b.from=recoverAddress(T,{r:hexlify(b.r),s:hexlify(b.s),recoveryParam:w})}catch(N){console.log(N)}b.hash=keccak256(t)}return b.type=null,b}function parse$1(t){const e=arrayify(t);if(e[0]>127)return _parse(e);switch(e[0]){case 1:return _parseEip2930(e);case 2:return _parseEip1559(e)}return logger$6.throwError(`unsupported transaction type: ${e[0]}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}class BaseX{constructor(e){defineReadOnly(this,"alphabet",e),defineReadOnly(this,"base",e.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",e.charAt(0));for(let b=0;b<e.length;b++)this._alphabetMap[e.charAt(b)]=b}encode(e){let b=arrayify(e);if(b.length===0)return"";let w=[0];for(let T=0;T<b.length;++T){let N=b[T];for(let C=0;C<w.length;++C)N+=w[C]<<8,w[C]=N%this.base,N=N/this.base|0;for(;N>0;)w.push(N%this.base),N=N/this.base|0}let $="";for(let T=0;b[T]===0&&T<b.length-1;++T)$+=this._leader;for(let T=w.length-1;T>=0;--T)$+=this.alphabet[w[T]];return $}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let b=[];if(e.length===0)return new Uint8Array(b);b.push(0);for(let w=0;w<e.length;w++){let $=this._alphabetMap[e[w]];if($===void 0)throw new Error("Non-base"+this.base+" character");let T=$;for(let N=0;N<b.length;++N)T+=b[N]*this.base,b[N]=T&255,T>>=8;for(;T>0;)b.push(T&255),T>>=8}for(let w=0;e[w]===this._leader&&w<e.length-1;++w)b.push(0);return arrayify(new Uint8Array(b.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),version$6="sha2/5.5.0";new Logger(version$6);function sha256$5(t){return"0x"+hash$3.sha256().update(arrayify(t)).digest("hex")}const version$5="networks/5.5.0",logger$5=new Logger(version$5);function isRenetworkable(t){return t&&typeof t.renetwork=="function"}function ethDefaultProvider(t){const e=function(b,w){w==null&&(w={});const $=[];if(b.InfuraProvider)try{$.push(new b.InfuraProvider(t,w.infura))}catch{}if(b.EtherscanProvider)try{$.push(new b.EtherscanProvider(t,w.etherscan))}catch{}if(b.AlchemyProvider)try{$.push(new b.AlchemyProvider(t,w.alchemy))}catch{}if(b.PocketProvider){const T=["goerli","ropsten","rinkeby"];try{const N=new b.PocketProvider(t);N.network&&T.indexOf(N.network.name)===-1&&$.push(N)}catch{}}if(b.CloudflareProvider)try{$.push(new b.CloudflareProvider(t))}catch{}if($.length===0)return null;if(b.FallbackProvider){let T=1;return w.quorum!=null?T=w.quorum:t==="homestead"&&(T=2),new b.FallbackProvider($,T)}return $[0]};return e.renetwork=function(b){return ethDefaultProvider(b)},e}function etcDefaultProvider(t,e){const b=function(w,$){return w.JsonRpcProvider?new w.JsonRpcProvider(t,e):null};return b.renetwork=function(w){return etcDefaultProvider(t,w)},b}const homestead={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ethDefaultProvider("homestead")},ropsten={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ethDefaultProvider("ropsten")},classicMordor={chainId:63,name:"classicMordor",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/mordor","classicMordor")},networks$2={unspecified:{chainId:0,name:"unspecified"},homestead,mainnet:homestead,morden:{chainId:2,name:"morden"},ropsten,testnet:ropsten,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ethDefaultProvider("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ethDefaultProvider("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ethDefaultProvider("goerli")},classic:{chainId:61,name:"classic",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor,classicTestnet:classicMordor,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function getNetwork(t){if(t==null)return null;if(typeof t=="number"){for(const w in networks$2){const $=networks$2[w];if($.chainId===t)return{name:$.name,chainId:$.chainId,ensAddress:$.ensAddress||null,_defaultProvider:$._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const w=networks$2[t];return w==null?null:{name:w.name,chainId:w.chainId,ensAddress:w.ensAddress,_defaultProvider:w._defaultProvider||null}}const e=networks$2[t.name];if(!e)return typeof t.chainId!="number"&&logger$5.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&logger$5.throwArgumentError("network chainId mismatch","network",t);let b=t._defaultProvider||null;return b==null&&e._defaultProvider&&(isRenetworkable(e._defaultProvider)?b=e._defaultProvider.renetwork(t):b=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:b}}function encode$9(t){t=arrayify(t);let e="";for(let b=0;b<t.length;b++)e+=String.fromCharCode(t[b]);return btoa(e)}const version$4="web/5.5.0";var __awaiter$7=globalThis&&globalThis.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};function getUrl(t,e){return __awaiter$7(this,void 0,void 0,function*(){e==null&&(e={});const b={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};e.skipFetchSetup!==!0&&(b.mode="cors",b.cache="no-cache",b.credentials="same-origin",b.redirect="follow",b.referrer="client");const w=yield fetch(t,b),$=yield w.arrayBuffer(),T={};return w.headers.forEach?w.headers.forEach((N,C)=>{T[C.toLowerCase()]=N}):w.headers.keys().forEach(N=>{T[N.toLowerCase()]=w.headers.get(N)}),{headers:T,statusCode:w.status,statusMessage:w.statusText,body:arrayify(new Uint8Array($))}})}var __awaiter$6=globalThis&&globalThis.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};const logger$4=new Logger(version$4);function staller(t){return new Promise(e=>{setTimeout(e,t)})}function bodyify(t,e){if(t==null)return null;if(typeof t=="string")return t;if(isBytesLike(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return toUtf8String(t)}catch{}return hexlify(t)}return t}function _fetchData(t,e,b){const w=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;logger$4.assertArgument(w>0&&w%1==0,"invalid connection throttle limit","connection.throttleLimit",w);const $=typeof t=="object"?t.throttleCallback:null,T=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;logger$4.assertArgument(T>0&&T%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",T);const N={};let C=null;const F={method:"GET"};let G=!1,J=2*60*1e3;if(typeof t=="string")C=t;else if(typeof t=="object"){if((t==null||t.url==null)&&logger$4.throwArgumentError("missing URL","connection.url",t),C=t.url,typeof t.timeout=="number"&&t.timeout>0&&(J=t.timeout),t.headers)for(const ue in t.headers)N[ue.toLowerCase()]={key:ue,value:String(t.headers[ue])},["if-none-match","if-modified-since"].indexOf(ue.toLowerCase())>=0&&(G=!0);if(F.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){C.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&logger$4.throwError("basic authentication requires a secure https url",Logger.errors.INVALID_ARGUMENT,{argument:"url",url:C,user:t.user,password:"[REDACTED]"});const ue=t.user+":"+t.password;N.authorization={key:"Authorization",value:"Basic "+encode$9(toUtf8Bytes(ue))}}}e&&(F.method="POST",F.body=e,N["content-type"]==null&&(N["content-type"]={key:"Content-Type",value:"application/octet-stream"}),N["content-length"]==null&&(N["content-length"]={key:"Content-Length",value:String(e.length)}));const Z={};Object.keys(N).forEach(ue=>{const ne=N[ue];Z[ne.key]=ne.value}),F.headers=Z;const re=function(){let ue=null;return{promise:new Promise(function(ae,ye){J&&(ue=setTimeout(()=>{ue!=null&&(ue=null,ye(logger$4.makeError("timeout",Logger.errors.TIMEOUT,{requestBody:bodyify(F.body,Z["content-type"]),requestMethod:F.method,timeout:J,url:C})))},J))}),cancel:function(){ue!=null&&(clearTimeout(ue),ue=null)}}}(),ie=function(){return __awaiter$6(this,void 0,void 0,function*(){for(let ue=0;ue<w;ue++){let ne=null;try{if(ne=yield getUrl(C,F),ne.statusCode===429&&ue<w){let ae=!0;if($&&(ae=yield $(ue,C)),ae){let ye=0;const $e=ne.headers["retry-after"];typeof $e=="string"&&$e.match(/^[1-9][0-9]*$/)?ye=parseInt($e)*1e3:ye=T*parseInt(String(Math.random()*Math.pow(2,ue))),yield staller(ye);continue}}}catch(ae){ne=ae.response,ne==null&&(re.cancel(),logger$4.throwError("missing response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(F.body,Z["content-type"]),requestMethod:F.method,serverError:ae,url:C}))}let ce=ne.body;if(G&&ne.statusCode===304?ce=null:(ne.statusCode<200||ne.statusCode>=300)&&(re.cancel(),logger$4.throwError("bad response",Logger.errors.SERVER_ERROR,{status:ne.statusCode,headers:ne.headers,body:bodyify(ce,ne.headers?ne.headers["content-type"]:null),requestBody:bodyify(F.body,Z["content-type"]),requestMethod:F.method,url:C})),b)try{const ae=yield b(ce,ne);return re.cancel(),ae}catch(ae){if(ae.throttleRetry&&ue<w){let ye=!0;if($&&(ye=yield $(ue,C)),ye){const $e=T*parseInt(String(Math.random()*Math.pow(2,ue)));yield staller($e);continue}}re.cancel(),logger$4.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(ce,ne.headers?ne.headers["content-type"]:null),error:ae,requestBody:bodyify(F.body,Z["content-type"]),requestMethod:F.method,url:C})}return re.cancel(),ce}return logger$4.throwError("failed response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(F.body,Z["content-type"]),requestMethod:F.method,url:C})})}();return Promise.race([re.promise,ie])}function fetchJson$3(t,e,b){let w=(T,N)=>{let C=null;if(T!=null)try{C=JSON.parse(toUtf8String(T))}catch(F){logger$4.throwError("invalid JSON",Logger.errors.SERVER_ERROR,{body:T,error:F})}return b&&(C=b(C,N)),C},$=null;if(e!=null){$=toUtf8Bytes(e);const T=typeof t=="string"?{url:t}:shallowCopy(t);T.headers?Object.keys(T.headers).filter(C=>C.toLowerCase()==="content-type").length!==0||(T.headers=shallowCopy(T.headers),T.headers["content-type"]="application/json"):T.headers={"content-type":"application/json"},t=T}return _fetchData(t,$,w)}function poll(t,e){return e||(e={}),e=shallowCopy(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(b,w){let $=null,T=!1;const N=()=>T?!1:(T=!0,$&&clearTimeout($),!0);e.timeout&&($=setTimeout(()=>{N()&&w(new Error("timeout"))},e.timeout));const C=e.retryLimit;let F=0;function G(){return t().then(function(J){if(J!==void 0)N()&&b(J);else if(e.oncePoll)e.oncePoll.once("poll",G);else if(e.onceBlock)e.onceBlock.once("block",G);else if(!T){if(F++,F>C){N()&&w(new Error("retry limit reached"));return}let Z=e.interval*parseInt(String(Math.random()*Math.pow(2,F)));Z<e.floor&&(Z=e.floor),Z>e.ceiling&&(Z=e.ceiling),setTimeout(G,Z)}return null},function(J){N()&&w(J)})}G()})}var ALPHABET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(var z=0;z<ALPHABET$1.length;z++){var x$1=ALPHABET$1.charAt(z);if(ALPHABET_MAP[x$1]!==void 0)throw new TypeError(x$1+" is ambiguous");ALPHABET_MAP[x$1]=z}function polymodStep(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function prefixChk(t){for(var e=1,b=0;b<t.length;++b){var w=t.charCodeAt(b);if(w<33||w>126)return"Invalid prefix ("+t+")";e=polymodStep(e)^w>>5}for(e=polymodStep(e),b=0;b<t.length;++b){var $=t.charCodeAt(b);e=polymodStep(e)^$&31}return e}function encode$8(t,e,b){if(b=b||90,t.length+7+e.length>b)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var w=prefixChk(t);if(typeof w=="string")throw new Error(w);for(var $=t+"1",T=0;T<e.length;++T){var N=e[T];if(N>>5!=0)throw new Error("Non 5-bit word");w=polymodStep(w)^N,$+=ALPHABET$1.charAt(N)}for(T=0;T<6;++T)w=polymodStep(w);for(w^=1,T=0;T<6;++T){var C=w>>(5-T)*5&31;$+=ALPHABET$1.charAt(C)}return $}function __decode(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var b=t.toLowerCase(),w=t.toUpperCase();if(t!==b&&t!==w)return"Mixed-case string "+t;t=b;var $=t.lastIndexOf("1");if($===-1)return"No separator character for "+t;if($===0)return"Missing prefix for "+t;var T=t.slice(0,$),N=t.slice($+1);if(N.length<6)return"Data too short";var C=prefixChk(T);if(typeof C=="string")return C;for(var F=[],G=0;G<N.length;++G){var J=N.charAt(G),Z=ALPHABET_MAP[J];if(Z===void 0)return"Unknown character "+J;C=polymodStep(C)^Z,!(G+6>=N.length)&&F.push(Z)}return C!==1?"Invalid checksum for "+t:{prefix:T,words:F}}function decodeUnsafe(){var t=__decode.apply(null,arguments);if(typeof t=="object")return t}function decode$b(t){var e=__decode.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function convert(t,e,b,w){for(var $=0,T=0,N=(1<<b)-1,C=[],F=0;F<t.length;++F)for($=$<<e|t[F],T+=e;T>=b;)T-=b,C.push($>>T&N);if(w)T>0&&C.push($<<b-T&N);else{if(T>=e)return"Excess padding";if($<<b-T&N)return"Non-zero padding"}return C}function toWordsUnsafe(t){var e=convert(t,8,5,!0);if(Array.isArray(e))return e}function toWords(t){var e=convert(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function fromWordsUnsafe(t){var e=convert(t,5,8,!1);if(Array.isArray(e))return e}function fromWords(t){var e=convert(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var bech32={decodeUnsafe,decode:decode$b,encode:encode$8,toWordsUnsafe,toWords,fromWordsUnsafe,fromWords};const version$3="providers/5.5.0",logger$3=new Logger(version$3);class Formatter{constructor(){logger$3.checkNew(new.target,Formatter),this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},b=this.address.bind(this),w=this.bigNumber.bind(this),$=this.blockTag.bind(this),T=this.data.bind(this),N=this.hash.bind(this),C=this.hex.bind(this),F=this.number.bind(this),G=this.type.bind(this),J=Z=>this.data(Z,!0);return e.transaction={hash:N,type:G,accessList:Formatter.allowNull(this.accessList.bind(this),null),blockHash:Formatter.allowNull(N,null),blockNumber:Formatter.allowNull(F,null),transactionIndex:Formatter.allowNull(F,null),confirmations:Formatter.allowNull(F,null),from:b,gasPrice:Formatter.allowNull(w),maxPriorityFeePerGas:Formatter.allowNull(w),maxFeePerGas:Formatter.allowNull(w),gasLimit:w,to:Formatter.allowNull(b,null),value:w,nonce:F,data:T,r:Formatter.allowNull(this.uint256),s:Formatter.allowNull(this.uint256),v:Formatter.allowNull(F),creates:Formatter.allowNull(b,null),raw:Formatter.allowNull(T)},e.transactionRequest={from:Formatter.allowNull(b),nonce:Formatter.allowNull(F),gasLimit:Formatter.allowNull(w),gasPrice:Formatter.allowNull(w),maxPriorityFeePerGas:Formatter.allowNull(w),maxFeePerGas:Formatter.allowNull(w),to:Formatter.allowNull(b),value:Formatter.allowNull(w),data:Formatter.allowNull(J),type:Formatter.allowNull(F),accessList:Formatter.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:F,blockNumber:F,transactionHash:N,address:b,topics:Formatter.arrayOf(N),data:T,logIndex:F,blockHash:N},e.receipt={to:Formatter.allowNull(this.address,null),from:Formatter.allowNull(this.address,null),contractAddress:Formatter.allowNull(b,null),transactionIndex:F,root:Formatter.allowNull(C),gasUsed:w,logsBloom:Formatter.allowNull(T),blockHash:N,transactionHash:N,logs:Formatter.arrayOf(this.receiptLog.bind(this)),blockNumber:F,confirmations:Formatter.allowNull(F,null),cumulativeGasUsed:w,effectiveGasPrice:Formatter.allowNull(w),status:Formatter.allowNull(F),type:G},e.block={hash:N,parentHash:N,number:F,timestamp:F,nonce:Formatter.allowNull(C),difficulty:this.difficulty.bind(this),gasLimit:w,gasUsed:w,miner:b,extraData:T,transactions:Formatter.allowNull(Formatter.arrayOf(N)),baseFeePerGas:Formatter.allowNull(w)},e.blockWithTransactions=shallowCopy(e.block),e.blockWithTransactions.transactions=Formatter.allowNull(Formatter.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Formatter.allowNull($,void 0),toBlock:Formatter.allowNull($,void 0),blockHash:Formatter.allowNull(N,void 0),address:Formatter.allowNull(b,void 0),topics:Formatter.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Formatter.allowNull(F),blockHash:Formatter.allowNull(N),transactionIndex:F,removed:Formatter.allowNull(this.boolean.bind(this)),address:b,data:Formatter.allowFalsish(T,"0x"),topics:Formatter.arrayOf(N),transactionHash:N,logIndex:F},e}accessList(e){return accessListify(e||[])}number(e){return e==="0x"?0:BigNumber$1.from(e).toNumber()}type(e){return e==="0x"||e==null?0:BigNumber$1.from(e).toNumber()}bigNumber(e){return BigNumber$1.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,b){return typeof e=="string"&&(!b&&e.substring(0,2)!=="0x"&&(e="0x"+e),isHexString(e))?e.toLowerCase():logger$3.throwArgumentError("invalid hash","value",e)}data(e,b){const w=this.hex(e,b);if(w.length%2!=0)throw new Error("invalid data; odd-length - "+e);return w}address(e){return getAddress(e)}callAddress(e){if(!isHexString(e,32))return null;const b=getAddress(hexDataSlice(e,12));return b===AddressZero?null:b}contractAddress(e){return getContractAddress(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";if(e==="latest"||e==="pending")return e;if(typeof e=="number"||isHexString(e))return hexValue(e);throw new Error("invalid blockTag")}hash(e,b){const w=this.hex(e,b);return hexDataLength(w)!==32?logger$3.throwArgumentError("invalid hash","value",e):w}difficulty(e){if(e==null)return null;const b=BigNumber$1.from(e);try{return b.toNumber()}catch{}return null}uint256(e){if(!isHexString(e))throw new Error("invalid uint256");return hexZeroPad(e,32)}_block(e,b){e.author!=null&&e.miner==null&&(e.miner=e.author);const w=e._difficulty!=null?e._difficulty:e.difficulty,$=Formatter.check(b,e);return $._difficulty=w==null?null:BigNumber$1.from(w),$}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Formatter.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&BigNumber$1.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const b=Formatter.check(this.formats.transaction,e);if(e.chainId!=null){let w=e.chainId;isHexString(w)&&(w=BigNumber$1.from(w).toNumber()),b.chainId=w}else{let w=e.networkId;w==null&&b.v==null&&(w=e.chainId),isHexString(w)&&(w=BigNumber$1.from(w).toNumber()),typeof w!="number"&&b.v!=null&&(w=(b.v-35)/2,w<0&&(w=0),w=parseInt(w)),typeof w!="number"&&(w=0),b.chainId=w}return b.blockHash&&b.blockHash.replace(/0/g,"")==="x"&&(b.blockHash=null),b}transaction(e){return parse$1(e)}receiptLog(e){return Formatter.check(this.formats.receiptLog,e)}receipt(e){const b=Formatter.check(this.formats.receipt,e);if(b.root!=null)if(b.root.length<=4){const w=BigNumber$1.from(b.root).toNumber();w===0||w===1?(b.status!=null&&b.status!==w&&logger$3.throwArgumentError("alt-root-status/status mismatch","value",{root:b.root,status:b.status}),b.status=w,delete b.root):logger$3.throwArgumentError("invalid alt-root-status","value.root",b.root)}else b.root.length!==66&&logger$3.throwArgumentError("invalid root hash","value.root",b.root);return b.status!=null&&(b.byzantium=!0),b}topics(e){return Array.isArray(e)?e.map(b=>this.topics(b)):e!=null?this.hash(e,!0):null}filter(e){return Formatter.check(this.formats.filter,e)}filterLog(e){return Formatter.check(this.formats.filterLog,e)}static check(e,b){const w={};for(const $ in e)try{const T=e[$](b[$]);T!==void 0&&(w[$]=T)}catch(T){throw T.checkKey=$,T.checkValue=b[$],T}return w}static allowNull(e,b){return function(w){return w==null?b:e(w)}}static allowFalsish(e,b){return function(w){return w?e(w):b}}static arrayOf(e){return function(b){if(!Array.isArray(b))throw new Error("not an array");const w=[];return b.forEach(function($){w.push(e($))}),w}}}var __awaiter$5=globalThis&&globalThis.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};const logger$2=new Logger(version$3);function checkTopic(t){return t==null?"null":(hexDataLength(t)!==32&&logger$2.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function serializeTopics(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const b={};e.forEach($=>{b[checkTopic($)]=!0});const w=Object.keys(b);return w.sort(),w.join("|")}else return checkTopic(e)}).join("&")}function deserializeTopics(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const b=e.split("|").map(w=>w==="null"?null:w);return b.length===1?b[0]:b})}function getEventTag(t){if(typeof t=="string"){if(t=t.toLowerCase(),hexDataLength(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+serializeTopics(t);if(ForkEvent.isForkEvent(t))throw logger$2.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+serializeTopics(t.topics||[])}throw new Error("invalid event - "+t)}function getTime(){return new Date().getTime()}function stall(t){return new Promise(e=>{setTimeout(e,t)})}const PollableEvents=["block","network","pending","poll"];class Event{constructor(e,b,w){defineReadOnly(this,"tag",e),defineReadOnly(this,"listener",b),defineReadOnly(this,"once",w)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const b=e[1],w=deserializeTopics(e[2]),$={};return w.length>0&&($.topics=w),b&&b!=="*"&&($.address=b),$}pollable(){return this.tag.indexOf(":")>=0||PollableEvents.indexOf(this.tag)>=0}}const coinInfos={"0":{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},"2":{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},"3":{symbol:"doge",p2pkh:30,p2sh:22},"60":{symbol:"eth",ilk:"eth"},"61":{symbol:"etc",ilk:"eth"},"700":{symbol:"xdai",ilk:"eth"}};function bytes32ify(t){return hexZeroPad(BigNumber$1.from(t).toHexString(),32)}function base58Encode(t){return Base58.encode(concat$e([t,hexDataSlice(sha256$5(sha256$5(t)),0,4)]))}const matchers=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),new RegExp("^(ipfs)://(.*)$","i"),new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _parseString(t){try{return toUtf8String(_parseBytes(t))}catch{}return null}function _parseBytes(t){if(t==="0x")return null;const e=BigNumber$1.from(hexDataSlice(t,0,32)).toNumber(),b=BigNumber$1.from(hexDataSlice(t,e,e+32)).toNumber();return hexDataSlice(t,e+32,e+32+b)}class Resolver$1{constructor(e,b,w,$){defineReadOnly(this,"provider",e),defineReadOnly(this,"name",w),defineReadOnly(this,"address",e.formatter.address(b)),defineReadOnly(this,"_resolvedAddress",$)}_fetchBytes(e,b){return __awaiter$5(this,void 0,void 0,function*(){const w={to:this.address,data:hexConcat([e,namehash(this.name),b||"0x"])};try{return _parseBytes(yield this.provider.call(w))}catch($){return $.code===Logger.errors.CALL_EXCEPTION,null}})}_getAddress(e,b){const w=coinInfos[String(e)];if(w==null&&logger$2.throwError(`unsupported coin type: ${e}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),w.ilk==="eth")return this.provider.formatter.address(b);const $=arrayify(b);if(w.p2pkh!=null){const T=b.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(T){const N=parseInt(T[1],16);if(T[2].length===N*2&&N>=1&&N<=75)return base58Encode(concat$e([[w.p2pkh],"0x"+T[2]]))}}if(w.p2sh!=null){const T=b.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(T){const N=parseInt(T[1],16);if(T[2].length===N*2&&N>=1&&N<=75)return base58Encode(concat$e([[w.p2sh],"0x"+T[2]]))}}if(w.prefix!=null){const T=$[1];let N=$[0];if(N===0?T!==20&&T!==32&&(N=-1):N=-1,N>=0&&$.length===2+T&&T>=1&&T<=75){const C=bech32.toWords($.slice(2));return C.unshift(N),bech32.encode(w.prefix,C)}}return null}getAddress(e){return __awaiter$5(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const $={to:this.address,data:"0x3b3b57de"+namehash(this.name).substring(2)},T=yield this.provider.call($);return T==="0x"||T===HashZero?null:this.provider.formatter.callAddress(T)}catch($){if($.code===Logger.errors.CALL_EXCEPTION)return null;throw $}const b=yield this._fetchBytes("0xf1cb7e06",bytes32ify(e));if(b==null||b==="0x")return null;const w=this._getAddress(e,b);return w==null&&logger$2.throwError("invalid or unsupported coin data",Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:b}),w})}getAvatar(){return __awaiter$5(this,void 0,void 0,function*(){const e=[];try{const b=yield this.getText("avatar");if(b==null)return null;for(let w=0;w<matchers.length;w++){const $=b.match(matchers[w]);if($!=null)switch($[1]){case"https":return e.push({type:"url",content:b}),{linkage:e,url:b};case"data":return e.push({type:"data",content:b}),{linkage:e,url:b};case"ipfs":return e.push({type:"ipfs",content:b}),{linkage:e,url:`https://gateway.ipfs.io/ipfs/${b.substring(7)}`};case"erc721":case"erc1155":{const T=$[1]==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:$[1],content:b});const N=this._resolvedAddress||(yield this.getAddress()),C=($[2]||"").split("/");if(C.length!==2)return null;const F=yield this.provider.formatter.address(C[0]),G=hexZeroPad(BigNumber$1.from(C[1]).toHexString(),32);if($[1]==="erc721"){const ie=this.provider.formatter.callAddress(yield this.provider.call({to:F,data:hexConcat(["0x6352211e",G])}));if(N!==ie)return null;e.push({type:"owner",content:ie})}else if($[1]==="erc1155"){const ie=BigNumber$1.from(yield this.provider.call({to:F,data:hexConcat(["0x00fdd58e",hexZeroPad(N,32),G])}));if(ie.isZero())return null;e.push({type:"balance",content:ie.toString()})}const J={to:this.provider.formatter.address(C[0]),data:hexConcat([T,G])};let Z=_parseString(yield this.provider.call(J));if(Z==null)return null;e.push({type:"metadata-url",content:Z}),$[1]==="erc1155"&&(Z=Z.replace("{id}",G.substring(2)));const re=yield fetchJson$3(Z);return!re||typeof re.image!="string"||!re.image.match(/^https:\/\//i)?null:(e.push({type:"metadata",content:JSON.stringify(re)}),e.push({type:"url",content:re.image}),{linkage:e,url:re.image})}}}}catch{}return null})}getContentHash(){return __awaiter$5(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const b=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(b){const $=parseInt(b[3],16);if(b[4].length===$*2)return"ipfs://"+Base58.encode("0x"+b[1])}const w=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);return w&&w[1].length===32*2?"bzz://"+w[1]:logger$2.throwError("invalid or unsupported content hash data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return __awaiter$5(this,void 0,void 0,function*(){let b=toUtf8Bytes(e);b=concat$e([bytes32ify(64),bytes32ify(b.length),b]),b.length%32!=0&&(b=concat$e([b,hexZeroPad("0x",32-e.length%32)]));const w=yield this._fetchBytes("0x59d1d43c",hexlify(b));return w==null||w==="0x"?null:toUtf8String(w)})}}let defaultFormatter=null,nextPollId=1;class BaseProvider extends Provider{constructor(e){logger$2.checkNew(new.target,Provider);super();if(this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),defineReadOnly(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(b=>{}),this._ready().catch(b=>{});else{const b=getStatic(new.target,"getNetwork")(e);b?(defineReadOnly(this,"_network",b),this.emit("network",b,null)):logger$2.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return __awaiter$5(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||logger$2.throwError("no network detected",Logger.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:defineReadOnly(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return poll(()=>this._ready().then(e=>e,e=>{if(!(e.code===Logger.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return defaultFormatter==null&&(defaultFormatter=new Formatter),defaultFormatter}static getNetwork(e){return getNetwork(e==null?"homestead":e)}_getInternalBlockNumber(e){return __awaiter$5(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const $=this._internalBlockNumber;try{const T=yield $;if(getTime()-T.respTime<=e)return T.blockNumber;break}catch{if(this._internalBlockNumber===$)break}}const b=getTime(),w=resolveProperties({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then($=>null,$=>$)}).then(({blockNumber:$,networkError:T})=>{if(T)throw this._internalBlockNumber===w&&(this._internalBlockNumber=null),T;const N=getTime();return $=BigNumber$1.from($).toNumber(),$<this._maxInternalBlockNumber&&($=this._maxInternalBlockNumber),this._maxInternalBlockNumber=$,this._setFastBlockNumber($),{blockNumber:$,reqTime:b,respTime:N}});return this._internalBlockNumber=w,w.catch($=>{this._internalBlockNumber===w&&(this._internalBlockNumber=null)}),(yield w).blockNumber})}poll(){return __awaiter$5(this,void 0,void 0,function*(){const e=nextPollId++,b=[];let w=null;try{w=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch($){this.emit("error",$);return}if(this._setFastBlockNumber(w),this.emit("poll",e,w),w===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=w-1),Math.abs(this._emitted.block-w)>1e3)logger$2.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${w})`),this.emit("error",logger$2.makeError("network block skew detected",Logger.errors.NETWORK_ERROR,{blockNumber:w,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",w);else for(let $=this._emitted.block+1;$<=w;$++)this.emit("block",$);this._emitted.block!==w&&(this._emitted.block=w,Object.keys(this._emitted).forEach($=>{if($==="block")return;const T=this._emitted[$];T!=="pending"&&w-T>12&&delete this._emitted[$]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=w-1),this._events.forEach($=>{switch($.type){case"tx":{const T=$.hash;let N=this.getTransactionReceipt(T).then(C=>(!C||C.blockNumber==null||(this._emitted["t:"+T]=C.blockNumber,this.emit(T,C)),null)).catch(C=>{this.emit("error",C)});b.push(N);break}case"filter":{const T=$.filter;T.fromBlock=this._lastBlockNumber+1,T.toBlock=w;const N=this.getLogs(T).then(C=>{C.length!==0&&C.forEach(F=>{this._emitted["b:"+F.blockHash]=F.blockNumber,this._emitted["t:"+F.transactionHash]=F.blockNumber,this.emit(T,F)})}).catch(C=>{this.emit("error",C)});b.push(N);break}}}),this._lastBlockNumber=w,Promise.all(b).then(()=>{this.emit("didPoll",e)}).catch($=>{this.emit("error",$)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return __awaiter$5(this,void 0,void 0,function*(){return logger$2.throwError("provider does not support network detection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return __awaiter$5(this,void 0,void 0,function*(){const e=yield this._ready(),b=yield this.detectNetwork();if(e.chainId!==b.chainId){if(this.anyNetwork)return this._network=b,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",b,e),yield stall(0),this._network;const w=logger$2.makeError("underlying network changed",Logger.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:b});throw this.emit("error",w),w}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=getTime();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(b=>((this._fastBlockNumber==null||b>this._fastBlockNumber)&&(this._fastBlockNumber=b),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=getTime(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,b,w){return __awaiter$5(this,void 0,void 0,function*(){return this._waitForTransaction(e,b==null?1:b,w||0,null)})}_waitForTransaction(e,b,w,$){return __awaiter$5(this,void 0,void 0,function*(){const T=yield this.getTransactionReceipt(e);return(T?T.confirmations:0)>=b?T:new Promise((N,C)=>{const F=[];let G=!1;const J=function(){return G?!0:(G=!0,F.forEach(re=>{re()}),!1)},Z=re=>{re.confirmations<b||J()||N(re)};if(this.on(e,Z),F.push(()=>{this.removeListener(e,Z)}),$){let re=$.startBlock,ie=null;const ue=ne=>__awaiter$5(this,void 0,void 0,function*(){G||(yield stall(1e3),this.getTransactionCount($.from).then(ce=>__awaiter$5(this,void 0,void 0,function*(){if(!G){if(ce<=$.nonce)re=ne;else{{const ae=yield this.getTransaction(e);if(ae&&ae.blockNumber!=null)return}for(ie==null&&(ie=re-3,ie<$.startBlock&&(ie=$.startBlock));ie<=ne;){if(G)return;const ae=yield this.getBlockWithTransactions(ie);for(let ye=0;ye<ae.transactions.length;ye++){const $e=ae.transactions[ye];if($e.hash===e)return;if($e.from===$.from&&$e.nonce===$.nonce){if(G)return;const _e=yield this.waitForTransaction($e.hash,b);if(J())return;let be="replaced";$e.data===$.data&&$e.to===$.to&&$e.value.eq($.value)?be="repriced":$e.data==="0x"&&$e.from===$e.to&&$e.value.isZero()&&(be="cancelled"),C(logger$2.makeError("transaction was replaced",Logger.errors.TRANSACTION_REPLACED,{cancelled:be==="replaced"||be==="cancelled",reason:be,replacement:this._wrapTransaction($e),hash:e,receipt:_e}));return}}ie++}}G||this.once("block",ue)}}),ce=>{G||this.once("block",ue)}))});if(G)return;this.once("block",ue),F.push(()=>{this.removeListener("block",ue)})}if(typeof w=="number"&&w>0){const re=setTimeout(()=>{J()||C(logger$2.makeError("timeout exceeded",Logger.errors.TIMEOUT,{timeout:w}))},w);re.unref&&re.unref(),F.push(()=>{clearTimeout(re)})}})})}getBlockNumber(){return __awaiter$5(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return BigNumber$1.from(e)}catch(b){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:b})}})}getBalance(e,b){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const w=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(b)}),$=yield this.perform("getBalance",w);try{return BigNumber$1.from($)}catch(T){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getBalance",params:w,result:$,error:T})}})}getTransactionCount(e,b){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const w=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(b)}),$=yield this.perform("getTransactionCount",w);try{return BigNumber$1.from($).toNumber()}catch(T){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getTransactionCount",params:w,result:$,error:T})}})}getCode(e,b){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const w=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(b)}),$=yield this.perform("getCode",w);try{return hexlify($)}catch(T){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getCode",params:w,result:$,error:T})}})}getStorageAt(e,b,w){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const $=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(w),position:Promise.resolve(b).then(N=>hexValue(N))}),T=yield this.perform("getStorageAt",$);try{return hexlify(T)}catch(N){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getStorageAt",params:$,result:T,error:N})}})}_wrapTransaction(e,b,w){if(b!=null&&hexDataLength(b)!==32)throw new Error("invalid response - sendTransaction");const $=e;return b!=null&&e.hash!==b&&logger$2.throwError("Transaction hash mismatch from Provider.sendTransaction.",Logger.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:b}),$.wait=(T,N)=>__awaiter$5(this,void 0,void 0,function*(){T==null&&(T=1),N==null&&(N=0);let C;T!==0&&w!=null&&(C={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:w});const F=yield this._waitForTransaction(e.hash,T,N,C);return F==null&&T===0?null:(this._emitted["t:"+e.hash]=F.blockNumber,F.status===0&&logger$2.throwError("transaction failed",Logger.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:F}),F)}),$}sendTransaction(e){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const b=yield Promise.resolve(e).then(T=>hexlify(T)),w=this.formatter.transaction(e);w.confirmations==null&&(w.confirmations=0);const $=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const T=yield this.perform("sendTransaction",{signedTransaction:b});return this._wrapTransaction(w,T,$)}catch(T){throw T.transaction=w,T.transactionHash=w.hash,T}})}_getTransactionRequest(e){return __awaiter$5(this,void 0,void 0,function*(){const b=yield e,w={};return["from","to"].forEach($=>{b[$]!=null&&(w[$]=Promise.resolve(b[$]).then(T=>T?this._getAddress(T):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach($=>{b[$]!=null&&(w[$]=Promise.resolve(b[$]).then(T=>T?BigNumber$1.from(T):null))}),["type"].forEach($=>{b[$]!=null&&(w[$]=Promise.resolve(b[$]).then(T=>T!=null?T:null))}),b.accessList&&(w.accessList=this.formatter.accessList(b.accessList)),["data"].forEach($=>{b[$]!=null&&(w[$]=Promise.resolve(b[$]).then(T=>T?hexlify(T):null))}),this.formatter.transactionRequest(yield resolveProperties(w))})}_getFilter(e){return __awaiter$5(this,void 0,void 0,function*(){e=yield e;const b={};return e.address!=null&&(b.address=this._getAddress(e.address)),["blockHash","topics"].forEach(w=>{e[w]!=null&&(b[w]=e[w])}),["fromBlock","toBlock"].forEach(w=>{e[w]!=null&&(b[w]=this._getBlockTag(e[w]))}),this.formatter.filter(yield resolveProperties(b))})}call(e,b){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const w=yield resolveProperties({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(b)}),$=yield this.perform("call",w);try{return hexlify($)}catch(T){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"call",params:w,result:$,error:T})}})}estimateGas(e){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const b=yield resolveProperties({transaction:this._getTransactionRequest(e)}),w=yield this.perform("estimateGas",b);try{return BigNumber$1.from(w)}catch($){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"estimateGas",params:b,result:w,error:$})}})}_getAddress(e){return __awaiter$5(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&logger$2.throwArgumentError("invalid address or ENS name","name",e);const b=yield this.resolveName(e);return b==null&&logger$2.throwError("ENS name not configured",Logger.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),b})}_getBlock(e,b){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let w=-128;const $={includeTransactions:!!b};if(isHexString(e,32))$.blockHash=e;else try{$.blockTag=yield this._getBlockTag(e),isHexString($.blockTag)&&(w=parseInt($.blockTag.substring(2),16))}catch{logger$2.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return poll(()=>__awaiter$5(this,void 0,void 0,function*(){const T=yield this.perform("getBlock",$);if(T==null)return $.blockHash!=null&&this._emitted["b:"+$.blockHash]==null||$.blockTag!=null&&w>this._emitted.block?null:void 0;if(b){let N=null;for(let F=0;F<T.transactions.length;F++){const G=T.transactions[F];if(G.blockNumber==null)G.confirmations=0;else if(G.confirmations==null){N==null&&(N=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let J=N-G.blockNumber+1;J<=0&&(J=1),G.confirmations=J}}const C=this.formatter.blockWithTransactions(T);return C.transactions=C.transactions.map(F=>this._wrapTransaction(F)),C}return this.formatter.block(T)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const b={transactionHash:this.formatter.hash(e,!0)};return poll(()=>__awaiter$5(this,void 0,void 0,function*(){const w=yield this.perform("getTransaction",b);if(w==null)return this._emitted["t:"+e]==null?null:void 0;const $=this.formatter.transactionResponse(w);if($.blockNumber==null)$.confirmations=0;else if($.confirmations==null){let N=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-$.blockNumber+1;N<=0&&(N=1),$.confirmations=N}return this._wrapTransaction($)}),{oncePoll:this})})}getTransactionReceipt(e){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const b={transactionHash:this.formatter.hash(e,!0)};return poll(()=>__awaiter$5(this,void 0,void 0,function*(){const w=yield this.perform("getTransactionReceipt",b);if(w==null)return this._emitted["t:"+e]==null?null:void 0;if(w.blockHash==null)return;const $=this.formatter.receipt(w);if($.blockNumber==null)$.confirmations=0;else if($.confirmations==null){let N=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-$.blockNumber+1;N<=0&&(N=1),$.confirmations=N}return $}),{oncePoll:this})})}getLogs(e){return __awaiter$5(this,void 0,void 0,function*(){yield this.getNetwork();const b=yield resolveProperties({filter:this._getFilter(e)}),w=yield this.perform("getLogs",b);return w.forEach($=>{$.removed==null&&($.removed=!1)}),Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(w)})}getEtherPrice(){return __awaiter$5(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return __awaiter$5(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&logger$2.throwArgumentError("invalid BlockTag","blockTag",e);let b=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return b+=e,b<0&&(b=0),this.formatter.blockTag(b)}return this.formatter.blockTag(e)})}getResolver(e){return __awaiter$5(this,void 0,void 0,function*(){try{const b=yield this._getResolver(e);return b==null?null:new Resolver$1(this,b,e)}catch(b){return b.code===Logger.errors.CALL_EXCEPTION,null}})}_getResolver(e){return __awaiter$5(this,void 0,void 0,function*(){const b=yield this.getNetwork();b.ensAddress||logger$2.throwError("network does not support ENS",Logger.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:b.name});const w={to:b.ensAddress,data:"0x0178b8bf"+namehash(e).substring(2)};try{return this.formatter.callAddress(yield this.call(w))}catch($){if($.code===Logger.errors.CALL_EXCEPTION)return null;throw $}})}resolveName(e){return __awaiter$5(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(w){if(isHexString(e))throw w}typeof e!="string"&&logger$2.throwArgumentError("invalid ENS name","name",e);const b=yield this.getResolver(e);return b?yield b.getAddress():null})}lookupAddress(e){return __awaiter$5(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const b=e.substring(2).toLowerCase()+".addr.reverse",w=yield this._getResolver(b);if(!w)return null;let $=arrayify(yield this.call({to:w,data:"0x691f3431"+namehash(b).substring(2)}));if($.length<32||!BigNumber$1.from($.slice(0,32)).eq(32)||($=$.slice(32),$.length<32))return null;const T=BigNumber$1.from($.slice(0,32)).toNumber();if($=$.slice(32),T>$.length)return null;const N=toUtf8String($.slice(0,T));return(yield this.resolveName(N))!=e?null:N})}getAvatar(e){return __awaiter$5(this,void 0,void 0,function*(){let b=null;if(isHexString(e)){const $=this.formatter.address(e),T=$.substring(2).toLowerCase()+".addr.reverse",N=yield this._getResolver(T);if(!N)return null;b=new Resolver$1(this,N,"_",$)}else b=yield this.getResolver(e);const w=yield b.getAvatar();return w==null?null:w.url})}perform(e,b){return logger$2.throwError(e+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(b=>b.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(b=>b.pollable()).length>0}_addEventListener(e,b,w){const $=new Event(getEventTag(e),b,w);return this._events.push($),this._startEvent($),this}on(e,b){return this._addEventListener(e,b,!1)}once(e,b){return this._addEventListener(e,b,!0)}emit(e,...b){let w=!1,$=[],T=getEventTag(e);return this._events=this._events.filter(N=>N.tag!==T?!0:(setTimeout(()=>{N.listener.apply(this,b)},0),w=!0,N.once?($.push(N),!1):!0)),$.forEach(N=>{this._stopEvent(N)}),w}listenerCount(e){if(!e)return this._events.length;let b=getEventTag(e);return this._events.filter(w=>w.tag===b).length}listeners(e){if(e==null)return this._events.map(w=>w.listener);let b=getEventTag(e);return this._events.filter(w=>w.tag===b).map(w=>w.listener)}off(e,b){if(b==null)return this.removeAllListeners(e);const w=[];let $=!1,T=getEventTag(e);return this._events=this._events.filter(N=>N.tag!==T||N.listener!=b||$?!0:($=!0,w.push(N),!1)),w.forEach(N=>{this._stopEvent(N)}),this}removeAllListeners(e){let b=[];if(e==null)b=this._events,this._events=[];else{const w=getEventTag(e);this._events=this._events.filter($=>$.tag!==w?!0:(b.push($),!1))}return b.forEach(w=>{this._stopEvent(w)}),this}}var __awaiter$4=globalThis&&globalThis.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};const logger$1=new Logger(version$3),errorGas=["call","estimateGas"];function checkError(t,e,b){if(t==="call"&&e.code===Logger.errors.SERVER_ERROR){const T=e.error;if(T&&T.message.match("reverted")&&isHexString(T.data))return T.data;logger$1.throwError("missing revert data in call exception",Logger.errors.CALL_EXCEPTION,{error:e,data:"0x"})}let w=e.message;e.code===Logger.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?w=e.error.message:typeof e.body=="string"?w=e.body:typeof e.responseText=="string"&&(w=e.responseText),w=(w||"").toLowerCase();const $=b.transaction||b.signedTransaction;throw w.match(/insufficient funds|base fee exceeds gas limit/)&&logger$1.throwError("insufficient funds for intrinsic transaction cost",Logger.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:$}),w.match(/nonce too low/)&&logger$1.throwError("nonce has already been used",Logger.errors.NONCE_EXPIRED,{error:e,method:t,transaction:$}),w.match(/replacement transaction underpriced/)&&logger$1.throwError("replacement fee too low",Logger.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:$}),w.match(/only replay-protected/)&&logger$1.throwError("legacy pre-eip-155 transactions not supported",Logger.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:$}),errorGas.indexOf(t)>=0&&w.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&logger$1.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:$}),e}function timer$2(t){return new Promise(function(e){setTimeout(e,t)})}function getResult(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function getLowerCase(t){return t&&t.toLowerCase()}const _constructorGuard={};class JsonRpcSigner extends Signer$1{constructor(e,b,w){logger$1.checkNew(new.target,JsonRpcSigner);super();if(e!==_constructorGuard)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");defineReadOnly(this,"provider",b),w==null&&(w=0),typeof w=="string"?(defineReadOnly(this,"_address",this.provider.formatter.address(w)),defineReadOnly(this,"_index",null)):typeof w=="number"?(defineReadOnly(this,"_index",w),defineReadOnly(this,"_address",null)):logger$1.throwArgumentError("invalid address or index","addressOrIndex",w)}connect(e){return logger$1.throwError("cannot alter JSON-RPC Signer connection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new UncheckedJsonRpcSigner(_constructorGuard,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&logger$1.throwError("unknown account #"+this._index,Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=shallowCopy(e);const b=this.getAddress().then(w=>(w&&(w=w.toLowerCase()),w));if(e.gasLimit==null){const w=shallowCopy(e);w.from=b,e.gasLimit=this.provider.estimateGas(w)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(w=>__awaiter$4(this,void 0,void 0,function*(){if(w==null)return null;const $=yield this.provider.resolveName(w);return $==null&&logger$1.throwArgumentError("provided ENS name resolves to null","tx.to",w),$}))),resolveProperties({tx:resolveProperties(e),sender:b}).then(({tx:w,sender:$})=>{w.from!=null?w.from.toLowerCase()!==$&&logger$1.throwArgumentError("from address mismatch","transaction",e):w.from=$;const T=this.provider.constructor.hexlifyTransaction(w,{from:!0});return this.provider.send("eth_sendTransaction",[T]).then(N=>N,N=>checkError("sendTransaction",N,T))})}signTransaction(e){return logger$1.throwError("signing transactions is unsupported",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return __awaiter$4(this,void 0,void 0,function*(){const b=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),w=yield this.sendUncheckedTransaction(e);try{return yield poll(()=>__awaiter$4(this,void 0,void 0,function*(){const $=yield this.provider.getTransaction(w);if($!==null)return this.provider._wrapTransaction($,w,b)}),{oncePoll:this.provider})}catch($){throw $.transactionHash=w,$}})}signMessage(e){return __awaiter$4(this,void 0,void 0,function*(){const b=typeof e=="string"?toUtf8Bytes(e):e,w=yield this.getAddress();return yield this.provider.send("personal_sign",[hexlify(b),w.toLowerCase()])})}_legacySignMessage(e){return __awaiter$4(this,void 0,void 0,function*(){const b=typeof e=="string"?toUtf8Bytes(e):e,w=yield this.getAddress();return yield this.provider.send("eth_sign",[w.toLowerCase(),hexlify(b)])})}_signTypedData(e,b,w){return __awaiter$4(this,void 0,void 0,function*(){const $=yield TypedDataEncoder.resolveNames(e,b,w,N=>this.provider.resolveName(N)),T=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[T.toLowerCase(),JSON.stringify(TypedDataEncoder.getPayload($.domain,b,$.value))])})}unlock(e){return __awaiter$4(this,void 0,void 0,function*(){const b=this.provider,w=yield this.getAddress();return b.send("personal_unlockAccount",[w.toLowerCase(),e,null])})}}class UncheckedJsonRpcSigner extends JsonRpcSigner{sendTransaction(e){return this.sendUncheckedTransaction(e).then(b=>({hash:b,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:w=>this.provider.waitForTransaction(b,w)}))}}const allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class JsonRpcProvider extends BaseProvider{constructor(e,b){logger$1.checkNew(new.target,JsonRpcProvider);let w=b;w==null&&(w=new Promise(($,T)=>{setTimeout(()=>{this.detectNetwork().then(N=>{$(N)},N=>{T(N)})},0)}));super(w);e||(e=getStatic(this.constructor,"defaultUrl")()),typeof e=="string"?defineReadOnly(this,"connection",Object.freeze({url:e})):defineReadOnly(this,"connection",Object.freeze(shallowCopy(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return __awaiter$4(this,void 0,void 0,function*(){yield timer$2(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const b=getStatic(this.constructor,"getNetwork");try{return b(BigNumber$1.from(e).toNumber())}catch(w){return logger$1.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:w})}}return logger$1.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new JsonRpcSigner(_constructorGuard,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(b=>this.formatter.address(b)))}send(e,b){const w={method:e,params:b,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:deepCopy(w),provider:this});const $=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if($&&this._cache[e])return this._cache[e];const T=fetchJson$3(this.connection,JSON.stringify(w),getResult).then(N=>(this.emit("debug",{action:"response",request:w,response:N,provider:this}),N),N=>{throw this.emit("debug",{action:"response",error:N,request:w,provider:this}),N});return $&&(this._cache[e]=T,setTimeout(()=>{this._cache[e]=null},0)),T}prepareRequest(e,b){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[getLowerCase(b.address),b.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[getLowerCase(b.address),b.blockTag]];case"getCode":return["eth_getCode",[getLowerCase(b.address),b.blockTag]];case"getStorageAt":return["eth_getStorageAt",[getLowerCase(b.address),b.position,b.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[b.signedTransaction]];case"getBlock":return b.blockTag?["eth_getBlockByNumber",[b.blockTag,!!b.includeTransactions]]:b.blockHash?["eth_getBlockByHash",[b.blockHash,!!b.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[b.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[b.transactionHash]];case"call":{const w=getStatic(this.constructor,"hexlifyTransaction");return["eth_call",[w(b.transaction,{from:!0}),b.blockTag]]}case"estimateGas":{const w=getStatic(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[w(b.transaction,{from:!0})]]}case"getLogs":return b.filter&&b.filter.address!=null&&(b.filter.address=getLowerCase(b.filter.address)),["eth_getLogs",[b.filter]]}return null}perform(e,b){return __awaiter$4(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const $=b.transaction;if($&&$.type!=null&&BigNumber$1.from($.type).isZero()&&$.maxFeePerGas==null&&$.maxPriorityFeePerGas==null){const T=yield this.getFeeData();T.maxFeePerGas==null&&T.maxPriorityFeePerGas==null&&(b=shallowCopy(b),b.transaction=shallowCopy($),delete b.transaction.type)}}const w=this.prepareRequest(e,b);w==null&&logger$1.throwError(e+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(w[0],w[1])}catch($){return checkError(e,$,b)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,b=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=b,b.then(function(w){function $(){e.send("eth_getFilterChanges",[w]).then(function(T){if(e._pendingFilter!=b)return null;let N=Promise.resolve();return T.forEach(function(C){e._emitted["t:"+C.toLowerCase()]="pending",N=N.then(function(){return e.getTransaction(C).then(function(F){return e.emit("pending",F),null})})}),N.then(function(){return timer$2(1e3)})}).then(function(){if(e._pendingFilter!=b){e.send("eth_uninstallFilter",[w]);return}return setTimeout(function(){$()},0),null}).catch(T=>{})}return $(),w}).catch(w=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,b){const w=shallowCopy(allowedTransactionKeys);if(b)for(const T in b)b[T]&&(w[T]=!0);checkProperties(e,w);const $={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(T){if(e[T]==null)return;const N=hexValue(e[T]);T==="gasLimit"&&(T="gas"),$[T]=N}),["from","to","data"].forEach(function(T){e[T]!=null&&($[T]=hexlify(e[T]))}),e.accessList&&($.accessList=accessListify(e.accessList)),$}}const logger=new Logger(version$3);let _nextId=1;function buildWeb3LegacyFetcher(t,e){const b="Web3LegacyFetcher";return function(w,$){const T={method:w,params:$,id:_nextId++,jsonrpc:"2.0"};return new Promise((N,C)=>{this.emit("debug",{action:"request",fetcher:b,request:deepCopy(T),provider:this}),e(T,(F,G)=>{if(F)return this.emit("debug",{action:"response",fetcher:b,error:F,request:T,provider:this}),C(F);if(this.emit("debug",{action:"response",fetcher:b,request:T,response:G,provider:this}),G.error){const J=new Error(G.error.message);return J.code=G.error.code,J.data=G.error.data,C(J)}N(G.result)})})}}function buildEip1193Fetcher(t){return function(e,b){b==null&&(b=[]);const w={method:e,params:b};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:deepCopy(w),provider:this}),t.request(w).then($=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:w,response:$,provider:this}),$),$=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:w,error:$,provider:this}),$})}}class Web3Provider extends JsonRpcProvider{constructor(e,b){logger.checkNew(new.target,Web3Provider),e==null&&logger.throwArgumentError("missing provider","provider",e);let w=null,$=null,T=null;typeof e=="function"?(w="unknown:",$=e):(w=e.host||e.path||"",!w&&e.isMetaMask&&(w="metamask"),T=e,e.request?(w===""&&(w="eip-1193:"),$=buildEip1193Fetcher(e)):e.sendAsync?$=buildWeb3LegacyFetcher(e,e.sendAsync.bind(e)):e.send?$=buildWeb3LegacyFetcher(e,e.send.bind(e)):logger.throwArgumentError("unsupported provider","provider",e),w||(w="unknown:"));super(w,b);defineReadOnly(this,"jsonRpcFetchFunc",$),defineReadOnly(this,"provider",T)}send(e,b){return this.jsonRpcFetchFunc(e,b)}}var lib$e={},authProvider={};Object.defineProperty(authProvider,"__esModule",{value:!0});var ethereum={},cjs={},account$1={},chain={},spec={};Object.defineProperty(spec,"__esModule",{value:!0});const CAIP2={name:"chainId",regex:"[-:a-zA-Z0-9]{5,64}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,16}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,47}"}}}},CAIP10={name:"accountId",regex:"[-@:a-zA-Z0-9]{7,128}",parameters:{delimiter:"@",values:{0:{name:"address",regex:"[a-zA-Z0-9]{1,63}"},1:CAIP2}}};spec.CAIP={"2":CAIP2,"10":CAIP10};var utils$l={};Object.defineProperty(utils$l,"__esModule",{value:!0});function splitParams(t,e){return t.split(e.parameters.delimiter)}utils$l.splitParams=splitParams;function getParams(t,e){const b=splitParams(t,e),w={};return b.forEach(($,T)=>{w[e.parameters.values[T].name]=$}),w}utils$l.getParams=getParams;function joinParams(t,e){return Object.values(e.parameters.values).map(b=>{const w=t[b.name];return typeof w=="string"?w:joinParams(w,b)}).join(e.parameters.delimiter)}utils$l.joinParams=joinParams;function isValidId(t,e){if(!new RegExp(e.regex).test(t))return!1;const b=splitParams(t,e);return!(b.length!==Object.keys(e.parameters.values).length||b.map(($,T)=>new RegExp(e.parameters.values[T].regex).test($)).filter($=>!!$).length!==b.length)}utils$l.isValidId=isValidId;Object.defineProperty(chain,"__esModule",{value:!0});const spec_1$1=spec,utils_1$3=utils$l;class ChainID{constructor(e){typeof e=="string"&&(e=ChainID.parse(e)),this.namespace=e.namespace,this.reference=e.reference}static parse(e){if(!utils_1$3.isValidId(e,this.spec))throw new Error(`Invalid ${this.spec.name} provided: ${e}`);return new ChainID(utils_1$3.getParams(e,this.spec)).toJson()}static format(e){return utils_1$3.joinParams(e,this.spec)}toString(){return ChainID.format(this.toJson())}toJson(){return{namespace:this.namespace,reference:this.reference}}}chain.ChainID=ChainID;ChainID.spec=spec_1$1.CAIP["2"];Object.defineProperty(account$1,"__esModule",{value:!0});const chain_1=chain,spec_1=spec,utils_1$2=utils$l;class AccountID{constructor(e){typeof e=="string"&&(e=AccountID.parse(e)),this.chainId=new chain_1.ChainID(e.chainId),this.address=e.address}static parse(e){if(!utils_1$2.isValidId(e,this.spec))throw new Error(`Invalid ${this.spec.name} provided: ${e}`);return new AccountID(utils_1$2.getParams(e,this.spec)).toJson()}static format(e){return utils_1$2.joinParams(e,this.spec)}toString(){return AccountID.format(this.toJson())}toJson(){return{chainId:this.chainId.toJson(),address:this.address}}}account$1.AccountID=AccountID;AccountID.spec=spec_1.CAIP["10"];(function(t){function e(b){for(var w in b)t.hasOwnProperty(w)||(t[w]=b[w])}Object.defineProperty(t,"__esModule",{value:!0}),e(account$1),e(chain)})(cjs);var util$8={};Object.defineProperty(util$8,"__esModule",{value:!0});util$8.encodeRpcMessage=util$8.getConsentMessage=void 0;function getConsentMessage(t,e=!0){const b={message:`Link this account to your identity

`+t};return e&&(b.timestamp=Math.floor(Date.now()/1e3),b.message+=` 
Timestamp: `+b.timestamp),b}util$8.getConsentMessage=getConsentMessage;function encodeRpcMessage(t,e){return{jsonrpc:"2.0",id:1,method:t,params:e}}util$8.encodeRpcMessage=encodeRpcMessage;function compare$4(t,e){for(let b=0;b<t.byteLength;b++){if(t[b]<e[b])return-1;if(t[b]>e[b])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var compare_1=compare$4;function concat$d(t,e){e||(e=t.reduce(($,T)=>$+T.length,0));const b=new Uint8Array(e);let w=0;for(const $ of t)b.set($,w),w+=$.length;return b}var concat_1$2=concat$d;function equals$8(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let b=0;b<t.byteLength;b++)if(t[b]!==e[b])return!1;return!0}var equals_1=equals$8;function base$4(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var b=new Uint8Array(256),w=0;w<b.length;w++)b[w]=255;for(var $=0;$<t.length;$++){var T=t.charAt($),N=T.charCodeAt(0);if(b[N]!==255)throw new TypeError(T+" is ambiguous");b[N]=$}var C=t.length,F=t.charAt(0),G=Math.log(C)/Math.log(256),J=Math.log(256)/Math.log(C);function Z(ue){if(ue instanceof Uint8Array||(ArrayBuffer.isView(ue)?ue=new Uint8Array(ue.buffer,ue.byteOffset,ue.byteLength):Array.isArray(ue)&&(ue=Uint8Array.from(ue))),!(ue instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(ue.length===0)return"";for(var ne=0,ce=0,ae=0,ye=ue.length;ae!==ye&&ue[ae]===0;)ae++,ne++;for(var $e=(ye-ae)*J+1>>>0,_e=new Uint8Array($e);ae!==ye;){for(var be=ue[ae],xe=0,ee=$e-1;(be!==0||xe<ce)&&ee!==-1;ee--,xe++)be+=256*_e[ee]>>>0,_e[ee]=be%C>>>0,be=be/C>>>0;if(be!==0)throw new Error("Non-zero carry");ce=xe,ae++}for(var he=$e-ce;he!==$e&&_e[he]===0;)he++;for(var we=F.repeat(ne);he<$e;++he)we+=t.charAt(_e[he]);return we}function re(ue){if(typeof ue!="string")throw new TypeError("Expected String");if(ue.length===0)return new Uint8Array;var ne=0;if(ue[ne]!==" "){for(var ce=0,ae=0;ue[ne]===F;)ce++,ne++;for(var ye=(ue.length-ne)*G+1>>>0,$e=new Uint8Array(ye);ue[ne];){var _e=b[ue.charCodeAt(ne)];if(_e===255)return;for(var be=0,xe=ye-1;(_e!==0||be<ae)&&xe!==-1;xe--,be++)_e+=C*$e[xe]>>>0,$e[xe]=_e%256>>>0,_e=_e/256>>>0;if(_e!==0)throw new Error("Non-zero carry");ae=be,ne++}if(ue[ne]!==" "){for(var ee=ye-ae;ee!==ye&&$e[ee]===0;)ee++;for(var he=new Uint8Array(ce+(ye-ee)),we=ce;ee!==ye;)he[we++]=$e[ee++];return he}}}function ie(ue){var ne=re(ue);if(ne)return ne;throw new Error(`Non-${e} character`)}return{encode:Z,decodeUnsafe:re,decode:ie}}var src$9=base$4,_brrp__multiformats_scope_baseX=src$9;const empty$4=new Uint8Array(0),toHex$1=t=>t.reduce((e,b)=>e+b.toString(16).padStart(2,"0"),""),fromHex=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map(b=>parseInt(b,16))):empty$4},equals$7=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let b=0;b<t.byteLength;b++)if(t[b]!==e[b])return!1;return!0},coerce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},isBinary=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),fromString$b=t=>new TextEncoder().encode(t),toString$9=t=>new TextDecoder().decode(t);var bytes=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:equals$7,coerce,isBinary,fromHex,toHex:toHex$1,fromString:fromString$b,toString:toString$9,empty:empty$4});class Encoder$1{constructor(e,b,w){this.name=e,this.prefix=b,this.baseEncode=w}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$2{constructor(e,b,w){this.name=e,this.prefix=b,this.baseDecode=w}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){const b=Tt({[this.prefix]:this},e.decoders||{[e.prefix]:e});return new ComposedDecoder(b)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){const b=e.decoders||{[e.prefix]:e};return new ComposedDecoder(Tt(Tt({},this.decoders),b))}decode(e){const b=e[0],w=this.decoders[b];if(w)return w.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}class Codec{constructor(e,b,w,$){this.name=e,this.prefix=b,this.baseEncode=w,this.baseDecode=$,this.encoder=new Encoder$1(e,b,w),this.decoder=new Decoder$2(e,b,$)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$4=({name:t,prefix:e,encode:b,decode:w})=>new Codec(t,e,b,w),baseX$1=({prefix:t,name:e,alphabet:b})=>{const{encode:w,decode:$}=_brrp__multiformats_scope_baseX(b,e);return from$4({prefix:t,name:e,encode:w,decode:T=>coerce($(T))})},decode$a=(t,e,b,w)=>{const $={};for(let J=0;J<e.length;++J)$[e[J]]=J;let T=t.length;for(;t[T-1]==="=";)--T;const N=new Uint8Array(T*b/8|0);let C=0,F=0,G=0;for(let J=0;J<T;++J){const Z=$[t[J]];if(Z===void 0)throw new SyntaxError(`Non-${w} character`);F=F<<b|Z,C+=b,C>=8&&(C-=8,N[G++]=255&F>>C)}if(C>=b||255&F<<8-C)throw new SyntaxError("Unexpected end of data");return N},encode$7=(t,e,b)=>{const w=e[e.length-1]==="=",$=(1<<b)-1;let T="",N=0,C=0;for(let F=0;F<t.length;++F)for(C=C<<8|t[F],N+=8;N>b;)N-=b,T+=e[$&C>>N];if(N&&(T+=e[$&C<<b-N]),w)for(;T.length*b&7;)T+="=";return T},rfc4648$2=({name:t,prefix:e,bitsPerChar:b,alphabet:w})=>from$4({prefix:e,name:t,encode($){return encode$7($,w,b)},decode($){return decode$a($,w,b,t)}}),identity$7=from$4({prefix:"\0",name:"identity",encode:t=>toString$9(t),decode:t=>fromString$b(t)});var identityBase=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:identity$7});const base2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var base2$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base2});const base8=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var base8$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base8});const base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"});var base10$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base10});const base16=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var base16$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base16,base16upper});const base32=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var base32$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base32,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z});const base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var base36$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base36,base36upper});const base58btc=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var base58=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base58btc,base58flickr});const base64=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var base64$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base64,base64pad,base64url,base64urlpad}),encode_1$2=encode$6,MSB$4=128,REST$4=127,MSBALL$2=~REST$4,INT$2=Math.pow(2,31);function encode$6(t,e,b){e=e||[],b=b||0;for(var w=b;t>=INT$2;)e[b++]=t&255|MSB$4,t/=128;for(;t&MSBALL$2;)e[b++]=t&255|MSB$4,t>>>=7;return e[b]=t|0,encode$6.bytes=b-w+1,e}var decode$9=read$2,MSB$1$1=128,REST$1$1=127;function read$2(t,e){var b=0,e=e||0,w=0,$=e,T,N=t.length;do{if($>=N)throw read$2.bytes=0,new RangeError("Could not decode varint");T=t[$++],b+=w<28?(T&REST$1$1)<<w:(T&REST$1$1)*Math.pow(2,w),w+=7}while(T>=MSB$1$1);return read$2.bytes=$-e,b}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$2=function(t){return t<N1$2?1:t<N2$2?2:t<N3$2?3:t<N4$2?4:t<N5$2?5:t<N6$2?6:t<N7$2?7:t<N8$2?8:t<N9$2?9:10},varint$6={encode:encode_1$2,decode:decode$9,encodingLength:length$2},_brrp_varint=varint$6;const decode$8=t=>[_brrp_varint.decode(t),_brrp_varint.decode.bytes],encodeTo=(t,e,b=0)=>(_brrp_varint.encode(t,e,b),e),encodingLength=t=>_brrp_varint.encodingLength(t);var varint$5=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",decode:decode$8,encodeTo,encodingLength});const create=(t,e)=>{const b=e.byteLength,w=encodingLength(t),$=w+encodingLength(b),T=new Uint8Array($+b);return encodeTo(t,T,0),encodeTo(b,T,w),T.set(e,$),new Digest(t,b,e,T)},decode$7=t=>{const e=coerce(t),[b,w]=decode$8(e),[$,T]=decode$8(e.subarray(w)),N=e.subarray(w+T);if(N.byteLength!==$)throw new Error("Incorrect length");return new Digest(b,$,N,e)},equals$6=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&equals$7(t.bytes,e.bytes);class Digest{constructor(e,b,w,$){this.code=e,this.size=b,this.digest=w,this.bytes=$}}var digest$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create,decode:decode$7,equals:equals$6,Digest});const from$3=({name:t,code:e,encode:b})=>new Hasher(t,e,b);class Hasher{constructor(e,b,w){this.name=e,this.code=b,this.encode=w}async digest(e){if(e instanceof Uint8Array){const b=await this.encode(e);return create(this.code,b)}else throw Error("Unknown type, must be binary type")}}var hasher=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",from:from$3,Hasher});const sha$1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$4=from$3({name:"sha2-256",code:18,encode:sha$1("SHA-256")}),sha512$1=from$3({name:"sha2-512",code:19,encode:sha$1("SHA-512")});var sha2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sha256:sha256$4,sha512:sha512$1});const identity$5=from$3({name:"identity",code:0,encode:t=>coerce(t)});var identity$6=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:identity$5});const name$2="raw",code$2=85,encode$5=t=>coerce(t),decode$6=t=>coerce(t);var raw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:name$2,code:code$2,encode:encode$5,decode:decode$6});const textEncoder$1=new TextEncoder,textDecoder$2=new TextDecoder,name$1="json",code$1=512,encode$4=t=>textEncoder$1.encode(JSON.stringify(t)),decode$5=t=>JSON.parse(textDecoder$2.decode(t));var json=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:name$1,code:code$1,encode:encode$4,decode:decode$5});class CID$3{constructor(e,b,w,$){this.code=b,this.version=e,this.multihash=w,this.bytes=$,this.byteOffset=$.byteOffset,this.byteLength=$.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly,version:readonly,multihash:readonly,bytes:readonly,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:b}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(b.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$3.createV0(b)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:b}=this.multihash,w=create(e,b);return CID$3.createV1(this.code,w)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$6(this.multihash,e.multihash)}toString(e){const{bytes:b,version:w,_baseCache:$}=this;switch(w){case 0:return toStringV0(b,$,e||base58btc.encoder);default:return toStringV1(b,$,e||base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$3)return e;if(e!=null&&e.asCID===e){const{version:b,code:w,multihash:$,bytes:T}=e;return new CID$3(b,w,$,T||encodeCID(b,w,$.bytes))}else if(e!=null&&e[cidSymbol]===!0){const{version:b,multihash:w,code:$}=e,T=decode$7(w);return CID$3.create(b,$,T)}else return null}static create(e,b,w){if(typeof b!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(b!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID$3(e,b,w,w.bytes)}case 1:{const $=encodeCID(e,b,w.bytes);return new CID$3(e,b,w,$)}default:throw new Error("Invalid version")}}static createV0(e){return CID$3.create(0,DAG_PB_CODE,e)}static createV1(e,b){return CID$3.create(1,e,b)}static decode(e){const[b,w]=CID$3.decodeFirst(e);if(w.length)throw new Error("Incorrect length");return b}static decodeFirst(e){const b=CID$3.inspectBytes(e),w=b.size-b.multihashSize,$=coerce(e.subarray(w,w+b.multihashSize));if($.byteLength!==b.multihashSize)throw new Error("Incorrect length");const T=$.subarray(b.multihashSize-b.digestSize),N=new Digest(b.multihashCode,b.digestSize,T,$);return[b.version===0?CID$3.createV0(N):CID$3.createV1(b.codec,N),e.subarray(b.size)]}static inspectBytes(e){let b=0;const w=()=>{const[Z,re]=decode$8(e.subarray(b));return b+=re,Z};let $=w(),T=DAG_PB_CODE;if($===18?($=0,b=0):$===1&&(T=w()),$!==0&&$!==1)throw new RangeError(`Invalid CID version ${$}`);const N=b,C=w(),F=w(),G=b+F,J=G-N;return{version:$,codec:T,multihashCode:C,digestSize:F,multihashSize:J,size:G}}static parse(e,b){const[w,$]=parseCIDtoBytes(e,b),T=CID$3.decode($);return T._baseCache.set(w,e),T}}const parseCIDtoBytes=(t,e)=>{switch(t[0]){case"Q":{const b=e||base58btc;return[base58btc.prefix,b.decode(`${base58btc.prefix}${t}`)]}case base58btc.prefix:{const b=e||base58btc;return[base58btc.prefix,b.decode(t)]}case base32.prefix:{const b=e||base32;return[base32.prefix,b.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0=(t,e,b)=>{const{prefix:w}=b;if(w!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${b.name} encoding`);const $=e.get(w);if($==null){const T=b.encode(t).slice(1);return e.set(w,T),T}else return $},toStringV1=(t,e,b)=>{const{prefix:w}=b,$=e.get(w);if($==null){const T=b.encode(t);return e.set(w,T),T}else return $},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(t,e,b)=>{const w=encodingLength(t),$=w+encodingLength(e),T=new Uint8Array($+b.byteLength);return encodeTo(t,T,0),encodeTo(e,T,w),T.set(b,$),T},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$2="0.0.0-dev",deprecate=(t,e)=>{if(t.test(version$2))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,bases$3=Tt(Tt(Tt(Tt(Tt(Tt(Tt(Tt(Tt({},identityBase),base2$1),base8$1),base10$1),base16$1),base32$1),base36$1),base58),base64$1),hashes=Tt(Tt({},sha2),identity$6),codecs$1={raw,json};var basics=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CID:CID$3,hasher,digest:digest$1,varint:varint$5,bytes,hashes,bases:bases$3,codecs:codecs$1}),require$$0$6=getAugmentedNamespace(basics);const{bases:bases$2}=require$$0$6;function createCodec$5(t,e,b,w){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:b},decoder:{decode:w}}}const string$5=createCodec$5("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ascii$5=createCodec$5("ascii","a",t=>{let e="a";for(let b=0;b<t.length;b++)e+=String.fromCharCode(t[b]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let b=0;b<t.length;b++)e[b]=t.charCodeAt(b);return e}),BASES$5=Tt({utf8:string$5,"utf-8":string$5,hex:bases$2.base16,latin1:ascii$5,ascii:ascii$5,binary:ascii$5},bases$2);var bases_1=BASES$5;const bases$1=bases_1;function fromString$a(t,e="utf8"){const b=bases$1[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.decoder.decode(`${b.prefix}${t}`)}var fromString_1=fromString$a;const bases=bases_1;function toString$8(t,e="utf8"){const b=bases[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.encoder.encode(t).substring(1)}var toString_1=toString$8;function xor$1(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const b=new Uint8Array(t.length);for(let w=0;w<t.length;w++)b[w]=t[w]^e[w];return b}var xor_1=xor$1;const compare$3=compare_1,concat$c=concat_1$2,equals$5=equals_1,fromString$9=fromString_1,toString$7=toString_1,xor=xor_1;var uint8arrays$7={compare:compare$3,concat:concat$c,equals:equals$5,fromString:fromString$9,toString:toString$7,xor},sha256$3={},binary={},int={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(C,F){var G=C>>>16&65535,J=C&65535,Z=F>>>16&65535,re=F&65535;return J*re+(G*re+J*Z<<16>>>0)|0}t.mul=Math.imul||e;function b(C,F){return C+F|0}t.add=b;function w(C,F){return C-F|0}t.sub=w;function $(C,F){return C<<F|C>>>32-F}t.rotl=$;function T(C,F){return C<<32-F|C>>>F}t.rotr=T;function N(C){return typeof C=="number"&&isFinite(C)&&Math.floor(C)===C}t.isInteger=Number.isInteger||N,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(C){return t.isInteger(C)&&C>=-t.MAX_SAFE_INTEGER&&C<=t.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(t,e,b){return e===void 0&&(e=new Uint8Array(2)),b===void 0&&(b=0),e[b+0]=t>>>8,e[b+1]=t>>>0,e}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(t,e,b){return e===void 0&&(e=new Uint8Array(2)),b===void 0&&(b=0),e[b+0]=t>>>0,e[b+1]=t>>>8,e}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}binary.readInt32BE=readInt32BE;function readUint32BE(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}binary.readInt32LE=readInt32LE;function readUint32LE(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE$1(t,e,b){return e===void 0&&(e=new Uint8Array(4)),b===void 0&&(b=0),e[b+0]=t>>>24,e[b+1]=t>>>16,e[b+2]=t>>>8,e[b+3]=t>>>0,e}binary.writeUint32BE=writeUint32BE$1;binary.writeInt32BE=writeUint32BE$1;function writeUint32LE(t,e,b){return e===void 0&&(e=new Uint8Array(4)),b===void 0&&(b=0),e[b+0]=t>>>0,e[b+1]=t>>>8,e[b+2]=t>>>16,e[b+3]=t>>>24,e}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE(t,e){e===void 0&&(e=0);var b=readInt32BE(t,e),w=readInt32BE(t,e+4);return b*4294967296+w-(w>>31)*4294967296}binary.readInt64BE=readInt64BE;function readUint64BE(t,e){e===void 0&&(e=0);var b=readUint32BE(t,e),w=readUint32BE(t,e+4);return b*4294967296+w}binary.readUint64BE=readUint64BE;function readInt64LE(t,e){e===void 0&&(e=0);var b=readInt32LE(t,e),w=readInt32LE(t,e+4);return w*4294967296+b-(b>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(t,e){e===void 0&&(e=0);var b=readUint32LE(t,e),w=readUint32LE(t,e+4);return w*4294967296+b}binary.readUint64LE=readUint64LE;function writeUint64BE(t,e,b){return e===void 0&&(e=new Uint8Array(8)),b===void 0&&(b=0),writeUint32BE$1(t/4294967296>>>0,e,b),writeUint32BE$1(t>>>0,e,b+4),e}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(t,e,b){return e===void 0&&(e=new Uint8Array(8)),b===void 0&&(b=0),writeUint32LE(t>>>0,e,b),writeUint32LE(t/4294967296>>>0,e,b+4),e}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE(t,e,b){if(b===void 0&&(b=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-b)throw new Error("readUintBE: array is too short for the given bitLength");for(var w=0,$=1,T=t/8+b-1;T>=b;T--)w+=e[T]*$,$*=256;return w}binary.readUintBE=readUintBE;function readUintLE(t,e,b){if(b===void 0&&(b=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-b)throw new Error("readUintLE: array is too short for the given bitLength");for(var w=0,$=1,T=b;T<b+t/8;T++)w+=e[T]*$,$*=256;return w}binary.readUintLE=readUintLE;function writeUintBE(t,e,b,w){if(b===void 0&&(b=new Uint8Array(t/8)),w===void 0&&(w=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var $=1,T=t/8+w-1;T>=w;T--)b[T]=e/$&255,$*=256;return b}binary.writeUintBE=writeUintBE;function writeUintLE(t,e,b,w){if(b===void 0&&(b=new Uint8Array(t/8)),w===void 0&&(w=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var $=1,T=w;T<w+t/8;T++)b[T]=e/$&255,$*=256;return b}binary.writeUintLE=writeUintLE;function readFloat32BE(t,e){e===void 0&&(e=0);var b=new DataView(t.buffer,t.byteOffset,t.byteLength);return b.getFloat32(e)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(t,e){e===void 0&&(e=0);var b=new DataView(t.buffer,t.byteOffset,t.byteLength);return b.getFloat32(e,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(t,e){e===void 0&&(e=0);var b=new DataView(t.buffer,t.byteOffset,t.byteLength);return b.getFloat64(e)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(t,e){e===void 0&&(e=0);var b=new DataView(t.buffer,t.byteOffset,t.byteLength);return b.getFloat64(e,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(t,e,b){e===void 0&&(e=new Uint8Array(4)),b===void 0&&(b=0);var w=new DataView(e.buffer,e.byteOffset,e.byteLength);return w.setFloat32(b,t),e}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(t,e,b){e===void 0&&(e=new Uint8Array(4)),b===void 0&&(b=0);var w=new DataView(e.buffer,e.byteOffset,e.byteLength);return w.setFloat32(b,t,!0),e}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(t,e,b){e===void 0&&(e=new Uint8Array(8)),b===void 0&&(b=0);var w=new DataView(e.buffer,e.byteOffset,e.byteLength);return w.setFloat64(b,t),e}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(t,e,b){e===void 0&&(e=new Uint8Array(8)),b===void 0&&(b=0);var w=new DataView(e.buffer,e.byteOffset,e.byteLength);return w.setFloat64(b,t,!0),e}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(t){for(var e=0;e<t.length;e++)t[e]=0;return t}wipe$1.wipe=wipe;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,b=wipe$1;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var w=function(){function C(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return C.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},C.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},C.prototype.clean=function(){b.wipe(this._buffer),b.wipe(this._temp),this.reset()},C.prototype.update=function(F,G){if(G===void 0&&(G=F.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var J=0;if(this._bytesHashed+=G,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&G>0;)this._buffer[this._bufferLength++]=F[J++],G--;this._bufferLength===this.blockSize&&(T(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(G>=this.blockSize&&(J=T(this._temp,this._state,F,J,G),G%=this.blockSize);G>0;)this._buffer[this._bufferLength++]=F[J++],G--;return this},C.prototype.finish=function(F){if(!this._finished){var G=this._bytesHashed,J=this._bufferLength,Z=G/536870912|0,re=G<<3,ie=G%64<56?64:128;this._buffer[J]=128;for(var ue=J+1;ue<ie-8;ue++)this._buffer[ue]=0;e.writeUint32BE(Z,this._buffer,ie-8),e.writeUint32BE(re,this._buffer,ie-4),T(this._temp,this._state,this._buffer,0,ie),this._finished=!0}for(var ue=0;ue<this.digestLength/4;ue++)e.writeUint32BE(this._state[ue],F,ue*4);return this},C.prototype.digest=function(){var F=new Uint8Array(this.digestLength);return this.finish(F),F},C.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},C.prototype.restoreState=function(F){return this._state.set(F.state),this._bufferLength=F.bufferLength,F.buffer&&this._buffer.set(F.buffer),this._bytesHashed=F.bytesHashed,this._finished=!1,this},C.prototype.cleanSavedState=function(F){b.wipe(F.state),F.buffer&&b.wipe(F.buffer),F.bufferLength=0,F.bytesHashed=0},C}();t.SHA256=w;var $=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function T(C,F,G,J,Z){for(;Z>=64;){for(var re=F[0],ie=F[1],ue=F[2],ne=F[3],ce=F[4],ae=F[5],ye=F[6],$e=F[7],_e=0;_e<16;_e++){var be=J+_e*4;C[_e]=e.readUint32BE(G,be)}for(var _e=16;_e<64;_e++){var xe=C[_e-2],ee=(xe>>>17|xe<<32-17)^(xe>>>19|xe<<32-19)^xe>>>10;xe=C[_e-15];var he=(xe>>>7|xe<<32-7)^(xe>>>18|xe<<32-18)^xe>>>3;C[_e]=(ee+C[_e-7]|0)+(he+C[_e-16]|0)}for(var _e=0;_e<64;_e++){var ee=(((ce>>>6|ce<<32-6)^(ce>>>11|ce<<32-11)^(ce>>>25|ce<<32-25))+(ce&ae^~ce&ye)|0)+($e+($[_e]+C[_e]|0)|0)|0,he=((re>>>2|re<<32-2)^(re>>>13|re<<32-13)^(re>>>22|re<<32-22))+(re&ie^re&ue^ie&ue)|0;$e=ye,ye=ae,ae=ce,ce=ne+ee|0,ne=ue,ue=ie,ie=re,re=ee+he|0}F[0]+=re,F[1]+=ie,F[2]+=ue,F[3]+=ne,F[4]+=ce,F[5]+=ae,F[6]+=ye,F[7]+=$e,J+=64,Z-=64}return J}function N(C){var F=new w;F.update(C);var G=F.digest();return F.clean(),G}t.hash=N})(sha256$3);var __createBinding$f=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$f=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$f=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$f(e,t,b);return __setModuleDefault$f(e,t),e};Object.defineProperty(ethereum,"__esModule",{value:!0});ethereum.authenticate=ethereum.createLink=ethereum.normalizeAccountId=ethereum.isERC1271=ethereum.isEthAddress=ethereum.EthereumAuthProvider=void 0;const caip_1$6=cjs,util_1$5=util$8,uint8arrays$6=__importStar$f(uint8arrays$7),sha256$2=__importStar$f(sha256$3),ADDRESS_TYPES={ethereumEOA:"ethereum-eoa",erc1271:"erc1271"},CHAIN_NAMESPACE="eip155";class EthereumAuthProvider{constructor(e,b,w={}){this.provider=e,this.address=b,this.opts=w,this.isAuthProvider=!0}async accountId(){const e=util_1$5.encodeRpcMessage("eth_chainId",[]),b=await safeSend(e,this.provider),w=parseInt(b,16);return new caip_1$6.AccountID({address:this.address,chainId:`${CHAIN_NAMESPACE}:${w}`})}async authenticate(e){const b=await this.accountId();return authenticate(e,b,this.provider)}async createLink(e){const b=await this.accountId();return createLink(e,b,this.provider,this.opts)}withAddress(e){return new EthereumAuthProvider(this.provider,e)}}ethereum.EthereumAuthProvider=EthereumAuthProvider;function isEthAddress(t){return/^0x[a-fA-F0-9]{40}$/.test(t)}ethereum.isEthAddress=isEthAddress;async function getCode$1(t,e){const b=util_1$5.encodeRpcMessage("eth_getCode",[t,"latest"]);return safeSend(b,e)}async function safeSend(t,e){const b=(e.sendAsync?e.sendAsync:e.send).bind(e);return new Promise((w,$)=>{b(t,function(T,N){T?$(T):N.error?$(N.error):w(N.result)})})}async function isERC1271(t,e){const b=await getCode$1(t.address,e).catch(()=>null);return Boolean(b&&b!=="0x"&&b!=="0x0"&&b!=="0x00")}ethereum.isERC1271=isERC1271;function normalizeAccountId(t){return t.address=t.address.toLowerCase(),t}ethereum.normalizeAccountId=normalizeAccountId;function utf8toHex(t){const e=uint8arrays$6.fromString(t),b=uint8arrays$6.toString(e,"base16");return"0x"+b}async function createEthLink(t,e,b,w={}){const{message:$,timestamp:T}=util_1$5.getConsentMessage(t,!w.skipTimestamp),N=utf8toHex($),C=util_1$5.encodeRpcMessage("personal_sign",[N,e.address]),F=await safeSend(C,b),G={version:2,type:ADDRESS_TYPES.ethereumEOA,message:$,signature:F,account:e.toString()};return w.skipTimestamp||(G.timestamp=T),G}async function validateChainId(t,e){const b=util_1$5.encodeRpcMessage("eth_chainId",[]),w=await safeSend(b,e),$=parseInt(w,16);if($!==parseInt(t.chainId.reference))throw new Error(`ChainId in provider (${$}) is different from AccountID (${t.chainId.reference})`)}async function createErc1271Link(t,e,b,w){const $=(w==null?void 0:w.eoaSignAccount)||e,T=await createEthLink(t,$,b,w);return await validateChainId(e,b),Object.assign(T,{type:ADDRESS_TYPES.erc1271,account:e.toString()})}async function createLink(t,e,b,w){return e=normalizeAccountId(e),await isERC1271(e,b)?createErc1271Link(t,e,b,w):createEthLink(t,e,b,w)}ethereum.createLink=createLink;async function authenticate(t,e,b){if(e&&(e=normalizeAccountId(e)),b.isAuthereum)return b.signMessageWithSigningKey(t);const w=utf8toHex(t),$=util_1$5.encodeRpcMessage("personal_sign",[w,e.address]),T=await safeSend($,b),N=uint8arrays$6.fromString(T.slice(2)),C=sha256$2.hash(N);return`0x${uint8arrays$6.toString(C,"base16")}`}ethereum.authenticate=authenticate;var filecoin={},__createBinding$e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$e=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$e=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$e(e,t,b);return __setModuleDefault$e(e,t),e};Object.defineProperty(filecoin,"__esModule",{value:!0});filecoin.asTransaction=filecoin.FilecoinAuthProvider=void 0;const caip_1$5=cjs,util_1$4=util$8,uint8arrays$5=__importStar$e(uint8arrays$7);class FilecoinAuthProvider{constructor(e,b){this.provider=e,this.address=b,this.isAuthProvider=!0}async accountId(){const b=`fil:${this.address[0]}`;return new caip_1$5.AccountID({address:this.address,chainId:b})}async authenticate(e){const b=asTransaction$1(this.address,JSON.stringify(e));return(await this.provider.sign(this.address,b)).Signature.Data}async createLink(e){const{message:b,timestamp:w}=util_1$4.getConsentMessage(e,!0),$=asTransaction$1(this.address,b),T=await this.provider.sign(this.address,$),N=await this.accountId();return{version:2,type:"eoa-tx",message:b,signature:T.Signature.Data,account:N.toString(),timestamp:w}}withAddress(e){return new FilecoinAuthProvider(this.provider,e)}}filecoin.FilecoinAuthProvider=FilecoinAuthProvider;function asTransaction$1(t,e){const b=uint8arrays$5.toString(uint8arrays$5.fromString(e),"base64");return{From:t,To:t,Value:"0",Method:0,GasPrice:"1",GasLimit:1e3,Nonce:0,Params:b,GasFeeCap:"1",GasPremium:"1"}}filecoin.asTransaction=asTransaction$1;var polkadot={},__createBinding$d=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$d=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$d(e,t,b);return __setModuleDefault$d(e,t),e};Object.defineProperty(polkadot,"__esModule",{value:!0});polkadot.PolkadotAuthProvider=void 0;const caip_1$4=cjs,util_1$3=util$8,uint8arrays$4=__importStar$d(uint8arrays$7),stringHex=t=>`0x${uint8arrays$4.toString(uint8arrays$4.fromString(t),"base16")}`,CHAIN_ID="polkadot:b0a8d493285c2df73290dfb7e61f870f";class PolkadotAuthProvider{constructor(e,b){this.provider=e,this.address=b,this.isAuthProvider=!0}async authenticate(e){throw new Error(`Not Implemented: PolkadotAuthProvider#authenticate, ${e}`)}async createLink(e){const{message:b,timestamp:w}=util_1$3.getConsentMessage(e),$=stringHex(b),T=await this.accountId(),N=await this.provider.signRaw({address:this.address,data:$,type:"bytes"});return{version:2,type:"eoa",message:b,signature:N.signature,account:T.toString(),timestamp:w}}async accountId(){return new caip_1$4.AccountID({address:this.address,chainId:CHAIN_ID})}withAddress(e){return new PolkadotAuthProvider(this.provider,e)}}polkadot.PolkadotAuthProvider=PolkadotAuthProvider;var eosio={},__createBinding$c=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$c=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$c=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$c(e,t,b);return __setModuleDefault$c(e,t),e};Object.defineProperty(eosio,"__esModule",{value:!0});eosio.toSignedPayload=eosio.toPayload=eosio.EosioAuthProvider=void 0;const caip_1$3=cjs,util_1$2=util$8,ethereum_1=ethereum,sha256Stable=__importStar$c(sha256$3),uint8arrays$3=__importStar$c(uint8arrays$7),maxWordLength=12;class EosioAuthProvider{constructor(e,b){this.provider=e,this.address=b,this.isAuthProvider=!0}async accountId(){const e=toCAIPChainId(await this.provider.getChainId());return new caip_1$3.AccountID({address:this.address,chainId:`eosio:${e}`})}async authenticate(e){const b=await this.accountId(),w=await toSignedPayload(e,b,this.provider),$=uint8arrays$3.fromString(w),T=sha256Stable.hash($);return`0x${uint8arrays$3.toString(T,"base16")}`}async createLink(e){const b=util_1$2.getConsentMessage(e),w=await this.accountId(),$=await toSignedPayload(b.message,w,this.provider);return{version:2,type:"eosio",message:b.message,signature:$,account:w.toString(),timestamp:b.timestamp}}withAddress(e){return new EosioAuthProvider(this.provider,e)}}eosio.EosioAuthProvider=EosioAuthProvider;function toCAIPChainId(t){return t.substr(0,32)}function sanitize(t,e){return t.replace(/\s/g," ").replace(new RegExp(`(\\S{${e}})`,"g"),"$1 ")}function toPayload(t,e){const{address:b,chainId:w}=e,$=`${t} [For: ${b} on chain: ${w}]`;return sanitize($,maxWordLength)}eosio.toPayload=toPayload;async function toSignedPayload(t,e,b){e=ethereum_1.normalizeAccountId(e);const{chainId:{reference:w},address:$}=e,T=await b.getAccountName(),N=toCAIPChainId(await b.getChainId());if(N!==w)throw new Error(`Provider returned a different chainId than requested [returned: ${N}, requested: ${w}]`);if(T!==$)throw new Error(`Provider returned a different account than requested [returned: ${T}, requested: ${$}]`);const C=toPayload(t,e),[F]=await b.getKeys();return b.signArbitrary(F,C)}eosio.toSignedPayload=toSignedPayload;var cosmos={},__createBinding$b=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$b=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$b(e,t,b);return __setModuleDefault$b(e,t),e};Object.defineProperty(cosmos,"__esModule",{value:!0});cosmos.CosmosAuthProvider=cosmos.getMetaData=cosmos.asTransaction=void 0;const caip_1$2=cjs,util_1$1=util$8,sha256_1=sha256$3,uint8arrays$2=__importStar$b(uint8arrays$7),stringEncode=t=>uint8arrays$2.toString(uint8arrays$2.fromString(t),"base64pad");function asTransaction(t,e){return{fee:{amount:[{amount:"0",denom:""}],gas:"0"},memo:e,msg:[{type:"cosmos-sdk/MsgSend",value:{from_address:t,to_address:t,amount:[{amount:"0",denom:"0"}]}}]}}cosmos.asTransaction=asTransaction;function getMetaData(){return{account_number:"1",chain_id:"cosmos",sequence:"0"}}cosmos.getMetaData=getMetaData;class CosmosAuthProvider{constructor(e,b,w){this.provider=e,this.address=b,this.chainRef=w,this.isAuthProvider=!0}async authenticate(e){const b=await this.accountId(),w=stringEncode(e),$=await this.provider.sign(asTransaction(b.address,w),getMetaData()),T=sha256_1.hash(uint8arrays$2.fromString(JSON.stringify($.signatures[0])));return`0x${uint8arrays$2.toString(T,"base16")}`}async createLink(e){const{message:b,timestamp:w}=util_1$1.getConsentMessage(e),$=await this.accountId(),T=stringEncode(b),N=await this.provider.sign(asTransaction($.address,T),getMetaData()),C=stringEncode(JSON.stringify(N.signatures[0]));return{version:2,message:b,signature:C,account:$.toString(),timestamp:w}}async accountId(){return new caip_1$2.AccountID({address:this.address,chainId:`cosmos:${this.chainRef}`})}withAddress(e){return new CosmosAuthProvider(this.provider,e,this.chainRef)}}cosmos.CosmosAuthProvider=CosmosAuthProvider;var tezos={};(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(re,ie,ue,ne){ne===void 0&&(ne=ue),Object.defineProperty(re,ne,{enumerable:!0,get:function(){return ie[ue]}})}:function(re,ie,ue,ne){ne===void 0&&(ne=ue),re[ne]=ie[ue]}),b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(re,ie){Object.defineProperty(re,"default",{enumerable:!0,value:ie})}:function(re,ie){re.default=ie}),w=commonjsGlobal&&commonjsGlobal.__importStar||function(re){if(re&&re.__esModule)return re;var ie={};if(re!=null)for(var ue in re)ue!=="default"&&Object.prototype.hasOwnProperty.call(re,ue)&&e(ie,re,ue);return b(ie,re),ie};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosAuthProvider=t.TEZOS_CHAIN_REF=t.TEZOS_NAMESPACE=void 0;const $=cjs,T=util$8,N=sha256$3,C=w(uint8arrays$7);t.TEZOS_NAMESPACE="tezos",t.TEZOS_CHAIN_REF="NetXdQprcVkpaWU";function F(re){return C.toString(C.fromString(re,"utf8"),"base16")}async function G(re,ie){const{prefixSig:ue}=await re.signer.sign(F(ie));return ue}async function J(re){return re.signer.publicKeyHash()}class Z{constructor(ie){if(this.provider=ie,this.isAuthProvider=!0,ie.signer===void 0)throw new Error("a `Signer` is required to use the `TezosAuthProvider`")}async authenticate(ie){const ue=await G(this.provider,ie),ne=N.hash(C.fromString(ue));return`0x${C.toString(ne,"base16")}`}async createLink(ie){const{message:ue,timestamp:ne}=T.getConsentMessage(ie),ce=await G(this.provider,ue),ae=await J(this.provider),ye=new $.AccountID({address:ae,chainId:`${t.TEZOS_NAMESPACE}:${t.TEZOS_CHAIN_REF}`});return{version:2,message:ue,signature:ce,account:ye.toString(),timestamp:ne}}async accountId(){const ie=await J(this.provider);return new $.AccountID({address:ie,chainId:`${t.TEZOS_NAMESPACE}:${t.TEZOS_CHAIN_REF}`})}withAddress(ie){throw new Error("TezosAuthProvider does not support withAddress")}}t.TezosAuthProvider=Z})(tezos);var near$1={},browserIndex$1={},browserIndex={},keystore={};Object.defineProperty(keystore,"__esModule",{value:!0});keystore.KeyStore=void 0;class KeyStore{}keystore.KeyStore=KeyStore;var in_memory_key_store={},key_pair={},naclFast={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:__viteBrowserExternal}),require$$1$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(t){(function(e){var b=function(ge){var Ee,Me=new Float64Array(16);if(ge)for(Ee=0;Ee<ge.length;Ee++)Me[Ee]=ge[Ee];return Me},w=function(){throw new Error("no PRNG")},$=new Uint8Array(16),T=new Uint8Array(32);T[0]=9;var N=b(),C=b([1]),F=b([56129,1]),G=b([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),J=b([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Z=b([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),re=b([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),ie=b([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ue(ge,Ee,Me,se){ge[Ee]=Me>>24&255,ge[Ee+1]=Me>>16&255,ge[Ee+2]=Me>>8&255,ge[Ee+3]=Me&255,ge[Ee+4]=se>>24&255,ge[Ee+5]=se>>16&255,ge[Ee+6]=se>>8&255,ge[Ee+7]=se&255}function ne(ge,Ee,Me,se,Ie){var De,Ge=0;for(De=0;De<Ie;De++)Ge|=ge[Ee+De]^Me[se+De];return(1&Ge-1>>>8)-1}function ce(ge,Ee,Me,se){return ne(ge,Ee,Me,se,16)}function ae(ge,Ee,Me,se){return ne(ge,Ee,Me,se,32)}function ye(ge,Ee,Me,se){for(var Ie=se[0]&255|(se[1]&255)<<8|(se[2]&255)<<16|(se[3]&255)<<24,De=Me[0]&255|(Me[1]&255)<<8|(Me[2]&255)<<16|(Me[3]&255)<<24,Ge=Me[4]&255|(Me[5]&255)<<8|(Me[6]&255)<<16|(Me[7]&255)<<24,He=Me[8]&255|(Me[9]&255)<<8|(Me[10]&255)<<16|(Me[11]&255)<<24,rt=Me[12]&255|(Me[13]&255)<<8|(Me[14]&255)<<16|(Me[15]&255)<<24,it=se[4]&255|(se[5]&255)<<8|(se[6]&255)<<16|(se[7]&255)<<24,tt=Ee[0]&255|(Ee[1]&255)<<8|(Ee[2]&255)<<16|(Ee[3]&255)<<24,Vt=Ee[4]&255|(Ee[5]&255)<<8|(Ee[6]&255)<<16|(Ee[7]&255)<<24,St=Ee[8]&255|(Ee[9]&255)<<8|(Ee[10]&255)<<16|(Ee[11]&255)<<24,Lt=Ee[12]&255|(Ee[13]&255)<<8|(Ee[14]&255)<<16|(Ee[15]&255)<<24,_t=se[8]&255|(se[9]&255)<<8|(se[10]&255)<<16|(se[11]&255)<<24,Ut=Me[16]&255|(Me[17]&255)<<8|(Me[18]&255)<<16|(Me[19]&255)<<24,Ht=Me[20]&255|(Me[21]&255)<<8|(Me[22]&255)<<16|(Me[23]&255)<<24,Be=Me[24]&255|(Me[25]&255)<<8|(Me[26]&255)<<16|(Me[27]&255)<<24,gt=Me[28]&255|(Me[29]&255)<<8|(Me[30]&255)<<16|(Me[31]&255)<<24,bt=se[12]&255|(se[13]&255)<<8|(se[14]&255)<<16|(se[15]&255)<<24,ot=Ie,Nt=De,$t=Ge,It=He,Rt=rt,xt=it,We=tt,Je=Vt,ft=St,nt=Lt,st=_t,vt=Ut,qt=Ht,Zt=Be,er=gt,Qt=bt,Le,rr=0;rr<20;rr+=2)Le=ot+qt|0,Rt^=Le<<7|Le>>>32-7,Le=Rt+ot|0,ft^=Le<<9|Le>>>32-9,Le=ft+Rt|0,qt^=Le<<13|Le>>>32-13,Le=qt+ft|0,ot^=Le<<18|Le>>>32-18,Le=xt+Nt|0,nt^=Le<<7|Le>>>32-7,Le=nt+xt|0,Zt^=Le<<9|Le>>>32-9,Le=Zt+nt|0,Nt^=Le<<13|Le>>>32-13,Le=Nt+Zt|0,xt^=Le<<18|Le>>>32-18,Le=st+We|0,er^=Le<<7|Le>>>32-7,Le=er+st|0,$t^=Le<<9|Le>>>32-9,Le=$t+er|0,We^=Le<<13|Le>>>32-13,Le=We+$t|0,st^=Le<<18|Le>>>32-18,Le=Qt+vt|0,It^=Le<<7|Le>>>32-7,Le=It+Qt|0,Je^=Le<<9|Le>>>32-9,Le=Je+It|0,vt^=Le<<13|Le>>>32-13,Le=vt+Je|0,Qt^=Le<<18|Le>>>32-18,Le=ot+It|0,Nt^=Le<<7|Le>>>32-7,Le=Nt+ot|0,$t^=Le<<9|Le>>>32-9,Le=$t+Nt|0,It^=Le<<13|Le>>>32-13,Le=It+$t|0,ot^=Le<<18|Le>>>32-18,Le=xt+Rt|0,We^=Le<<7|Le>>>32-7,Le=We+xt|0,Je^=Le<<9|Le>>>32-9,Le=Je+We|0,Rt^=Le<<13|Le>>>32-13,Le=Rt+Je|0,xt^=Le<<18|Le>>>32-18,Le=st+nt|0,vt^=Le<<7|Le>>>32-7,Le=vt+st|0,ft^=Le<<9|Le>>>32-9,Le=ft+vt|0,nt^=Le<<13|Le>>>32-13,Le=nt+ft|0,st^=Le<<18|Le>>>32-18,Le=Qt+er|0,qt^=Le<<7|Le>>>32-7,Le=qt+Qt|0,Zt^=Le<<9|Le>>>32-9,Le=Zt+qt|0,er^=Le<<13|Le>>>32-13,Le=er+Zt|0,Qt^=Le<<18|Le>>>32-18;ot=ot+Ie|0,Nt=Nt+De|0,$t=$t+Ge|0,It=It+He|0,Rt=Rt+rt|0,xt=xt+it|0,We=We+tt|0,Je=Je+Vt|0,ft=ft+St|0,nt=nt+Lt|0,st=st+_t|0,vt=vt+Ut|0,qt=qt+Ht|0,Zt=Zt+Be|0,er=er+gt|0,Qt=Qt+bt|0,ge[0]=ot>>>0&255,ge[1]=ot>>>8&255,ge[2]=ot>>>16&255,ge[3]=ot>>>24&255,ge[4]=Nt>>>0&255,ge[5]=Nt>>>8&255,ge[6]=Nt>>>16&255,ge[7]=Nt>>>24&255,ge[8]=$t>>>0&255,ge[9]=$t>>>8&255,ge[10]=$t>>>16&255,ge[11]=$t>>>24&255,ge[12]=It>>>0&255,ge[13]=It>>>8&255,ge[14]=It>>>16&255,ge[15]=It>>>24&255,ge[16]=Rt>>>0&255,ge[17]=Rt>>>8&255,ge[18]=Rt>>>16&255,ge[19]=Rt>>>24&255,ge[20]=xt>>>0&255,ge[21]=xt>>>8&255,ge[22]=xt>>>16&255,ge[23]=xt>>>24&255,ge[24]=We>>>0&255,ge[25]=We>>>8&255,ge[26]=We>>>16&255,ge[27]=We>>>24&255,ge[28]=Je>>>0&255,ge[29]=Je>>>8&255,ge[30]=Je>>>16&255,ge[31]=Je>>>24&255,ge[32]=ft>>>0&255,ge[33]=ft>>>8&255,ge[34]=ft>>>16&255,ge[35]=ft>>>24&255,ge[36]=nt>>>0&255,ge[37]=nt>>>8&255,ge[38]=nt>>>16&255,ge[39]=nt>>>24&255,ge[40]=st>>>0&255,ge[41]=st>>>8&255,ge[42]=st>>>16&255,ge[43]=st>>>24&255,ge[44]=vt>>>0&255,ge[45]=vt>>>8&255,ge[46]=vt>>>16&255,ge[47]=vt>>>24&255,ge[48]=qt>>>0&255,ge[49]=qt>>>8&255,ge[50]=qt>>>16&255,ge[51]=qt>>>24&255,ge[52]=Zt>>>0&255,ge[53]=Zt>>>8&255,ge[54]=Zt>>>16&255,ge[55]=Zt>>>24&255,ge[56]=er>>>0&255,ge[57]=er>>>8&255,ge[58]=er>>>16&255,ge[59]=er>>>24&255,ge[60]=Qt>>>0&255,ge[61]=Qt>>>8&255,ge[62]=Qt>>>16&255,ge[63]=Qt>>>24&255}function $e(ge,Ee,Me,se){for(var Ie=se[0]&255|(se[1]&255)<<8|(se[2]&255)<<16|(se[3]&255)<<24,De=Me[0]&255|(Me[1]&255)<<8|(Me[2]&255)<<16|(Me[3]&255)<<24,Ge=Me[4]&255|(Me[5]&255)<<8|(Me[6]&255)<<16|(Me[7]&255)<<24,He=Me[8]&255|(Me[9]&255)<<8|(Me[10]&255)<<16|(Me[11]&255)<<24,rt=Me[12]&255|(Me[13]&255)<<8|(Me[14]&255)<<16|(Me[15]&255)<<24,it=se[4]&255|(se[5]&255)<<8|(se[6]&255)<<16|(se[7]&255)<<24,tt=Ee[0]&255|(Ee[1]&255)<<8|(Ee[2]&255)<<16|(Ee[3]&255)<<24,Vt=Ee[4]&255|(Ee[5]&255)<<8|(Ee[6]&255)<<16|(Ee[7]&255)<<24,St=Ee[8]&255|(Ee[9]&255)<<8|(Ee[10]&255)<<16|(Ee[11]&255)<<24,Lt=Ee[12]&255|(Ee[13]&255)<<8|(Ee[14]&255)<<16|(Ee[15]&255)<<24,_t=se[8]&255|(se[9]&255)<<8|(se[10]&255)<<16|(se[11]&255)<<24,Ut=Me[16]&255|(Me[17]&255)<<8|(Me[18]&255)<<16|(Me[19]&255)<<24,Ht=Me[20]&255|(Me[21]&255)<<8|(Me[22]&255)<<16|(Me[23]&255)<<24,Be=Me[24]&255|(Me[25]&255)<<8|(Me[26]&255)<<16|(Me[27]&255)<<24,gt=Me[28]&255|(Me[29]&255)<<8|(Me[30]&255)<<16|(Me[31]&255)<<24,bt=se[12]&255|(se[13]&255)<<8|(se[14]&255)<<16|(se[15]&255)<<24,ot=Ie,Nt=De,$t=Ge,It=He,Rt=rt,xt=it,We=tt,Je=Vt,ft=St,nt=Lt,st=_t,vt=Ut,qt=Ht,Zt=Be,er=gt,Qt=bt,Le,rr=0;rr<20;rr+=2)Le=ot+qt|0,Rt^=Le<<7|Le>>>32-7,Le=Rt+ot|0,ft^=Le<<9|Le>>>32-9,Le=ft+Rt|0,qt^=Le<<13|Le>>>32-13,Le=qt+ft|0,ot^=Le<<18|Le>>>32-18,Le=xt+Nt|0,nt^=Le<<7|Le>>>32-7,Le=nt+xt|0,Zt^=Le<<9|Le>>>32-9,Le=Zt+nt|0,Nt^=Le<<13|Le>>>32-13,Le=Nt+Zt|0,xt^=Le<<18|Le>>>32-18,Le=st+We|0,er^=Le<<7|Le>>>32-7,Le=er+st|0,$t^=Le<<9|Le>>>32-9,Le=$t+er|0,We^=Le<<13|Le>>>32-13,Le=We+$t|0,st^=Le<<18|Le>>>32-18,Le=Qt+vt|0,It^=Le<<7|Le>>>32-7,Le=It+Qt|0,Je^=Le<<9|Le>>>32-9,Le=Je+It|0,vt^=Le<<13|Le>>>32-13,Le=vt+Je|0,Qt^=Le<<18|Le>>>32-18,Le=ot+It|0,Nt^=Le<<7|Le>>>32-7,Le=Nt+ot|0,$t^=Le<<9|Le>>>32-9,Le=$t+Nt|0,It^=Le<<13|Le>>>32-13,Le=It+$t|0,ot^=Le<<18|Le>>>32-18,Le=xt+Rt|0,We^=Le<<7|Le>>>32-7,Le=We+xt|0,Je^=Le<<9|Le>>>32-9,Le=Je+We|0,Rt^=Le<<13|Le>>>32-13,Le=Rt+Je|0,xt^=Le<<18|Le>>>32-18,Le=st+nt|0,vt^=Le<<7|Le>>>32-7,Le=vt+st|0,ft^=Le<<9|Le>>>32-9,Le=ft+vt|0,nt^=Le<<13|Le>>>32-13,Le=nt+ft|0,st^=Le<<18|Le>>>32-18,Le=Qt+er|0,qt^=Le<<7|Le>>>32-7,Le=qt+Qt|0,Zt^=Le<<9|Le>>>32-9,Le=Zt+qt|0,er^=Le<<13|Le>>>32-13,Le=er+Zt|0,Qt^=Le<<18|Le>>>32-18;ge[0]=ot>>>0&255,ge[1]=ot>>>8&255,ge[2]=ot>>>16&255,ge[3]=ot>>>24&255,ge[4]=xt>>>0&255,ge[5]=xt>>>8&255,ge[6]=xt>>>16&255,ge[7]=xt>>>24&255,ge[8]=st>>>0&255,ge[9]=st>>>8&255,ge[10]=st>>>16&255,ge[11]=st>>>24&255,ge[12]=Qt>>>0&255,ge[13]=Qt>>>8&255,ge[14]=Qt>>>16&255,ge[15]=Qt>>>24&255,ge[16]=We>>>0&255,ge[17]=We>>>8&255,ge[18]=We>>>16&255,ge[19]=We>>>24&255,ge[20]=Je>>>0&255,ge[21]=Je>>>8&255,ge[22]=Je>>>16&255,ge[23]=Je>>>24&255,ge[24]=ft>>>0&255,ge[25]=ft>>>8&255,ge[26]=ft>>>16&255,ge[27]=ft>>>24&255,ge[28]=nt>>>0&255,ge[29]=nt>>>8&255,ge[30]=nt>>>16&255,ge[31]=nt>>>24&255}function _e(ge,Ee,Me,se){ye(ge,Ee,Me,se)}function be(ge,Ee,Me,se){$e(ge,Ee,Me,se)}var xe=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ee(ge,Ee,Me,se,Ie,De,Ge){var He=new Uint8Array(16),rt=new Uint8Array(64),it,tt;for(tt=0;tt<16;tt++)He[tt]=0;for(tt=0;tt<8;tt++)He[tt]=De[tt];for(;Ie>=64;){for(_e(rt,He,Ge,xe),tt=0;tt<64;tt++)ge[Ee+tt]=Me[se+tt]^rt[tt];for(it=1,tt=8;tt<16;tt++)it=it+(He[tt]&255)|0,He[tt]=it&255,it>>>=8;Ie-=64,Ee+=64,se+=64}if(Ie>0)for(_e(rt,He,Ge,xe),tt=0;tt<Ie;tt++)ge[Ee+tt]=Me[se+tt]^rt[tt];return 0}function he(ge,Ee,Me,se,Ie){var De=new Uint8Array(16),Ge=new Uint8Array(64),He,rt;for(rt=0;rt<16;rt++)De[rt]=0;for(rt=0;rt<8;rt++)De[rt]=se[rt];for(;Me>=64;){for(_e(Ge,De,Ie,xe),rt=0;rt<64;rt++)ge[Ee+rt]=Ge[rt];for(He=1,rt=8;rt<16;rt++)He=He+(De[rt]&255)|0,De[rt]=He&255,He>>>=8;Me-=64,Ee+=64}if(Me>0)for(_e(Ge,De,Ie,xe),rt=0;rt<Me;rt++)ge[Ee+rt]=Ge[rt];return 0}function we(ge,Ee,Me,se,Ie){var De=new Uint8Array(32);be(De,se,Ie,xe);for(var Ge=new Uint8Array(8),He=0;He<8;He++)Ge[He]=se[He+16];return he(ge,Ee,Me,Ge,De)}function Ne(ge,Ee,Me,se,Ie,De,Ge){var He=new Uint8Array(32);be(He,De,Ge,xe);for(var rt=new Uint8Array(8),it=0;it<8;it++)rt[it]=De[it+16];return ee(ge,Ee,Me,se,Ie,rt,He)}var pe=function(ge){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var Ee,Me,se,Ie,De,Ge,He,rt;Ee=ge[0]&255|(ge[1]&255)<<8,this.r[0]=Ee&8191,Me=ge[2]&255|(ge[3]&255)<<8,this.r[1]=(Ee>>>13|Me<<3)&8191,se=ge[4]&255|(ge[5]&255)<<8,this.r[2]=(Me>>>10|se<<6)&7939,Ie=ge[6]&255|(ge[7]&255)<<8,this.r[3]=(se>>>7|Ie<<9)&8191,De=ge[8]&255|(ge[9]&255)<<8,this.r[4]=(Ie>>>4|De<<12)&255,this.r[5]=De>>>1&8190,Ge=ge[10]&255|(ge[11]&255)<<8,this.r[6]=(De>>>14|Ge<<2)&8191,He=ge[12]&255|(ge[13]&255)<<8,this.r[7]=(Ge>>>11|He<<5)&8065,rt=ge[14]&255|(ge[15]&255)<<8,this.r[8]=(He>>>8|rt<<8)&8191,this.r[9]=rt>>>5&127,this.pad[0]=ge[16]&255|(ge[17]&255)<<8,this.pad[1]=ge[18]&255|(ge[19]&255)<<8,this.pad[2]=ge[20]&255|(ge[21]&255)<<8,this.pad[3]=ge[22]&255|(ge[23]&255)<<8,this.pad[4]=ge[24]&255|(ge[25]&255)<<8,this.pad[5]=ge[26]&255|(ge[27]&255)<<8,this.pad[6]=ge[28]&255|(ge[29]&255)<<8,this.pad[7]=ge[30]&255|(ge[31]&255)<<8};pe.prototype.blocks=function(ge,Ee,Me){for(var se=this.fin?0:1<<11,Ie,De,Ge,He,rt,it,tt,Vt,St,Lt,_t,Ut,Ht,Be,gt,bt,ot,Nt,$t,It=this.h[0],Rt=this.h[1],xt=this.h[2],We=this.h[3],Je=this.h[4],ft=this.h[5],nt=this.h[6],st=this.h[7],vt=this.h[8],qt=this.h[9],Zt=this.r[0],er=this.r[1],Qt=this.r[2],Le=this.r[3],rr=this.r[4],ar=this.r[5],sr=this.r[6],tr=this.r[7],nr=this.r[8],ir=this.r[9];Me>=16;)Ie=ge[Ee+0]&255|(ge[Ee+1]&255)<<8,It+=Ie&8191,De=ge[Ee+2]&255|(ge[Ee+3]&255)<<8,Rt+=(Ie>>>13|De<<3)&8191,Ge=ge[Ee+4]&255|(ge[Ee+5]&255)<<8,xt+=(De>>>10|Ge<<6)&8191,He=ge[Ee+6]&255|(ge[Ee+7]&255)<<8,We+=(Ge>>>7|He<<9)&8191,rt=ge[Ee+8]&255|(ge[Ee+9]&255)<<8,Je+=(He>>>4|rt<<12)&8191,ft+=rt>>>1&8191,it=ge[Ee+10]&255|(ge[Ee+11]&255)<<8,nt+=(rt>>>14|it<<2)&8191,tt=ge[Ee+12]&255|(ge[Ee+13]&255)<<8,st+=(it>>>11|tt<<5)&8191,Vt=ge[Ee+14]&255|(ge[Ee+15]&255)<<8,vt+=(tt>>>8|Vt<<8)&8191,qt+=Vt>>>5|se,St=0,Lt=St,Lt+=It*Zt,Lt+=Rt*(5*ir),Lt+=xt*(5*nr),Lt+=We*(5*tr),Lt+=Je*(5*sr),St=Lt>>>13,Lt&=8191,Lt+=ft*(5*ar),Lt+=nt*(5*rr),Lt+=st*(5*Le),Lt+=vt*(5*Qt),Lt+=qt*(5*er),St+=Lt>>>13,Lt&=8191,_t=St,_t+=It*er,_t+=Rt*Zt,_t+=xt*(5*ir),_t+=We*(5*nr),_t+=Je*(5*tr),St=_t>>>13,_t&=8191,_t+=ft*(5*sr),_t+=nt*(5*ar),_t+=st*(5*rr),_t+=vt*(5*Le),_t+=qt*(5*Qt),St+=_t>>>13,_t&=8191,Ut=St,Ut+=It*Qt,Ut+=Rt*er,Ut+=xt*Zt,Ut+=We*(5*ir),Ut+=Je*(5*nr),St=Ut>>>13,Ut&=8191,Ut+=ft*(5*tr),Ut+=nt*(5*sr),Ut+=st*(5*ar),Ut+=vt*(5*rr),Ut+=qt*(5*Le),St+=Ut>>>13,Ut&=8191,Ht=St,Ht+=It*Le,Ht+=Rt*Qt,Ht+=xt*er,Ht+=We*Zt,Ht+=Je*(5*ir),St=Ht>>>13,Ht&=8191,Ht+=ft*(5*nr),Ht+=nt*(5*tr),Ht+=st*(5*sr),Ht+=vt*(5*ar),Ht+=qt*(5*rr),St+=Ht>>>13,Ht&=8191,Be=St,Be+=It*rr,Be+=Rt*Le,Be+=xt*Qt,Be+=We*er,Be+=Je*Zt,St=Be>>>13,Be&=8191,Be+=ft*(5*ir),Be+=nt*(5*nr),Be+=st*(5*tr),Be+=vt*(5*sr),Be+=qt*(5*ar),St+=Be>>>13,Be&=8191,gt=St,gt+=It*ar,gt+=Rt*rr,gt+=xt*Le,gt+=We*Qt,gt+=Je*er,St=gt>>>13,gt&=8191,gt+=ft*Zt,gt+=nt*(5*ir),gt+=st*(5*nr),gt+=vt*(5*tr),gt+=qt*(5*sr),St+=gt>>>13,gt&=8191,bt=St,bt+=It*sr,bt+=Rt*ar,bt+=xt*rr,bt+=We*Le,bt+=Je*Qt,St=bt>>>13,bt&=8191,bt+=ft*er,bt+=nt*Zt,bt+=st*(5*ir),bt+=vt*(5*nr),bt+=qt*(5*tr),St+=bt>>>13,bt&=8191,ot=St,ot+=It*tr,ot+=Rt*sr,ot+=xt*ar,ot+=We*rr,ot+=Je*Le,St=ot>>>13,ot&=8191,ot+=ft*Qt,ot+=nt*er,ot+=st*Zt,ot+=vt*(5*ir),ot+=qt*(5*nr),St+=ot>>>13,ot&=8191,Nt=St,Nt+=It*nr,Nt+=Rt*tr,Nt+=xt*sr,Nt+=We*ar,Nt+=Je*rr,St=Nt>>>13,Nt&=8191,Nt+=ft*Le,Nt+=nt*Qt,Nt+=st*er,Nt+=vt*Zt,Nt+=qt*(5*ir),St+=Nt>>>13,Nt&=8191,$t=St,$t+=It*ir,$t+=Rt*nr,$t+=xt*tr,$t+=We*sr,$t+=Je*ar,St=$t>>>13,$t&=8191,$t+=ft*rr,$t+=nt*Le,$t+=st*Qt,$t+=vt*er,$t+=qt*Zt,St+=$t>>>13,$t&=8191,St=(St<<2)+St|0,St=St+Lt|0,Lt=St&8191,St=St>>>13,_t+=St,It=Lt,Rt=_t,xt=Ut,We=Ht,Je=Be,ft=gt,nt=bt,st=ot,vt=Nt,qt=$t,Ee+=16,Me-=16;this.h[0]=It,this.h[1]=Rt,this.h[2]=xt,this.h[3]=We,this.h[4]=Je,this.h[5]=ft,this.h[6]=nt,this.h[7]=st,this.h[8]=vt,this.h[9]=qt},pe.prototype.finish=function(ge,Ee){var Me=new Uint16Array(10),se,Ie,De,Ge;if(this.leftover){for(Ge=this.leftover,this.buffer[Ge++]=1;Ge<16;Ge++)this.buffer[Ge]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(se=this.h[1]>>>13,this.h[1]&=8191,Ge=2;Ge<10;Ge++)this.h[Ge]+=se,se=this.h[Ge]>>>13,this.h[Ge]&=8191;for(this.h[0]+=se*5,se=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=se,se=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=se,Me[0]=this.h[0]+5,se=Me[0]>>>13,Me[0]&=8191,Ge=1;Ge<10;Ge++)Me[Ge]=this.h[Ge]+se,se=Me[Ge]>>>13,Me[Ge]&=8191;for(Me[9]-=1<<13,Ie=(se^1)-1,Ge=0;Ge<10;Ge++)Me[Ge]&=Ie;for(Ie=~Ie,Ge=0;Ge<10;Ge++)this.h[Ge]=this.h[Ge]&Ie|Me[Ge];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,De=this.h[0]+this.pad[0],this.h[0]=De&65535,Ge=1;Ge<8;Ge++)De=(this.h[Ge]+this.pad[Ge]|0)+(De>>>16)|0,this.h[Ge]=De&65535;ge[Ee+0]=this.h[0]>>>0&255,ge[Ee+1]=this.h[0]>>>8&255,ge[Ee+2]=this.h[1]>>>0&255,ge[Ee+3]=this.h[1]>>>8&255,ge[Ee+4]=this.h[2]>>>0&255,ge[Ee+5]=this.h[2]>>>8&255,ge[Ee+6]=this.h[3]>>>0&255,ge[Ee+7]=this.h[3]>>>8&255,ge[Ee+8]=this.h[4]>>>0&255,ge[Ee+9]=this.h[4]>>>8&255,ge[Ee+10]=this.h[5]>>>0&255,ge[Ee+11]=this.h[5]>>>8&255,ge[Ee+12]=this.h[6]>>>0&255,ge[Ee+13]=this.h[6]>>>8&255,ge[Ee+14]=this.h[7]>>>0&255,ge[Ee+15]=this.h[7]>>>8&255},pe.prototype.update=function(ge,Ee,Me){var se,Ie;if(this.leftover){for(Ie=16-this.leftover,Ie>Me&&(Ie=Me),se=0;se<Ie;se++)this.buffer[this.leftover+se]=ge[Ee+se];if(Me-=Ie,Ee+=Ie,this.leftover+=Ie,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(Me>=16&&(Ie=Me-Me%16,this.blocks(ge,Ee,Ie),Ee+=Ie,Me-=Ie),Me){for(se=0;se<Me;se++)this.buffer[this.leftover+se]=ge[Ee+se];this.leftover+=Me}};function te(ge,Ee,Me,se,Ie,De){var Ge=new pe(De);return Ge.update(Me,se,Ie),Ge.finish(ge,Ee),0}function Y(ge,Ee,Me,se,Ie,De){var Ge=new Uint8Array(16);return te(Ge,0,Me,se,Ie,De),ce(ge,Ee,Ge,0)}function R(ge,Ee,Me,se,Ie){var De;if(Me<32)return-1;for(Ne(ge,0,Ee,0,Me,se,Ie),te(ge,16,ge,32,Me-32,ge),De=0;De<16;De++)ge[De]=0;return 0}function B(ge,Ee,Me,se,Ie){var De,Ge=new Uint8Array(32);if(Me<32||(we(Ge,0,32,se,Ie),Y(Ee,16,Ee,32,Me-32,Ge)!==0))return-1;for(Ne(ge,0,Ee,0,Me,se,Ie),De=0;De<32;De++)ge[De]=0;return 0}function V(ge,Ee){var Me;for(Me=0;Me<16;Me++)ge[Me]=Ee[Me]|0}function Q(ge){var Ee,Me,se=1;for(Ee=0;Ee<16;Ee++)Me=ge[Ee]+se+65535,se=Math.floor(Me/65536),ge[Ee]=Me-se*65536;ge[0]+=se-1+37*(se-1)}function H(ge,Ee,Me){for(var se,Ie=~(Me-1),De=0;De<16;De++)se=Ie&(ge[De]^Ee[De]),ge[De]^=se,Ee[De]^=se}function j(ge,Ee){var Me,se,Ie,De=b(),Ge=b();for(Me=0;Me<16;Me++)Ge[Me]=Ee[Me];for(Q(Ge),Q(Ge),Q(Ge),se=0;se<2;se++){for(De[0]=Ge[0]-65517,Me=1;Me<15;Me++)De[Me]=Ge[Me]-65535-(De[Me-1]>>16&1),De[Me-1]&=65535;De[15]=Ge[15]-32767-(De[14]>>16&1),Ie=De[15]>>16&1,De[14]&=65535,H(Ge,De,1-Ie)}for(Me=0;Me<16;Me++)ge[2*Me]=Ge[Me]&255,ge[2*Me+1]=Ge[Me]>>8}function L(ge,Ee){var Me=new Uint8Array(32),se=new Uint8Array(32);return j(Me,ge),j(se,Ee),ae(Me,0,se,0)}function q(ge){var Ee=new Uint8Array(32);return j(Ee,ge),Ee[0]&1}function U(ge,Ee){var Me;for(Me=0;Me<16;Me++)ge[Me]=Ee[2*Me]+(Ee[2*Me+1]<<8);ge[15]&=32767}function oe(ge,Ee,Me){for(var se=0;se<16;se++)ge[se]=Ee[se]+Me[se]}function ve(ge,Ee,Me){for(var se=0;se<16;se++)ge[se]=Ee[se]-Me[se]}function fe(ge,Ee,Me){var se,Ie,De=0,Ge=0,He=0,rt=0,it=0,tt=0,Vt=0,St=0,Lt=0,_t=0,Ut=0,Ht=0,Be=0,gt=0,bt=0,ot=0,Nt=0,$t=0,It=0,Rt=0,xt=0,We=0,Je=0,ft=0,nt=0,st=0,vt=0,qt=0,Zt=0,er=0,Qt=0,Le=Me[0],rr=Me[1],ar=Me[2],sr=Me[3],tr=Me[4],nr=Me[5],ir=Me[6],fr=Me[7],or=Me[8],cr=Me[9],ur=Me[10],lr=Me[11],hr=Me[12],dr=Me[13],pr=Me[14],vr=Me[15];se=Ee[0],De+=se*Le,Ge+=se*rr,He+=se*ar,rt+=se*sr,it+=se*tr,tt+=se*nr,Vt+=se*ir,St+=se*fr,Lt+=se*or,_t+=se*cr,Ut+=se*ur,Ht+=se*lr,Be+=se*hr,gt+=se*dr,bt+=se*pr,ot+=se*vr,se=Ee[1],Ge+=se*Le,He+=se*rr,rt+=se*ar,it+=se*sr,tt+=se*tr,Vt+=se*nr,St+=se*ir,Lt+=se*fr,_t+=se*or,Ut+=se*cr,Ht+=se*ur,Be+=se*lr,gt+=se*hr,bt+=se*dr,ot+=se*pr,Nt+=se*vr,se=Ee[2],He+=se*Le,rt+=se*rr,it+=se*ar,tt+=se*sr,Vt+=se*tr,St+=se*nr,Lt+=se*ir,_t+=se*fr,Ut+=se*or,Ht+=se*cr,Be+=se*ur,gt+=se*lr,bt+=se*hr,ot+=se*dr,Nt+=se*pr,$t+=se*vr,se=Ee[3],rt+=se*Le,it+=se*rr,tt+=se*ar,Vt+=se*sr,St+=se*tr,Lt+=se*nr,_t+=se*ir,Ut+=se*fr,Ht+=se*or,Be+=se*cr,gt+=se*ur,bt+=se*lr,ot+=se*hr,Nt+=se*dr,$t+=se*pr,It+=se*vr,se=Ee[4],it+=se*Le,tt+=se*rr,Vt+=se*ar,St+=se*sr,Lt+=se*tr,_t+=se*nr,Ut+=se*ir,Ht+=se*fr,Be+=se*or,gt+=se*cr,bt+=se*ur,ot+=se*lr,Nt+=se*hr,$t+=se*dr,It+=se*pr,Rt+=se*vr,se=Ee[5],tt+=se*Le,Vt+=se*rr,St+=se*ar,Lt+=se*sr,_t+=se*tr,Ut+=se*nr,Ht+=se*ir,Be+=se*fr,gt+=se*or,bt+=se*cr,ot+=se*ur,Nt+=se*lr,$t+=se*hr,It+=se*dr,Rt+=se*pr,xt+=se*vr,se=Ee[6],Vt+=se*Le,St+=se*rr,Lt+=se*ar,_t+=se*sr,Ut+=se*tr,Ht+=se*nr,Be+=se*ir,gt+=se*fr,bt+=se*or,ot+=se*cr,Nt+=se*ur,$t+=se*lr,It+=se*hr,Rt+=se*dr,xt+=se*pr,We+=se*vr,se=Ee[7],St+=se*Le,Lt+=se*rr,_t+=se*ar,Ut+=se*sr,Ht+=se*tr,Be+=se*nr,gt+=se*ir,bt+=se*fr,ot+=se*or,Nt+=se*cr,$t+=se*ur,It+=se*lr,Rt+=se*hr,xt+=se*dr,We+=se*pr,Je+=se*vr,se=Ee[8],Lt+=se*Le,_t+=se*rr,Ut+=se*ar,Ht+=se*sr,Be+=se*tr,gt+=se*nr,bt+=se*ir,ot+=se*fr,Nt+=se*or,$t+=se*cr,It+=se*ur,Rt+=se*lr,xt+=se*hr,We+=se*dr,Je+=se*pr,ft+=se*vr,se=Ee[9],_t+=se*Le,Ut+=se*rr,Ht+=se*ar,Be+=se*sr,gt+=se*tr,bt+=se*nr,ot+=se*ir,Nt+=se*fr,$t+=se*or,It+=se*cr,Rt+=se*ur,xt+=se*lr,We+=se*hr,Je+=se*dr,ft+=se*pr,nt+=se*vr,se=Ee[10],Ut+=se*Le,Ht+=se*rr,Be+=se*ar,gt+=se*sr,bt+=se*tr,ot+=se*nr,Nt+=se*ir,$t+=se*fr,It+=se*or,Rt+=se*cr,xt+=se*ur,We+=se*lr,Je+=se*hr,ft+=se*dr,nt+=se*pr,st+=se*vr,se=Ee[11],Ht+=se*Le,Be+=se*rr,gt+=se*ar,bt+=se*sr,ot+=se*tr,Nt+=se*nr,$t+=se*ir,It+=se*fr,Rt+=se*or,xt+=se*cr,We+=se*ur,Je+=se*lr,ft+=se*hr,nt+=se*dr,st+=se*pr,vt+=se*vr,se=Ee[12],Be+=se*Le,gt+=se*rr,bt+=se*ar,ot+=se*sr,Nt+=se*tr,$t+=se*nr,It+=se*ir,Rt+=se*fr,xt+=se*or,We+=se*cr,Je+=se*ur,ft+=se*lr,nt+=se*hr,st+=se*dr,vt+=se*pr,qt+=se*vr,se=Ee[13],gt+=se*Le,bt+=se*rr,ot+=se*ar,Nt+=se*sr,$t+=se*tr,It+=se*nr,Rt+=se*ir,xt+=se*fr,We+=se*or,Je+=se*cr,ft+=se*ur,nt+=se*lr,st+=se*hr,vt+=se*dr,qt+=se*pr,Zt+=se*vr,se=Ee[14],bt+=se*Le,ot+=se*rr,Nt+=se*ar,$t+=se*sr,It+=se*tr,Rt+=se*nr,xt+=se*ir,We+=se*fr,Je+=se*or,ft+=se*cr,nt+=se*ur,st+=se*lr,vt+=se*hr,qt+=se*dr,Zt+=se*pr,er+=se*vr,se=Ee[15],ot+=se*Le,Nt+=se*rr,$t+=se*ar,It+=se*sr,Rt+=se*tr,xt+=se*nr,We+=se*ir,Je+=se*fr,ft+=se*or,nt+=se*cr,st+=se*ur,vt+=se*lr,qt+=se*hr,Zt+=se*dr,er+=se*pr,Qt+=se*vr,De+=38*Nt,Ge+=38*$t,He+=38*It,rt+=38*Rt,it+=38*xt,tt+=38*We,Vt+=38*Je,St+=38*ft,Lt+=38*nt,_t+=38*st,Ut+=38*vt,Ht+=38*qt,Be+=38*Zt,gt+=38*er,bt+=38*Qt,Ie=1,se=De+Ie+65535,Ie=Math.floor(se/65536),De=se-Ie*65536,se=Ge+Ie+65535,Ie=Math.floor(se/65536),Ge=se-Ie*65536,se=He+Ie+65535,Ie=Math.floor(se/65536),He=se-Ie*65536,se=rt+Ie+65535,Ie=Math.floor(se/65536),rt=se-Ie*65536,se=it+Ie+65535,Ie=Math.floor(se/65536),it=se-Ie*65536,se=tt+Ie+65535,Ie=Math.floor(se/65536),tt=se-Ie*65536,se=Vt+Ie+65535,Ie=Math.floor(se/65536),Vt=se-Ie*65536,se=St+Ie+65535,Ie=Math.floor(se/65536),St=se-Ie*65536,se=Lt+Ie+65535,Ie=Math.floor(se/65536),Lt=se-Ie*65536,se=_t+Ie+65535,Ie=Math.floor(se/65536),_t=se-Ie*65536,se=Ut+Ie+65535,Ie=Math.floor(se/65536),Ut=se-Ie*65536,se=Ht+Ie+65535,Ie=Math.floor(se/65536),Ht=se-Ie*65536,se=Be+Ie+65535,Ie=Math.floor(se/65536),Be=se-Ie*65536,se=gt+Ie+65535,Ie=Math.floor(se/65536),gt=se-Ie*65536,se=bt+Ie+65535,Ie=Math.floor(se/65536),bt=se-Ie*65536,se=ot+Ie+65535,Ie=Math.floor(se/65536),ot=se-Ie*65536,De+=Ie-1+37*(Ie-1),Ie=1,se=De+Ie+65535,Ie=Math.floor(se/65536),De=se-Ie*65536,se=Ge+Ie+65535,Ie=Math.floor(se/65536),Ge=se-Ie*65536,se=He+Ie+65535,Ie=Math.floor(se/65536),He=se-Ie*65536,se=rt+Ie+65535,Ie=Math.floor(se/65536),rt=se-Ie*65536,se=it+Ie+65535,Ie=Math.floor(se/65536),it=se-Ie*65536,se=tt+Ie+65535,Ie=Math.floor(se/65536),tt=se-Ie*65536,se=Vt+Ie+65535,Ie=Math.floor(se/65536),Vt=se-Ie*65536,se=St+Ie+65535,Ie=Math.floor(se/65536),St=se-Ie*65536,se=Lt+Ie+65535,Ie=Math.floor(se/65536),Lt=se-Ie*65536,se=_t+Ie+65535,Ie=Math.floor(se/65536),_t=se-Ie*65536,se=Ut+Ie+65535,Ie=Math.floor(se/65536),Ut=se-Ie*65536,se=Ht+Ie+65535,Ie=Math.floor(se/65536),Ht=se-Ie*65536,se=Be+Ie+65535,Ie=Math.floor(se/65536),Be=se-Ie*65536,se=gt+Ie+65535,Ie=Math.floor(se/65536),gt=se-Ie*65536,se=bt+Ie+65535,Ie=Math.floor(se/65536),bt=se-Ie*65536,se=ot+Ie+65535,Ie=Math.floor(se/65536),ot=se-Ie*65536,De+=Ie-1+37*(Ie-1),ge[0]=De,ge[1]=Ge,ge[2]=He,ge[3]=rt,ge[4]=it,ge[5]=tt,ge[6]=Vt,ge[7]=St,ge[8]=Lt,ge[9]=_t,ge[10]=Ut,ge[11]=Ht,ge[12]=Be,ge[13]=gt,ge[14]=bt,ge[15]=ot}function Oe(ge,Ee){fe(ge,Ee,Ee)}function Se(ge,Ee){var Me=b(),se;for(se=0;se<16;se++)Me[se]=Ee[se];for(se=253;se>=0;se--)Oe(Me,Me),se!==2&&se!==4&&fe(Me,Me,Ee);for(se=0;se<16;se++)ge[se]=Me[se]}function Te(ge,Ee){var Me=b(),se;for(se=0;se<16;se++)Me[se]=Ee[se];for(se=250;se>=0;se--)Oe(Me,Me),se!==1&&fe(Me,Me,Ee);for(se=0;se<16;se++)ge[se]=Me[se]}function Ae(ge,Ee,Me){var se=new Uint8Array(32),Ie=new Float64Array(80),De,Ge,He=b(),rt=b(),it=b(),tt=b(),Vt=b(),St=b();for(Ge=0;Ge<31;Ge++)se[Ge]=Ee[Ge];for(se[31]=Ee[31]&127|64,se[0]&=248,U(Ie,Me),Ge=0;Ge<16;Ge++)rt[Ge]=Ie[Ge],tt[Ge]=He[Ge]=it[Ge]=0;for(He[0]=tt[0]=1,Ge=254;Ge>=0;--Ge)De=se[Ge>>>3]>>>(Ge&7)&1,H(He,rt,De),H(it,tt,De),oe(Vt,He,it),ve(He,He,it),oe(it,rt,tt),ve(rt,rt,tt),Oe(tt,Vt),Oe(St,He),fe(He,it,He),fe(it,rt,Vt),oe(Vt,He,it),ve(He,He,it),Oe(rt,He),ve(it,tt,St),fe(He,it,F),oe(He,He,tt),fe(it,it,He),fe(He,tt,St),fe(tt,rt,Ie),Oe(rt,Vt),H(He,rt,De),H(it,tt,De);for(Ge=0;Ge<16;Ge++)Ie[Ge+16]=He[Ge],Ie[Ge+32]=it[Ge],Ie[Ge+48]=rt[Ge],Ie[Ge+64]=tt[Ge];var Lt=Ie.subarray(32),_t=Ie.subarray(16);return Se(Lt,Lt),fe(_t,_t,Lt),j(ge,_t),0}function le(ge,Ee){return Ae(ge,Ee,T)}function ke(ge,Ee){return w(Ee,32),le(ge,Ee)}function je(ge,Ee,Me){var se=new Uint8Array(32);return Ae(se,Me,Ee),be(ge,$,se,xe)}var Ve=R,qe=B;function Ze(ge,Ee,Me,se,Ie,De){var Ge=new Uint8Array(32);return je(Ge,Ie,De),Ve(ge,Ee,Me,se,Ge)}function Pe(ge,Ee,Me,se,Ie,De){var Ge=new Uint8Array(32);return je(Ge,Ie,De),qe(ge,Ee,Me,se,Ge)}var de=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function me(ge,Ee,Me,se){for(var Ie=new Int32Array(16),De=new Int32Array(16),Ge,He,rt,it,tt,Vt,St,Lt,_t,Ut,Ht,Be,gt,bt,ot,Nt,$t,It,Rt,xt,We,Je,ft,nt,st,vt,qt=ge[0],Zt=ge[1],er=ge[2],Qt=ge[3],Le=ge[4],rr=ge[5],ar=ge[6],sr=ge[7],tr=Ee[0],nr=Ee[1],ir=Ee[2],fr=Ee[3],or=Ee[4],cr=Ee[5],ur=Ee[6],lr=Ee[7],hr=0;se>=128;){for(Rt=0;Rt<16;Rt++)xt=8*Rt+hr,Ie[Rt]=Me[xt+0]<<24|Me[xt+1]<<16|Me[xt+2]<<8|Me[xt+3],De[Rt]=Me[xt+4]<<24|Me[xt+5]<<16|Me[xt+6]<<8|Me[xt+7];for(Rt=0;Rt<80;Rt++)if(Ge=qt,He=Zt,rt=er,it=Qt,tt=Le,Vt=rr,St=ar,Lt=sr,_t=tr,Ut=nr,Ht=ir,Be=fr,gt=or,bt=cr,ot=ur,Nt=lr,We=sr,Je=lr,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=(Le>>>14|or<<32-14)^(Le>>>18|or<<32-18)^(or>>>41-32|Le<<32-(41-32)),Je=(or>>>14|Le<<32-14)^(or>>>18|Le<<32-18)^(Le>>>41-32|or<<32-(41-32)),ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,We=Le&rr^~Le&ar,Je=or&cr^~or&ur,ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,We=de[Rt*2],Je=de[Rt*2+1],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,We=Ie[Rt%16],Je=De[Rt%16],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,$t=st&65535|vt<<16,It=ft&65535|nt<<16,We=$t,Je=It,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=(qt>>>28|tr<<32-28)^(tr>>>34-32|qt<<32-(34-32))^(tr>>>39-32|qt<<32-(39-32)),Je=(tr>>>28|qt<<32-28)^(qt>>>34-32|tr<<32-(34-32))^(qt>>>39-32|tr<<32-(39-32)),ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,We=qt&Zt^qt&er^Zt&er,Je=tr&nr^tr&ir^nr&ir,ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,Lt=st&65535|vt<<16,Nt=ft&65535|nt<<16,We=it,Je=Be,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=$t,Je=It,ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,it=st&65535|vt<<16,Be=ft&65535|nt<<16,Zt=Ge,er=He,Qt=rt,Le=it,rr=tt,ar=Vt,sr=St,qt=Lt,nr=_t,ir=Ut,fr=Ht,or=Be,cr=gt,ur=bt,lr=ot,tr=Nt,Rt%16==15)for(xt=0;xt<16;xt++)We=Ie[xt],Je=De[xt],ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=Ie[(xt+9)%16],Je=De[(xt+9)%16],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,$t=Ie[(xt+1)%16],It=De[(xt+1)%16],We=($t>>>1|It<<32-1)^($t>>>8|It<<32-8)^$t>>>7,Je=(It>>>1|$t<<32-1)^(It>>>8|$t<<32-8)^(It>>>7|$t<<32-7),ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,$t=Ie[(xt+14)%16],It=De[(xt+14)%16],We=($t>>>19|It<<32-19)^(It>>>61-32|$t<<32-(61-32))^$t>>>6,Je=(It>>>19|$t<<32-19)^($t>>>61-32|It<<32-(61-32))^(It>>>6|$t<<32-6),ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,Ie[xt]=st&65535|vt<<16,De[xt]=ft&65535|nt<<16;We=qt,Je=tr,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=ge[0],Je=Ee[0],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,ge[0]=qt=st&65535|vt<<16,Ee[0]=tr=ft&65535|nt<<16,We=Zt,Je=nr,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=ge[1],Je=Ee[1],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,ge[1]=Zt=st&65535|vt<<16,Ee[1]=nr=ft&65535|nt<<16,We=er,Je=ir,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=ge[2],Je=Ee[2],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,ge[2]=er=st&65535|vt<<16,Ee[2]=ir=ft&65535|nt<<16,We=Qt,Je=fr,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=ge[3],Je=Ee[3],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,ge[3]=Qt=st&65535|vt<<16,Ee[3]=fr=ft&65535|nt<<16,We=Le,Je=or,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=ge[4],Je=Ee[4],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,ge[4]=Le=st&65535|vt<<16,Ee[4]=or=ft&65535|nt<<16,We=rr,Je=cr,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=ge[5],Je=Ee[5],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,ge[5]=rr=st&65535|vt<<16,Ee[5]=cr=ft&65535|nt<<16,We=ar,Je=ur,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=ge[6],Je=Ee[6],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,ge[6]=ar=st&65535|vt<<16,Ee[6]=ur=ft&65535|nt<<16,We=sr,Je=lr,ft=Je&65535,nt=Je>>>16,st=We&65535,vt=We>>>16,We=ge[7],Je=Ee[7],ft+=Je&65535,nt+=Je>>>16,st+=We&65535,vt+=We>>>16,nt+=ft>>>16,st+=nt>>>16,vt+=st>>>16,ge[7]=sr=st&65535|vt<<16,Ee[7]=lr=ft&65535|nt<<16,hr+=128,se-=128}return se}function Re(ge,Ee,Me){var se=new Int32Array(8),Ie=new Int32Array(8),De=new Uint8Array(256),Ge,He=Me;for(se[0]=1779033703,se[1]=3144134277,se[2]=1013904242,se[3]=2773480762,se[4]=1359893119,se[5]=2600822924,se[6]=528734635,se[7]=1541459225,Ie[0]=4089235720,Ie[1]=2227873595,Ie[2]=4271175723,Ie[3]=1595750129,Ie[4]=2917565137,Ie[5]=725511199,Ie[6]=4215389547,Ie[7]=327033209,me(se,Ie,Ee,Me),Me%=128,Ge=0;Ge<Me;Ge++)De[Ge]=Ee[He-Me+Ge];for(De[Me]=128,Me=256-128*(Me<112?1:0),De[Me-9]=0,ue(De,Me-8,He/536870912|0,He<<3),me(se,Ie,De,Me),Ge=0;Ge<8;Ge++)ue(ge,8*Ge,se[Ge],Ie[Ge]);return 0}function Fe(ge,Ee){var Me=b(),se=b(),Ie=b(),De=b(),Ge=b(),He=b(),rt=b(),it=b(),tt=b();ve(Me,ge[1],ge[0]),ve(tt,Ee[1],Ee[0]),fe(Me,Me,tt),oe(se,ge[0],ge[1]),oe(tt,Ee[0],Ee[1]),fe(se,se,tt),fe(Ie,ge[3],Ee[3]),fe(Ie,Ie,J),fe(De,ge[2],Ee[2]),oe(De,De,De),ve(Ge,se,Me),ve(He,De,Ie),oe(rt,De,Ie),oe(it,se,Me),fe(ge[0],Ge,He),fe(ge[1],it,rt),fe(ge[2],rt,He),fe(ge[3],Ge,it)}function Ue(ge,Ee,Me){var se;for(se=0;se<4;se++)H(ge[se],Ee[se],Me)}function ze(ge,Ee){var Me=b(),se=b(),Ie=b();Se(Ie,Ee[2]),fe(Me,Ee[0],Ie),fe(se,Ee[1],Ie),j(ge,se),ge[31]^=q(Me)<<7}function Qe(ge,Ee,Me){var se,Ie;for(V(ge[0],N),V(ge[1],C),V(ge[2],C),V(ge[3],N),Ie=255;Ie>=0;--Ie)se=Me[Ie/8|0]>>(Ie&7)&1,Ue(ge,Ee,se),Fe(Ee,ge),Fe(ge,ge),Ue(ge,Ee,se)}function Ye(ge,Ee){var Me=[b(),b(),b(),b()];V(Me[0],Z),V(Me[1],re),V(Me[2],C),fe(Me[3],Z,re),Qe(ge,Me,Ee)}function ht(ge,Ee,Me){var se=new Uint8Array(64),Ie=[b(),b(),b(),b()],De;for(Me||w(Ee,32),Re(se,Ee,32),se[0]&=248,se[31]&=127,se[31]|=64,Ye(Ie,se),ze(ge,Ie),De=0;De<32;De++)Ee[De+32]=ge[De];return 0}var at=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Ke(ge,Ee){var Me,se,Ie,De;for(se=63;se>=32;--se){for(Me=0,Ie=se-32,De=se-12;Ie<De;++Ie)Ee[Ie]+=Me-16*Ee[se]*at[Ie-(se-32)],Me=Math.floor((Ee[Ie]+128)/256),Ee[Ie]-=Me*256;Ee[Ie]+=Me,Ee[se]=0}for(Me=0,Ie=0;Ie<32;Ie++)Ee[Ie]+=Me-(Ee[31]>>4)*at[Ie],Me=Ee[Ie]>>8,Ee[Ie]&=255;for(Ie=0;Ie<32;Ie++)Ee[Ie]-=Me*at[Ie];for(se=0;se<32;se++)Ee[se+1]+=Ee[se]>>8,ge[se]=Ee[se]&255}function kt(ge){var Ee=new Float64Array(64),Me;for(Me=0;Me<64;Me++)Ee[Me]=ge[Me];for(Me=0;Me<64;Me++)ge[Me]=0;Ke(ge,Ee)}function yt(ge,Ee,Me,se){var Ie=new Uint8Array(64),De=new Uint8Array(64),Ge=new Uint8Array(64),He,rt,it=new Float64Array(64),tt=[b(),b(),b(),b()];Re(Ie,se,32),Ie[0]&=248,Ie[31]&=127,Ie[31]|=64;var Vt=Me+64;for(He=0;He<Me;He++)ge[64+He]=Ee[He];for(He=0;He<32;He++)ge[32+He]=Ie[32+He];for(Re(Ge,ge.subarray(32),Me+32),kt(Ge),Ye(tt,Ge),ze(ge,tt),He=32;He<64;He++)ge[He]=se[He];for(Re(De,ge,Me+64),kt(De),He=0;He<64;He++)it[He]=0;for(He=0;He<32;He++)it[He]=Ge[He];for(He=0;He<32;He++)for(rt=0;rt<32;rt++)it[He+rt]+=De[He]*Ie[rt];return Ke(ge.subarray(32),it),Vt}function ct(ge,Ee){var Me=b(),se=b(),Ie=b(),De=b(),Ge=b(),He=b(),rt=b();return V(ge[2],C),U(ge[1],Ee),Oe(Ie,ge[1]),fe(De,Ie,G),ve(Ie,Ie,ge[2]),oe(De,ge[2],De),Oe(Ge,De),Oe(He,Ge),fe(rt,He,Ge),fe(Me,rt,Ie),fe(Me,Me,De),Te(Me,Me),fe(Me,Me,Ie),fe(Me,Me,De),fe(Me,Me,De),fe(ge[0],Me,De),Oe(se,ge[0]),fe(se,se,De),L(se,Ie)&&fe(ge[0],ge[0],ie),Oe(se,ge[0]),fe(se,se,De),L(se,Ie)?-1:(q(ge[0])===Ee[31]>>7&&ve(ge[0],N,ge[0]),fe(ge[3],ge[0],ge[1]),0)}function Bt(ge,Ee,Me,se){var Ie,De=new Uint8Array(32),Ge=new Uint8Array(64),He=[b(),b(),b(),b()],rt=[b(),b(),b(),b()];if(Me<64||ct(rt,se))return-1;for(Ie=0;Ie<Me;Ie++)ge[Ie]=Ee[Ie];for(Ie=0;Ie<32;Ie++)ge[Ie+32]=se[Ie];if(Re(Ge,ge,Me),kt(Ge),Qe(He,rt,Ge),Ye(rt,Ee.subarray(32)),Fe(He,rt),ze(De,He),Me-=64,ae(Ee,0,De,0)){for(Ie=0;Ie<Me;Ie++)ge[Ie]=0;return-1}for(Ie=0;Ie<Me;Ie++)ge[Ie]=Ee[Ie+64];return Me}var Et=32,et=24,Ft=32,At=16,Mt=32,Xt=32,Dt=32,lt=32,Yt=32,jt=et,Pt=Ft,Wt=At,Ot=64,dt=32,zt=64,Ct=32,wt=64;e.lowlevel={crypto_core_hsalsa20:be,crypto_stream_xor:Ne,crypto_stream:we,crypto_stream_salsa20_xor:ee,crypto_stream_salsa20:he,crypto_onetimeauth:te,crypto_onetimeauth_verify:Y,crypto_verify_16:ce,crypto_verify_32:ae,crypto_secretbox:R,crypto_secretbox_open:B,crypto_scalarmult:Ae,crypto_scalarmult_base:le,crypto_box_beforenm:je,crypto_box_afternm:Ve,crypto_box:Ze,crypto_box_open:Pe,crypto_box_keypair:ke,crypto_hash:Re,crypto_sign:yt,crypto_sign_keypair:ht,crypto_sign_open:Bt,crypto_secretbox_KEYBYTES:Et,crypto_secretbox_NONCEBYTES:et,crypto_secretbox_ZEROBYTES:Ft,crypto_secretbox_BOXZEROBYTES:At,crypto_scalarmult_BYTES:Mt,crypto_scalarmult_SCALARBYTES:Xt,crypto_box_PUBLICKEYBYTES:Dt,crypto_box_SECRETKEYBYTES:lt,crypto_box_BEFORENMBYTES:Yt,crypto_box_NONCEBYTES:jt,crypto_box_ZEROBYTES:Pt,crypto_box_BOXZEROBYTES:Wt,crypto_sign_BYTES:Ot,crypto_sign_PUBLICKEYBYTES:dt,crypto_sign_SECRETKEYBYTES:zt,crypto_sign_SEEDBYTES:Ct,crypto_hash_BYTES:wt,gf:b,D:G,L:at,pack25519:j,unpack25519:U,M:fe,A:oe,S:Oe,Z:ve,pow2523:Te,add:Fe,set25519:V,modL:Ke,scalarmult:Qe,scalarbase:Ye};function Kt(ge,Ee){if(ge.length!==Et)throw new Error("bad key size");if(Ee.length!==et)throw new Error("bad nonce size")}function mt(ge,Ee){if(ge.length!==Dt)throw new Error("bad public key size");if(Ee.length!==lt)throw new Error("bad secret key size")}function pt(){for(var ge=0;ge<arguments.length;ge++)if(!(arguments[ge]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Jt(ge){for(var Ee=0;Ee<ge.length;Ee++)ge[Ee]=0}e.randomBytes=function(ge){var Ee=new Uint8Array(ge);return w(Ee,ge),Ee},e.secretbox=function(ge,Ee,Me){pt(ge,Ee,Me),Kt(Me,Ee);for(var se=new Uint8Array(Ft+ge.length),Ie=new Uint8Array(se.length),De=0;De<ge.length;De++)se[De+Ft]=ge[De];return R(Ie,se,se.length,Ee,Me),Ie.subarray(At)},e.secretbox.open=function(ge,Ee,Me){pt(ge,Ee,Me),Kt(Me,Ee);for(var se=new Uint8Array(At+ge.length),Ie=new Uint8Array(se.length),De=0;De<ge.length;De++)se[De+At]=ge[De];return se.length<32||B(Ie,se,se.length,Ee,Me)!==0?null:Ie.subarray(Ft)},e.secretbox.keyLength=Et,e.secretbox.nonceLength=et,e.secretbox.overheadLength=At,e.scalarMult=function(ge,Ee){if(pt(ge,Ee),ge.length!==Xt)throw new Error("bad n size");if(Ee.length!==Mt)throw new Error("bad p size");var Me=new Uint8Array(Mt);return Ae(Me,ge,Ee),Me},e.scalarMult.base=function(ge){if(pt(ge),ge.length!==Xt)throw new Error("bad n size");var Ee=new Uint8Array(Mt);return le(Ee,ge),Ee},e.scalarMult.scalarLength=Xt,e.scalarMult.groupElementLength=Mt,e.box=function(ge,Ee,Me,se){var Ie=e.box.before(Me,se);return e.secretbox(ge,Ee,Ie)},e.box.before=function(ge,Ee){pt(ge,Ee),mt(ge,Ee);var Me=new Uint8Array(Yt);return je(Me,ge,Ee),Me},e.box.after=e.secretbox,e.box.open=function(ge,Ee,Me,se){var Ie=e.box.before(Me,se);return e.secretbox.open(ge,Ee,Ie)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var ge=new Uint8Array(Dt),Ee=new Uint8Array(lt);return ke(ge,Ee),{publicKey:ge,secretKey:Ee}},e.box.keyPair.fromSecretKey=function(ge){if(pt(ge),ge.length!==lt)throw new Error("bad secret key size");var Ee=new Uint8Array(Dt);return le(Ee,ge),{publicKey:Ee,secretKey:new Uint8Array(ge)}},e.box.publicKeyLength=Dt,e.box.secretKeyLength=lt,e.box.sharedKeyLength=Yt,e.box.nonceLength=jt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(ge,Ee){if(pt(ge,Ee),Ee.length!==zt)throw new Error("bad secret key size");var Me=new Uint8Array(Ot+ge.length);return yt(Me,ge,ge.length,Ee),Me},e.sign.open=function(ge,Ee){if(pt(ge,Ee),Ee.length!==dt)throw new Error("bad public key size");var Me=new Uint8Array(ge.length),se=Bt(Me,ge,ge.length,Ee);if(se<0)return null;for(var Ie=new Uint8Array(se),De=0;De<Ie.length;De++)Ie[De]=Me[De];return Ie},e.sign.detached=function(ge,Ee){for(var Me=e.sign(ge,Ee),se=new Uint8Array(Ot),Ie=0;Ie<se.length;Ie++)se[Ie]=Me[Ie];return se},e.sign.detached.verify=function(ge,Ee,Me){if(pt(ge,Ee,Me),Ee.length!==Ot)throw new Error("bad signature size");if(Me.length!==dt)throw new Error("bad public key size");var se=new Uint8Array(Ot+ge.length),Ie=new Uint8Array(Ot+ge.length),De;for(De=0;De<Ot;De++)se[De]=Ee[De];for(De=0;De<ge.length;De++)se[De+Ot]=ge[De];return Bt(Ie,se,se.length,Me)>=0},e.sign.keyPair=function(){var ge=new Uint8Array(dt),Ee=new Uint8Array(zt);return ht(ge,Ee),{publicKey:ge,secretKey:Ee}},e.sign.keyPair.fromSecretKey=function(ge){if(pt(ge),ge.length!==zt)throw new Error("bad secret key size");for(var Ee=new Uint8Array(dt),Me=0;Me<Ee.length;Me++)Ee[Me]=ge[32+Me];return{publicKey:Ee,secretKey:new Uint8Array(ge)}},e.sign.keyPair.fromSeed=function(ge){if(pt(ge),ge.length!==Ct)throw new Error("bad seed size");for(var Ee=new Uint8Array(dt),Me=new Uint8Array(zt),se=0;se<32;se++)Me[se]=ge[se];return ht(Ee,Me,!0),{publicKey:Ee,secretKey:Me}},e.sign.publicKeyLength=dt,e.sign.secretKeyLength=zt,e.sign.seedLength=Ct,e.sign.signatureLength=Ot,e.hash=function(ge){pt(ge);var Ee=new Uint8Array(wt);return Re(Ee,ge,ge.length),Ee},e.hash.hashLength=wt,e.verify=function(ge,Ee){return pt(ge,Ee),ge.length===0||Ee.length===0||ge.length!==Ee.length?!1:ne(ge,0,Ee,0,ge.length)===0},e.setPRNG=function(ge){w=ge},function(){var ge=typeof self!="undefined"?self.crypto||self.msCrypto:null;if(ge&&ge.getRandomValues){var Ee=65536;e.setPRNG(function(Me,se){var Ie,De=new Uint8Array(se);for(Ie=0;Ie<se;Ie+=Ee)ge.getRandomValues(De.subarray(Ie,Ie+Math.min(se-Ie,Ee)));for(Ie=0;Ie<se;Ie++)Me[Ie]=De[Ie];Jt(De)})}else typeof commonjsRequire$1!="undefined"&&(ge=require$$1$5,ge&&ge.randomBytes&&e.setPRNG(function(Me,se){var Ie,De=ge.randomBytes(se);for(Ie=0;Ie<se;Ie++)Me[Ie]=De[Ie];Jt(De)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(naclFast);var serialize$2={},lib$d={},bn$1={exports:{}};(function(t){(function(e,b){function w(Y,R){if(!Y)throw new Error(R||"Assertion failed")}function $(Y,R){Y.super_=R;var B=function(){};B.prototype=R.prototype,Y.prototype=new B,Y.prototype.constructor=Y}function T(Y,R,B){if(T.isBN(Y))return Y;this.negative=0,this.words=null,this.length=0,this.red=null,Y!==null&&((R==="le"||R==="be")&&(B=R,R=10),this._init(Y||0,R||10,B||"be"))}typeof e=="object"?e.exports=T:b.BN=T,T.BN=T,T.wordSize=26;var N;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?N=window.Buffer:N=require("buffer").Buffer}catch{}T.isBN=function(R){return R instanceof T?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===T.wordSize&&Array.isArray(R.words)},T.max=function(R,B){return R.cmp(B)>0?R:B},T.min=function(R,B){return R.cmp(B)<0?R:B},T.prototype._init=function(R,B,V){if(typeof R=="number")return this._initNumber(R,B,V);if(typeof R=="object")return this._initArray(R,B,V);B==="hex"&&(B=16),w(B===(B|0)&&B>=2&&B<=36),R=R.toString().replace(/\s+/g,"");var Q=0;R[0]==="-"&&(Q++,this.negative=1),Q<R.length&&(B===16?this._parseHex(R,Q,V):(this._parseBase(R,B,Q),V==="le"&&this._initArray(this.toArray(),B,V)))},T.prototype._initNumber=function(R,B,V){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(w(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),V==="le"&&this._initArray(this.toArray(),B,V)},T.prototype._initArray=function(R,B,V){if(w(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var H,j,L=0;if(V==="be")for(Q=R.length-1,H=0;Q>=0;Q-=3)j=R[Q]|R[Q-1]<<8|R[Q-2]<<16,this.words[H]|=j<<L&67108863,this.words[H+1]=j>>>26-L&67108863,L+=24,L>=26&&(L-=26,H++);else if(V==="le")for(Q=0,H=0;Q<R.length;Q+=3)j=R[Q]|R[Q+1]<<8|R[Q+2]<<16,this.words[H]|=j<<L&67108863,this.words[H+1]=j>>>26-L&67108863,L+=24,L>=26&&(L-=26,H++);return this._strip()};function C(Y,R){var B=Y.charCodeAt(R);if(B>=48&&B<=57)return B-48;if(B>=65&&B<=70)return B-55;if(B>=97&&B<=102)return B-87;w(!1,"Invalid character in "+Y)}function F(Y,R,B){var V=C(Y,B);return B-1>=R&&(V|=C(Y,B-1)<<4),V}T.prototype._parseHex=function(R,B,V){this.length=Math.ceil((R.length-B)/6),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var H=0,j=0,L;if(V==="be")for(Q=R.length-1;Q>=B;Q-=2)L=F(R,B,Q)<<H,this.words[j]|=L&67108863,H>=18?(H-=18,j+=1,this.words[j]|=L>>>26):H+=8;else{var q=R.length-B;for(Q=q%2==0?B+1:B;Q<R.length;Q+=2)L=F(R,B,Q)<<H,this.words[j]|=L&67108863,H>=18?(H-=18,j+=1,this.words[j]|=L>>>26):H+=8}this._strip()};function G(Y,R,B,V){for(var Q=0,H=0,j=Math.min(Y.length,B),L=R;L<j;L++){var q=Y.charCodeAt(L)-48;Q*=V,q>=49?H=q-49+10:q>=17?H=q-17+10:H=q,w(q>=0&&H<V,"Invalid character"),Q+=H}return Q}T.prototype._parseBase=function(R,B,V){this.words=[0],this.length=1;for(var Q=0,H=1;H<=67108863;H*=B)Q++;Q--,H=H/B|0;for(var j=R.length-V,L=j%Q,q=Math.min(j,j-L)+V,U=0,oe=V;oe<q;oe+=Q)U=G(R,oe,oe+Q,B),this.imuln(H),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U);if(L!==0){var ve=1;for(U=G(R,oe,R.length,B),oe=0;oe<L;oe++)ve*=B;this.imuln(ve),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U)}this._strip()},T.prototype.copy=function(R){R.words=new Array(this.length);for(var B=0;B<this.length;B++)R.words[B]=this.words[B];R.length=this.length,R.negative=this.negative,R.red=this.red};function J(Y,R){Y.words=R.words,Y.length=R.length,Y.negative=R.negative,Y.red=R.red}if(T.prototype._move=function(R){J(R,this)},T.prototype.clone=function(){var R=new T(null);return this.copy(R),R},T.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},T.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol!="undefined"&&typeof Symbol.for=="function")try{T.prototype[Symbol.for("nodejs.util.inspect.custom")]=Z}catch{T.prototype.inspect=Z}else T.prototype.inspect=Z;function Z(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var re=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ie=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ue=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(R,B){R=R||10,B=B|0||1;var V;if(R===16||R==="hex"){V="";for(var Q=0,H=0,j=0;j<this.length;j++){var L=this.words[j],q=((L<<Q|H)&16777215).toString(16);H=L>>>24-Q&16777215,H!==0||j!==this.length-1?V=re[6-q.length]+q+V:V=q+V,Q+=2,Q>=26&&(Q-=26,j--)}for(H!==0&&(V=H.toString(16)+V);V.length%B!=0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}if(R===(R|0)&&R>=2&&R<=36){var U=ie[R],oe=ue[R];V="";var ve=this.clone();for(ve.negative=0;!ve.isZero();){var fe=ve.modrn(oe).toString(R);ve=ve.idivn(oe),ve.isZero()?V=fe+V:V=re[U-fe.length]+fe+V}for(this.isZero()&&(V="0"+V);V.length%B!=0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}w(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&w(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},T.prototype.toJSON=function(){return this.toString(16,2)},N&&(T.prototype.toBuffer=function(R,B){return this.toArrayLike(N,R,B)}),T.prototype.toArray=function(R,B){return this.toArrayLike(Array,R,B)};var ne=function(R,B){return R.allocUnsafe?R.allocUnsafe(B):new R(B)};T.prototype.toArrayLike=function(R,B,V){this._strip();var Q=this.byteLength(),H=V||Math.max(1,Q);w(Q<=H,"byte array longer than desired length"),w(H>0,"Requested array length <= 0");var j=ne(R,H),L=B==="le"?"LE":"BE";return this["_toArrayLike"+L](j,Q),j},T.prototype._toArrayLikeLE=function(R,B){for(var V=0,Q=0,H=0,j=0;H<this.length;H++){var L=this.words[H]<<j|Q;R[V++]=L&255,V<R.length&&(R[V++]=L>>8&255),V<R.length&&(R[V++]=L>>16&255),j===6?(V<R.length&&(R[V++]=L>>24&255),Q=0,j=0):(Q=L>>>24,j+=2)}if(V<R.length)for(R[V++]=Q;V<R.length;)R[V++]=0},T.prototype._toArrayLikeBE=function(R,B){for(var V=R.length-1,Q=0,H=0,j=0;H<this.length;H++){var L=this.words[H]<<j|Q;R[V--]=L&255,V>=0&&(R[V--]=L>>8&255),V>=0&&(R[V--]=L>>16&255),j===6?(V>=0&&(R[V--]=L>>24&255),Q=0,j=0):(Q=L>>>24,j+=2)}if(V>=0)for(R[V--]=Q;V>=0;)R[V--]=0},Math.clz32?T.prototype._countBits=function(R){return 32-Math.clz32(R)}:T.prototype._countBits=function(R){var B=R,V=0;return B>=4096&&(V+=13,B>>>=13),B>=64&&(V+=7,B>>>=7),B>=8&&(V+=4,B>>>=4),B>=2&&(V+=2,B>>>=2),V+B},T.prototype._zeroBits=function(R){if(R===0)return 26;var B=R,V=0;return(B&8191)==0&&(V+=13,B>>>=13),(B&127)==0&&(V+=7,B>>>=7),(B&15)==0&&(V+=4,B>>>=4),(B&3)==0&&(V+=2,B>>>=2),(B&1)==0&&V++,V},T.prototype.bitLength=function(){var R=this.words[this.length-1],B=this._countBits(R);return(this.length-1)*26+B};function ce(Y){for(var R=new Array(Y.bitLength()),B=0;B<R.length;B++){var V=B/26|0,Q=B%26;R[B]=Y.words[V]>>>Q&1}return R}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,B=0;B<this.length;B++){var V=this._zeroBits(this.words[B]);if(R+=V,V!==26)break}return R},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},T.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var B=0;B<R.length;B++)this.words[B]=this.words[B]|R.words[B];return this._strip()},T.prototype.ior=function(R){return w((this.negative|R.negative)==0),this.iuor(R)},T.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},T.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},T.prototype.iuand=function(R){var B;this.length>R.length?B=R:B=this;for(var V=0;V<B.length;V++)this.words[V]=this.words[V]&R.words[V];return this.length=B.length,this._strip()},T.prototype.iand=function(R){return w((this.negative|R.negative)==0),this.iuand(R)},T.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},T.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},T.prototype.iuxor=function(R){var B,V;this.length>R.length?(B=this,V=R):(B=R,V=this);for(var Q=0;Q<V.length;Q++)this.words[Q]=B.words[Q]^V.words[Q];if(this!==B)for(;Q<B.length;Q++)this.words[Q]=B.words[Q];return this.length=B.length,this._strip()},T.prototype.ixor=function(R){return w((this.negative|R.negative)==0),this.iuxor(R)},T.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},T.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},T.prototype.inotn=function(R){w(typeof R=="number"&&R>=0);var B=Math.ceil(R/26)|0,V=R%26;this._expand(B),V>0&&B--;for(var Q=0;Q<B;Q++)this.words[Q]=~this.words[Q]&67108863;return V>0&&(this.words[Q]=~this.words[Q]&67108863>>26-V),this._strip()},T.prototype.notn=function(R){return this.clone().inotn(R)},T.prototype.setn=function(R,B){w(typeof R=="number"&&R>=0);var V=R/26|0,Q=R%26;return this._expand(V+1),B?this.words[V]=this.words[V]|1<<Q:this.words[V]=this.words[V]&~(1<<Q),this._strip()},T.prototype.iadd=function(R){var B;if(this.negative!==0&&R.negative===0)return this.negative=0,B=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,B=this.isub(R),R.negative=1,B._normSign();var V,Q;this.length>R.length?(V=this,Q=R):(V=R,Q=this);for(var H=0,j=0;j<Q.length;j++)B=(V.words[j]|0)+(Q.words[j]|0)+H,this.words[j]=B&67108863,H=B>>>26;for(;H!==0&&j<V.length;j++)B=(V.words[j]|0)+H,this.words[j]=B&67108863,H=B>>>26;if(this.length=V.length,H!==0)this.words[this.length]=H,this.length++;else if(V!==this)for(;j<V.length;j++)this.words[j]=V.words[j];return this},T.prototype.add=function(R){var B;return R.negative!==0&&this.negative===0?(R.negative=0,B=this.sub(R),R.negative^=1,B):R.negative===0&&this.negative!==0?(this.negative=0,B=R.sub(this),this.negative=1,B):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},T.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var B=this.iadd(R);return R.negative=1,B._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var V=this.cmp(R);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Q,H;V>0?(Q=this,H=R):(Q=R,H=this);for(var j=0,L=0;L<H.length;L++)B=(Q.words[L]|0)-(H.words[L]|0)+j,j=B>>26,this.words[L]=B&67108863;for(;j!==0&&L<Q.length;L++)B=(Q.words[L]|0)+j,j=B>>26,this.words[L]=B&67108863;if(j===0&&L<Q.length&&Q!==this)for(;L<Q.length;L++)this.words[L]=Q.words[L];return this.length=Math.max(this.length,L),Q!==this&&(this.negative=1),this._strip()},T.prototype.sub=function(R){return this.clone().isub(R)};function ae(Y,R,B){B.negative=R.negative^Y.negative;var V=Y.length+R.length|0;B.length=V,V=V-1|0;var Q=Y.words[0]|0,H=R.words[0]|0,j=Q*H,L=j&67108863,q=j/67108864|0;B.words[0]=L;for(var U=1;U<V;U++){for(var oe=q>>>26,ve=q&67108863,fe=Math.min(U,R.length-1),Oe=Math.max(0,U-Y.length+1);Oe<=fe;Oe++){var Se=U-Oe|0;Q=Y.words[Se]|0,H=R.words[Oe]|0,j=Q*H+ve,oe+=j/67108864|0,ve=j&67108863}B.words[U]=ve|0,q=oe|0}return q!==0?B.words[U]=q|0:B.length--,B._strip()}var ye=function(R,B,V){var Q=R.words,H=B.words,j=V.words,L=0,q,U,oe,ve=Q[0]|0,fe=ve&8191,Oe=ve>>>13,Se=Q[1]|0,Te=Se&8191,Ae=Se>>>13,le=Q[2]|0,ke=le&8191,je=le>>>13,Ve=Q[3]|0,qe=Ve&8191,Ze=Ve>>>13,Pe=Q[4]|0,de=Pe&8191,me=Pe>>>13,Re=Q[5]|0,Fe=Re&8191,Ue=Re>>>13,ze=Q[6]|0,Qe=ze&8191,Ye=ze>>>13,ht=Q[7]|0,at=ht&8191,Ke=ht>>>13,kt=Q[8]|0,yt=kt&8191,ct=kt>>>13,Bt=Q[9]|0,Et=Bt&8191,et=Bt>>>13,Ft=H[0]|0,At=Ft&8191,Mt=Ft>>>13,Xt=H[1]|0,Dt=Xt&8191,lt=Xt>>>13,Yt=H[2]|0,jt=Yt&8191,Pt=Yt>>>13,Wt=H[3]|0,Ot=Wt&8191,dt=Wt>>>13,zt=H[4]|0,Ct=zt&8191,wt=zt>>>13,Kt=H[5]|0,mt=Kt&8191,pt=Kt>>>13,Jt=H[6]|0,ge=Jt&8191,Ee=Jt>>>13,Me=H[7]|0,se=Me&8191,Ie=Me>>>13,De=H[8]|0,Ge=De&8191,He=De>>>13,rt=H[9]|0,it=rt&8191,tt=rt>>>13;V.negative=R.negative^B.negative,V.length=19,q=Math.imul(fe,At),U=Math.imul(fe,Mt),U=U+Math.imul(Oe,At)|0,oe=Math.imul(Oe,Mt);var Vt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,q=Math.imul(Te,At),U=Math.imul(Te,Mt),U=U+Math.imul(Ae,At)|0,oe=Math.imul(Ae,Mt),q=q+Math.imul(fe,Dt)|0,U=U+Math.imul(fe,lt)|0,U=U+Math.imul(Oe,Dt)|0,oe=oe+Math.imul(Oe,lt)|0;var St=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(St>>>26)|0,St&=67108863,q=Math.imul(ke,At),U=Math.imul(ke,Mt),U=U+Math.imul(je,At)|0,oe=Math.imul(je,Mt),q=q+Math.imul(Te,Dt)|0,U=U+Math.imul(Te,lt)|0,U=U+Math.imul(Ae,Dt)|0,oe=oe+Math.imul(Ae,lt)|0,q=q+Math.imul(fe,jt)|0,U=U+Math.imul(fe,Pt)|0,U=U+Math.imul(Oe,jt)|0,oe=oe+Math.imul(Oe,Pt)|0;var Lt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,q=Math.imul(qe,At),U=Math.imul(qe,Mt),U=U+Math.imul(Ze,At)|0,oe=Math.imul(Ze,Mt),q=q+Math.imul(ke,Dt)|0,U=U+Math.imul(ke,lt)|0,U=U+Math.imul(je,Dt)|0,oe=oe+Math.imul(je,lt)|0,q=q+Math.imul(Te,jt)|0,U=U+Math.imul(Te,Pt)|0,U=U+Math.imul(Ae,jt)|0,oe=oe+Math.imul(Ae,Pt)|0,q=q+Math.imul(fe,Ot)|0,U=U+Math.imul(fe,dt)|0,U=U+Math.imul(Oe,Ot)|0,oe=oe+Math.imul(Oe,dt)|0;var _t=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(_t>>>26)|0,_t&=67108863,q=Math.imul(de,At),U=Math.imul(de,Mt),U=U+Math.imul(me,At)|0,oe=Math.imul(me,Mt),q=q+Math.imul(qe,Dt)|0,U=U+Math.imul(qe,lt)|0,U=U+Math.imul(Ze,Dt)|0,oe=oe+Math.imul(Ze,lt)|0,q=q+Math.imul(ke,jt)|0,U=U+Math.imul(ke,Pt)|0,U=U+Math.imul(je,jt)|0,oe=oe+Math.imul(je,Pt)|0,q=q+Math.imul(Te,Ot)|0,U=U+Math.imul(Te,dt)|0,U=U+Math.imul(Ae,Ot)|0,oe=oe+Math.imul(Ae,dt)|0,q=q+Math.imul(fe,Ct)|0,U=U+Math.imul(fe,wt)|0,U=U+Math.imul(Oe,Ct)|0,oe=oe+Math.imul(Oe,wt)|0;var Ut=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,q=Math.imul(Fe,At),U=Math.imul(Fe,Mt),U=U+Math.imul(Ue,At)|0,oe=Math.imul(Ue,Mt),q=q+Math.imul(de,Dt)|0,U=U+Math.imul(de,lt)|0,U=U+Math.imul(me,Dt)|0,oe=oe+Math.imul(me,lt)|0,q=q+Math.imul(qe,jt)|0,U=U+Math.imul(qe,Pt)|0,U=U+Math.imul(Ze,jt)|0,oe=oe+Math.imul(Ze,Pt)|0,q=q+Math.imul(ke,Ot)|0,U=U+Math.imul(ke,dt)|0,U=U+Math.imul(je,Ot)|0,oe=oe+Math.imul(je,dt)|0,q=q+Math.imul(Te,Ct)|0,U=U+Math.imul(Te,wt)|0,U=U+Math.imul(Ae,Ct)|0,oe=oe+Math.imul(Ae,wt)|0,q=q+Math.imul(fe,mt)|0,U=U+Math.imul(fe,pt)|0,U=U+Math.imul(Oe,mt)|0,oe=oe+Math.imul(Oe,pt)|0;var Ht=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,q=Math.imul(Qe,At),U=Math.imul(Qe,Mt),U=U+Math.imul(Ye,At)|0,oe=Math.imul(Ye,Mt),q=q+Math.imul(Fe,Dt)|0,U=U+Math.imul(Fe,lt)|0,U=U+Math.imul(Ue,Dt)|0,oe=oe+Math.imul(Ue,lt)|0,q=q+Math.imul(de,jt)|0,U=U+Math.imul(de,Pt)|0,U=U+Math.imul(me,jt)|0,oe=oe+Math.imul(me,Pt)|0,q=q+Math.imul(qe,Ot)|0,U=U+Math.imul(qe,dt)|0,U=U+Math.imul(Ze,Ot)|0,oe=oe+Math.imul(Ze,dt)|0,q=q+Math.imul(ke,Ct)|0,U=U+Math.imul(ke,wt)|0,U=U+Math.imul(je,Ct)|0,oe=oe+Math.imul(je,wt)|0,q=q+Math.imul(Te,mt)|0,U=U+Math.imul(Te,pt)|0,U=U+Math.imul(Ae,mt)|0,oe=oe+Math.imul(Ae,pt)|0,q=q+Math.imul(fe,ge)|0,U=U+Math.imul(fe,Ee)|0,U=U+Math.imul(Oe,ge)|0,oe=oe+Math.imul(Oe,Ee)|0;var Be=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Be>>>26)|0,Be&=67108863,q=Math.imul(at,At),U=Math.imul(at,Mt),U=U+Math.imul(Ke,At)|0,oe=Math.imul(Ke,Mt),q=q+Math.imul(Qe,Dt)|0,U=U+Math.imul(Qe,lt)|0,U=U+Math.imul(Ye,Dt)|0,oe=oe+Math.imul(Ye,lt)|0,q=q+Math.imul(Fe,jt)|0,U=U+Math.imul(Fe,Pt)|0,U=U+Math.imul(Ue,jt)|0,oe=oe+Math.imul(Ue,Pt)|0,q=q+Math.imul(de,Ot)|0,U=U+Math.imul(de,dt)|0,U=U+Math.imul(me,Ot)|0,oe=oe+Math.imul(me,dt)|0,q=q+Math.imul(qe,Ct)|0,U=U+Math.imul(qe,wt)|0,U=U+Math.imul(Ze,Ct)|0,oe=oe+Math.imul(Ze,wt)|0,q=q+Math.imul(ke,mt)|0,U=U+Math.imul(ke,pt)|0,U=U+Math.imul(je,mt)|0,oe=oe+Math.imul(je,pt)|0,q=q+Math.imul(Te,ge)|0,U=U+Math.imul(Te,Ee)|0,U=U+Math.imul(Ae,ge)|0,oe=oe+Math.imul(Ae,Ee)|0,q=q+Math.imul(fe,se)|0,U=U+Math.imul(fe,Ie)|0,U=U+Math.imul(Oe,se)|0,oe=oe+Math.imul(Oe,Ie)|0;var gt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(gt>>>26)|0,gt&=67108863,q=Math.imul(yt,At),U=Math.imul(yt,Mt),U=U+Math.imul(ct,At)|0,oe=Math.imul(ct,Mt),q=q+Math.imul(at,Dt)|0,U=U+Math.imul(at,lt)|0,U=U+Math.imul(Ke,Dt)|0,oe=oe+Math.imul(Ke,lt)|0,q=q+Math.imul(Qe,jt)|0,U=U+Math.imul(Qe,Pt)|0,U=U+Math.imul(Ye,jt)|0,oe=oe+Math.imul(Ye,Pt)|0,q=q+Math.imul(Fe,Ot)|0,U=U+Math.imul(Fe,dt)|0,U=U+Math.imul(Ue,Ot)|0,oe=oe+Math.imul(Ue,dt)|0,q=q+Math.imul(de,Ct)|0,U=U+Math.imul(de,wt)|0,U=U+Math.imul(me,Ct)|0,oe=oe+Math.imul(me,wt)|0,q=q+Math.imul(qe,mt)|0,U=U+Math.imul(qe,pt)|0,U=U+Math.imul(Ze,mt)|0,oe=oe+Math.imul(Ze,pt)|0,q=q+Math.imul(ke,ge)|0,U=U+Math.imul(ke,Ee)|0,U=U+Math.imul(je,ge)|0,oe=oe+Math.imul(je,Ee)|0,q=q+Math.imul(Te,se)|0,U=U+Math.imul(Te,Ie)|0,U=U+Math.imul(Ae,se)|0,oe=oe+Math.imul(Ae,Ie)|0,q=q+Math.imul(fe,Ge)|0,U=U+Math.imul(fe,He)|0,U=U+Math.imul(Oe,Ge)|0,oe=oe+Math.imul(Oe,He)|0;var bt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(bt>>>26)|0,bt&=67108863,q=Math.imul(Et,At),U=Math.imul(Et,Mt),U=U+Math.imul(et,At)|0,oe=Math.imul(et,Mt),q=q+Math.imul(yt,Dt)|0,U=U+Math.imul(yt,lt)|0,U=U+Math.imul(ct,Dt)|0,oe=oe+Math.imul(ct,lt)|0,q=q+Math.imul(at,jt)|0,U=U+Math.imul(at,Pt)|0,U=U+Math.imul(Ke,jt)|0,oe=oe+Math.imul(Ke,Pt)|0,q=q+Math.imul(Qe,Ot)|0,U=U+Math.imul(Qe,dt)|0,U=U+Math.imul(Ye,Ot)|0,oe=oe+Math.imul(Ye,dt)|0,q=q+Math.imul(Fe,Ct)|0,U=U+Math.imul(Fe,wt)|0,U=U+Math.imul(Ue,Ct)|0,oe=oe+Math.imul(Ue,wt)|0,q=q+Math.imul(de,mt)|0,U=U+Math.imul(de,pt)|0,U=U+Math.imul(me,mt)|0,oe=oe+Math.imul(me,pt)|0,q=q+Math.imul(qe,ge)|0,U=U+Math.imul(qe,Ee)|0,U=U+Math.imul(Ze,ge)|0,oe=oe+Math.imul(Ze,Ee)|0,q=q+Math.imul(ke,se)|0,U=U+Math.imul(ke,Ie)|0,U=U+Math.imul(je,se)|0,oe=oe+Math.imul(je,Ie)|0,q=q+Math.imul(Te,Ge)|0,U=U+Math.imul(Te,He)|0,U=U+Math.imul(Ae,Ge)|0,oe=oe+Math.imul(Ae,He)|0,q=q+Math.imul(fe,it)|0,U=U+Math.imul(fe,tt)|0,U=U+Math.imul(Oe,it)|0,oe=oe+Math.imul(Oe,tt)|0;var ot=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(ot>>>26)|0,ot&=67108863,q=Math.imul(Et,Dt),U=Math.imul(Et,lt),U=U+Math.imul(et,Dt)|0,oe=Math.imul(et,lt),q=q+Math.imul(yt,jt)|0,U=U+Math.imul(yt,Pt)|0,U=U+Math.imul(ct,jt)|0,oe=oe+Math.imul(ct,Pt)|0,q=q+Math.imul(at,Ot)|0,U=U+Math.imul(at,dt)|0,U=U+Math.imul(Ke,Ot)|0,oe=oe+Math.imul(Ke,dt)|0,q=q+Math.imul(Qe,Ct)|0,U=U+Math.imul(Qe,wt)|0,U=U+Math.imul(Ye,Ct)|0,oe=oe+Math.imul(Ye,wt)|0,q=q+Math.imul(Fe,mt)|0,U=U+Math.imul(Fe,pt)|0,U=U+Math.imul(Ue,mt)|0,oe=oe+Math.imul(Ue,pt)|0,q=q+Math.imul(de,ge)|0,U=U+Math.imul(de,Ee)|0,U=U+Math.imul(me,ge)|0,oe=oe+Math.imul(me,Ee)|0,q=q+Math.imul(qe,se)|0,U=U+Math.imul(qe,Ie)|0,U=U+Math.imul(Ze,se)|0,oe=oe+Math.imul(Ze,Ie)|0,q=q+Math.imul(ke,Ge)|0,U=U+Math.imul(ke,He)|0,U=U+Math.imul(je,Ge)|0,oe=oe+Math.imul(je,He)|0,q=q+Math.imul(Te,it)|0,U=U+Math.imul(Te,tt)|0,U=U+Math.imul(Ae,it)|0,oe=oe+Math.imul(Ae,tt)|0;var Nt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,q=Math.imul(Et,jt),U=Math.imul(Et,Pt),U=U+Math.imul(et,jt)|0,oe=Math.imul(et,Pt),q=q+Math.imul(yt,Ot)|0,U=U+Math.imul(yt,dt)|0,U=U+Math.imul(ct,Ot)|0,oe=oe+Math.imul(ct,dt)|0,q=q+Math.imul(at,Ct)|0,U=U+Math.imul(at,wt)|0,U=U+Math.imul(Ke,Ct)|0,oe=oe+Math.imul(Ke,wt)|0,q=q+Math.imul(Qe,mt)|0,U=U+Math.imul(Qe,pt)|0,U=U+Math.imul(Ye,mt)|0,oe=oe+Math.imul(Ye,pt)|0,q=q+Math.imul(Fe,ge)|0,U=U+Math.imul(Fe,Ee)|0,U=U+Math.imul(Ue,ge)|0,oe=oe+Math.imul(Ue,Ee)|0,q=q+Math.imul(de,se)|0,U=U+Math.imul(de,Ie)|0,U=U+Math.imul(me,se)|0,oe=oe+Math.imul(me,Ie)|0,q=q+Math.imul(qe,Ge)|0,U=U+Math.imul(qe,He)|0,U=U+Math.imul(Ze,Ge)|0,oe=oe+Math.imul(Ze,He)|0,q=q+Math.imul(ke,it)|0,U=U+Math.imul(ke,tt)|0,U=U+Math.imul(je,it)|0,oe=oe+Math.imul(je,tt)|0;var $t=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+($t>>>26)|0,$t&=67108863,q=Math.imul(Et,Ot),U=Math.imul(Et,dt),U=U+Math.imul(et,Ot)|0,oe=Math.imul(et,dt),q=q+Math.imul(yt,Ct)|0,U=U+Math.imul(yt,wt)|0,U=U+Math.imul(ct,Ct)|0,oe=oe+Math.imul(ct,wt)|0,q=q+Math.imul(at,mt)|0,U=U+Math.imul(at,pt)|0,U=U+Math.imul(Ke,mt)|0,oe=oe+Math.imul(Ke,pt)|0,q=q+Math.imul(Qe,ge)|0,U=U+Math.imul(Qe,Ee)|0,U=U+Math.imul(Ye,ge)|0,oe=oe+Math.imul(Ye,Ee)|0,q=q+Math.imul(Fe,se)|0,U=U+Math.imul(Fe,Ie)|0,U=U+Math.imul(Ue,se)|0,oe=oe+Math.imul(Ue,Ie)|0,q=q+Math.imul(de,Ge)|0,U=U+Math.imul(de,He)|0,U=U+Math.imul(me,Ge)|0,oe=oe+Math.imul(me,He)|0,q=q+Math.imul(qe,it)|0,U=U+Math.imul(qe,tt)|0,U=U+Math.imul(Ze,it)|0,oe=oe+Math.imul(Ze,tt)|0;var It=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(It>>>26)|0,It&=67108863,q=Math.imul(Et,Ct),U=Math.imul(Et,wt),U=U+Math.imul(et,Ct)|0,oe=Math.imul(et,wt),q=q+Math.imul(yt,mt)|0,U=U+Math.imul(yt,pt)|0,U=U+Math.imul(ct,mt)|0,oe=oe+Math.imul(ct,pt)|0,q=q+Math.imul(at,ge)|0,U=U+Math.imul(at,Ee)|0,U=U+Math.imul(Ke,ge)|0,oe=oe+Math.imul(Ke,Ee)|0,q=q+Math.imul(Qe,se)|0,U=U+Math.imul(Qe,Ie)|0,U=U+Math.imul(Ye,se)|0,oe=oe+Math.imul(Ye,Ie)|0,q=q+Math.imul(Fe,Ge)|0,U=U+Math.imul(Fe,He)|0,U=U+Math.imul(Ue,Ge)|0,oe=oe+Math.imul(Ue,He)|0,q=q+Math.imul(de,it)|0,U=U+Math.imul(de,tt)|0,U=U+Math.imul(me,it)|0,oe=oe+Math.imul(me,tt)|0;var Rt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,q=Math.imul(Et,mt),U=Math.imul(Et,pt),U=U+Math.imul(et,mt)|0,oe=Math.imul(et,pt),q=q+Math.imul(yt,ge)|0,U=U+Math.imul(yt,Ee)|0,U=U+Math.imul(ct,ge)|0,oe=oe+Math.imul(ct,Ee)|0,q=q+Math.imul(at,se)|0,U=U+Math.imul(at,Ie)|0,U=U+Math.imul(Ke,se)|0,oe=oe+Math.imul(Ke,Ie)|0,q=q+Math.imul(Qe,Ge)|0,U=U+Math.imul(Qe,He)|0,U=U+Math.imul(Ye,Ge)|0,oe=oe+Math.imul(Ye,He)|0,q=q+Math.imul(Fe,it)|0,U=U+Math.imul(Fe,tt)|0,U=U+Math.imul(Ue,it)|0,oe=oe+Math.imul(Ue,tt)|0;var xt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(xt>>>26)|0,xt&=67108863,q=Math.imul(Et,ge),U=Math.imul(Et,Ee),U=U+Math.imul(et,ge)|0,oe=Math.imul(et,Ee),q=q+Math.imul(yt,se)|0,U=U+Math.imul(yt,Ie)|0,U=U+Math.imul(ct,se)|0,oe=oe+Math.imul(ct,Ie)|0,q=q+Math.imul(at,Ge)|0,U=U+Math.imul(at,He)|0,U=U+Math.imul(Ke,Ge)|0,oe=oe+Math.imul(Ke,He)|0,q=q+Math.imul(Qe,it)|0,U=U+Math.imul(Qe,tt)|0,U=U+Math.imul(Ye,it)|0,oe=oe+Math.imul(Ye,tt)|0;var We=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(We>>>26)|0,We&=67108863,q=Math.imul(Et,se),U=Math.imul(Et,Ie),U=U+Math.imul(et,se)|0,oe=Math.imul(et,Ie),q=q+Math.imul(yt,Ge)|0,U=U+Math.imul(yt,He)|0,U=U+Math.imul(ct,Ge)|0,oe=oe+Math.imul(ct,He)|0,q=q+Math.imul(at,it)|0,U=U+Math.imul(at,tt)|0,U=U+Math.imul(Ke,it)|0,oe=oe+Math.imul(Ke,tt)|0;var Je=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Je>>>26)|0,Je&=67108863,q=Math.imul(Et,Ge),U=Math.imul(Et,He),U=U+Math.imul(et,Ge)|0,oe=Math.imul(et,He),q=q+Math.imul(yt,it)|0,U=U+Math.imul(yt,tt)|0,U=U+Math.imul(ct,it)|0,oe=oe+Math.imul(ct,tt)|0;var ft=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(ft>>>26)|0,ft&=67108863,q=Math.imul(Et,it),U=Math.imul(Et,tt),U=U+Math.imul(et,it)|0,oe=Math.imul(et,tt);var nt=(L+q|0)+((U&8191)<<13)|0;return L=(oe+(U>>>13)|0)+(nt>>>26)|0,nt&=67108863,j[0]=Vt,j[1]=St,j[2]=Lt,j[3]=_t,j[4]=Ut,j[5]=Ht,j[6]=Be,j[7]=gt,j[8]=bt,j[9]=ot,j[10]=Nt,j[11]=$t,j[12]=It,j[13]=Rt,j[14]=xt,j[15]=We,j[16]=Je,j[17]=ft,j[18]=nt,L!==0&&(j[19]=L,V.length++),V};Math.imul||(ye=ae);function $e(Y,R,B){B.negative=R.negative^Y.negative,B.length=Y.length+R.length;for(var V=0,Q=0,H=0;H<B.length-1;H++){var j=Q;Q=0;for(var L=V&67108863,q=Math.min(H,R.length-1),U=Math.max(0,H-Y.length+1);U<=q;U++){var oe=H-U,ve=Y.words[oe]|0,fe=R.words[U]|0,Oe=ve*fe,Se=Oe&67108863;j=j+(Oe/67108864|0)|0,Se=Se+L|0,L=Se&67108863,j=j+(Se>>>26)|0,Q+=j>>>26,j&=67108863}B.words[H]=L,V=j,j=Q}return V!==0?B.words[H]=V:B.length--,B._strip()}function _e(Y,R,B){return $e(Y,R,B)}T.prototype.mulTo=function(R,B){var V,Q=this.length+R.length;return this.length===10&&R.length===10?V=ye(this,R,B):Q<63?V=ae(this,R,B):Q<1024?V=$e(this,R,B):V=_e(this,R,B),V},T.prototype.mul=function(R){var B=new T(null);return B.words=new Array(this.length+R.length),this.mulTo(R,B)},T.prototype.mulf=function(R){var B=new T(null);return B.words=new Array(this.length+R.length),_e(this,R,B)},T.prototype.imul=function(R){return this.clone().mulTo(R,this)},T.prototype.imuln=function(R){var B=R<0;B&&(R=-R),w(typeof R=="number"),w(R<67108864);for(var V=0,Q=0;Q<this.length;Q++){var H=(this.words[Q]|0)*R,j=(H&67108863)+(V&67108863);V>>=26,V+=H/67108864|0,V+=j>>>26,this.words[Q]=j&67108863}return V!==0&&(this.words[Q]=V,this.length++),B?this.ineg():this},T.prototype.muln=function(R){return this.clone().imuln(R)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(R){var B=ce(R);if(B.length===0)return new T(1);for(var V=this,Q=0;Q<B.length&&B[Q]===0;Q++,V=V.sqr());if(++Q<B.length)for(var H=V.sqr();Q<B.length;Q++,H=H.sqr())B[Q]!==0&&(V=V.mul(H));return V},T.prototype.iushln=function(R){w(typeof R=="number"&&R>=0);var B=R%26,V=(R-B)/26,Q=67108863>>>26-B<<26-B,H;if(B!==0){var j=0;for(H=0;H<this.length;H++){var L=this.words[H]&Q,q=(this.words[H]|0)-L<<B;this.words[H]=q|j,j=L>>>26-B}j&&(this.words[H]=j,this.length++)}if(V!==0){for(H=this.length-1;H>=0;H--)this.words[H+V]=this.words[H];for(H=0;H<V;H++)this.words[H]=0;this.length+=V}return this._strip()},T.prototype.ishln=function(R){return w(this.negative===0),this.iushln(R)},T.prototype.iushrn=function(R,B,V){w(typeof R=="number"&&R>=0);var Q;B?Q=(B-B%26)/26:Q=0;var H=R%26,j=Math.min((R-H)/26,this.length),L=67108863^67108863>>>H<<H,q=V;if(Q-=j,Q=Math.max(0,Q),q){for(var U=0;U<j;U++)q.words[U]=this.words[U];q.length=j}if(j!==0)if(this.length>j)for(this.length-=j,U=0;U<this.length;U++)this.words[U]=this.words[U+j];else this.words[0]=0,this.length=1;var oe=0;for(U=this.length-1;U>=0&&(oe!==0||U>=Q);U--){var ve=this.words[U]|0;this.words[U]=oe<<26-H|ve>>>H,oe=ve&L}return q&&oe!==0&&(q.words[q.length++]=oe),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},T.prototype.ishrn=function(R,B,V){return w(this.negative===0),this.iushrn(R,B,V)},T.prototype.shln=function(R){return this.clone().ishln(R)},T.prototype.ushln=function(R){return this.clone().iushln(R)},T.prototype.shrn=function(R){return this.clone().ishrn(R)},T.prototype.ushrn=function(R){return this.clone().iushrn(R)},T.prototype.testn=function(R){w(typeof R=="number"&&R>=0);var B=R%26,V=(R-B)/26,Q=1<<B;if(this.length<=V)return!1;var H=this.words[V];return!!(H&Q)},T.prototype.imaskn=function(R){w(typeof R=="number"&&R>=0);var B=R%26,V=(R-B)/26;if(w(this.negative===0,"imaskn works only with positive numbers"),this.length<=V)return this;if(B!==0&&V++,this.length=Math.min(V,this.length),B!==0){var Q=67108863^67108863>>>B<<B;this.words[this.length-1]&=Q}return this._strip()},T.prototype.maskn=function(R){return this.clone().imaskn(R)},T.prototype.iaddn=function(R){return w(typeof R=="number"),w(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<=R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},T.prototype._iaddn=function(R){this.words[0]+=R;for(var B=0;B<this.length&&this.words[B]>=67108864;B++)this.words[B]-=67108864,B===this.length-1?this.words[B+1]=1:this.words[B+1]++;return this.length=Math.max(this.length,B+1),this},T.prototype.isubn=function(R){if(w(typeof R=="number"),w(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var B=0;B<this.length&&this.words[B]<0;B++)this.words[B]+=67108864,this.words[B+1]-=1;return this._strip()},T.prototype.addn=function(R){return this.clone().iaddn(R)},T.prototype.subn=function(R){return this.clone().isubn(R)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(R,B,V){var Q=R.length+V,H;this._expand(Q);var j,L=0;for(H=0;H<R.length;H++){j=(this.words[H+V]|0)+L;var q=(R.words[H]|0)*B;j-=q&67108863,L=(j>>26)-(q/67108864|0),this.words[H+V]=j&67108863}for(;H<this.length-V;H++)j=(this.words[H+V]|0)+L,L=j>>26,this.words[H+V]=j&67108863;if(L===0)return this._strip();for(w(L===-1),L=0,H=0;H<this.length;H++)j=-(this.words[H]|0)+L,L=j>>26,this.words[H]=j&67108863;return this.negative=1,this._strip()},T.prototype._wordDiv=function(R,B){var V=this.length-R.length,Q=this.clone(),H=R,j=H.words[H.length-1]|0,L=this._countBits(j);V=26-L,V!==0&&(H=H.ushln(V),Q.iushln(V),j=H.words[H.length-1]|0);var q=Q.length-H.length,U;if(B!=="mod"){U=new T(null),U.length=q+1,U.words=new Array(U.length);for(var oe=0;oe<U.length;oe++)U.words[oe]=0}var ve=Q.clone()._ishlnsubmul(H,1,q);ve.negative===0&&(Q=ve,U&&(U.words[q]=1));for(var fe=q-1;fe>=0;fe--){var Oe=(Q.words[H.length+fe]|0)*67108864+(Q.words[H.length+fe-1]|0);for(Oe=Math.min(Oe/j|0,67108863),Q._ishlnsubmul(H,Oe,fe);Q.negative!==0;)Oe--,Q.negative=0,Q._ishlnsubmul(H,1,fe),Q.isZero()||(Q.negative^=1);U&&(U.words[fe]=Oe)}return U&&U._strip(),Q._strip(),B!=="div"&&V!==0&&Q.iushrn(V),{div:U||null,mod:Q}},T.prototype.divmod=function(R,B,V){if(w(!R.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var Q,H,j;return this.negative!==0&&R.negative===0?(j=this.neg().divmod(R,B),B!=="mod"&&(Q=j.div.neg()),B!=="div"&&(H=j.mod.neg(),V&&H.negative!==0&&H.iadd(R)),{div:Q,mod:H}):this.negative===0&&R.negative!==0?(j=this.divmod(R.neg(),B),B!=="mod"&&(Q=j.div.neg()),{div:Q,mod:j.mod}):(this.negative&R.negative)!=0?(j=this.neg().divmod(R.neg(),B),B!=="div"&&(H=j.mod.neg(),V&&H.negative!==0&&H.isub(R)),{div:j.div,mod:H}):R.length>this.length||this.cmp(R)<0?{div:new T(0),mod:this}:R.length===1?B==="div"?{div:this.divn(R.words[0]),mod:null}:B==="mod"?{div:null,mod:new T(this.modrn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new T(this.modrn(R.words[0]))}:this._wordDiv(R,B)},T.prototype.div=function(R){return this.divmod(R,"div",!1).div},T.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},T.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},T.prototype.divRound=function(R){var B=this.divmod(R);if(B.mod.isZero())return B.div;var V=B.div.negative!==0?B.mod.isub(R):B.mod,Q=R.ushrn(1),H=R.andln(1),j=V.cmp(Q);return j<0||H===1&&j===0?B.div:B.div.negative!==0?B.div.isubn(1):B.div.iaddn(1)},T.prototype.modrn=function(R){var B=R<0;B&&(R=-R),w(R<=67108863);for(var V=(1<<26)%R,Q=0,H=this.length-1;H>=0;H--)Q=(V*Q+(this.words[H]|0))%R;return B?-Q:Q},T.prototype.modn=function(R){return this.modrn(R)},T.prototype.idivn=function(R){var B=R<0;B&&(R=-R),w(R<=67108863);for(var V=0,Q=this.length-1;Q>=0;Q--){var H=(this.words[Q]|0)+V*67108864;this.words[Q]=H/R|0,V=H%R}return this._strip(),B?this.ineg():this},T.prototype.divn=function(R){return this.clone().idivn(R)},T.prototype.egcd=function(R){w(R.negative===0),w(!R.isZero());var B=this,V=R.clone();B.negative!==0?B=B.umod(R):B=B.clone();for(var Q=new T(1),H=new T(0),j=new T(0),L=new T(1),q=0;B.isEven()&&V.isEven();)B.iushrn(1),V.iushrn(1),++q;for(var U=V.clone(),oe=B.clone();!B.isZero();){for(var ve=0,fe=1;(B.words[0]&fe)==0&&ve<26;++ve,fe<<=1);if(ve>0)for(B.iushrn(ve);ve-- >0;)(Q.isOdd()||H.isOdd())&&(Q.iadd(U),H.isub(oe)),Q.iushrn(1),H.iushrn(1);for(var Oe=0,Se=1;(V.words[0]&Se)==0&&Oe<26;++Oe,Se<<=1);if(Oe>0)for(V.iushrn(Oe);Oe-- >0;)(j.isOdd()||L.isOdd())&&(j.iadd(U),L.isub(oe)),j.iushrn(1),L.iushrn(1);B.cmp(V)>=0?(B.isub(V),Q.isub(j),H.isub(L)):(V.isub(B),j.isub(Q),L.isub(H))}return{a:j,b:L,gcd:V.iushln(q)}},T.prototype._invmp=function(R){w(R.negative===0),w(!R.isZero());var B=this,V=R.clone();B.negative!==0?B=B.umod(R):B=B.clone();for(var Q=new T(1),H=new T(0),j=V.clone();B.cmpn(1)>0&&V.cmpn(1)>0;){for(var L=0,q=1;(B.words[0]&q)==0&&L<26;++L,q<<=1);if(L>0)for(B.iushrn(L);L-- >0;)Q.isOdd()&&Q.iadd(j),Q.iushrn(1);for(var U=0,oe=1;(V.words[0]&oe)==0&&U<26;++U,oe<<=1);if(U>0)for(V.iushrn(U);U-- >0;)H.isOdd()&&H.iadd(j),H.iushrn(1);B.cmp(V)>=0?(B.isub(V),Q.isub(H)):(V.isub(B),H.isub(Q))}var ve;return B.cmpn(1)===0?ve=Q:ve=H,ve.cmpn(0)<0&&ve.iadd(R),ve},T.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var B=this.clone(),V=R.clone();B.negative=0,V.negative=0;for(var Q=0;B.isEven()&&V.isEven();Q++)B.iushrn(1),V.iushrn(1);do{for(;B.isEven();)B.iushrn(1);for(;V.isEven();)V.iushrn(1);var H=B.cmp(V);if(H<0){var j=B;B=V,V=j}else if(H===0||V.cmpn(1)===0)break;B.isub(V)}while(!0);return V.iushln(Q)},T.prototype.invm=function(R){return this.egcd(R).a.umod(R)},T.prototype.isEven=function(){return(this.words[0]&1)==0},T.prototype.isOdd=function(){return(this.words[0]&1)==1},T.prototype.andln=function(R){return this.words[0]&R},T.prototype.bincn=function(R){w(typeof R=="number");var B=R%26,V=(R-B)/26,Q=1<<B;if(this.length<=V)return this._expand(V+1),this.words[V]|=Q,this;for(var H=Q,j=V;H!==0&&j<this.length;j++){var L=this.words[j]|0;L+=H,H=L>>>26,L&=67108863,this.words[j]=L}return H!==0&&(this.words[j]=H,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(R){var B=R<0;if(this.negative!==0&&!B)return-1;if(this.negative===0&&B)return 1;this._strip();var V;if(this.length>1)V=1;else{B&&(R=-R),w(R<=67108863,"Number is too big");var Q=this.words[0]|0;V=Q===R?0:Q<R?-1:1}return this.negative!==0?-V|0:V},T.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var B=this.ucmp(R);return this.negative!==0?-B|0:B},T.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var B=0,V=this.length-1;V>=0;V--){var Q=this.words[V]|0,H=R.words[V]|0;if(Q!==H){Q<H?B=-1:Q>H&&(B=1);break}}return B},T.prototype.gtn=function(R){return this.cmpn(R)===1},T.prototype.gt=function(R){return this.cmp(R)===1},T.prototype.gten=function(R){return this.cmpn(R)>=0},T.prototype.gte=function(R){return this.cmp(R)>=0},T.prototype.ltn=function(R){return this.cmpn(R)===-1},T.prototype.lt=function(R){return this.cmp(R)===-1},T.prototype.lten=function(R){return this.cmpn(R)<=0},T.prototype.lte=function(R){return this.cmp(R)<=0},T.prototype.eqn=function(R){return this.cmpn(R)===0},T.prototype.eq=function(R){return this.cmp(R)===0},T.red=function(R){return new pe(R)},T.prototype.toRed=function(R){return w(!this.red,"Already a number in reduction context"),w(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},T.prototype.fromRed=function(){return w(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(R){return this.red=R,this},T.prototype.forceRed=function(R){return w(!this.red,"Already a number in reduction context"),this._forceRed(R)},T.prototype.redAdd=function(R){return w(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},T.prototype.redIAdd=function(R){return w(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},T.prototype.redSub=function(R){return w(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},T.prototype.redISub=function(R){return w(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},T.prototype.redShl=function(R){return w(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},T.prototype.redMul=function(R){return w(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},T.prototype.redIMul=function(R){return w(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},T.prototype.redSqr=function(){return w(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return w(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return w(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return w(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return w(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(R){return w(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var be={k256:null,p224:null,p192:null,p25519:null};function xe(Y,R){this.name=Y,this.p=new T(R,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}xe.prototype._tmp=function(){var R=new T(null);return R.words=new Array(Math.ceil(this.n/13)),R},xe.prototype.ireduce=function(R){var B=R,V;do this.split(B,this.tmp),B=this.imulK(B),B=B.iadd(this.tmp),V=B.bitLength();while(V>this.n);var Q=V<this.n?-1:B.ucmp(this.p);return Q===0?(B.words[0]=0,B.length=1):Q>0?B.isub(this.p):B.strip!==void 0?B.strip():B._strip(),B},xe.prototype.split=function(R,B){R.iushrn(this.n,0,B)},xe.prototype.imulK=function(R){return R.imul(this.k)};function ee(){xe.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(ee,xe),ee.prototype.split=function(R,B){for(var V=4194303,Q=Math.min(R.length,9),H=0;H<Q;H++)B.words[H]=R.words[H];if(B.length=Q,R.length<=9){R.words[0]=0,R.length=1;return}var j=R.words[9];for(B.words[B.length++]=j&V,H=10;H<R.length;H++){var L=R.words[H]|0;R.words[H-10]=(L&V)<<4|j>>>22,j=L}j>>>=22,R.words[H-10]=j,j===0&&R.length>10?R.length-=10:R.length-=9},ee.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var B=0,V=0;V<R.length;V++){var Q=R.words[V]|0;B+=Q*977,R.words[V]=B&67108863,B=Q*64+(B/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R};function he(){xe.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(he,xe);function we(){xe.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(we,xe);function Ne(){xe.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(Ne,xe),Ne.prototype.imulK=function(R){for(var B=0,V=0;V<R.length;V++){var Q=(R.words[V]|0)*19+B,H=Q&67108863;Q>>>=26,R.words[V]=H,B=Q}return B!==0&&(R.words[R.length++]=B),R},T._prime=function(R){if(be[R])return be[R];var B;if(R==="k256")B=new ee;else if(R==="p224")B=new he;else if(R==="p192")B=new we;else if(R==="p25519")B=new Ne;else throw new Error("Unknown prime "+R);return be[R]=B,B};function pe(Y){if(typeof Y=="string"){var R=T._prime(Y);this.m=R.p,this.prime=R}else w(Y.gtn(1),"modulus must be greater than 1"),this.m=Y,this.prime=null}pe.prototype._verify1=function(R){w(R.negative===0,"red works only with positives"),w(R.red,"red works only with red numbers")},pe.prototype._verify2=function(R,B){w((R.negative|B.negative)==0,"red works only with positives"),w(R.red&&R.red===B.red,"red works only with red numbers")},pe.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):(J(R,R.umod(this.m)._forceRed(this)),R)},pe.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},pe.prototype.add=function(R,B){this._verify2(R,B);var V=R.add(B);return V.cmp(this.m)>=0&&V.isub(this.m),V._forceRed(this)},pe.prototype.iadd=function(R,B){this._verify2(R,B);var V=R.iadd(B);return V.cmp(this.m)>=0&&V.isub(this.m),V},pe.prototype.sub=function(R,B){this._verify2(R,B);var V=R.sub(B);return V.cmpn(0)<0&&V.iadd(this.m),V._forceRed(this)},pe.prototype.isub=function(R,B){this._verify2(R,B);var V=R.isub(B);return V.cmpn(0)<0&&V.iadd(this.m),V},pe.prototype.shl=function(R,B){return this._verify1(R),this.imod(R.ushln(B))},pe.prototype.imul=function(R,B){return this._verify2(R,B),this.imod(R.imul(B))},pe.prototype.mul=function(R,B){return this._verify2(R,B),this.imod(R.mul(B))},pe.prototype.isqr=function(R){return this.imul(R,R.clone())},pe.prototype.sqr=function(R){return this.mul(R,R)},pe.prototype.sqrt=function(R){if(R.isZero())return R.clone();var B=this.m.andln(3);if(w(B%2==1),B===3){var V=this.m.add(new T(1)).iushrn(2);return this.pow(R,V)}for(var Q=this.m.subn(1),H=0;!Q.isZero()&&Q.andln(1)===0;)H++,Q.iushrn(1);w(!Q.isZero());var j=new T(1).toRed(this),L=j.redNeg(),q=this.m.subn(1).iushrn(1),U=this.m.bitLength();for(U=new T(2*U*U).toRed(this);this.pow(U,q).cmp(L)!==0;)U.redIAdd(L);for(var oe=this.pow(U,Q),ve=this.pow(R,Q.addn(1).iushrn(1)),fe=this.pow(R,Q),Oe=H;fe.cmp(j)!==0;){for(var Se=fe,Te=0;Se.cmp(j)!==0;Te++)Se=Se.redSqr();w(Te<Oe);var Ae=this.pow(oe,new T(1).iushln(Oe-Te-1));ve=ve.redMul(Ae),oe=Ae.redSqr(),fe=fe.redMul(oe),Oe=Te}return ve},pe.prototype.invm=function(R){var B=R._invmp(this.m);return B.negative!==0?(B.negative=0,this.imod(B).redNeg()):this.imod(B)},pe.prototype.pow=function(R,B){if(B.isZero())return new T(1).toRed(this);if(B.cmpn(1)===0)return R.clone();var V=4,Q=new Array(1<<V);Q[0]=new T(1).toRed(this),Q[1]=R;for(var H=2;H<Q.length;H++)Q[H]=this.mul(Q[H-1],R);var j=Q[0],L=0,q=0,U=B.bitLength()%26;for(U===0&&(U=26),H=B.length-1;H>=0;H--){for(var oe=B.words[H],ve=U-1;ve>=0;ve--){var fe=oe>>ve&1;if(j!==Q[0]&&(j=this.sqr(j)),fe===0&&L===0){q=0;continue}L<<=1,L|=fe,q++,!(q!==V&&(H!==0||ve!==0))&&(j=this.mul(j,Q[L]),q=0,L=0)}U=26}return j},pe.prototype.convertTo=function(R){var B=R.umod(this.m);return B===R?B.clone():B},pe.prototype.convertFrom=function(R){var B=R.clone();return B.red=null,B},T.mont=function(R){return new te(R)};function te(Y){pe.call(this,Y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(te,pe),te.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},te.prototype.convertFrom=function(R){var B=this.imod(R.mul(this.rinv));return B.red=null,B},te.prototype.imul=function(R,B){if(R.isZero()||B.isZero())return R.words[0]=0,R.length=1,R;var V=R.imul(B),Q=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=V.isub(Q).iushrn(this.shift),j=H;return H.cmp(this.m)>=0?j=H.isub(this.m):H.cmpn(0)<0&&(j=H.iadd(this.m)),j._forceRed(this)},te.prototype.mul=function(R,B){if(R.isZero()||B.isZero())return new T(0)._forceRed(this);var V=R.mul(B),Q=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=V.isub(Q).iushrn(this.shift),j=H;return H.cmp(this.m)>=0?j=H.isub(this.m):H.cmpn(0)<0&&(j=H.iadd(this.m)),j._forceRed(this)},te.prototype.invm=function(R){var B=this.imod(R._invmp(this.m).mul(this.r2));return B._forceRed(this)}})(t,commonjsGlobal)})(bn$1);var safeBuffer={exports:{}},buffer$2={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$1=[],revLookup=[],Arr=typeof Uint8Array!="undefined"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1)lookup$1[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=t.indexOf("=");b===-1&&(b=e);var w=b===e?0:4-b%4;return[b,w]}function byteLength(t){var e=getLens(t),b=e[0],w=e[1];return(b+w)*3/4-w}function _byteLength(t,e,b){return(e+b)*3/4-b}function toByteArray(t){var e,b=getLens(t),w=b[0],$=b[1],T=new Arr(_byteLength(t,w,$)),N=0,C=$>0?w-4:w,F;for(F=0;F<C;F+=4)e=revLookup[t.charCodeAt(F)]<<18|revLookup[t.charCodeAt(F+1)]<<12|revLookup[t.charCodeAt(F+2)]<<6|revLookup[t.charCodeAt(F+3)],T[N++]=e>>16&255,T[N++]=e>>8&255,T[N++]=e&255;return $===2&&(e=revLookup[t.charCodeAt(F)]<<2|revLookup[t.charCodeAt(F+1)]>>4,T[N++]=e&255),$===1&&(e=revLookup[t.charCodeAt(F)]<<10|revLookup[t.charCodeAt(F+1)]<<4|revLookup[t.charCodeAt(F+2)]>>2,T[N++]=e>>8&255,T[N++]=e&255),T}function tripletToBase64(t){return lookup$1[t>>18&63]+lookup$1[t>>12&63]+lookup$1[t>>6&63]+lookup$1[t&63]}function encodeChunk(t,e,b){for(var w,$=[],T=e;T<b;T+=3)w=(t[T]<<16&16711680)+(t[T+1]<<8&65280)+(t[T+2]&255),$.push(tripletToBase64(w));return $.join("")}function fromByteArray(t){for(var e,b=t.length,w=b%3,$=[],T=16383,N=0,C=b-w;N<C;N+=T)$.push(encodeChunk(t,N,N+T>C?C:N+T));return w===1?(e=t[b-1],$.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):w===2&&(e=(t[b-2]<<8)+t[b-1],$.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),$.join("")}var ieee754$1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$1.read=function(t,e,b,w,$){var T,N,C=$*8-w-1,F=(1<<C)-1,G=F>>1,J=-7,Z=b?$-1:0,re=b?-1:1,ie=t[e+Z];for(Z+=re,T=ie&(1<<-J)-1,ie>>=-J,J+=C;J>0;T=T*256+t[e+Z],Z+=re,J-=8);for(N=T&(1<<-J)-1,T>>=-J,J+=w;J>0;N=N*256+t[e+Z],Z+=re,J-=8);if(T===0)T=1-G;else{if(T===F)return N?NaN:(ie?-1:1)*(1/0);N=N+Math.pow(2,w),T=T-G}return(ie?-1:1)*N*Math.pow(2,T-w)};ieee754$1.write=function(t,e,b,w,$,T){var N,C,F,G=T*8-$-1,J=(1<<G)-1,Z=J>>1,re=$===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=w?0:T-1,ue=w?1:-1,ne=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(C=isNaN(e)?1:0,N=J):(N=Math.floor(Math.log(e)/Math.LN2),e*(F=Math.pow(2,-N))<1&&(N--,F*=2),N+Z>=1?e+=re/F:e+=re*Math.pow(2,1-Z),e*F>=2&&(N++,F/=2),N+Z>=J?(C=0,N=J):N+Z>=1?(C=(e*F-1)*Math.pow(2,$),N=N+Z):(C=e*Math.pow(2,Z-1)*Math.pow(2,$),N=0));$>=8;t[b+ie]=C&255,ie+=ue,C/=256,$-=8);for(N=N<<$|C,G+=$;G>0;t[b+ie]=N&255,ie+=ue,N/=256,G-=8);t[b+ie-ue]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=base64Js,b=ieee754$1,w=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=C,t.SlowBuffer=ye,t.INSPECT_MAX_BYTES=50;var $=2147483647;t.kMaxLength=$,C.TYPED_ARRAY_SUPPORT=T(),!C.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function T(){try{var Pe=new Uint8Array(1),de={foo:function(){return 42}};return Object.setPrototypeOf(de,Uint8Array.prototype),Object.setPrototypeOf(Pe,de),Pe.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(!!C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(!!C.isBuffer(this))return this.byteOffset}});function N(Pe){if(Pe>$)throw new RangeError('The value "'+Pe+'" is invalid for option "size"');var de=new Uint8Array(Pe);return Object.setPrototypeOf(de,C.prototype),de}function C(Pe,de,me){if(typeof Pe=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Z(Pe)}return F(Pe,de,me)}C.poolSize=8192;function F(Pe,de,me){if(typeof Pe=="string")return re(Pe,de);if(ArrayBuffer.isView(Pe))return ue(Pe);if(Pe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Pe);if(Ve(Pe,ArrayBuffer)||Pe&&Ve(Pe.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Ve(Pe,SharedArrayBuffer)||Pe&&Ve(Pe.buffer,SharedArrayBuffer)))return ne(Pe,de,me);if(typeof Pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Re=Pe.valueOf&&Pe.valueOf();if(Re!=null&&Re!==Pe)return C.from(Re,de,me);var Fe=ce(Pe);if(Fe)return Fe;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof Pe[Symbol.toPrimitive]=="function")return C.from(Pe[Symbol.toPrimitive]("string"),de,me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Pe)}C.from=function(Pe,de,me){return F(Pe,de,me)},Object.setPrototypeOf(C.prototype,Uint8Array.prototype),Object.setPrototypeOf(C,Uint8Array);function G(Pe){if(typeof Pe!="number")throw new TypeError('"size" argument must be of type number');if(Pe<0)throw new RangeError('The value "'+Pe+'" is invalid for option "size"')}function J(Pe,de,me){return G(Pe),Pe<=0?N(Pe):de!==void 0?typeof me=="string"?N(Pe).fill(de,me):N(Pe).fill(de):N(Pe)}C.alloc=function(Pe,de,me){return J(Pe,de,me)};function Z(Pe){return G(Pe),N(Pe<0?0:ae(Pe)|0)}C.allocUnsafe=function(Pe){return Z(Pe)},C.allocUnsafeSlow=function(Pe){return Z(Pe)};function re(Pe,de){if((typeof de!="string"||de==="")&&(de="utf8"),!C.isEncoding(de))throw new TypeError("Unknown encoding: "+de);var me=$e(Pe,de)|0,Re=N(me),Fe=Re.write(Pe,de);return Fe!==me&&(Re=Re.slice(0,Fe)),Re}function ie(Pe){for(var de=Pe.length<0?0:ae(Pe.length)|0,me=N(de),Re=0;Re<de;Re+=1)me[Re]=Pe[Re]&255;return me}function ue(Pe){if(Ve(Pe,Uint8Array)){var de=new Uint8Array(Pe);return ne(de.buffer,de.byteOffset,de.byteLength)}return ie(Pe)}function ne(Pe,de,me){if(de<0||Pe.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(Pe.byteLength<de+(me||0))throw new RangeError('"length" is outside of buffer bounds');var Re;return de===void 0&&me===void 0?Re=new Uint8Array(Pe):me===void 0?Re=new Uint8Array(Pe,de):Re=new Uint8Array(Pe,de,me),Object.setPrototypeOf(Re,C.prototype),Re}function ce(Pe){if(C.isBuffer(Pe)){var de=ae(Pe.length)|0,me=N(de);return me.length===0||Pe.copy(me,0,0,de),me}if(Pe.length!==void 0)return typeof Pe.length!="number"||qe(Pe.length)?N(0):ie(Pe);if(Pe.type==="Buffer"&&Array.isArray(Pe.data))return ie(Pe.data)}function ae(Pe){if(Pe>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return Pe|0}function ye(Pe){return+Pe!=Pe&&(Pe=0),C.alloc(+Pe)}C.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==C.prototype},C.compare=function(de,me){if(Ve(de,Uint8Array)&&(de=C.from(de,de.offset,de.byteLength)),Ve(me,Uint8Array)&&(me=C.from(me,me.offset,me.byteLength)),!C.isBuffer(de)||!C.isBuffer(me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===me)return 0;for(var Re=de.length,Fe=me.length,Ue=0,ze=Math.min(Re,Fe);Ue<ze;++Ue)if(de[Ue]!==me[Ue]){Re=de[Ue],Fe=me[Ue];break}return Re<Fe?-1:Fe<Re?1:0},C.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(de,me){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return C.alloc(0);var Re;if(me===void 0)for(me=0,Re=0;Re<de.length;++Re)me+=de[Re].length;var Fe=C.allocUnsafe(me),Ue=0;for(Re=0;Re<de.length;++Re){var ze=de[Re];if(Ve(ze,Uint8Array))Ue+ze.length>Fe.length?C.from(ze).copy(Fe,Ue):Uint8Array.prototype.set.call(Fe,ze,Ue);else if(C.isBuffer(ze))ze.copy(Fe,Ue);else throw new TypeError('"list" argument must be an Array of Buffers');Ue+=ze.length}return Fe};function $e(Pe,de){if(C.isBuffer(Pe))return Pe.length;if(ArrayBuffer.isView(Pe)||Ve(Pe,ArrayBuffer))return Pe.byteLength;if(typeof Pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Pe);var me=Pe.length,Re=arguments.length>2&&arguments[2]===!0;if(!Re&&me===0)return 0;for(var Fe=!1;;)switch(de){case"ascii":case"latin1":case"binary":return me;case"utf8":case"utf-8":return Te(Pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me*2;case"hex":return me>>>1;case"base64":return ke(Pe).length;default:if(Fe)return Re?-1:Te(Pe).length;de=(""+de).toLowerCase(),Fe=!0}}C.byteLength=$e;function _e(Pe,de,me){var Re=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((me===void 0||me>this.length)&&(me=this.length),me<=0)||(me>>>=0,de>>>=0,me<=de))return"";for(Pe||(Pe="utf8");;)switch(Pe){case"hex":return j(this,de,me);case"utf8":case"utf-8":return R(this,de,me);case"ascii":return Q(this,de,me);case"latin1":case"binary":return H(this,de,me);case"base64":return Y(this,de,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,de,me);default:if(Re)throw new TypeError("Unknown encoding: "+Pe);Pe=(Pe+"").toLowerCase(),Re=!0}}C.prototype._isBuffer=!0;function be(Pe,de,me){var Re=Pe[de];Pe[de]=Pe[me],Pe[me]=Re}C.prototype.swap16=function(){var de=this.length;if(de%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var me=0;me<de;me+=2)be(this,me,me+1);return this},C.prototype.swap32=function(){var de=this.length;if(de%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var me=0;me<de;me+=4)be(this,me,me+3),be(this,me+1,me+2);return this},C.prototype.swap64=function(){var de=this.length;if(de%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var me=0;me<de;me+=8)be(this,me,me+7),be(this,me+1,me+6),be(this,me+2,me+5),be(this,me+3,me+4);return this},C.prototype.toString=function(){var de=this.length;return de===0?"":arguments.length===0?R(this,0,de):_e.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(de){if(!C.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de?!0:C.compare(this,de)===0},C.prototype.inspect=function(){var de="",me=t.INSPECT_MAX_BYTES;return de=this.toString("hex",0,me).replace(/(.{2})/g,"$1 ").trim(),this.length>me&&(de+=" ... "),"<Buffer "+de+">"},w&&(C.prototype[w]=C.prototype.inspect),C.prototype.compare=function(de,me,Re,Fe,Ue){if(Ve(de,Uint8Array)&&(de=C.from(de,de.offset,de.byteLength)),!C.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof de);if(me===void 0&&(me=0),Re===void 0&&(Re=de?de.length:0),Fe===void 0&&(Fe=0),Ue===void 0&&(Ue=this.length),me<0||Re>de.length||Fe<0||Ue>this.length)throw new RangeError("out of range index");if(Fe>=Ue&&me>=Re)return 0;if(Fe>=Ue)return-1;if(me>=Re)return 1;if(me>>>=0,Re>>>=0,Fe>>>=0,Ue>>>=0,this===de)return 0;for(var ze=Ue-Fe,Qe=Re-me,Ye=Math.min(ze,Qe),ht=this.slice(Fe,Ue),at=de.slice(me,Re),Ke=0;Ke<Ye;++Ke)if(ht[Ke]!==at[Ke]){ze=ht[Ke],Qe=at[Ke];break}return ze<Qe?-1:Qe<ze?1:0};function xe(Pe,de,me,Re,Fe){if(Pe.length===0)return-1;if(typeof me=="string"?(Re=me,me=0):me>2147483647?me=2147483647:me<-2147483648&&(me=-2147483648),me=+me,qe(me)&&(me=Fe?0:Pe.length-1),me<0&&(me=Pe.length+me),me>=Pe.length){if(Fe)return-1;me=Pe.length-1}else if(me<0)if(Fe)me=0;else return-1;if(typeof de=="string"&&(de=C.from(de,Re)),C.isBuffer(de))return de.length===0?-1:ee(Pe,de,me,Re,Fe);if(typeof de=="number")return de=de&255,typeof Uint8Array.prototype.indexOf=="function"?Fe?Uint8Array.prototype.indexOf.call(Pe,de,me):Uint8Array.prototype.lastIndexOf.call(Pe,de,me):ee(Pe,[de],me,Re,Fe);throw new TypeError("val must be string, number or Buffer")}function ee(Pe,de,me,Re,Fe){var Ue=1,ze=Pe.length,Qe=de.length;if(Re!==void 0&&(Re=String(Re).toLowerCase(),Re==="ucs2"||Re==="ucs-2"||Re==="utf16le"||Re==="utf-16le")){if(Pe.length<2||de.length<2)return-1;Ue=2,ze/=2,Qe/=2,me/=2}function Ye(yt,ct){return Ue===1?yt[ct]:yt.readUInt16BE(ct*Ue)}var ht;if(Fe){var at=-1;for(ht=me;ht<ze;ht++)if(Ye(Pe,ht)===Ye(de,at===-1?0:ht-at)){if(at===-1&&(at=ht),ht-at+1===Qe)return at*Ue}else at!==-1&&(ht-=ht-at),at=-1}else for(me+Qe>ze&&(me=ze-Qe),ht=me;ht>=0;ht--){for(var Ke=!0,kt=0;kt<Qe;kt++)if(Ye(Pe,ht+kt)!==Ye(de,kt)){Ke=!1;break}if(Ke)return ht}return-1}C.prototype.includes=function(de,me,Re){return this.indexOf(de,me,Re)!==-1},C.prototype.indexOf=function(de,me,Re){return xe(this,de,me,Re,!0)},C.prototype.lastIndexOf=function(de,me,Re){return xe(this,de,me,Re,!1)};function he(Pe,de,me,Re){me=Number(me)||0;var Fe=Pe.length-me;Re?(Re=Number(Re),Re>Fe&&(Re=Fe)):Re=Fe;var Ue=de.length;Re>Ue/2&&(Re=Ue/2);for(var ze=0;ze<Re;++ze){var Qe=parseInt(de.substr(ze*2,2),16);if(qe(Qe))return ze;Pe[me+ze]=Qe}return ze}function we(Pe,de,me,Re){return je(Te(de,Pe.length-me),Pe,me,Re)}function Ne(Pe,de,me,Re){return je(Ae(de),Pe,me,Re)}function pe(Pe,de,me,Re){return je(ke(de),Pe,me,Re)}function te(Pe,de,me,Re){return je(le(de,Pe.length-me),Pe,me,Re)}C.prototype.write=function(de,me,Re,Fe){if(me===void 0)Fe="utf8",Re=this.length,me=0;else if(Re===void 0&&typeof me=="string")Fe=me,Re=this.length,me=0;else if(isFinite(me))me=me>>>0,isFinite(Re)?(Re=Re>>>0,Fe===void 0&&(Fe="utf8")):(Fe=Re,Re=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ue=this.length-me;if((Re===void 0||Re>Ue)&&(Re=Ue),de.length>0&&(Re<0||me<0)||me>this.length)throw new RangeError("Attempt to write outside buffer bounds");Fe||(Fe="utf8");for(var ze=!1;;)switch(Fe){case"hex":return he(this,de,me,Re);case"utf8":case"utf-8":return we(this,de,me,Re);case"ascii":case"latin1":case"binary":return Ne(this,de,me,Re);case"base64":return pe(this,de,me,Re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,de,me,Re);default:if(ze)throw new TypeError("Unknown encoding: "+Fe);Fe=(""+Fe).toLowerCase(),ze=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(Pe,de,me){return de===0&&me===Pe.length?e.fromByteArray(Pe):e.fromByteArray(Pe.slice(de,me))}function R(Pe,de,me){me=Math.min(Pe.length,me);for(var Re=[],Fe=de;Fe<me;){var Ue=Pe[Fe],ze=null,Qe=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Fe+Qe<=me){var Ye,ht,at,Ke;switch(Qe){case 1:Ue<128&&(ze=Ue);break;case 2:Ye=Pe[Fe+1],(Ye&192)==128&&(Ke=(Ue&31)<<6|Ye&63,Ke>127&&(ze=Ke));break;case 3:Ye=Pe[Fe+1],ht=Pe[Fe+2],(Ye&192)==128&&(ht&192)==128&&(Ke=(Ue&15)<<12|(Ye&63)<<6|ht&63,Ke>2047&&(Ke<55296||Ke>57343)&&(ze=Ke));break;case 4:Ye=Pe[Fe+1],ht=Pe[Fe+2],at=Pe[Fe+3],(Ye&192)==128&&(ht&192)==128&&(at&192)==128&&(Ke=(Ue&15)<<18|(Ye&63)<<12|(ht&63)<<6|at&63,Ke>65535&&Ke<1114112&&(ze=Ke))}}ze===null?(ze=65533,Qe=1):ze>65535&&(ze-=65536,Re.push(ze>>>10&1023|55296),ze=56320|ze&1023),Re.push(ze),Fe+=Qe}return V(Re)}var B=4096;function V(Pe){var de=Pe.length;if(de<=B)return String.fromCharCode.apply(String,Pe);for(var me="",Re=0;Re<de;)me+=String.fromCharCode.apply(String,Pe.slice(Re,Re+=B));return me}function Q(Pe,de,me){var Re="";me=Math.min(Pe.length,me);for(var Fe=de;Fe<me;++Fe)Re+=String.fromCharCode(Pe[Fe]&127);return Re}function H(Pe,de,me){var Re="";me=Math.min(Pe.length,me);for(var Fe=de;Fe<me;++Fe)Re+=String.fromCharCode(Pe[Fe]);return Re}function j(Pe,de,me){var Re=Pe.length;(!de||de<0)&&(de=0),(!me||me<0||me>Re)&&(me=Re);for(var Fe="",Ue=de;Ue<me;++Ue)Fe+=Ze[Pe[Ue]];return Fe}function L(Pe,de,me){for(var Re=Pe.slice(de,me),Fe="",Ue=0;Ue<Re.length-1;Ue+=2)Fe+=String.fromCharCode(Re[Ue]+Re[Ue+1]*256);return Fe}C.prototype.slice=function(de,me){var Re=this.length;de=~~de,me=me===void 0?Re:~~me,de<0?(de+=Re,de<0&&(de=0)):de>Re&&(de=Re),me<0?(me+=Re,me<0&&(me=0)):me>Re&&(me=Re),me<de&&(me=de);var Fe=this.subarray(de,me);return Object.setPrototypeOf(Fe,C.prototype),Fe};function q(Pe,de,me){if(Pe%1!=0||Pe<0)throw new RangeError("offset is not uint");if(Pe+de>me)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUintLE=C.prototype.readUIntLE=function(de,me,Re){de=de>>>0,me=me>>>0,Re||q(de,me,this.length);for(var Fe=this[de],Ue=1,ze=0;++ze<me&&(Ue*=256);)Fe+=this[de+ze]*Ue;return Fe},C.prototype.readUintBE=C.prototype.readUIntBE=function(de,me,Re){de=de>>>0,me=me>>>0,Re||q(de,me,this.length);for(var Fe=this[de+--me],Ue=1;me>0&&(Ue*=256);)Fe+=this[de+--me]*Ue;return Fe},C.prototype.readUint8=C.prototype.readUInt8=function(de,me){return de=de>>>0,me||q(de,1,this.length),this[de]},C.prototype.readUint16LE=C.prototype.readUInt16LE=function(de,me){return de=de>>>0,me||q(de,2,this.length),this[de]|this[de+1]<<8},C.prototype.readUint16BE=C.prototype.readUInt16BE=function(de,me){return de=de>>>0,me||q(de,2,this.length),this[de]<<8|this[de+1]},C.prototype.readUint32LE=C.prototype.readUInt32LE=function(de,me){return de=de>>>0,me||q(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+this[de+3]*16777216},C.prototype.readUint32BE=C.prototype.readUInt32BE=function(de,me){return de=de>>>0,me||q(de,4,this.length),this[de]*16777216+(this[de+1]<<16|this[de+2]<<8|this[de+3])},C.prototype.readIntLE=function(de,me,Re){de=de>>>0,me=me>>>0,Re||q(de,me,this.length);for(var Fe=this[de],Ue=1,ze=0;++ze<me&&(Ue*=256);)Fe+=this[de+ze]*Ue;return Ue*=128,Fe>=Ue&&(Fe-=Math.pow(2,8*me)),Fe},C.prototype.readIntBE=function(de,me,Re){de=de>>>0,me=me>>>0,Re||q(de,me,this.length);for(var Fe=me,Ue=1,ze=this[de+--Fe];Fe>0&&(Ue*=256);)ze+=this[de+--Fe]*Ue;return Ue*=128,ze>=Ue&&(ze-=Math.pow(2,8*me)),ze},C.prototype.readInt8=function(de,me){return de=de>>>0,me||q(de,1,this.length),this[de]&128?(255-this[de]+1)*-1:this[de]},C.prototype.readInt16LE=function(de,me){de=de>>>0,me||q(de,2,this.length);var Re=this[de]|this[de+1]<<8;return Re&32768?Re|4294901760:Re},C.prototype.readInt16BE=function(de,me){de=de>>>0,me||q(de,2,this.length);var Re=this[de+1]|this[de]<<8;return Re&32768?Re|4294901760:Re},C.prototype.readInt32LE=function(de,me){return de=de>>>0,me||q(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},C.prototype.readInt32BE=function(de,me){return de=de>>>0,me||q(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},C.prototype.readFloatLE=function(de,me){return de=de>>>0,me||q(de,4,this.length),b.read(this,de,!0,23,4)},C.prototype.readFloatBE=function(de,me){return de=de>>>0,me||q(de,4,this.length),b.read(this,de,!1,23,4)},C.prototype.readDoubleLE=function(de,me){return de=de>>>0,me||q(de,8,this.length),b.read(this,de,!0,52,8)},C.prototype.readDoubleBE=function(de,me){return de=de>>>0,me||q(de,8,this.length),b.read(this,de,!1,52,8)};function U(Pe,de,me,Re,Fe,Ue){if(!C.isBuffer(Pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>Fe||de<Ue)throw new RangeError('"value" argument is out of bounds');if(me+Re>Pe.length)throw new RangeError("Index out of range")}C.prototype.writeUintLE=C.prototype.writeUIntLE=function(de,me,Re,Fe){if(de=+de,me=me>>>0,Re=Re>>>0,!Fe){var Ue=Math.pow(2,8*Re)-1;U(this,de,me,Re,Ue,0)}var ze=1,Qe=0;for(this[me]=de&255;++Qe<Re&&(ze*=256);)this[me+Qe]=de/ze&255;return me+Re},C.prototype.writeUintBE=C.prototype.writeUIntBE=function(de,me,Re,Fe){if(de=+de,me=me>>>0,Re=Re>>>0,!Fe){var Ue=Math.pow(2,8*Re)-1;U(this,de,me,Re,Ue,0)}var ze=Re-1,Qe=1;for(this[me+ze]=de&255;--ze>=0&&(Qe*=256);)this[me+ze]=de/Qe&255;return me+Re},C.prototype.writeUint8=C.prototype.writeUInt8=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,1,255,0),this[me]=de&255,me+1},C.prototype.writeUint16LE=C.prototype.writeUInt16LE=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,2,65535,0),this[me]=de&255,this[me+1]=de>>>8,me+2},C.prototype.writeUint16BE=C.prototype.writeUInt16BE=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,2,65535,0),this[me]=de>>>8,this[me+1]=de&255,me+2},C.prototype.writeUint32LE=C.prototype.writeUInt32LE=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,4,4294967295,0),this[me+3]=de>>>24,this[me+2]=de>>>16,this[me+1]=de>>>8,this[me]=de&255,me+4},C.prototype.writeUint32BE=C.prototype.writeUInt32BE=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,4,4294967295,0),this[me]=de>>>24,this[me+1]=de>>>16,this[me+2]=de>>>8,this[me+3]=de&255,me+4},C.prototype.writeIntLE=function(de,me,Re,Fe){if(de=+de,me=me>>>0,!Fe){var Ue=Math.pow(2,8*Re-1);U(this,de,me,Re,Ue-1,-Ue)}var ze=0,Qe=1,Ye=0;for(this[me]=de&255;++ze<Re&&(Qe*=256);)de<0&&Ye===0&&this[me+ze-1]!==0&&(Ye=1),this[me+ze]=(de/Qe>>0)-Ye&255;return me+Re},C.prototype.writeIntBE=function(de,me,Re,Fe){if(de=+de,me=me>>>0,!Fe){var Ue=Math.pow(2,8*Re-1);U(this,de,me,Re,Ue-1,-Ue)}var ze=Re-1,Qe=1,Ye=0;for(this[me+ze]=de&255;--ze>=0&&(Qe*=256);)de<0&&Ye===0&&this[me+ze+1]!==0&&(Ye=1),this[me+ze]=(de/Qe>>0)-Ye&255;return me+Re},C.prototype.writeInt8=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,1,127,-128),de<0&&(de=255+de+1),this[me]=de&255,me+1},C.prototype.writeInt16LE=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,2,32767,-32768),this[me]=de&255,this[me+1]=de>>>8,me+2},C.prototype.writeInt16BE=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,2,32767,-32768),this[me]=de>>>8,this[me+1]=de&255,me+2},C.prototype.writeInt32LE=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,4,2147483647,-2147483648),this[me]=de&255,this[me+1]=de>>>8,this[me+2]=de>>>16,this[me+3]=de>>>24,me+4},C.prototype.writeInt32BE=function(de,me,Re){return de=+de,me=me>>>0,Re||U(this,de,me,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[me]=de>>>24,this[me+1]=de>>>16,this[me+2]=de>>>8,this[me+3]=de&255,me+4};function oe(Pe,de,me,Re,Fe,Ue){if(me+Re>Pe.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("Index out of range")}function ve(Pe,de,me,Re,Fe){return de=+de,me=me>>>0,Fe||oe(Pe,de,me,4),b.write(Pe,de,me,Re,23,4),me+4}C.prototype.writeFloatLE=function(de,me,Re){return ve(this,de,me,!0,Re)},C.prototype.writeFloatBE=function(de,me,Re){return ve(this,de,me,!1,Re)};function fe(Pe,de,me,Re,Fe){return de=+de,me=me>>>0,Fe||oe(Pe,de,me,8),b.write(Pe,de,me,Re,52,8),me+8}C.prototype.writeDoubleLE=function(de,me,Re){return fe(this,de,me,!0,Re)},C.prototype.writeDoubleBE=function(de,me,Re){return fe(this,de,me,!1,Re)},C.prototype.copy=function(de,me,Re,Fe){if(!C.isBuffer(de))throw new TypeError("argument should be a Buffer");if(Re||(Re=0),!Fe&&Fe!==0&&(Fe=this.length),me>=de.length&&(me=de.length),me||(me=0),Fe>0&&Fe<Re&&(Fe=Re),Fe===Re||de.length===0||this.length===0)return 0;if(me<0)throw new RangeError("targetStart out of bounds");if(Re<0||Re>=this.length)throw new RangeError("Index out of range");if(Fe<0)throw new RangeError("sourceEnd out of bounds");Fe>this.length&&(Fe=this.length),de.length-me<Fe-Re&&(Fe=de.length-me+Re);var Ue=Fe-Re;return this===de&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(me,Re,Fe):Uint8Array.prototype.set.call(de,this.subarray(Re,Fe),me),Ue},C.prototype.fill=function(de,me,Re,Fe){if(typeof de=="string"){if(typeof me=="string"?(Fe=me,me=0,Re=this.length):typeof Re=="string"&&(Fe=Re,Re=this.length),Fe!==void 0&&typeof Fe!="string")throw new TypeError("encoding must be a string");if(typeof Fe=="string"&&!C.isEncoding(Fe))throw new TypeError("Unknown encoding: "+Fe);if(de.length===1){var Ue=de.charCodeAt(0);(Fe==="utf8"&&Ue<128||Fe==="latin1")&&(de=Ue)}}else typeof de=="number"?de=de&255:typeof de=="boolean"&&(de=Number(de));if(me<0||this.length<me||this.length<Re)throw new RangeError("Out of range index");if(Re<=me)return this;me=me>>>0,Re=Re===void 0?this.length:Re>>>0,de||(de=0);var ze;if(typeof de=="number")for(ze=me;ze<Re;++ze)this[ze]=de;else{var Qe=C.isBuffer(de)?de:C.from(de,Fe),Ye=Qe.length;if(Ye===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(ze=0;ze<Re-me;++ze)this[ze+me]=Qe[ze%Ye]}return this};var Oe=/[^+/0-9A-Za-z-_]/g;function Se(Pe){if(Pe=Pe.split("=")[0],Pe=Pe.trim().replace(Oe,""),Pe.length<2)return"";for(;Pe.length%4!=0;)Pe=Pe+"=";return Pe}function Te(Pe,de){de=de||1/0;for(var me,Re=Pe.length,Fe=null,Ue=[],ze=0;ze<Re;++ze){if(me=Pe.charCodeAt(ze),me>55295&&me<57344){if(!Fe){if(me>56319){(de-=3)>-1&&Ue.push(239,191,189);continue}else if(ze+1===Re){(de-=3)>-1&&Ue.push(239,191,189);continue}Fe=me;continue}if(me<56320){(de-=3)>-1&&Ue.push(239,191,189),Fe=me;continue}me=(Fe-55296<<10|me-56320)+65536}else Fe&&(de-=3)>-1&&Ue.push(239,191,189);if(Fe=null,me<128){if((de-=1)<0)break;Ue.push(me)}else if(me<2048){if((de-=2)<0)break;Ue.push(me>>6|192,me&63|128)}else if(me<65536){if((de-=3)<0)break;Ue.push(me>>12|224,me>>6&63|128,me&63|128)}else if(me<1114112){if((de-=4)<0)break;Ue.push(me>>18|240,me>>12&63|128,me>>6&63|128,me&63|128)}else throw new Error("Invalid code point")}return Ue}function Ae(Pe){for(var de=[],me=0;me<Pe.length;++me)de.push(Pe.charCodeAt(me)&255);return de}function le(Pe,de){for(var me,Re,Fe,Ue=[],ze=0;ze<Pe.length&&!((de-=2)<0);++ze)me=Pe.charCodeAt(ze),Re=me>>8,Fe=me%256,Ue.push(Fe),Ue.push(Re);return Ue}function ke(Pe){return e.toByteArray(Se(Pe))}function je(Pe,de,me,Re){for(var Fe=0;Fe<Re&&!(Fe+me>=de.length||Fe>=Pe.length);++Fe)de[Fe+me]=Pe[Fe];return Fe}function Ve(Pe,de){return Pe instanceof de||Pe!=null&&Pe.constructor!=null&&Pe.constructor.name!=null&&Pe.constructor.name===de.name}function qe(Pe){return Pe!==Pe}var Ze=function(){for(var Pe="0123456789abcdef",de=new Array(256),me=0;me<16;++me)for(var Re=me*16,Fe=0;Fe<16;++Fe)de[Re+Fe]=Pe[me]+Pe[Fe];return de}()})(buffer$2);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var b=buffer$2,w=b.Buffer;function $(N,C){for(var F in N)C[F]=N[F]}w.from&&w.alloc&&w.allocUnsafe&&w.allocUnsafeSlow?t.exports=b:($(b,e),e.Buffer=T);function T(N,C,F){return w(N,C,F)}T.prototype=Object.create(w.prototype),$(w,T),T.from=function(N,C,F){if(typeof N=="number")throw new TypeError("Argument must not be a number");return w(N,C,F)},T.alloc=function(N,C,F){if(typeof N!="number")throw new TypeError("Argument must be a number");var G=w(N);return C!==void 0?typeof F=="string"?G.fill(C,F):G.fill(C):G.fill(0),G},T.allocUnsafe=function(N){if(typeof N!="number")throw new TypeError("Argument must be a number");return w(N)},T.allocUnsafeSlow=function(N){if(typeof N!="number")throw new TypeError("Argument must be a number");return b.SlowBuffer(N)}})(safeBuffer,safeBuffer.exports);var _Buffer=safeBuffer.exports.Buffer;function base$3(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),b=0;b<e.length;b++)e[b]=255;for(var w=0;w<t.length;w++){var $=t.charAt(w),T=$.charCodeAt(0);if(e[T]!==255)throw new TypeError($+" is ambiguous");e[T]=w}var N=t.length,C=t.charAt(0),F=Math.log(N)/Math.log(256),G=Math.log(256)/Math.log(N);function J(ie){if((Array.isArray(ie)||ie instanceof Uint8Array)&&(ie=_Buffer.from(ie)),!_Buffer.isBuffer(ie))throw new TypeError("Expected Buffer");if(ie.length===0)return"";for(var ue=0,ne=0,ce=0,ae=ie.length;ce!==ae&&ie[ce]===0;)ce++,ue++;for(var ye=(ae-ce)*G+1>>>0,$e=new Uint8Array(ye);ce!==ae;){for(var _e=ie[ce],be=0,xe=ye-1;(_e!==0||be<ne)&&xe!==-1;xe--,be++)_e+=256*$e[xe]>>>0,$e[xe]=_e%N>>>0,_e=_e/N>>>0;if(_e!==0)throw new Error("Non-zero carry");ne=be,ce++}for(var ee=ye-ne;ee!==ye&&$e[ee]===0;)ee++;for(var he=C.repeat(ue);ee<ye;++ee)he+=t.charAt($e[ee]);return he}function Z(ie){if(typeof ie!="string")throw new TypeError("Expected String");if(ie.length===0)return _Buffer.alloc(0);for(var ue=0,ne=0,ce=0;ie[ue]===C;)ne++,ue++;for(var ae=(ie.length-ue)*F+1>>>0,ye=new Uint8Array(ae);ie[ue];){var $e=e[ie.charCodeAt(ue)];if($e===255)return;for(var _e=0,be=ae-1;($e!==0||_e<ce)&&be!==-1;be--,_e++)$e+=N*ye[be]>>>0,ye[be]=$e%256>>>0,$e=$e/256>>>0;if($e!==0)throw new Error("Non-zero carry");ce=_e,ue++}for(var xe=ae-ce;xe!==ae&&ye[xe]===0;)xe++;var ee=_Buffer.allocUnsafe(ne+(ae-xe));ee.fill(0,0,ne);for(var he=ne;xe!==ae;)ee[he++]=ye[xe++];return ee}function re(ie){var ue=Z(ie);if(ue)return ue;throw new Error("Non-base"+N+" character")}return{encode:J,decodeUnsafe:Z,decode:re}}var src$8=base$3,basex=src$8,ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58=basex(ALPHABET);function inRange(t,e,b){return e<=t&&t<=b}function ToDictionary(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(t){for(var e=String(t),b=e.length,w=0,$=[];w<b;){var T=e.charCodeAt(w);if(T<55296||T>57343)$.push(T);else if(56320<=T&&T<=57343)$.push(65533);else if(55296<=T&&T<=56319)if(w===b-1)$.push(65533);else{var N=t.charCodeAt(w+1);if(56320<=N&&N<=57343){var C=T&1023,F=N&1023;$.push(65536+(C<<10)+F),w+=1}else $.push(65533)}w+=1}return $}function codePointsToString(t){for(var e="",b=0;b<t.length;++b){var w=t[b];w<=65535?e+=String.fromCharCode(w):(w-=65536,e+=String.fromCharCode((w>>10)+55296,(w&1023)+56320))}return e}var end_of_stream=-1;function Stream(t){this.tokens=[].slice.call(t)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():end_of_stream},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var finished=-1;function decoderError(t,e){if(t)throw TypeError("Decoder error");return e||65533}var DEFAULT_ENCODING="utf-8";function TextDecoder$2(t,e){if(!(this instanceof TextDecoder$2))return new TextDecoder$2(t,e);if(t=t!==void 0?String(t).toLowerCase():DEFAULT_ENCODING,t!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");e=ToDictionary(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}TextDecoder$2.prototype={decode:function(e,b){var w;typeof e=="object"&&e instanceof ArrayBuffer?w=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?w=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):w=new Uint8Array(0),b=ToDictionary(b),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(b.stream);for(var $=new Stream(w),T=[],N;!$.endOfStream()&&(N=this._decoder.handler($,$.read()),N!==finished);)N!==null&&(Array.isArray(N)?T.push.apply(T,N):T.push(N));if(!this._streaming){do{if(N=this._decoder.handler($,$.read()),N===finished)break;N!==null&&(Array.isArray(N)?T.push.apply(T,N):T.push(N))}while(!$.endOfStream());this._decoder=null}return T.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(T[0]===65279?(this._BOMseen=!0,T.shift()):this._BOMseen=!0),codePointsToString(T)}};function TextEncoder$1(t,e){if(!(this instanceof TextEncoder$1))return new TextEncoder$1(t,e);if(t=t!==void 0?String(t).toLowerCase():DEFAULT_ENCODING,t!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");e=ToDictionary(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}TextEncoder$1.prototype={encode:function(e,b){e=e?String(e):"",b=ToDictionary(b),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=Boolean(b.stream);for(var w=[],$=new Stream(stringToCodePoints(e)),T;!$.endOfStream()&&(T=this._encoder.handler($,$.read()),T!==finished);)Array.isArray(T)?w.push.apply(w,T):w.push(T);if(!this._streaming){for(;T=this._encoder.handler($,$.read()),T!==finished;)Array.isArray(T)?w.push.apply(w,T):w.push(T);this._encoder=null}return new Uint8Array(w)}};function UTF8Decoder(t){var e=t.fatal,b=0,w=0,$=0,T=128,N=191;this.handler=function(C,F){if(F===end_of_stream&&$!==0)return $=0,decoderError(e);if(F===end_of_stream)return finished;if($===0){if(inRange(F,0,127))return F;if(inRange(F,194,223))$=1,b=F-192;else if(inRange(F,224,239))F===224&&(T=160),F===237&&(N=159),$=2,b=F-224;else if(inRange(F,240,244))F===240&&(T=144),F===244&&(N=143),$=3,b=F-240;else return decoderError(e);return b=b<<6*$,null}if(!inRange(F,T,N))return b=$=w=0,T=128,N=191,C.prepend(F),decoderError(e);if(T=128,N=191,w+=1,b+=F-128<<6*($-w),w!==$)return null;var G=b;return b=$=w=0,G}}function UTF8Encoder(t){t.fatal,this.handler=function(e,b){if(b===end_of_stream)return finished;if(inRange(b,0,127))return b;var w,$;inRange(b,128,2047)?(w=1,$=192):inRange(b,2048,65535)?(w=2,$=224):inRange(b,65536,1114111)&&(w=3,$=240);for(var T=[(b>>6*w)+$];w>0;){var N=b>>6*(w-1);T.push(128|N&63),w-=1}return T}}var encoding$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",TextEncoder:TextEncoder$1,TextDecoder:TextDecoder$2}),require$$2$3=getAugmentedNamespace(encoding$1),__createBinding$a=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$a=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__decorate$4=commonjsGlobal&&commonjsGlobal.__decorate||function(t,e,b,w){var $=arguments.length,T=$<3?e:w===null?w=Object.getOwnPropertyDescriptor(e,b):w,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(t,e,b,w);else for(var C=t.length-1;C>=0;C--)(N=t[C])&&(T=($<3?N(T):$>3?N(e,b,T):N(e,b))||T);return $>3&&T&&Object.defineProperty(e,b,T),T},__importStar$a=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.hasOwnProperty.call(t,b)&&__createBinding$a(e,t,b);return __setModuleDefault$a(e,t),e},__importDefault$n=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lib$d,"__esModule",{value:!0});lib$d.deserializeUnchecked=lib$d.deserialize=lib$d.serialize=lib$d.BinaryReader=lib$d.BinaryWriter=lib$d.BorshError=lib$d.baseDecode=lib$d.baseEncode=void 0;const bn_js_1$5=__importDefault$n(bn$1.exports),bs58_1=__importDefault$n(bs58),encoding=__importStar$a(require$$2$3),TextDecoder$1=typeof commonjsGlobal.TextDecoder!="function"?encoding.TextDecoder:commonjsGlobal.TextDecoder,textDecoder$1=new TextDecoder$1("utf-8",{fatal:!0});function baseEncode(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),bs58_1.default.encode(Buffer.from(t))}lib$d.baseEncode=baseEncode;function baseDecode(t){return Buffer.from(bs58_1.default.decode(t))}lib$d.baseDecode=baseDecode;const INITIAL_LENGTH=1024;class BorshError extends Error{constructor(e){super(e);this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lib$d.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=Buffer.alloc(INITIAL_LENGTH),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(INITIAL_LENGTH)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$5.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$5.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$5.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$5.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(INITIAL_LENGTH)]),this.length+=e.length}writeString(e){this.maybeResize();const b=Buffer.from(e,"utf8");this.writeU32(b.length),this.writeBuffer(b)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,b){this.maybeResize(),this.writeU32(e.length);for(const w of e)this.maybeResize(),b(w)}toArray(){return this.buf.subarray(0,this.length)}}lib$d.BinaryWriter=BinaryWriter;function handlingRangeError(t,e,b){const w=b.value;b.value=function(...$){try{return w.apply(this,$)}catch(T){if(T instanceof RangeError){const N=T.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(N)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw T}}}class BinaryReader{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new bn_js_1$5.default(e,"le")}readU128(){const e=this.readBuffer(16);return new bn_js_1$5.default(e,"le")}readU256(){const e=this.readBuffer(32);return new bn_js_1$5.default(e,"le")}readU512(){const e=this.readBuffer(64);return new bn_js_1$5.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new BorshError(`Expected buffer length ${e} isn't within bounds`);const b=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,b}readString(){const e=this.readU32(),b=this.readBuffer(e);try{return textDecoder$1.decode(b)}catch(w){throw new BorshError(`Error decoding UTF-8 string: ${w}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const b=this.readU32(),w=Array();for(let $=0;$<b;++$)w.push(e());return w}}__decorate$4([handlingRangeError],BinaryReader.prototype,"readU8",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readU16",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readU32",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readU64",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readU128",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readU256",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readU512",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readString",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readFixedArray",null);__decorate$4([handlingRangeError],BinaryReader.prototype,"readArray",null);lib$d.BinaryReader=BinaryReader;function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}function serializeField(t,e,b,w,$){try{if(typeof w=="string")$[`write${capitalizeFirstLetter(w)}`](b);else if(w instanceof Array)if(typeof w[0]=="number"){if(b.length!==w[0])throw new BorshError(`Expecting byte array of length ${w[0]}, but got ${b.length} bytes`);$.writeFixedArray(b)}else if(w.length===2&&typeof w[1]=="number"){if(b.length!==w[1])throw new BorshError(`Expecting byte array of length ${w[1]}, but got ${b.length} bytes`);for(let T=0;T<w[1];T++)serializeField(t,null,b[T],w[0],$)}else $.writeArray(b,T=>{serializeField(t,e,T,w[0],$)});else if(w.kind!==void 0)switch(w.kind){case"option":{b==null?$.writeU8(0):($.writeU8(1),serializeField(t,e,b,w.type,$));break}default:throw new BorshError(`FieldType ${w} unrecognized`)}else serializeStruct(t,b,$)}catch(T){throw T instanceof BorshError&&T.addToFieldPath(e),T}}function serializeStruct(t,e,b){if(typeof e.borshSerialize=="function"){e.borshSerialize(b);return}const w=t.get(e.constructor);if(!w)throw new BorshError(`Class ${e.constructor.name} is missing in schema`);if(w.kind==="struct")w.fields.map(([$,T])=>{serializeField(t,$,e[$],T,b)});else if(w.kind==="enum"){const $=e[w.field];for(let T=0;T<w.values.length;++T){const[N,C]=w.values[T];if(N===$){b.writeU8(T),serializeField(t,N,e[N],C,b);break}}}else throw new BorshError(`Unexpected schema kind: ${w.kind} for ${e.constructor.name}`)}function serialize$1(t,e,b=BinaryWriter){const w=new b;return serializeStruct(t,e,w),w.toArray()}lib$d.serialize=serialize$1;function deserializeField(t,e,b,w){try{if(typeof b=="string")return w[`read${capitalizeFirstLetter(b)}`]();if(b instanceof Array){if(typeof b[0]=="number")return w.readFixedArray(b[0]);if(typeof b[1]=="number"){const $=[];for(let T=0;T<b[1];T++)$.push(deserializeField(t,null,b[0],w));return $}else return w.readArray(()=>deserializeField(t,e,b[0],w))}return b.kind==="option"?w.readU8()?deserializeField(t,e,b.type,w):void 0:deserializeStruct(t,b,w)}catch($){throw $ instanceof BorshError&&$.addToFieldPath(e),$}}function deserializeStruct(t,e,b){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(b);const w=t.get(e);if(!w)throw new BorshError(`Class ${e.name} is missing in schema`);if(w.kind==="struct"){const $={};for(const[T,N]of t.get(e).fields)$[T]=deserializeField(t,T,N,b);return new e($)}if(w.kind==="enum"){const $=b.readU8();if($>=w.values.length)throw new BorshError(`Enum index: ${$} is out of range`);const[T,N]=w.values[$],C=deserializeField(t,T,N,b);return new e({[T]:C})}throw new BorshError(`Unexpected schema kind: ${w.kind} for ${e.constructor.name}`)}function deserialize$1(t,e,b,w=BinaryReader){const $=new w(b),T=deserializeStruct(t,e,$);if($.offset<b.length)throw new BorshError(`Unexpected ${b.length-$.offset} bytes after deserialized data`);return T}lib$d.deserialize=deserialize$1;function deserializeUnchecked(t,e,b,w=BinaryReader){const $=new w(b);return deserializeStruct(t,e,$)}lib$d.deserializeUnchecked=deserializeUnchecked;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=lib$d;Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return e.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return e.baseDecode}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return e.deserialize}}),Object.defineProperty(t,"BorshError",{enumerable:!0,get:function(){return e.BorshError}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return e.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return e.BinaryReader}})})(serialize$2);var enums={};Object.defineProperty(enums,"__esModule",{value:!0});enums.Assignable=enums.Enum=void 0;class Enum{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(b=>{this[b]=e[b],this.enum=b})}}enums.Enum=Enum;class Assignable{constructor(e){Object.keys(e).map(b=>{this[b]=e[b]})}}enums.Assignable=Assignable;(function(t){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.KeyType=void 0;const b=e(naclFast.exports),w=serialize$2,$=enums;var T;(function(Z){Z[Z.ED25519=0]="ED25519"})(T=t.KeyType||(t.KeyType={}));function N(Z){switch(Z){case T.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${Z}`)}}function C(Z){switch(Z.toLowerCase()){case"ed25519":return T.ED25519;default:throw new Error(`Unknown key type ${Z}`)}}class F extends $.Assignable{static from(re){return typeof re=="string"?F.fromString(re):re}static fromString(re){const ie=re.split(":");if(ie.length===1)return new F({keyType:T.ED25519,data:w.base_decode(ie[0])});if(ie.length===2)return new F({keyType:C(ie[0]),data:w.base_decode(ie[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${N(this.keyType)}:${w.base_encode(this.data)}`}}t.PublicKey=F;class G{static fromRandom(re){switch(re.toUpperCase()){case"ED25519":return J.fromRandom();default:throw new Error(`Unknown curve ${re}`)}}static fromString(re){const ie=re.split(":");if(ie.length===1)return new J(ie[0]);if(ie.length===2)switch(ie[0].toUpperCase()){case"ED25519":return new J(ie[1]);default:throw new Error(`Unknown curve: ${ie[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}t.KeyPair=G;class J extends G{constructor(re){super();const ie=b.default.sign.keyPair.fromSecretKey(w.base_decode(re));this.publicKey=new F({keyType:T.ED25519,data:ie.publicKey}),this.secretKey=re}static fromRandom(){const re=b.default.sign.keyPair();return new J(w.base_encode(re.secretKey))}sign(re){return{signature:b.default.sign.detached(re,w.base_decode(this.secretKey)),publicKey:this.publicKey}}verify(re,ie){return b.default.sign.detached.verify(re,ie,this.publicKey.data)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}t.KeyPairEd25519=J})(key_pair);Object.defineProperty(in_memory_key_store,"__esModule",{value:!0});in_memory_key_store.InMemoryKeyStore=void 0;const keystore_1$2=keystore,key_pair_1$3=key_pair;class InMemoryKeyStore extends keystore_1$2.KeyStore{constructor(){super();this.keys={}}async setKey(e,b,w){this.keys[`${b}:${e}`]=w.toString()}async getKey(e,b){const w=this.keys[`${b}:${e}`];return w?key_pair_1$3.KeyPair.fromString(w):null}async removeKey(e,b){delete this.keys[`${b}:${e}`]}async clear(){this.keys={}}async getNetworks(){const e=new Set;return Object.keys(this.keys).forEach(b=>{const w=b.split(":");e.add(w[1])}),Array.from(e.values())}async getAccounts(e){const b=new Array;return Object.keys(this.keys).forEach(w=>{const $=w.split(":");$[$.length-1]===e&&b.push($.slice(0,$.length-1).join(":"))}),b}toString(){return"InMemoryKeyStore"}}in_memory_key_store.InMemoryKeyStore=InMemoryKeyStore;var browser_local_storage_key_store={};Object.defineProperty(browser_local_storage_key_store,"__esModule",{value:!0});browser_local_storage_key_store.BrowserLocalStorageKeyStore=void 0;const keystore_1$1=keystore,key_pair_1$2=key_pair,LOCAL_STORAGE_KEY_PREFIX="near-api-js:keystore:";class BrowserLocalStorageKeyStore extends keystore_1$1.KeyStore{constructor(e=window.localStorage,b=LOCAL_STORAGE_KEY_PREFIX){super();this.localStorage=e,this.prefix=b}async setKey(e,b,w){this.localStorage.setItem(this.storageKeyForSecretKey(e,b),w.toString())}async getKey(e,b){const w=this.localStorage.getItem(this.storageKeyForSecretKey(e,b));return w?key_pair_1$2.KeyPair.fromString(w):null}async removeKey(e,b){this.localStorage.removeItem(this.storageKeyForSecretKey(e,b))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const b of this.storageKeys())if(b.startsWith(this.prefix)){const w=b.substring(this.prefix.length).split(":");e.add(w[1])}return Array.from(e.values())}async getAccounts(e){const b=new Array;for(const w of this.storageKeys())if(w.startsWith(this.prefix)){const $=w.substring(this.prefix.length).split(":");$[1]===e&&b.push($[0])}return b}storageKeyForSecretKey(e,b){return`${this.prefix}${b}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}browser_local_storage_key_store.BrowserLocalStorageKeyStore=BrowserLocalStorageKeyStore;var merge_key_store={};Object.defineProperty(merge_key_store,"__esModule",{value:!0});merge_key_store.MergeKeyStore=void 0;const keystore_1=keystore;class MergeKeyStore extends keystore_1.KeyStore{constructor(e,b={writeKeyStoreIndex:0}){super();this.options=b,this.keyStores=e}async setKey(e,b,w){await this.keyStores[this.options.writeKeyStoreIndex].setKey(e,b,w)}async getKey(e,b){for(const w of this.keyStores){const $=await w.getKey(e,b);if($)return $}return null}async removeKey(e,b){for(const w of this.keyStores)await w.removeKey(e,b)}async clear(){for(const e of this.keyStores)await e.clear()}async getNetworks(){const e=new Set;for(const b of this.keyStores)for(const w of await b.getNetworks())e.add(w);return Array.from(e)}async getAccounts(e){const b=new Set;for(const w of this.keyStores)for(const $ of await w.getAccounts(e))b.add($);return Array.from(b)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}merge_key_store.MergeKeyStore=MergeKeyStore;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const e=keystore;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}});const b=in_memory_key_store;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return b.InMemoryKeyStore}});const w=browser_local_storage_key_store;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return w.BrowserLocalStorageKeyStore}});const $=merge_key_store;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return $.MergeKeyStore}})})(browserIndex);var commonIndex={},providers={},provider={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionLastResult=t.Provider=t.IdType=t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(w){w.Unknown="Unknown",w.Pending="Pending",w.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(w){w.NotStarted="NotStarted",w.Started="Started",w.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={})),function(w){w.Transaction="transaction",w.Receipt="receipt"}(t.IdType||(t.IdType={}));class e{}t.Provider=e;function b(w){if(typeof w.status=="object"&&typeof w.status.SuccessValue=="string"){const $=Buffer.from(w.status.SuccessValue,"base64").toString();try{return JSON.parse($)}catch{return $}}return null}t.getTransactionLastResult=b})(provider);var jsonRpcProvider={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var browser$2=depd$1;function depd$1(t){if(!t)throw new TypeError("argument namespace is required");function e(b){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=wrapfunction$1,e.property=wrapproperty$1,e}function wrapfunction$1(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function wrapproperty$1(t,e,b){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var w=Object.getOwnPropertyDescriptor(t,e);if(!w)throw new TypeError("must call property on owner object");if(!w.configurable)throw new TypeError("property must be configurable")}var web={},httpErrors={exports:{}};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var browser$1=depd;function depd(t){if(!t)throw new TypeError("argument namespace is required");function e(b){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=wrapfunction,e.property=wrapproperty,e}function wrapfunction(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function wrapproperty(t,e,b){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var w=Object.getOwnPropertyDescriptor(t,e);if(!w)throw new TypeError("must call property on owner object");if(!w.configurable)throw new TypeError("property must be configurable")}var setprototypeof=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);function setProtoOf(t,e){return t.__proto__=e,t}function mixinProperties(t,e){for(var b in e)Object.prototype.hasOwnProperty.call(t,b)||(t[b]=e[b]);return t}var require$$0$5={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"};/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var codes$2=require$$0$5,statuses=status;status.STATUS_CODES=codes$2;status.codes=populateStatusesMap(status,codes$2);status.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};status.empty={204:!0,205:!0,304:!0};status.retry={502:!0,503:!0,504:!0};function populateStatusesMap(t,e){var b=[];return Object.keys(e).forEach(function($){var T=e[$],N=Number($);t[N]=T,t[T]=N,t[T.toLowerCase()]=N,b.push(N)}),b}function status(t){if(typeof t=="number"){if(!status[t])throw new Error("invalid status code: "+t);return t}if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!status[e])throw new Error("invalid status code: "+e);return e}if(e=status[t.toLowerCase()],!e)throw new Error('invalid status message: "'+t+'"');return e}/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var toidentifier=toIdentifier;function toIdentifier(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */(function(t){var e=browser$1("http-errors"),b=setprototypeof,w=statuses,$=inherits_browser$1.exports,T=toidentifier;t.exports=C,t.exports.HttpError=F(),t.exports.isHttpError=J(t.exports.HttpError),ie(t.exports,w.codes,t.exports.HttpError);function N(ne){return Number(String(ne).charAt(0)+"00")}function C(){for(var ne,ce,ae=500,ye={},$e=0;$e<arguments.length;$e++){var _e=arguments[$e];if(_e instanceof Error){ne=_e,ae=ne.status||ne.statusCode||ae;continue}switch(typeof _e){case"string":ce=_e;break;case"number":ae=_e;break;case"object":ye=_e;break}}(typeof ae!="number"||!w[ae]&&(ae<400||ae>=600))&&(ae=500);var be=C[ae]||C[N(ae)];ne||(ne=be?new be(ce):new Error(ce||w[ae]),Error.captureStackTrace(ne,C)),(!be||!(ne instanceof be)||ne.status!==ae)&&(ne.expose=ae<500,ne.status=ne.statusCode=ae);for(var xe in ye)xe!=="status"&&xe!=="statusCode"&&(ne[xe]=ye[xe]);return ne}function F(){function ne(){throw new TypeError("cannot construct abstract class")}return $(ne,Error),ne}function G(ne,ce,ae){var ye=ue(ce);function $e(_e){var be=_e!=null?_e:w[ae],xe=new Error(be);return Error.captureStackTrace(xe,$e),b(xe,$e.prototype),Object.defineProperty(xe,"message",{enumerable:!0,configurable:!0,value:be,writable:!0}),Object.defineProperty(xe,"name",{enumerable:!1,configurable:!0,value:ye,writable:!0}),xe}return $($e,ne),re($e,ye),$e.prototype.status=ae,$e.prototype.statusCode=ae,$e.prototype.expose=!0,$e}function J(ne){return function(ae){return!ae||typeof ae!="object"?!1:ae instanceof ne?!0:ae instanceof Error&&typeof ae.expose=="boolean"&&typeof ae.statusCode=="number"&&ae.status===ae.statusCode}}function Z(ne,ce,ae){var ye=ue(ce);function $e(_e){var be=_e!=null?_e:w[ae],xe=new Error(be);return Error.captureStackTrace(xe,$e),b(xe,$e.prototype),Object.defineProperty(xe,"message",{enumerable:!0,configurable:!0,value:be,writable:!0}),Object.defineProperty(xe,"name",{enumerable:!1,configurable:!0,value:ye,writable:!0}),xe}return $($e,ne),re($e,ye),$e.prototype.status=ae,$e.prototype.statusCode=ae,$e.prototype.expose=!1,$e}function re(ne,ce){var ae=Object.getOwnPropertyDescriptor(ne,"name");ae&&ae.configurable&&(ae.value=ce,Object.defineProperty(ne,"name",ae))}function ie(ne,ce,ae){ce.forEach(function($e){var _e,be=T(w[$e]);switch(N($e)){case 400:_e=G(ae,be,$e);break;case 500:_e=Z(ae,be,$e);break}_e&&(ne[$e]=_e,ne[be]=_e)}),ne["I'mateapot"]=e.function(ne.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function ue(ne){return ne.substr(-5)!=="Error"?ne+"Error":ne}})(httpErrors);var exponentialBackoff$1={};Object.defineProperty(exponentialBackoff$1,"__esModule",{value:!0});async function exponentialBackoff(t,e,b,w){let $=t;for(let T=0;T<e;T++){const N=await w();if(N)return N;await sleep($),$*=b}return null}exponentialBackoff$1.default=exponentialBackoff;function sleep(t){return new Promise(e=>setTimeout(e,t))}var errors={};Object.defineProperty(errors,"__esModule",{value:!0});errors.logWarning=errors.ErrorContext=errors.TypedError=errors.ArgumentTypeError=errors.PositionalArgsError=void 0;class PositionalArgsError extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}errors.PositionalArgsError=PositionalArgsError;class ArgumentTypeError extends Error{constructor(e,b,w){super(`Expected ${b} for '${e}' argument, but got '${JSON.stringify(w)}'`)}}errors.ArgumentTypeError=ArgumentTypeError;class TypedError extends Error{constructor(e,b,w){super(e);this.type=b||"UntypedError",this.context=w}}errors.TypedError=TypedError;class ErrorContext{constructor(e){this.transactionHash=e}}errors.ErrorContext=ErrorContext;function logWarning(...t){process.env.NEAR_NO_LOGS||console.warn(...t)}errors.logWarning=logWarning;var __importDefault$m=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(web,"__esModule",{value:!0});web.fetchJson=void 0;const http_errors_1=__importDefault$m(httpErrors.exports),exponential_backoff_1$1=__importDefault$m(exponentialBackoff$1),providers_1$3=providers,errors_1$3=errors,START_WAIT_TIME_MS=1e3,BACKOFF_MULTIPLIER=1.5,RETRY_NUMBER=10;async function fetchJson$2(t,e){let b=null;typeof t=="string"?b=t:b=t.url;const w=await exponential_backoff_1$1.default(START_WAIT_TIME_MS,RETRY_NUMBER,BACKOFF_MULTIPLIER,async()=>{try{const $=await fetch(b,{method:e?"POST":"GET",body:e||void 0,headers:{"Content-Type":"application/json; charset=utf-8"}});if(!$.ok){if($.status===503)return errors_1$3.logWarning(`Retrying HTTP request for ${b} as it's not available now`),null;throw http_errors_1.default($.status,await $.text())}return $}catch($){if($.toString().includes("FetchError")||$.toString().includes("Failed to fetch"))return errors_1$3.logWarning(`Retrying HTTP request for ${b} because of error: ${$}`),null;throw $}});if(!w)throw new providers_1$3.TypedError(`Exceeded ${RETRY_NUMBER} attempts for ${b}.`,"RetriesExceeded");return await w.json()}web.fetchJson=fetchJson$2;var rpc_errors={},mustache={exports:{}};(function(t,e){(function(b,w){t.exports=w()})(commonjsGlobal,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var b=Object.prototype.toString,w=Array.isArray||function(Y){return b.call(Y)==="[object Array]"};function $(te){return typeof te=="function"}function T(te){return w(te)?"array":typeof te}function N(te){return te.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function C(te,Y){return te!=null&&typeof te=="object"&&Y in te}function F(te,Y){return te!=null&&typeof te!="object"&&te.hasOwnProperty&&te.hasOwnProperty(Y)}var G=RegExp.prototype.test;function J(te,Y){return G.call(te,Y)}var Z=/\S/;function re(te){return!J(Z,te)}var ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function ue(te){return String(te).replace(/[&<>"'`=\/]/g,function(R){return ie[R]})}var ne=/\s*/,ce=/\s+/,ae=/\s*=/,ye=/\s*\}/,$e=/#|\^|\/|>|\{|&|=|!/;function _e(te,Y){if(!te)return[];var R=!1,B=[],V=[],Q=[],H=!1,j=!1,L="",q=0;function U(){if(H&&!j)for(;Q.length;)delete V[Q.pop()];else Q=[];H=!1,j=!1}var oe,ve,fe;function Oe(Pe){if(typeof Pe=="string"&&(Pe=Pe.split(ce,2)),!w(Pe)||Pe.length!==2)throw new Error("Invalid tags: "+Pe);oe=new RegExp(N(Pe[0])+"\\s*"),ve=new RegExp("\\s*"+N(Pe[1])),fe=new RegExp("\\s*"+N("}"+Pe[1]))}Oe(Y||Ne.tags);for(var Se=new ee(te),Te,Ae,le,ke,je,Ve;!Se.eos();){if(Te=Se.pos,le=Se.scanUntil(oe),le)for(var qe=0,Ze=le.length;qe<Ze;++qe)ke=le.charAt(qe),re(ke)?(Q.push(V.length),L+=ke):(j=!0,R=!0,L+=" "),V.push(["text",ke,Te,Te+1]),Te+=1,ke===`
`&&(U(),L="",q=0,R=!1);if(!Se.scan(oe))break;if(H=!0,Ae=Se.scan($e)||"name",Se.scan(ne),Ae==="="?(le=Se.scanUntil(ae),Se.scan(ae),Se.scanUntil(ve)):Ae==="{"?(le=Se.scanUntil(fe),Se.scan(ye),Se.scanUntil(ve),Ae="&"):le=Se.scanUntil(ve),!Se.scan(ve))throw new Error("Unclosed tag at "+Se.pos);if(Ae==">"?je=[Ae,le,Te,Se.pos,L,q,R]:je=[Ae,le,Te,Se.pos],q++,V.push(je),Ae==="#"||Ae==="^")B.push(je);else if(Ae==="/"){if(Ve=B.pop(),!Ve)throw new Error('Unopened section "'+le+'" at '+Te);if(Ve[1]!==le)throw new Error('Unclosed section "'+Ve[1]+'" at '+Te)}else Ae==="name"||Ae==="{"||Ae==="&"?j=!0:Ae==="="&&Oe(le)}if(U(),Ve=B.pop(),Ve)throw new Error('Unclosed section "'+Ve[1]+'" at '+Se.pos);return xe(be(V))}function be(te){for(var Y=[],R,B,V=0,Q=te.length;V<Q;++V)R=te[V],R&&(R[0]==="text"&&B&&B[0]==="text"?(B[1]+=R[1],B[3]=R[3]):(Y.push(R),B=R));return Y}function xe(te){for(var Y=[],R=Y,B=[],V,Q,H=0,j=te.length;H<j;++H)switch(V=te[H],V[0]){case"#":case"^":R.push(V),B.push(V),R=V[4]=[];break;case"/":Q=B.pop(),Q[5]=V[2],R=B.length>0?B[B.length-1][4]:Y;break;default:R.push(V)}return Y}function ee(te){this.string=te,this.tail=te,this.pos=0}ee.prototype.eos=function(){return this.tail===""},ee.prototype.scan=function(Y){var R=this.tail.match(Y);if(!R||R.index!==0)return"";var B=R[0];return this.tail=this.tail.substring(B.length),this.pos+=B.length,B},ee.prototype.scanUntil=function(Y){var R=this.tail.search(Y),B;switch(R){case-1:B=this.tail,this.tail="";break;case 0:B="";break;default:B=this.tail.substring(0,R),this.tail=this.tail.substring(R)}return this.pos+=B.length,B};function he(te,Y){this.view=te,this.cache={".":this.view},this.parent=Y}he.prototype.push=function(Y){return new he(Y,this)},he.prototype.lookup=function(Y){var R=this.cache,B;if(R.hasOwnProperty(Y))B=R[Y];else{for(var V=this,Q,H,j,L=!1;V;){if(Y.indexOf(".")>0)for(Q=V.view,H=Y.split("."),j=0;Q!=null&&j<H.length;)j===H.length-1&&(L=C(Q,H[j])||F(Q,H[j])),Q=Q[H[j++]];else Q=V.view[Y],L=C(V.view,Y);if(L){B=Q;break}V=V.parent}R[Y]=B}return $(B)&&(B=B.call(this.view)),B};function we(){this.templateCache={_cache:{},set:function(Y,R){this._cache[Y]=R},get:function(Y){return this._cache[Y]},clear:function(){this._cache={}}}}we.prototype.clearCache=function(){typeof this.templateCache!="undefined"&&this.templateCache.clear()},we.prototype.parse=function(Y,R){var B=this.templateCache,V=Y+":"+(R||Ne.tags).join(":"),Q=typeof B!="undefined",H=Q?B.get(V):void 0;return H==null&&(H=_e(Y,R),Q&&B.set(V,H)),H},we.prototype.render=function(Y,R,B,V){var Q=this.getConfigTags(V),H=this.parse(Y,Q),j=R instanceof he?R:new he(R,void 0);return this.renderTokens(H,j,B,Y,V)},we.prototype.renderTokens=function(Y,R,B,V,Q){for(var H="",j,L,q,U=0,oe=Y.length;U<oe;++U)q=void 0,j=Y[U],L=j[0],L==="#"?q=this.renderSection(j,R,B,V,Q):L==="^"?q=this.renderInverted(j,R,B,V,Q):L===">"?q=this.renderPartial(j,R,B,Q):L==="&"?q=this.unescapedValue(j,R):L==="name"?q=this.escapedValue(j,R,Q):L==="text"&&(q=this.rawValue(j)),q!==void 0&&(H+=q);return H},we.prototype.renderSection=function(Y,R,B,V,Q){var H=this,j="",L=R.lookup(Y[1]);function q(ve){return H.render(ve,R,B,Q)}if(!!L){if(w(L))for(var U=0,oe=L.length;U<oe;++U)j+=this.renderTokens(Y[4],R.push(L[U]),B,V,Q);else if(typeof L=="object"||typeof L=="string"||typeof L=="number")j+=this.renderTokens(Y[4],R.push(L),B,V,Q);else if($(L)){if(typeof V!="string")throw new Error("Cannot use higher-order sections without the original template");L=L.call(R.view,V.slice(Y[3],Y[5]),q),L!=null&&(j+=L)}else j+=this.renderTokens(Y[4],R,B,V,Q);return j}},we.prototype.renderInverted=function(Y,R,B,V,Q){var H=R.lookup(Y[1]);if(!H||w(H)&&H.length===0)return this.renderTokens(Y[4],R,B,V,Q)},we.prototype.indentPartial=function(Y,R,B){for(var V=R.replace(/[^ \t]/g,""),Q=Y.split(`
`),H=0;H<Q.length;H++)Q[H].length&&(H>0||!B)&&(Q[H]=V+Q[H]);return Q.join(`
`)},we.prototype.renderPartial=function(Y,R,B,V){if(!!B){var Q=this.getConfigTags(V),H=$(B)?B(Y[1]):B[Y[1]];if(H!=null){var j=Y[6],L=Y[5],q=Y[4],U=H;L==0&&q&&(U=this.indentPartial(H,q,j));var oe=this.parse(U,Q);return this.renderTokens(oe,R,B,U,V)}}},we.prototype.unescapedValue=function(Y,R){var B=R.lookup(Y[1]);if(B!=null)return B},we.prototype.escapedValue=function(Y,R,B){var V=this.getConfigEscape(B)||Ne.escape,Q=R.lookup(Y[1]);if(Q!=null)return typeof Q=="number"&&V===Ne.escape?String(Q):V(Q)},we.prototype.rawValue=function(Y){return Y[1]},we.prototype.getConfigTags=function(Y){return w(Y)?Y:Y&&typeof Y=="object"?Y.tags:void 0},we.prototype.getConfigEscape=function(Y){if(Y&&typeof Y=="object"&&!w(Y))return Y.escape};var Ne={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(te){pe.templateCache=te},get templateCache(){return pe.templateCache}},pe=new we;return Ne.clearCache=function(){return pe.clearCache()},Ne.parse=function(Y,R){return pe.parse(Y,R)},Ne.render=function(Y,R,B,V){if(typeof Y!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+T(Y)+'" was given as the first argument for mustache#render(template, view, partials)');return pe.render(Y,R,B,V)},Ne.escape=ue,Ne.Scanner=ee,Ne.Context=he,Ne.Writer=we,Ne})})(mustache);const schema={BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BreakpointTrap:{name:"BreakpointTrap",subtypes:[],props:{}},CacheError:{name:"CacheError",subtypes:["ReadError","WriteError","DeserializationError","SerializationError"],props:{}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},DeserializationError:{name:"DeserializationError",subtypes:[],props:{}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},FunctionCallError:{name:"FunctionCallError",subtypes:["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LinkError:{name:"LinkError",subtypes:[],props:{msg:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],props:{}},MethodUTF8Error:{name:"MethodUTF8Error",subtypes:[],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReadError:{name:"ReadError",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},SerializationError:{name:"SerializationError",subtypes:[],props:{hash:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],props:{}},WasmUnknownError:{name:"WasmUnknownError",subtypes:[],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},WriteError:{name:"WriteError",subtypes:[],props:{}},AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],props:{}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},Closed:{name:"Closed",subtypes:[],props:{}},InternalError:{name:"InternalError",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed","InternalError"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}};var require$$1$4={schema};const GasLimitExceeded="Exceeded the maximum amount of gas allowed to burn per contract",MethodEmptyName="Method name is empty",WasmerCompileError="Wasmer compilation error: {{msg}}",GuestPanic="Smart contract panicked: {{panic_msg}}",Memory="Error creating Wasm memory",GasExceeded="Exceeded the prepaid gas",MethodUTF8Error="Method name is not valid UTF8 string",BadUTF16="String encoding is bad UTF-16 sequence",WasmTrap="WebAssembly trap: {{msg}}",GasInstrumentation="Gas instrumentation failed or contract has denied instructions.",InvalidPromiseIndex="{{promise_idx}} does not correspond to existing promises",InvalidPromiseResultIndex="Accessed invalid promise result index: {{result_idx}}",Deserialization="Error happened while deserializing the module",MethodNotFound="Contract method is not found",InvalidRegisterId="Accessed invalid register id: {{register_id}}",InvalidReceiptIndex="VM Logic returned an invalid receipt index: {{receipt_index}}",EmptyMethodName="Method name is empty in contract call",CannotReturnJointPromise="Returning joint promise is currently prohibited",StackHeightInstrumentation="Stack instrumentation failed",CodeDoesNotExist="Cannot find contract code for account {{account_id}}",MethodInvalidSignature="Invalid method signature",IntegerOverflow="Integer overflow happened during contract execution",MemoryAccessViolation="MemoryAccessViolation",InvalidIteratorIndex="Iterator index {{iterator_index}} does not exist",IteratorWasInvalidated="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",InvalidAccountId="VM Logic returned an invalid account id",Serialization="Error happened while serializing the module",CannotAppendActionToJointPromise="Actions can only be appended to non-joint promise.",InternalMemoryDeclared="Internal memory declaration has been found in the module",Instantiate="Error happened during instantiation",ProhibitedInView="{{method_name}} is not allowed in view calls",InvalidMethodName="VM Logic returned an invalid method name",BadUTF8="String encoding is bad UTF-8 sequence",BalanceExceeded="Exceeded the account balance",LinkError="Wasm contract link error: {{msg}}",InvalidPublicKey="VM Logic provided an invalid public key",ActorNoPermission="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",LackBalanceForState="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",ReceiverMismatch="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",CostOverflow="Transaction gas or balance cost is too high",InvalidSignature="Transaction is not signed with the given public key",AccessKeyNotFound=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,NotEnoughBalance="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",NotEnoughAllowance="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",Expired="Transaction has expired",DeleteAccountStaking="Account {{account_id}} is staking and can not be deleted",SignerDoesNotExist="Signer {{signer_id}} does not exist",TriesToStake="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",AddKeyAlreadyExists="The public key {{public_key}} is already used for an existing access key",InvalidSigner="Invalid signer account ID {{signer_id}} according to requirements",CreateAccountNotAllowed="The new account_id {{account_id}} can't be created by {{predecessor_id}}",RequiresFullAccess="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",TriesToUnstake="Account {{account_id}} is not yet staked, but tried to unstake",InvalidNonce="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",AccountAlreadyExists="Can't create a new account {{account_id}}, because it already exists",InvalidChain="Transaction parent block hash doesn't belong to the current chain",AccountDoesNotExist="Can't complete the action because account {{account_id}} doesn't exist",MethodNameMismatch="Transaction method name {{method_name}} isn't allowed by the access key",DeleteAccountHasRent="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",DeleteAccountHasEnoughBalance="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",InvalidReceiver="Invalid receiver account ID {{receiver_id}} according to requirements",DeleteKeyDoesNotExist="Account {{account_id}} tries to remove an access key that doesn't exist",Timeout="Timeout exceeded",Closed="Connection closed";var require$$2$2={GasLimitExceeded,MethodEmptyName,WasmerCompileError,GuestPanic,Memory,GasExceeded,MethodUTF8Error,BadUTF16,WasmTrap,GasInstrumentation,InvalidPromiseIndex,InvalidPromiseResultIndex,Deserialization,MethodNotFound,InvalidRegisterId,InvalidReceiptIndex,EmptyMethodName,CannotReturnJointPromise,StackHeightInstrumentation,CodeDoesNotExist,MethodInvalidSignature,IntegerOverflow,MemoryAccessViolation,InvalidIteratorIndex,IteratorWasInvalidated,InvalidAccountId,Serialization,CannotAppendActionToJointPromise,InternalMemoryDeclared,Instantiate,ProhibitedInView,InvalidMethodName,BadUTF8,BalanceExceeded,LinkError,InvalidPublicKey,ActorNoPermission,LackBalanceForState,ReceiverMismatch,CostOverflow,InvalidSignature,AccessKeyNotFound,NotEnoughBalance,NotEnoughAllowance,Expired,DeleteAccountStaking,SignerDoesNotExist,TriesToStake,AddKeyAlreadyExists,InvalidSigner,CreateAccountNotAllowed,RequiresFullAccess,TriesToUnstake,InvalidNonce,AccountAlreadyExists,InvalidChain,AccountDoesNotExist,MethodNameMismatch,DeleteAccountHasRent,DeleteAccountHasEnoughBalance,InvalidReceiver,DeleteKeyDoesNotExist,Timeout,Closed},__importDefault$l=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rpc_errors,"__esModule",{value:!0});rpc_errors.getErrorTypeFromErrorMessage=rpc_errors.formatError=rpc_errors.parseResultError=rpc_errors.parseRpcError=rpc_errors.ServerError=void 0;const mustache_1=__importDefault$l(mustache.exports),rpc_error_schema_json_1=__importDefault$l(require$$1$4),error_messages_json_1=__importDefault$l(require$$2$2),common_index_1=commonIndex,errors_1$2=errors,mustacheHelpers={formatNear:()=>(t,e)=>common_index_1.utils.format.formatNearAmount(e(t))};class ServerError extends errors_1$2.TypedError{}rpc_errors.ServerError=ServerError;class ServerTransactionError extends ServerError{}function parseRpcError(t){const e={},b=walkSubtype(t,rpc_error_schema_json_1.default.schema,e,""),w=new ServerError(formatError(b,e),b);return Object.assign(w,e),w}rpc_errors.parseRpcError=parseRpcError;function parseResultError(t){const e=parseRpcError(t.status.Failure),b=new ServerTransactionError;return Object.assign(b,e),b.type=e.type,b.message=e.message,b.transaction_outcome=t.transaction_outcome,b}rpc_errors.parseResultError=parseResultError;function formatError(t,e){return typeof error_messages_json_1.default[t]=="string"?mustache_1.default.render(error_messages_json_1.default[t],Tt(Tt({},e),mustacheHelpers)):JSON.stringify(e)}rpc_errors.formatError=formatError;function walkSubtype(t,e,b,w){let $,T,N;for(const C in e){if(isString(t[C]))return t[C];if(isObject$2(t[C]))$=t[C],T=e[C],N=C;else if(isObject$2(t.kind)&&isObject$2(t.kind[C]))$=t.kind[C],T=e[C],N=C;else continue}if($&&T){for(const C of Object.keys(T.props))b[C]=$[C];return walkSubtype($,e,b,N)}else return b.kind=t,w}function getErrorTypeFromErrorMessage(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}rpc_errors.getErrorTypeFromErrorMessage=getErrorTypeFromErrorMessage;function isObject$2(t){return Object.prototype.toString.call(t)==="[object Object]"}function isString(t){return Object.prototype.toString.call(t)==="[object String]"}(function(t){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.ErrorContext=t.TypedError=void 0;const b=e(browser$2),w=provider,$=web,T=errors;Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return T.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return T.ErrorContext}});const N=lib$d,C=e(exponentialBackoff$1),F=rpc_errors,G=12,J=500,Z=1.5;let re=123;class ie extends w.Provider{constructor(ne){super();this.connection={url:ne}}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(ne){const ce=ne.encode();return this.sendJsonRpc("broadcast_tx_commit",[Buffer.from(ce).toString("base64")])}async sendTransactionAsync(ne){const ce=ne.encode();return this.sendJsonRpc("broadcast_tx_async",[Buffer.from(ce).toString("base64")])}async txStatus(ne,ce){return typeof ne=="string"?this.txStatusString(ne,ce):this.txStatusUint8Array(ne,ce)}async txStatusUint8Array(ne,ce){return this.sendJsonRpc("tx",[N.baseEncode(ne),ce])}async txStatusString(ne,ce){return this.sendJsonRpc("tx",[ne,ce])}async txStatusReceipts(ne,ce){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[N.baseEncode(ne),ce])}async query(...ne){let ce;if(ne.length===1)ce=await this.sendJsonRpc("query",ne[0]);else{const[ae,ye]=ne;ce=await this.sendJsonRpc("query",[ae,ye])}if(ce&&ce.error)throw new T.TypedError(`Querying ${ne} failed: ${ce.error}.
${JSON.stringify(ce,null,2)}`,F.getErrorTypeFromErrorMessage(ce.error));return ce}async block(ne){const{finality:ce}=ne;let{blockId:ae}=ne;return typeof ne!="object"&&(b.default("JsonRpcProvider.block(blockId)")("use `block({ blockId })` or `block({ finality })` instead"),ae=ne),this.sendJsonRpc("block",{block_id:ae,finality:ce})}async blockChanges(ne){const{finality:ce}=ne,{blockId:ae}=ne;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:ae,finality:ce})}async chunk(ne){return this.sendJsonRpc("chunk",[ne])}async validators(ne){return this.sendJsonRpc("validators",[ne])}async experimental_genesisConfig(){return b.default("JsonRpcProvider.experimental_protocolConfig()")("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(ne){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",ne)}async experimental_lightClientProof(ne){return b.default("JsonRpcProvider.experimental_lightClientProof(request)")("use `lightClientProof` instead"),await this.lightClientProof(ne)}async lightClientProof(ne){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",ne)}async accessKeyChanges(ne,ce){const{finality:ae}=ce,{blockId:ye}=ce;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:ne,block_id:ye,finality:ae})}async singleAccessKeyChanges(ne,ce){const{finality:ae}=ce,{blockId:ye}=ce;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:ne,block_id:ye,finality:ae})}async accountChanges(ne,ce){const{finality:ae}=ce,{blockId:ye}=ce;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:ne,block_id:ye,finality:ae})}async contractStateChanges(ne,ce,ae=""){const{finality:ye}=ce,{blockId:$e}=ce;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:ne,key_prefix_base64:ae,block_id:$e,finality:ye})}async contractCodeChanges(ne,ce){const{finality:ae}=ce,{blockId:ye}=ce;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:ne,block_id:ye,finality:ae})}async gasPrice(ne){return await this.sendJsonRpc("gas_price",[ne])}async sendJsonRpc(ne,ce){const ae=await C.default(J,G,Z,async()=>{try{const $e={method:ne,params:ce,id:re++,jsonrpc:"2.0"},_e=await $.fetchJson(this.connection,JSON.stringify($e));if(_e.error){if(typeof _e.error.data=="object")throw typeof _e.error.data.error_message=="string"&&typeof _e.error.data.error_type=="string"?new T.TypedError(_e.error.data.error_message,_e.error.data.error_type):F.parseRpcError(_e.error.data);{const be=`[${_e.error.code}] ${_e.error.message}: ${_e.error.data}`;throw _e.error.data==="Timeout"||be.includes("Timeout error")||be.includes("query has timed out")?new T.TypedError(be,"TimeoutError"):new T.TypedError(be,F.getErrorTypeFromErrorMessage(_e.error.data))}}return _e}catch($e){if($e.type==="TimeoutError")return console.warn(`Retrying request to ${ne} as it has timed out`,ce),null;throw $e}}),{result:ye}=ae;if(typeof ye=="undefined")throw new T.TypedError(`Exceeded ${G} attempts for request to ${ne}.`,"RetriesExceeded");return ye}}t.JsonRpcProvider=ie})(jsonRpcProvider);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.JsonRpcProvider=t.Provider=void 0;const e=provider;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return e.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return e.FinalExecutionStatusBasic}});const b=jsonRpcProvider;Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return b.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return b.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return b.ErrorContext}})})(providers);var utils$k={},format$4={},bn={exports:{}};(function(t){(function(e,b){function w(Y,R){if(!Y)throw new Error(R||"Assertion failed")}function $(Y,R){Y.super_=R;var B=function(){};B.prototype=R.prototype,Y.prototype=new B,Y.prototype.constructor=Y}function T(Y,R,B){if(T.isBN(Y))return Y;this.negative=0,this.words=null,this.length=0,this.red=null,Y!==null&&((R==="le"||R==="be")&&(B=R,R=10),this._init(Y||0,R||10,B||"be"))}typeof e=="object"?e.exports=T:b.BN=T,T.BN=T,T.wordSize=26;var N;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?N=window.Buffer:N=require("buffer").Buffer}catch{}T.isBN=function(R){return R instanceof T?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===T.wordSize&&Array.isArray(R.words)},T.max=function(R,B){return R.cmp(B)>0?R:B},T.min=function(R,B){return R.cmp(B)<0?R:B},T.prototype._init=function(R,B,V){if(typeof R=="number")return this._initNumber(R,B,V);if(typeof R=="object")return this._initArray(R,B,V);B==="hex"&&(B=16),w(B===(B|0)&&B>=2&&B<=36),R=R.toString().replace(/\s+/g,"");var Q=0;R[0]==="-"&&(Q++,this.negative=1),Q<R.length&&(B===16?this._parseHex(R,Q,V):(this._parseBase(R,B,Q),V==="le"&&this._initArray(this.toArray(),B,V)))},T.prototype._initNumber=function(R,B,V){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(w(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),V==="le"&&this._initArray(this.toArray(),B,V)},T.prototype._initArray=function(R,B,V){if(w(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var H,j,L=0;if(V==="be")for(Q=R.length-1,H=0;Q>=0;Q-=3)j=R[Q]|R[Q-1]<<8|R[Q-2]<<16,this.words[H]|=j<<L&67108863,this.words[H+1]=j>>>26-L&67108863,L+=24,L>=26&&(L-=26,H++);else if(V==="le")for(Q=0,H=0;Q<R.length;Q+=3)j=R[Q]|R[Q+1]<<8|R[Q+2]<<16,this.words[H]|=j<<L&67108863,this.words[H+1]=j>>>26-L&67108863,L+=24,L>=26&&(L-=26,H++);return this._strip()};function C(Y,R){var B=Y.charCodeAt(R);if(B>=48&&B<=57)return B-48;if(B>=65&&B<=70)return B-55;if(B>=97&&B<=102)return B-87;w(!1,"Invalid character in "+Y)}function F(Y,R,B){var V=C(Y,B);return B-1>=R&&(V|=C(Y,B-1)<<4),V}T.prototype._parseHex=function(R,B,V){this.length=Math.ceil((R.length-B)/6),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var H=0,j=0,L;if(V==="be")for(Q=R.length-1;Q>=B;Q-=2)L=F(R,B,Q)<<H,this.words[j]|=L&67108863,H>=18?(H-=18,j+=1,this.words[j]|=L>>>26):H+=8;else{var q=R.length-B;for(Q=q%2==0?B+1:B;Q<R.length;Q+=2)L=F(R,B,Q)<<H,this.words[j]|=L&67108863,H>=18?(H-=18,j+=1,this.words[j]|=L>>>26):H+=8}this._strip()};function G(Y,R,B,V){for(var Q=0,H=0,j=Math.min(Y.length,B),L=R;L<j;L++){var q=Y.charCodeAt(L)-48;Q*=V,q>=49?H=q-49+10:q>=17?H=q-17+10:H=q,w(q>=0&&H<V,"Invalid character"),Q+=H}return Q}T.prototype._parseBase=function(R,B,V){this.words=[0],this.length=1;for(var Q=0,H=1;H<=67108863;H*=B)Q++;Q--,H=H/B|0;for(var j=R.length-V,L=j%Q,q=Math.min(j,j-L)+V,U=0,oe=V;oe<q;oe+=Q)U=G(R,oe,oe+Q,B),this.imuln(H),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U);if(L!==0){var ve=1;for(U=G(R,oe,R.length,B),oe=0;oe<L;oe++)ve*=B;this.imuln(ve),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U)}this._strip()},T.prototype.copy=function(R){R.words=new Array(this.length);for(var B=0;B<this.length;B++)R.words[B]=this.words[B];R.length=this.length,R.negative=this.negative,R.red=this.red};function J(Y,R){Y.words=R.words,Y.length=R.length,Y.negative=R.negative,Y.red=R.red}if(T.prototype._move=function(R){J(R,this)},T.prototype.clone=function(){var R=new T(null);return this.copy(R),R},T.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},T.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol!="undefined"&&typeof Symbol.for=="function")try{T.prototype[Symbol.for("nodejs.util.inspect.custom")]=Z}catch{T.prototype.inspect=Z}else T.prototype.inspect=Z;function Z(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var re=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ie=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ue=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(R,B){R=R||10,B=B|0||1;var V;if(R===16||R==="hex"){V="";for(var Q=0,H=0,j=0;j<this.length;j++){var L=this.words[j],q=((L<<Q|H)&16777215).toString(16);H=L>>>24-Q&16777215,H!==0||j!==this.length-1?V=re[6-q.length]+q+V:V=q+V,Q+=2,Q>=26&&(Q-=26,j--)}for(H!==0&&(V=H.toString(16)+V);V.length%B!=0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}if(R===(R|0)&&R>=2&&R<=36){var U=ie[R],oe=ue[R];V="";var ve=this.clone();for(ve.negative=0;!ve.isZero();){var fe=ve.modrn(oe).toString(R);ve=ve.idivn(oe),ve.isZero()?V=fe+V:V=re[U-fe.length]+fe+V}for(this.isZero()&&(V="0"+V);V.length%B!=0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}w(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&w(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},T.prototype.toJSON=function(){return this.toString(16,2)},N&&(T.prototype.toBuffer=function(R,B){return this.toArrayLike(N,R,B)}),T.prototype.toArray=function(R,B){return this.toArrayLike(Array,R,B)};var ne=function(R,B){return R.allocUnsafe?R.allocUnsafe(B):new R(B)};T.prototype.toArrayLike=function(R,B,V){this._strip();var Q=this.byteLength(),H=V||Math.max(1,Q);w(Q<=H,"byte array longer than desired length"),w(H>0,"Requested array length <= 0");var j=ne(R,H),L=B==="le"?"LE":"BE";return this["_toArrayLike"+L](j,Q),j},T.prototype._toArrayLikeLE=function(R,B){for(var V=0,Q=0,H=0,j=0;H<this.length;H++){var L=this.words[H]<<j|Q;R[V++]=L&255,V<R.length&&(R[V++]=L>>8&255),V<R.length&&(R[V++]=L>>16&255),j===6?(V<R.length&&(R[V++]=L>>24&255),Q=0,j=0):(Q=L>>>24,j+=2)}if(V<R.length)for(R[V++]=Q;V<R.length;)R[V++]=0},T.prototype._toArrayLikeBE=function(R,B){for(var V=R.length-1,Q=0,H=0,j=0;H<this.length;H++){var L=this.words[H]<<j|Q;R[V--]=L&255,V>=0&&(R[V--]=L>>8&255),V>=0&&(R[V--]=L>>16&255),j===6?(V>=0&&(R[V--]=L>>24&255),Q=0,j=0):(Q=L>>>24,j+=2)}if(V>=0)for(R[V--]=Q;V>=0;)R[V--]=0},Math.clz32?T.prototype._countBits=function(R){return 32-Math.clz32(R)}:T.prototype._countBits=function(R){var B=R,V=0;return B>=4096&&(V+=13,B>>>=13),B>=64&&(V+=7,B>>>=7),B>=8&&(V+=4,B>>>=4),B>=2&&(V+=2,B>>>=2),V+B},T.prototype._zeroBits=function(R){if(R===0)return 26;var B=R,V=0;return(B&8191)==0&&(V+=13,B>>>=13),(B&127)==0&&(V+=7,B>>>=7),(B&15)==0&&(V+=4,B>>>=4),(B&3)==0&&(V+=2,B>>>=2),(B&1)==0&&V++,V},T.prototype.bitLength=function(){var R=this.words[this.length-1],B=this._countBits(R);return(this.length-1)*26+B};function ce(Y){for(var R=new Array(Y.bitLength()),B=0;B<R.length;B++){var V=B/26|0,Q=B%26;R[B]=Y.words[V]>>>Q&1}return R}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,B=0;B<this.length;B++){var V=this._zeroBits(this.words[B]);if(R+=V,V!==26)break}return R},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},T.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var B=0;B<R.length;B++)this.words[B]=this.words[B]|R.words[B];return this._strip()},T.prototype.ior=function(R){return w((this.negative|R.negative)==0),this.iuor(R)},T.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},T.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},T.prototype.iuand=function(R){var B;this.length>R.length?B=R:B=this;for(var V=0;V<B.length;V++)this.words[V]=this.words[V]&R.words[V];return this.length=B.length,this._strip()},T.prototype.iand=function(R){return w((this.negative|R.negative)==0),this.iuand(R)},T.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},T.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},T.prototype.iuxor=function(R){var B,V;this.length>R.length?(B=this,V=R):(B=R,V=this);for(var Q=0;Q<V.length;Q++)this.words[Q]=B.words[Q]^V.words[Q];if(this!==B)for(;Q<B.length;Q++)this.words[Q]=B.words[Q];return this.length=B.length,this._strip()},T.prototype.ixor=function(R){return w((this.negative|R.negative)==0),this.iuxor(R)},T.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},T.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},T.prototype.inotn=function(R){w(typeof R=="number"&&R>=0);var B=Math.ceil(R/26)|0,V=R%26;this._expand(B),V>0&&B--;for(var Q=0;Q<B;Q++)this.words[Q]=~this.words[Q]&67108863;return V>0&&(this.words[Q]=~this.words[Q]&67108863>>26-V),this._strip()},T.prototype.notn=function(R){return this.clone().inotn(R)},T.prototype.setn=function(R,B){w(typeof R=="number"&&R>=0);var V=R/26|0,Q=R%26;return this._expand(V+1),B?this.words[V]=this.words[V]|1<<Q:this.words[V]=this.words[V]&~(1<<Q),this._strip()},T.prototype.iadd=function(R){var B;if(this.negative!==0&&R.negative===0)return this.negative=0,B=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,B=this.isub(R),R.negative=1,B._normSign();var V,Q;this.length>R.length?(V=this,Q=R):(V=R,Q=this);for(var H=0,j=0;j<Q.length;j++)B=(V.words[j]|0)+(Q.words[j]|0)+H,this.words[j]=B&67108863,H=B>>>26;for(;H!==0&&j<V.length;j++)B=(V.words[j]|0)+H,this.words[j]=B&67108863,H=B>>>26;if(this.length=V.length,H!==0)this.words[this.length]=H,this.length++;else if(V!==this)for(;j<V.length;j++)this.words[j]=V.words[j];return this},T.prototype.add=function(R){var B;return R.negative!==0&&this.negative===0?(R.negative=0,B=this.sub(R),R.negative^=1,B):R.negative===0&&this.negative!==0?(this.negative=0,B=R.sub(this),this.negative=1,B):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},T.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var B=this.iadd(R);return R.negative=1,B._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var V=this.cmp(R);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Q,H;V>0?(Q=this,H=R):(Q=R,H=this);for(var j=0,L=0;L<H.length;L++)B=(Q.words[L]|0)-(H.words[L]|0)+j,j=B>>26,this.words[L]=B&67108863;for(;j!==0&&L<Q.length;L++)B=(Q.words[L]|0)+j,j=B>>26,this.words[L]=B&67108863;if(j===0&&L<Q.length&&Q!==this)for(;L<Q.length;L++)this.words[L]=Q.words[L];return this.length=Math.max(this.length,L),Q!==this&&(this.negative=1),this._strip()},T.prototype.sub=function(R){return this.clone().isub(R)};function ae(Y,R,B){B.negative=R.negative^Y.negative;var V=Y.length+R.length|0;B.length=V,V=V-1|0;var Q=Y.words[0]|0,H=R.words[0]|0,j=Q*H,L=j&67108863,q=j/67108864|0;B.words[0]=L;for(var U=1;U<V;U++){for(var oe=q>>>26,ve=q&67108863,fe=Math.min(U,R.length-1),Oe=Math.max(0,U-Y.length+1);Oe<=fe;Oe++){var Se=U-Oe|0;Q=Y.words[Se]|0,H=R.words[Oe]|0,j=Q*H+ve,oe+=j/67108864|0,ve=j&67108863}B.words[U]=ve|0,q=oe|0}return q!==0?B.words[U]=q|0:B.length--,B._strip()}var ye=function(R,B,V){var Q=R.words,H=B.words,j=V.words,L=0,q,U,oe,ve=Q[0]|0,fe=ve&8191,Oe=ve>>>13,Se=Q[1]|0,Te=Se&8191,Ae=Se>>>13,le=Q[2]|0,ke=le&8191,je=le>>>13,Ve=Q[3]|0,qe=Ve&8191,Ze=Ve>>>13,Pe=Q[4]|0,de=Pe&8191,me=Pe>>>13,Re=Q[5]|0,Fe=Re&8191,Ue=Re>>>13,ze=Q[6]|0,Qe=ze&8191,Ye=ze>>>13,ht=Q[7]|0,at=ht&8191,Ke=ht>>>13,kt=Q[8]|0,yt=kt&8191,ct=kt>>>13,Bt=Q[9]|0,Et=Bt&8191,et=Bt>>>13,Ft=H[0]|0,At=Ft&8191,Mt=Ft>>>13,Xt=H[1]|0,Dt=Xt&8191,lt=Xt>>>13,Yt=H[2]|0,jt=Yt&8191,Pt=Yt>>>13,Wt=H[3]|0,Ot=Wt&8191,dt=Wt>>>13,zt=H[4]|0,Ct=zt&8191,wt=zt>>>13,Kt=H[5]|0,mt=Kt&8191,pt=Kt>>>13,Jt=H[6]|0,ge=Jt&8191,Ee=Jt>>>13,Me=H[7]|0,se=Me&8191,Ie=Me>>>13,De=H[8]|0,Ge=De&8191,He=De>>>13,rt=H[9]|0,it=rt&8191,tt=rt>>>13;V.negative=R.negative^B.negative,V.length=19,q=Math.imul(fe,At),U=Math.imul(fe,Mt),U=U+Math.imul(Oe,At)|0,oe=Math.imul(Oe,Mt);var Vt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,q=Math.imul(Te,At),U=Math.imul(Te,Mt),U=U+Math.imul(Ae,At)|0,oe=Math.imul(Ae,Mt),q=q+Math.imul(fe,Dt)|0,U=U+Math.imul(fe,lt)|0,U=U+Math.imul(Oe,Dt)|0,oe=oe+Math.imul(Oe,lt)|0;var St=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(St>>>26)|0,St&=67108863,q=Math.imul(ke,At),U=Math.imul(ke,Mt),U=U+Math.imul(je,At)|0,oe=Math.imul(je,Mt),q=q+Math.imul(Te,Dt)|0,U=U+Math.imul(Te,lt)|0,U=U+Math.imul(Ae,Dt)|0,oe=oe+Math.imul(Ae,lt)|0,q=q+Math.imul(fe,jt)|0,U=U+Math.imul(fe,Pt)|0,U=U+Math.imul(Oe,jt)|0,oe=oe+Math.imul(Oe,Pt)|0;var Lt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,q=Math.imul(qe,At),U=Math.imul(qe,Mt),U=U+Math.imul(Ze,At)|0,oe=Math.imul(Ze,Mt),q=q+Math.imul(ke,Dt)|0,U=U+Math.imul(ke,lt)|0,U=U+Math.imul(je,Dt)|0,oe=oe+Math.imul(je,lt)|0,q=q+Math.imul(Te,jt)|0,U=U+Math.imul(Te,Pt)|0,U=U+Math.imul(Ae,jt)|0,oe=oe+Math.imul(Ae,Pt)|0,q=q+Math.imul(fe,Ot)|0,U=U+Math.imul(fe,dt)|0,U=U+Math.imul(Oe,Ot)|0,oe=oe+Math.imul(Oe,dt)|0;var _t=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(_t>>>26)|0,_t&=67108863,q=Math.imul(de,At),U=Math.imul(de,Mt),U=U+Math.imul(me,At)|0,oe=Math.imul(me,Mt),q=q+Math.imul(qe,Dt)|0,U=U+Math.imul(qe,lt)|0,U=U+Math.imul(Ze,Dt)|0,oe=oe+Math.imul(Ze,lt)|0,q=q+Math.imul(ke,jt)|0,U=U+Math.imul(ke,Pt)|0,U=U+Math.imul(je,jt)|0,oe=oe+Math.imul(je,Pt)|0,q=q+Math.imul(Te,Ot)|0,U=U+Math.imul(Te,dt)|0,U=U+Math.imul(Ae,Ot)|0,oe=oe+Math.imul(Ae,dt)|0,q=q+Math.imul(fe,Ct)|0,U=U+Math.imul(fe,wt)|0,U=U+Math.imul(Oe,Ct)|0,oe=oe+Math.imul(Oe,wt)|0;var Ut=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,q=Math.imul(Fe,At),U=Math.imul(Fe,Mt),U=U+Math.imul(Ue,At)|0,oe=Math.imul(Ue,Mt),q=q+Math.imul(de,Dt)|0,U=U+Math.imul(de,lt)|0,U=U+Math.imul(me,Dt)|0,oe=oe+Math.imul(me,lt)|0,q=q+Math.imul(qe,jt)|0,U=U+Math.imul(qe,Pt)|0,U=U+Math.imul(Ze,jt)|0,oe=oe+Math.imul(Ze,Pt)|0,q=q+Math.imul(ke,Ot)|0,U=U+Math.imul(ke,dt)|0,U=U+Math.imul(je,Ot)|0,oe=oe+Math.imul(je,dt)|0,q=q+Math.imul(Te,Ct)|0,U=U+Math.imul(Te,wt)|0,U=U+Math.imul(Ae,Ct)|0,oe=oe+Math.imul(Ae,wt)|0,q=q+Math.imul(fe,mt)|0,U=U+Math.imul(fe,pt)|0,U=U+Math.imul(Oe,mt)|0,oe=oe+Math.imul(Oe,pt)|0;var Ht=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,q=Math.imul(Qe,At),U=Math.imul(Qe,Mt),U=U+Math.imul(Ye,At)|0,oe=Math.imul(Ye,Mt),q=q+Math.imul(Fe,Dt)|0,U=U+Math.imul(Fe,lt)|0,U=U+Math.imul(Ue,Dt)|0,oe=oe+Math.imul(Ue,lt)|0,q=q+Math.imul(de,jt)|0,U=U+Math.imul(de,Pt)|0,U=U+Math.imul(me,jt)|0,oe=oe+Math.imul(me,Pt)|0,q=q+Math.imul(qe,Ot)|0,U=U+Math.imul(qe,dt)|0,U=U+Math.imul(Ze,Ot)|0,oe=oe+Math.imul(Ze,dt)|0,q=q+Math.imul(ke,Ct)|0,U=U+Math.imul(ke,wt)|0,U=U+Math.imul(je,Ct)|0,oe=oe+Math.imul(je,wt)|0,q=q+Math.imul(Te,mt)|0,U=U+Math.imul(Te,pt)|0,U=U+Math.imul(Ae,mt)|0,oe=oe+Math.imul(Ae,pt)|0,q=q+Math.imul(fe,ge)|0,U=U+Math.imul(fe,Ee)|0,U=U+Math.imul(Oe,ge)|0,oe=oe+Math.imul(Oe,Ee)|0;var Be=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Be>>>26)|0,Be&=67108863,q=Math.imul(at,At),U=Math.imul(at,Mt),U=U+Math.imul(Ke,At)|0,oe=Math.imul(Ke,Mt),q=q+Math.imul(Qe,Dt)|0,U=U+Math.imul(Qe,lt)|0,U=U+Math.imul(Ye,Dt)|0,oe=oe+Math.imul(Ye,lt)|0,q=q+Math.imul(Fe,jt)|0,U=U+Math.imul(Fe,Pt)|0,U=U+Math.imul(Ue,jt)|0,oe=oe+Math.imul(Ue,Pt)|0,q=q+Math.imul(de,Ot)|0,U=U+Math.imul(de,dt)|0,U=U+Math.imul(me,Ot)|0,oe=oe+Math.imul(me,dt)|0,q=q+Math.imul(qe,Ct)|0,U=U+Math.imul(qe,wt)|0,U=U+Math.imul(Ze,Ct)|0,oe=oe+Math.imul(Ze,wt)|0,q=q+Math.imul(ke,mt)|0,U=U+Math.imul(ke,pt)|0,U=U+Math.imul(je,mt)|0,oe=oe+Math.imul(je,pt)|0,q=q+Math.imul(Te,ge)|0,U=U+Math.imul(Te,Ee)|0,U=U+Math.imul(Ae,ge)|0,oe=oe+Math.imul(Ae,Ee)|0,q=q+Math.imul(fe,se)|0,U=U+Math.imul(fe,Ie)|0,U=U+Math.imul(Oe,se)|0,oe=oe+Math.imul(Oe,Ie)|0;var gt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(gt>>>26)|0,gt&=67108863,q=Math.imul(yt,At),U=Math.imul(yt,Mt),U=U+Math.imul(ct,At)|0,oe=Math.imul(ct,Mt),q=q+Math.imul(at,Dt)|0,U=U+Math.imul(at,lt)|0,U=U+Math.imul(Ke,Dt)|0,oe=oe+Math.imul(Ke,lt)|0,q=q+Math.imul(Qe,jt)|0,U=U+Math.imul(Qe,Pt)|0,U=U+Math.imul(Ye,jt)|0,oe=oe+Math.imul(Ye,Pt)|0,q=q+Math.imul(Fe,Ot)|0,U=U+Math.imul(Fe,dt)|0,U=U+Math.imul(Ue,Ot)|0,oe=oe+Math.imul(Ue,dt)|0,q=q+Math.imul(de,Ct)|0,U=U+Math.imul(de,wt)|0,U=U+Math.imul(me,Ct)|0,oe=oe+Math.imul(me,wt)|0,q=q+Math.imul(qe,mt)|0,U=U+Math.imul(qe,pt)|0,U=U+Math.imul(Ze,mt)|0,oe=oe+Math.imul(Ze,pt)|0,q=q+Math.imul(ke,ge)|0,U=U+Math.imul(ke,Ee)|0,U=U+Math.imul(je,ge)|0,oe=oe+Math.imul(je,Ee)|0,q=q+Math.imul(Te,se)|0,U=U+Math.imul(Te,Ie)|0,U=U+Math.imul(Ae,se)|0,oe=oe+Math.imul(Ae,Ie)|0,q=q+Math.imul(fe,Ge)|0,U=U+Math.imul(fe,He)|0,U=U+Math.imul(Oe,Ge)|0,oe=oe+Math.imul(Oe,He)|0;var bt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(bt>>>26)|0,bt&=67108863,q=Math.imul(Et,At),U=Math.imul(Et,Mt),U=U+Math.imul(et,At)|0,oe=Math.imul(et,Mt),q=q+Math.imul(yt,Dt)|0,U=U+Math.imul(yt,lt)|0,U=U+Math.imul(ct,Dt)|0,oe=oe+Math.imul(ct,lt)|0,q=q+Math.imul(at,jt)|0,U=U+Math.imul(at,Pt)|0,U=U+Math.imul(Ke,jt)|0,oe=oe+Math.imul(Ke,Pt)|0,q=q+Math.imul(Qe,Ot)|0,U=U+Math.imul(Qe,dt)|0,U=U+Math.imul(Ye,Ot)|0,oe=oe+Math.imul(Ye,dt)|0,q=q+Math.imul(Fe,Ct)|0,U=U+Math.imul(Fe,wt)|0,U=U+Math.imul(Ue,Ct)|0,oe=oe+Math.imul(Ue,wt)|0,q=q+Math.imul(de,mt)|0,U=U+Math.imul(de,pt)|0,U=U+Math.imul(me,mt)|0,oe=oe+Math.imul(me,pt)|0,q=q+Math.imul(qe,ge)|0,U=U+Math.imul(qe,Ee)|0,U=U+Math.imul(Ze,ge)|0,oe=oe+Math.imul(Ze,Ee)|0,q=q+Math.imul(ke,se)|0,U=U+Math.imul(ke,Ie)|0,U=U+Math.imul(je,se)|0,oe=oe+Math.imul(je,Ie)|0,q=q+Math.imul(Te,Ge)|0,U=U+Math.imul(Te,He)|0,U=U+Math.imul(Ae,Ge)|0,oe=oe+Math.imul(Ae,He)|0,q=q+Math.imul(fe,it)|0,U=U+Math.imul(fe,tt)|0,U=U+Math.imul(Oe,it)|0,oe=oe+Math.imul(Oe,tt)|0;var ot=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(ot>>>26)|0,ot&=67108863,q=Math.imul(Et,Dt),U=Math.imul(Et,lt),U=U+Math.imul(et,Dt)|0,oe=Math.imul(et,lt),q=q+Math.imul(yt,jt)|0,U=U+Math.imul(yt,Pt)|0,U=U+Math.imul(ct,jt)|0,oe=oe+Math.imul(ct,Pt)|0,q=q+Math.imul(at,Ot)|0,U=U+Math.imul(at,dt)|0,U=U+Math.imul(Ke,Ot)|0,oe=oe+Math.imul(Ke,dt)|0,q=q+Math.imul(Qe,Ct)|0,U=U+Math.imul(Qe,wt)|0,U=U+Math.imul(Ye,Ct)|0,oe=oe+Math.imul(Ye,wt)|0,q=q+Math.imul(Fe,mt)|0,U=U+Math.imul(Fe,pt)|0,U=U+Math.imul(Ue,mt)|0,oe=oe+Math.imul(Ue,pt)|0,q=q+Math.imul(de,ge)|0,U=U+Math.imul(de,Ee)|0,U=U+Math.imul(me,ge)|0,oe=oe+Math.imul(me,Ee)|0,q=q+Math.imul(qe,se)|0,U=U+Math.imul(qe,Ie)|0,U=U+Math.imul(Ze,se)|0,oe=oe+Math.imul(Ze,Ie)|0,q=q+Math.imul(ke,Ge)|0,U=U+Math.imul(ke,He)|0,U=U+Math.imul(je,Ge)|0,oe=oe+Math.imul(je,He)|0,q=q+Math.imul(Te,it)|0,U=U+Math.imul(Te,tt)|0,U=U+Math.imul(Ae,it)|0,oe=oe+Math.imul(Ae,tt)|0;var Nt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,q=Math.imul(Et,jt),U=Math.imul(Et,Pt),U=U+Math.imul(et,jt)|0,oe=Math.imul(et,Pt),q=q+Math.imul(yt,Ot)|0,U=U+Math.imul(yt,dt)|0,U=U+Math.imul(ct,Ot)|0,oe=oe+Math.imul(ct,dt)|0,q=q+Math.imul(at,Ct)|0,U=U+Math.imul(at,wt)|0,U=U+Math.imul(Ke,Ct)|0,oe=oe+Math.imul(Ke,wt)|0,q=q+Math.imul(Qe,mt)|0,U=U+Math.imul(Qe,pt)|0,U=U+Math.imul(Ye,mt)|0,oe=oe+Math.imul(Ye,pt)|0,q=q+Math.imul(Fe,ge)|0,U=U+Math.imul(Fe,Ee)|0,U=U+Math.imul(Ue,ge)|0,oe=oe+Math.imul(Ue,Ee)|0,q=q+Math.imul(de,se)|0,U=U+Math.imul(de,Ie)|0,U=U+Math.imul(me,se)|0,oe=oe+Math.imul(me,Ie)|0,q=q+Math.imul(qe,Ge)|0,U=U+Math.imul(qe,He)|0,U=U+Math.imul(Ze,Ge)|0,oe=oe+Math.imul(Ze,He)|0,q=q+Math.imul(ke,it)|0,U=U+Math.imul(ke,tt)|0,U=U+Math.imul(je,it)|0,oe=oe+Math.imul(je,tt)|0;var $t=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+($t>>>26)|0,$t&=67108863,q=Math.imul(Et,Ot),U=Math.imul(Et,dt),U=U+Math.imul(et,Ot)|0,oe=Math.imul(et,dt),q=q+Math.imul(yt,Ct)|0,U=U+Math.imul(yt,wt)|0,U=U+Math.imul(ct,Ct)|0,oe=oe+Math.imul(ct,wt)|0,q=q+Math.imul(at,mt)|0,U=U+Math.imul(at,pt)|0,U=U+Math.imul(Ke,mt)|0,oe=oe+Math.imul(Ke,pt)|0,q=q+Math.imul(Qe,ge)|0,U=U+Math.imul(Qe,Ee)|0,U=U+Math.imul(Ye,ge)|0,oe=oe+Math.imul(Ye,Ee)|0,q=q+Math.imul(Fe,se)|0,U=U+Math.imul(Fe,Ie)|0,U=U+Math.imul(Ue,se)|0,oe=oe+Math.imul(Ue,Ie)|0,q=q+Math.imul(de,Ge)|0,U=U+Math.imul(de,He)|0,U=U+Math.imul(me,Ge)|0,oe=oe+Math.imul(me,He)|0,q=q+Math.imul(qe,it)|0,U=U+Math.imul(qe,tt)|0,U=U+Math.imul(Ze,it)|0,oe=oe+Math.imul(Ze,tt)|0;var It=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(It>>>26)|0,It&=67108863,q=Math.imul(Et,Ct),U=Math.imul(Et,wt),U=U+Math.imul(et,Ct)|0,oe=Math.imul(et,wt),q=q+Math.imul(yt,mt)|0,U=U+Math.imul(yt,pt)|0,U=U+Math.imul(ct,mt)|0,oe=oe+Math.imul(ct,pt)|0,q=q+Math.imul(at,ge)|0,U=U+Math.imul(at,Ee)|0,U=U+Math.imul(Ke,ge)|0,oe=oe+Math.imul(Ke,Ee)|0,q=q+Math.imul(Qe,se)|0,U=U+Math.imul(Qe,Ie)|0,U=U+Math.imul(Ye,se)|0,oe=oe+Math.imul(Ye,Ie)|0,q=q+Math.imul(Fe,Ge)|0,U=U+Math.imul(Fe,He)|0,U=U+Math.imul(Ue,Ge)|0,oe=oe+Math.imul(Ue,He)|0,q=q+Math.imul(de,it)|0,U=U+Math.imul(de,tt)|0,U=U+Math.imul(me,it)|0,oe=oe+Math.imul(me,tt)|0;var Rt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,q=Math.imul(Et,mt),U=Math.imul(Et,pt),U=U+Math.imul(et,mt)|0,oe=Math.imul(et,pt),q=q+Math.imul(yt,ge)|0,U=U+Math.imul(yt,Ee)|0,U=U+Math.imul(ct,ge)|0,oe=oe+Math.imul(ct,Ee)|0,q=q+Math.imul(at,se)|0,U=U+Math.imul(at,Ie)|0,U=U+Math.imul(Ke,se)|0,oe=oe+Math.imul(Ke,Ie)|0,q=q+Math.imul(Qe,Ge)|0,U=U+Math.imul(Qe,He)|0,U=U+Math.imul(Ye,Ge)|0,oe=oe+Math.imul(Ye,He)|0,q=q+Math.imul(Fe,it)|0,U=U+Math.imul(Fe,tt)|0,U=U+Math.imul(Ue,it)|0,oe=oe+Math.imul(Ue,tt)|0;var xt=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(xt>>>26)|0,xt&=67108863,q=Math.imul(Et,ge),U=Math.imul(Et,Ee),U=U+Math.imul(et,ge)|0,oe=Math.imul(et,Ee),q=q+Math.imul(yt,se)|0,U=U+Math.imul(yt,Ie)|0,U=U+Math.imul(ct,se)|0,oe=oe+Math.imul(ct,Ie)|0,q=q+Math.imul(at,Ge)|0,U=U+Math.imul(at,He)|0,U=U+Math.imul(Ke,Ge)|0,oe=oe+Math.imul(Ke,He)|0,q=q+Math.imul(Qe,it)|0,U=U+Math.imul(Qe,tt)|0,U=U+Math.imul(Ye,it)|0,oe=oe+Math.imul(Ye,tt)|0;var We=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(We>>>26)|0,We&=67108863,q=Math.imul(Et,se),U=Math.imul(Et,Ie),U=U+Math.imul(et,se)|0,oe=Math.imul(et,Ie),q=q+Math.imul(yt,Ge)|0,U=U+Math.imul(yt,He)|0,U=U+Math.imul(ct,Ge)|0,oe=oe+Math.imul(ct,He)|0,q=q+Math.imul(at,it)|0,U=U+Math.imul(at,tt)|0,U=U+Math.imul(Ke,it)|0,oe=oe+Math.imul(Ke,tt)|0;var Je=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(Je>>>26)|0,Je&=67108863,q=Math.imul(Et,Ge),U=Math.imul(Et,He),U=U+Math.imul(et,Ge)|0,oe=Math.imul(et,He),q=q+Math.imul(yt,it)|0,U=U+Math.imul(yt,tt)|0,U=U+Math.imul(ct,it)|0,oe=oe+Math.imul(ct,tt)|0;var ft=(L+q|0)+((U&8191)<<13)|0;L=(oe+(U>>>13)|0)+(ft>>>26)|0,ft&=67108863,q=Math.imul(Et,it),U=Math.imul(Et,tt),U=U+Math.imul(et,it)|0,oe=Math.imul(et,tt);var nt=(L+q|0)+((U&8191)<<13)|0;return L=(oe+(U>>>13)|0)+(nt>>>26)|0,nt&=67108863,j[0]=Vt,j[1]=St,j[2]=Lt,j[3]=_t,j[4]=Ut,j[5]=Ht,j[6]=Be,j[7]=gt,j[8]=bt,j[9]=ot,j[10]=Nt,j[11]=$t,j[12]=It,j[13]=Rt,j[14]=xt,j[15]=We,j[16]=Je,j[17]=ft,j[18]=nt,L!==0&&(j[19]=L,V.length++),V};Math.imul||(ye=ae);function $e(Y,R,B){B.negative=R.negative^Y.negative,B.length=Y.length+R.length;for(var V=0,Q=0,H=0;H<B.length-1;H++){var j=Q;Q=0;for(var L=V&67108863,q=Math.min(H,R.length-1),U=Math.max(0,H-Y.length+1);U<=q;U++){var oe=H-U,ve=Y.words[oe]|0,fe=R.words[U]|0,Oe=ve*fe,Se=Oe&67108863;j=j+(Oe/67108864|0)|0,Se=Se+L|0,L=Se&67108863,j=j+(Se>>>26)|0,Q+=j>>>26,j&=67108863}B.words[H]=L,V=j,j=Q}return V!==0?B.words[H]=V:B.length--,B._strip()}function _e(Y,R,B){return $e(Y,R,B)}T.prototype.mulTo=function(R,B){var V,Q=this.length+R.length;return this.length===10&&R.length===10?V=ye(this,R,B):Q<63?V=ae(this,R,B):Q<1024?V=$e(this,R,B):V=_e(this,R,B),V},T.prototype.mul=function(R){var B=new T(null);return B.words=new Array(this.length+R.length),this.mulTo(R,B)},T.prototype.mulf=function(R){var B=new T(null);return B.words=new Array(this.length+R.length),_e(this,R,B)},T.prototype.imul=function(R){return this.clone().mulTo(R,this)},T.prototype.imuln=function(R){var B=R<0;B&&(R=-R),w(typeof R=="number"),w(R<67108864);for(var V=0,Q=0;Q<this.length;Q++){var H=(this.words[Q]|0)*R,j=(H&67108863)+(V&67108863);V>>=26,V+=H/67108864|0,V+=j>>>26,this.words[Q]=j&67108863}return V!==0&&(this.words[Q]=V,this.length++),B?this.ineg():this},T.prototype.muln=function(R){return this.clone().imuln(R)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(R){var B=ce(R);if(B.length===0)return new T(1);for(var V=this,Q=0;Q<B.length&&B[Q]===0;Q++,V=V.sqr());if(++Q<B.length)for(var H=V.sqr();Q<B.length;Q++,H=H.sqr())B[Q]!==0&&(V=V.mul(H));return V},T.prototype.iushln=function(R){w(typeof R=="number"&&R>=0);var B=R%26,V=(R-B)/26,Q=67108863>>>26-B<<26-B,H;if(B!==0){var j=0;for(H=0;H<this.length;H++){var L=this.words[H]&Q,q=(this.words[H]|0)-L<<B;this.words[H]=q|j,j=L>>>26-B}j&&(this.words[H]=j,this.length++)}if(V!==0){for(H=this.length-1;H>=0;H--)this.words[H+V]=this.words[H];for(H=0;H<V;H++)this.words[H]=0;this.length+=V}return this._strip()},T.prototype.ishln=function(R){return w(this.negative===0),this.iushln(R)},T.prototype.iushrn=function(R,B,V){w(typeof R=="number"&&R>=0);var Q;B?Q=(B-B%26)/26:Q=0;var H=R%26,j=Math.min((R-H)/26,this.length),L=67108863^67108863>>>H<<H,q=V;if(Q-=j,Q=Math.max(0,Q),q){for(var U=0;U<j;U++)q.words[U]=this.words[U];q.length=j}if(j!==0)if(this.length>j)for(this.length-=j,U=0;U<this.length;U++)this.words[U]=this.words[U+j];else this.words[0]=0,this.length=1;var oe=0;for(U=this.length-1;U>=0&&(oe!==0||U>=Q);U--){var ve=this.words[U]|0;this.words[U]=oe<<26-H|ve>>>H,oe=ve&L}return q&&oe!==0&&(q.words[q.length++]=oe),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},T.prototype.ishrn=function(R,B,V){return w(this.negative===0),this.iushrn(R,B,V)},T.prototype.shln=function(R){return this.clone().ishln(R)},T.prototype.ushln=function(R){return this.clone().iushln(R)},T.prototype.shrn=function(R){return this.clone().ishrn(R)},T.prototype.ushrn=function(R){return this.clone().iushrn(R)},T.prototype.testn=function(R){w(typeof R=="number"&&R>=0);var B=R%26,V=(R-B)/26,Q=1<<B;if(this.length<=V)return!1;var H=this.words[V];return!!(H&Q)},T.prototype.imaskn=function(R){w(typeof R=="number"&&R>=0);var B=R%26,V=(R-B)/26;if(w(this.negative===0,"imaskn works only with positive numbers"),this.length<=V)return this;if(B!==0&&V++,this.length=Math.min(V,this.length),B!==0){var Q=67108863^67108863>>>B<<B;this.words[this.length-1]&=Q}return this._strip()},T.prototype.maskn=function(R){return this.clone().imaskn(R)},T.prototype.iaddn=function(R){return w(typeof R=="number"),w(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<=R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},T.prototype._iaddn=function(R){this.words[0]+=R;for(var B=0;B<this.length&&this.words[B]>=67108864;B++)this.words[B]-=67108864,B===this.length-1?this.words[B+1]=1:this.words[B+1]++;return this.length=Math.max(this.length,B+1),this},T.prototype.isubn=function(R){if(w(typeof R=="number"),w(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var B=0;B<this.length&&this.words[B]<0;B++)this.words[B]+=67108864,this.words[B+1]-=1;return this._strip()},T.prototype.addn=function(R){return this.clone().iaddn(R)},T.prototype.subn=function(R){return this.clone().isubn(R)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(R,B,V){var Q=R.length+V,H;this._expand(Q);var j,L=0;for(H=0;H<R.length;H++){j=(this.words[H+V]|0)+L;var q=(R.words[H]|0)*B;j-=q&67108863,L=(j>>26)-(q/67108864|0),this.words[H+V]=j&67108863}for(;H<this.length-V;H++)j=(this.words[H+V]|0)+L,L=j>>26,this.words[H+V]=j&67108863;if(L===0)return this._strip();for(w(L===-1),L=0,H=0;H<this.length;H++)j=-(this.words[H]|0)+L,L=j>>26,this.words[H]=j&67108863;return this.negative=1,this._strip()},T.prototype._wordDiv=function(R,B){var V=this.length-R.length,Q=this.clone(),H=R,j=H.words[H.length-1]|0,L=this._countBits(j);V=26-L,V!==0&&(H=H.ushln(V),Q.iushln(V),j=H.words[H.length-1]|0);var q=Q.length-H.length,U;if(B!=="mod"){U=new T(null),U.length=q+1,U.words=new Array(U.length);for(var oe=0;oe<U.length;oe++)U.words[oe]=0}var ve=Q.clone()._ishlnsubmul(H,1,q);ve.negative===0&&(Q=ve,U&&(U.words[q]=1));for(var fe=q-1;fe>=0;fe--){var Oe=(Q.words[H.length+fe]|0)*67108864+(Q.words[H.length+fe-1]|0);for(Oe=Math.min(Oe/j|0,67108863),Q._ishlnsubmul(H,Oe,fe);Q.negative!==0;)Oe--,Q.negative=0,Q._ishlnsubmul(H,1,fe),Q.isZero()||(Q.negative^=1);U&&(U.words[fe]=Oe)}return U&&U._strip(),Q._strip(),B!=="div"&&V!==0&&Q.iushrn(V),{div:U||null,mod:Q}},T.prototype.divmod=function(R,B,V){if(w(!R.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var Q,H,j;return this.negative!==0&&R.negative===0?(j=this.neg().divmod(R,B),B!=="mod"&&(Q=j.div.neg()),B!=="div"&&(H=j.mod.neg(),V&&H.negative!==0&&H.iadd(R)),{div:Q,mod:H}):this.negative===0&&R.negative!==0?(j=this.divmod(R.neg(),B),B!=="mod"&&(Q=j.div.neg()),{div:Q,mod:j.mod}):(this.negative&R.negative)!=0?(j=this.neg().divmod(R.neg(),B),B!=="div"&&(H=j.mod.neg(),V&&H.negative!==0&&H.isub(R)),{div:j.div,mod:H}):R.length>this.length||this.cmp(R)<0?{div:new T(0),mod:this}:R.length===1?B==="div"?{div:this.divn(R.words[0]),mod:null}:B==="mod"?{div:null,mod:new T(this.modrn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new T(this.modrn(R.words[0]))}:this._wordDiv(R,B)},T.prototype.div=function(R){return this.divmod(R,"div",!1).div},T.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},T.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},T.prototype.divRound=function(R){var B=this.divmod(R);if(B.mod.isZero())return B.div;var V=B.div.negative!==0?B.mod.isub(R):B.mod,Q=R.ushrn(1),H=R.andln(1),j=V.cmp(Q);return j<0||H===1&&j===0?B.div:B.div.negative!==0?B.div.isubn(1):B.div.iaddn(1)},T.prototype.modrn=function(R){var B=R<0;B&&(R=-R),w(R<=67108863);for(var V=(1<<26)%R,Q=0,H=this.length-1;H>=0;H--)Q=(V*Q+(this.words[H]|0))%R;return B?-Q:Q},T.prototype.modn=function(R){return this.modrn(R)},T.prototype.idivn=function(R){var B=R<0;B&&(R=-R),w(R<=67108863);for(var V=0,Q=this.length-1;Q>=0;Q--){var H=(this.words[Q]|0)+V*67108864;this.words[Q]=H/R|0,V=H%R}return this._strip(),B?this.ineg():this},T.prototype.divn=function(R){return this.clone().idivn(R)},T.prototype.egcd=function(R){w(R.negative===0),w(!R.isZero());var B=this,V=R.clone();B.negative!==0?B=B.umod(R):B=B.clone();for(var Q=new T(1),H=new T(0),j=new T(0),L=new T(1),q=0;B.isEven()&&V.isEven();)B.iushrn(1),V.iushrn(1),++q;for(var U=V.clone(),oe=B.clone();!B.isZero();){for(var ve=0,fe=1;(B.words[0]&fe)==0&&ve<26;++ve,fe<<=1);if(ve>0)for(B.iushrn(ve);ve-- >0;)(Q.isOdd()||H.isOdd())&&(Q.iadd(U),H.isub(oe)),Q.iushrn(1),H.iushrn(1);for(var Oe=0,Se=1;(V.words[0]&Se)==0&&Oe<26;++Oe,Se<<=1);if(Oe>0)for(V.iushrn(Oe);Oe-- >0;)(j.isOdd()||L.isOdd())&&(j.iadd(U),L.isub(oe)),j.iushrn(1),L.iushrn(1);B.cmp(V)>=0?(B.isub(V),Q.isub(j),H.isub(L)):(V.isub(B),j.isub(Q),L.isub(H))}return{a:j,b:L,gcd:V.iushln(q)}},T.prototype._invmp=function(R){w(R.negative===0),w(!R.isZero());var B=this,V=R.clone();B.negative!==0?B=B.umod(R):B=B.clone();for(var Q=new T(1),H=new T(0),j=V.clone();B.cmpn(1)>0&&V.cmpn(1)>0;){for(var L=0,q=1;(B.words[0]&q)==0&&L<26;++L,q<<=1);if(L>0)for(B.iushrn(L);L-- >0;)Q.isOdd()&&Q.iadd(j),Q.iushrn(1);for(var U=0,oe=1;(V.words[0]&oe)==0&&U<26;++U,oe<<=1);if(U>0)for(V.iushrn(U);U-- >0;)H.isOdd()&&H.iadd(j),H.iushrn(1);B.cmp(V)>=0?(B.isub(V),Q.isub(H)):(V.isub(B),H.isub(Q))}var ve;return B.cmpn(1)===0?ve=Q:ve=H,ve.cmpn(0)<0&&ve.iadd(R),ve},T.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var B=this.clone(),V=R.clone();B.negative=0,V.negative=0;for(var Q=0;B.isEven()&&V.isEven();Q++)B.iushrn(1),V.iushrn(1);do{for(;B.isEven();)B.iushrn(1);for(;V.isEven();)V.iushrn(1);var H=B.cmp(V);if(H<0){var j=B;B=V,V=j}else if(H===0||V.cmpn(1)===0)break;B.isub(V)}while(!0);return V.iushln(Q)},T.prototype.invm=function(R){return this.egcd(R).a.umod(R)},T.prototype.isEven=function(){return(this.words[0]&1)==0},T.prototype.isOdd=function(){return(this.words[0]&1)==1},T.prototype.andln=function(R){return this.words[0]&R},T.prototype.bincn=function(R){w(typeof R=="number");var B=R%26,V=(R-B)/26,Q=1<<B;if(this.length<=V)return this._expand(V+1),this.words[V]|=Q,this;for(var H=Q,j=V;H!==0&&j<this.length;j++){var L=this.words[j]|0;L+=H,H=L>>>26,L&=67108863,this.words[j]=L}return H!==0&&(this.words[j]=H,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(R){var B=R<0;if(this.negative!==0&&!B)return-1;if(this.negative===0&&B)return 1;this._strip();var V;if(this.length>1)V=1;else{B&&(R=-R),w(R<=67108863,"Number is too big");var Q=this.words[0]|0;V=Q===R?0:Q<R?-1:1}return this.negative!==0?-V|0:V},T.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var B=this.ucmp(R);return this.negative!==0?-B|0:B},T.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var B=0,V=this.length-1;V>=0;V--){var Q=this.words[V]|0,H=R.words[V]|0;if(Q!==H){Q<H?B=-1:Q>H&&(B=1);break}}return B},T.prototype.gtn=function(R){return this.cmpn(R)===1},T.prototype.gt=function(R){return this.cmp(R)===1},T.prototype.gten=function(R){return this.cmpn(R)>=0},T.prototype.gte=function(R){return this.cmp(R)>=0},T.prototype.ltn=function(R){return this.cmpn(R)===-1},T.prototype.lt=function(R){return this.cmp(R)===-1},T.prototype.lten=function(R){return this.cmpn(R)<=0},T.prototype.lte=function(R){return this.cmp(R)<=0},T.prototype.eqn=function(R){return this.cmpn(R)===0},T.prototype.eq=function(R){return this.cmp(R)===0},T.red=function(R){return new pe(R)},T.prototype.toRed=function(R){return w(!this.red,"Already a number in reduction context"),w(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},T.prototype.fromRed=function(){return w(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(R){return this.red=R,this},T.prototype.forceRed=function(R){return w(!this.red,"Already a number in reduction context"),this._forceRed(R)},T.prototype.redAdd=function(R){return w(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},T.prototype.redIAdd=function(R){return w(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},T.prototype.redSub=function(R){return w(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},T.prototype.redISub=function(R){return w(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},T.prototype.redShl=function(R){return w(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},T.prototype.redMul=function(R){return w(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},T.prototype.redIMul=function(R){return w(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},T.prototype.redSqr=function(){return w(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return w(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return w(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return w(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return w(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(R){return w(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var be={k256:null,p224:null,p192:null,p25519:null};function xe(Y,R){this.name=Y,this.p=new T(R,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}xe.prototype._tmp=function(){var R=new T(null);return R.words=new Array(Math.ceil(this.n/13)),R},xe.prototype.ireduce=function(R){var B=R,V;do this.split(B,this.tmp),B=this.imulK(B),B=B.iadd(this.tmp),V=B.bitLength();while(V>this.n);var Q=V<this.n?-1:B.ucmp(this.p);return Q===0?(B.words[0]=0,B.length=1):Q>0?B.isub(this.p):B.strip!==void 0?B.strip():B._strip(),B},xe.prototype.split=function(R,B){R.iushrn(this.n,0,B)},xe.prototype.imulK=function(R){return R.imul(this.k)};function ee(){xe.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(ee,xe),ee.prototype.split=function(R,B){for(var V=4194303,Q=Math.min(R.length,9),H=0;H<Q;H++)B.words[H]=R.words[H];if(B.length=Q,R.length<=9){R.words[0]=0,R.length=1;return}var j=R.words[9];for(B.words[B.length++]=j&V,H=10;H<R.length;H++){var L=R.words[H]|0;R.words[H-10]=(L&V)<<4|j>>>22,j=L}j>>>=22,R.words[H-10]=j,j===0&&R.length>10?R.length-=10:R.length-=9},ee.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var B=0,V=0;V<R.length;V++){var Q=R.words[V]|0;B+=Q*977,R.words[V]=B&67108863,B=Q*64+(B/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R};function he(){xe.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(he,xe);function we(){xe.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(we,xe);function Ne(){xe.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(Ne,xe),Ne.prototype.imulK=function(R){for(var B=0,V=0;V<R.length;V++){var Q=(R.words[V]|0)*19+B,H=Q&67108863;Q>>>=26,R.words[V]=H,B=Q}return B!==0&&(R.words[R.length++]=B),R},T._prime=function(R){if(be[R])return be[R];var B;if(R==="k256")B=new ee;else if(R==="p224")B=new he;else if(R==="p192")B=new we;else if(R==="p25519")B=new Ne;else throw new Error("Unknown prime "+R);return be[R]=B,B};function pe(Y){if(typeof Y=="string"){var R=T._prime(Y);this.m=R.p,this.prime=R}else w(Y.gtn(1),"modulus must be greater than 1"),this.m=Y,this.prime=null}pe.prototype._verify1=function(R){w(R.negative===0,"red works only with positives"),w(R.red,"red works only with red numbers")},pe.prototype._verify2=function(R,B){w((R.negative|B.negative)==0,"red works only with positives"),w(R.red&&R.red===B.red,"red works only with red numbers")},pe.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):(J(R,R.umod(this.m)._forceRed(this)),R)},pe.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},pe.prototype.add=function(R,B){this._verify2(R,B);var V=R.add(B);return V.cmp(this.m)>=0&&V.isub(this.m),V._forceRed(this)},pe.prototype.iadd=function(R,B){this._verify2(R,B);var V=R.iadd(B);return V.cmp(this.m)>=0&&V.isub(this.m),V},pe.prototype.sub=function(R,B){this._verify2(R,B);var V=R.sub(B);return V.cmpn(0)<0&&V.iadd(this.m),V._forceRed(this)},pe.prototype.isub=function(R,B){this._verify2(R,B);var V=R.isub(B);return V.cmpn(0)<0&&V.iadd(this.m),V},pe.prototype.shl=function(R,B){return this._verify1(R),this.imod(R.ushln(B))},pe.prototype.imul=function(R,B){return this._verify2(R,B),this.imod(R.imul(B))},pe.prototype.mul=function(R,B){return this._verify2(R,B),this.imod(R.mul(B))},pe.prototype.isqr=function(R){return this.imul(R,R.clone())},pe.prototype.sqr=function(R){return this.mul(R,R)},pe.prototype.sqrt=function(R){if(R.isZero())return R.clone();var B=this.m.andln(3);if(w(B%2==1),B===3){var V=this.m.add(new T(1)).iushrn(2);return this.pow(R,V)}for(var Q=this.m.subn(1),H=0;!Q.isZero()&&Q.andln(1)===0;)H++,Q.iushrn(1);w(!Q.isZero());var j=new T(1).toRed(this),L=j.redNeg(),q=this.m.subn(1).iushrn(1),U=this.m.bitLength();for(U=new T(2*U*U).toRed(this);this.pow(U,q).cmp(L)!==0;)U.redIAdd(L);for(var oe=this.pow(U,Q),ve=this.pow(R,Q.addn(1).iushrn(1)),fe=this.pow(R,Q),Oe=H;fe.cmp(j)!==0;){for(var Se=fe,Te=0;Se.cmp(j)!==0;Te++)Se=Se.redSqr();w(Te<Oe);var Ae=this.pow(oe,new T(1).iushln(Oe-Te-1));ve=ve.redMul(Ae),oe=Ae.redSqr(),fe=fe.redMul(oe),Oe=Te}return ve},pe.prototype.invm=function(R){var B=R._invmp(this.m);return B.negative!==0?(B.negative=0,this.imod(B).redNeg()):this.imod(B)},pe.prototype.pow=function(R,B){if(B.isZero())return new T(1).toRed(this);if(B.cmpn(1)===0)return R.clone();var V=4,Q=new Array(1<<V);Q[0]=new T(1).toRed(this),Q[1]=R;for(var H=2;H<Q.length;H++)Q[H]=this.mul(Q[H-1],R);var j=Q[0],L=0,q=0,U=B.bitLength()%26;for(U===0&&(U=26),H=B.length-1;H>=0;H--){for(var oe=B.words[H],ve=U-1;ve>=0;ve--){var fe=oe>>ve&1;if(j!==Q[0]&&(j=this.sqr(j)),fe===0&&L===0){q=0;continue}L<<=1,L|=fe,q++,!(q!==V&&(H!==0||ve!==0))&&(j=this.mul(j,Q[L]),q=0,L=0)}U=26}return j},pe.prototype.convertTo=function(R){var B=R.umod(this.m);return B===R?B.clone():B},pe.prototype.convertFrom=function(R){var B=R.clone();return B.red=null,B},T.mont=function(R){return new te(R)};function te(Y){pe.call(this,Y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(te,pe),te.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},te.prototype.convertFrom=function(R){var B=this.imod(R.mul(this.rinv));return B.red=null,B},te.prototype.imul=function(R,B){if(R.isZero()||B.isZero())return R.words[0]=0,R.length=1,R;var V=R.imul(B),Q=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=V.isub(Q).iushrn(this.shift),j=H;return H.cmp(this.m)>=0?j=H.isub(this.m):H.cmpn(0)<0&&(j=H.iadd(this.m)),j._forceRed(this)},te.prototype.mul=function(R,B){if(R.isZero()||B.isZero())return new T(0)._forceRed(this);var V=R.mul(B),Q=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=V.isub(Q).iushrn(this.shift),j=H;return H.cmp(this.m)>=0?j=H.isub(this.m):H.cmpn(0)<0&&(j=H.iadd(this.m)),j._forceRed(this)},te.prototype.invm=function(R){var B=this.imod(R._invmp(this.m).mul(this.r2));return B._forceRed(this)}})(t,commonjsGlobal)})(bn);(function(t){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const b=e(bn.exports);t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=new b.default("10",10).pow(new b.default(t.NEAR_NOMINATION_EXP,10));const w=[],$=new b.default(10);for(let Z=0,re=new b.default(5);Z<t.NEAR_NOMINATION_EXP;Z++,re=re.mul($))w[Z]=re;function T(Z,re=t.NEAR_NOMINATION_EXP){const ie=new b.default(Z,10);if(re!==t.NEAR_NOMINATION_EXP){const ce=t.NEAR_NOMINATION_EXP-re-1;ce>0&&ie.iadd(w[ce])}Z=ie.toString();const ue=Z.substring(0,Z.length-t.NEAR_NOMINATION_EXP)||"0",ne=Z.substring(Z.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,re);return F(`${J(ue)}.${ne}`)}t.formatNearAmount=T;function N(Z){if(!Z)return null;Z=C(Z);const re=Z.split("."),ie=re[0],ue=re[1]||"";if(re.length>2||ue.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${Z}' as NEAR amount`);return G(ie+ue.padEnd(t.NEAR_NOMINATION_EXP,"0"))}t.parseNearAmount=N;function C(Z){return Z.replace(/,/g,"").trim()}function F(Z){return Z.replace(/\.?0*$/,"")}function G(Z){return Z=Z.replace(/^0+/,""),Z===""?"0":Z}function J(Z){const re=/(-?\d+)(\d{3})/;for(;re.test(Z);)Z=Z.replace(re,"$1,$2");return Z}})(format$4);(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(re,ie,ue,ne){ne===void 0&&(ne=ue),Object.defineProperty(re,ne,{enumerable:!0,get:function(){return ie[ue]}})}:function(re,ie,ue,ne){ne===void 0&&(ne=ue),re[ne]=ie[ue]}),b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(re,ie){Object.defineProperty(re,"default",{enumerable:!0,value:ie})}:function(re,ie){re.default=ie}),w=commonjsGlobal&&commonjsGlobal.__importStar||function(re){if(re&&re.__esModule)return re;var ie={};if(re!=null)for(var ue in re)ue!=="default"&&Object.hasOwnProperty.call(re,ue)&&e(ie,re,ue);return b(ie,re),ie};Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.web=t.serialize=t.key_pair=void 0;const $=w(key_pair);t.key_pair=$;const T=w(serialize$2);t.serialize=T;const N=w(web);t.web=N;const C=w(enums);t.enums=C;const F=w(format$4);t.format=F;const G=w(rpc_errors);t.rpc_errors=G;const J=key_pair;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return J.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return J.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return J.KeyPairEd25519}});const Z=errors;Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return Z.logWarning}})})(utils$k);var transaction={},sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(b){return new Sha256(e,!0).update(b)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function($){return e.create().update($)};for(var b=0;b<OUTPUT_TYPES.length;++b){var w=OUTPUT_TYPES[b];e[w]=createOutputMethod(w,t)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if(typeof t=="string")return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(t==null)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(b,w){return new HmacSha256(b,e,!0).update(w)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function($){return new HmacSha256($,t)},e.update=function($,T){return e.create($).update(T)};for(var b=0;b<OUTPUT_TYPES.length;++b){var w=OUTPUT_TYPES[b];e[w]=createHmacOutputMethod(w,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Sha256.prototype.update=function(t){if(!this.finalized){var e,b=typeof t;if(b!=="string"){if(b==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var w,$=0,T,N=t.length,C=this.blocks;$<N;){if(this.hashed&&(this.hashed=!1,C[0]=this.block,C[16]=C[1]=C[2]=C[3]=C[4]=C[5]=C[6]=C[7]=C[8]=C[9]=C[10]=C[11]=C[12]=C[13]=C[14]=C[15]=0),e)for(T=this.start;$<N&&T<64;++$)C[T>>2]|=t[$]<<SHIFT[T++&3];else for(T=this.start;$<N&&T<64;++$)w=t.charCodeAt($),w<128?C[T>>2]|=w<<SHIFT[T++&3]:w<2048?(C[T>>2]|=(192|w>>6)<<SHIFT[T++&3],C[T>>2]|=(128|w&63)<<SHIFT[T++&3]):w<55296||w>=57344?(C[T>>2]|=(224|w>>12)<<SHIFT[T++&3],C[T>>2]|=(128|w>>6&63)<<SHIFT[T++&3],C[T>>2]|=(128|w&63)<<SHIFT[T++&3]):(w=65536+((w&1023)<<10|t.charCodeAt(++$)&1023),C[T>>2]|=(240|w>>18)<<SHIFT[T++&3],C[T>>2]|=(128|w>>12&63)<<SHIFT[T++&3],C[T>>2]|=(128|w>>6&63)<<SHIFT[T++&3],C[T>>2]|=(128|w&63)<<SHIFT[T++&3]);this.lastByteIndex=T,this.bytes+=T-this.start,T>=64?(this.block=C[16],this.start=T-64,this.hash(),this.hashed=!0):this.start=T}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t=this.h0,e=this.h1,b=this.h2,w=this.h3,$=this.h4,T=this.h5,N=this.h6,C=this.h7,F=this.blocks,G,J,Z,re,ie,ue,ne,ce,ae,ye,$e;for(G=16;G<64;++G)ie=F[G-15],J=(ie>>>7|ie<<25)^(ie>>>18|ie<<14)^ie>>>3,ie=F[G-2],Z=(ie>>>17|ie<<15)^(ie>>>19|ie<<13)^ie>>>10,F[G]=F[G-16]+J+F[G-7]+Z<<0;for($e=e&b,G=0;G<64;G+=4)this.first?(this.is224?(ce=300032,ie=F[0]-1413257819,C=ie-150054599<<0,w=ie+24177077<<0):(ce=704751109,ie=F[0]-210244248,C=ie-1521486534<<0,w=ie+143694565<<0),this.first=!1):(J=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),Z=($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7),ce=t&e,re=ce^t&b^$e,ne=$&T^~$&N,ie=C+Z+ne+K[G]+F[G],ue=J+re,C=w+ie<<0,w=ie+ue<<0),J=(w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10),Z=(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7),ae=w&t,re=ae^w&e^ce,ne=C&$^~C&T,ie=N+Z+ne+K[G+1]+F[G+1],ue=J+re,N=b+ie<<0,b=ie+ue<<0,J=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),Z=(N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7),ye=b&w,re=ye^b&t^ae,ne=N&C^~N&$,ie=T+Z+ne+K[G+2]+F[G+2],ue=J+re,T=e+ie<<0,e=ie+ue<<0,J=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),Z=(T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7),$e=e&b,re=$e^e&w^ye,ne=T&N^~T&C,ie=$+Z+ne+K[G+3]+F[G+3],ue=J+re,$=t+ie<<0,t=ie+ue<<0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+b<<0,this.h3=this.h3+w<<0,this.h4=this.h4+$<<0,this.h5=this.h5+T<<0,this.h6=this.h6+N<<0,this.h7=this.h7+C<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,b=this.h2,w=this.h3,$=this.h4,T=this.h5,N=this.h6,C=this.h7,F=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[b>>28&15]+HEX_CHARS[b>>24&15]+HEX_CHARS[b>>20&15]+HEX_CHARS[b>>16&15]+HEX_CHARS[b>>12&15]+HEX_CHARS[b>>8&15]+HEX_CHARS[b>>4&15]+HEX_CHARS[b&15]+HEX_CHARS[w>>28&15]+HEX_CHARS[w>>24&15]+HEX_CHARS[w>>20&15]+HEX_CHARS[w>>16&15]+HEX_CHARS[w>>12&15]+HEX_CHARS[w>>8&15]+HEX_CHARS[w>>4&15]+HEX_CHARS[w&15]+HEX_CHARS[$>>28&15]+HEX_CHARS[$>>24&15]+HEX_CHARS[$>>20&15]+HEX_CHARS[$>>16&15]+HEX_CHARS[$>>12&15]+HEX_CHARS[$>>8&15]+HEX_CHARS[$>>4&15]+HEX_CHARS[$&15]+HEX_CHARS[T>>28&15]+HEX_CHARS[T>>24&15]+HEX_CHARS[T>>20&15]+HEX_CHARS[T>>16&15]+HEX_CHARS[T>>12&15]+HEX_CHARS[T>>8&15]+HEX_CHARS[T>>4&15]+HEX_CHARS[T&15]+HEX_CHARS[N>>28&15]+HEX_CHARS[N>>24&15]+HEX_CHARS[N>>20&15]+HEX_CHARS[N>>16&15]+HEX_CHARS[N>>12&15]+HEX_CHARS[N>>8&15]+HEX_CHARS[N>>4&15]+HEX_CHARS[N&15];return this.is224||(F+=HEX_CHARS[C>>28&15]+HEX_CHARS[C>>24&15]+HEX_CHARS[C>>20&15]+HEX_CHARS[C>>16&15]+HEX_CHARS[C>>12&15]+HEX_CHARS[C>>8&15]+HEX_CHARS[C>>4&15]+HEX_CHARS[C&15]),F},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,b=this.h2,w=this.h3,$=this.h4,T=this.h5,N=this.h6,C=this.h7,F=[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,b>>24&255,b>>16&255,b>>8&255,b&255,w>>24&255,w>>16&255,w>>8&255,w&255,$>>24&255,$>>16&255,$>>8&255,$&255,T>>24&255,T>>16&255,T>>8&255,T&255,N>>24&255,N>>16&255,N>>8&255,N&255];return this.is224||F.push(C>>24&255,C>>16&255,C>>8&255,C&255),F},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};function HmacSha256(t,e,b){var w,$=typeof t;if($==="string"){var T=[],N=t.length,C=0,F;for(w=0;w<N;++w)F=t.charCodeAt(w),F<128?T[C++]=F:F<2048?(T[C++]=192|F>>6,T[C++]=128|F&63):F<55296||F>=57344?(T[C++]=224|F>>12,T[C++]=128|F>>6&63,T[C++]=128|F&63):(F=65536+((F&1023)<<10|t.charCodeAt(++w)&1023),T[C++]=240|F>>18,T[C++]=128|F>>12&63,T[C++]=128|F>>6&63,T[C++]=128|F&63);t=T}else if($==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);t.length>64&&(t=new Sha256(e,!0).update(t).array());var G=[],J=[];for(w=0;w<64;++w){var Z=t[w]||0;G[w]=92^Z,J[w]=54^Z}Sha256.call(this,e,b),this.update(J),this.oKeyPad=G,this.inner=!0,this.sharedMemory=b}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);(function(t){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};Object.defineProperty(t,"__esModule",{value:!0}),t.signTransaction=t.createTransaction=t.SCHEMA=t.Action=t.SignedTransaction=t.Transaction=t.Signature=t.deleteAccount=t.deleteKey=t.addKey=t.stake=t.transfer=t.functionCall=t.stringifyJsonOrBytes=t.deployContract=t.createAccount=t.DeleteAccount=t.DeleteKey=t.AddKey=t.Stake=t.Transfer=t.FunctionCall=t.DeployContract=t.CreateAccount=t.IAction=t.functionCallAccessKey=t.fullAccessKey=t.AccessKey=t.AccessKeyPermission=t.FullAccessPermission=t.FunctionCallPermission=void 0;const b=e(sha256$1.exports),w=enums,$=lib$d,T=key_pair;class N extends w.Assignable{}t.FunctionCallPermission=N;class C extends w.Assignable{}t.FullAccessPermission=C;class F extends w.Enum{}t.AccessKeyPermission=F;class G extends w.Assignable{}t.AccessKey=G;function J(){return new G({nonce:0,permission:new F({fullAccess:new C({})})})}t.fullAccessKey=J;function Z(q,U,oe){return new G({nonce:0,permission:new F({functionCall:new N({receiverId:q,allowance:oe,methodNames:U})})})}t.functionCallAccessKey=Z;class re extends w.Assignable{}t.IAction=re;class ie extends re{}t.CreateAccount=ie;class ue extends re{}t.DeployContract=ue;class ne extends re{}t.FunctionCall=ne;class ce extends re{}t.Transfer=ce;class ae extends re{}t.Stake=ae;class ye extends re{}t.AddKey=ye;class $e extends re{}t.DeleteKey=$e;class _e extends re{}t.DeleteAccount=_e;function be(){return new Q({createAccount:new ie({})})}t.createAccount=be;function xe(q){return new Q({deployContract:new ue({code:q})})}t.deployContract=xe;function ee(q){return q.byteLength!==void 0&&q.byteLength===q.length?q:Buffer.from(JSON.stringify(q))}t.stringifyJsonOrBytes=ee;function he(q,U,oe,ve,fe=ee){return new Q({functionCall:new ne({methodName:q,args:fe(U),gas:oe,deposit:ve})})}t.functionCall=he;function we(q){return new Q({transfer:new ce({deposit:q})})}t.transfer=we;function Ne(q,U){return new Q({stake:new ae({stake:q,publicKey:U})})}t.stake=Ne;function pe(q,U){return new Q({addKey:new ye({publicKey:q,accessKey:U})})}t.addKey=pe;function te(q){return new Q({deleteKey:new $e({publicKey:q})})}t.deleteKey=te;function Y(q){return new Q({deleteAccount:new _e({beneficiaryId:q})})}t.deleteAccount=Y;class R extends w.Assignable{}t.Signature=R;class B extends w.Assignable{encode(){return $.serialize(t.SCHEMA,this)}static decode(U){return $.deserialize(t.SCHEMA,B,U)}}t.Transaction=B;class V extends w.Assignable{encode(){return $.serialize(t.SCHEMA,this)}static decode(U){return $.deserialize(t.SCHEMA,V,U)}}t.SignedTransaction=V;class Q extends w.Enum{}t.Action=Q,t.SCHEMA=new Map([[R,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[V,{kind:"struct",fields:[["transaction",B],["signature",R]]}],[B,{kind:"struct",fields:[["signerId","string"],["publicKey",T.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[Q]]]}],[T.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[G,{kind:"struct",fields:[["nonce","u64"],["permission",F]]}],[F,{kind:"enum",field:"enum",values:[["functionCall",N],["fullAccess",C]]}],[N,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[C,{kind:"struct",fields:[]}],[Q,{kind:"enum",field:"enum",values:[["createAccount",ie],["deployContract",ue],["functionCall",ne],["transfer",ce],["stake",ae],["addKey",ye],["deleteKey",$e],["deleteAccount",_e]]}],[ie,{kind:"struct",fields:[]}],[ue,{kind:"struct",fields:[["code",["u8"]]]}],[ne,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[ce,{kind:"struct",fields:[["deposit","u128"]]}],[ae,{kind:"struct",fields:[["stake","u128"],["publicKey",T.PublicKey]]}],[ye,{kind:"struct",fields:[["publicKey",T.PublicKey],["accessKey",G]]}],[$e,{kind:"struct",fields:[["publicKey",T.PublicKey]]}],[_e,{kind:"struct",fields:[["beneficiaryId","string"]]}]]);function H(q,U,oe,ve,fe,Oe){return new B({signerId:q,publicKey:U,nonce:ve,receiverId:oe,actions:fe,blockHash:Oe})}t.createTransaction=H;async function j(q,U,oe,ve){const fe=$.serialize(t.SCHEMA,q),Oe=new Uint8Array(b.default.sha256.array(fe)),Se=await U.signMessage(fe,oe,ve),Te=new V({transaction:q,signature:new R({keyType:q.publicKey.keyType,data:Se.signature})});return[Oe,Te]}async function L(...q){if(q[0].constructor===B){const[U,oe,ve,fe]=q;return j(U,oe,ve,fe)}else{const[U,oe,ve,fe,Oe,Se,Te]=q,Ae=await Oe.getPublicKey(Se,Te),le=H(Se,Ae,U,oe,ve,fe);return j(le,Oe,Se,Te)}}t.signTransaction=L})(transaction);var validators={},__importDefault$k=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(validators,"__esModule",{value:!0});validators.diffEpochValidators=validators.findSeatPrice=void 0;const bn_js_1$4=__importDefault$k(bn.exports);function findSeatPrice(t,e){const b=t.map(C=>new bn_js_1$4.default(C.stake,10)).sort((C,F)=>C.cmp(F)),w=new bn_js_1$4.default(e),$=b.reduce((C,F)=>C.add(F));if($.lt(w))throw new Error("Stakes are below seats");let T=new bn_js_1$4.default(1),N=$.add(new bn_js_1$4.default(1));for(;!T.eq(N.sub(new bn_js_1$4.default(1)));){const C=T.add(N).div(new bn_js_1$4.default(2));let F=!1,G=new bn_js_1$4.default(0);for(let J=0;J<b.length;++J)if(G=G.add(b[J].div(C)),G.gte(w)){T=C,F=!0;break}F||(N=C)}return T}validators.findSeatPrice=findSeatPrice;function diffEpochValidators(t,e){const b=new Map;t.forEach($=>b.set($.account_id,$));const w=new Set(e.map($=>$.account_id));return{newValidators:e.filter($=>!b.has($.account_id)),removedValidators:t.filter($=>!w.has($.account_id)),changedValidators:e.filter($=>b.has($.account_id)&&b.get($.account_id).stake!=$.stake).map($=>({current:b.get($.account_id),next:$}))}}validators.diffEpochValidators=diffEpochValidators;var account={},constants$6={},__importDefault$j=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(constants$6,"__esModule",{value:!0});constants$6.DEFAULT_FUNCTION_CALL_GAS=void 0;const bn_js_1$3=__importDefault$j(bn.exports);constants$6.DEFAULT_FUNCTION_CALL_GAS=new bn_js_1$3.default("30000000000000");var __importDefault$i=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(account,"__esModule",{value:!0});account.Account=void 0;const bn_js_1$2=__importDefault$i(bn.exports),depd_1$2=__importDefault$i(browser$2),transaction_1$1=transaction,providers_1$2=providers,borsh_1$1=lib$d,key_pair_1$1=key_pair,errors_1$1=errors,rpc_errors_1=rpc_errors,constants_1$3=constants$6,exponential_backoff_1=__importDefault$i(exponentialBackoff$1),TX_NONCE_RETRY_NUMBER=12,TX_NONCE_RETRY_WAIT=500,TX_NONCE_RETRY_WAIT_BACKOFF=1.5;function parseJsonFromRawResponse(t){return JSON.parse(Buffer.from(t).toString())}function bytesJsonStringify(t){return Buffer.from(JSON.stringify(t))}class Account{constructor(e,b){this.accessKeyByPublicKeyCache={},this.connection=e,this.accountId=b}get ready(){return depd_1$2.default("Account.ready()")("not needed anymore, always ready"),Promise.resolve()}async fetchState(){depd_1$2.default("Account.fetchState()")("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(e,b){if(!process.env.NEAR_NO_LOGS)for(const w of b)console.log(`Receipt${w.receiptIds.length>1?"s":""}: ${w.receiptIds.join(", ")}`),this.printLogs(e,w.logs,"	"),w.failure&&console.warn(`	Failure [${e}]: ${w.failure}`)}printLogs(e,b,w=""){if(!process.env.NEAR_NO_LOGS)for(const $ of b)console.log(`${w}Log [${e}]: ${$}`)}async signTransaction(e,b){const w=await this.findAccessKey(e,b);if(!w)throw new providers_1$2.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");const{accessKey:$}=w,N=(await this.connection.provider.block({finality:"final"})).header.hash,C=++$.nonce;return await transaction_1$1.signTransaction(e,C,b,borsh_1$1.baseDecode(N),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...e){return typeof e[0]=="string"?this.signAndSendTransactionV1(e[0],e[1]):this.signAndSendTransactionV2(e[0])}signAndSendTransactionV1(e,b){return depd_1$2.default("Account.signAndSendTransaction(receiverId, actions")("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:e,actions:b})}async signAndSendTransactionV2({receiverId:e,actions:b}){let w,$;const T=await exponential_backoff_1.default(TX_NONCE_RETRY_WAIT,TX_NONCE_RETRY_NUMBER,TX_NONCE_RETRY_WAIT_BACKOFF,async()=>{[w,$]=await this.signTransaction(e,b);const C=$.transaction.publicKey;try{return await this.connection.provider.sendTransaction($)}catch(F){if(F.type==="InvalidNonce")return errors_1$1.logWarning(`Retrying transaction ${e}:${borsh_1$1.baseEncode(w)} with new nonce.`),delete this.accessKeyByPublicKeyCache[C.toString()],null;if(F.type==="Expired")return errors_1$1.logWarning(`Retrying transaction ${e}:${borsh_1$1.baseEncode(w)} due to expired block hash`),null;throw F.context=new providers_1$2.ErrorContext(borsh_1$1.baseEncode(w)),F}});if(!T)throw new providers_1$2.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");const N=[T.transaction_outcome,...T.receipts_outcome].reduce((C,F)=>F.outcome.logs.length||typeof F.outcome.status=="object"&&typeof F.outcome.status.Failure=="object"?C.concat({receiptIds:F.outcome.receipt_ids,logs:F.outcome.logs,failure:typeof F.outcome.status.Failure!="undefined"?rpc_errors_1.parseRpcError(F.outcome.status.Failure):null}):C,[]);if(this.printLogsAndFailures($.transaction.receiverId,N),typeof T.status=="object"&&typeof T.status.Failure=="object")throw T.status.Failure.error_message&&T.status.Failure.error_type?new providers_1$2.TypedError(`Transaction ${T.transaction_outcome.id} failed. ${T.status.Failure.error_message}`,T.status.Failure.error_type):rpc_errors_1.parseResultError(T);return T}async findAccessKey(e,b){const w=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!w)return null;const $=this.accessKeyByPublicKeyCache[w.toString()];if($!==void 0)return{publicKey:w,accessKey:$};try{const T=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:w.toString(),finality:"optimistic"});return this.accessKeyByPublicKeyCache[w.toString()]?{publicKey:w,accessKey:this.accessKeyByPublicKeyCache[w.toString()]}:(this.accessKeyByPublicKeyCache[w.toString()]=T,{publicKey:w,accessKey:T})}catch(T){if(T.type=="AccessKeyDoesNotExist")return null;throw T}}async createAndDeployContract(e,b,w,$){const T=transaction_1$1.fullAccessKey();return await this.signAndSendTransaction({receiverId:e,actions:[transaction_1$1.createAccount(),transaction_1$1.transfer($),transaction_1$1.addKey(key_pair_1$1.PublicKey.from(b),T),transaction_1$1.deployContract(w)]}),new Account(this.connection,e)}async sendMoney(e,b){return this.signAndSendTransaction({receiverId:e,actions:[transaction_1$1.transfer(b)]})}async createAccount(e,b,w){const $=transaction_1$1.fullAccessKey();return this.signAndSendTransaction({receiverId:e,actions:[transaction_1$1.createAccount(),transaction_1$1.transfer(w),transaction_1$1.addKey(key_pair_1$1.PublicKey.from(b),$)]})}async deleteAccount(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[transaction_1$1.deleteAccount(e)]})}async deployContract(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[transaction_1$1.deployContract(e)]})}async functionCall(...e){return typeof e[0]=="string"?this.functionCallV1(e[0],e[1],e[2],e[3],e[4]):this.functionCallV2(e[0])}functionCallV1(e,b,w,$,T){return depd_1$2.default("Account.functionCall(contractId, methodName, args, gas, amount)")("use `Account.functionCall(FunctionCallOptions)` instead"),w=w||{},this.validateArgs(w),this.signAndSendTransaction({receiverId:e,actions:[transaction_1$1.functionCall(b,w,$||constants_1$3.DEFAULT_FUNCTION_CALL_GAS,T)]})}functionCallV2({contractId:e,methodName:b,args:w={},gas:$=constants_1$3.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:T,walletMeta:N,walletCallbackUrl:C,stringify:F}){this.validateArgs(w);const G=F===void 0?transaction_1$1.stringifyJsonOrBytes:F;return this.signAndSendTransaction({receiverId:e,actions:[transaction_1$1.functionCall(b,w,$,T,G)],walletMeta:N,walletCallbackUrl:C})}async addKey(e,b,w,$){w||(w=[]),Array.isArray(w)||(w=[w]);let T;return b?T=transaction_1$1.functionCallAccessKey(b,w,$):T=transaction_1$1.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[transaction_1$1.addKey(key_pair_1$1.PublicKey.from(e),T)]})}async deleteKey(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[transaction_1$1.deleteKey(key_pair_1$1.PublicKey.from(e))]})}async stake(e,b){return this.signAndSendTransaction({receiverId:this.accountId,actions:[transaction_1$1.stake(b,key_pair_1$1.PublicKey.from(e))]})}validateArgs(e){if(!(e.byteLength!==void 0&&e.byteLength===e.length)&&(Array.isArray(e)||typeof e!="object"))throw new errors_1$1.PositionalArgsError}async viewFunction(e,b,w={},{parse:$=parseJsonFromRawResponse,stringify:T=bytesJsonStringify}={}){this.validateArgs(w);const N=T(w).toString("base64"),C=await this.connection.provider.query({request_type:"call_function",account_id:e,method_name:b,args_base64:N,finality:"optimistic"});return C.logs&&this.printLogs(e,C.logs),C.result&&C.result.length>0&&$(Buffer.from(C.result))}async viewState(e,b={finality:"optimistic"}){const{values:w}=await this.connection.provider.query(gr(Tt({request_type:"view_state"},b),{account_id:this.accountId,prefix_base64:Buffer.from(e).toString("base64")}));return w.map(({key:$,value:T})=>({key:Buffer.from($,"base64"),value:Buffer.from(T,"base64")}))}async getAccessKeys(){const e=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(e)?e:e.keys}async getAccountDetails(){return{authorizedApps:(await this.getAccessKeys()).filter(w=>w.access_key.permission!=="FullAccess").map(w=>{const $=w.access_key.permission;return{contractId:$.FunctionCall.receiver_id,amount:$.FunctionCall.allowance,publicKey:w.public_key}})}}async getAccountBalance(){const e=await this.connection.provider.experimental_protocolConfig({finality:"final"}),b=await this.state(),w=new bn_js_1$2.default(e.runtime_config.storage_amount_per_byte),$=new bn_js_1$2.default(b.storage_usage).mul(w),T=new bn_js_1$2.default(b.locked),N=new bn_js_1$2.default(b.amount).add(T),C=N.sub(bn_js_1$2.default.max(T,$));return{total:N.toString(),stateStaked:$.toString(),staked:T.toString(),available:C.toString()}}}account.Account=Account;var account_multisig={};(function(t){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account2FA=t.AccountMultisig=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=void 0;const b=e(bn.exports),w=e(browser$2),$=account,T=format$4,N=key_pair,C=transaction,F=web;t.MULTISIG_STORAGE_KEY="__multisigRequest",t.MULTISIG_ALLOWANCE=new b.default(T.parseNearAmount("1")),t.MULTISIG_GAS=new b.default("100000000000000"),t.MULTISIG_DEPOSIT=new b.default("0"),t.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],t.MULTISIG_CONFIRM_METHODS=["confirm"];const G={[t.MULTISIG_STORAGE_KEY]:null};class J extends $.Account{constructor(ce,ae,ye){super(ce,ae);this.storage=ye.storage,this.onAddRequestResult=ye.onAddRequestResult}async signAndSendTransactionWithAccount(ce,ae){return super.signAndSendTransaction({receiverId:ce,actions:ae})}signAndSendTransaction(...ce){return typeof ce[0]=="string"?this._signAndSendTransaction({receiverId:ce[0],actions:ce[1]}):this._signAndSendTransaction(ce[0])}async _signAndSendTransaction({receiverId:ce,actions:ae}){const{accountId:ye}=this,$e=Buffer.from(JSON.stringify({request:{receiver_id:ce,actions:ue(ae,ye,ce)}}));let _e;try{_e=await super.signAndSendTransaction({receiverId:ye,actions:[C.functionCall("add_request_and_confirm",$e,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch(xe){if(xe.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(ce,ae);throw xe}if(!_e.status)throw new Error("Request failed");const be=Tt({},_e.status);if(!be.SuccessValue||typeof be.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:ye,actions:ae,requestId:parseInt(Buffer.from(be.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(_e),this.deleteUnconfirmedRequests(),_e}async deleteUnconfirmedRequests(){const ce=await this.getRequestIds(),{requestId:ae}=this.getRequest();for(const ye of ce)if(ye!=ae)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[C.functionCall("delete_request",{request_id:ye},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch{console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(t.MULTISIG_STORAGE_KEY)||"{}"):G[t.MULTISIG_STORAGE_KEY]}setRequest(ce){if(this.storage)return this.storage.setItem(t.MULTISIG_STORAGE_KEY,JSON.stringify(ce));G[t.MULTISIG_STORAGE_KEY]=ce}}t.AccountMultisig=J;class Z extends J{constructor(ce,ae,ye){super(ce,ae,ye);this.helperUrl="https://helper.testnet.near.org",this.helperUrl=ye.helperUrl||this.helperUrl,this.storage=ye.storage,this.sendCode=ye.sendCode||this.sendCodeDefault,this.getCode=ye.getCode||this.getCodeDefault,this.verifyCode=ye.verifyCode||this.verifyCodeDefault,this.onConfirmResult=ye.onConfirmResult}async signAndSendTransaction(...ce){return typeof ce[0]=="string"?(w.default("Account.signAndSendTransaction(receiverId, actions")("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:ce[0],actions:ce[1]})):this.__signAndSendTransaction(ce[0])}async __signAndSendTransaction({receiverId:ce,actions:ae}){await super.signAndSendTransaction({receiverId:ce,actions:ae}),await this.sendCode();const ye=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(ye),ye}async deployMultisig(ce){const{accountId:ae}=this,ye=(await this.getRecoveryMethods()).data.filter(({kind:ee,publicKey:he})=>(ee==="phrase"||ee==="ledger")&&he!==null).map(ee=>ee.publicKey),$e=(await this.getAccessKeys()).filter(({public_key:ee,access_key:{permission:he}})=>he==="FullAccess"&&!ye.includes(ee)).map(ee=>ee.public_key).map(re),_e=re((await this.postSignedJson("/2fa/getAccessKey",{accountId:ae})).publicKey),be=Buffer.from(JSON.stringify({num_confirmations:2})),xe=[...$e.map(ee=>C.deleteKey(ee)),...$e.map(ee=>C.addKey(ee,C.functionCallAccessKey(ae,t.MULTISIG_CHANGE_METHODS,null))),C.addKey(_e,C.functionCallAccessKey(ae,t.MULTISIG_CONFIRM_METHODS,null)),C.deployContract(ce)];return(await this.state()).code_hash==="11111111111111111111111111111111"&&xe.push(C.functionCall("new",be,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)),console.log("deploying multisig contract for",ae),await super.signAndSendTransactionWithAccount(ae,xe)}async disable(ce){const{accountId:ae}=this,$e=(await this.getAccessKeys()).filter(({access_key:xe})=>xe.permission!=="FullAccess").filter(({access_key:xe})=>{const ee=xe.permission.FunctionCall;return ee.receiver_id===ae&&ee.method_names.length===4&&ee.method_names.includes("add_request_and_confirm")}),_e=N.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:ae})).publicKey),be=[C.deleteKey(_e),...$e.map(({public_key:xe})=>C.deleteKey(N.PublicKey.from(xe))),...$e.map(({public_key:xe})=>C.addKey(N.PublicKey.from(xe),null)),C.deployContract(ce)];return console.log("disabling 2fa for",ae),await this.signAndSendTransaction({receiverId:ae,actions:be})}async sendCodeDefault(){const{accountId:ce}=this,{requestId:ae}=this.getRequest(),ye=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:ce,method:ye,requestId:ae}),ae}async getCodeDefault(ce){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){const ce=await this.get2faMethod(),ae=await this.getCode(ce);try{return await this.verifyCode(ae)}catch(ye){if(console.warn("Error validating security code:",ye),ye.toString().includes("invalid 2fa code provided")||ye.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw ye}}async verifyCodeDefault(ce){const{accountId:ae}=this,ye=this.getRequest();if(!ye)throw new Error("no request pending");const{requestId:$e}=ye;return await this.postSignedJson("/2fa/verify",{accountId:ae,securityCode:ce,requestId:$e})}async getRecoveryMethods(){const{accountId:ce}=this;return{accountId:ce,data:await this.postSignedJson("/account/recoveryMethods",{accountId:ce})}}async get2faMethod(){let{data:ce}=await this.getRecoveryMethods();if(ce&&ce.length&&(ce=ce.find($e=>$e.kind.indexOf("2fa-")===0)),!ce)return null;const{kind:ae,detail:ye}=ce;return{kind:ae,detail:ye}}async signatureFor(){const{accountId:ce}=this,ye=(await this.connection.provider.block({finality:"final"})).header.height.toString(),$e=await this.connection.signer.signMessage(Buffer.from(ye),ce,this.connection.networkId),_e=Buffer.from($e.signature).toString("base64");return{blockNumber:ye,blockNumberSignature:_e}}async postSignedJson(ce,ae){return await F.fetchJson(this.helperUrl+ce,JSON.stringify(Tt(Tt({},ae),await this.signatureFor())))}}t.Account2FA=Z;const re=ne=>N.PublicKey.from(ne),ie=ne=>ne.toString().replace("ed25519:",""),ue=(ne,ce,ae)=>ne.map(ye=>{const $e=ye.enum,{gas:_e,publicKey:be,methodName:xe,args:ee,deposit:he,accessKey:we,code:Ne}=ye[$e],pe={type:$e[0].toUpperCase()+$e.substr(1),gas:_e&&_e.toString()||void 0,public_key:be&&ie(be)||void 0,method_name:xe,args:ee&&Buffer.from(ee).toString("base64")||void 0,code:Ne&&Buffer.from(Ne).toString("base64")||void 0,amount:he&&he.toString()||void 0,deposit:he&&he.toString()||"0",permission:void 0};if(we&&(ae===ce&&we.permission.enum!=="fullAccess"&&(pe.permission={receiver_id:ce,allowance:t.MULTISIG_ALLOWANCE.toString(),method_names:t.MULTISIG_CHANGE_METHODS}),we.permission.enum==="functionCall")){const{receiverId:te,methodNames:Y,allowance:R}=we.permission.functionCall;pe.permission={receiver_id:te,allowance:R&&R.toString()||void 0,method_names:Y}}return pe})})(account_multisig);var account_creator={};Object.defineProperty(account_creator,"__esModule",{value:!0});account_creator.UrlAccountCreator=account_creator.LocalAccountCreator=account_creator.AccountCreator=void 0;const web_1=web;class AccountCreator{}account_creator.AccountCreator=AccountCreator;class LocalAccountCreator extends AccountCreator{constructor(e,b){super();this.masterAccount=e,this.initialBalance=b}async createAccount(e,b){await this.masterAccount.createAccount(e,b,this.initialBalance)}}account_creator.LocalAccountCreator=LocalAccountCreator;class UrlAccountCreator extends AccountCreator{constructor(e,b){super();this.connection=e,this.helperUrl=b}async createAccount(e,b){await web_1.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:e,newAccountPublicKey:b.toString()}))}}account_creator.UrlAccountCreator=UrlAccountCreator;var connection={},signer={},__importDefault$h=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(signer,"__esModule",{value:!0});signer.InMemorySigner=signer.Signer=void 0;const js_sha256_1=__importDefault$h(sha256$1.exports),key_pair_1=key_pair,in_memory_key_store_1=in_memory_key_store;class Signer{}signer.Signer=Signer;class InMemorySigner extends Signer{constructor(e){super();this.keyStore=e}static async fromKeyPair(e,b,w){const $=new in_memory_key_store_1.InMemoryKeyStore;return await $.setKey(e,b,w),new InMemorySigner($)}async createKey(e,b){const w=key_pair_1.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(b,e,w),w.getPublicKey()}async getPublicKey(e,b){const w=await this.keyStore.getKey(b,e);return w===null?null:w.getPublicKey()}async signMessage(e,b,w){const $=new Uint8Array(js_sha256_1.default.sha256.array(e));if(!b)throw new Error("InMemorySigner requires provided account id");const T=await this.keyStore.getKey(w,b);if(T===null)throw new Error(`Key for ${b} not found in ${w}`);return T.sign($)}toString(){return`InMemorySigner(${this.keyStore})`}}signer.InMemorySigner=InMemorySigner;Object.defineProperty(connection,"__esModule",{value:!0});connection.Connection=void 0;const providers_1$1=providers,signer_1=signer;function getProvider(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new providers_1$1.JsonRpcProvider(t.args.url);default:throw new Error(`Unknown provider type ${t.type}`)}}function getSigner(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new signer_1.InMemorySigner(t.keyStore);default:throw new Error(`Unknown signer type ${t.type}`)}}class Connection{constructor(e,b,w){this.networkId=e,this.provider=b,this.signer=w}static fromConfig(e){const b=getProvider(e.provider),w=getSigner(e.signer);return new Connection(e.networkId,b,w)}}connection.Connection=Connection;var contract={},__importDefault$g=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(contract,"__esModule",{value:!0});contract.Contract=void 0;const bn_js_1$1=__importDefault$g(bn.exports),depd_1$1=__importDefault$g(browser$2),providers_1=providers,errors_1=errors;function nameFunction(t,e){return{[t](...b){return e(...b)}}[t]}const isUint8Array=t=>t&&t.byteLength!==void 0&&t.byteLength===t.length,isObject$1=t=>Object.prototype.toString.call(t)==="[object Object]";class Contract{constructor(e,b,w){this.account=e,this.contractId=b;const{viewMethods:$=[],changeMethods:T=[]}=w;$.forEach(N=>{Object.defineProperty(this,N,{writable:!1,enumerable:!0,value:nameFunction(N,async(C={},F={},...G)=>{if(G.length||!(isObject$1(C)||isUint8Array(C))||!isObject$1(F))throw new errors_1.PositionalArgsError;return this.account.viewFunction(this.contractId,N,C,F)})})}),T.forEach(N=>{Object.defineProperty(this,N,{writable:!1,enumerable:!0,value:nameFunction(N,async(...C)=>{if(C.length&&(C.length>3||!(isObject$1(C[0])||isUint8Array(C[0]))))throw new errors_1.PositionalArgsError;return C.length>1||!(C[0]&&C[0].args)?(depd_1$1.default("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:N,args:C[0],gas:C[1],amount:C[2]})):this._changeMethod(Tt({methodName:N},C[0]))})})})}async _changeMethod({args:e,methodName:b,gas:w,amount:$,meta:T,callbackUrl:N}){validateBNLike({gas:w,amount:$});const C=await this.account.functionCall({contractId:this.contractId,methodName:b,args:e,gas:w,attachedDeposit:$,walletMeta:T,walletCallbackUrl:N});return providers_1.getTransactionLastResult(C)}}contract.Contract=Contract;function validateBNLike(t){const e="number, decimal string or BN";for(const b of Object.keys(t)){const w=t[b];if(w&&!bn_js_1$1.default.isBN(w)&&isNaN(w))throw new errors_1.ArgumentTypeError(b,e,w)}}var near={},__importDefault$f=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(near,"__esModule",{value:!0});near.Near=void 0;const bn_js_1=__importDefault$f(bn.exports),account_1$1=account,connection_1=connection,contract_1=contract,account_creator_1=account_creator;class Near{constructor(e){if(this.config=e,this.connection=connection_1.Connection.fromConfig({networkId:e.networkId,provider:{type:"JsonRpcProvider",args:{url:e.nodeUrl}},signer:e.signer||{type:"InMemorySigner",keyStore:e.keyStore||e.deps.keyStore}}),e.masterAccount){const b=e.initialBalance?new bn_js_1.default(e.initialBalance):new bn_js_1.default("500000000000000000000000000");this.accountCreator=new account_creator_1.LocalAccountCreator(new account_1$1.Account(this.connection,e.masterAccount),b)}else e.helperUrl?this.accountCreator=new account_creator_1.UrlAccountCreator(this.connection,e.helperUrl):this.accountCreator=null}async account(e){return new account_1$1.Account(this.connection,e)}async createAccount(e,b){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(e,b),new account_1$1.Account(this.connection,e)}async loadContract(e,b){const w=new account_1$1.Account(this.connection,b.sender);return new contract_1.Contract(w,e,b)}async sendTokens(e,b,w){return console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead."),(await new account_1$1.Account(this.connection,b).sendMoney(w,e)).transaction_outcome.id}}near.Near=Near;var walletAccount={},__importDefault$e=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(walletAccount,"__esModule",{value:!0});walletAccount.ConnectedWalletAccount=walletAccount.WalletAccount=walletAccount.WalletConnection=void 0;const depd_1=__importDefault$e(browser$2),account_1=account,transaction_1=transaction,utils_1$1=utils$k,borsh_1=lib$d,borsh_2=lib$d,LOGIN_WALLET_URL_SUFFIX="/login/",MULTISIG_HAS_METHOD="add_request_and_confirm",LOCAL_STORAGE_KEY_SUFFIX="_wallet_auth_key",PENDING_ACCESS_KEY_PREFIX="pending_key";class WalletConnection{constructor(e,b){this._near=e;const w=b+LOCAL_STORAGE_KEY_SUFFIX,$=JSON.parse(window.localStorage.getItem(w));this._networkId=e.config.networkId,this._walletBaseUrl=e.config.walletUrl,b=b||e.config.contractName||"default",this._keyStore=e.connection.signer.keyStore,this._authData=$||{allKeys:[]},this._authDataKey=w,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(e={},b,w,$){let T;typeof e=="string"?(depd_1.default("requestSignIn(contractId, title)")("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),T={contractId:e,successUrl:w,failureUrl:$}):T=e;const N=new URL(window.location.href),C=new URL(this._walletBaseUrl+LOGIN_WALLET_URL_SUFFIX);if(C.searchParams.set("success_url",T.successUrl||N.href),C.searchParams.set("failure_url",T.failureUrl||N.href),T.contractId){await(await this._near.account(T.contractId)).state(),C.searchParams.set("contract_id",T.contractId);const G=utils_1$1.KeyPair.fromRandom("ed25519");C.searchParams.set("public_key",G.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,PENDING_ACCESS_KEY_PREFIX+G.getPublicKey(),G)}T.methodNames&&T.methodNames.forEach(F=>{C.searchParams.append("methodNames",F)}),window.location.assign(C.toString())}async requestSignTransactions(...e){return Array.isArray(e[0])?(depd_1.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)")("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:e[0],callbackUrl:e[1],meta:e[2]})):this._requestSignTransactions(e[0])}async _requestSignTransactions({transactions:e,meta:b,callbackUrl:w}){const $=new URL(window.location.href),T=new URL("sign",this._walletBaseUrl);T.searchParams.set("transactions",e.map(N=>borsh_2.serialize(transaction_1.SCHEMA,N)).map(N=>Buffer.from(N).toString("base64")).join(",")),T.searchParams.set("callbackUrl",w||$.href),b&&T.searchParams.set("meta",b),window.location.assign(T.toString())}async _completeSignInWithAccessKey(){const e=new URL(window.location.href),b=e.searchParams.get("public_key")||"",w=(e.searchParams.get("all_keys")||"").split(","),$=e.searchParams.get("account_id")||"";$&&(this._authData={accountId:$,allKeys:w},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),b&&await this._moveKeyFromTempToPermanent($,b)),e.searchParams.delete("public_key"),e.searchParams.delete("all_keys"),e.searchParams.delete("account_id"),window.history.replaceState({},document.title,e.toString())}async _moveKeyFromTempToPermanent(e,b){const w=await this._keyStore.getKey(this._networkId,PENDING_ACCESS_KEY_PREFIX+b);await this._keyStore.setKey(this._networkId,e,w),await this._keyStore.removeKey(this._networkId,PENDING_ACCESS_KEY_PREFIX+b)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new ConnectedWalletAccount(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}walletAccount.WalletConnection=WalletConnection;walletAccount.WalletAccount=WalletConnection;class ConnectedWalletAccount extends account_1.Account{constructor(e,b,w){super(b,w);this.walletConnection=e}signAndSendTransaction(...e){return typeof e[0]=="string"?this._signAndSendTransaction({receiverId:e[0],actions:e[1]}):this._signAndSendTransaction(e[0])}async _signAndSendTransaction({receiverId:e,actions:b,walletMeta:w,walletCallbackUrl:$=window.location.href}){const T=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let N=await this.accessKeyForTransaction(e,b,T);if(!N)throw new Error(`Cannot find matching key for transaction sent to ${e}`);if(T&&T.toString()===N.public_key)try{return await super.signAndSendTransaction({receiverId:e,actions:b})}catch(re){if(re.type==="NotEnoughAllowance")N=await this.accessKeyForTransaction(e,b);else throw re}const C=await this.connection.provider.block({finality:"final"}),F=borsh_1.baseDecode(C.header.hash),G=utils_1$1.PublicKey.from(N.public_key),J=N.access_key.nonce+1,Z=transaction_1.createTransaction(this.accountId,G,e,J,b,F);return await this.walletConnection.requestSignTransactions({transactions:[Z],meta:w,callbackUrl:$}),new Promise((re,ie)=>{setTimeout(()=>{ie(new Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(e,b,w){const{access_key:{permission:$}}=e;if($==="FullAccess")return!0;if($.FunctionCall){const{receiver_id:T,method_names:N}=$.FunctionCall;if(T===this.accountId&&N.includes(MULTISIG_HAS_METHOD))return!0;if(T===b){if(w.length!==1)return!1;const[{functionCall:C}]=w;return C&&(!C.deposit||C.deposit.toString()==="0")&&(N.length===0||N.includes(C.methodName))}}return!1}async accessKeyForTransaction(e,b,w){const $=await this.getAccessKeys();if(w){const N=$.find(C=>C.public_key.toString()===w.toString());if(N&&await this.accessKeyMatchesTransaction(N,e,b))return N}const T=this.walletConnection._authData.allKeys;for(const N of $)if(T.indexOf(N.public_key)!==-1&&await this.accessKeyMatchesTransaction(N,e,b))return N;return null}}walletAccount.ConnectedWalletAccount=ConnectedWalletAccount;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ae,ye,$e,_e){_e===void 0&&(_e=$e),Object.defineProperty(ae,_e,{enumerable:!0,get:function(){return ye[$e]}})}:function(ae,ye,$e,_e){_e===void 0&&(_e=$e),ae[_e]=ye[$e]}),b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ae,ye){Object.defineProperty(ae,"default",{enumerable:!0,value:ye})}:function(ae,ye){ae.default=ye}),w=commonjsGlobal&&commonjsGlobal.__importStar||function(ae){if(ae&&ae.__esModule)return ae;var ye={};if(ae!=null)for(var $e in ae)$e!=="default"&&Object.hasOwnProperty.call(ae,$e)&&e(ye,ae,$e);return b(ye,ae),ye};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.WalletAccount=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const $=w(providers);t.providers=$;const T=w(utils$k);t.utils=T;const N=w(transaction);t.transactions=N;const C=w(validators);t.validators=C;const F=account;Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return F.Account}});const G=w(account_multisig);t.multisig=G;const J=w(account_creator);t.accountCreator=J;const Z=connection;Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return Z.Connection}});const re=signer;Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return re.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return re.InMemorySigner}});const ie=contract;Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return ie.Contract}});const ue=key_pair;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return ue.KeyPair}});const ne=near;Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return ne.Near}});const ce=walletAccount;Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return ce.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletAccount",{enumerable:!0,get:function(){return ce.WalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return ce.WalletConnection}})})(commonIndex);var browserConnect={};Object.defineProperty(browserConnect,"__esModule",{value:!0});browserConnect.connect=void 0;const near_1=near;async function connect$2(t){return new near_1.Near(t)}browserConnect.connect=connect$2;var CapabilityDetector$1=function(){this.tests={},this.cache={}};CapabilityDetector$1.prototype={constructor:CapabilityDetector$1,define:function(t,e){if(typeof t!="string"||!(e instanceof Function))throw new Error("Invalid capability definition.");if(this.tests[t])throw new Error('Duplicated capability definition by "'+t+'".');this.tests[t]=e},check:function(t){if(!this.test(t))throw new Error('The current environment does not support "'+t+'", therefore we cannot continue.')},test:function(t){if(this.cache[t]!==void 0)return this.cache[t];if(!this.tests[t])throw new Error('Unknown capability with name "'+t+'".');var e=this.tests[t];return this.cache[t]=!!e(),this.cache[t]}};var CapabilityDetector_1=CapabilityDetector$1,CapabilityDetector=CapabilityDetector_1,detector=new CapabilityDetector,capability$4=function(t){return detector.test(t)};capability$4.define=function(t,e){detector.define(t,e)};capability$4.check=function(t){detector.check(t)};capability$4.test=capability$4;var lib$c=capability$4,capability$3=lib$c,define=capability$3.define,test=capability$3.test;define("strict mode",function(){return this===void 0});define("arguments.callee.caller",function(){try{return function(){return arguments.callee.caller}()===arguments.callee}catch{return!1}});define("es5",function(){return test("Array.prototype.forEach")&&test("Array.prototype.map")&&test("Function.prototype.bind")&&test("Object.create")&&test("Object.defineProperties")&&test("Object.defineProperty")&&test("Object.prototype.hasOwnProperty")});define("Array.prototype.forEach",function(){return Array.prototype.forEach});define("Array.prototype.map",function(){return Array.prototype.map});define("Function.prototype.bind",function(){return Function.prototype.bind});define("Object.create",function(){return Object.create});define("Object.defineProperties",function(){return Object.defineProperties});define("Object.defineProperty",function(){return Object.defineProperty});define("Object.prototype.hasOwnProperty",function(){return Object.prototype.hasOwnProperty});define("Error.captureStackTrace",function(){return Error.captureStackTrace});define("Error.prototype.stack",function(){try{throw new Error}catch(t){return t.stack||t.stacktrace}});var capability$2=lib$c;capability$2.check("es5");var prepareStackTrace$3=function(t,e,b){var w="";if(w+=t.name||"Error",w+=": "+(t.message||""),b instanceof Array)for(var $ in b){var T=b[$];w+=`
   # `+T}for(var N in e){var C=e[N];w+=`
   at `+C.toString()}return w},prepareStackTrace_1=prepareStackTrace$3,prepareStackTrace$2=prepareStackTrace_1,v8=function(){return Error.getStackTrace=function(t){return t.stack},{prepareStackTrace:prepareStackTrace$2}},Class$3=function(){var t=Object.create({Source:Object,config:{},buildArgs:[]});function e(C){var F="config";if(C instanceof Function)F="Source";else if(C instanceof Array)F="buildArgs";else if(C instanceof Object)F="config";else throw new Error("Invalid configuration option.");if(t.hasOwnProperty(F))throw new Error("Duplicated configuration option: "+F+".");t[F]=C}for(var b=0,w=arguments.length;b<w;++b)e(arguments[b]);var $=t.Source,T=t.config,N=t.buildArgs;return($.extend||Class$3.extend).call($,T,N)};Class$3.factory=function(){return function(){var t=this;t.build instanceof Function&&t.build.apply(t,arguments),t.init instanceof Function&&t.init.apply(t,arguments)}};Class$3.extend=function(t,e){var b=this;t||(t={});var w;return t.prototype instanceof Object&&t.prototype.constructor!==Object?w=t.prototype.constructor:t.factory instanceof Function&&(w=t.factory.call(b)),w=(b.clone||Class$3.clone).call(b,w,e),(w.merge||Class$3.merge).call(w,t),w};Class$3.prototype.extend=function(t,e){var b=this,w=(b.clone||Class$3.prototype.clone).apply(b,e);return(w.merge||Class$3.prototype.merge).call(w,t),w};Class$3.clone=function(t,e){var b=this;t instanceof Function||(t=(b.factory||Class$3.factory).call(b)),t.prototype=(b.prototype.clone||Class$3.prototype.clone).apply(b.prototype,e||[]),t.prototype.constructor=t;for(var w in b)w!=="prototype"&&(t[w]=b[w]);return t};Class$3.prototype.clone=function(){var t=this,e=Object.create(t);return e.build instanceof Function&&e.build.apply(e,arguments),e};Class$3.merge=function(t){var e=this;for(var b in t)b!=="prototype"&&(e[b]=t[b]);return t.prototype instanceof Object&&(e.prototype.merge||Class$3.prototype.merge).call(e.prototype,t.prototype),e};Class$3.prototype.merge=function(t){var e=this;for(var b in t)b!=="constructor"&&(e[b]=t[b]);return e};Class$3.absorb=function(t){var e=this;for(var b in t)b!=="prototype"&&(e[b]===void 0||e[b]===Function.prototype[b])&&(e[b]=t[b]);return t.prototype instanceof Object&&(e.prototype.absorb||Class$3.prototype.absorb).call(e.prototype,t.prototype),e};Class$3.prototype.absorb=function(t){var e=this;for(var b in t)b!=="constructor"&&(e[b]===void 0||e[b]===Object.prototype[b])&&(e[b]=t[b]);return e};Class$3.getAncestor=function(){var t=this;if(t!==t.prototype.constructor)return t.prototype.constructor};Class$3.newInstance=function(){var t=this,e=Object.create(this.prototype);return t.apply(e,arguments),e};var Class_1=Class$3,abstractMethod$2=function(){throw new Error("Not implemented.")},lib$b={Class:Class_1,abstractMethod:abstractMethod$2},o3=lib$b,cache$4=function(t){var e=!1,b;return t instanceof Function||(e=!0,b=t,t=null),function(){return e||(e=!0,b=t.apply(this,arguments),t=null),b}},cache_1=cache$4,eachCombination$1=function t(e,b,w){if(w||(w=[]),w.length<e.length){var $=e[w.length];for(var T in $)w[w.length]=$[T],t(e,b,w),--w.length}else b.apply(null,w)},lib$a={cache:cache_1,eachCombination:eachCombination$1},u3=lib$a,Class$2=o3.Class,abstractMethod$1=o3.abstractMethod,eachCombination=u3.eachCombination,cache$3=u3.cache,capability$1=capability$2,AbstractFrameStringSource=Class$2(Object,{prototype:{captureFrameStrings:function(t){var e=this.createError();t.unshift(this.captureFrameStrings),t.unshift(this.createError);var b=this.getFrameStrings(e),w=b.slice(t.length),$=[];if(capability$1("arguments.callee.caller")){var T=[this.createError,this.captureFrameStrings];try{for(var N=arguments.callee;N=N.caller;)T.push(N)}catch{}$=T.slice(t.length)}return{frameStrings:w,functionValues:$}},getFrameStrings:function(t){var e=t.message||"",b=t.name||"",w=this.getStackString(t);if(w!==void 0){var $=w.split(`
`),T=0,N=$.length;return this.hasHeader&&(T+=b.split(`
`).length+e.split(`
`).length-1),this.hasFooter&&(N-=1),$.slice(T,N)}},createError:abstractMethod$1,getStackString:abstractMethod$1,hasHeader:void 0,hasFooter:void 0}}),FrameStringSourceCalibrator=Class$2(Object,{prototype:{calibrateClass:function(t){return this.calibrateMethods(t)&&this.calibrateEnvelope(t)},calibrateMethods:function(t){try{eachCombination([[function(e){return new Error(e)},function(e){try{throw new Error(e)}catch(b){return b}}],[function(e){return e.stack},function(e){return e.stacktrace}]],function(e,b){if(b(e()))throw{getStackString:b,createError:e}})}catch(e){return Class$2.merge.call(t,{prototype:e}),!0}return!1},calibrateEnvelope:function(t){var e=t.prototype.getStackString,b=t.prototype.createError,w=e(b("marker")),$=w.split(`
`);return Class$2.merge.call(t,{prototype:{hasHeader:/marker/.test($[0]),hasFooter:$[$.length-1]===""}}),!0}}}),FrameStringSource$1={getClass:cache$3(function(){var t;if(t)return t;t=Class$2(AbstractFrameStringSource,{});var e=new FrameStringSourceCalibrator;if(!e.calibrateClass(t))throw new Error("Cannot read Error.prototype.stack in this environment.");return t}),getInstance:cache$3(function(){var t=this.getClass(),e=new t;return e})},Class$1=o3.Class,abstractMethod=o3.abstractMethod,Frame$1=Class$1(Object,{prototype:{init:Class$1.prototype.merge,frameString:void 0,toString:function(){return this.frameString},functionValue:void 0,getThis:abstractMethod,getTypeName:abstractMethod,getFunction:function(){return this.functionValue},getFunctionName:abstractMethod,getMethodName:abstractMethod,getFileName:abstractMethod,getLineNumber:abstractMethod,getColumnNumber:abstractMethod,getEvalOrigin:abstractMethod,isTopLevel:abstractMethod,isEval:abstractMethod,isNative:abstractMethod,isConstructor:abstractMethod}}),Frame_1=Frame$1,Class=o3.Class,Frame=Frame_1,cache$2=u3.cache,FrameStringParser$1=Class(Object,{prototype:{stackParser:null,frameParser:null,locationParsers:null,constructor:function(t){Class.prototype.merge.call(this,t)},getFrames:function(t,e){for(var b=[],w=0,$=t.length;w<$;++w)b[w]=this.getFrame(t[w],e[w]);return b},getFrame:function(t,e){var b={frameString:t,functionValue:e};return new Frame(b)}}}),FrameStringParser_1={getClass:cache$2(function(){return FrameStringParser$1}),getInstance:cache$2(function(){var t=this.getClass(),e=new t;return e})},FrameStringSource=FrameStringSource$1,FrameStringParser=FrameStringParser_1,cache$1=u3.cache,prepareStackTrace$1=prepareStackTrace_1,nonV8=function(){return Error.captureStackTrace=function t(e,b){var w,$=[t];b&&$.push(b);var T=FrameStringSource.getInstance().captureFrameStrings($);Object.defineProperties(e,{stack:{configurable:!0,get:cache$1(function(){var N=FrameStringParser.getInstance().getFrames(T.frameStrings,T.functionValues);return(Error.prepareStackTrace||prepareStackTrace$1)(e,N,w)})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(t){if(t.cachedStack)return t.stack;var e=FrameStringSource.getInstance().getFrameStrings(t),b=[],w;e?b=FrameStringParser.getInstance().getFrames(e,[]):w=["The stack is not readable by unthrown errors in this environment."];var $=(Error.prepareStackTrace||prepareStackTrace$1)(t,b,w);if(e)try{Object.defineProperties(t,{stack:{configurable:!0,writable:!0,enumerable:!1,value:$},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return $},{prepareStackTrace:prepareStackTrace$1}},cache=u3.cache,prepareStackTrace=prepareStackTrace_1,unsupported=function(){return Error.captureStackTrace=function(t,e){Object.defineProperties(t,{stack:{configurable:!0,get:cache(function(){return(Error.prepareStackTrace||prepareStackTrace)(t,[])})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(t){if(t.cachedStack)return t.stack;var e=(Error.prepareStackTrace||prepareStackTrace)(t,[]);try{Object.defineProperties(t,{stack:{configurable:!0,writable:!0,enumerable:!1,value:e},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return e},{prepareStackTrace}},capability=capability$2,polyfill;capability("Error.captureStackTrace")?polyfill=v8:capability("Error.prototype.stack")?polyfill=nonV8:polyfill=unsupported;polyfill();(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(T,N,C,F){F===void 0&&(F=C),Object.defineProperty(T,F,{enumerable:!0,get:function(){return N[C]}})}:function(T,N,C,F){F===void 0&&(F=C),T[F]=N[C]}),b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(T,N){Object.defineProperty(T,"default",{enumerable:!0,value:N})}:function(T,N){T.default=N}),w=commonjsGlobal&&commonjsGlobal.__importStar||function(T){if(T&&T.__esModule)return T;var N={};if(T!=null)for(var C in T)C!=="default"&&Object.hasOwnProperty.call(T,C)&&e(N,T,C);return b(N,T),N},$=commonjsGlobal&&commonjsGlobal.__exportStar||function(T,N){for(var C in T)C!=="default"&&!N.hasOwnProperty(C)&&e(N,T,C)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=w(browserIndex),$(commonIndex,t),$(browserConnect,t)})(browserIndex$1);var __createBinding$9=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$9=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$9=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$9(e,t,b);return __setModuleDefault$9(e,t),e},__importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(near$1,"__esModule",{value:!0});near$1.NearAuthProvider=void 0;const caip_1$1=cjs,util_1=util$8,uint8arrays$1=__importStar$9(uint8arrays$7),nearApiJs=__importStar$9(browserIndex$1),crypto_1=__importDefault$d(require$$1$5),getSignature=async(t,e,b,w)=>{const $=await t.signMessage(b,e,w);return uint8arrays$1.toString($.signature,"base64")};class NearAuthProvider{constructor(e,b,w){this.near=e,this.accountName=b,this.chainRef=w,this.isAuthProvider=!0}async authenticate(e){const b=await this.near.connection.signer.keyStore.getKey(this.chainRef,this.accountName),w=await nearApiJs.InMemorySigner.fromKeyPair(this.chainRef,this.accountName,b),$=crypto_1.default.createHash("sha256").update(e).digest(),{signature:T}=await w.signMessage($,this.accountName,this.chainRef);return uint8arrays$1.toString(T,"base16")}async createLink(e){const b=await this.near.connection.signer.keyStore.getKey(this.chainRef,this.accountName),w=await nearApiJs.InMemorySigner.fromKeyPair(this.chainRef,this.accountName,b),{message:$,timestamp:T}=util_1.getConsentMessage(e,!0),N=await getSignature(w,this.accountName,$,this.chainRef),C=await this.accountId();return{version:2,type:"near",message:$,signature:N,account:C.toString(),timestamp:T}}async accountId(){const e=await this.near.connection.signer.keyStore.getKey(this.chainRef,this.accountName),w=await(await nearApiJs.InMemorySigner.fromKeyPair(this.chainRef,this.accountName,e)).getPublicKey(this.accountName,this.chainRef),$=uint8arrays$1.toString(w.data,"base58btc");return new caip_1$1.AccountID({address:$,chainId:`near:${this.chainRef}`})}withAddress(e){return new NearAuthProvider(this.near,e,this.chainRef)}}near$1.NearAuthProvider=NearAuthProvider;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ie,ue,ne,ce){ce===void 0&&(ce=ne),Object.defineProperty(ie,ce,{enumerable:!0,get:function(){return ue[ne]}})}:function(ie,ue,ne,ce){ce===void 0&&(ce=ne),ie[ce]=ue[ne]}),b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ie,ue){Object.defineProperty(ie,"default",{enumerable:!0,value:ue})}:function(ie,ue){ie.default=ue}),w=commonjsGlobal&&commonjsGlobal.__exportStar||function(ie,ue){for(var ne in ie)ne!=="default"&&!Object.prototype.hasOwnProperty.call(ue,ne)&&e(ue,ie,ne)},$=commonjsGlobal&&commonjsGlobal.__importStar||function(ie){if(ie&&ie.__esModule)return ie;var ue={};if(ie!=null)for(var ne in ie)ne!=="default"&&Object.prototype.hasOwnProperty.call(ie,ne)&&e(ue,ie,ne);return b(ue,ie),ue};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosAuthProvider=t.NearAuthProvider=t.CosmosAuthProvider=t.PolkadotAuthProvider=t.EosioAuthProvider=t.FilecoinAuthProvider=t.AvalancheAuthProvider=t.EthereumAuthProvider=t.tezos=t.cosmos=t.eosio=t.polkadot=t.filecoin=t.ethereum=void 0,w(authProvider,t),t.ethereum=$(ethereum),w(util$8,t),t.filecoin=$(filecoin),t.polkadot=$(polkadot),t.eosio=$(eosio),t.cosmos=$(cosmos),t.tezos=$(tezos);var T=ethereum;Object.defineProperty(t,"EthereumAuthProvider",{enumerable:!0,get:function(){return T.EthereumAuthProvider}});var N=ethereum;Object.defineProperty(t,"AvalancheAuthProvider",{enumerable:!0,get:function(){return N.EthereumAuthProvider}});var C=filecoin;Object.defineProperty(t,"FilecoinAuthProvider",{enumerable:!0,get:function(){return C.FilecoinAuthProvider}});var F=eosio;Object.defineProperty(t,"EosioAuthProvider",{enumerable:!0,get:function(){return F.EosioAuthProvider}});var G=polkadot;Object.defineProperty(t,"PolkadotAuthProvider",{enumerable:!0,get:function(){return G.PolkadotAuthProvider}});var J=cosmos;Object.defineProperty(t,"CosmosAuthProvider",{enumerable:!0,get:function(){return J.CosmosAuthProvider}});var Z=near$1;Object.defineProperty(t,"NearAuthProvider",{enumerable:!0,get:function(){return Z.NearAuthProvider}});var re=tezos;Object.defineProperty(t,"TezosAuthProvider",{enumerable:!0,get:function(){return re.TezosAuthProvider}})})(lib$e);let nanoid=(t=21)=>{let e="",b=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let w=b[t]&63;w<36?e+=w.toString(36):w<62?e+=(w-26).toString(36).toUpperCase():w<63?e+="_":e+="-"}return e};function asyncGeneratorStep$5(t,e,b,w,$,T,N){try{var C=t[T](N),F=C.value}catch(G){b(G);return}C.done?e(F):Promise.resolve(F).then(w,$)}function _asyncToGenerator$5(t){return function(){var e=this,b=arguments;return new Promise(function(w,$){var T=t.apply(e,b);function N(F){asyncGeneratorStep$5(T,w,$,N,C,"next",F)}function C(F){asyncGeneratorStep$5(T,w,$,N,C,"throw",F)}N(void 0)})}}function _inheritsLoose$1(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _getPrototypeOf$1(t){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},_getPrototypeOf$1(t)}function _setPrototypeOf$1(t,e){return _setPrototypeOf$1=Object.setPrototypeOf||function(w,$){return w.__proto__=$,w},_setPrototypeOf$1(t,e)}function _isNativeReflectConstruct$1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _construct$1(t,e,b){return _isNativeReflectConstruct$1()?_construct$1=Reflect.construct:_construct$1=function($,T,N){var C=[null];C.push.apply(C,T);var F=Function.bind.apply($,C),G=new F;return N&&_setPrototypeOf$1(G,N.prototype),G},_construct$1.apply(null,arguments)}function _isNativeFunction$1(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _wrapNativeSuper$1(t){var e=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper$1=function(w){if(w===null||!_isNativeFunction$1(w))return w;if(typeof w!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(w))return e.get(w);e.set(w,$)}function $(){return _construct$1(w,arguments,_getPrototypeOf$1(this).constructor)}return $.prototype=Object.create(w.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1($,w)},_wrapNativeSuper$1(t)}function _assertThisInitialized$1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function createCommonjsModule$5(t,e){return e={exports:{}},t(e,e.exports),e.exports}var runtime_1$5=createCommonjsModule$5(function(t){var e=function(b){var w=Object.prototype,$=w.hasOwnProperty,T,N=typeof Symbol=="function"?Symbol:{},C=N.iterator||"@@iterator",F=N.asyncIterator||"@@asyncIterator",G=N.toStringTag||"@@toStringTag";function J(H,j,L){return Object.defineProperty(H,j,{value:L,enumerable:!0,configurable:!0,writable:!0}),H[j]}try{J({},"")}catch{J=function(j,L,q){return j[L]=q}}function Z(H,j,L,q){var U=j&&j.prototype instanceof ye?j:ye,oe=Object.create(U.prototype),ve=new B(q||[]);return oe._invoke=pe(H,L,ve),oe}b.wrap=Z;function re(H,j,L){try{return{type:"normal",arg:H.call(j,L)}}catch(q){return{type:"throw",arg:q}}}var ie="suspendedStart",ue="suspendedYield",ne="executing",ce="completed",ae={};function ye(){}function $e(){}function _e(){}var be={};be[C]=function(){return this};var xe=Object.getPrototypeOf,ee=xe&&xe(xe(V([])));ee&&ee!==w&&$.call(ee,C)&&(be=ee);var he=_e.prototype=ye.prototype=Object.create(be);$e.prototype=he.constructor=_e,_e.constructor=$e,$e.displayName=J(_e,G,"GeneratorFunction");function we(H){["next","throw","return"].forEach(function(j){J(H,j,function(L){return this._invoke(j,L)})})}b.isGeneratorFunction=function(H){var j=typeof H=="function"&&H.constructor;return j?j===$e||(j.displayName||j.name)==="GeneratorFunction":!1},b.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,_e):(H.__proto__=_e,J(H,G,"GeneratorFunction")),H.prototype=Object.create(he),H},b.awrap=function(H){return{__await:H}};function Ne(H,j){function L(oe,ve,fe,Oe){var Se=re(H[oe],H,ve);if(Se.type==="throw")Oe(Se.arg);else{var Te=Se.arg,Ae=Te.value;return Ae&&typeof Ae=="object"&&$.call(Ae,"__await")?j.resolve(Ae.__await).then(function(le){L("next",le,fe,Oe)},function(le){L("throw",le,fe,Oe)}):j.resolve(Ae).then(function(le){Te.value=le,fe(Te)},function(le){return L("throw",le,fe,Oe)})}}var q;function U(oe,ve){function fe(){return new j(function(Oe,Se){L(oe,ve,Oe,Se)})}return q=q?q.then(fe,fe):fe()}this._invoke=U}we(Ne.prototype),Ne.prototype[F]=function(){return this},b.AsyncIterator=Ne,b.async=function(H,j,L,q,U){U===void 0&&(U=Promise);var oe=new Ne(Z(H,j,L,q),U);return b.isGeneratorFunction(j)?oe:oe.next().then(function(ve){return ve.done?ve.value:oe.next()})};function pe(H,j,L){var q=ie;return function(oe,ve){if(q===ne)throw new Error("Generator is already running");if(q===ce){if(oe==="throw")throw ve;return Q()}for(L.method=oe,L.arg=ve;;){var fe=L.delegate;if(fe){var Oe=te(fe,L);if(Oe){if(Oe===ae)continue;return Oe}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(q===ie)throw q=ce,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);q=ne;var Se=re(H,j,L);if(Se.type==="normal"){if(q=L.done?ce:ue,Se.arg===ae)continue;return{value:Se.arg,done:L.done}}else Se.type==="throw"&&(q=ce,L.method="throw",L.arg=Se.arg)}}}function te(H,j){var L=H.iterator[j.method];if(L===T){if(j.delegate=null,j.method==="throw"){if(H.iterator.return&&(j.method="return",j.arg=T,te(H,j),j.method==="throw"))return ae;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var q=re(L,H.iterator,j.arg);if(q.type==="throw")return j.method="throw",j.arg=q.arg,j.delegate=null,ae;var U=q.arg;if(!U)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,ae;if(U.done)j[H.resultName]=U.value,j.next=H.nextLoc,j.method!=="return"&&(j.method="next",j.arg=T);else return U;return j.delegate=null,ae}we(he),J(he,G,"Generator"),he[C]=function(){return this},he.toString=function(){return"[object Generator]"};function Y(H){var j={tryLoc:H[0]};1 in H&&(j.catchLoc=H[1]),2 in H&&(j.finallyLoc=H[2],j.afterLoc=H[3]),this.tryEntries.push(j)}function R(H){var j=H.completion||{};j.type="normal",delete j.arg,H.completion=j}function B(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}b.keys=function(H){var j=[];for(var L in H)j.push(L);return j.reverse(),function q(){for(;j.length;){var U=j.pop();if(U in H)return q.value=U,q.done=!1,q}return q.done=!0,q}};function V(H){if(H){var j=H[C];if(j)return j.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var L=-1,q=function U(){for(;++L<H.length;)if($.call(H,L))return U.value=H[L],U.done=!1,U;return U.value=T,U.done=!0,U};return q.next=q}}return{next:Q}}b.values=V;function Q(){return{value:T,done:!0}}return B.prototype={constructor:B,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=T,this.done=!1,this.delegate=null,this.method="next",this.arg=T,this.tryEntries.forEach(R),!H)for(var j in this)j.charAt(0)==="t"&&$.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=T)},stop:function(){this.done=!0;var H=this.tryEntries[0],j=H.completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var j=this;function L(Oe,Se){return oe.type="throw",oe.arg=H,j.next=Oe,Se&&(j.method="next",j.arg=T),!!Se}for(var q=this.tryEntries.length-1;q>=0;--q){var U=this.tryEntries[q],oe=U.completion;if(U.tryLoc==="root")return L("end");if(U.tryLoc<=this.prev){var ve=$.call(U,"catchLoc"),fe=$.call(U,"finallyLoc");if(ve&&fe){if(this.prev<U.catchLoc)return L(U.catchLoc,!0);if(this.prev<U.finallyLoc)return L(U.finallyLoc)}else if(ve){if(this.prev<U.catchLoc)return L(U.catchLoc,!0)}else if(fe){if(this.prev<U.finallyLoc)return L(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.tryLoc<=this.prev&&$.call(q,"finallyLoc")&&this.prev<q.finallyLoc){var U=q;break}}U&&(H==="break"||H==="continue")&&U.tryLoc<=j&&j<=U.finallyLoc&&(U=null);var oe=U?U.completion:{};return oe.type=H,oe.arg=j,U?(this.method="next",this.next=U.finallyLoc,ae):this.complete(oe)},complete:function(H,j){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&j&&(this.next=j),ae},finish:function(H){for(var j=this.tryEntries.length-1;j>=0;--j){var L=this.tryEntries[j];if(L.finallyLoc===H)return this.complete(L.completion,L.afterLoc),R(L),ae}},catch:function(H){for(var j=this.tryEntries.length-1;j>=0;--j){var L=this.tryEntries[j];if(L.tryLoc===H){var q=L.completion;if(q.type==="throw"){var U=q.arg;R(L)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(H,j,L){return this.delegate={iterator:V(H),resultName:j,nextLoc:L},this.method==="next"&&(this.arg=T),ae}},b}(t.exports);try{regeneratorRuntime=e}catch{Function("r","regeneratorRuntime = r")(e)}}),_ERROR_MESSAGE$1,ERROR_CODE$1;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(ERROR_CODE$1||(ERROR_CODE$1={}));var ERROR_MESSAGE$1=(_ERROR_MESSAGE$1={},_ERROR_MESSAGE$1[ERROR_CODE$1.PARSE_ERROR]="Parse error",_ERROR_MESSAGE$1[ERROR_CODE$1.INVALID_REQUEST]="Invalid request",_ERROR_MESSAGE$1[ERROR_CODE$1.METHOD_NOT_FOUND]="Method not found",_ERROR_MESSAGE$1[ERROR_CODE$1.INVALID_PARAMS]="Invalid params",_ERROR_MESSAGE$1[ERROR_CODE$1.INTERNAL_ERROR]="Internal error",_ERROR_MESSAGE$1);function isServerError$1(t){return-32e3>=t&&t>=-32099}function getErrorMessage$1(t){var e;return(e=ERROR_MESSAGE$1[t.toString()])!=null?e:isServerError$1(t)?"Server error":"Application error"}var RPCError$1=function(t){_inheritsLoose$1(e,t);function e(w,$,T){var N;return N=t.call(this)||this,Object.setPrototypeOf(_assertThisInitialized$1(N),e.prototype),N.code=w,N.data=T,N.message=$!=null?$:getErrorMessage$1(w),N}e.fromObject=function($){return new e($.code,$.message,$.data)};var b=e.prototype;return b.toObject=function(){return{code:this.code,data:this.data,message:this.message}},e}(_wrapNativeSuper$1(Error));function createErrorFactory$1(t){var e=ERROR_MESSAGE$1[t];return function(w){return new RPCError$1(t,e,w)}}ERROR_CODE$1.PARSE_ERROR;ERROR_CODE$1.INVALID_REQUEST;ERROR_CODE$1.METHOD_NOT_FOUND;ERROR_CODE$1.INVALID_PARAMS;ERROR_CODE$1.INTERNAL_ERROR;var RPCClient$1=function(){function t(b){this.connection=b}var e=t.prototype;return e.createID=function(){return nanoid()},e.request=function(){var b=_asyncToGenerator$5(runtime_1$5.mark(function $(T,N){var C;return runtime_1$5.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return N===void 0&&(N=void 0),G.next=3,this.connection.send({jsonrpc:"2.0",id:this.createID(),method:T,params:N});case 3:if(C=G.sent,C!=null){G.next=6;break}throw new Error("Missing response");case 6:if(C.error==null){G.next=8;break}throw RPCError$1.fromObject(C.error);case 8:return G.abrupt("return",C.result);case 9:case"end":return G.stop()}},$,this)}));function w($,T){return b.apply(this,arguments)}return w}(),e.notify=function(){var b=_asyncToGenerator$5(runtime_1$5.mark(function $(T,N){return runtime_1$5.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return N===void 0&&(N=void 0),F.next=3,this.connection.send({jsonrpc:"2.0",method:T,params:N});case 3:case"end":return F.stop()}},$,this)}));function w($,T){return b.apply(this,arguments)}return w}(),t}();function createErrorResponse$1(t,e){return{jsonrpc:"2.0",id:t,error:{code:e,message:getErrorMessage$1(e)}}}function fallbackOnHandlerError$1(t,e,b){console.warn("Unhandled handler error",e,b)}function fallbackOnInvalidMessage$1(t,e){console.warn("Unhandled invalid message",e)}function fallbackOnNotification$1(t,e){console.warn("Unhandled notification",e)}function createHandler$1(t,e){var b,w,$;e===void 0&&(e={});var T=(b=e.onHandlerError)!=null?b:fallbackOnHandlerError$1,N=(w=e.onInvalidMessage)!=null?w:fallbackOnInvalidMessage$1,C=($=e.onNotification)!=null?$:fallbackOnNotification$1;return function(){var F=_asyncToGenerator$5(runtime_1$5.mark(function J(Z,re){var ie,ue,ne,ce,ae,ye,$e;return runtime_1$5.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(ie=re.id,!(re.jsonrpc!=="2.0"||re.method==null)){be.next=6;break}if(ie!=null){be.next=5;break}return N(Z,re),be.abrupt("return",null);case 5:return be.abrupt("return",createErrorResponse$1(ie,ERROR_CODE$1.INVALID_REQUEST));case 6:if(ue=t[re.method],ue!=null){be.next=12;break}if(ie!=null){be.next=11;break}return C(Z,re),be.abrupt("return",null);case 11:return be.abrupt("return",createErrorResponse$1(ie,ERROR_CODE$1.METHOD_NOT_FOUND));case 12:if(be.prev=12,ne=ue(Z,re.params),ne!=null){be.next=18;break}be.t0=ne,be.next=26;break;case 18:if(typeof ne.then!="function"){be.next=24;break}return be.next=21,ne;case 21:be.t1=be.sent,be.next=25;break;case 24:be.t1=ne;case 25:be.t0=be.t1;case 26:return ce=be.t0,be.abrupt("return",ie==null?null:{jsonrpc:"2.0",id:ie,result:ce});case 30:if(be.prev=30,be.t2=be.catch(12),ie!=null){be.next=35;break}return T(Z,re,be.t2),be.abrupt("return",null);case 35:return be.t2 instanceof RPCError$1?ae=be.t2.toObject():(T(Z,re,be.t2),$e=(ye=be.t2.code)!=null?ye:-32e3,ae={code:$e,message:be.t2.message||getErrorMessage$1($e)}),be.abrupt("return",{jsonrpc:"2.0",id:ie,error:ae});case 37:case"end":return be.stop()}},J,null,[[12,30]])}));function G(J,Z){return F.apply(this,arguments)}return G}()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$2=function(t,e){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var $ in w)w.hasOwnProperty($)&&(b[$]=w[$])},extendStatics$2(t,e)};function __extends$3(t,e){extendStatics$2(t,e);function b(){this.constructor=t}t.prototype=e===null?Object.create(e):(b.prototype=e.prototype,new b)}function isFunction$2(t){return typeof t=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$2={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}_enable_super_gross_mode_that_will_cause_bad_things=t},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(t){setTimeout(function(){throw t},0)}var empty$3={closed:!0,next:function(t){},error:function(t){if(config$2.useDeprecatedSynchronousErrorHandling)throw t;hostReportError(t)},complete:function(){}},isArray$7=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function isObject(t){return t!==null&&typeof t=="object"}var UnsubscriptionErrorImpl=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(b,w){return w+1+") "+b.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),UnsubscriptionError$2=UnsubscriptionErrorImpl,Subscription$2=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var b=this,w=b._parentOrParents,$=b._ctorUnsubscribe,T=b._unsubscribe,N=b._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,w instanceof t)w.remove(this);else if(w!==null)for(var C=0;C<w.length;++C){var F=w[C];F.remove(this)}if(isFunction$2(T)){$&&(this._unsubscribe=void 0);try{T.call(this)}catch(Z){e=Z instanceof UnsubscriptionError$2?flattenUnsubscriptionErrors(Z.errors):[Z]}}if(isArray$7(N))for(var C=-1,G=N.length;++C<G;){var J=N[C];if(isObject(J))try{J.unsubscribe()}catch(re){e=e||[],re instanceof UnsubscriptionError$2?e=e.concat(flattenUnsubscriptionErrors(re.errors)):e.push(re)}}if(e)throw new UnsubscriptionError$2(e)}},t.prototype.add=function(e){var b=e;if(!e)return t.EMPTY;switch(typeof e){case"function":b=new t(e);case"object":if(b===this||b.closed||typeof b.unsubscribe!="function")return b;if(this.closed)return b.unsubscribe(),b;if(!(b instanceof t)){var w=b;b=new t,b._subscriptions=[w]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var $=b._parentOrParents;if($===null)b._parentOrParents=this;else if($ instanceof t){if($===this)return b;b._parentOrParents=[$,this]}else if($.indexOf(this)===-1)$.push(this);else return b;var T=this._subscriptions;return T===null?this._subscriptions=[b]:T.push(b),b},t.prototype.remove=function(e){var b=this._subscriptions;if(b){var w=b.indexOf(e);w!==-1&&b.splice(w,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function flattenUnsubscriptionErrors(t){return t.reduce(function(e,b){return e.concat(b instanceof UnsubscriptionError$2?b.errors:b)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber$2=function(t){__extends$3(e,t);function e(b,w,$){var T=t.call(this)||this;switch(T.syncErrorValue=null,T.syncErrorThrown=!1,T.syncErrorThrowable=!1,T.isStopped=!1,arguments.length){case 0:T.destination=empty$3;break;case 1:if(!b){T.destination=empty$3;break}if(typeof b=="object"){b instanceof e?(T.syncErrorThrowable=b.syncErrorThrowable,T.destination=b,b.add(T)):(T.syncErrorThrowable=!0,T.destination=new SafeSubscriber$2(T,b));break}default:T.syncErrorThrowable=!0,T.destination=new SafeSubscriber$2(T,b,w,$);break}return T}return e.prototype[rxSubscriber]=function(){return this},e.create=function(b,w,$){var T=new e(b,w,$);return T.syncErrorThrowable=!1,T},e.prototype.next=function(b){this.isStopped||this._next(b)},e.prototype.error=function(b){this.isStopped||(this.isStopped=!0,this._error(b))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(b){this.destination.next(b)},e.prototype._error=function(b){this.destination.error(b),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var b=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=b,this},e}(Subscription$2),SafeSubscriber$2=function(t){__extends$3(e,t);function e(b,w,$,T){var N=t.call(this)||this;N._parentSubscriber=b;var C,F=N;return isFunction$2(w)?C=w:w&&(C=w.next,$=w.error,T=w.complete,w!==empty$3&&(F=Object.create(w),isFunction$2(F.unsubscribe)&&N.add(F.unsubscribe.bind(F)),F.unsubscribe=N.unsubscribe.bind(N))),N._context=F,N._next=C,N._error=$,N._complete=T,N}return e.prototype.next=function(b){if(!this.isStopped&&this._next){var w=this._parentSubscriber;!config$2.useDeprecatedSynchronousErrorHandling||!w.syncErrorThrowable?this.__tryOrUnsub(this._next,b):this.__tryOrSetError(w,this._next,b)&&this.unsubscribe()}},e.prototype.error=function(b){if(!this.isStopped){var w=this._parentSubscriber,$=config$2.useDeprecatedSynchronousErrorHandling;if(this._error)!$||!w.syncErrorThrowable?(this.__tryOrUnsub(this._error,b),this.unsubscribe()):(this.__tryOrSetError(w,this._error,b),this.unsubscribe());else if(w.syncErrorThrowable)$?(w.syncErrorValue=b,w.syncErrorThrown=!0):hostReportError(b),this.unsubscribe();else{if(this.unsubscribe(),$)throw b;hostReportError(b)}}},e.prototype.complete=function(){var b=this;if(!this.isStopped){var w=this._parentSubscriber;if(this._complete){var $=function(){return b._complete.call(b._context)};!config$2.useDeprecatedSynchronousErrorHandling||!w.syncErrorThrowable?(this.__tryOrUnsub($),this.unsubscribe()):(this.__tryOrSetError(w,$),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(b,w){try{b.call(this._context,w)}catch($){if(this.unsubscribe(),config$2.useDeprecatedSynchronousErrorHandling)throw $;hostReportError($)}},e.prototype.__tryOrSetError=function(b,w,$){if(!config$2.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{w.call(this._context,$)}catch(T){return config$2.useDeprecatedSynchronousErrorHandling?(b.syncErrorValue=T,b.syncErrorThrown=!0,!0):(hostReportError(T),!0)}return!1},e.prototype._unsubscribe=function(){var b=this._parentSubscriber;this._context=null,this._parentSubscriber=null,b.unsubscribe()},e}(Subscriber$2);function canReportError(t){for(;t;){var e=t,b=e.closed,w=e.destination,$=e.isStopped;if(b||$)return!1;w&&w instanceof Subscriber$2?t=w:t=null}return!0}function toSubscriber(t,e,b){if(t){if(t instanceof Subscriber$2)return t;if(t[rxSubscriber])return t[rxSubscriber]()}return!t&&!e&&!b?new Subscriber$2(empty$3):new Subscriber$2(t,e,b)}var observable$2=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$4(t){return t}function pipe$2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pipeFromArray$2(t)}function pipeFromArray$2(t){return t.length===0?identity$4:t.length===1?t[0]:function(b){return t.reduce(function(w,$){return $(w)},b)}}var Observable$2=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var b=new t;return b.source=this,b.operator=e,b},t.prototype.subscribe=function(e,b,w){var $=this.operator,T=toSubscriber(e,b,w);if($?T.add($.call(T,this.source)):T.add(this.source||config$2.useDeprecatedSynchronousErrorHandling&&!T.syncErrorThrowable?this._subscribe(T):this._trySubscribe(T)),config$2.useDeprecatedSynchronousErrorHandling&&T.syncErrorThrowable&&(T.syncErrorThrowable=!1,T.syncErrorThrown))throw T.syncErrorValue;return T},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(b){config$2.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=b),canReportError(e)?e.error(b):console.warn(b)}},t.prototype.forEach=function(e,b){var w=this;return b=getPromiseCtor$2(b),new b(function($,T){var N;N=w.subscribe(function(C){try{e(C)}catch(F){T(F),N&&N.unsubscribe()}},T,$)})},t.prototype._subscribe=function(e){var b=this.source;return b&&b.subscribe(e)},t.prototype[observable$2]=function(){return this},t.prototype.pipe=function(){for(var e=[],b=0;b<arguments.length;b++)e[b]=arguments[b];return e.length===0?this:pipeFromArray$2(e)(this)},t.prototype.toPromise=function(e){var b=this;return e=getPromiseCtor$2(e),new e(function(w,$){var T;b.subscribe(function(N){return T=N},function(N){return $(N)},function(){return w(T)})})},t.create=function(e){return new t(e)},t}();function getPromiseCtor$2(t){if(t||(t=config$2.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var EMPTY$2=new Observable$2(function(t){return t.complete()});function empty$2(t){return t?emptyScheduled$2(t):EMPTY$2}function emptyScheduled$2(t){return new Observable$2(function(e){return t.schedule(function(){return e.complete()})})}var subscribeToArray=function(t){return function(e){for(var b=0,w=t.length;b<w&&!e.closed;b++)e.next(t[b]);e.complete()}};function scheduleArray$2(t,e){return new Observable$2(function(b){var w=new Subscription$2,$=0;return w.add(e.schedule(function(){if($===t.length){b.complete();return}b.next(t[$++]),b.closed||w.add(this.schedule())})),w})}function noop$2(){}var ArgumentOutOfRangeErrorImpl=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),ArgumentOutOfRangeError$2=ArgumentOutOfRangeErrorImpl,EmptyErrorImpl=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),EmptyError$2=EmptyErrorImpl;function map$2(t,e){return function(w){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return w.lift(new MapOperator(t,e))}}var MapOperator=function(){function t(e,b){this.project=e,this.thisArg=b}return t.prototype.call=function(e,b){return b.subscribe(new MapSubscriber(e,this.project,this.thisArg))},t}(),MapSubscriber=function(t){__extends$3(e,t);function e(b,w,$){var T=t.call(this,b)||this;return T.project=w,T.count=0,T.thisArg=$||T,T}return e.prototype._next=function(b){var w;try{w=this.project.call(this.thisArg,b,this.count++)}catch($){this.destination.error($);return}this.destination.next(w)},e}(Subscriber$2),subscribeToPromise=function(t){return function(e){return t.then(function(b){e.closed||(e.next(b),e.complete())},function(b){return e.error(b)}).then(null,hostReportError),e}};function getSymbolIterator$2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator$2=getSymbolIterator$2(),subscribeToIterable=function(t){return function(e){var b=t[iterator$2]();do{var w=void 0;try{w=b.next()}catch($){return e.error($),e}if(w.done){e.complete();break}if(e.next(w.value),e.closed)break}while(!0);return typeof b.return=="function"&&e.add(function(){b.return&&b.return()}),e}},subscribeToObservable=function(t){return function(e){var b=t[observable$2]();if(typeof b.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return b.subscribe(e)}},isArrayLike$2=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function isPromise$2(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var subscribeTo=function(t){if(!!t&&typeof t[observable$2]=="function")return subscribeToObservable(t);if(isArrayLike$2(t))return subscribeToArray(t);if(isPromise$2(t))return subscribeToPromise(t);if(!!t&&typeof t[iterator$2]=="function")return subscribeToIterable(t);var e=isObject(t)?"an invalid object":"'"+t+"'",b="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(b)};function scheduleObservable$2(t,e){return new Observable$2(function(b){var w=new Subscription$2;return w.add(e.schedule(function(){var $=t[observable$2]();w.add($.subscribe({next:function(T){w.add(e.schedule(function(){return b.next(T)}))},error:function(T){w.add(e.schedule(function(){return b.error(T)}))},complete:function(){w.add(e.schedule(function(){return b.complete()}))}}))})),w})}function schedulePromise$2(t,e){return new Observable$2(function(b){var w=new Subscription$2;return w.add(e.schedule(function(){return t.then(function($){w.add(e.schedule(function(){b.next($),w.add(e.schedule(function(){return b.complete()}))}))},function($){w.add(e.schedule(function(){return b.error($)}))})})),w})}function scheduleIterable$2(t,e){if(!t)throw new Error("Iterable cannot be null");return new Observable$2(function(b){var w=new Subscription$2,$;return w.add(function(){$&&typeof $.return=="function"&&$.return()}),w.add(e.schedule(function(){$=t[iterator$2](),w.add(e.schedule(function(){if(!b.closed){var T,N;try{var C=$.next();T=C.value,N=C.done}catch(F){b.error(F);return}N?b.complete():(b.next(T),this.schedule())}}))})),w})}function isInteropObservable$2(t){return t&&typeof t[observable$2]=="function"}function isIterable$2(t){return t&&typeof t[iterator$2]=="function"}function scheduled$2(t,e){if(t!=null){if(isInteropObservable$2(t))return scheduleObservable$2(t,e);if(isPromise$2(t))return schedulePromise$2(t,e);if(isArrayLike$2(t))return scheduleArray$2(t,e);if(isIterable$2(t)||typeof t=="string")return scheduleIterable$2(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function from$2(t,e){return e?scheduled$2(t,e):t instanceof Observable$2?t:new Observable$2(subscribeTo(t))}var SimpleInnerSubscriber=function(t){__extends$3(e,t);function e(b){var w=t.call(this)||this;return w.parent=b,w}return e.prototype._next=function(b){this.parent.notifyNext(b)},e.prototype._error=function(b){this.parent.notifyError(b),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Subscriber$2),SimpleOuterSubscriber=function(t){__extends$3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(b){this.destination.next(b)},e.prototype.notifyError=function(b){this.destination.error(b)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Subscriber$2);function innerSubscribe(t,e){if(!e.closed){if(t instanceof Observable$2)return t.subscribe(e);var b;try{b=subscribeTo(t)(e)}catch(w){e.error(w)}return b}}function mergeMap$2(t,e,b){return b===void 0&&(b=Number.POSITIVE_INFINITY),typeof e=="function"?function(w){return w.pipe(mergeMap$2(function($,T){return from$2(t($,T)).pipe(map$2(function(N,C){return e($,N,T,C)}))},b))}:(typeof e=="number"&&(b=e),function(w){return w.lift(new MergeMapOperator(t,b))})}var MergeMapOperator=function(){function t(e,b){b===void 0&&(b=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=b}return t.prototype.call=function(e,b){return b.subscribe(new MergeMapSubscriber(e,this.project,this.concurrent))},t}(),MergeMapSubscriber=function(t){__extends$3(e,t);function e(b,w,$){$===void 0&&($=Number.POSITIVE_INFINITY);var T=t.call(this,b)||this;return T.project=w,T.concurrent=$,T.hasCompleted=!1,T.buffer=[],T.active=0,T.index=0,T}return e.prototype._next=function(b){this.active<this.concurrent?this._tryNext(b):this.buffer.push(b)},e.prototype._tryNext=function(b){var w,$=this.index++;try{w=this.project(b,$)}catch(T){this.destination.error(T);return}this.active++,this._innerSub(w)},e.prototype._innerSub=function(b){var w=new SimpleInnerSubscriber(this),$=this.destination;$.add(w);var T=innerSubscribe(b,w);T!==w&&$.add(T)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(b){this.destination.next(b)},e.prototype.notifyComplete=function(){var b=this.buffer;this.active--,b.length>0?this._next(b.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(SimpleOuterSubscriber);function fromEvent$2(t,e,b,w){return isFunction$2(b)&&(w=b,b=void 0),w?fromEvent$2(t,e,b).pipe(map$2(function($){return isArray$7($)?w.apply(void 0,$):w($)})):new Observable$2(function($){function T(N){arguments.length>1?$.next(Array.prototype.slice.call(arguments)):$.next(N)}setupSubscription(t,e,T,$,b)})}function setupSubscription(t,e,b,w,$){var T;if(isEventTarget$2(t)){var N=t;t.addEventListener(e,b,$),T=function(){return N.removeEventListener(e,b,$)}}else if(isJQueryStyleEventEmitter$2(t)){var C=t;t.on(e,b),T=function(){return C.off(e,b)}}else if(isNodeStyleEventEmitter$2(t)){var F=t;t.addListener(e,b),T=function(){return F.removeListener(e,b)}}else if(t&&t.length)for(var G=0,J=t.length;G<J;G++)setupSubscription(t[G],e,b,w,$);else throw new TypeError("Invalid event target");w.add(T)}function isNodeStyleEventEmitter$2(t){return t&&typeof t.addListener=="function"&&typeof t.removeListener=="function"}function isJQueryStyleEventEmitter$2(t){return t&&typeof t.on=="function"&&typeof t.off=="function"}function isEventTarget$2(t){return t&&typeof t.addEventListener=="function"&&typeof t.removeEventListener=="function"}function filter$2(t,e){return function(w){return w.lift(new FilterOperator(t,e))}}var FilterOperator=function(){function t(e,b){this.predicate=e,this.thisArg=b}return t.prototype.call=function(e,b){return b.subscribe(new FilterSubscriber(e,this.predicate,this.thisArg))},t}(),FilterSubscriber=function(t){__extends$3(e,t);function e(b,w,$){var T=t.call(this,b)||this;return T.predicate=w,T.thisArg=$,T.count=0,T}return e.prototype._next=function(b){var w;try{w=this.predicate.call(this.thisArg,b,this.count++)}catch($){this.destination.error($);return}w&&this.destination.next(b)},e}(Subscriber$2);function defaultIfEmpty$2(t){return t===void 0&&(t=null),function(e){return e.lift(new DefaultIfEmptyOperator(t))}}var DefaultIfEmptyOperator=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,b){return b.subscribe(new DefaultIfEmptySubscriber(e,this.defaultValue))},t}(),DefaultIfEmptySubscriber=function(t){__extends$3(e,t);function e(b,w){var $=t.call(this,b)||this;return $.defaultValue=w,$.isEmpty=!0,$}return e.prototype._next=function(b){this.isEmpty=!1,this.destination.next(b)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Subscriber$2);function throwIfEmpty$2(t){return t===void 0&&(t=defaultErrorFactory$2),function(e){return e.lift(new ThrowIfEmptyOperator(t))}}var ThrowIfEmptyOperator=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,b){return b.subscribe(new ThrowIfEmptySubscriber(e,this.errorFactory))},t}(),ThrowIfEmptySubscriber=function(t){__extends$3(e,t);function e(b,w){var $=t.call(this,b)||this;return $.errorFactory=w,$.hasValue=!1,$}return e.prototype._next=function(b){this.hasValue=!0,this.destination.next(b)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var b=void 0;try{b=this.errorFactory()}catch(w){b=w}this.destination.error(b)},e}(Subscriber$2);function defaultErrorFactory$2(){return new EmptyError$2}function take$2(t){return function(e){return t===0?empty$2():e.lift(new TakeOperator(t))}}var TakeOperator=function(){function t(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError$2}return t.prototype.call=function(e,b){return b.subscribe(new TakeSubscriber(e,this.total))},t}(),TakeSubscriber=function(t){__extends$3(e,t);function e(b,w){var $=t.call(this,b)||this;return $.total=w,$.count=0,$}return e.prototype._next=function(b){var w=this.total,$=++this.count;$<=w&&(this.destination.next(b),$===w&&(this.destination.complete(),this.unsubscribe()))},e}(Subscriber$2);function first$2(t,e){var b=arguments.length>=2;return function(w){return w.pipe(t?filter$2(function($,T){return t($,T,w)}):identity$4,take$2(1),b?defaultIfEmpty$2(e):throwIfEmpty$2(function(){return new EmptyError$2}))}}function tap$2(t,e,b){return function($){return $.lift(new DoOperator(t,e,b))}}var DoOperator=function(){function t(e,b,w){this.nextOrObserver=e,this.error=b,this.complete=w}return t.prototype.call=function(e,b){return b.subscribe(new TapSubscriber(e,this.nextOrObserver,this.error,this.complete))},t}(),TapSubscriber=function(t){__extends$3(e,t);function e(b,w,$,T){var N=t.call(this,b)||this;return N._tapNext=noop$2,N._tapError=noop$2,N._tapComplete=noop$2,N._tapError=$||noop$2,N._tapComplete=T||noop$2,isFunction$2(w)?(N._context=N,N._tapNext=w):w&&(N._context=w,N._tapNext=w.next||noop$2,N._tapError=w.error||noop$2,N._tapComplete=w.complete||noop$2),N}return e.prototype._next=function(b){try{this._tapNext.call(this._context,b)}catch(w){this.destination.error(w);return}this.destination.next(b)},e.prototype._error=function(b){try{this._tapError.call(this._context,b)}catch(w){this.destination.error(w);return}this.destination.error(b)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(b){this.destination.error(b);return}return this.destination.complete()},e}(Subscriber$2);function createWrap(t){return function(b){return{__tw:!0,ns:t,msg:b}}}function createUnwrap(t){return function(b){if(b.__tw!==!0)throw new Error("Input is not a wrapped message");if(typeof b.ns!="string")throw new Error("Invalid namespace type for wrapped message: expected a string, got "+typeof b.ns);if(b.ns!==t)throw new Error("Invalid namespace for wrapped message: expected "+t+", got "+b.ns);return b.msg}}function createOriginFilter(t){return Array.isArray(t)||(t=[t]),function(e){return t.includes(e.origin)}}function createMessageObservable(t,e){var b=fromEvent$2(t,"message");if(e==null)return b;var w=typeof e=="function"?e:createOriginFilter(e);return b.pipe(filter$2(w))}function asyncGeneratorStep$4(t,e,b,w,$,T,N){try{var C=t[T](N),F=C.value}catch(G){b(G);return}C.done?e(F):Promise.resolve(F).then(w,$)}function _asyncToGenerator$4(t){return function(){var e=this,b=arguments;return new Promise(function(w,$){var T=t.apply(e,b);function N(F){asyncGeneratorStep$4(T,w,$,N,C,"next",F)}function C(F){asyncGeneratorStep$4(T,w,$,N,C,"throw",F)}N(void 0)})}}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var b={},w=Object.keys(t),$,T;for(T=0;T<w.length;T++)$=w[T],!(e.indexOf($)>=0)&&(b[$]=t[$]);return b}function createCommonjsModule$4(t,e){return e={exports:{}},t(e,e.exports),e.exports}var runtime_1$4=createCommonjsModule$4(function(t){var e=function(b){var w=Object.prototype,$=w.hasOwnProperty,T,N=typeof Symbol=="function"?Symbol:{},C=N.iterator||"@@iterator",F=N.asyncIterator||"@@asyncIterator",G=N.toStringTag||"@@toStringTag";function J(H,j,L){return Object.defineProperty(H,j,{value:L,enumerable:!0,configurable:!0,writable:!0}),H[j]}try{J({},"")}catch{J=function(j,L,q){return j[L]=q}}function Z(H,j,L,q){var U=j&&j.prototype instanceof ye?j:ye,oe=Object.create(U.prototype),ve=new B(q||[]);return oe._invoke=pe(H,L,ve),oe}b.wrap=Z;function re(H,j,L){try{return{type:"normal",arg:H.call(j,L)}}catch(q){return{type:"throw",arg:q}}}var ie="suspendedStart",ue="suspendedYield",ne="executing",ce="completed",ae={};function ye(){}function $e(){}function _e(){}var be={};J(be,C,function(){return this});var xe=Object.getPrototypeOf,ee=xe&&xe(xe(V([])));ee&&ee!==w&&$.call(ee,C)&&(be=ee);var he=_e.prototype=ye.prototype=Object.create(be);$e.prototype=_e,J(he,"constructor",_e),J(_e,"constructor",$e),$e.displayName=J(_e,G,"GeneratorFunction");function we(H){["next","throw","return"].forEach(function(j){J(H,j,function(L){return this._invoke(j,L)})})}b.isGeneratorFunction=function(H){var j=typeof H=="function"&&H.constructor;return j?j===$e||(j.displayName||j.name)==="GeneratorFunction":!1},b.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,_e):(H.__proto__=_e,J(H,G,"GeneratorFunction")),H.prototype=Object.create(he),H},b.awrap=function(H){return{__await:H}};function Ne(H,j){function L(oe,ve,fe,Oe){var Se=re(H[oe],H,ve);if(Se.type==="throw")Oe(Se.arg);else{var Te=Se.arg,Ae=Te.value;return Ae&&typeof Ae=="object"&&$.call(Ae,"__await")?j.resolve(Ae.__await).then(function(le){L("next",le,fe,Oe)},function(le){L("throw",le,fe,Oe)}):j.resolve(Ae).then(function(le){Te.value=le,fe(Te)},function(le){return L("throw",le,fe,Oe)})}}var q;function U(oe,ve){function fe(){return new j(function(Oe,Se){L(oe,ve,Oe,Se)})}return q=q?q.then(fe,fe):fe()}this._invoke=U}we(Ne.prototype),J(Ne.prototype,F,function(){return this}),b.AsyncIterator=Ne,b.async=function(H,j,L,q,U){U===void 0&&(U=Promise);var oe=new Ne(Z(H,j,L,q),U);return b.isGeneratorFunction(j)?oe:oe.next().then(function(ve){return ve.done?ve.value:oe.next()})};function pe(H,j,L){var q=ie;return function(oe,ve){if(q===ne)throw new Error("Generator is already running");if(q===ce){if(oe==="throw")throw ve;return Q()}for(L.method=oe,L.arg=ve;;){var fe=L.delegate;if(fe){var Oe=te(fe,L);if(Oe){if(Oe===ae)continue;return Oe}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(q===ie)throw q=ce,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);q=ne;var Se=re(H,j,L);if(Se.type==="normal"){if(q=L.done?ce:ue,Se.arg===ae)continue;return{value:Se.arg,done:L.done}}else Se.type==="throw"&&(q=ce,L.method="throw",L.arg=Se.arg)}}}function te(H,j){var L=H.iterator[j.method];if(L===T){if(j.delegate=null,j.method==="throw"){if(H.iterator.return&&(j.method="return",j.arg=T,te(H,j),j.method==="throw"))return ae;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var q=re(L,H.iterator,j.arg);if(q.type==="throw")return j.method="throw",j.arg=q.arg,j.delegate=null,ae;var U=q.arg;if(!U)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,ae;if(U.done)j[H.resultName]=U.value,j.next=H.nextLoc,j.method!=="return"&&(j.method="next",j.arg=T);else return U;return j.delegate=null,ae}we(he),J(he,G,"Generator"),J(he,C,function(){return this}),J(he,"toString",function(){return"[object Generator]"});function Y(H){var j={tryLoc:H[0]};1 in H&&(j.catchLoc=H[1]),2 in H&&(j.finallyLoc=H[2],j.afterLoc=H[3]),this.tryEntries.push(j)}function R(H){var j=H.completion||{};j.type="normal",delete j.arg,H.completion=j}function B(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}b.keys=function(H){var j=[];for(var L in H)j.push(L);return j.reverse(),function q(){for(;j.length;){var U=j.pop();if(U in H)return q.value=U,q.done=!1,q}return q.done=!0,q}};function V(H){if(H){var j=H[C];if(j)return j.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var L=-1,q=function U(){for(;++L<H.length;)if($.call(H,L))return U.value=H[L],U.done=!1,U;return U.value=T,U.done=!0,U};return q.next=q}}return{next:Q}}b.values=V;function Q(){return{value:T,done:!0}}return B.prototype={constructor:B,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=T,this.done=!1,this.delegate=null,this.method="next",this.arg=T,this.tryEntries.forEach(R),!H)for(var j in this)j.charAt(0)==="t"&&$.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=T)},stop:function(){this.done=!0;var H=this.tryEntries[0],j=H.completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var j=this;function L(Oe,Se){return oe.type="throw",oe.arg=H,j.next=Oe,Se&&(j.method="next",j.arg=T),!!Se}for(var q=this.tryEntries.length-1;q>=0;--q){var U=this.tryEntries[q],oe=U.completion;if(U.tryLoc==="root")return L("end");if(U.tryLoc<=this.prev){var ve=$.call(U,"catchLoc"),fe=$.call(U,"finallyLoc");if(ve&&fe){if(this.prev<U.catchLoc)return L(U.catchLoc,!0);if(this.prev<U.finallyLoc)return L(U.finallyLoc)}else if(ve){if(this.prev<U.catchLoc)return L(U.catchLoc,!0)}else if(fe){if(this.prev<U.finallyLoc)return L(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.tryLoc<=this.prev&&$.call(q,"finallyLoc")&&this.prev<q.finallyLoc){var U=q;break}}U&&(H==="break"||H==="continue")&&U.tryLoc<=j&&j<=U.finallyLoc&&(U=null);var oe=U?U.completion:{};return oe.type=H,oe.arg=j,U?(this.method="next",this.next=U.finallyLoc,ae):this.complete(oe)},complete:function(H,j){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&j&&(this.next=j),ae},finish:function(H){for(var j=this.tryEntries.length-1;j>=0;--j){var L=this.tryEntries[j];if(L.finallyLoc===H)return this.complete(L.completion,L.afterLoc),R(L),ae}},catch:function(H){for(var j=this.tryEntries.length-1;j>=0;--j){var L=this.tryEntries[j];if(L.tryLoc===H){var q=L.completion;if(q.type==="throw"){var U=q.arg;R(L)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(H,j,L){return this.delegate={iterator:V(H),resultName:j,nextLoc:L},this.method==="next"&&(this.arg=T),ae}},b}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}),_excluded2=["filter","methods","namespace","target"];function createNamespaceRequestHandlerOperator(t,e,b){b===void 0&&(b={});var w=createHandler$1(t,b),$=createUnwrap(e);return pipe$2(map$2(function(T){try{var N=$(T.data);return N.method?{type:"request",message:T,request:N}:null}catch{return null}}),filter$2(function(T){return T!==null}),mergeMap$2(function(){var T=_asyncToGenerator$4(runtime_1$4.mark(function N(C){return runtime_1$4.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.t0=C.message,G.t1=C.request,G.next=4,w(C.message,C.request);case 4:return G.t2=G.sent,G.abrupt("return",{type:"handled",message:G.t0,request:G.t1,response:G.t2});case 6:case"end":return G.stop()}},N)}));return function(N){return T.apply(this,arguments)}}()))}function createNamespaceServer(t){var e=t.filter,b=t.methods,w=t.namespace,$=t.target,T=_objectWithoutPropertiesLoose(t,_excluded2),N=createWrap(w);return createMessageObservable($,e).pipe(createNamespaceRequestHandlerOperator(b,w,T),tap$2(function(C){if(C.response!=null){var F,G=(F=C.message.source)!=null?F:window;G.postMessage(N(C.response),C.message.origin||"*")}}))}function createServer(t,e,b){return b===void 0&&(b=window),createNamespaceServer({methods:e,namespace:t,target:b})}function asyncGeneratorStep$3(t,e,b,w,$,T,N){try{var C=t[T](N),F=C.value}catch(G){b(G);return}C.done?e(F):Promise.resolve(F).then(w,$)}function _asyncToGenerator$3(t){return function(){var e=this,b=arguments;return new Promise(function(w,$){var T=t.apply(e,b);function N(F){asyncGeneratorStep$3(T,w,$,N,C,"next",F)}function C(F){asyncGeneratorStep$3(T,w,$,N,C,"throw",F)}N(void 0)})}}function createCommonjsModule$3(t,e){return e={exports:{}},t(e,e.exports),e.exports}var runtime_1$3=createCommonjsModule$3(function(t){var e=function(b){var w=Object.prototype,$=w.hasOwnProperty,T,N=typeof Symbol=="function"?Symbol:{},C=N.iterator||"@@iterator",F=N.asyncIterator||"@@asyncIterator",G=N.toStringTag||"@@toStringTag";function J(H,j,L){return Object.defineProperty(H,j,{value:L,enumerable:!0,configurable:!0,writable:!0}),H[j]}try{J({},"")}catch{J=function(L,q,U){return L[q]=U}}function Z(H,j,L,q){var U=j&&j.prototype instanceof ye?j:ye,oe=Object.create(U.prototype),ve=new B(q||[]);return oe._invoke=pe(H,L,ve),oe}b.wrap=Z;function re(H,j,L){try{return{type:"normal",arg:H.call(j,L)}}catch(q){return{type:"throw",arg:q}}}var ie="suspendedStart",ue="suspendedYield",ne="executing",ce="completed",ae={};function ye(){}function $e(){}function _e(){}var be={};J(be,C,function(){return this});var xe=Object.getPrototypeOf,ee=xe&&xe(xe(V([])));ee&&ee!==w&&$.call(ee,C)&&(be=ee);var he=_e.prototype=ye.prototype=Object.create(be);$e.prototype=_e,J(he,"constructor",_e),J(_e,"constructor",$e),$e.displayName=J(_e,G,"GeneratorFunction");function we(H){["next","throw","return"].forEach(function(j){J(H,j,function(L){return this._invoke(j,L)})})}b.isGeneratorFunction=function(H){var j=typeof H=="function"&&H.constructor;return j?j===$e||(j.displayName||j.name)==="GeneratorFunction":!1},b.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,_e):(H.__proto__=_e,J(H,G,"GeneratorFunction")),H.prototype=Object.create(he),H},b.awrap=function(H){return{__await:H}};function Ne(H,j){function L(oe,ve,fe,Oe){var Se=re(H[oe],H,ve);if(Se.type==="throw")Oe(Se.arg);else{var Te=Se.arg,Ae=Te.value;return Ae&&typeof Ae=="object"&&$.call(Ae,"__await")?j.resolve(Ae.__await).then(function(le){L("next",le,fe,Oe)},function(le){L("throw",le,fe,Oe)}):j.resolve(Ae).then(function(le){Te.value=le,fe(Te)},function(le){return L("throw",le,fe,Oe)})}}var q;function U(oe,ve){function fe(){return new j(function(Oe,Se){L(oe,ve,Oe,Se)})}return q=q?q.then(fe,fe):fe()}this._invoke=U}we(Ne.prototype),J(Ne.prototype,F,function(){return this}),b.AsyncIterator=Ne,b.async=function(H,j,L,q,U){U===void 0&&(U=Promise);var oe=new Ne(Z(H,j,L,q),U);return b.isGeneratorFunction(j)?oe:oe.next().then(function(ve){return ve.done?ve.value:oe.next()})};function pe(H,j,L){var q=ie;return function(oe,ve){if(q===ne)throw new Error("Generator is already running");if(q===ce){if(oe==="throw")throw ve;return Q()}for(L.method=oe,L.arg=ve;;){var fe=L.delegate;if(fe){var Oe=te(fe,L);if(Oe){if(Oe===ae)continue;return Oe}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(q===ie)throw q=ce,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);q=ne;var Se=re(H,j,L);if(Se.type==="normal"){if(q=L.done?ce:ue,Se.arg===ae)continue;return{value:Se.arg,done:L.done}}else Se.type==="throw"&&(q=ce,L.method="throw",L.arg=Se.arg)}}}function te(H,j){var L=H.iterator[j.method];if(L===T){if(j.delegate=null,j.method==="throw"){if(H.iterator.return&&(j.method="return",j.arg=T,te(H,j),j.method==="throw"))return ae;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var q=re(L,H.iterator,j.arg);if(q.type==="throw")return j.method="throw",j.arg=q.arg,j.delegate=null,ae;var U=q.arg;if(!U)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,ae;if(U.done)j[H.resultName]=U.value,j.next=H.nextLoc,j.method!=="return"&&(j.method="next",j.arg=T);else return U;return j.delegate=null,ae}we(he),J(he,G,"Generator"),J(he,C,function(){return this}),J(he,"toString",function(){return"[object Generator]"});function Y(H){var j={tryLoc:H[0]};1 in H&&(j.catchLoc=H[1]),2 in H&&(j.finallyLoc=H[2],j.afterLoc=H[3]),this.tryEntries.push(j)}function R(H){var j=H.completion||{};j.type="normal",delete j.arg,H.completion=j}function B(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}b.keys=function(H){var j=[];for(var L in H)j.push(L);return j.reverse(),function q(){for(;j.length;){var U=j.pop();if(U in H)return q.value=U,q.done=!1,q}return q.done=!0,q}};function V(H){if(H){var j=H[C];if(j)return j.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var L=-1,q=function U(){for(;++L<H.length;)if($.call(H,L))return U.value=H[L],U.done=!1,U;return U.value=T,U.done=!0,U};return q.next=q}}return{next:Q}}b.values=V;function Q(){return{value:T,done:!0}}return B.prototype={constructor:B,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=T,this.done=!1,this.delegate=null,this.method="next",this.arg=T,this.tryEntries.forEach(R),!j)for(var L in this)L.charAt(0)==="t"&&$.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=T)},stop:function(){this.done=!0;var j=this.tryEntries[0],L=j.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var L=this;function q(Se,Te){return ve.type="throw",ve.arg=j,L.next=Se,Te&&(L.method="next",L.arg=T),!!Te}for(var U=this.tryEntries.length-1;U>=0;--U){var oe=this.tryEntries[U],ve=oe.completion;if(oe.tryLoc==="root")return q("end");if(oe.tryLoc<=this.prev){var fe=$.call(oe,"catchLoc"),Oe=$.call(oe,"finallyLoc");if(fe&&Oe){if(this.prev<oe.catchLoc)return q(oe.catchLoc,!0);if(this.prev<oe.finallyLoc)return q(oe.finallyLoc)}else if(fe){if(this.prev<oe.catchLoc)return q(oe.catchLoc,!0)}else if(Oe){if(this.prev<oe.finallyLoc)return q(oe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(j,L){for(var q=this.tryEntries.length-1;q>=0;--q){var U=this.tryEntries[q];if(U.tryLoc<=this.prev&&$.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var oe=U;break}}oe&&(j==="break"||j==="continue")&&oe.tryLoc<=L&&L<=oe.finallyLoc&&(oe=null);var ve=oe?oe.completion:{};return ve.type=j,ve.arg=L,oe?(this.method="next",this.next=oe.finallyLoc,ae):this.complete(ve)},complete:function(j,L){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&L&&(this.next=L),ae},finish:function(j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.finallyLoc===j)return this.complete(q.completion,q.afterLoc),R(q),ae}},catch:function(j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.tryLoc===j){var U=q.completion;if(U.type==="throw"){var oe=U.arg;R(q)}return oe}}throw new Error("illegal catch attempt")},delegateYield:function(j,L,q){return this.delegate={iterator:V(j),resultName:L,nextLoc:q},this.method==="next"&&(this.arg=T),ae}},b}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}),IFRAME_NAMESPACE="3id-connect-iframedisplay",MANAGE_NAMESPACE="3id-connect-managedisplay",TORUS_CONSENT_ZINDEX=99999,HIDE_IFRAME_STYLE="position: fixed; width:0; height:0; border:0; border:none !important",DISPLAY_IFRAME_STYLE="border:none; border:0; z-index: "+(TORUS_CONSENT_ZINDEX-2)+"; position: fixed; max-width: 100%;",DISPLAY_MANAGE_STYLE="border:none; border:0; z-index: "+(TORUS_CONSENT_ZINDEX-1)+"; position: fixed; width: 100%; height: 100%; top: 0; left: 0;",IFRAME_TOP="top: 10px; right: 10px",IFRAME_BOTTOM="bottom: 0px; left: 0px;",hide=function t(e){return function(){return e.style=HIDE_IFRAME_STYLE}},display=function t(e){return function(b,w,$){b===void 0&&(b=!1),w===void 0&&(w="245px"),$===void 0&&($="440px"),e.style=DISPLAY_IFRAME_STYLE+" width: "+$+"; height: "+w+"; "+(b?IFRAME_BOTTOM:IFRAME_TOP)}};function createDisplayConnectServerRPC(t){var e=display(t),b=hide(t);return createServer(IFRAME_NAMESPACE,{hide:function(){b()},display:function($,T){var N=T.mobile,C=T.height,F=T.width;e(N,C,F)}})}var createConnectIframe=function t(e){var b=document.createElement("iframe");return b.name="threeid-connect",b.className="threeid-connect",b.src=e,b.style=HIDE_IFRAME_STYLE,b.allowTransparency=!0,b.frameBorder=0,b};function createDisplayManageServerRPC(t){var e;return createServer(MANAGE_NAMESPACE,{display:function(){var b=_asyncToGenerator$3(runtime_1$3.mark(function $(T,N){var C,F,G;return runtime_1$3.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return C=N.accountId,e=createManageIframe(t+"?accountId="+C),document.body.appendChild(e),Z.next=5,new Promise(function(re){e.onload=re});case 5:return F=createMessageObservable(window),G=function(ie){return ie.data.ns==="3id-connect-management"},Z.next=9,F.pipe(first$2(G)).toPromise();case 9:e.remove();case 10:case"end":return Z.stop()}},$)}));function w($,T){return b.apply(this,arguments)}return w}()})}var createManageIframe=function t(e){var b=document.createElement("iframe");return b.name="threeid-connect-manage",b.className="threeid-connect-manage",b.src=e,b.allowtransparency=!1,b.style=DISPLAY_MANAGE_STYLE,b};function asyncGeneratorStep$2(t,e,b,w,$,T,N){try{var C=t[T](N),F=C.value}catch(G){b(G);return}C.done?e(F):Promise.resolve(F).then(w,$)}function _asyncToGenerator$2(t){return function(){var e=this,b=arguments;return new Promise(function(w,$){var T=t.apply(e,b);function N(F){asyncGeneratorStep$2(T,w,$,N,C,"next",F)}function C(F){asyncGeneratorStep$2(T,w,$,N,C,"throw",F)}N(void 0)})}}function createCommonjsModule$2(t,e){return e={exports:{}},t(e,e.exports),e.exports}var runtime_1$2=createCommonjsModule$2(function(t){var e=function(b){var w=Object.prototype,$=w.hasOwnProperty,T,N=typeof Symbol=="function"?Symbol:{},C=N.iterator||"@@iterator",F=N.asyncIterator||"@@asyncIterator",G=N.toStringTag||"@@toStringTag";function J(H,j,L){return Object.defineProperty(H,j,{value:L,enumerable:!0,configurable:!0,writable:!0}),H[j]}try{J({},"")}catch{J=function(L,q,U){return L[q]=U}}function Z(H,j,L,q){var U=j&&j.prototype instanceof ye?j:ye,oe=Object.create(U.prototype),ve=new B(q||[]);return oe._invoke=pe(H,L,ve),oe}b.wrap=Z;function re(H,j,L){try{return{type:"normal",arg:H.call(j,L)}}catch(q){return{type:"throw",arg:q}}}var ie="suspendedStart",ue="suspendedYield",ne="executing",ce="completed",ae={};function ye(){}function $e(){}function _e(){}var be={};J(be,C,function(){return this});var xe=Object.getPrototypeOf,ee=xe&&xe(xe(V([])));ee&&ee!==w&&$.call(ee,C)&&(be=ee);var he=_e.prototype=ye.prototype=Object.create(be);$e.prototype=_e,J(he,"constructor",_e),J(_e,"constructor",$e),$e.displayName=J(_e,G,"GeneratorFunction");function we(H){["next","throw","return"].forEach(function(j){J(H,j,function(L){return this._invoke(j,L)})})}b.isGeneratorFunction=function(H){var j=typeof H=="function"&&H.constructor;return j?j===$e||(j.displayName||j.name)==="GeneratorFunction":!1},b.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,_e):(H.__proto__=_e,J(H,G,"GeneratorFunction")),H.prototype=Object.create(he),H},b.awrap=function(H){return{__await:H}};function Ne(H,j){function L(oe,ve,fe,Oe){var Se=re(H[oe],H,ve);if(Se.type==="throw")Oe(Se.arg);else{var Te=Se.arg,Ae=Te.value;return Ae&&typeof Ae=="object"&&$.call(Ae,"__await")?j.resolve(Ae.__await).then(function(le){L("next",le,fe,Oe)},function(le){L("throw",le,fe,Oe)}):j.resolve(Ae).then(function(le){Te.value=le,fe(Te)},function(le){return L("throw",le,fe,Oe)})}}var q;function U(oe,ve){function fe(){return new j(function(Oe,Se){L(oe,ve,Oe,Se)})}return q=q?q.then(fe,fe):fe()}this._invoke=U}we(Ne.prototype),J(Ne.prototype,F,function(){return this}),b.AsyncIterator=Ne,b.async=function(H,j,L,q,U){U===void 0&&(U=Promise);var oe=new Ne(Z(H,j,L,q),U);return b.isGeneratorFunction(j)?oe:oe.next().then(function(ve){return ve.done?ve.value:oe.next()})};function pe(H,j,L){var q=ie;return function(oe,ve){if(q===ne)throw new Error("Generator is already running");if(q===ce){if(oe==="throw")throw ve;return Q()}for(L.method=oe,L.arg=ve;;){var fe=L.delegate;if(fe){var Oe=te(fe,L);if(Oe){if(Oe===ae)continue;return Oe}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(q===ie)throw q=ce,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);q=ne;var Se=re(H,j,L);if(Se.type==="normal"){if(q=L.done?ce:ue,Se.arg===ae)continue;return{value:Se.arg,done:L.done}}else Se.type==="throw"&&(q=ce,L.method="throw",L.arg=Se.arg)}}}function te(H,j){var L=H.iterator[j.method];if(L===T){if(j.delegate=null,j.method==="throw"){if(H.iterator.return&&(j.method="return",j.arg=T,te(H,j),j.method==="throw"))return ae;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var q=re(L,H.iterator,j.arg);if(q.type==="throw")return j.method="throw",j.arg=q.arg,j.delegate=null,ae;var U=q.arg;if(!U)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,ae;if(U.done)j[H.resultName]=U.value,j.next=H.nextLoc,j.method!=="return"&&(j.method="next",j.arg=T);else return U;return j.delegate=null,ae}we(he),J(he,G,"Generator"),J(he,C,function(){return this}),J(he,"toString",function(){return"[object Generator]"});function Y(H){var j={tryLoc:H[0]};1 in H&&(j.catchLoc=H[1]),2 in H&&(j.finallyLoc=H[2],j.afterLoc=H[3]),this.tryEntries.push(j)}function R(H){var j=H.completion||{};j.type="normal",delete j.arg,H.completion=j}function B(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}b.keys=function(H){var j=[];for(var L in H)j.push(L);return j.reverse(),function q(){for(;j.length;){var U=j.pop();if(U in H)return q.value=U,q.done=!1,q}return q.done=!0,q}};function V(H){if(H){var j=H[C];if(j)return j.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var L=-1,q=function U(){for(;++L<H.length;)if($.call(H,L))return U.value=H[L],U.done=!1,U;return U.value=T,U.done=!0,U};return q.next=q}}return{next:Q}}b.values=V;function Q(){return{value:T,done:!0}}return B.prototype={constructor:B,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=T,this.done=!1,this.delegate=null,this.method="next",this.arg=T,this.tryEntries.forEach(R),!j)for(var L in this)L.charAt(0)==="t"&&$.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=T)},stop:function(){this.done=!0;var j=this.tryEntries[0],L=j.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var L=this;function q(Se,Te){return ve.type="throw",ve.arg=j,L.next=Se,Te&&(L.method="next",L.arg=T),!!Te}for(var U=this.tryEntries.length-1;U>=0;--U){var oe=this.tryEntries[U],ve=oe.completion;if(oe.tryLoc==="root")return q("end");if(oe.tryLoc<=this.prev){var fe=$.call(oe,"catchLoc"),Oe=$.call(oe,"finallyLoc");if(fe&&Oe){if(this.prev<oe.catchLoc)return q(oe.catchLoc,!0);if(this.prev<oe.finallyLoc)return q(oe.finallyLoc)}else if(fe){if(this.prev<oe.catchLoc)return q(oe.catchLoc,!0)}else if(Oe){if(this.prev<oe.finallyLoc)return q(oe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(j,L){for(var q=this.tryEntries.length-1;q>=0;--q){var U=this.tryEntries[q];if(U.tryLoc<=this.prev&&$.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var oe=U;break}}oe&&(j==="break"||j==="continue")&&oe.tryLoc<=L&&L<=oe.finallyLoc&&(oe=null);var ve=oe?oe.completion:{};return ve.type=j,ve.arg=L,oe?(this.method="next",this.next=oe.finallyLoc,ae):this.complete(ve)},complete:function(j,L){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&L&&(this.next=L),ae},finish:function(j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.finallyLoc===j)return this.complete(q.completion,q.afterLoc),R(q),ae}},catch:function(j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.tryLoc===j){var U=q.completion;if(U.type==="throw"){var oe=U.arg;R(q)}return oe}}throw new Error("illegal catch attempt")},delegateYield:function(j,L,q){return this.delegate={iterator:V(j),resultName:L,nextLoc:q},this.method==="next"&&(this.arg=T),ae}},b}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}),NAMESPACE="3id-connect-authprovider";typeof process!="undefined"&&(NAMESPACE="3id-connect-authprovider");function createAuthProviderServer(t,e){return e===void 0&&(e=NAMESPACE),createServer(e,{accountId:function(){var b=_asyncToGenerator$2(runtime_1$2.mark(function $(){return runtime_1$2.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,t.accountId();case 2:return N.abrupt("return",N.sent.toString());case 3:case"end":return N.stop()}},$)}));function w(){return b.apply(this,arguments)}return w}(),authenticate:function(){var b=_asyncToGenerator$2(runtime_1$2.mark(function $(T,N){var C;return runtime_1$2.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return C=N.message,G.next=3,t.authenticate(C);case 3:return G.abrupt("return",G.sent);case 4:case"end":return G.stop()}},$)}));function w($,T){return b.apply(this,arguments)}return w}(),createLink:function(){var b=_asyncToGenerator$2(runtime_1$2.mark(function $(T,N){var C;return runtime_1$2.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return C=N.did,G.next=3,t.createLink(C);case 3:return G.abrupt("return",G.sent);case 4:case"end":return G.stop()}},$)}));function w($,T){return b.apply(this,arguments)}return w}()})}var lib$9={},client={},lib$8={exports:{}},seed=1;function getNextValue(){return seed=(seed*9301+49297)%233280,seed/233280}function setSeed$1(t){seed=t}var randomFromSeed$1={nextValue:getNextValue,seed:setSeed$1},randomFromSeed=randomFromSeed$1,ORIGINAL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",alphabet$2,previousSeed,shuffled;function reset(){shuffled=!1}function setCharacters(t){if(!t){alphabet$2!==ORIGINAL&&(alphabet$2=ORIGINAL,reset());return}if(t!==alphabet$2){if(t.length!==ORIGINAL.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(b,w,$){return w!==$.lastIndexOf(b)});if(e.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. These characters were not unique: "+e.join(", "));alphabet$2=t,reset()}}function characters(t){return setCharacters(t),alphabet$2}function setSeed(t){randomFromSeed.seed(t),previousSeed!==t&&(reset(),previousSeed=t)}function shuffle(){alphabet$2||setCharacters(ORIGINAL);for(var t=alphabet$2.split(""),e=[],b=randomFromSeed.nextValue(),w;t.length>0;)b=randomFromSeed.nextValue(),w=Math.floor(b*t.length),e.push(t.splice(w,1)[0]);return e.join("")}function getShuffled(){return shuffled||(shuffled=shuffle(),shuffled)}function lookup(t){var e=getShuffled();return e[t]}function get(){return alphabet$2||ORIGINAL}var alphabet_1={get,characters,seed:setSeed,lookup,shuffled:getShuffled},crypto$5=typeof window=="object"&&(window.crypto||window.msCrypto),randomByte;!crypto$5||!crypto$5.getRandomValues?randomByte=function(t){for(var e=[],b=0;b<t;b++)e.push(Math.floor(Math.random()*256));return e}:randomByte=function(t){return crypto$5.getRandomValues(new Uint8Array(t))};var randomByteBrowser=randomByte,format_browser=function(t,e,b){for(var w=(2<<Math.log(e.length-1)/Math.LN2)-1,$=-~(1.6*w*b/e.length),T="";;)for(var N=t($),C=$;C--;)if(T+=e[N[C]&w]||"",T.length===+b)return T},alphabet$1=alphabet_1,random$1=randomByteBrowser,format$3=format_browser;function generate$4(t){for(var e=0,b,w="";!b;)w=w+format$3(random$1,alphabet$1.get(),1),b=t<Math.pow(16,e+1),e++;return w}var generate_1=generate$4,generate$3=generate_1,REDUCE_TIME=1567752802062,version$1=7,counter$1,previousSeconds;function build(t){var e="",b=Math.floor((Date.now()-REDUCE_TIME)*.001);return b===previousSeconds?counter$1++:(counter$1=0,previousSeconds=b),e=e+generate$3(version$1),e=e+generate$3(t),counter$1>0&&(e=e+generate$3(counter$1)),e=e+generate$3(b),e}var build_1=build,alphabet=alphabet_1;function isShortId(t){if(!t||typeof t!="string"||t.length<6)return!1;var e=new RegExp("[^"+alphabet.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!e.test(t)}var isValid=isShortId;(function(t){var e=alphabet_1,b=build_1,w=isValid,$=0;function T(G){return e.seed(G),t.exports}function N(G){return $=G,t.exports}function C(G){return G!==void 0&&e.characters(G),e.shuffled()}function F(){return b($)}t.exports=F,t.exports.generate=F,t.exports.seed=T,t.exports.worker=N,t.exports.characters=C,t.exports.isValid=w})(lib$8);var shortid=lib$8.exports;Object.defineProperty(client,"__esModule",{value:!0});client.default=caller;client.call=call;var _shortid=shortid,_shortid2=_interopRequireDefault(_shortid);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function caller(t,e){e=e||{};var b=e.addListener||window.addEventListener,w=e.removeListener||window.removeEventListener,$=e.postMessage||window.postMessage,T=e.targetOrigin||"*",N=e.getMessageData||function(C){return C.data};return function(){var C={sender:"postmsg-rpc/client",id:(0,_shortid2.default)(),func:t,args:Array.from(arguments)},F=void 0,G=new Promise(function(J,Z){var re=function ie(){var ue=N.apply(null,arguments);if(!!ue&&!(ue.sender!=="postmsg-rpc/server"||ue.id!==C.id)){if(w("message",ie),ue.err){var ne=new Error("Unexpected error calling "+t);return Object.assign(ne,ue.err),Z(ne)}J(ue.res)}};F=function(){w("message",re);var ue=new Error("Canceled call to "+t);ue.isCanceled=!0,Z(ue)},b("message",re),$(C,T)});return G.cancel=function(){return F()},G}}function call(t){return caller(t).apply(null,[].slice.call(arguments,1))}var server={};Object.defineProperty(server,"__esModule",{value:!0});server.default=expose;function expose(t,e,b){b=b||{};var w=b.addListener||window.addEventListener,$=b.removeListener||window.removeEventListener,T=b.postMessage||window.postMessage,N=b.targetOrigin||"*",C=b.getMessageData||function(J){return J.data},F=b.isCallback||!1,G=function(){var Z=C.apply(null,arguments);if(!!Z&&!(Z.sender!=="postmsg-rpc/client"||Z.func!==t)){var re={sender:"postmsg-rpc/server",id:Z.id},ie=function(ae){re.res=ae,T(re,N)},ue=function(ae){re.err=Object.assign({message:ae.message},ae.output&&ae.output.payload),T(re,N)};if(F)e.apply(null,Z.args.concat(function(ce,ae){if(ce)return ue(ce);ie(ae)}));else{var ne=e.apply(null,Z.args);Promise.resolve(ne).then(ie).catch(ue)}}};return w("message",G),{close:function(){return $("message",G)}}}(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=client;Object.defineProperty(t,"caller",{enumerable:!0,get:function(){return w(e).default}}),Object.defineProperty(t,"call",{enumerable:!0,get:function(){return e.call}});var b=server;Object.defineProperty(t,"expose",{enumerable:!0,get:function(){return w(b).default}});function w($){return $&&$.__esModule?$:{default:$}}})(lib$9);function asyncGeneratorStep$1(t,e,b,w,$,T,N){try{var C=t[T](N),F=C.value}catch(G){b(G);return}C.done?e(F):Promise.resolve(F).then(w,$)}function _asyncToGenerator$1(t){return function(){var e=this,b=arguments;return new Promise(function(w,$){var T=t.apply(e,b);function N(F){asyncGeneratorStep$1(T,w,$,N,C,"next",F)}function C(F){asyncGeneratorStep$1(T,w,$,N,C,"throw",F)}N(void 0)})}}function _defineProperties(t,e){for(var b=0;b<e.length;b++){var w=e[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,w.key,w)}}function _createClass(t,e,b){return e&&_defineProperties(t.prototype,e),b&&_defineProperties(t,b),t}function createCommonjsModule$1(t,e){return e={exports:{}},t(e,e.exports),e.exports}var runtime_1$1=createCommonjsModule$1(function(t){var e=function(b){var w=Object.prototype,$=w.hasOwnProperty,T,N=typeof Symbol=="function"?Symbol:{},C=N.iterator||"@@iterator",F=N.asyncIterator||"@@asyncIterator",G=N.toStringTag||"@@toStringTag";function J(H,j,L){return Object.defineProperty(H,j,{value:L,enumerable:!0,configurable:!0,writable:!0}),H[j]}try{J({},"")}catch{J=function(L,q,U){return L[q]=U}}function Z(H,j,L,q){var U=j&&j.prototype instanceof ye?j:ye,oe=Object.create(U.prototype),ve=new B(q||[]);return oe._invoke=pe(H,L,ve),oe}b.wrap=Z;function re(H,j,L){try{return{type:"normal",arg:H.call(j,L)}}catch(q){return{type:"throw",arg:q}}}var ie="suspendedStart",ue="suspendedYield",ne="executing",ce="completed",ae={};function ye(){}function $e(){}function _e(){}var be={};J(be,C,function(){return this});var xe=Object.getPrototypeOf,ee=xe&&xe(xe(V([])));ee&&ee!==w&&$.call(ee,C)&&(be=ee);var he=_e.prototype=ye.prototype=Object.create(be);$e.prototype=_e,J(he,"constructor",_e),J(_e,"constructor",$e),$e.displayName=J(_e,G,"GeneratorFunction");function we(H){["next","throw","return"].forEach(function(j){J(H,j,function(L){return this._invoke(j,L)})})}b.isGeneratorFunction=function(H){var j=typeof H=="function"&&H.constructor;return j?j===$e||(j.displayName||j.name)==="GeneratorFunction":!1},b.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,_e):(H.__proto__=_e,J(H,G,"GeneratorFunction")),H.prototype=Object.create(he),H},b.awrap=function(H){return{__await:H}};function Ne(H,j){function L(oe,ve,fe,Oe){var Se=re(H[oe],H,ve);if(Se.type==="throw")Oe(Se.arg);else{var Te=Se.arg,Ae=Te.value;return Ae&&typeof Ae=="object"&&$.call(Ae,"__await")?j.resolve(Ae.__await).then(function(le){L("next",le,fe,Oe)},function(le){L("throw",le,fe,Oe)}):j.resolve(Ae).then(function(le){Te.value=le,fe(Te)},function(le){return L("throw",le,fe,Oe)})}}var q;function U(oe,ve){function fe(){return new j(function(Oe,Se){L(oe,ve,Oe,Se)})}return q=q?q.then(fe,fe):fe()}this._invoke=U}we(Ne.prototype),J(Ne.prototype,F,function(){return this}),b.AsyncIterator=Ne,b.async=function(H,j,L,q,U){U===void 0&&(U=Promise);var oe=new Ne(Z(H,j,L,q),U);return b.isGeneratorFunction(j)?oe:oe.next().then(function(ve){return ve.done?ve.value:oe.next()})};function pe(H,j,L){var q=ie;return function(oe,ve){if(q===ne)throw new Error("Generator is already running");if(q===ce){if(oe==="throw")throw ve;return Q()}for(L.method=oe,L.arg=ve;;){var fe=L.delegate;if(fe){var Oe=te(fe,L);if(Oe){if(Oe===ae)continue;return Oe}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(q===ie)throw q=ce,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);q=ne;var Se=re(H,j,L);if(Se.type==="normal"){if(q=L.done?ce:ue,Se.arg===ae)continue;return{value:Se.arg,done:L.done}}else Se.type==="throw"&&(q=ce,L.method="throw",L.arg=Se.arg)}}}function te(H,j){var L=H.iterator[j.method];if(L===T){if(j.delegate=null,j.method==="throw"){if(H.iterator.return&&(j.method="return",j.arg=T,te(H,j),j.method==="throw"))return ae;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var q=re(L,H.iterator,j.arg);if(q.type==="throw")return j.method="throw",j.arg=q.arg,j.delegate=null,ae;var U=q.arg;if(!U)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,ae;if(U.done)j[H.resultName]=U.value,j.next=H.nextLoc,j.method!=="return"&&(j.method="next",j.arg=T);else return U;return j.delegate=null,ae}we(he),J(he,G,"Generator"),J(he,C,function(){return this}),J(he,"toString",function(){return"[object Generator]"});function Y(H){var j={tryLoc:H[0]};1 in H&&(j.catchLoc=H[1]),2 in H&&(j.finallyLoc=H[2],j.afterLoc=H[3]),this.tryEntries.push(j)}function R(H){var j=H.completion||{};j.type="normal",delete j.arg,H.completion=j}function B(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}b.keys=function(H){var j=[];for(var L in H)j.push(L);return j.reverse(),function q(){for(;j.length;){var U=j.pop();if(U in H)return q.value=U,q.done=!1,q}return q.done=!0,q}};function V(H){if(H){var j=H[C];if(j)return j.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var L=-1,q=function U(){for(;++L<H.length;)if($.call(H,L))return U.value=H[L],U.done=!1,U;return U.value=T,U.done=!0,U};return q.next=q}}return{next:Q}}b.values=V;function Q(){return{value:T,done:!0}}return B.prototype={constructor:B,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=T,this.done=!1,this.delegate=null,this.method="next",this.arg=T,this.tryEntries.forEach(R),!j)for(var L in this)L.charAt(0)==="t"&&$.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=T)},stop:function(){this.done=!0;var j=this.tryEntries[0],L=j.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var L=this;function q(Se,Te){return ve.type="throw",ve.arg=j,L.next=Se,Te&&(L.method="next",L.arg=T),!!Te}for(var U=this.tryEntries.length-1;U>=0;--U){var oe=this.tryEntries[U],ve=oe.completion;if(oe.tryLoc==="root")return q("end");if(oe.tryLoc<=this.prev){var fe=$.call(oe,"catchLoc"),Oe=$.call(oe,"finallyLoc");if(fe&&Oe){if(this.prev<oe.catchLoc)return q(oe.catchLoc,!0);if(this.prev<oe.finallyLoc)return q(oe.finallyLoc)}else if(fe){if(this.prev<oe.catchLoc)return q(oe.catchLoc,!0)}else if(Oe){if(this.prev<oe.finallyLoc)return q(oe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(j,L){for(var q=this.tryEntries.length-1;q>=0;--q){var U=this.tryEntries[q];if(U.tryLoc<=this.prev&&$.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var oe=U;break}}oe&&(j==="break"||j==="continue")&&oe.tryLoc<=L&&L<=oe.finallyLoc&&(oe=null);var ve=oe?oe.completion:{};return ve.type=j,ve.arg=L,oe?(this.method="next",this.next=oe.finallyLoc,ae):this.complete(ve)},complete:function(j,L){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&L&&(this.next=L),ae},finish:function(j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.finallyLoc===j)return this.complete(q.completion,q.afterLoc),R(q),ae}},catch:function(j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.tryLoc===j){var U=q.completion;if(U.type==="throw"){var oe=U.arg;R(q)}return oe}}throw new Error("illegal catch attempt")},delegateYield:function(j,L,q){return this.delegate={iterator:V(j),resultName:L,nextLoc:q},this.method==="next"&&(this.arg=T),ae}},b}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}),DidProviderProxy=function(){function t(b,w){this.provider=b,this.accountId=w}var e=t.prototype;return e.send=function(){var b=_asyncToGenerator$1(runtime_1$1.mark(function $(T,N){return runtime_1$1.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return T.params=Object.assign({},T.params,{accountId:this.accountId}),F.next=3,this.provider.send(T,N);case 3:return F.abrupt("return",F.sent);case 4:case"end":return F.stop()}},$,this)}));function w($,T){return b.apply(this,arguments)}return w}(),_createClass(t,[{key:"isDidProvider",get:function(){return!0}}]),t}(),BASE_DEV_URL="https://app-dev.3idconnect.org",BASE_CLAY_URL="https://app-clay.3idconnect.org",BASE_MAIN_URL="https://app.3idconnect.org",BASE_LOCAL_URL="http://localhost:30001",DEFAULT_MANAGE_PATH="/management/index.html",CONNECT_IFRAME_URL=BASE_CLAY_URL,CONNECT_MANAGE_URL=BASE_CLAY_URL+"/management/index.html";typeof process!="undefined"&&(CONNECT_IFRAME_URL=BASE_CLAY_URL);typeof process!="undefined"&&(CONNECT_MANAGE_URL=BASE_CLAY_URL+"/management/index.html");var networkConfig=function t(e){return{connect_iframe:e,manage_iframe:""+e+DEFAULT_MANAGE_PATH}},networks$1={"dev-unstable":networkConfig(BASE_DEV_URL),"testnet-clay":networkConfig(BASE_CLAY_URL),mainnet:networkConfig(BASE_MAIN_URL),local:networkConfig(BASE_LOCAL_URL)},createRPCProvider=function t(e){var b=lib$9.caller("send",{postMessage:e});return{send:function(){var w=_asyncToGenerator$1(runtime_1$1.mark(function T(N){return runtime_1$1.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.t0=JSON,F.next=3,b(N);case 3:return F.t1=F.sent,F.abrupt("return",F.t0.parse.call(F.t0,F.t1));case 5:case"end":return F.stop()}},T)}));function $(T){return w.apply(this,arguments)}return $}()}},assertBrowser=function t(){if(typeof window=="undefined"||typeof document=="undefined")throw new Error("ThreeIdConnect not supported in this enviroment")},ThreeIdConnect=function(){function t(b,w){var $=this;this._authProviderSubscription=null,this._connected=!1,assertBrowser();var T;b&&Object.keys(networks$1).includes(b)?(T=networks$1[b].connect_iframe,w=networks$1[b].manage_iframe):T=b,this.iframe=createConnectIframe(T||CONNECT_IFRAME_URL),this.manageUrl=w||CONNECT_MANAGE_URL,this.iframeLoadedPromise=new Promise(function(N){$.iframe.onload=function(){N()}}),document.body.appendChild(this.iframe)}var e=t.prototype;return e.connect=function(){var b=_asyncToGenerator$1(runtime_1$1.mark(function $(T){return runtime_1$1.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(this._authProviderSubscription&&this._authProviderSubscription.unsubscribe(),!T){C.next=4;break}return C.next=4,this.setAuthProvider(T);case 4:return C.next=6,this.iframeLoadedPromise;case 6:this.postMessage=this.iframe.contentWindow.postMessage.bind(this.iframe.contentWindow),this._authProviderSubscription=createAuthProviderServer(T).subscribe(),createDisplayConnectServerRPC(this.iframe).subscribe(),createDisplayManageServerRPC(this.manageUrl).subscribe(),this.RPCProvider=createRPCProvider(this.postMessage),this.RPCClient=new RPCClient$1(this.RPCProvider),this._connected=!0;case 13:case"end":return C.stop()}},$,this)}));function w($){return b.apply(this,arguments)}return w}(),e.setAuthProvider=function(){var b=_asyncToGenerator$1(runtime_1$1.mark(function $(T){return runtime_1$1.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.authProvider=T,C.next=3,this.authProvider.accountId();case 3:this.accountId=C.sent.toString();case 4:case"end":return C.stop()}},$,this)}));function w($){return b.apply(this,arguments)}return w}(),e.getDidProvider=function(){if(!this.authProvider)throw new Error("setAuthProvider required");return new DidProviderProxy(this.RPCProvider,this.accountId)},_createClass(t,[{key:"connected",get:function(){return this._connected}}]),t}(),lib$7={},lib$6={},tileDocument={},duplex={},helpers={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var __extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(e,b){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,$){w.__proto__=$}||function(w,$){for(var T in $)$.hasOwnProperty(T)&&(w[T]=$[T])},t(e,b)};return function(e,b){t(e,b);function w(){this.constructor=e}e.prototype=b===null?Object.create(b):(w.prototype=b.prototype,new w)}}();Object.defineProperty(helpers,"__esModule",{value:!0});var _hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(t,e){return _hasOwnProperty.call(t,e)}helpers.hasOwnProperty=hasOwnProperty;function _objectKeys(t){if(Array.isArray(t)){for(var b=new Array(t.length),e=0;e<b.length;e++)b[e]=""+e;return b}if(Object.keys)return Object.keys(t);var b=[];for(var w in t)hasOwnProperty(t,w)&&b.push(w);return b}helpers._objectKeys=_objectKeys;function _deepClone(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}helpers._deepClone=_deepClone;function isInteger(t){for(var e=0,b=t.length,w;e<b;){if(w=t.charCodeAt(e),w>=48&&w<=57){e++;continue}return!1}return!0}helpers.isInteger=isInteger;function escapePathComponent(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}helpers.escapePathComponent=escapePathComponent;function unescapePathComponent(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}helpers.unescapePathComponent=unescapePathComponent;function _getPathRecursive(t,e){var b;for(var w in t)if(hasOwnProperty(t,w)){if(t[w]===e)return escapePathComponent(w)+"/";if(typeof t[w]=="object"&&(b=_getPathRecursive(t[w],e),b!=""))return escapePathComponent(w)+"/"+b}return""}helpers._getPathRecursive=_getPathRecursive;function getPath(t,e){if(t===e)return"/";var b=_getPathRecursive(t,e);if(b==="")throw new Error("Object not found in root");return"/"+b}helpers.getPath=getPath;function hasUndefined(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,b=t.length;e<b;e++)if(hasUndefined(t[e]))return!0}else if(typeof t=="object"){for(var w=_objectKeys(t),$=w.length,e=0;e<$;e++)if(hasUndefined(t[w[e]]))return!0}}return!1}helpers.hasUndefined=hasUndefined;function patchErrorMessageFormatter(t,e){var b=[t];for(var w in e){var $=typeof e[w]=="object"?JSON.stringify(e[w],null,2):e[w];typeof $!="undefined"&&b.push(w+": "+$)}return b.join(`
`)}var PatchError=function(t){__extends$2(e,t);function e(b,w,$,T,N){var C=this.constructor,F=t.call(this,patchErrorMessageFormatter(b,{name:w,index:$,operation:T,tree:N}))||this;return F.name=w,F.index=$,F.operation=T,F.tree=N,Object.setPrototypeOf(F,C.prototype),F.message=patchErrorMessageFormatter(b,{name:w,index:$,operation:T,tree:N}),F}return e}(Error);helpers.PatchError=PatchError;var core$2={},isArray$6=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty,fastDeepEqual=function t(e,b){if(e===b)return!0;if(e&&b&&typeof e=="object"&&typeof b=="object"){var w=isArray$6(e),$=isArray$6(b),T,N,C;if(w&&$){if(N=e.length,N!=b.length)return!1;for(T=N;T--!=0;)if(!t(e[T],b[T]))return!1;return!0}if(w!=$)return!1;var F=e instanceof Date,G=b instanceof Date;if(F!=G)return!1;if(F&&G)return e.getTime()==b.getTime();var J=e instanceof RegExp,Z=b instanceof RegExp;if(J!=Z)return!1;if(J&&Z)return e.toString()==b.toString();var re=keyList(e);if(N=re.length,N!==keyList(b).length)return!1;for(T=N;T--!=0;)if(!hasProp.call(b,re[T]))return!1;for(T=N;T--!=0;)if(C=re[T],!t(e[C],b[C]))return!1;return!0}return e!==e&&b!==b};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fastDeepEqual,b=helpers;t.JsonPatchError=b.PatchError,t.deepClone=b._deepClone;var w={add:function(Z,re,ie){return Z[re]=this.value,{newDocument:ie}},remove:function(Z,re,ie){var ue=Z[re];return delete Z[re],{newDocument:ie,removed:ue}},replace:function(Z,re,ie){var ue=Z[re];return Z[re]=this.value,{newDocument:ie,removed:ue}},move:function(Z,re,ie){var ue=T(ie,this.path);ue&&(ue=b._deepClone(ue));var ne=N(ie,{op:"remove",path:this.from}).removed;return N(ie,{op:"add",path:this.path,value:ne}),{newDocument:ie,removed:ue}},copy:function(Z,re,ie){var ue=T(ie,this.from);return N(ie,{op:"add",path:this.path,value:b._deepClone(ue)}),{newDocument:ie}},test:function(Z,re,ie){return{newDocument:ie,test:e(Z[re],this.value)}},_get:function(Z,re,ie){return this.value=Z[re],{newDocument:ie}}},$={add:function(Z,re,ie){return b.isInteger(re)?Z.splice(re,0,this.value):Z[re]=this.value,{newDocument:ie,index:re}},remove:function(Z,re,ie){var ue=Z.splice(re,1);return{newDocument:ie,removed:ue[0]}},replace:function(Z,re,ie){var ue=Z[re];return Z[re]=this.value,{newDocument:ie,removed:ue}},move:w.move,copy:w.copy,test:w.test,_get:w._get};function T(Z,re){if(re=="")return Z;var ie={op:"_get",path:re};return N(Z,ie),ie.value}t.getValueByPointer=T;function N(Z,re,ie,ue,ne,ce){if(ie===void 0&&(ie=!1),ue===void 0&&(ue=!0),ne===void 0&&(ne=!0),ce===void 0&&(ce=0),ie&&(typeof ie=="function"?ie(re,0,Z,re.path):G(re,0)),re.path===""){var ae={newDocument:Z};if(re.op==="add")return ae.newDocument=re.value,ae;if(re.op==="replace")return ae.newDocument=re.value,ae.removed=Z,ae;if(re.op==="move"||re.op==="copy")return ae.newDocument=T(Z,re.from),re.op==="move"&&(ae.removed=Z),ae;if(re.op==="test"){if(ae.test=e(Z,re.value),ae.test===!1)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",ce,re,Z);return ae.newDocument=Z,ae}else{if(re.op==="remove")return ae.removed=Z,ae.newDocument=null,ae;if(re.op==="_get")return re.value=Z,ae;if(ie)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",ce,re,Z);return ae}}else{ue||(Z=b._deepClone(Z));var ye=re.path||"",$e=ye.split("/"),_e=Z,be=1,xe=$e.length,ee=void 0,he=void 0,we=void 0;for(typeof ie=="function"?we=ie:we=G;;){if(he=$e[be],ne&&he=="__proto__")throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(ie&&ee===void 0&&(_e[he]===void 0?ee=$e.slice(0,be).join("/"):be==xe-1&&(ee=re.path),ee!==void 0&&we(re,0,Z,ee)),be++,Array.isArray(_e)){if(he==="-")he=_e.length;else{if(ie&&!b.isInteger(he))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",ce,re,Z);b.isInteger(he)&&(he=~~he)}if(be>=xe){if(ie&&re.op==="add"&&he>_e.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",ce,re,Z);var ae=$[re.op].call(re,_e,he,Z);if(ae.test===!1)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",ce,re,Z);return ae}}else if(he&&he.indexOf("~")!=-1&&(he=b.unescapePathComponent(he)),be>=xe){var ae=w[re.op].call(re,_e,he,Z);if(ae.test===!1)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",ce,re,Z);return ae}_e=_e[he]}}}t.applyOperation=N;function C(Z,re,ie,ue,ne){if(ue===void 0&&(ue=!0),ne===void 0&&(ne=!0),ie&&!Array.isArray(re))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");ue||(Z=b._deepClone(Z));for(var ce=new Array(re.length),ae=0,ye=re.length;ae<ye;ae++)ce[ae]=N(Z,re[ae],ie,!0,ne,ae),Z=ce[ae].newDocument;return ce.newDocument=Z,ce}t.applyPatch=C;function F(Z,re,ie){var ue=N(Z,re);if(ue.test===!1)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",ie,re,Z);return ue.newDocument}t.applyReducer=F;function G(Z,re,ie,ue){if(typeof Z!="object"||Z===null||Array.isArray(Z))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",re,Z,ie);if(w[Z.op]){if(typeof Z.path!="string")throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",re,Z,ie);if(Z.path.indexOf("/")!==0&&Z.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",re,Z,ie);if((Z.op==="move"||Z.op==="copy")&&typeof Z.from!="string")throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",re,Z,ie);if((Z.op==="add"||Z.op==="replace"||Z.op==="test")&&Z.value===void 0)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",re,Z,ie);if((Z.op==="add"||Z.op==="replace"||Z.op==="test")&&b.hasUndefined(Z.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",re,Z,ie);if(ie){if(Z.op=="add"){var ne=Z.path.split("/").length,ce=ue.split("/").length;if(ne!==ce+1&&ne!==ce)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",re,Z,ie)}else if(Z.op==="replace"||Z.op==="remove"||Z.op==="_get"){if(Z.path!==ue)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",re,Z,ie)}else if(Z.op==="move"||Z.op==="copy"){var ae={op:"_get",path:Z.from,value:void 0},ye=J([ae],ie);if(ye&&ye.name==="OPERATION_PATH_UNRESOLVABLE")throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",re,Z,ie)}}}else throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",re,Z,ie)}t.validator=G;function J(Z,re,ie){try{if(!Array.isArray(Z))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(re)C(b._deepClone(re),b._deepClone(Z),ie||!0);else{ie=ie||G;for(var ue=0;ue<Z.length;ue++)ie(Z[ue],ue,re,void 0)}}catch(ne){if(ne instanceof t.JsonPatchError)return ne;throw ne}}t.validate=J,t.default={JsonPatchError:t.JsonPatchError,deepClone:t.deepClone,getValueByPointer:T,applyOperation:N,applyPatch:C,applyReducer:F,validator:G,validate:J}})(core$2);var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(t){for(var e,b=1,w=arguments.length;b<w;b++){e=arguments[b];for(var $ in e)Object.prototype.hasOwnProperty.call(e,$)&&(t[$]=e[$])}return t},__assign.apply(this,arguments)};Object.defineProperty(duplex,"__esModule",{value:!0});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var helpers_1=helpers,core_1=core$2,core_2=core$2;duplex.applyOperation=core_2.applyOperation;duplex.applyPatch=core_2.applyPatch;duplex.applyReducer=core_2.applyReducer;duplex.getValueByPointer=core_2.getValueByPointer;duplex.validate=core_2.validate;duplex.validator=core_2.validator;var helpers_2=helpers;duplex.JsonPatchError=helpers_2.PatchError;duplex.deepClone=helpers_2._deepClone;duplex.escapePathComponent=helpers_2.escapePathComponent;duplex.unescapePathComponent=helpers_2.unescapePathComponent;var beforeDict=new WeakMap,Mirror=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),ObserverInfo=function(){function t(e,b){this.callback=e,this.observer=b}return t}();function getMirror(t){return beforeDict.get(t)}function getObserverFromMirror(t,e){return t.observers.get(e)}function removeObserverFromMirror(t,e){t.observers.delete(e.callback)}function unobserve(t,e){e.unobserve()}duplex.unobserve=unobserve;function observe(t,e){var b=[],w,$=getMirror(t);if(!$)$=new Mirror(t),beforeDict.set(t,$);else{var T=getObserverFromMirror($,e);w=T&&T.observer}if(w)return w;if(w={},$.value=helpers_1._deepClone(t),e){w.callback=e,w.next=null;var N=function(){generate$2(w)},C=function(){clearTimeout(w.next),w.next=setTimeout(N)};typeof window!="undefined"&&(window.addEventListener("mouseup",C),window.addEventListener("keyup",C),window.addEventListener("mousedown",C),window.addEventListener("keydown",C),window.addEventListener("change",C))}return w.patches=b,w.object=t,w.unobserve=function(){generate$2(w),clearTimeout(w.next),removeObserverFromMirror($,w),typeof window!="undefined"&&(window.removeEventListener("mouseup",C),window.removeEventListener("keyup",C),window.removeEventListener("mousedown",C),window.removeEventListener("keydown",C),window.removeEventListener("change",C))},$.observers.set(e,new ObserverInfo(e,w)),w}duplex.observe=observe;function generate$2(t,e){e===void 0&&(e=!1);var b=beforeDict.get(t.object);_generate(b.value,t.object,t.patches,"",e),t.patches.length&&core_1.applyPatch(b.value,t.patches);var w=t.patches;return w.length>0&&(t.patches=[],t.callback&&t.callback(w)),w}duplex.generate=generate$2;function _generate(t,e,b,w,$){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var T=helpers_1._objectKeys(e),N=helpers_1._objectKeys(t),C=!1,F=N.length-1;F>=0;F--){var G=N[F],J=t[G];if(helpers_1.hasOwnProperty(e,G)&&!(e[G]===void 0&&J!==void 0&&Array.isArray(e)===!1)){var Z=e[G];typeof J=="object"&&J!=null&&typeof Z=="object"&&Z!=null?_generate(J,Z,b,w+"/"+helpers_1.escapePathComponent(G),$):J!==Z&&($&&b.push({op:"test",path:w+"/"+helpers_1.escapePathComponent(G),value:helpers_1._deepClone(J)}),b.push({op:"replace",path:w+"/"+helpers_1.escapePathComponent(G),value:helpers_1._deepClone(Z)}))}else Array.isArray(t)===Array.isArray(e)?($&&b.push({op:"test",path:w+"/"+helpers_1.escapePathComponent(G),value:helpers_1._deepClone(J)}),b.push({op:"remove",path:w+"/"+helpers_1.escapePathComponent(G)}),C=!0):($&&b.push({op:"test",path:w,value:t}),b.push({op:"replace",path:w,value:e}))}if(!(!C&&T.length==N.length))for(var F=0;F<T.length;F++){var G=T[F];!helpers_1.hasOwnProperty(t,G)&&e[G]!==void 0&&b.push({op:"add",path:w+"/"+helpers_1.escapePathComponent(G),value:helpers_1._deepClone(e[G])})}}}function compare$2(t,e,b){b===void 0&&(b=!1);var w=[];return _generate(t,e,w,"",b),w}duplex.compare=compare$2;var core$1=core$2,helpers_3=helpers;duplex.default=__assign({},core$1,{unobserve,observe,generate:generate$2,compare:compare$2,JsonPatchError:helpers_3.PatchError,deepClone:helpers_1._deepClone,escapePathComponent:helpers_1.escapePathComponent,unescapePathComponent:helpers_3.unescapePathComponent});var random={},system={},browser={};Object.defineProperty(browser,"__esModule",{value:!0});var QUOTA=65536,BrowserRandomSource=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self!="undefined"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var b=new Uint8Array(e),w=0;w<b.length;w+=QUOTA)this._crypto.getRandomValues(b.subarray(w,w+Math.min(b.length-w,QUOTA)));return b},t}();browser.BrowserRandomSource=BrowserRandomSource;var node$1={};Object.defineProperty(node$1,"__esModule",{value:!0});var wipe_1$2=wipe$1,NodeRandomSource=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof commonjsRequire$1!="undefined"){var e=require$$1$5;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var b=this._crypto.randomBytes(e);if(b.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var w=new Uint8Array(e),$=0;$<w.length;$++)w[$]=b[$];return wipe_1$2.wipe(b),w},t}();node$1.NodeRandomSource=NodeRandomSource;Object.defineProperty(system,"__esModule",{value:!0});var browser_1=browser,node_1=node$1,SystemRandomSource=function(){function t(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return t.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},t}();system.SystemRandomSource=SystemRandomSource;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=system,b=binary,w=wipe$1;t.defaultRandomSource=new e.SystemRandomSource;function $(G,J){return J===void 0&&(J=t.defaultRandomSource),J.randomBytes(G)}t.randomBytes=$;function T(G){G===void 0&&(G=t.defaultRandomSource);var J=$(4,G),Z=b.readUint32LE(J);return w.wipe(J),Z}t.randomUint32=T;var N="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function C(G,J,Z){if(J===void 0&&(J=N),Z===void 0&&(Z=t.defaultRandomSource),J.length<2)throw new Error("randomString charset is too short");if(J.length>256)throw new Error("randomString charset is too long");for(var re="",ie=J.length,ue=256-256%ie;G>0;){for(var ne=$(Math.ceil(G*256/ue),Z),ce=0;ce<ne.length&&G>0;ce++){var ae=ne[ce];ae<ue&&(re+=J.charAt(ae%ie),G--)}w.wipe(ne)}return re}t.randomString=C;function F(G,J,Z){J===void 0&&(J=N),Z===void 0&&(Z=t.defaultRandomSource);var re=Math.ceil(G/(Math.log(J.length)/Math.LN2));return C(re,J,Z)}t.randomStringForEntropy=F})(random);var lib$5={},anchorService={};Object.defineProperty(anchorService,"__esModule",{value:!0});var ceramicApi={};Object.defineProperty(ceramicApi,"__esModule",{value:!0});var context$2={};Object.defineProperty(context$2,"__esModule",{value:!0});var streamopts={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SyncOptions=void 0,function(e){e[e.PREFER_CACHE=0]="PREFER_CACHE",e[e.SYNC_ALWAYS=1]="SYNC_ALWAYS",e[e.NEVER_SYNC=2]="NEVER_SYNC"}(t.SyncOptions||(t.SyncOptions={}))})(streamopts);var stream$2={},lodash_clonedeep={exports:{}};(function(t,e){var b=200,w="__lodash_hash_undefined__",$=9007199254740991,T="[object Arguments]",N="[object Array]",C="[object Boolean]",F="[object Date]",G="[object Error]",J="[object Function]",Z="[object GeneratorFunction]",re="[object Map]",ie="[object Number]",ue="[object Object]",ne="[object Promise]",ce="[object RegExp]",ae="[object Set]",ye="[object String]",$e="[object Symbol]",_e="[object WeakMap]",be="[object ArrayBuffer]",xe="[object DataView]",ee="[object Float32Array]",he="[object Float64Array]",we="[object Int8Array]",Ne="[object Int16Array]",pe="[object Int32Array]",te="[object Uint8Array]",Y="[object Uint8ClampedArray]",R="[object Uint16Array]",B="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,Q=/\w*$/,H=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,L={};L[T]=L[N]=L[be]=L[xe]=L[C]=L[F]=L[ee]=L[he]=L[we]=L[Ne]=L[pe]=L[re]=L[ie]=L[ue]=L[ce]=L[ae]=L[ye]=L[$e]=L[te]=L[Y]=L[R]=L[B]=!0,L[G]=L[J]=L[_e]=!1;var q=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,U=typeof self=="object"&&self&&self.Object===Object&&self,oe=q||U||Function("return this")(),ve=e&&!e.nodeType&&e,fe=ve&&!0&&t&&!t.nodeType&&t,Oe=fe&&fe.exports===ve;function Se(Ce,Xe){return Ce.set(Xe[0],Xe[1]),Ce}function Te(Ce,Xe){return Ce.add(Xe),Ce}function Ae(Ce,Xe){for(var ut=-1,Gt=Ce?Ce.length:0;++ut<Gt&&Xe(Ce[ut],ut,Ce)!==!1;);return Ce}function le(Ce,Xe){for(var ut=-1,Gt=Xe.length,mr=Ce.length;++ut<Gt;)Ce[mr+ut]=Xe[ut];return Ce}function ke(Ce,Xe,ut,Gt){var mr=-1,br=Ce?Ce.length:0;for(Gt&&br&&(ut=Ce[++mr]);++mr<br;)ut=Xe(ut,Ce[mr],mr,Ce);return ut}function je(Ce,Xe){for(var ut=-1,Gt=Array(Ce);++ut<Ce;)Gt[ut]=Xe(ut);return Gt}function Ve(Ce,Xe){return Ce==null?void 0:Ce[Xe]}function qe(Ce){var Xe=!1;if(Ce!=null&&typeof Ce.toString!="function")try{Xe=!!(Ce+"")}catch{}return Xe}function Ze(Ce){var Xe=-1,ut=Array(Ce.size);return Ce.forEach(function(Gt,mr){ut[++Xe]=[mr,Gt]}),ut}function Pe(Ce,Xe){return function(ut){return Ce(Xe(ut))}}function de(Ce){var Xe=-1,ut=Array(Ce.size);return Ce.forEach(function(Gt){ut[++Xe]=Gt}),ut}var me=Array.prototype,Re=Function.prototype,Fe=Object.prototype,Ue=oe["__core-js_shared__"],ze=function(){var Ce=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return Ce?"Symbol(src)_1."+Ce:""}(),Qe=Re.toString,Ye=Fe.hasOwnProperty,ht=Fe.toString,at=RegExp("^"+Qe.call(Ye).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=Oe?oe.Buffer:void 0,kt=oe.Symbol,yt=oe.Uint8Array,ct=Pe(Object.getPrototypeOf,Object),Bt=Object.create,Et=Fe.propertyIsEnumerable,et=me.splice,Ft=Object.getOwnPropertySymbols,At=Ke?Ke.isBuffer:void 0,Mt=Pe(Object.keys,Object),Xt=or(oe,"DataView"),Dt=or(oe,"Map"),lt=or(oe,"Promise"),Yt=or(oe,"Set"),jt=or(oe,"WeakMap"),Pt=or(Object,"create"),Wt=wr(Xt),Ot=wr(Dt),dt=wr(lt),zt=wr(Yt),Ct=wr(jt),wt=kt?kt.prototype:void 0,Kt=wt?wt.valueOf:void 0;function mt(Ce){var Xe=-1,ut=Ce?Ce.length:0;for(this.clear();++Xe<ut;){var Gt=Ce[Xe];this.set(Gt[0],Gt[1])}}function pt(){this.__data__=Pt?Pt(null):{}}function Jt(Ce){return this.has(Ce)&&delete this.__data__[Ce]}function ge(Ce){var Xe=this.__data__;if(Pt){var ut=Xe[Ce];return ut===w?void 0:ut}return Ye.call(Xe,Ce)?Xe[Ce]:void 0}function Ee(Ce){var Xe=this.__data__;return Pt?Xe[Ce]!==void 0:Ye.call(Xe,Ce)}function Me(Ce,Xe){var ut=this.__data__;return ut[Ce]=Pt&&Xe===void 0?w:Xe,this}mt.prototype.clear=pt,mt.prototype.delete=Jt,mt.prototype.get=ge,mt.prototype.has=Ee,mt.prototype.set=Me;function se(Ce){var Xe=-1,ut=Ce?Ce.length:0;for(this.clear();++Xe<ut;){var Gt=Ce[Xe];this.set(Gt[0],Gt[1])}}function Ie(){this.__data__=[]}function De(Ce){var Xe=this.__data__,ut=It(Xe,Ce);if(ut<0)return!1;var Gt=Xe.length-1;return ut==Gt?Xe.pop():et.call(Xe,ut,1),!0}function Ge(Ce){var Xe=this.__data__,ut=It(Xe,Ce);return ut<0?void 0:Xe[ut][1]}function He(Ce){return It(this.__data__,Ce)>-1}function rt(Ce,Xe){var ut=this.__data__,Gt=It(ut,Ce);return Gt<0?ut.push([Ce,Xe]):ut[Gt][1]=Xe,this}se.prototype.clear=Ie,se.prototype.delete=De,se.prototype.get=Ge,se.prototype.has=He,se.prototype.set=rt;function it(Ce){var Xe=-1,ut=Ce?Ce.length:0;for(this.clear();++Xe<ut;){var Gt=Ce[Xe];this.set(Gt[0],Gt[1])}}function tt(){this.__data__={hash:new mt,map:new(Dt||se),string:new mt}}function Vt(Ce){return fr(this,Ce).delete(Ce)}function St(Ce){return fr(this,Ce).get(Ce)}function Lt(Ce){return fr(this,Ce).has(Ce)}function _t(Ce,Xe){return fr(this,Ce).set(Ce,Xe),this}it.prototype.clear=tt,it.prototype.delete=Vt,it.prototype.get=St,it.prototype.has=Lt,it.prototype.set=_t;function Ut(Ce){this.__data__=new se(Ce)}function Ht(){this.__data__=new se}function Be(Ce){return this.__data__.delete(Ce)}function gt(Ce){return this.__data__.get(Ce)}function bt(Ce){return this.__data__.has(Ce)}function ot(Ce,Xe){var ut=this.__data__;if(ut instanceof se){var Gt=ut.__data__;if(!Dt||Gt.length<b-1)return Gt.push([Ce,Xe]),this;ut=this.__data__=new it(Gt)}return ut.set(Ce,Xe),this}Ut.prototype.clear=Ht,Ut.prototype.delete=Be,Ut.prototype.get=gt,Ut.prototype.has=bt,Ut.prototype.set=ot;function Nt(Ce,Xe){var ut=Ar(Ce)||Hr(Ce)?je(Ce.length,String):[],Gt=ut.length,mr=!!Gt;for(var br in Ce)(Xe||Ye.call(Ce,br))&&!(mr&&(br=="length"||pr(br,Gt)))&&ut.push(br);return ut}function $t(Ce,Xe,ut){var Gt=Ce[Xe];(!(Ye.call(Ce,Xe)&&Pr(Gt,ut))||ut===void 0&&!(Xe in Ce))&&(Ce[Xe]=ut)}function It(Ce,Xe){for(var ut=Ce.length;ut--;)if(Pr(Ce[ut][0],Xe))return ut;return-1}function Rt(Ce,Xe){return Ce&&tr(Xe,Mr(Xe),Ce)}function xt(Ce,Xe,ut,Gt,mr,br,_r){var yr;if(Gt&&(yr=br?Gt(Ce,mr,br,_r):Gt(Ce)),yr!==void 0)return yr;if(!xr(Ce))return Ce;var Nr=Ar(Ce);if(Nr){if(yr=lr(Ce),!Xe)return sr(Ce,yr)}else{var $r=ur(Ce),Rr=$r==J||$r==Z;if(qr(Ce))return vt(Ce,Xe);if($r==ue||$r==T||Rr&&!br){if(qe(Ce))return br?Ce:{};if(yr=hr(Rr?{}:Ce),!Xe)return nr(Ce,Rt(yr,Ce))}else{if(!L[$r])return br?Ce:{};yr=dr(Ce,$r,xt,Xe)}}_r||(_r=new Ut);var Cr=_r.get(Ce);if(Cr)return Cr;if(_r.set(Ce,yr),!Nr)var Br=ut?ir(Ce):Mr(Ce);return Ae(Br||Ce,function(Ir,Sr){Br&&(Sr=Ir,Ir=Ce[Sr]),$t(yr,Sr,xt(Ir,Xe,ut,Gt,Sr,Ce,_r))}),yr}function We(Ce){return xr(Ce)?Bt(Ce):{}}function Je(Ce,Xe,ut){var Gt=Xe(Ce);return Ar(Ce)?Gt:le(Gt,ut(Ce))}function ft(Ce){return ht.call(Ce)}function nt(Ce){if(!xr(Ce)||jr(Ce))return!1;var Xe=kr(Ce)||qe(Ce)?at:H;return Xe.test(wr(Ce))}function st(Ce){if(!Tr(Ce))return Mt(Ce);var Xe=[];for(var ut in Object(Ce))Ye.call(Ce,ut)&&ut!="constructor"&&Xe.push(ut);return Xe}function vt(Ce,Xe){if(Xe)return Ce.slice();var ut=new Ce.constructor(Ce.length);return Ce.copy(ut),ut}function qt(Ce){var Xe=new Ce.constructor(Ce.byteLength);return new yt(Xe).set(new yt(Ce)),Xe}function Zt(Ce,Xe){var ut=Xe?qt(Ce.buffer):Ce.buffer;return new Ce.constructor(ut,Ce.byteOffset,Ce.byteLength)}function er(Ce,Xe,ut){var Gt=Xe?ut(Ze(Ce),!0):Ze(Ce);return ke(Gt,Se,new Ce.constructor)}function Qt(Ce){var Xe=new Ce.constructor(Ce.source,Q.exec(Ce));return Xe.lastIndex=Ce.lastIndex,Xe}function Le(Ce,Xe,ut){var Gt=Xe?ut(de(Ce),!0):de(Ce);return ke(Gt,Te,new Ce.constructor)}function rr(Ce){return Kt?Object(Kt.call(Ce)):{}}function ar(Ce,Xe){var ut=Xe?qt(Ce.buffer):Ce.buffer;return new Ce.constructor(ut,Ce.byteOffset,Ce.length)}function sr(Ce,Xe){var ut=-1,Gt=Ce.length;for(Xe||(Xe=Array(Gt));++ut<Gt;)Xe[ut]=Ce[ut];return Xe}function tr(Ce,Xe,ut,Gt){ut||(ut={});for(var mr=-1,br=Xe.length;++mr<br;){var _r=Xe[mr],yr=Gt?Gt(ut[_r],Ce[_r],_r,ut,Ce):void 0;$t(ut,_r,yr===void 0?Ce[_r]:yr)}return ut}function nr(Ce,Xe){return tr(Ce,cr(Ce),Xe)}function ir(Ce){return Je(Ce,Mr,cr)}function fr(Ce,Xe){var ut=Ce.__data__;return vr(Xe)?ut[typeof Xe=="string"?"string":"hash"]:ut.map}function or(Ce,Xe){var ut=Ve(Ce,Xe);return nt(ut)?ut:void 0}var cr=Ft?Pe(Ft,Object):Jr,ur=ft;(Xt&&ur(new Xt(new ArrayBuffer(1)))!=xe||Dt&&ur(new Dt)!=re||lt&&ur(lt.resolve())!=ne||Yt&&ur(new Yt)!=ae||jt&&ur(new jt)!=_e)&&(ur=function(Ce){var Xe=ht.call(Ce),ut=Xe==ue?Ce.constructor:void 0,Gt=ut?wr(ut):void 0;if(Gt)switch(Gt){case Wt:return xe;case Ot:return re;case dt:return ne;case zt:return ae;case Ct:return _e}return Xe});function lr(Ce){var Xe=Ce.length,ut=Ce.constructor(Xe);return Xe&&typeof Ce[0]=="string"&&Ye.call(Ce,"index")&&(ut.index=Ce.index,ut.input=Ce.input),ut}function hr(Ce){return typeof Ce.constructor=="function"&&!Tr(Ce)?We(ct(Ce)):{}}function dr(Ce,Xe,ut,Gt){var mr=Ce.constructor;switch(Xe){case be:return qt(Ce);case C:case F:return new mr(+Ce);case xe:return Zt(Ce,Gt);case ee:case he:case we:case Ne:case pe:case te:case Y:case R:case B:return ar(Ce,Gt);case re:return er(Ce,Gt,ut);case ie:case ye:return new mr(Ce);case ce:return Qt(Ce);case ae:return Le(Ce,Gt,ut);case $e:return rr(Ce)}}function pr(Ce,Xe){return Xe=Xe==null?$:Xe,!!Xe&&(typeof Ce=="number"||j.test(Ce))&&Ce>-1&&Ce%1==0&&Ce<Xe}function vr(Ce){var Xe=typeof Ce;return Xe=="string"||Xe=="number"||Xe=="symbol"||Xe=="boolean"?Ce!=="__proto__":Ce===null}function jr(Ce){return!!ze&&ze in Ce}function Tr(Ce){var Xe=Ce&&Ce.constructor,ut=typeof Xe=="function"&&Xe.prototype||Fe;return Ce===ut}function wr(Ce){if(Ce!=null){try{return Qe.call(Ce)}catch{}try{return Ce+""}catch{}}return""}function Gr(Ce){return xt(Ce,!0,!0)}function Pr(Ce,Xe){return Ce===Xe||Ce!==Ce&&Xe!==Xe}function Hr(Ce){return zr(Ce)&&Ye.call(Ce,"callee")&&(!Et.call(Ce,"callee")||ht.call(Ce)==T)}var Ar=Array.isArray;function Or(Ce){return Ce!=null&&Kr(Ce.length)&&!kr(Ce)}function zr(Ce){return Wr(Ce)&&Or(Ce)}var qr=At||Vr;function kr(Ce){var Xe=xr(Ce)?ht.call(Ce):"";return Xe==J||Xe==Z}function Kr(Ce){return typeof Ce=="number"&&Ce>-1&&Ce%1==0&&Ce<=$}function xr(Ce){var Xe=typeof Ce;return!!Ce&&(Xe=="object"||Xe=="function")}function Wr(Ce){return!!Ce&&typeof Ce=="object"}function Mr(Ce){return Or(Ce)?Nt(Ce):st(Ce)}function Jr(){return[]}function Vr(){return!1}t.exports=Gr})(lodash_clonedeep,lodash_clonedeep.exports);var lib$4={},streamId={},src$7={exports:{}};function base$2(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),b=0;b<e.length;b++)e[b]=255;for(var w=0;w<t.length;w++){var $=t.charAt(w),T=$.charCodeAt(0);if(e[T]!==255)throw new TypeError($+" is ambiguous");e[T]=w}var N=t.length,C=t.charAt(0),F=Math.log(N)/Math.log(256),G=Math.log(256)/Math.log(N);function J(ie){if(ie instanceof Uint8Array||(ArrayBuffer.isView(ie)?ie=new Uint8Array(ie.buffer,ie.byteOffset,ie.byteLength):Array.isArray(ie)&&(ie=Uint8Array.from(ie))),!(ie instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(ie.length===0)return"";for(var ue=0,ne=0,ce=0,ae=ie.length;ce!==ae&&ie[ce]===0;)ce++,ue++;for(var ye=(ae-ce)*G+1>>>0,$e=new Uint8Array(ye);ce!==ae;){for(var _e=ie[ce],be=0,xe=ye-1;(_e!==0||be<ne)&&xe!==-1;xe--,be++)_e+=256*$e[xe]>>>0,$e[xe]=_e%N>>>0,_e=_e/N>>>0;if(_e!==0)throw new Error("Non-zero carry");ne=be,ce++}for(var ee=ye-ne;ee!==ye&&$e[ee]===0;)ee++;for(var he=C.repeat(ue);ee<ye;++ee)he+=t.charAt($e[ee]);return he}function Z(ie){if(typeof ie!="string")throw new TypeError("Expected String");if(ie.length===0)return new Uint8Array;var ue=0;if(ie[ue]!==" "){for(var ne=0,ce=0;ie[ue]===C;)ne++,ue++;for(var ae=(ie.length-ue)*F+1>>>0,ye=new Uint8Array(ae);ie[ue];){var $e=e[ie.charCodeAt(ue)];if($e===255)return;for(var _e=0,be=ae-1;($e!==0||_e<ce)&&be!==-1;be--,_e++)$e+=N*ye[be]>>>0,ye[be]=$e%256>>>0,$e=$e/256>>>0;if($e!==0)throw new Error("Non-zero carry");ce=_e,ue++}if(ie[ue]!==" "){for(var xe=ae-ce;xe!==ae&&ye[xe]===0;)xe++;for(var ee=new Uint8Array(ne+(ae-xe)),he=ne;xe!==ae;)ee[he++]=ye[xe++];return ee}}}function re(ie){var ue=Z(ie);if(ue)return ue;throw new Error("Non-base"+N+" character")}return{encode:J,decodeUnsafe:Z,decode:re}}var src$6=base$2;const textDecoder=new TextDecoder,decodeText$1=t=>textDecoder.decode(t),textEncoder=new TextEncoder,encodeText$2=t=>textEncoder.encode(t);function concat$b(t,e){const b=new Uint8Array(e);let w=0;for(const $ of t)b.set($,w),w+=$.length;return b}var util$7={decodeText:decodeText$1,encodeText:encodeText$2,concat:concat$b};const{encodeText:encodeText$1}=util$7;class Base$4{constructor(e,b,w,$){this.name=e,this.code=b,this.codeBuf=encodeText$1(this.code),this.alphabet=$,this.codec=w($)}encode(e){return this.codec.encode(e)}decode(e){for(const b of e)if(this.alphabet&&this.alphabet.indexOf(b)<0)throw new Error(`invalid character '${b}' in '${e}'`);return this.codec.decode(e)}}var base$1=Base$4;const decode$4=(t,e,b)=>{const w={};for(let G=0;G<e.length;++G)w[e[G]]=G;let $=t.length;for(;t[$-1]==="=";)--$;const T=new Uint8Array($*b/8|0);let N=0,C=0,F=0;for(let G=0;G<$;++G){const J=w[t[G]];if(J===void 0)throw new SyntaxError("Invalid character "+t[G]);C=C<<b|J,N+=b,N>=8&&(N-=8,T[F++]=255&C>>N)}if(N>=b||255&C<<8-N)throw new SyntaxError("Unexpected end of data");return T},encode$3=(t,e,b)=>{const w=e[e.length-1]==="=",$=(1<<b)-1;let T="",N=0,C=0;for(let F=0;F<t.length;++F)for(C=C<<8|t[F],N+=8;N>b;)N-=b,T+=e[$&C>>N];if(N&&(T+=e[$&C<<b-N]),w)for(;T.length*b&7;)T+="=";return T},rfc4648$1=t=>e=>({encode(b){return encode$3(b,e,t)},decode(b){return decode$4(b,e,t)}});var rfc4648_1={rfc4648:rfc4648$1};const baseX=src$6,Base$3=base$1,{rfc4648}=rfc4648_1,{decodeText,encodeText}=util$7,identity$3=()=>({encode:decodeText,decode:encodeText}),constants$5=[["identity","\0",identity$3,""],["base2","0",rfc4648(1),"01"],["base8","7",rfc4648(3),"01234567"],["base10","9",baseX,"0123456789"],["base16","f",rfc4648(4),"0123456789abcdef"],["base16upper","F",rfc4648(4),"0123456789ABCDEF"],["base32hex","v",rfc4648(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",rfc4648(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",rfc4648(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",baseX,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",baseX,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",baseX,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",baseX,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],names$2=constants$5.reduce((t,e)=>(t[e[0]]=new Base$3(e[0],e[1],e[2],e[3]),t),{}),codes$1=constants$5.reduce((t,e)=>(t[e[1]]=names$2[e[0]],t),{});var constants_1$2={names:names$2,codes:codes$1};(function(t,e){const b=constants_1$2,{encodeText:w,decodeText:$,concat:T}=util$7;function N(ne,ce){if(!ce)throw new Error("requires an encoded Uint8Array");const{name:ae,codeBuf:ye}=Z(ne);return J(ae,ce),T([ye,ce],ye.length+ce.length)}function C(ne,ce){const ae=Z(ne),ye=w(ae.encode(ce));return T([ae.codeBuf,ye],ae.codeBuf.length+ye.length)}function F(ne){ne instanceof Uint8Array&&(ne=$(ne));const ce=ne[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(ce)&&(ne=ne.toLowerCase()),Z(ne[0]).decode(ne.substring(1))}function G(ne){if(ne instanceof Uint8Array&&(ne=$(ne)),Object.prototype.toString.call(ne)!=="[object String]")return!1;try{return Z(ne[0]).name}catch{return!1}}function J(ne,ce){Z(ne).decode($(ce))}function Z(ne){if(Object.prototype.hasOwnProperty.call(b.names,ne))return b.names[ne];if(Object.prototype.hasOwnProperty.call(b.codes,ne))return b.codes[ne];throw new Error(`Unsupported encoding: ${ne}`)}function re(ne){return ne instanceof Uint8Array&&(ne=$(ne)),Z(ne[0])}e=t.exports=N,e.encode=C,e.decode=F,e.isEncoded=G,e.encoding=Z,e.encodingFromData=re;const ie=Object.freeze(b.names),ue=Object.freeze(b.codes);e.names=ie,e.codes=ue})(src$7,src$7.exports);var encode_1$1=encode$2,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$2(t,e,b){e=e||[],b=b||0;for(var w=b;t>=INT$1;)e[b++]=t&255|MSB$3,t/=128;for(;t&MSBALL$1;)e[b++]=t&255|MSB$3,t>>>=7;return e[b]=t|0,encode$2.bytes=b-w+1,e}var decode$3=read$1,MSB$2=128,REST$2=127;function read$1(t,e){var b=0,e=e||0,w=0,$=e,T,N=t.length;do{if($>=N)throw read$1.bytes=0,new RangeError("Could not decode varint");T=t[$++],b+=w<28?(T&REST$2)<<w:(T&REST$2)*Math.pow(2,w),w+=7}while(T>=MSB$2);return read$1.bytes=$-e,b}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},varint$4={encode:encode_1$1,decode:decode$3,encodingLength:length$1};const names$1=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});var constants$4={names:names$1};function createCodec$4(t,e,b,w){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:b},decoder:{decode:w}}}const string$4=createCodec$4("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ascii$4=createCodec$4("ascii","a",t=>{let e="a";for(let b=0;b<t.length;b++)e+=String.fromCharCode(t[b]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let b=0;b<t.length;b++)e[b]=t.charCodeAt(b);return e}),BASES$4=Tt({utf8:string$4,"utf-8":string$4,hex:bases$3.base16,latin1:ascii$4,ascii:ascii$4,binary:ascii$4},bases$3);function toString$5(t,e="utf8"){const b=BASES$4[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.encoder.encode(t).substring(1)}var toString$6=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:toString$5}),require$$3$2=getAugmentedNamespace(toString$6);function fromString$7(t,e="utf8"){const b=BASES$4[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.decoder.decode(`${b.prefix}${t}`)}var fromString$8=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:fromString$7}),require$$4$2=getAugmentedNamespace(fromString$8);function concat$9(t,e){e||(e=t.reduce(($,T)=>$+T.length,0));const b=new Uint8Array(e);let w=0;for(const $ of t)b.set($,w),w+=$.length;return b}var concat$a=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:concat$9}),require$$5$1=getAugmentedNamespace(concat$a);const multibase$1=src$7.exports,varint$3=varint$4,{names}=constants$4,{toString:uint8ArrayToString$2}=require$$3$2,{fromString:uint8ArrayFromString$3}=require$$4$2,{concat:uint8ArrayConcat$3}=require$$5$1,codes={};for(const t in names){const e=t;codes[names[e]]=e}Object.freeze(codes);function toHexString(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return uint8ArrayToString$2(t,"base16")}function fromHexString(t){return uint8ArrayFromString$3(t,"base16")}function toB58String(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return uint8ArrayToString$2(multibase$1.encode("base58btc",t)).slice(1)}function fromB58String(t){const e=t instanceof Uint8Array?uint8ArrayToString$2(t):t;return multibase$1.decode("z"+e)}function decode$2(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");const e=varint$3.decode(t);if(!isValidCode(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(varint$3.decode.bytes);const b=varint$3.decode(t);if(b<0)throw new Error(`multihash invalid length: ${b}`);if(t=t.slice(varint$3.decode.bytes),t.length!==b)throw new Error(`multihash length inconsistent: 0x${uint8ArrayToString$2(t,"base16")}`);return{code:e,name:codes[e],length:b,digest:t}}function encode$1(t,e,b){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");const w=coerceCode(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(b==null&&(b=t.length),b&&t.length!==b)throw new Error("digest length should be equal to specified length.");const $=varint$3.encode(w),T=varint$3.encode(b);return uint8ArrayConcat$3([$,T,t],$.length+T.length+t.length)}function coerceCode(t){let e=t;if(typeof t=="string"){if(names[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=names[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(codes[e]===void 0&&!isAppCode(e))throw new Error(`Unrecognized function code: ${e}`);return e}function isAppCode(t){return t>0&&t<16}function isValidCode(t){return!!(isAppCode(t)||codes[t])}function validate(t){decode$2(t)}function prefix(t){return validate(t),t.subarray(0,2)}var src$5={names,codes,toHexString,fromHexString,toB58String,fromB58String,decode:decode$2,encode:encode$1,coerceCode,isAppCode,validate,prefix,isValidCode},encode_1=encode,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode(t,e,b){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw encode.bytes=0,new RangeError("Could not encode varint");e=e||[],b=b||0;for(var w=b;t>=INT;)e[b++]=t&255|MSB$1,t/=128;for(;t&MSBALL;)e[b++]=t&255|MSB$1,t>>>=7;return e[b]=t|0,encode.bytes=b-w+1,e}var decode$1=read,MSB=128,REST=127;function read(t,e){var b=0,e=e||0,w=0,$=e,T,N=t.length;do{if($>=N||w>49)throw read.bytes=0,new RangeError("Could not decode varint");T=t[$++],b+=w<28?(T&REST)<<w:(T&REST)*Math.pow(2,w),w+=7}while(T>=MSB);return read.bytes=$-e,b}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint$2={encode:encode_1,decode:decode$1,encodingLength:length};function concat$7(t,e){e||(e=t.reduce(($,T)=>$+T.length,0));const b=new Uint8Array(e);let w=0;for(const $ of t)b.set($,w),w+=$.length;return b}var concat$8=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:concat$7}),require$$1$3=getAugmentedNamespace(concat$8);function createCodec$3(t,e,b,w){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:b},decoder:{decode:w}}}const string$3=createCodec$3("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ascii$3=createCodec$3("ascii","a",t=>{let e="a";for(let b=0;b<t.length;b++)e+=String.fromCharCode(t[b]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let b=0;b<t.length;b++)e[b]=t.charCodeAt(b);return e}),BASES$3=Tt({utf8:string$3,"utf-8":string$3,hex:bases$3.base16,latin1:ascii$3,ascii:ascii$3,binary:ascii$3},bases$3);function toString$3(t,e="utf8"){const b=BASES$3[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.encoder.encode(t).substring(1)}var toString$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:toString$3}),require$$1$2=getAugmentedNamespace(toString$4);function fromString$5(t,e="utf8"){const b=BASES$3[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.decoder.decode(`${b.prefix}${t}`)}var fromString$6=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:fromString$5}),require$$2$1=getAugmentedNamespace(fromString$6);const varint$1=varint$2,{toString:uint8ArrayToString$1}=require$$1$2,{fromString:uint8ArrayFromString$2}=require$$2$1;var util$6={numberToUint8Array,uint8ArrayToNumber,varintUint8ArrayEncode,varintEncode:varintEncode$1};function uint8ArrayToNumber(t){return parseInt(uint8ArrayToString$1(t,"base16"),16)}function numberToUint8Array(t){let e=t.toString(16);return e.length%2==1&&(e="0"+e),uint8ArrayFromString$2(e,"base16")}function varintUint8ArrayEncode(t){return Uint8Array.from(varint$1.encode(uint8ArrayToNumber(t)))}function varintEncode$1(t){return Uint8Array.from(varint$1.encode(t))}const baseTable$1=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"eth-receipt-log-trie":153,"eth-reciept-log":154,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,"caip-50":202,streamid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,noise:454,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,"swhid-1-snp":496,json:512,messagepack:513,"libp2p-peer-record":769,"libp2p-relay-rsvp":770,"car-index-sorted":1024,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,"secp256k1-priv":4865,"x25519-priv":4866,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056,"arweave-ns":11704592});var generatedTable={baseTable:baseTable$1};const{baseTable}=generatedTable,varintEncode=util$6.varintEncode,nameToVarint$1={},constantToCode$1={},codeToName$1={};for(const t in baseTable){const e=t,b=baseTable[e];nameToVarint$1[e]=varintEncode(b);const w=e.toUpperCase().replace(/-/g,"_");constantToCode$1[w]=b,codeToName$1[b]||(codeToName$1[b]=e)}Object.freeze(nameToVarint$1);Object.freeze(constantToCode$1);Object.freeze(codeToName$1);const nameToCode$1=Object.freeze(baseTable);var maps={nameToVarint:nameToVarint$1,constantToCode:constantToCode$1,nameToCode:nameToCode$1,codeToName:codeToName$1};const varint=varint$2,{concat:uint8ArrayConcat$2}=require$$1$3,util$5=util$6,{nameToVarint,constantToCode,nameToCode,codeToName}=maps;function addPrefix(t,e){let b;if(t instanceof Uint8Array)b=util$5.varintUint8ArrayEncode(t);else if(nameToVarint[t])b=nameToVarint[t];else throw new Error("multicodec not recognized");return uint8ArrayConcat$2([b,e],b.length+e.length)}function rmPrefix(t){return varint.decode(t),t.slice(varint.decode.bytes)}function getNameFromData(t){const e=varint.decode(t),b=codeToName[e];if(b===void 0)throw new Error(`Code "${e}" not found`);return b}function getNameFromCode(t){return codeToName[t]}function getCodeFromName(t){const e=nameToCode[t];if(e===void 0)throw new Error(`Codec "${t}" not found`);return e}function getCodeFromData(t){return varint.decode(t)}function getVarintFromName(t){const e=nameToVarint[t];if(e===void 0)throw new Error(`Codec "${t}" not found`);return e}function getVarintFromCode(t){return util$5.varintEncode(t)}function getCodec(t){return getNameFromData(t)}function getName(t){return getNameFromCode(t)}function getNumber(t){return getCodeFromName(t)}function getCode(t){return getCodeFromData(t)}function getCodeVarint(t){return getVarintFromName(t)}function getVarint(t){return Array.from(getVarintFromCode(t))}var src$4=gr(Tt({addPrefix,rmPrefix,getNameFromData,getNameFromCode,getCodeFromName,getCodeFromData,getVarintFromName,getVarintFromCode,getCodec,getName,getNumber,getCode,getCodeVarint,getVarint},constantToCode),{nameToVarint,nameToCode,codeToName});const mh$1=src$5,CIDUtil$1={checkCIDComponents:function(t){if(t==null)return"null values are not valid CIDs";if(!(t.version===0||t.version===1))return"Invalid version, must be a number equal to 1 or 0";if(typeof t.codec!="string")return"codec must be string";if(t.version===0){if(t.codec!=="dag-pb")return"codec must be 'dag-pb' for CIDv0";if(t.multibaseName!=="base58btc")return"multibaseName must be 'base58btc' for CIDv0"}if(!(t.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{mh$1.validate(t.multihash)}catch(e){let b=e.message;return b||(b="Multihash validation failed"),b}}};var cidUtil=CIDUtil$1;function concat$5(t,e){e||(e=t.reduce(($,T)=>$+T.length,0));const b=new Uint8Array(e);let w=0;for(const $ of t)b.set($,w),w+=$.length;return b}var concat$6=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:concat$5}),require$$4$1=getAugmentedNamespace(concat$6);function createCodec$2(t,e,b,w){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:b},decoder:{decode:w}}}const string$2=createCodec$2("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ascii$2=createCodec$2("ascii","a",t=>{let e="a";for(let b=0;b<t.length;b++)e+=String.fromCharCode(t[b]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let b=0;b<t.length;b++)e[b]=t.charCodeAt(b);return e}),BASES$2=Tt({utf8:string$2,"utf-8":string$2,hex:bases$3.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2},bases$3);function toString$1(t,e="utf8"){const b=BASES$2[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.encoder.encode(t).substring(1)}var toString$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:toString$1}),require$$5=getAugmentedNamespace(toString$2);function equals$3(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let b=0;b<t.byteLength;b++)if(t[b]!==e[b])return!1;return!0}var equals$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:equals$3}),require$$6=getAugmentedNamespace(equals$4);const mh=src$5,multibase=src$7.exports,multicodec$1=src$4,CIDUtil=cidUtil,{concat:uint8ArrayConcat$1}=require$$4$1,{toString:uint8ArrayToString}=require$$5,{equals:uint8ArrayEquals}=require$$6,codecs=multicodec$1.nameToCode,codecInts=Object.keys(codecs).reduce((t,e)=>(t[codecs[e]]=e,t),{}),symbol=Symbol.for("@ipld/js-cid/CID");class CID$2{constructor(e,b,w,$){if(this.version,this.codec,this.multihash,Object.defineProperty(this,symbol,{value:!0}),CID$2.isCID(e)){const T=e;this.version=T.version,this.codec=T.codec,this.multihash=T.multihash,this.multibaseName=T.multibaseName||(T.version===0?"base58btc":"base32");return}if(typeof e=="string"){const T=multibase.isEncoded(e);if(T){const N=multibase.decode(e);this.version=parseInt(N[0].toString(),16),this.codec=multicodec$1.getCodec(N.slice(1)),this.multihash=multicodec$1.rmPrefix(N.slice(1)),this.multibaseName=T}else this.version=0,this.codec="dag-pb",this.multihash=mh.fromB58String(e),this.multibaseName="base58btc";CID$2.validateCID(this),Object.defineProperty(this,"string",{value:e});return}if(e instanceof Uint8Array){const T=parseInt(e[0].toString(),16);if(T===1){const N=e;this.version=T,this.codec=multicodec$1.getCodec(N.slice(1)),this.multihash=multicodec$1.rmPrefix(N.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$2.validateCID(this);return}this.version=e,typeof b=="number"&&(b=codecInts[b]),this.codec=b,this.multihash=w,this.multibaseName=$||(e===0?"base58btc":"base32"),CID$2.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(this.version===0)e=this.multihash;else if(this.version===1){const b=multicodec$1.getCodeVarint(this.codec);e=uint8ArrayConcat$1([[1],b,this.multihash],1+b.byteLength+this.multihash.byteLength)}else throw new Error("unsupported version");Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=multicodec$1.getCodeVarint(this.codec),b=mh.prefix(this.multihash);return uint8ArrayConcat$1([[this.version],e,b],1+e.byteLength+b.byteLength)}get code(){return codecs[this.codec]}toV0(){if(this.codec!=="dag-pb")throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:b}=mh.decode(this.multihash);if(e!=="sha2-256")throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(b!==32)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new CID$2(0,this.codec,this.multihash)}toV1(){return new CID$2(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&this.string.length!==0&&e===this.multibaseName)return this.string;let b;if(this.version===0){if(e!=="base58btc")throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");b=mh.toB58String(this.multihash)}else if(this.version===1)b=uint8ArrayToString(multibase.encode(e,this.bytes));else throw new Error("unsupported version");return e===this.multibaseName&&Object.defineProperty(this,"string",{value:b}),b}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&uint8ArrayEquals(this.multihash,e.multihash)}static validateCID(e){const b=CIDUtil.checkCIDComponents(e);if(b)throw new Error(b)}static isCID(e){return e instanceof CID$2||Boolean(e&&e[symbol])}}CID$2.codecs=codecs;var src$3=CID$2,src$2={},src$1={},isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone(t){var e,b,w,$=ae.prototype={constructor:ae,toString:null,valueOf:null},T=new ae(1),N=20,C=4,F=-7,G=21,J=-1e7,Z=1e7,re=!1,ie=1,ue=0,ne={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},ce="0123456789abcdefghijklmnopqrstuvwxyz";function ae(ee,he){var we,Ne,pe,te,Y,R,B,V,Q=this;if(!(Q instanceof ae))return new ae(ee,he);if(he==null){if(ee&&ee._isBigNumber===!0){Q.s=ee.s,!ee.c||ee.e>Z?Q.c=Q.e=null:ee.e<J?Q.c=[Q.e=0]:(Q.e=ee.e,Q.c=ee.c.slice());return}if((R=typeof ee=="number")&&ee*0==0){if(Q.s=1/ee<0?(ee=-ee,-1):1,ee===~~ee){for(te=0,Y=ee;Y>=10;Y/=10,te++);te>Z?Q.c=Q.e=null:(Q.e=te,Q.c=[ee]);return}V=String(ee)}else{if(!isNumeric.test(V=String(ee)))return w(Q,V,R);Q.s=V.charCodeAt(0)==45?(V=V.slice(1),-1):1}(te=V.indexOf("."))>-1&&(V=V.replace(".","")),(Y=V.search(/e/i))>0?(te<0&&(te=Y),te+=+V.slice(Y+1),V=V.substring(0,Y)):te<0&&(te=V.length)}else{if(intCheck(he,2,ce.length,"Base"),he==10)return Q=new ae(ee),be(Q,N+Q.e+1,C);if(V=String(ee),R=typeof ee=="number"){if(ee*0!=0)return w(Q,V,R,he);if(Q.s=1/ee<0?(V=V.slice(1),-1):1,ae.DEBUG&&V.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+ee)}else Q.s=V.charCodeAt(0)===45?(V=V.slice(1),-1):1;for(we=ce.slice(0,he),te=Y=0,B=V.length;Y<B;Y++)if(we.indexOf(Ne=V.charAt(Y))<0){if(Ne=="."){if(Y>te){te=B;continue}}else if(!pe&&(V==V.toUpperCase()&&(V=V.toLowerCase())||V==V.toLowerCase()&&(V=V.toUpperCase()))){pe=!0,Y=-1,te=0;continue}return w(Q,String(ee),R,he)}R=!1,V=b(V,he,10,Q.s),(te=V.indexOf("."))>-1?V=V.replace(".",""):te=V.length}for(Y=0;V.charCodeAt(Y)===48;Y++);for(B=V.length;V.charCodeAt(--B)===48;);if(V=V.slice(Y,++B)){if(B-=Y,R&&ae.DEBUG&&B>15&&(ee>MAX_SAFE_INTEGER||ee!==mathfloor(ee)))throw Error(tooManyDigits+Q.s*ee);if((te=te-Y-1)>Z)Q.c=Q.e=null;else if(te<J)Q.c=[Q.e=0];else{if(Q.e=te,Q.c=[],Y=(te+1)%LOG_BASE,te<0&&(Y+=LOG_BASE),Y<B){for(Y&&Q.c.push(+V.slice(0,Y)),B-=LOG_BASE;Y<B;)Q.c.push(+V.slice(Y,Y+=LOG_BASE));Y=LOG_BASE-(V=V.slice(Y)).length}else Y-=B;for(;Y--;V+="0");Q.c.push(+V)}}else Q.c=[Q.e=0]}ae.clone=clone,ae.ROUND_UP=0,ae.ROUND_DOWN=1,ae.ROUND_CEIL=2,ae.ROUND_FLOOR=3,ae.ROUND_HALF_UP=4,ae.ROUND_HALF_DOWN=5,ae.ROUND_HALF_EVEN=6,ae.ROUND_HALF_CEIL=7,ae.ROUND_HALF_FLOOR=8,ae.EUCLID=9,ae.config=ae.set=function(ee){var he,we;if(ee!=null)if(typeof ee=="object"){if(ee.hasOwnProperty(he="DECIMAL_PLACES")&&(we=ee[he],intCheck(we,0,MAX,he),N=we),ee.hasOwnProperty(he="ROUNDING_MODE")&&(we=ee[he],intCheck(we,0,8,he),C=we),ee.hasOwnProperty(he="EXPONENTIAL_AT")&&(we=ee[he],we&&we.pop?(intCheck(we[0],-MAX,0,he),intCheck(we[1],0,MAX,he),F=we[0],G=we[1]):(intCheck(we,-MAX,MAX,he),F=-(G=we<0?-we:we))),ee.hasOwnProperty(he="RANGE"))if(we=ee[he],we&&we.pop)intCheck(we[0],-MAX,-1,he),intCheck(we[1],1,MAX,he),J=we[0],Z=we[1];else if(intCheck(we,-MAX,MAX,he),we)J=-(Z=we<0?-we:we);else throw Error(bignumberError+he+" cannot be zero: "+we);if(ee.hasOwnProperty(he="CRYPTO"))if(we=ee[he],we===!!we)if(we)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=we;else throw re=!we,Error(bignumberError+"crypto unavailable");else re=we;else throw Error(bignumberError+he+" not true or false: "+we);if(ee.hasOwnProperty(he="MODULO_MODE")&&(we=ee[he],intCheck(we,0,9,he),ie=we),ee.hasOwnProperty(he="POW_PRECISION")&&(we=ee[he],intCheck(we,0,MAX,he),ue=we),ee.hasOwnProperty(he="FORMAT"))if(we=ee[he],typeof we=="object")ne=we;else throw Error(bignumberError+he+" not an object: "+we);if(ee.hasOwnProperty(he="ALPHABET"))if(we=ee[he],typeof we=="string"&&!/^.$|[+-.\s]|(.).*\1/.test(we))ce=we;else throw Error(bignumberError+he+" invalid: "+we)}else throw Error(bignumberError+"Object expected: "+ee);return{DECIMAL_PLACES:N,ROUNDING_MODE:C,EXPONENTIAL_AT:[F,G],RANGE:[J,Z],CRYPTO:re,MODULO_MODE:ie,POW_PRECISION:ue,FORMAT:ne,ALPHABET:ce}},ae.isBigNumber=function(ee){if(!ee||ee._isBigNumber!==!0)return!1;if(!ae.DEBUG)return!0;var he,we,Ne=ee.c,pe=ee.e,te=ee.s;e:if({}.toString.call(Ne)=="[object Array]"){if((te===1||te===-1)&&pe>=-MAX&&pe<=MAX&&pe===mathfloor(pe)){if(Ne[0]===0){if(pe===0&&Ne.length===1)return!0;break e}if(he=(pe+1)%LOG_BASE,he<1&&(he+=LOG_BASE),String(Ne[0]).length==he){for(he=0;he<Ne.length;he++)if(we=Ne[he],we<0||we>=BASE||we!==mathfloor(we))break e;if(we!==0)return!0}}}else if(Ne===null&&pe===null&&(te===null||te===1||te===-1))return!0;throw Error(bignumberError+"Invalid BigNumber: "+ee)},ae.maximum=ae.max=function(){return $e(arguments,$.lt)},ae.minimum=ae.min=function(){return $e(arguments,$.gt)},ae.random=function(){var ee=9007199254740992,he=Math.random()*ee&2097151?function(){return mathfloor(Math.random()*ee)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(we){var Ne,pe,te,Y,R,B=0,V=[],Q=new ae(T);if(we==null?we=N:intCheck(we,0,MAX),Y=mathceil(we/LOG_BASE),re)if(crypto.getRandomValues){for(Ne=crypto.getRandomValues(new Uint32Array(Y*=2));B<Y;)R=Ne[B]*131072+(Ne[B+1]>>>11),R>=9e15?(pe=crypto.getRandomValues(new Uint32Array(2)),Ne[B]=pe[0],Ne[B+1]=pe[1]):(V.push(R%1e14),B+=2);B=Y/2}else if(crypto.randomBytes){for(Ne=crypto.randomBytes(Y*=7);B<Y;)R=(Ne[B]&31)*281474976710656+Ne[B+1]*1099511627776+Ne[B+2]*4294967296+Ne[B+3]*16777216+(Ne[B+4]<<16)+(Ne[B+5]<<8)+Ne[B+6],R>=9e15?crypto.randomBytes(7).copy(Ne,B):(V.push(R%1e14),B+=7);B=Y/7}else throw re=!1,Error(bignumberError+"crypto unavailable");if(!re)for(;B<Y;)R=he(),R<9e15&&(V[B++]=R%1e14);for(Y=V[--B],we%=LOG_BASE,Y&&we&&(R=POWS_TEN[LOG_BASE-we],V[B]=mathfloor(Y/R)*R);V[B]===0;V.pop(),B--);if(B<0)V=[te=0];else{for(te=-1;V[0]===0;V.splice(0,1),te-=LOG_BASE);for(B=1,R=V[0];R>=10;R/=10,B++);B<LOG_BASE&&(te-=LOG_BASE-B)}return Q.e=te,Q.c=V,Q}}(),ae.sum=function(){for(var ee=1,he=arguments,we=new ae(he[0]);ee<he.length;)we=we.plus(he[ee++]);return we},b=function(){var ee="0123456789";function he(we,Ne,pe,te){for(var Y,R=[0],B,V=0,Q=we.length;V<Q;){for(B=R.length;B--;R[B]*=Ne);for(R[0]+=te.indexOf(we.charAt(V++)),Y=0;Y<R.length;Y++)R[Y]>pe-1&&(R[Y+1]==null&&(R[Y+1]=0),R[Y+1]+=R[Y]/pe|0,R[Y]%=pe)}return R.reverse()}return function(we,Ne,pe,te,Y){var R,B,V,Q,H,j,L,q,U=we.indexOf("."),oe=N,ve=C;for(U>=0&&(Q=ue,ue=0,we=we.replace(".",""),q=new ae(Ne),j=q.pow(we.length-U),ue=Q,q.c=he(toFixedPoint(coeffToString(j.c),j.e,"0"),10,pe,ee),q.e=q.c.length),L=he(we,Ne,pe,Y?(R=ce,ee):(R=ee,ce)),V=Q=L.length;L[--Q]==0;L.pop());if(!L[0])return R.charAt(0);if(U<0?--V:(j.c=L,j.e=V,j.s=te,j=e(j,q,oe,ve,pe),L=j.c,H=j.r,V=j.e),B=V+oe+1,U=L[B],Q=pe/2,H=H||B<0||L[B+1]!=null,H=ve<4?(U!=null||H)&&(ve==0||ve==(j.s<0?3:2)):U>Q||U==Q&&(ve==4||H||ve==6&&L[B-1]&1||ve==(j.s<0?8:7)),B<1||!L[0])we=H?toFixedPoint(R.charAt(1),-oe,R.charAt(0)):R.charAt(0);else{if(L.length=B,H)for(--pe;++L[--B]>pe;)L[B]=0,B||(++V,L=[1].concat(L));for(Q=L.length;!L[--Q];);for(U=0,we="";U<=Q;we+=R.charAt(L[U++]));we=toFixedPoint(we,V,R.charAt(0))}return we}}(),e=function(){function ee(Ne,pe,te){var Y,R,B,V,Q=0,H=Ne.length,j=pe%SQRT_BASE,L=pe/SQRT_BASE|0;for(Ne=Ne.slice();H--;)B=Ne[H]%SQRT_BASE,V=Ne[H]/SQRT_BASE|0,Y=L*B+V*j,R=j*B+Y%SQRT_BASE*SQRT_BASE+Q,Q=(R/te|0)+(Y/SQRT_BASE|0)+L*V,Ne[H]=R%te;return Q&&(Ne=[Q].concat(Ne)),Ne}function he(Ne,pe,te,Y){var R,B;if(te!=Y)B=te>Y?1:-1;else for(R=B=0;R<te;R++)if(Ne[R]!=pe[R]){B=Ne[R]>pe[R]?1:-1;break}return B}function we(Ne,pe,te,Y){for(var R=0;te--;)Ne[te]-=R,R=Ne[te]<pe[te]?1:0,Ne[te]=R*Y+Ne[te]-pe[te];for(;!Ne[0]&&Ne.length>1;Ne.splice(0,1));}return function(Ne,pe,te,Y,R){var B,V,Q,H,j,L,q,U,oe,ve,fe,Oe,Se,Te,Ae,le,ke,je=Ne.s==pe.s?1:-1,Ve=Ne.c,qe=pe.c;if(!Ve||!Ve[0]||!qe||!qe[0])return new ae(!Ne.s||!pe.s||(Ve?qe&&Ve[0]==qe[0]:!qe)?NaN:Ve&&Ve[0]==0||!qe?je*0:je/0);for(U=new ae(je),oe=U.c=[],V=Ne.e-pe.e,je=te+V+1,R||(R=BASE,V=bitFloor(Ne.e/LOG_BASE)-bitFloor(pe.e/LOG_BASE),je=je/LOG_BASE|0),Q=0;qe[Q]==(Ve[Q]||0);Q++);if(qe[Q]>(Ve[Q]||0)&&V--,je<0)oe.push(1),H=!0;else{for(Te=Ve.length,le=qe.length,Q=0,je+=2,j=mathfloor(R/(qe[0]+1)),j>1&&(qe=ee(qe,j,R),Ve=ee(Ve,j,R),le=qe.length,Te=Ve.length),Se=le,ve=Ve.slice(0,le),fe=ve.length;fe<le;ve[fe++]=0);ke=qe.slice(),ke=[0].concat(ke),Ae=qe[0],qe[1]>=R/2&&Ae++;do{if(j=0,B=he(qe,ve,le,fe),B<0){if(Oe=ve[0],le!=fe&&(Oe=Oe*R+(ve[1]||0)),j=mathfloor(Oe/Ae),j>1)for(j>=R&&(j=R-1),L=ee(qe,j,R),q=L.length,fe=ve.length;he(L,ve,q,fe)==1;)j--,we(L,le<q?ke:qe,q,R),q=L.length,B=1;else j==0&&(B=j=1),L=qe.slice(),q=L.length;if(q<fe&&(L=[0].concat(L)),we(ve,L,fe,R),fe=ve.length,B==-1)for(;he(qe,ve,le,fe)<1;)j++,we(ve,le<fe?ke:qe,fe,R),fe=ve.length}else B===0&&(j++,ve=[0]);oe[Q++]=j,ve[0]?ve[fe++]=Ve[Se]||0:(ve=[Ve[Se]],fe=1)}while((Se++<Te||ve[0]!=null)&&je--);H=ve[0]!=null,oe[0]||oe.splice(0,1)}if(R==BASE){for(Q=1,je=oe[0];je>=10;je/=10,Q++);be(U,te+(U.e=Q+V*LOG_BASE-1)+1,Y,H)}else U.e=V,U.r=+H;return U}}();function ye(ee,he,we,Ne){var pe,te,Y,R,B;if(we==null?we=C:intCheck(we,0,8),!ee.c)return ee.toString();if(pe=ee.c[0],Y=ee.e,he==null)B=coeffToString(ee.c),B=Ne==1||Ne==2&&(Y<=F||Y>=G)?toExponential(B,Y):toFixedPoint(B,Y,"0");else if(ee=be(new ae(ee),he,we),te=ee.e,B=coeffToString(ee.c),R=B.length,Ne==1||Ne==2&&(he<=te||te<=F)){for(;R<he;B+="0",R++);B=toExponential(B,te)}else if(he-=Y,B=toFixedPoint(B,te,"0"),te+1>R){if(--he>0)for(B+=".";he--;B+="0");}else if(he+=te-R,he>0)for(te+1==R&&(B+=".");he--;B+="0");return ee.s<0&&pe?"-"+B:B}function $e(ee,he){for(var we,Ne=1,pe=new ae(ee[0]);Ne<ee.length;Ne++)if(we=new ae(ee[Ne]),we.s)he.call(pe,we)&&(pe=we);else{pe=we;break}return pe}function _e(ee,he,we){for(var Ne=1,pe=he.length;!he[--pe];he.pop());for(pe=he[0];pe>=10;pe/=10,Ne++);return(we=Ne+we*LOG_BASE-1)>Z?ee.c=ee.e=null:we<J?ee.c=[ee.e=0]:(ee.e=we,ee.c=he),ee}w=function(){var ee=/^(-?)0([xbo])(?=\w[\w.]*$)/i,he=/^([^.]+)\.$/,we=/^\.([^.]+)$/,Ne=/^-?(Infinity|NaN)$/,pe=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(te,Y,R,B){var V,Q=R?Y:Y.replace(pe,"");if(Ne.test(Q))te.s=isNaN(Q)?null:Q<0?-1:1;else{if(!R&&(Q=Q.replace(ee,function(H,j,L){return V=(L=L.toLowerCase())=="x"?16:L=="b"?2:8,!B||B==V?j:H}),B&&(V=B,Q=Q.replace(he,"$1").replace(we,"0.$1")),Y!=Q))return new ae(Q,V);if(ae.DEBUG)throw Error(bignumberError+"Not a"+(B?" base "+B:"")+" number: "+Y);te.s=null}te.c=te.e=null}}();function be(ee,he,we,Ne){var pe,te,Y,R,B,V,Q,H=ee.c,j=POWS_TEN;if(H){e:{for(pe=1,R=H[0];R>=10;R/=10,pe++);if(te=he-pe,te<0)te+=LOG_BASE,Y=he,B=H[V=0],Q=B/j[pe-Y-1]%10|0;else if(V=mathceil((te+1)/LOG_BASE),V>=H.length)if(Ne){for(;H.length<=V;H.push(0));B=Q=0,pe=1,te%=LOG_BASE,Y=te-LOG_BASE+1}else break e;else{for(B=R=H[V],pe=1;R>=10;R/=10,pe++);te%=LOG_BASE,Y=te-LOG_BASE+pe,Q=Y<0?0:B/j[pe-Y-1]%10|0}if(Ne=Ne||he<0||H[V+1]!=null||(Y<0?B:B%j[pe-Y-1]),Ne=we<4?(Q||Ne)&&(we==0||we==(ee.s<0?3:2)):Q>5||Q==5&&(we==4||Ne||we==6&&(te>0?Y>0?B/j[pe-Y]:0:H[V-1])%10&1||we==(ee.s<0?8:7)),he<1||!H[0])return H.length=0,Ne?(he-=ee.e+1,H[0]=j[(LOG_BASE-he%LOG_BASE)%LOG_BASE],ee.e=-he||0):H[0]=ee.e=0,ee;if(te==0?(H.length=V,R=1,V--):(H.length=V+1,R=j[LOG_BASE-te],H[V]=Y>0?mathfloor(B/j[pe-Y]%j[Y])*R:0),Ne)for(;;)if(V==0){for(te=1,Y=H[0];Y>=10;Y/=10,te++);for(Y=H[0]+=R,R=1;Y>=10;Y/=10,R++);te!=R&&(ee.e++,H[0]==BASE&&(H[0]=1));break}else{if(H[V]+=R,H[V]!=BASE)break;H[V--]=0,R=1}for(te=H.length;H[--te]===0;H.pop());}ee.e>Z?ee.c=ee.e=null:ee.e<J&&(ee.c=[ee.e=0])}return ee}function xe(ee){var he,we=ee.e;return we===null?ee.toString():(he=coeffToString(ee.c),he=we<=F||we>=G?toExponential(he,we):toFixedPoint(he,we,"0"),ee.s<0?"-"+he:he)}return $.absoluteValue=$.abs=function(){var ee=new ae(this);return ee.s<0&&(ee.s=1),ee},$.comparedTo=function(ee,he){return compare$1(this,new ae(ee,he))},$.decimalPlaces=$.dp=function(ee,he){var we,Ne,pe,te=this;if(ee!=null)return intCheck(ee,0,MAX),he==null?he=C:intCheck(he,0,8),be(new ae(te),ee+te.e+1,he);if(!(we=te.c))return null;if(Ne=((pe=we.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,pe=we[pe])for(;pe%10==0;pe/=10,Ne--);return Ne<0&&(Ne=0),Ne},$.dividedBy=$.div=function(ee,he){return e(this,new ae(ee,he),N,C)},$.dividedToIntegerBy=$.idiv=function(ee,he){return e(this,new ae(ee,he),0,1)},$.exponentiatedBy=$.pow=function(ee,he){var we,Ne,pe,te,Y,R,B,V,Q,H=this;if(ee=new ae(ee),ee.c&&!ee.isInteger())throw Error(bignumberError+"Exponent not an integer: "+xe(ee));if(he!=null&&(he=new ae(he)),R=ee.e>14,!H.c||!H.c[0]||H.c[0]==1&&!H.e&&H.c.length==1||!ee.c||!ee.c[0])return Q=new ae(Math.pow(+xe(H),R?2-isOdd(ee):+xe(ee))),he?Q.mod(he):Q;if(B=ee.s<0,he){if(he.c?!he.c[0]:!he.s)return new ae(NaN);Ne=!B&&H.isInteger()&&he.isInteger(),Ne&&(H=H.mod(he))}else{if(ee.e>9&&(H.e>0||H.e<-1||(H.e==0?H.c[0]>1||R&&H.c[1]>=24e7:H.c[0]<8e13||R&&H.c[0]<=9999975e7)))return te=H.s<0&&isOdd(ee)?-0:0,H.e>-1&&(te=1/te),new ae(B?1/te:te);ue&&(te=mathceil(ue/LOG_BASE+2))}for(R?(we=new ae(.5),B&&(ee.s=1),V=isOdd(ee)):(pe=Math.abs(+xe(ee)),V=pe%2),Q=new ae(T);;){if(V){if(Q=Q.times(H),!Q.c)break;te?Q.c.length>te&&(Q.c.length=te):Ne&&(Q=Q.mod(he))}if(pe){if(pe=mathfloor(pe/2),pe===0)break;V=pe%2}else if(ee=ee.times(we),be(ee,ee.e+1,1),ee.e>14)V=isOdd(ee);else{if(pe=+xe(ee),pe===0)break;V=pe%2}H=H.times(H),te?H.c&&H.c.length>te&&(H.c.length=te):Ne&&(H=H.mod(he))}return Ne?Q:(B&&(Q=T.div(Q)),he?Q.mod(he):te?be(Q,ue,C,Y):Q)},$.integerValue=function(ee){var he=new ae(this);return ee==null?ee=C:intCheck(ee,0,8),be(he,he.e+1,ee)},$.isEqualTo=$.eq=function(ee,he){return compare$1(this,new ae(ee,he))===0},$.isFinite=function(){return!!this.c},$.isGreaterThan=$.gt=function(ee,he){return compare$1(this,new ae(ee,he))>0},$.isGreaterThanOrEqualTo=$.gte=function(ee,he){return(he=compare$1(this,new ae(ee,he)))===1||he===0},$.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},$.isLessThan=$.lt=function(ee,he){return compare$1(this,new ae(ee,he))<0},$.isLessThanOrEqualTo=$.lte=function(ee,he){return(he=compare$1(this,new ae(ee,he)))===-1||he===0},$.isNaN=function(){return!this.s},$.isNegative=function(){return this.s<0},$.isPositive=function(){return this.s>0},$.isZero=function(){return!!this.c&&this.c[0]==0},$.minus=function(ee,he){var we,Ne,pe,te,Y=this,R=Y.s;if(ee=new ae(ee,he),he=ee.s,!R||!he)return new ae(NaN);if(R!=he)return ee.s=-he,Y.plus(ee);var B=Y.e/LOG_BASE,V=ee.e/LOG_BASE,Q=Y.c,H=ee.c;if(!B||!V){if(!Q||!H)return Q?(ee.s=-he,ee):new ae(H?Y:NaN);if(!Q[0]||!H[0])return H[0]?(ee.s=-he,ee):new ae(Q[0]?Y:C==3?-0:0)}if(B=bitFloor(B),V=bitFloor(V),Q=Q.slice(),R=B-V){for((te=R<0)?(R=-R,pe=Q):(V=B,pe=H),pe.reverse(),he=R;he--;pe.push(0));pe.reverse()}else for(Ne=(te=(R=Q.length)<(he=H.length))?R:he,R=he=0;he<Ne;he++)if(Q[he]!=H[he]){te=Q[he]<H[he];break}if(te&&(pe=Q,Q=H,H=pe,ee.s=-ee.s),he=(Ne=H.length)-(we=Q.length),he>0)for(;he--;Q[we++]=0);for(he=BASE-1;Ne>R;){if(Q[--Ne]<H[Ne]){for(we=Ne;we&&!Q[--we];Q[we]=he);--Q[we],Q[Ne]+=BASE}Q[Ne]-=H[Ne]}for(;Q[0]==0;Q.splice(0,1),--V);return Q[0]?_e(ee,Q,V):(ee.s=C==3?-1:1,ee.c=[ee.e=0],ee)},$.modulo=$.mod=function(ee,he){var we,Ne,pe=this;return ee=new ae(ee,he),!pe.c||!ee.s||ee.c&&!ee.c[0]?new ae(NaN):!ee.c||pe.c&&!pe.c[0]?new ae(pe):(ie==9?(Ne=ee.s,ee.s=1,we=e(pe,ee,0,3),ee.s=Ne,we.s*=Ne):we=e(pe,ee,0,ie),ee=pe.minus(we.times(ee)),!ee.c[0]&&ie==1&&(ee.s=pe.s),ee)},$.multipliedBy=$.times=function(ee,he){var we,Ne,pe,te,Y,R,B,V,Q,H,j,L,q,U,oe,ve=this,fe=ve.c,Oe=(ee=new ae(ee,he)).c;if(!fe||!Oe||!fe[0]||!Oe[0])return!ve.s||!ee.s||fe&&!fe[0]&&!Oe||Oe&&!Oe[0]&&!fe?ee.c=ee.e=ee.s=null:(ee.s*=ve.s,!fe||!Oe?ee.c=ee.e=null:(ee.c=[0],ee.e=0)),ee;for(Ne=bitFloor(ve.e/LOG_BASE)+bitFloor(ee.e/LOG_BASE),ee.s*=ve.s,B=fe.length,H=Oe.length,B<H&&(q=fe,fe=Oe,Oe=q,pe=B,B=H,H=pe),pe=B+H,q=[];pe--;q.push(0));for(U=BASE,oe=SQRT_BASE,pe=H;--pe>=0;){for(we=0,j=Oe[pe]%oe,L=Oe[pe]/oe|0,Y=B,te=pe+Y;te>pe;)V=fe[--Y]%oe,Q=fe[Y]/oe|0,R=L*V+Q*j,V=j*V+R%oe*oe+q[te]+we,we=(V/U|0)+(R/oe|0)+L*Q,q[te--]=V%U;q[te]=we}return we?++Ne:q.splice(0,1),_e(ee,q,Ne)},$.negated=function(){var ee=new ae(this);return ee.s=-ee.s||null,ee},$.plus=function(ee,he){var we,Ne=this,pe=Ne.s;if(ee=new ae(ee,he),he=ee.s,!pe||!he)return new ae(NaN);if(pe!=he)return ee.s=-he,Ne.minus(ee);var te=Ne.e/LOG_BASE,Y=ee.e/LOG_BASE,R=Ne.c,B=ee.c;if(!te||!Y){if(!R||!B)return new ae(pe/0);if(!R[0]||!B[0])return B[0]?ee:new ae(R[0]?Ne:pe*0)}if(te=bitFloor(te),Y=bitFloor(Y),R=R.slice(),pe=te-Y){for(pe>0?(Y=te,we=B):(pe=-pe,we=R),we.reverse();pe--;we.push(0));we.reverse()}for(pe=R.length,he=B.length,pe-he<0&&(we=B,B=R,R=we,he=pe),pe=0;he;)pe=(R[--he]=R[he]+B[he]+pe)/BASE|0,R[he]=BASE===R[he]?0:R[he]%BASE;return pe&&(R=[pe].concat(R),++Y),_e(ee,R,Y)},$.precision=$.sd=function(ee,he){var we,Ne,pe,te=this;if(ee!=null&&ee!==!!ee)return intCheck(ee,1,MAX),he==null?he=C:intCheck(he,0,8),be(new ae(te),ee,he);if(!(we=te.c))return null;if(pe=we.length-1,Ne=pe*LOG_BASE+1,pe=we[pe]){for(;pe%10==0;pe/=10,Ne--);for(pe=we[0];pe>=10;pe/=10,Ne++);}return ee&&te.e+1>Ne&&(Ne=te.e+1),Ne},$.shiftedBy=function(ee){return intCheck(ee,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER),this.times("1e"+ee)},$.squareRoot=$.sqrt=function(){var ee,he,we,Ne,pe,te=this,Y=te.c,R=te.s,B=te.e,V=N+4,Q=new ae("0.5");if(R!==1||!Y||!Y[0])return new ae(!R||R<0&&(!Y||Y[0])?NaN:Y?te:1/0);if(R=Math.sqrt(+xe(te)),R==0||R==1/0?(he=coeffToString(Y),(he.length+B)%2==0&&(he+="0"),R=Math.sqrt(+he),B=bitFloor((B+1)/2)-(B<0||B%2),R==1/0?he="5e"+B:(he=R.toExponential(),he=he.slice(0,he.indexOf("e")+1)+B),we=new ae(he)):we=new ae(R+""),we.c[0]){for(B=we.e,R=B+V,R<3&&(R=0);;)if(pe=we,we=Q.times(pe.plus(e(te,pe,V,1))),coeffToString(pe.c).slice(0,R)===(he=coeffToString(we.c)).slice(0,R))if(we.e<B&&--R,he=he.slice(R-3,R+1),he=="9999"||!Ne&&he=="4999"){if(!Ne&&(be(pe,pe.e+N+2,0),pe.times(pe).eq(te))){we=pe;break}V+=4,R+=4,Ne=1}else{(!+he||!+he.slice(1)&&he.charAt(0)=="5")&&(be(we,we.e+N+2,1),ee=!we.times(we).eq(te));break}}return be(we,we.e+N+1,C,ee)},$.toExponential=function(ee,he){return ee!=null&&(intCheck(ee,0,MAX),ee++),ye(this,ee,he,1)},$.toFixed=function(ee,he){return ee!=null&&(intCheck(ee,0,MAX),ee=ee+this.e+1),ye(this,ee,he)},$.toFormat=function(ee,he,we){var Ne,pe=this;if(we==null)ee!=null&&he&&typeof he=="object"?(we=he,he=null):ee&&typeof ee=="object"?(we=ee,ee=he=null):we=ne;else if(typeof we!="object")throw Error(bignumberError+"Argument not an object: "+we);if(Ne=pe.toFixed(ee,he),pe.c){var te,Y=Ne.split("."),R=+we.groupSize,B=+we.secondaryGroupSize,V=we.groupSeparator||"",Q=Y[0],H=Y[1],j=pe.s<0,L=j?Q.slice(1):Q,q=L.length;if(B&&(te=R,R=B,B=te,q-=te),R>0&&q>0){for(te=q%R||R,Q=L.substr(0,te);te<q;te+=R)Q+=V+L.substr(te,R);B>0&&(Q+=V+L.slice(te)),j&&(Q="-"+Q)}Ne=H?Q+(we.decimalSeparator||"")+((B=+we.fractionGroupSize)?H.replace(new RegExp("\\d{"+B+"}\\B","g"),"$&"+(we.fractionGroupSeparator||"")):H):Q}return(we.prefix||"")+Ne+(we.suffix||"")},$.toFraction=function(ee){var he,we,Ne,pe,te,Y,R,B,V,Q,H,j,L=this,q=L.c;if(ee!=null&&(R=new ae(ee),!R.isInteger()&&(R.c||R.s!==1)||R.lt(T)))throw Error(bignumberError+"Argument "+(R.isInteger()?"out of range: ":"not an integer: ")+xe(R));if(!q)return new ae(L);for(he=new ae(T),V=we=new ae(T),Ne=B=new ae(T),j=coeffToString(q),te=he.e=j.length-L.e-1,he.c[0]=POWS_TEN[(Y=te%LOG_BASE)<0?LOG_BASE+Y:Y],ee=!ee||R.comparedTo(he)>0?te>0?he:V:R,Y=Z,Z=1/0,R=new ae(j),B.c[0]=0;Q=e(R,he,0,1),pe=we.plus(Q.times(Ne)),pe.comparedTo(ee)!=1;)we=Ne,Ne=pe,V=B.plus(Q.times(pe=V)),B=pe,he=R.minus(Q.times(pe=he)),R=pe;return pe=e(ee.minus(we),Ne,0,1),B=B.plus(pe.times(V)),we=we.plus(pe.times(Ne)),B.s=V.s=L.s,te=te*2,H=e(V,Ne,te,C).minus(L).abs().comparedTo(e(B,we,te,C).minus(L).abs())<1?[V,Ne]:[B,we],Z=Y,H},$.toNumber=function(){return+xe(this)},$.toPrecision=function(ee,he){return ee!=null&&intCheck(ee,1,MAX),ye(this,ee,he,2)},$.toString=function(ee){var he,we=this,Ne=we.s,pe=we.e;return pe===null?Ne?(he="Infinity",Ne<0&&(he="-"+he)):he="NaN":(ee==null?he=pe<=F||pe>=G?toExponential(coeffToString(we.c),pe):toFixedPoint(coeffToString(we.c),pe,"0"):ee===10?(we=be(new ae(we),N+pe+1,C),he=toFixedPoint(coeffToString(we.c),we.e,"0")):(intCheck(ee,2,ce.length,"Base"),he=b(toFixedPoint(coeffToString(we.c),pe,"0"),10,ee,Ne,!0)),Ne<0&&we.c[0]&&(he="-"+he)),he},$.valueOf=$.toJSON=function(){return xe(this)},$._isBigNumber=!0,$[Symbol.toStringTag]="BigNumber",$[Symbol.for("nodejs.util.inspect.custom")]=$.valueOf,t!=null&&ae.set(t),ae}function bitFloor(t){var e=t|0;return t>0||t===e?e:e-1}function coeffToString(t){for(var e,b,w=1,$=t.length,T=t[0]+"";w<$;){for(e=t[w++]+"",b=LOG_BASE-e.length;b--;e="0"+e);T+=e}for($=T.length;T.charCodeAt(--$)===48;);return T.slice(0,$+1||1)}function compare$1(t,e){var b,w,$=t.c,T=e.c,N=t.s,C=e.s,F=t.e,G=e.e;if(!N||!C)return null;if(b=$&&!$[0],w=T&&!T[0],b||w)return b?w?0:-C:N;if(N!=C)return N;if(b=N<0,w=F==G,!$||!T)return w?0:!$^b?1:-1;if(!w)return F>G^b?1:-1;for(C=(F=$.length)<(G=T.length)?F:G,N=0;N<C;N++)if($[N]!=T[N])return $[N]>T[N]^b?1:-1;return F==G?0:F>G^b?1:-1}function intCheck(t,e,b,w){if(t<e||t>b||t!==mathfloor(t))throw Error(bignumberError+(w||"Argument")+(typeof t=="number"?t<e||t>b?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function isOdd(t){var e=t.c.length-1;return bitFloor(t.e/LOG_BASE)==e&&t.c[e]%2!=0}function toExponential(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function toFixedPoint(t,e,b){var w,$;if(e<0){for($=b+".";++e;$+=b);t=$+t}else if(w=t.length,++e>w){for($=b,e-=w;--e;$+=b);t+=$}else e<w&&(t=t.slice(0,e)+"."+t.slice(e));return t}var BigNumber=clone(),bignumber=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",BigNumber,default:BigNumber}),require$$2=getAugmentedNamespace(bignumber),decoder_asm=function t(e,b,w){var $=new e.Uint8Array(w),T=b.pushInt,N=b.pushInt32,C=b.pushInt32Neg,F=b.pushInt64,G=b.pushInt64Neg,J=b.pushFloat,Z=b.pushFloatSingle,re=b.pushFloatDouble,ie=b.pushTrue,ue=b.pushFalse,ne=b.pushUndefined,ce=b.pushNull,ae=b.pushInfinity,ye=b.pushInfinityNeg,$e=b.pushNaN,_e=b.pushNaNNeg,be=b.pushArrayStart,xe=b.pushArrayStartFixed,ee=b.pushArrayStartFixed32,he=b.pushArrayStartFixed64,we=b.pushObjectStart,Ne=b.pushObjectStartFixed,pe=b.pushObjectStartFixed32,te=b.pushObjectStartFixed64,Y=b.pushByteString,R=b.pushByteStringStart,B=b.pushUtf8String,V=b.pushUtf8StringStart,Q=b.pushSimpleUnassigned,H=b.pushTagStart,j=b.pushTagStart4,L=b.pushTagStart8,q=b.pushTagUnassigned,U=b.pushBreak,oe=e.Math.pow,ve=0,fe=0,Oe=0;function Se(Be){for(Be=Be|0,ve=0,fe=Be;(ve|0)<(fe|0)&&(Oe=Ht[$[ve]&255]($[ve]|0)|0,!((Oe|0)>0)););return Oe|0}function Te(Be){return Be=Be|0,((ve|0)+(Be|0)|0)<(fe|0)?0:1}function Ae(Be){return Be=Be|0,$[Be|0]<<8|$[Be+1|0]|0}function le(Be){return Be=Be|0,$[Be|0]<<24|$[Be+1|0]<<16|$[Be+2|0]<<8|$[Be+3|0]|0}function ke(Be){return Be=Be|0,T(Be|0),ve=ve+1|0,0}function je(Be){return Be=Be|0,Te(1)|0?1:(T($[ve+1|0]|0),ve=ve+2|0,0)}function Ve(Be){return Be=Be|0,Te(2)|0?1:(T(Ae(ve+1|0)|0),ve=ve+3|0,0)}function qe(Be){return Be=Be|0,Te(4)|0?1:(N(Ae(ve+1|0)|0,Ae(ve+3|0)|0),ve=ve+5|0,0)}function Ze(Be){return Be=Be|0,Te(8)|0?1:(F(Ae(ve+1|0)|0,Ae(ve+3|0)|0,Ae(ve+5|0)|0,Ae(ve+7|0)|0),ve=ve+9|0,0)}function Pe(Be){return Be=Be|0,T(-1-(Be-32|0)|0),ve=ve+1|0,0}function de(Be){return Be=Be|0,Te(1)|0?1:(T(-1-($[ve+1|0]|0)|0),ve=ve+2|0,0)}function me(Be){Be=Be|0;var gt=0;return Te(2)|0?1:(gt=Ae(ve+1|0)|0,T(-1-(gt|0)|0),ve=ve+3|0,0)}function Re(Be){return Be=Be|0,Te(4)|0?1:(C(Ae(ve+1|0)|0,Ae(ve+3|0)|0),ve=ve+5|0,0)}function Fe(Be){return Be=Be|0,Te(8)|0?1:(G(Ae(ve+1|0)|0,Ae(ve+3|0)|0,Ae(ve+5|0)|0,Ae(ve+7|0)|0),ve=ve+9|0,0)}function Ue(Be){Be=Be|0;var gt=0,bt=0,ot=0;return ot=Be-64|0,Te(ot|0)|0?1:(gt=ve+1|0,bt=(ve+1|0)+(ot|0)|0,Y(gt|0,bt|0),ve=bt|0,0)}function ze(Be){Be=Be|0;var gt=0,bt=0,ot=0;return Te(1)|0||(ot=$[ve+1|0]|0,gt=ve+2|0,bt=(ve+2|0)+(ot|0)|0,Te(ot+1|0)|0)?1:(Y(gt|0,bt|0),ve=bt|0,0)}function Qe(Be){Be=Be|0;var gt=0,bt=0,ot=0;return Te(2)|0||(ot=Ae(ve+1|0)|0,gt=ve+3|0,bt=(ve+3|0)+(ot|0)|0,Te(ot+2|0)|0)?1:(Y(gt|0,bt|0),ve=bt|0,0)}function Ye(Be){Be=Be|0;var gt=0,bt=0,ot=0;return Te(4)|0||(ot=le(ve+1|0)|0,gt=ve+5|0,bt=(ve+5|0)+(ot|0)|0,Te(ot+4|0)|0)?1:(Y(gt|0,bt|0),ve=bt|0,0)}function ht(Be){return Be=Be|0,1}function at(Be){return Be=Be|0,R(),ve=ve+1|0,0}function Ke(Be){Be=Be|0;var gt=0,bt=0,ot=0;return ot=Be-96|0,Te(ot|0)|0?1:(gt=ve+1|0,bt=(ve+1|0)+(ot|0)|0,B(gt|0,bt|0),ve=bt|0,0)}function kt(Be){Be=Be|0;var gt=0,bt=0,ot=0;return Te(1)|0||(ot=$[ve+1|0]|0,gt=ve+2|0,bt=(ve+2|0)+(ot|0)|0,Te(ot+1|0)|0)?1:(B(gt|0,bt|0),ve=bt|0,0)}function yt(Be){Be=Be|0;var gt=0,bt=0,ot=0;return Te(2)|0||(ot=Ae(ve+1|0)|0,gt=ve+3|0,bt=(ve+3|0)+(ot|0)|0,Te(ot+2|0)|0)?1:(B(gt|0,bt|0),ve=bt|0,0)}function ct(Be){Be=Be|0;var gt=0,bt=0,ot=0;return Te(4)|0||(ot=le(ve+1|0)|0,gt=ve+5|0,bt=(ve+5|0)+(ot|0)|0,Te(ot+4|0)|0)?1:(B(gt|0,bt|0),ve=bt|0,0)}function Bt(Be){return Be=Be|0,1}function Et(Be){return Be=Be|0,V(),ve=ve+1|0,0}function et(Be){return Be=Be|0,xe(Be-128|0),ve=ve+1|0,0}function Ft(Be){return Be=Be|0,Te(1)|0?1:(xe($[ve+1|0]|0),ve=ve+2|0,0)}function At(Be){return Be=Be|0,Te(2)|0?1:(xe(Ae(ve+1|0)|0),ve=ve+3|0,0)}function Mt(Be){return Be=Be|0,Te(4)|0?1:(ee(Ae(ve+1|0)|0,Ae(ve+3|0)|0),ve=ve+5|0,0)}function Xt(Be){return Be=Be|0,Te(8)|0?1:(he(Ae(ve+1|0)|0,Ae(ve+3|0)|0,Ae(ve+5|0)|0,Ae(ve+7|0)|0),ve=ve+9|0,0)}function Dt(Be){return Be=Be|0,be(),ve=ve+1|0,0}function lt(Be){Be=Be|0;var gt=0;return gt=Be-160|0,Te(gt|0)|0?1:(Ne(gt|0),ve=ve+1|0,0)}function Yt(Be){return Be=Be|0,Te(1)|0?1:(Ne($[ve+1|0]|0),ve=ve+2|0,0)}function jt(Be){return Be=Be|0,Te(2)|0?1:(Ne(Ae(ve+1|0)|0),ve=ve+3|0,0)}function Pt(Be){return Be=Be|0,Te(4)|0?1:(pe(Ae(ve+1|0)|0,Ae(ve+3|0)|0),ve=ve+5|0,0)}function Wt(Be){return Be=Be|0,Te(8)|0?1:(te(Ae(ve+1|0)|0,Ae(ve+3|0)|0,Ae(ve+5|0)|0,Ae(ve+7|0)|0),ve=ve+9|0,0)}function Ot(Be){return Be=Be|0,we(),ve=ve+1|0,0}function dt(Be){return Be=Be|0,H(Be-192|0|0),ve=ve+1|0,0}function zt(Be){return Be=Be|0,H(Be|0),ve=ve+1|0,0}function Ct(Be){return Be=Be|0,H(Be|0),ve=ve+1|0,0}function wt(Be){return Be=Be|0,H(Be|0),ve=ve+1|0,0}function Kt(Be){return Be=Be|0,H(Be|0),ve=ve+1|0,0}function mt(Be){return Be=Be|0,H(Be-192|0|0),ve=ve+1|0,0}function pt(Be){return Be=Be|0,H(Be|0),ve=ve+1|0,0}function Jt(Be){return Be=Be|0,H(Be|0),ve=ve+1|0,0}function ge(Be){return Be=Be|0,H(Be|0),ve=ve+1|0,0}function Ee(Be){return Be=Be|0,Te(1)|0?1:(H($[ve+1|0]|0),ve=ve+2|0,0)}function Me(Be){return Be=Be|0,Te(2)|0?1:(H(Ae(ve+1|0)|0),ve=ve+3|0,0)}function se(Be){return Be=Be|0,Te(4)|0?1:(j(Ae(ve+1|0)|0,Ae(ve+3|0)|0),ve=ve+5|0,0)}function Ie(Be){return Be=Be|0,Te(8)|0?1:(L(Ae(ve+1|0)|0,Ae(ve+3|0)|0,Ae(ve+5|0)|0,Ae(ve+7|0)|0),ve=ve+9|0,0)}function De(Be){return Be=Be|0,Q((Be|0)-224|0),ve=ve+1|0,0}function Ge(Be){return Be=Be|0,ue(),ve=ve+1|0,0}function He(Be){return Be=Be|0,ie(),ve=ve+1|0,0}function rt(Be){return Be=Be|0,ce(),ve=ve+1|0,0}function it(Be){return Be=Be|0,ne(),ve=ve+1|0,0}function tt(Be){return Be=Be|0,Te(1)|0?1:(Q($[ve+1|0]|0),ve=ve+2|0,0)}function Vt(Be){Be=Be|0;var gt=0,bt=0,ot=1,Nt=0,$t=0,It=0;return Te(2)|0?1:(gt=$[ve+1|0]|0,bt=$[ve+2|0]|0,(gt|0)&128&&(ot=-1),Nt=+(((gt|0)&124)>>2),$t=+(((gt|0)&3)<<8|bt),+Nt==0?J(+(+ot*5960464477539063e-23*+$t)):+Nt==31?+ot==1?+$t>0?$e():ae():+$t>0?_e():ye():J(+(+ot*oe(2,+(+Nt-25))*+(1024+$t))),ve=ve+3|0,0)}function St(Be){return Be=Be|0,Te(4)|0?1:(Z($[ve+1|0]|0,$[ve+2|0]|0,$[ve+3|0]|0,$[ve+4|0]|0),ve=ve+5|0,0)}function Lt(Be){return Be=Be|0,Te(8)|0?1:(re($[ve+1|0]|0,$[ve+2|0]|0,$[ve+3|0]|0,$[ve+4|0]|0,$[ve+5|0]|0,$[ve+6|0]|0,$[ve+7|0]|0,$[ve+8|0]|0),ve=ve+9|0,0)}function _t(Be){return Be=Be|0,1}function Ut(Be){return Be=Be|0,U(),ve=ve+1|0,0}var Ht=[ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,je,Ve,qe,Ze,_t,_t,_t,_t,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,de,me,Re,Fe,_t,_t,_t,_t,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,ze,Qe,Ye,ht,_t,_t,_t,at,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,kt,yt,ct,Bt,_t,_t,_t,Et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,et,Ft,At,Mt,Xt,_t,_t,_t,Dt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,lt,Yt,jt,Pt,Wt,_t,_t,_t,Ot,dt,dt,dt,dt,dt,dt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,mt,Ee,Me,se,Ie,_t,_t,_t,_t,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,Ge,He,rt,it,tt,Vt,St,Lt,_t,_t,_t,Ut];return{parse:Se}},utils$j={},constants$3={};const Bignumber$2=require$$2.BigNumber;constants$3.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};constants$3.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};constants$3.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};constants$3.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};constants$3.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};constants$3.SHIFT32=Math.pow(2,32);constants$3.SHIFT16=Math.pow(2,16);constants$3.MAX_SAFE_HIGH=2097151;constants$3.NEG_ONE=new Bignumber$2(-1);constants$3.TEN=new Bignumber$2(10);constants$3.TWO=new Bignumber$2(2);constants$3.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=buffer$2,b=require$$2.BigNumber,w=constants$3,$=w.SHIFT32,T=w.SHIFT16,N=2097151;t.parseHalf=function(G){var J,Z,re;return re=G[0]&128?-1:1,J=(G[0]&124)>>2,Z=(G[0]&3)<<8|G[1],J?J===31?re*(Z?0/0:1/0):re*Math.pow(2,J-25)*(1024+Z):re*5960464477539063e-23*Z};function C(F){return F<16?"0"+F.toString(16):F.toString(16)}t.arrayBufferToBignumber=function(F){const G=F.byteLength;let J="";for(let Z=0;Z<G;Z++)J+=C(F[Z]);return new b(J,16)},t.buildMap=F=>{const G=new Map,J=Object.keys(F),Z=J.length;for(let re=0;re<Z;re++)G.set(J[re],F[J[re]]);return G},t.buildInt32=(F,G)=>F*T+G,t.buildInt64=(F,G,J,Z)=>{const re=t.buildInt32(F,G),ie=t.buildInt32(J,Z);return re>N?new b(re).times($).plus(ie):re*$+ie},t.writeHalf=function(G,J){const Z=e.allocUnsafe(4);Z.writeFloatBE(J,0);const re=Z.readUInt32BE(0);if((re&8191)!=0)return!1;var ie=re>>16&32768;const ue=re>>23&255,ne=re&8388607;if(ue>=113&&ue<=142)ie+=(ue-112<<10)+(ne>>13);else if(ue>=103&&ue<113){if(ne&(1<<126-ue)-1)return!1;ie+=ne+8388608>>126-ue}else return!1;return G.writeUInt16BE(ie,0),!0},t.keySorter=function(F,G){var J=F[0].byteLength,Z=G[0].byteLength;return J>Z?1:Z>J?-1:F[0].compare(G[0])},t.isNegativeZero=F=>F===0&&1/F<0,t.nextPowerOf2=F=>{let G=0;if(F&&!(F&F-1))return F;for(;F!==0;)F>>=1,G+=1;return 1<<G}})(utils$j);const constants$2=constants$3,MT$1=constants$2.MT,SIMPLE=constants$2.SIMPLE,SYMS$1=constants$2.SYMS;class Simple$1{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,MT$1.SIMPLE_FLOAT)}static isSimple(e){return e instanceof Simple$1}static decode(e,b){switch(b==null&&(b=!0),e){case SIMPLE.FALSE:return!1;case SIMPLE.TRUE:return!0;case SIMPLE.NULL:return b?null:SYMS$1.NULL;case SIMPLE.UNDEFINED:return b?void 0:SYMS$1.UNDEFINED;case-1:if(!b)throw new Error("Invalid BREAK");return SYMS$1.BREAK;default:return new Simple$1(e)}}}var simple=Simple$1;class Tagged$1{constructor(e,b,w){if(this.tag=e,this.value=b,this.err=w,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var b,w;if(w=e!=null?e[this.tag]:void 0,typeof w!="function"&&(w=Tagged$1["_tag"+this.tag],typeof w!="function"))return this;try{return w.call(Tagged$1,this.value)}catch($){return b=$,this.err=b,this}}}var tagged=Tagged$1;const defaultBase$1=self.location?self.location.protocol+"//"+self.location.host:"",URL$3=self.URL;class URLWithLegacySupport$2{constructor(e="",b=defaultBase$1){this.super=new URL$3(e,b),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function format$2(t){if(typeof t=="string")return new URL$3(t).toString();if(!(t instanceof URL$3)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",b=t.auth?t.auth+"@":"",w=t.port?":"+t.port:"",$=t.protocol?t.protocol+"//":"",T=t.host||"",N=t.hostname||"",C=t.search||(t.query?"?"+t.query:""),F=t.hash||"",G=t.pathname||"",J=t.path||G+C;return`${$}${e||b}${T||N+w}${J}${F}`}}var urlBrowser={URLWithLegacySupport:URLWithLegacySupport$2,URLSearchParams:self.URLSearchParams,defaultBase:defaultBase$1,format:format$2};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$1}=urlBrowser;var relative$1=(t,e={},b={},w)=>{let $=e.protocol?e.protocol.replace(":",""):"http";$=(b[$]||w||$)+":";let T;try{T=new URLWithLegacySupport$1(t)}catch{T={}}const N=Object.assign({},e,{protocol:$||T.protocol,host:e.host||T.host});return new URLWithLegacySupport$1(t,format$1(N)).toString()};const{URLWithLegacySupport,format,URLSearchParams:URLSearchParams$1,defaultBase}=urlBrowser,relative=relative$1;var isoUrl={URL:URLWithLegacySupport,URLSearchParams:URLSearchParams$1,format,relative,defaultBase};const{Buffer:Buffer$3}=buffer$2,ieee754=ieee754$1,Bignumber$1=require$$2.BigNumber,parser=decoder_asm,utils$i=utils$j,c$2=constants$3,Simple=simple,Tagged=tagged,{URL:URL$2}=isoUrl;class Decoder$1{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=utils$i.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Buffer$3.from(this._heap),this._reset(),this._knownTags=Object.assign({0:b=>new Date(b),1:b=>new Date(b*1e3),2:b=>utils$i.arrayBufferToBignumber(b),3:b=>c$2.NEG_ONE.minus(utils$i.arrayBufferToBignumber(b)),4:b=>c$2.TEN.pow(b[0]).times(b[1]),5:b=>c$2.TWO.pow(b[0]).times(b[1]),32:b=>new URL$2(b),35:b=>new RegExp(b)},e.tags),this.parser=parser(commonjsGlobal,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case c$2.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case c$2.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case c$2.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case c$2.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case c$2.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case c$2.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===c$2.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,b){const w=this._currentParent;switch(w.values++,w.type){case c$2.PARENT.ARRAY:case c$2.PARENT.BYTE_STRING:case c$2.PARENT.UTF8_STRING:w.length>-1?this._ref[this._ref.length-w.length]=e:this._ref.push(e),this._dec();break;case c$2.PARENT.OBJECT:w.tmpKey!=null?(this._ref[w.tmpKey]=e,w.tmpKey=null,this._dec()):(w.tmpKey=e,typeof w.tmpKey!="string"&&(w.type=c$2.PARENT.MAP,w.ref=utils$i.buildMap(w.ref)));break;case c$2.PARENT.MAP:w.tmpKey!=null?(this._ref.set(w.tmpKey,e),w.tmpKey=null,this._dec()):w.tmpKey=e;break;case c$2.PARENT.TAG:this._ref.push(e),b||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,b,w){this._parents[this._depth]={type:b,length:w,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:c$2.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,b){const w=this._knownTags[e];return w?w(b):new Tagged(e,b)}createMap(e,b){return e}createObject(e,b){return e}createArray(e,b){return e}createByteString(e,b){return Buffer$3.concat(e)}createByteStringFromHeap(e,b){return e===b?Buffer$3.alloc(0):Buffer$3.from(this._heap.slice(e,b))}createInt(e){return e}createInt32(e,b){return utils$i.buildInt32(e,b)}createInt64(e,b,w,$){return utils$i.buildInt64(e,b,w,$)}createFloat(e){return e}createFloatSingle(e,b,w,$){return ieee754.read([e,b,w,$],0,!1,23,4)}createFloatDouble(e,b,w,$,T,N,C,F){return ieee754.read([e,b,w,$,T,N,C,F],0,!1,52,8)}createInt32Neg(e,b){return-1-utils$i.buildInt32(e,b)}createInt64Neg(e,b,w,$){const T=utils$i.buildInt32(e,b),N=utils$i.buildInt32(w,$);return T>c$2.MAX_SAFE_HIGH?c$2.NEG_ONE.minus(new Bignumber$1(T).times(c$2.SHIFT32).plus(N)):-1-(T*c$2.SHIFT32+N)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,b){return e.join("")}createUtf8StringFromHeap(e,b){return e===b?"":this._buffer.toString("utf8",e,b)}createSimpleUnassigned(e){return new Simple(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,b){this._push(this.createInt32(e,b))}pushInt64(e,b,w,$){this._push(this.createInt64(e,b,w,$))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,b,w,$){this._push(this.createFloatSingle(e,b,w,$))}pushFloatDouble(e,b,w,$,T,N,C,F){this._push(this.createFloatDouble(e,b,w,$,T,N,C,F))}pushInt32Neg(e,b){this._push(this.createInt32Neg(e,b))}pushInt64Neg(e,b,w,$){this._push(this.createInt64Neg(e,b,w,$))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],c$2.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,b){const w=utils$i.buildInt32(e,b);this._createArrayStartFixed(w)}pushArrayStartFixed64(e,b,w,$){const T=utils$i.buildInt64(e,b,w,$);this._createArrayStartFixed(T)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,b){const w=utils$i.buildInt32(e,b);this._createObjectStartFixed(w)}pushObjectStartFixed64(e,b,w,$){const T=utils$i.buildInt64(e,b,w,$);this._createObjectStartFixed(T)}pushByteStringStart(){this._parents[this._depth]={type:c$2.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,b){this._push(this.createByteStringFromHeap(e,b))}pushUtf8StringStart(){this._parents[this._depth]={type:c$2.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,b){this._push(this.createUtf8StringFromHeap(e,b))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:c$2.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,b){this.pushTagStart(utils$i.buildInt32(e,b))}pushTagStart8(e,b,w,$){this.pushTagStart(utils$i.buildInt64(e,b,w,$))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},c$2.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),c$2.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const b=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(b>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,b){return typeof e=="string"&&(e=Buffer$3.from(e,b||"hex")),new Decoder$1({size:e.length}).decodeFirst(e)}static decodeAll(e,b){return typeof e=="string"&&(e=Buffer$3.from(e,b||"hex")),new Decoder$1({size:e.length}).decodeAll(e)}}Decoder$1.decodeFirst=Decoder$1.decode;var decoder$1=Decoder$1;const{Buffer:Buffer$2}=buffer$2,Decoder=decoder$1,utils$h=utils$j;class Diagnose extends Decoder{createTag(e,b){return`${e}(${b})`}createInt(e){return super.createInt(e).toString()}createInt32(e,b){return super.createInt32(e,b).toString()}createInt64(e,b,w,$){return super.createInt64(e,b,w,$).toString()}createInt32Neg(e,b){return super.createInt32Neg(e,b).toString()}createInt64Neg(e,b,w,$){return super.createInt64Neg(e,b,w,$).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const b=super.createFloat(e);return utils$h.isNegativeZero(e)?"-0_1":`${b}_1`}createFloatSingle(e,b,w,$){return`${super.createFloatSingle(e,b,w,$)}_2`}createFloatDouble(e,b,w,$,T,N,C,F){return`${super.createFloatDouble(e,b,w,$,T,N,C,F)}_3`}createByteString(e,b){const w=e.join(", ");return b===-1?`(_ ${w})`:`h'${w}`}createByteStringFromHeap(e,b){return`h'${Buffer$2.from(super.createByteStringFromHeap(e,b)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,b){const w=super.createArray(e,b);return b===-1?`[_ ${w.join(", ")}]`:`[${w.join(", ")}]`}createMap(e,b){const w=super.createMap(e),$=Array.from(w.keys()).reduce(collectObject(w),"");return b===-1?`{_ ${$}}`:`{${$}}`}createObject(e,b){const w=super.createObject(e),$=Object.keys(w).reduce(collectObject(w),"");return b===-1?`{_ ${$}}`:`{${$}}`}createUtf8String(e,b){const w=e.join(", ");return b===-1?`(_ ${w})`:`"${w}"`}createUtf8StringFromHeap(e,b){return`"${Buffer$2.from(super.createUtf8StringFromHeap(e,b)).toString("utf8")}"`}static diagnose(e,b){return typeof e=="string"&&(e=Buffer$2.from(e,b||"hex")),new Diagnose().decodeFirst(e)}}var diagnose=Diagnose;function collectObject(t){return(e,b)=>e?`${e}, ${b}: ${t[b]}`:`${b}: ${t[b]}`}const{Buffer:Buffer$1}=buffer$2,{URL:URL$1}=isoUrl,Bignumber=require$$2.BigNumber,utils$g=utils$j,constants$1=constants$3,MT=constants$1.MT,NUMBYTES=constants$1.NUMBYTES,SHIFT32=constants$1.SHIFT32,SYMS=constants$1.SYMS,TAG$2=constants$1.TAG,HALF=constants$1.MT.SIMPLE_FLOAT<<5|constants$1.NUMBYTES.TWO,FLOAT=constants$1.MT.SIMPLE_FLOAT<<5|constants$1.NUMBYTES.FOUR,DOUBLE=constants$1.MT.SIMPLE_FLOAT<<5|constants$1.NUMBYTES.EIGHT,TRUE=constants$1.MT.SIMPLE_FLOAT<<5|constants$1.SIMPLE.TRUE,FALSE=constants$1.MT.SIMPLE_FLOAT<<5|constants$1.SIMPLE.FALSE,UNDEFINED=constants$1.MT.SIMPLE_FLOAT<<5|constants$1.SIMPLE.UNDEFINED,NULL=constants$1.MT.SIMPLE_FLOAT<<5|constants$1.SIMPLE.NULL,MAXINT_BN=new Bignumber("0x20000000000000"),BUF_NAN=Buffer$1.from("f97e00","hex"),BUF_INF_NEG=Buffer$1.from("f9fc00","hex"),BUF_INF_POS=Buffer$1.from("f97c00","hex");function toType(t){return{}.toString.call(t).slice(8,-1)}class Encoder{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[URL$1,this._pushUrl],[Bignumber,this._pushBigNumber]];const b=e.genTypes||[],w=b.length;for(let $=0;$<w;$++)this.addSemanticType(b[$][0],b[$][1]);this._reset()}addSemanticType(e,b){const w=this.semanticTypes.length;for(let $=0;$<w;$++)if(this.semanticTypes[$][0]===e){const N=this.semanticTypes[$][1];return this.semanticTypes[$][1]=b,N}return this.semanticTypes.push([e,b]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,b,w){return this.result[this.offset]=e,this.resultMethod[this.offset]=b,this.resultLength[this.offset]=w,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(BUF_NAN)}_pushInfinity(e){const b=e<0?BUF_INF_NEG:BUF_INF_POS;return this.push(b)}_pushFloat(e){const b=Buffer$1.allocUnsafe(2);if(utils$g.writeHalf(b,e)&&utils$g.parseHalf(b)===e)return this._pushUInt8(HALF)&&this.push(b);const w=Buffer$1.allocUnsafe(4);return w.writeFloatBE(e,0),w.readFloatBE(0)===e?this._pushUInt8(FLOAT)&&this.push(w):this._pushUInt8(DOUBLE)&&this._pushDoubleBE(e)}_pushInt(e,b,w){const $=b<<5;return e<24?this._pushUInt8($|e):e<=255?this._pushUInt8($|NUMBYTES.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8($|NUMBYTES.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8($|NUMBYTES.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8($|NUMBYTES.EIGHT)&&this._pushUInt32BE(Math.floor(e/SHIFT32))&&this._pushUInt32BE(e%SHIFT32):b===MT.NEG_INT?this._pushFloat(w):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,MT.NEG_INT,e):this._pushInt(e,MT.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const b=Buffer$1.byteLength(e,"utf8");return this._pushInt(b,MT.UTF8_STRING)&&this.pushWrite(e,5,b)}_pushBoolean(e){return this._pushUInt8(e?TRUE:FALSE)}_pushUndefined(e){return this._pushUInt8(UNDEFINED)}_pushArray(e,b){const w=b.length;if(!e._pushInt(w,MT.ARRAY))return!1;for(let $=0;$<w;$++)if(!e.pushAny(b[$]))return!1;return!0}_pushTag(e){return this._pushInt(e,MT.TAG)}_pushDate(e,b){return e._pushTag(TAG$2.DATE_EPOCH)&&e.pushAny(Math.round(b/1e3))}_pushBuffer(e,b){return e._pushInt(b.length,MT.BYTE_STRING)&&e.push(b)}_pushNoFilter(e,b){return e._pushBuffer(e,b.slice())}_pushRegexp(e,b){return e._pushTag(TAG$2.REGEXP)&&e.pushAny(b.source)}_pushSet(e,b){if(!e._pushInt(b.size,MT.ARRAY))return!1;for(const w of b)if(!e.pushAny(w))return!1;return!0}_pushUrl(e,b){return e._pushTag(TAG$2.URI)&&e.pushAny(b.format())}_pushBigint(e){let b=TAG$2.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),b=TAG$2.NEG_BIGINT);let w=e.toString(16);w.length%2&&(w="0"+w);const $=Buffer$1.from(w,"hex");return this._pushTag(b)&&this._pushBuffer(this,$)}_pushBigNumber(e,b){if(b.isNaN())return e._pushNaN();if(!b.isFinite())return e._pushInfinity(b.isNegative()?-1/0:1/0);if(b.isInteger())return e._pushBigint(b);if(!(e._pushTag(TAG$2.DECIMAL_FRAC)&&e._pushInt(2,MT.ARRAY)))return!1;const w=b.decimalPlaces(),$=b.multipliedBy(new Bignumber(10).pow(w));return e._pushIntNum(-w)?$.abs().isLessThan(MAXINT_BN)?e._pushIntNum($.toNumber()):e._pushBigint($):!1}_pushMap(e,b){return e._pushInt(b.size,MT.MAP)?this._pushRawMap(b.size,Array.from(b)):!1}_pushObject(e){if(!e)return this._pushUInt8(NULL);for(var b=this.semanticTypes.length,w=0;w<b;w++)if(e instanceof this.semanticTypes[w][0])return this.semanticTypes[w][1].call(e,this,e);var $=e.encodeCBOR;if(typeof $=="function")return $.call(e,this);var T=Object.keys(e),N=T.length;return this._pushInt(N,MT.MAP)?this._pushRawMap(N,T.map(C=>[C,e[C]])):!1}_pushRawMap(e,b){b=b.map(function($){return $[0]=Encoder.encode($[0]),$}).sort(utils$g.keySorter);for(var w=0;w<e;w++)if(!this.push(b[w][0])||!this.pushAny(b[w][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var b=toType(e);switch(b){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Buffer$1.isBuffer(e)?e:Buffer$1.from(e));case"Null":return this._pushUInt8(NULL);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case SYMS.NULL:return this._pushObject(null);case SYMS.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,b=this.resultLength,w=this.resultMethod,$=this.offset,T=0,N=0;N<$;N++)T+=b[N];var C=Buffer$1.allocUnsafe(T),F=0,G=0;for(N=0;N<$;N++){switch(G=b[N],w[N]){case 0:e[N].copy(C,F);break;case 1:C.writeUInt8(e[N],F,!0);break;case 2:C.writeUInt16BE(e[N],F,!0);break;case 3:C.writeUInt32BE(e[N],F,!0);break;case 4:C.writeDoubleBE(e[N],F,!0);break;case 5:C.write(e[N],F,G,"utf8");break;default:throw new Error("unkown method")}F+=G}var J=C;return this._reset(),J}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const b=new Encoder;if(!b.pushAny(e))throw new Error("Failed to encode input");return b.finalize()}}var encoder=Encoder;(function(t){t.Diagnose=diagnose,t.Decoder=decoder$1,t.Encoder=encoder,t.Simple=simple,t.Tagged=tagged,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(src$1);function assign(t,e){for(const b in e)Object.defineProperty(t,b,{value:e[b],enumerable:!0,configurable:!0});return t}function createError(t,e,b){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");b||(b={}),typeof e=="object"&&(b=e,e=""),e&&(b.code=e);try{return assign(t,b)}catch{b.message=t.message,b.stack=t.stack;const $=function(){};return $.prototype=Object.create(Object.getPrototypeOf(t)),assign(new $,b)}}var errCode=createError,murmurHash3js={exports:{}};(function(t,e){(function(b,w){var $={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function T(ne){if(!Array.isArray(ne)&&!ArrayBuffer.isView(ne))return!1;for(var ce=0;ce<ne.length;ce++)if(!Number.isInteger(ne[ce])||ne[ce]<0||ne[ce]>255)return!1;return!0}function N(ne,ce){return(ne&65535)*ce+(((ne>>>16)*ce&65535)<<16)}function C(ne,ce){return ne<<ce|ne>>>32-ce}function F(ne){return ne^=ne>>>16,ne=N(ne,2246822507),ne^=ne>>>13,ne=N(ne,3266489909),ne^=ne>>>16,ne}function G(ne,ce){ne=[ne[0]>>>16,ne[0]&65535,ne[1]>>>16,ne[1]&65535],ce=[ce[0]>>>16,ce[0]&65535,ce[1]>>>16,ce[1]&65535];var ae=[0,0,0,0];return ae[3]+=ne[3]+ce[3],ae[2]+=ae[3]>>>16,ae[3]&=65535,ae[2]+=ne[2]+ce[2],ae[1]+=ae[2]>>>16,ae[2]&=65535,ae[1]+=ne[1]+ce[1],ae[0]+=ae[1]>>>16,ae[1]&=65535,ae[0]+=ne[0]+ce[0],ae[0]&=65535,[ae[0]<<16|ae[1],ae[2]<<16|ae[3]]}function J(ne,ce){ne=[ne[0]>>>16,ne[0]&65535,ne[1]>>>16,ne[1]&65535],ce=[ce[0]>>>16,ce[0]&65535,ce[1]>>>16,ce[1]&65535];var ae=[0,0,0,0];return ae[3]+=ne[3]*ce[3],ae[2]+=ae[3]>>>16,ae[3]&=65535,ae[2]+=ne[2]*ce[3],ae[1]+=ae[2]>>>16,ae[2]&=65535,ae[2]+=ne[3]*ce[2],ae[1]+=ae[2]>>>16,ae[2]&=65535,ae[1]+=ne[1]*ce[3],ae[0]+=ae[1]>>>16,ae[1]&=65535,ae[1]+=ne[2]*ce[2],ae[0]+=ae[1]>>>16,ae[1]&=65535,ae[1]+=ne[3]*ce[1],ae[0]+=ae[1]>>>16,ae[1]&=65535,ae[0]+=ne[0]*ce[3]+ne[1]*ce[2]+ne[2]*ce[1]+ne[3]*ce[0],ae[0]&=65535,[ae[0]<<16|ae[1],ae[2]<<16|ae[3]]}function Z(ne,ce){return ce%=64,ce===32?[ne[1],ne[0]]:ce<32?[ne[0]<<ce|ne[1]>>>32-ce,ne[1]<<ce|ne[0]>>>32-ce]:(ce-=32,[ne[1]<<ce|ne[0]>>>32-ce,ne[0]<<ce|ne[1]>>>32-ce])}function re(ne,ce){return ce%=64,ce===0?ne:ce<32?[ne[0]<<ce|ne[1]>>>32-ce,ne[1]<<ce]:[ne[1]<<ce-32,0]}function ie(ne,ce){return[ne[0]^ce[0],ne[1]^ce[1]]}function ue(ne){return ne=ie(ne,[0,ne[0]>>>1]),ne=J(ne,[4283543511,3981806797]),ne=ie(ne,[0,ne[0]>>>1]),ne=J(ne,[3301882366,444984403]),ne=ie(ne,[0,ne[0]>>>1]),ne}$.x86.hash32=function(ne,ce){if($.inputValidation&&!T(ne))return w;ce=ce||0;for(var ae=ne.length%4,ye=ne.length-ae,$e=ce,_e=0,be=3432918353,xe=461845907,ee=0;ee<ye;ee=ee+4)_e=ne[ee]|ne[ee+1]<<8|ne[ee+2]<<16|ne[ee+3]<<24,_e=N(_e,be),_e=C(_e,15),_e=N(_e,xe),$e^=_e,$e=C($e,13),$e=N($e,5)+3864292196;switch(_e=0,ae){case 3:_e^=ne[ee+2]<<16;case 2:_e^=ne[ee+1]<<8;case 1:_e^=ne[ee],_e=N(_e,be),_e=C(_e,15),_e=N(_e,xe),$e^=_e}return $e^=ne.length,$e=F($e),$e>>>0},$.x86.hash128=function(ne,ce){if($.inputValidation&&!T(ne))return w;ce=ce||0;for(var ae=ne.length%16,ye=ne.length-ae,$e=ce,_e=ce,be=ce,xe=ce,ee=0,he=0,we=0,Ne=0,pe=597399067,te=2869860233,Y=951274213,R=2716044179,B=0;B<ye;B=B+16)ee=ne[B]|ne[B+1]<<8|ne[B+2]<<16|ne[B+3]<<24,he=ne[B+4]|ne[B+5]<<8|ne[B+6]<<16|ne[B+7]<<24,we=ne[B+8]|ne[B+9]<<8|ne[B+10]<<16|ne[B+11]<<24,Ne=ne[B+12]|ne[B+13]<<8|ne[B+14]<<16|ne[B+15]<<24,ee=N(ee,pe),ee=C(ee,15),ee=N(ee,te),$e^=ee,$e=C($e,19),$e+=_e,$e=N($e,5)+1444728091,he=N(he,te),he=C(he,16),he=N(he,Y),_e^=he,_e=C(_e,17),_e+=be,_e=N(_e,5)+197830471,we=N(we,Y),we=C(we,17),we=N(we,R),be^=we,be=C(be,15),be+=xe,be=N(be,5)+2530024501,Ne=N(Ne,R),Ne=C(Ne,18),Ne=N(Ne,pe),xe^=Ne,xe=C(xe,13),xe+=$e,xe=N(xe,5)+850148119;switch(ee=0,he=0,we=0,Ne=0,ae){case 15:Ne^=ne[B+14]<<16;case 14:Ne^=ne[B+13]<<8;case 13:Ne^=ne[B+12],Ne=N(Ne,R),Ne=C(Ne,18),Ne=N(Ne,pe),xe^=Ne;case 12:we^=ne[B+11]<<24;case 11:we^=ne[B+10]<<16;case 10:we^=ne[B+9]<<8;case 9:we^=ne[B+8],we=N(we,Y),we=C(we,17),we=N(we,R),be^=we;case 8:he^=ne[B+7]<<24;case 7:he^=ne[B+6]<<16;case 6:he^=ne[B+5]<<8;case 5:he^=ne[B+4],he=N(he,te),he=C(he,16),he=N(he,Y),_e^=he;case 4:ee^=ne[B+3]<<24;case 3:ee^=ne[B+2]<<16;case 2:ee^=ne[B+1]<<8;case 1:ee^=ne[B],ee=N(ee,pe),ee=C(ee,15),ee=N(ee,te),$e^=ee}return $e^=ne.length,_e^=ne.length,be^=ne.length,xe^=ne.length,$e+=_e,$e+=be,$e+=xe,_e+=$e,be+=$e,xe+=$e,$e=F($e),_e=F(_e),be=F(be),xe=F(xe),$e+=_e,$e+=be,$e+=xe,_e+=$e,be+=$e,xe+=$e,("00000000"+($e>>>0).toString(16)).slice(-8)+("00000000"+(_e>>>0).toString(16)).slice(-8)+("00000000"+(be>>>0).toString(16)).slice(-8)+("00000000"+(xe>>>0).toString(16)).slice(-8)},$.x64.hash128=function(ne,ce){if($.inputValidation&&!T(ne))return w;ce=ce||0;for(var ae=ne.length%16,ye=ne.length-ae,$e=[0,ce],_e=[0,ce],be=[0,0],xe=[0,0],ee=[2277735313,289559509],he=[1291169091,658871167],we=0;we<ye;we=we+16)be=[ne[we+4]|ne[we+5]<<8|ne[we+6]<<16|ne[we+7]<<24,ne[we]|ne[we+1]<<8|ne[we+2]<<16|ne[we+3]<<24],xe=[ne[we+12]|ne[we+13]<<8|ne[we+14]<<16|ne[we+15]<<24,ne[we+8]|ne[we+9]<<8|ne[we+10]<<16|ne[we+11]<<24],be=J(be,ee),be=Z(be,31),be=J(be,he),$e=ie($e,be),$e=Z($e,27),$e=G($e,_e),$e=G(J($e,[0,5]),[0,1390208809]),xe=J(xe,he),xe=Z(xe,33),xe=J(xe,ee),_e=ie(_e,xe),_e=Z(_e,31),_e=G(_e,$e),_e=G(J(_e,[0,5]),[0,944331445]);switch(be=[0,0],xe=[0,0],ae){case 15:xe=ie(xe,re([0,ne[we+14]],48));case 14:xe=ie(xe,re([0,ne[we+13]],40));case 13:xe=ie(xe,re([0,ne[we+12]],32));case 12:xe=ie(xe,re([0,ne[we+11]],24));case 11:xe=ie(xe,re([0,ne[we+10]],16));case 10:xe=ie(xe,re([0,ne[we+9]],8));case 9:xe=ie(xe,[0,ne[we+8]]),xe=J(xe,he),xe=Z(xe,33),xe=J(xe,ee),_e=ie(_e,xe);case 8:be=ie(be,re([0,ne[we+7]],56));case 7:be=ie(be,re([0,ne[we+6]],48));case 6:be=ie(be,re([0,ne[we+5]],40));case 5:be=ie(be,re([0,ne[we+4]],32));case 4:be=ie(be,re([0,ne[we+3]],24));case 3:be=ie(be,re([0,ne[we+2]],16));case 2:be=ie(be,re([0,ne[we+1]],8));case 1:be=ie(be,[0,ne[we]]),be=J(be,ee),be=Z(be,31),be=J(be,he),$e=ie($e,be)}return $e=ie($e,[0,ne.length]),_e=ie(_e,[0,ne.length]),$e=G($e,_e),_e=G(_e,$e),$e=ue($e),_e=ue(_e),$e=G($e,_e),_e=G(_e,$e),("00000000"+($e[0]>>>0).toString(16)).slice(-8)+("00000000"+($e[1]>>>0).toString(16)).slice(-8)+("00000000"+(_e[0]>>>0).toString(16)).slice(-8)+("00000000"+(_e[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=$),e.murmurHash3=$})()})(murmurHash3js,murmurHash3js.exports);var murmurhash3jsRevisited=murmurHash3js.exports;const multihash$1=src$5,crypto$4=self.crypto||self.msCrypto,digest=async(t,e)=>{if(typeof self=="undefined"||!crypto$4)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");switch(e){case"sha1":return new Uint8Array(await crypto$4.subtle.digest({name:"SHA-1"},t));case"sha2-256":return new Uint8Array(await crypto$4.subtle.digest({name:"SHA-256"},t));case"sha2-512":return new Uint8Array(await crypto$4.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const b=await crypto$4.subtle.digest({name:"SHA-256"},t);return new Uint8Array(await crypto$4.subtle.digest({name:"SHA-256"},b))}default:throw new Error(`${e} is not a supported algorithm`)}};var sha_browser={factory:t=>async e=>digest(e,t),digest,multihashing:async(t,e,b)=>{const w=await digest(t,e);return multihash$1.encode(w,e,b)}};const fromNumberTo32BitBuf$1=t=>{const e=new Uint8Array(4);for(let b=0;b<4;b++)e[b]=t&255,t=t>>8;return e};var utils$f={fromNumberTo32BitBuf:fromNumberTo32BitBuf$1};function createCodec$1(t,e,b,w){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:b},decoder:{decode:w}}}const string$1=createCodec$1("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ascii$1=createCodec$1("ascii","a",t=>{let e="a";for(let b=0;b<t.length;b++)e+=String.fromCharCode(t[b]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let b=0;b<t.length;b++)e[b]=t.charCodeAt(b);return e}),BASES$1=Tt({utf8:string$1,"utf-8":string$1,hex:bases$3.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1},bases$3);function fromString$3(t,e="utf8"){const b=BASES$1[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.decoder.decode(`${b.prefix}${t}`)}var fromString$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:fromString$3}),require$$4=getAugmentedNamespace(fromString$4);const ERROR_MSG_INPUT="Input must be an string, Buffer or Uint8Array";function normalizeInput(t){let e;if(t instanceof Uint8Array)e=t;else if(t instanceof Buffer)e=new Uint8Array(t);else if(typeof t=="string")e=new Uint8Array(Buffer.from(t,"utf8"));else throw new Error(ERROR_MSG_INPUT);return e}function toHex(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function uint32ToHex(t){return(4294967296+t).toString(16).substring(1)}function debugPrint(t,e,b){let w=`
`+t+" = ";for(let $=0;$<e.length;$+=2){if(b===32)w+=uint32ToHex(e[$]).toUpperCase(),w+=" ",w+=uint32ToHex(e[$+1]).toUpperCase();else if(b===64)w+=uint32ToHex(e[$+1]).toUpperCase(),w+=uint32ToHex(e[$]).toUpperCase();else throw new Error("Invalid size "+b);$%6==4?w+=`
`+new Array(t.length+4).join(" "):$<e.length-2&&(w+=" ")}console.log(w)}function testSpeed(t,e,b){let w=new Date().getTime();const $=new Uint8Array(e);for(let N=0;N<e;N++)$[N]=N%256;const T=new Date().getTime();console.log("Generated random input in "+(T-w)+"ms"),w=T;for(let N=0;N<b;N++){const C=t($),F=new Date().getTime(),G=F-w;w=F,console.log("Hashed in "+G+"ms: "+C.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(G/1e3)*100)/100+" MB PER SECOND")}}var util$4={normalizeInput,toHex,debugPrint,testSpeed};const util$3=util$4;function ADD64AA(t,e,b){const w=t[e]+t[b];let $=t[e+1]+t[b+1];w>=4294967296&&$++,t[e]=w,t[e+1]=$}function ADD64AC(t,e,b,w){let $=t[e]+b;b<0&&($+=4294967296);let T=t[e+1]+w;$>=4294967296&&T++,t[e]=$,t[e+1]=T}function B2B_GET32(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function B2B_G(t,e,b,w,$,T){const N=m$2[$],C=m$2[$+1],F=m$2[T],G=m$2[T+1];ADD64AA(v$2,t,e),ADD64AC(v$2,t,N,C);let J=v$2[w]^v$2[t],Z=v$2[w+1]^v$2[t+1];v$2[w]=Z,v$2[w+1]=J,ADD64AA(v$2,b,w),J=v$2[e]^v$2[b],Z=v$2[e+1]^v$2[b+1],v$2[e]=J>>>24^Z<<8,v$2[e+1]=Z>>>24^J<<8,ADD64AA(v$2,t,e),ADD64AC(v$2,t,F,G),J=v$2[w]^v$2[t],Z=v$2[w+1]^v$2[t+1],v$2[w]=J>>>16^Z<<16,v$2[w+1]=Z>>>16^J<<16,ADD64AA(v$2,b,w),J=v$2[e]^v$2[b],Z=v$2[e+1]^v$2[b+1],v$2[e]=Z>>>31^J<<1,v$2[e+1]=J>>>31^Z<<1}const BLAKE2B_IV32=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],SIGMA82=new Uint8Array(SIGMA8.map(function(t){return t*2})),v$2=new Uint32Array(32),m$2=new Uint32Array(32);function blake2bCompress(t,e){let b=0;for(b=0;b<16;b++)v$2[b]=t.h[b],v$2[b+16]=BLAKE2B_IV32[b];for(v$2[24]=v$2[24]^t.t,v$2[25]=v$2[25]^t.t/4294967296,e&&(v$2[28]=~v$2[28],v$2[29]=~v$2[29]),b=0;b<32;b++)m$2[b]=B2B_GET32(t.b,4*b);for(b=0;b<12;b++)B2B_G(0,8,16,24,SIGMA82[b*16+0],SIGMA82[b*16+1]),B2B_G(2,10,18,26,SIGMA82[b*16+2],SIGMA82[b*16+3]),B2B_G(4,12,20,28,SIGMA82[b*16+4],SIGMA82[b*16+5]),B2B_G(6,14,22,30,SIGMA82[b*16+6],SIGMA82[b*16+7]),B2B_G(0,10,20,30,SIGMA82[b*16+8],SIGMA82[b*16+9]),B2B_G(2,12,22,24,SIGMA82[b*16+10],SIGMA82[b*16+11]),B2B_G(4,14,16,26,SIGMA82[b*16+12],SIGMA82[b*16+13]),B2B_G(6,8,18,28,SIGMA82[b*16+14],SIGMA82[b*16+15]);for(b=0;b<16;b++)t.h[b]=t.h[b]^v$2[b]^v$2[b+16]}function blake2bInit(t,e){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");const b={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};for(let $=0;$<16;$++)b.h[$]=BLAKE2B_IV32[$];const w=e?e.length:0;return b.h[0]^=16842752^w<<8^t,e&&(blake2bUpdate(b,e),b.c=128),b}function blake2bUpdate(t,e){for(let b=0;b<e.length;b++)t.c===128&&(t.t+=t.c,blake2bCompress(t,!1),t.c=0),t.b[t.c++]=e[b]}function blake2bFinal(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;blake2bCompress(t,!0);const e=new Uint8Array(t.outlen);for(let b=0;b<t.outlen;b++)e[b]=t.h[b>>2]>>8*(b&3);return e}function blake2b$1(t,e,b){b=b||64,t=util$3.normalizeInput(t);const w=blake2bInit(b,e);return blake2bUpdate(w,t),blake2bFinal(w)}function blake2bHex(t,e,b){const w=blake2b$1(t,e,b);return util$3.toHex(w)}var blake2b_1={blake2b:blake2b$1,blake2bHex,blake2bInit,blake2bUpdate,blake2bFinal};const util$2=util$4;function B2S_GET32(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function B2S_G(t,e,b,w,$,T){v$1[t]=v$1[t]+v$1[e]+$,v$1[w]=ROTR32(v$1[w]^v$1[t],16),v$1[b]=v$1[b]+v$1[w],v$1[e]=ROTR32(v$1[e]^v$1[b],12),v$1[t]=v$1[t]+v$1[e]+T,v$1[w]=ROTR32(v$1[w]^v$1[t],8),v$1[b]=v$1[b]+v$1[w],v$1[e]=ROTR32(v$1[e]^v$1[b],7)}function ROTR32(t,e){return t>>>e^t<<32-e}const BLAKE2S_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),v$1=new Uint32Array(16),m$1=new Uint32Array(16);function blake2sCompress(t,e){let b=0;for(b=0;b<8;b++)v$1[b]=t.h[b],v$1[b+8]=BLAKE2S_IV[b];for(v$1[12]^=t.t,v$1[13]^=t.t/4294967296,e&&(v$1[14]=~v$1[14]),b=0;b<16;b++)m$1[b]=B2S_GET32(t.b,4*b);for(b=0;b<10;b++)B2S_G(0,4,8,12,m$1[SIGMA[b*16+0]],m$1[SIGMA[b*16+1]]),B2S_G(1,5,9,13,m$1[SIGMA[b*16+2]],m$1[SIGMA[b*16+3]]),B2S_G(2,6,10,14,m$1[SIGMA[b*16+4]],m$1[SIGMA[b*16+5]]),B2S_G(3,7,11,15,m$1[SIGMA[b*16+6]],m$1[SIGMA[b*16+7]]),B2S_G(0,5,10,15,m$1[SIGMA[b*16+8]],m$1[SIGMA[b*16+9]]),B2S_G(1,6,11,12,m$1[SIGMA[b*16+10]],m$1[SIGMA[b*16+11]]),B2S_G(2,7,8,13,m$1[SIGMA[b*16+12]],m$1[SIGMA[b*16+13]]),B2S_G(3,4,9,14,m$1[SIGMA[b*16+14]],m$1[SIGMA[b*16+15]]);for(b=0;b<8;b++)t.h[b]^=v$1[b]^v$1[b+8]}function blake2sInit(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const b=e?e.length:0;if(e&&!(b>0&&b<=32))throw new Error("Incorrect key length, should be in [1, 32]");const w={h:new Uint32Array(BLAKE2S_IV),b:new Uint8Array(64),c:0,t:0,outlen:t};return w.h[0]^=16842752^b<<8^t,b>0&&(blake2sUpdate(w,e),w.c=64),w}function blake2sUpdate(t,e){for(let b=0;b<e.length;b++)t.c===64&&(t.t+=t.c,blake2sCompress(t,!1),t.c=0),t.b[t.c++]=e[b]}function blake2sFinal(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;blake2sCompress(t,!0);const e=new Uint8Array(t.outlen);for(let b=0;b<t.outlen;b++)e[b]=t.h[b>>2]>>8*(b&3)&255;return e}function blake2s$1(t,e,b){b=b||32,t=util$2.normalizeInput(t);const w=blake2sInit(b,e);return blake2sUpdate(w,t),blake2sFinal(w)}function blake2sHex(t,e,b){const w=blake2s$1(t,e,b);return util$2.toHex(w)}var blake2s_1={blake2s:blake2s$1,blake2sHex,blake2sInit,blake2sUpdate,blake2sFinal};const b2b=blake2b_1,b2s=blake2s_1;var blakejs={blake2b:b2b.blake2b,blake2bHex:b2b.blake2bHex,blake2bInit:b2b.blake2bInit,blake2bUpdate:b2b.blake2bUpdate,blake2bFinal:b2b.blake2bFinal,blake2s:b2s.blake2s,blake2sHex:b2s.blake2sHex,blake2sInit:b2s.blake2sInit,blake2sUpdate:b2s.blake2sUpdate,blake2sFinal:b2s.blake2sFinal};const blake=blakejs,minB=45569,minS=45633,blake2b={init:blake.blake2bInit,update:blake.blake2bUpdate,digest:blake.blake2bFinal},blake2s={init:blake.blake2sInit,update:blake.blake2sUpdate,digest:blake.blake2sFinal},makeB2Hash=(t,e)=>async b=>{const w=e.init(t,null);return e.update(w,b),e.digest(w)};var blake_1=t=>{for(let e=0;e<64;e++)t[minB+e]=makeB2Hash(e+1,blake2b);for(let e=0;e<32;e++)t[minS+e]=makeB2Hash(e+1,blake2s)};const sha3=sha3$2.exports,mur=murmurhash3jsRevisited,{factory:sha}=sha_browser,{fromNumberTo32BitBuf}=utils$f,{fromString:uint8ArrayFromString$1}=require$$4,hash$2=t=>async e=>{switch(t){case"sha3-224":return new Uint8Array(sha3.sha3_224.arrayBuffer(e));case"sha3-256":return new Uint8Array(sha3.sha3_256.arrayBuffer(e));case"sha3-384":return new Uint8Array(sha3.sha3_384.arrayBuffer(e));case"sha3-512":return new Uint8Array(sha3.sha3_512.arrayBuffer(e));case"shake-128":return new Uint8Array(sha3.shake128.create(128).update(e).arrayBuffer());case"shake-256":return new Uint8Array(sha3.shake256.create(256).update(e).arrayBuffer());case"keccak-224":return new Uint8Array(sha3.keccak224.arrayBuffer(e));case"keccak-256":return new Uint8Array(sha3.keccak256.arrayBuffer(e));case"keccak-384":return new Uint8Array(sha3.keccak384.arrayBuffer(e));case"keccak-512":return new Uint8Array(sha3.keccak512.arrayBuffer(e));case"murmur3-128":return uint8ArrayFromString$1(mur.x64.hash128(e),"base16");case"murmur3-32":return fromNumberTo32BitBuf(mur.x86.hash32(e));default:throw new TypeError(`${t} is not a supported algorithm`)}},identity$2=t=>t;var crypto$3={identity:identity$2,sha1:sha("sha1"),sha2256:sha("sha2-256"),sha2512:sha("sha2-512"),dblSha2256:sha("dbl-sha2-256"),sha3224:hash$2("sha3-224"),sha3256:hash$2("sha3-256"),sha3384:hash$2("sha3-384"),sha3512:hash$2("sha3-512"),shake128:hash$2("shake-128"),shake256:hash$2("shake-256"),keccak224:hash$2("keccak-224"),keccak256:hash$2("keccak-256"),keccak384:hash$2("keccak-384"),keccak512:hash$2("keccak-512"),murmur3128:hash$2("murmur3-128"),murmur332:hash$2("murmur3-32"),addBlake:blake_1};function equals$1(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let b=0;b<t.byteLength;b++)if(t[b]!==e[b])return!1;return!0}var equals$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:equals$1}),require$$3$1=getAugmentedNamespace(equals$2);const errcode=errCode,multihash=src$5,crypto$2=crypto$3,{equals}=require$$3$1;async function Multihashing(t,e,b){const w=await Multihashing.digest(t,e,b);return multihash.encode(w,e,b)}Multihashing.multihash=multihash;Multihashing.digest=async(t,e,b)=>{const $=await Multihashing.createHash(e)(t);return b?$.slice(0,b):$};Multihashing.createHash=function(t){if(!t)throw errcode(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");const e=multihash.coerceCode(t);if(!Multihashing.functions[e])throw errcode(new Error(`multihash function '${t}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing.functions[e]};Multihashing.functions={0:crypto$2.identity,17:crypto$2.sha1,18:crypto$2.sha2256,19:crypto$2.sha2512,20:crypto$2.sha3512,21:crypto$2.sha3384,22:crypto$2.sha3256,23:crypto$2.sha3224,24:crypto$2.shake128,25:crypto$2.shake256,26:crypto$2.keccak224,27:crypto$2.keccak256,28:crypto$2.keccak384,29:crypto$2.keccak512,34:crypto$2.murmur3128,35:crypto$2.murmur332,86:crypto$2.dblSha2256};crypto$2.addBlake(Multihashing.functions);Multihashing.validate=async(t,e)=>{const b=await Multihashing(t,multihash.decode(e).name);return equals(e,b)};var src=Multihashing,node=Node$1;function Node$1(t,e){this.value=t,this.next=e}Node$1.prototype.contains=function(t){for(var e=this;e;){if(e.value===t)return!0;e=e.next}return!1};var Node=node,isCircular_1=isCircular$1;function isCircular$1(t){if(!(t instanceof Object))throw new TypeError('"obj" must be an object (or inherit from it)');return _isCircular(t)}function _isCircular(t,e){e=new Node(t,e);for(var b in t){var w=t[b];if(w instanceof Object&&(e.contains(w)||_isCircular(w,e)))return!0}return!1}const cbor=src$1,multicodec=src$4,multihashing=src,CID$1=src$3,isCircular=isCircular_1,uint8ArrayConcat=concat_1$2,uint8ArrayFromString=fromString_1,CID_CBOR_TAG=42;function tagCID(t){return typeof t=="string"?t=new CID$1(t).bytes:CID$1.isCID(t)&&(t=t.bytes),new cbor.Tagged(CID_CBOR_TAG,uint8ArrayConcat([uint8ArrayFromString("00","base16"),t],1+t.length))}function replaceCIDbyTAG(t){let e;try{e=isCircular(t)}catch{e=!1}if(e)throw new Error("The object passed has circular references");function b(w){if(!w||w instanceof Uint8Array||typeof w=="string")return w;if(Array.isArray(w))return w.map(b);if(CID$1.isCID(w))return tagCID(w);const $=Object.keys(w);if($.length>0){const T={};return $.forEach(N=>{typeof w[N]=="object"?T[N]=b(w[N]):T[N]=w[N]}),T}else return w}return b(t)}const codec=multicodec.DAG_CBOR,defaultHashAlg=multicodec.SHA2_256,defaultTags={[CID_CBOR_TAG]:t=>(t=t.slice(1),new CID$1(t))},defaultSize=64*1024;let currentSize=defaultSize;const defaultMaxSize=64*1024*1024;let maxSize=defaultMaxSize,decoder=null;function configureDecoder(t){let e=defaultTags;t?(typeof t.size=="number"&&(currentSize=t.size),typeof t.maxSize=="number"&&(maxSize=t.maxSize),t.tags&&(e=Object.assign({},defaultTags,t&&t.tags))):(currentSize=defaultSize,maxSize=defaultMaxSize);const b={tags:e,size:currentSize};decoder=new cbor.Decoder(b),currentSize=b.size}configureDecoder();function serialize(t){const e=replaceCIDbyTAG(t);return cbor.encode(e)}function deserialize(t){if(t.length>currentSize&&t.length<=maxSize&&configureDecoder({size:t.length}),t.length>currentSize)throw new Error("Data is too large to deserialize with current decoder");const e=decoder.decodeAll(t);if(e.length!==1)throw new Error("Extraneous CBOR data found beyond initial top-level object");return e[0]}async function cid(t,e){const w=Object.assign({cidVersion:1,hashAlg:defaultHashAlg},e),$=await multihashing(t,w.hashAlg),T=multicodec.getNameFromCode(codec);return new CID$1(w.cidVersion,T,$)}var util$1={codec,defaultHashAlg,configureDecoder,serialize,deserialize,cid},resolver={};const CID=src$3,util=util$1;resolver.resolve=(t,e)=>{let b=util.deserialize(t);const w=e.split("/").filter(Boolean);for(;w.length;){const $=w.shift();if(b[$]===void 0)throw new Error(`Object has no property '${$}'`);if(b=b[$],CID.isCID(b))return{value:b,remainderPath:w.join("/")}}return{value:b,remainderPath:""}};const traverse=function*(t,e){if(!(t instanceof Uint8Array||CID.isCID(t)||typeof t=="string"||t===null))for(const b of Object.keys(t)){const w=e===void 0?b:e+"/"+b;yield w,yield*traverse(t[b],w)}};resolver.tree=function*(t){const e=util.deserialize(t);yield*traverse(e)};(function(t){t.util=util$1,t.resolver=resolver,t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg})(src$2);var constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.DEFAULT_BASE=constants.STREAMID_CODEC=void 0;constants.STREAMID_CODEC=206;constants.DEFAULT_BASE="base36";var readingBytes={},__importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(readingBytes,"__esModule",{value:!0});readingBytes.readCid=readingBytes.readVarint=void 0;const cids_1$5=__importDefault$c(src$3),varint_1$4=__importDefault$c(varint$2);function readVarint(t){const e=varint_1$4.default.decode(t),b=varint_1$4.default.decode.bytes,w=t.slice(b);return[e,w,b]}readingBytes.readVarint=readVarint;function isCidVersion(t){return t===0||t===1}function readCid(t){const[e,b]=readVarint(t);if(!isCidVersion(e))throw new Error(`Unknown CID version ${e}`);const[w,$]=readVarint(b),[,T,N]=readVarint($),[C,,F]=readVarint(T),G=$.slice(0,N+F+C),J=$.slice(N+F+C);return[new cids_1$5.default(e,w,G),J]}readingBytes.readCid=readCid;function Memoize(t){return(e,b,w)=>{if(w.value!=null)w.value=getNewFunction(w.value,t);else if(w.get!=null)w.get=getNewFunction(w.get,t);else throw"Only put a Memoize() decorator on a method or get accessor."}}function MemoizeExpiring(t,e){return(b,w,$)=>{if($.value!=null)$.value=getNewFunction($.value,e,t);else if($.get!=null)$.get=getNewFunction($.get,e,t);else throw"Only put a Memoize() decorator on a method or get accessor."}}let counter=0;function getNewFunction(t,e,b=0){const w=++counter;return function(...$){const T=`__memoized_value_${w}`,N=`__memoized_map_${w}`;let C;if(e||$.length>0||b>0){this.hasOwnProperty(N)||Object.defineProperty(this,N,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let F=this[N],G;e===!0?G=$.map(re=>re.toString()).join("!"):e?G=e.apply(this,$):G=$[0];const J=`${G}__timestamp`;let Z=!1;if(b>0)if(!F.has(J))Z=!0;else{let re=F.get(J);Z=Date.now()-re>b}F.has(G)&&!Z?C=F.get(G):(C=t.apply(this,$),F.set(G,C),b>0&&F.set(J,Date.now()))}else this.hasOwnProperty(T)?C=this[T]:(C=t.apply(this,$),Object.defineProperty(this,T,{configurable:!1,enumerable:!1,writable:!1,value:C}));return C}}var memoizeDecorator=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Memoize,MemoizeExpiring}),require$$8=getAugmentedNamespace(memoizeDecorator),commitId={},streamType={};Object.defineProperty(streamType,"__esModule",{value:!0});streamType.StreamType=void 0;const registry={tile:0,"caip10-link":1};function codeByName(t){const e=registry[t];if(typeof e!="undefined")return e;throw new Error(`No stream type registered for name ${t}`)}function nameByCode(t){const e=Object.entries(registry).find(([,b])=>b===t);if(e)return e[0];throw new Error(`No stream type registered for index ${t}`)}class StreamType{}streamType.StreamType=StreamType;StreamType.nameByCode=nameByCode;StreamType.codeByName=codeByName;var __decorate$3=commonjsGlobal&&commonjsGlobal.__decorate||function(t,e,b,w){var $=arguments.length,T=$<3?e:w===null?w=Object.getOwnPropertyDescriptor(e,b):w,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(t,e,b,w);else for(var C=t.length-1;C>=0;C--)(N=t[C])&&(T=($<3?N(T):$>3?N(e,b,T):N(e,b))||T);return $>3&&T&&Object.defineProperty(e,b,T),T},__metadata$1=commonjsGlobal&&commonjsGlobal.__metadata||function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},__classPrivateFieldSet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(t,e,b,w,$){if(w==="m")throw new TypeError("Private method is not writable");if(w==="a"&&!$)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!$:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return w==="a"?$.call(t,b):$?$.value=b:e.set(t,b),b},__classPrivateFieldGet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(t,e,b,w){if(b==="a"&&!w)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!w:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return b==="m"?w:b==="a"?w.call(t):w?w.value:e.get(t)},__importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},_CommitID_type,_CommitID_cid,_CommitID_commit;Object.defineProperty(commitId,"__esModule",{value:!0});commitId.CommitID=void 0;const cids_1$4=__importDefault$b(src$3),multibase_1$2=__importDefault$b(src$7.exports),stream_type_1$1=streamType,varint_1$3=__importDefault$b(varint$2),concat_1$1=__importDefault$b(concat_1$2),to_string_1$1=__importDefault$b(toString_1),typescript_memoize_1$1=require$$8,constants_1$1=constants,reading_bytes_1$1=readingBytes,stream_id_1=streamId;function fromBytes$1(t){const[e,b]=reading_bytes_1$1.readVarint(t);if(e!==constants_1$1.STREAMID_CODEC)throw new Error("fromBytes: invalid streamid, does not include streamid codec");const[w,$]=reading_bytes_1$1.readVarint(b),[T,N]=reading_bytes_1$1.readCid($);if(N.length===0)throw new Error("No commit information provided");if(N.length===1)return new CommitID(w,T,N[0]);{const[C]=reading_bytes_1$1.readCid(N);return new CommitID(w,T,C)}}function parseCID(t){try{return new cids_1$4.default(t)}catch{return}}function parseCommit(t,e=null){if(!e)return null;const b=parseCID(e);if(b)return t.equals(b)?null:b;if(String(e)==="0")return null;throw new Error("Cannot specify commit as a number except to request commit 0 (the genesis commit)")}function fromString$2(t){const e=t.replace("ceramic://","").replace("/ceramic/","");if(e.includes("commit")){const b=e.split("?")[1].split("=")[1],w=e.split("?")[0];return stream_id_1.StreamID.fromString(w).atCommit(b)}else return fromBytes$1(multibase_1$2.default.decode(e))}const TAG$1=Symbol.for("@ceramicnetwork/streamid/CommitID");class CommitID{constructor(e,b,w=null){if(this._tag=TAG$1,_CommitID_type.set(this,void 0),_CommitID_cid.set(this,void 0),_CommitID_commit.set(this,void 0),!e&&e!==0)throw new Error("constructor: type required");if(!b)throw new Error("constructor: cid required");__classPrivateFieldSet$1(this,_CommitID_type,typeof e=="string"?stream_type_1$1.StreamType.codeByName(e):e,"f"),__classPrivateFieldSet$1(this,_CommitID_cid,typeof b=="string"?new cids_1$4.default(b):b,"f"),__classPrivateFieldSet$1(this,_CommitID_commit,parseCommit(__classPrivateFieldGet$1(this,_CommitID_cid,"f"),w),"f")}static isInstance(e){return typeof e=="object"&&"_tag"in e&&e._tag===TAG$1}get baseID(){return new stream_id_1.StreamID(__classPrivateFieldGet$1(this,_CommitID_type,"f"),__classPrivateFieldGet$1(this,_CommitID_cid,"f"))}get type(){return __classPrivateFieldGet$1(this,_CommitID_type,"f")}get typeName(){return stream_type_1$1.StreamType.nameByCode(__classPrivateFieldGet$1(this,_CommitID_type,"f"))}get cid(){return __classPrivateFieldGet$1(this,_CommitID_cid,"f")}get commit(){return __classPrivateFieldGet$1(this,_CommitID_commit,"f")||__classPrivateFieldGet$1(this,_CommitID_cid,"f")}get bytes(){var e;const b=varint_1$3.default.encode(constants_1$1.STREAMID_CODEC),w=varint_1$3.default.encode(this.type),$=((e=__classPrivateFieldGet$1(this,_CommitID_commit,"f"))===null||e===void 0?void 0:e.bytes)||new Uint8Array([0]);return concat_1$1.default([b,w,this.cid.bytes,$])}atCommit(e){return new CommitID(__classPrivateFieldGet$1(this,_CommitID_type,"f"),__classPrivateFieldGet$1(this,_CommitID_cid,"f"),e)}equals(e){return this.type===e.type&&this.cid.equals(e.cid)&&this.commit.equals(e.commit)}toString(){return to_string_1$1.default(multibase_1$2.default.encode(constants_1$1.DEFAULT_BASE,this.bytes))}toUrl(){return`ceramic://${this.toString()}`}[(_CommitID_type=new WeakMap,_CommitID_cid=new WeakMap,_CommitID_commit=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`CommitID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}}CommitID.fromBytes=fromBytes$1;CommitID.fromString=fromString$2;__decorate$3([typescript_memoize_1$1.Memoize(),__metadata$1("design:type",stream_id_1.StreamID),__metadata$1("design:paramtypes",[])],CommitID.prototype,"baseID",null);__decorate$3([typescript_memoize_1$1.Memoize(),__metadata$1("design:type",String),__metadata$1("design:paramtypes",[])],CommitID.prototype,"typeName",null);__decorate$3([typescript_memoize_1$1.Memoize(),__metadata$1("design:type",cids_1$4.default),__metadata$1("design:paramtypes",[])],CommitID.prototype,"commit",null);__decorate$3([typescript_memoize_1$1.Memoize(),__metadata$1("design:type",Uint8Array),__metadata$1("design:paramtypes",[])],CommitID.prototype,"bytes",null);__decorate$3([typescript_memoize_1$1.Memoize(),__metadata$1("design:type",Function),__metadata$1("design:paramtypes",[]),__metadata$1("design:returntype",String)],CommitID.prototype,"toString",null);__decorate$3([typescript_memoize_1$1.Memoize(),__metadata$1("design:type",Function),__metadata$1("design:paramtypes",[]),__metadata$1("design:returntype",String)],CommitID.prototype,"toUrl",null);commitId.CommitID=CommitID;var __decorate$2=commonjsGlobal&&commonjsGlobal.__decorate||function(t,e,b,w){var $=arguments.length,T=$<3?e:w===null?w=Object.getOwnPropertyDescriptor(e,b):w,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(t,e,b,w);else for(var C=t.length-1;C>=0;C--)(N=t[C])&&(T=($<3?N(T):$>3?N(e,b,T):N(e,b))||T);return $>3&&T&&Object.defineProperty(e,b,T),T},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},__classPrivateFieldSet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(t,e,b,w,$){if(w==="m")throw new TypeError("Private method is not writable");if(w==="a"&&!$)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!$:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return w==="a"?$.call(t,b):$?$.value=b:e.set(t,b),b},__classPrivateFieldGet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(t,e,b,w){if(b==="a"&&!w)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!w:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return b==="m"?w:b==="a"?w.call(t):w?w.value:e.get(t)},__importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},_StreamID_type,_StreamID_cid;Object.defineProperty(streamId,"__esModule",{value:!0});streamId.StreamID=void 0;const cids_1$3=__importDefault$a(src$3),multibase_1$1=__importDefault$a(src$7.exports),varint_1$2=__importDefault$a(varint$2),ipld_dag_cbor_1$1=__importDefault$a(src$2),concat_1=__importDefault$a(concat_1$2),to_string_1=__importDefault$a(toString_1),constants_1=constants,reading_bytes_1=readingBytes,typescript_memoize_1=require$$8,commit_id_1=commitId,stream_type_1=streamType;function fromBytes(t){const[e,b]=reading_bytes_1.readVarint(t);if(e!==constants_1.STREAMID_CODEC)throw new Error("fromBytes: invalid streamid, does not include streamid codec");const[w,$]=reading_bytes_1.readVarint(b),[T,N]=reading_bytes_1.readCid($);if(N.length>0)throw new Error("Invalid StreamID: contains commit");return new StreamID(w,T)}function fromString$1(t){const e=t.replace("ceramic://","").replace("/ceramic/",""),b=e.includes("commit")?e.split("?")[0]:e,w=multibase_1$1.default.decode(b);return fromBytes(w)}const TAG=Symbol.for("@ceramicnetwork/streamid/StreamID");class StreamID{constructor(e,b){if(this._tag=TAG,_StreamID_type.set(this,void 0),_StreamID_cid.set(this,void 0),!(e||e===0))throw new Error("constructor: type required");if(!b)throw new Error("constructor: cid required");__classPrivateFieldSet(this,_StreamID_type,typeof e=="string"?stream_type_1.StreamType.codeByName(e):e,"f"),__classPrivateFieldSet(this,_StreamID_cid,typeof b=="string"?new cids_1$3.default(b):b,"f")}static isInstance(e){return typeof e=="object"&&"_tag"in e&&e._tag===TAG}static async fromGenesis(e,b){const w=await ipld_dag_cbor_1$1.default.util.cid(new Uint8Array(ipld_dag_cbor_1$1.default.util.serialize(b)));return new StreamID(e,w)}get type(){return __classPrivateFieldGet(this,_StreamID_type,"f")}get typeName(){return stream_type_1.StreamType.nameByCode(__classPrivateFieldGet(this,_StreamID_type,"f"))}get cid(){return __classPrivateFieldGet(this,_StreamID_cid,"f")}get bytes(){const e=varint_1$2.default.encode(constants_1.STREAMID_CODEC),b=varint_1$2.default.encode(this.type);return concat_1.default([e,b,this.cid.bytes])}get baseID(){return new StreamID(__classPrivateFieldGet(this,_StreamID_type,"f"),__classPrivateFieldGet(this,_StreamID_cid,"f"))}atCommit(e){return new commit_id_1.CommitID(__classPrivateFieldGet(this,_StreamID_type,"f"),__classPrivateFieldGet(this,_StreamID_cid,"f"),e)}equals(e){return StreamID.isInstance(e)?this.type===e.type&&this.cid.equals(e.cid):!1}toString(){return to_string_1.default(multibase_1$1.default.encode(constants_1.DEFAULT_BASE,this.bytes))}toUrl(){return`ceramic://${this.toString()}`}[(_StreamID_type=new WeakMap,_StreamID_cid=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`StreamID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}}StreamID.fromBytes=fromBytes;StreamID.fromString=fromString$1;__decorate$2([typescript_memoize_1.Memoize(),__metadata("design:type",String),__metadata("design:paramtypes",[])],StreamID.prototype,"typeName",null);__decorate$2([typescript_memoize_1.Memoize(),__metadata("design:type",Uint8Array),__metadata("design:paramtypes",[])],StreamID.prototype,"bytes",null);__decorate$2([typescript_memoize_1.Memoize(),__metadata("design:type",StreamID),__metadata("design:paramtypes",[])],StreamID.prototype,"baseID",null);__decorate$2([typescript_memoize_1.Memoize(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",String)],StreamID.prototype,"toString",null);__decorate$2([typescript_memoize_1.Memoize(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",String)],StreamID.prototype,"toUrl",null);streamId.StreamID=StreamID;var streamRef={};(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(G,J,Z,re){re===void 0&&(re=Z),Object.defineProperty(G,re,{enumerable:!0,get:function(){return J[Z]}})}:function(G,J,Z,re){re===void 0&&(re=Z),G[re]=J[Z]}),b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(G,J){Object.defineProperty(G,"default",{enumerable:!0,value:J})}:function(G,J){G.default=J}),w=commonjsGlobal&&commonjsGlobal.__importStar||function(G){if(G&&G.__esModule)return G;var J={};if(G!=null)for(var Z in G)Z!=="default"&&Object.prototype.hasOwnProperty.call(G,Z)&&e(J,G,Z);return b(J,G),J};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamRef=void 0;const $=streamId,T=commitId,N=w(uint8arrays$7);function C(G){try{return G()}catch{return null}}function F(G){throw new Error(G)}(function(G){function J(Z){if($.StreamID.isInstance(Z))return Z;if(T.CommitID.isInstance(Z))return Z;if(Z instanceof Uint8Array)return C(()=>T.CommitID.fromBytes(Z))||C(()=>$.StreamID.fromBytes(Z))||F(`Can not build CommitID or StreamID from bytes ${N.toString(Z,"base36")}`);if(typeof Z=="string")return C(()=>T.CommitID.fromString(Z))||C(()=>$.StreamID.fromString(Z))||F(`Can not build CommitID or StreamID from string ${Z}`);throw new Error("Can not build CommitID or StreamID")}G.from=J})(t.StreamRef||(t.StreamRef={}))})(streamRef);(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(C,F,G,J){J===void 0&&(J=G),Object.defineProperty(C,J,{enumerable:!0,get:function(){return F[G]}})}:function(C,F,G,J){J===void 0&&(J=G),C[J]=F[G]}),b=commonjsGlobal&&commonjsGlobal.__exportStar||function(C,F){for(var G in C)G!=="default"&&!Object.prototype.hasOwnProperty.call(F,G)&&e(F,C,G)};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamRef=t.StreamID=t.CommitID=void 0;const w=streamId;var $=commitId;Object.defineProperty(t,"CommitID",{enumerable:!0,get:function(){return $.CommitID}});var T=streamId;Object.defineProperty(t,"StreamID",{enumerable:!0,get:function(){return T.StreamID}});var N=streamRef;Object.defineProperty(t,"StreamRef",{enumerable:!0,get:function(){return N.StreamRef}}),b(streamType,t),t.default=w.StreamID})(lib$4);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(t,e){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var $ in w)Object.prototype.hasOwnProperty.call(w,$)&&(b[$]=w[$])},extendStatics$1(t,e)};function __extends$1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics$1(t,e);function b(){this.constructor=t}t.prototype=e===null?Object.create(e):(b.prototype=e.prototype,new b)}function __awaiter$3(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})}function __generator$1(t,e){var b={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},w,$,T,N;return N={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function C(G){return function(J){return F([G,J])}}function F(G){if(w)throw new TypeError("Generator is already executing.");for(;b;)try{if(w=1,$&&(T=G[0]&2?$.return:G[0]?$.throw||((T=$.return)&&T.call($),0):$.next)&&!(T=T.call($,G[1])).done)return T;switch($=0,T&&(G=[G[0]&2,T.value]),G[0]){case 0:case 1:T=G;break;case 4:return b.label++,{value:G[1],done:!1};case 5:b.label++,$=G[1],G=[0];continue;case 7:G=b.ops.pop(),b.trys.pop();continue;default:if(T=b.trys,!(T=T.length>0&&T[T.length-1])&&(G[0]===6||G[0]===2)){b=0;continue}if(G[0]===3&&(!T||G[1]>T[0]&&G[1]<T[3])){b.label=G[1];break}if(G[0]===6&&b.label<T[1]){b.label=T[1],T=G;break}if(T&&b.label<T[2]){b.label=T[2],b.ops.push(G);break}T[2]&&b.ops.pop(),b.trys.pop();continue}G=e.call(t,b)}catch(J){G=[6,J],$=0}finally{w=T=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}}function __values$1(t){var e=typeof Symbol=="function"&&Symbol.iterator,b=e&&t[e],w=0;if(b)return b.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&w>=t.length&&(t=void 0),{value:t&&t[w++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(t,e){var b=typeof Symbol=="function"&&t[Symbol.iterator];if(!b)return t;var w=b.call(t),$,T=[],N;try{for(;(e===void 0||e-- >0)&&!($=w.next()).done;)T.push($.value)}catch(C){N={error:C}}finally{try{$&&!$.done&&(b=w.return)&&b.call(w)}finally{if(N)throw N.error}}return T}function __spreadArray$1(t,e){for(var b=0,w=e.length,$=t.length;b<w;b++,$++)t[$]=e[b];return t}function __await$1(t){return this instanceof __await$1?(this.v=t,this):new __await$1(t)}function __asyncGenerator$1(t,e,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var w=b.apply(t,e||[]),$,T=[];return $={},N("next"),N("throw"),N("return"),$[Symbol.asyncIterator]=function(){return this},$;function N(re){w[re]&&($[re]=function(ie){return new Promise(function(ue,ne){T.push([re,ie,ue,ne])>1||C(re,ie)})})}function C(re,ie){try{F(w[re](ie))}catch(ue){Z(T[0][3],ue)}}function F(re){re.value instanceof __await$1?Promise.resolve(re.value.v).then(G,J):Z(T[0][2],re)}function G(re){C("next",re)}function J(re){C("throw",re)}function Z(re,ie){re(ie),T.shift(),T.length&&C(T[0][0],T[0][1])}}function __asyncValues$1(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],b;return e?e.call(t):(t=typeof __values$1=="function"?__values$1(t):t[Symbol.iterator](),b={},w("next"),w("throw"),w("return"),b[Symbol.asyncIterator]=function(){return this},b);function w(T){b[T]=t[T]&&function(N){return new Promise(function(C,F){N=t[T](N),$(C,F,N.done,N.value)})}}function $(T,N,C,F){Promise.resolve(F).then(function(G){T({value:G,done:C})},N)}}function isFunction$1(t){return typeof t=="function"}function createErrorClass$1(t){var e=function(w){Error.call(w),w.stack=new Error().stack},b=t(e);return b.prototype=Object.create(Error.prototype),b.prototype.constructor=b,b}var UnsubscriptionError$1=createErrorClass$1(function(t){return function(b){t(this),this.message=b?b.length+` errors occurred during unsubscription:
`+b.map(function(w,$){return $+1+") "+w.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=b}});function arrRemove$1(t,e){if(t){var b=t.indexOf(e);0<=b&&t.splice(b,1)}}var Subscription$1=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}return t.prototype.unsubscribe=function(){var e,b,w,$,T;if(!this.closed){this.closed=!0;var N=this._parentage;if(N)if(this._parentage=null,Array.isArray(N))try{for(var C=__values$1(N),F=C.next();!F.done;F=C.next()){var G=F.value;G.remove(this)}}catch(ne){e={error:ne}}finally{try{F&&!F.done&&(b=C.return)&&b.call(C)}finally{if(e)throw e.error}}else N.remove(this);var J=this.initialTeardown;if(isFunction$1(J))try{J()}catch(ne){T=ne instanceof UnsubscriptionError$1?ne.errors:[ne]}var Z=this._teardowns;if(Z){this._teardowns=null;try{for(var re=__values$1(Z),ie=re.next();!ie.done;ie=re.next()){var ue=ie.value;try{execTeardown$1(ue)}catch(ne){T=T!=null?T:[],ne instanceof UnsubscriptionError$1?T=__spreadArray$1(__spreadArray$1([],__read$1(T)),__read$1(ne.errors)):T.push(ne)}}}catch(ne){w={error:ne}}finally{try{ie&&!ie.done&&($=re.return)&&$.call(re)}finally{if(w)throw w.error}}}if(T)throw new UnsubscriptionError$1(T)}},t.prototype.add=function(e){var b;if(e&&e!==this)if(this.closed)execTeardown$1(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=(b=this._teardowns)!==null&&b!==void 0?b:[]).push(e)}},t.prototype._hasParent=function(e){var b=this._parentage;return b===e||Array.isArray(b)&&b.includes(e)},t.prototype._addParent=function(e){var b=this._parentage;this._parentage=Array.isArray(b)?(b.push(e),b):b?[b,e]:e},t.prototype._removeParent=function(e){var b=this._parentage;b===e?this._parentage=null:Array.isArray(b)&&arrRemove$1(b,e)},t.prototype.remove=function(e){var b=this._teardowns;b&&arrRemove$1(b,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),EMPTY_SUBSCRIPTION$1=Subscription$1.EMPTY;function isSubscription$1(t){return t instanceof Subscription$1||t&&"closed"in t&&isFunction$1(t.remove)&&isFunction$1(t.add)&&isFunction$1(t.unsubscribe)}function execTeardown$1(t){isFunction$1(t)?t():t.unsubscribe()}var config$1={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider$1={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=timeoutProvider$1.delegate;return((b==null?void 0:b.setTimeout)||setTimeout).apply(void 0,__spreadArray$1([],__read$1(t)))},clearTimeout:function(t){var e=timeoutProvider$1.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function reportUnhandledError$1(t){timeoutProvider$1.setTimeout(function(){var e=config$1.onUnhandledError;if(e)e(t);else throw t})}function noop$1(){}var COMPLETE_NOTIFICATION$1=function(){return createNotification$1("C",void 0,void 0)}();function errorNotification$1(t){return createNotification$1("E",void 0,t)}function nextNotification$1(t){return createNotification$1("N",t,void 0)}function createNotification$1(t,e,b){return{kind:t,value:e,error:b}}var context$1=null;function errorContext$1(t){if(config$1.useDeprecatedSynchronousErrorHandling){var e=!context$1;if(e&&(context$1={errorThrown:!1,error:null}),t(),e){var b=context$1,w=b.errorThrown,$=b.error;if(context$1=null,w)throw $}}else t()}function captureError$1(t){config$1.useDeprecatedSynchronousErrorHandling&&context$1&&(context$1.errorThrown=!0,context$1.error=t)}var Subscriber$1=function(t){__extends$1(e,t);function e(b){var w=t.call(this)||this;return w.isStopped=!1,b?(w.destination=b,isSubscription$1(b)&&b.add(w)):w.destination=EMPTY_OBSERVER$1,w}return e.create=function(b,w,$){return new SafeSubscriber$1(b,w,$)},e.prototype.next=function(b){this.isStopped?handleStoppedNotification$1(nextNotification$1(b),this):this._next(b)},e.prototype.error=function(b){this.isStopped?handleStoppedNotification$1(errorNotification$1(b),this):(this.isStopped=!0,this._error(b))},e.prototype.complete=function(){this.isStopped?handleStoppedNotification$1(COMPLETE_NOTIFICATION$1,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(b){this.destination.next(b)},e.prototype._error=function(b){try{this.destination.error(b)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Subscription$1),SafeSubscriber$1=function(t){__extends$1(e,t);function e(b,w,$){var T=t.call(this)||this,N;if(isFunction$1(b))N=b;else if(b){N=b.next,w=b.error,$=b.complete;var C;T&&config$1.useDeprecatedNextContext?(C=Object.create(b),C.unsubscribe=function(){return T.unsubscribe()}):C=b,N=N==null?void 0:N.bind(C),w=w==null?void 0:w.bind(C),$=$==null?void 0:$.bind(C)}return T.destination={next:N?wrapForErrorHandling$1(N):noop$1,error:wrapForErrorHandling$1(w!=null?w:defaultErrorHandler$1),complete:$?wrapForErrorHandling$1($):noop$1},T}return e}(Subscriber$1);function wrapForErrorHandling$1(t,e){return function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];try{t.apply(void 0,__spreadArray$1([],__read$1(b)))}catch($){config$1.useDeprecatedSynchronousErrorHandling?captureError$1($):reportUnhandledError$1($)}}}function defaultErrorHandler$1(t){throw t}function handleStoppedNotification$1(t,e){var b=config$1.onStoppedNotification;b&&timeoutProvider$1.setTimeout(function(){return b(t,e)})}var EMPTY_OBSERVER$1={closed:!0,next:noop$1,error:defaultErrorHandler$1,complete:noop$1},observable$1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$1(t){return t}function pipe$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pipeFromArray$1(t)}function pipeFromArray$1(t){return t.length===0?identity$1:t.length===1?t[0]:function(b){return t.reduce(function(w,$){return $(w)},b)}}var Observable$1=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var b=new t;return b.source=this,b.operator=e,b},t.prototype.subscribe=function(e,b,w){var $=this,T=isSubscriber$1(e)?e:new SafeSubscriber$1(e,b,w);return errorContext$1(function(){var N=$,C=N.operator,F=N.source;T.add(C?C.call(T,F):F?$._subscribe(T):$._trySubscribe(T))}),T},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(b){e.error(b)}},t.prototype.forEach=function(e,b){var w=this;return b=getPromiseCtor$1(b),new b(function($,T){var N;N=w.subscribe(function(C){try{e(C)}catch(F){T(F),N==null||N.unsubscribe()}},T,$)})},t.prototype._subscribe=function(e){var b;return(b=this.source)===null||b===void 0?void 0:b.subscribe(e)},t.prototype[observable$1]=function(){return this},t.prototype.pipe=function(){for(var e=[],b=0;b<arguments.length;b++)e[b]=arguments[b];return pipeFromArray$1(e)(this)},t.prototype.toPromise=function(e){var b=this;return e=getPromiseCtor$1(e),new e(function(w,$){var T;b.subscribe(function(N){return T=N},function(N){return $(N)},function(){return w(T)})})},t.create=function(e){return new t(e)},t}();function getPromiseCtor$1(t){var e;return(e=t!=null?t:config$1.Promise)!==null&&e!==void 0?e:Promise}function isObserver$1(t){return t&&isFunction$1(t.next)&&isFunction$1(t.error)&&isFunction$1(t.complete)}function isSubscriber$1(t){return t&&t instanceof Subscriber$1||isObserver$1(t)&&isSubscription$1(t)}function hasLift$1(t){return isFunction$1(t==null?void 0:t.lift)}function operate$1(t){return function(e){if(hasLift$1(e))return e.lift(function(b){try{return t(b,this)}catch(w){this.error(w)}});throw new TypeError("Unable to lift unknown Observable type")}}var OperatorSubscriber$1=function(t){__extends$1(e,t);function e(b,w,$,T,N){var C=t.call(this,b)||this;return C.onFinalize=N,C._next=w?function(F){try{w(F)}catch(G){b.error(G)}}:t.prototype._next,C._error=T?function(F){try{T(F)}catch(G){b.error(G)}finally{this.unsubscribe()}}:t.prototype._error,C._complete=$?function(){try{$()}catch(F){b.error(F)}finally{this.unsubscribe()}}:t.prototype._complete,C}return e.prototype.unsubscribe=function(){var b,w=this.closed;t.prototype.unsubscribe.call(this),!w&&((b=this.onFinalize)===null||b===void 0||b.call(this))},e}(Subscriber$1);function refCount$1(){return operate$1(function(t,e){var b=null;t._refCount++;var w=new OperatorSubscriber$1(e,void 0,void 0,void 0,function(){if(!t||t._refCount<=0||0<--t._refCount){b=null;return}var $=t._connection,T=b;b=null,$&&(!T||$===T)&&$.unsubscribe(),e.unsubscribe()});t.subscribe(w),w.closed||(b=t.connect())})}var ConnectableObservable$1=function(t){__extends$1(e,t);function e(b,w){var $=t.call(this)||this;return $.source=b,$.subjectFactory=w,$._subject=null,$._refCount=0,$._connection=null,hasLift$1(b)&&($.lift=b.lift),$}return e.prototype._subscribe=function(b){return this.getSubject().subscribe(b)},e.prototype.getSubject=function(){var b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var b=this._connection;this._subject=this._connection=null,b==null||b.unsubscribe()},e.prototype.connect=function(){var b=this,w=this._connection;if(!w){w=this._connection=new Subscription$1;var $=this.getSubject();w.add(this.source.subscribe(new OperatorSubscriber$1($,void 0,function(){b._teardown(),$.complete()},function(T){b._teardown(),$.error(T)},function(){return b._teardown()}))),w.closed&&(this._connection=null,w=Subscription$1.EMPTY)}return w},e.prototype.refCount=function(){return refCount$1()(this)},e}(Observable$1),performanceTimestampProvider$1={now:function(){return(performanceTimestampProvider$1.delegate||performance).now()},delegate:void 0},animationFrameProvider$1={schedule:function(t){var e=requestAnimationFrame,b=cancelAnimationFrame,w=animationFrameProvider$1.delegate;w&&(e=w.requestAnimationFrame,b=w.cancelAnimationFrame);var $=e(function(T){b=void 0,t(T)});return new Subscription$1(function(){return b==null?void 0:b($)})},requestAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=animationFrameProvider$1.delegate;return((b==null?void 0:b.requestAnimationFrame)||requestAnimationFrame).apply(void 0,__spreadArray$1([],__read$1(t)))},cancelAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=animationFrameProvider$1.delegate;return((b==null?void 0:b.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,__spreadArray$1([],__read$1(t)))},delegate:void 0};function animationFrames$1(t){return t?animationFramesFactory$1(t):DEFAULT_ANIMATION_FRAMES$1}function animationFramesFactory$1(t){var e=animationFrameProvider$1.schedule;return new Observable$1(function(b){var w=new Subscription$1,$=t||performanceTimestampProvider$1,T=$.now(),N=function(C){var F=$.now();b.next({timestamp:t?F:C,elapsed:F-T}),b.closed||w.add(e(N))};return w.add(e(N)),w})}var DEFAULT_ANIMATION_FRAMES$1=animationFramesFactory$1(),ObjectUnsubscribedError$1=createErrorClass$1(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject$1=function(t){__extends$1(e,t);function e(){var b=t.call(this)||this;return b.closed=!1,b.observers=[],b.isStopped=!1,b.hasError=!1,b.thrownError=null,b}return e.prototype.lift=function(b){var w=new AnonymousSubject$1(this,this);return w.operator=b,w},e.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError$1},e.prototype.next=function(b){var w=this;errorContext$1(function(){var $,T;if(w._throwIfClosed(),!w.isStopped){var N=w.observers.slice();try{for(var C=__values$1(N),F=C.next();!F.done;F=C.next()){var G=F.value;G.next(b)}}catch(J){$={error:J}}finally{try{F&&!F.done&&(T=C.return)&&T.call(C)}finally{if($)throw $.error}}}})},e.prototype.error=function(b){var w=this;errorContext$1(function(){if(w._throwIfClosed(),!w.isStopped){w.hasError=w.isStopped=!0,w.thrownError=b;for(var $=w.observers;$.length;)$.shift().error(b)}})},e.prototype.complete=function(){var b=this;errorContext$1(function(){if(b._throwIfClosed(),!b.isStopped){b.isStopped=!0;for(var w=b.observers;w.length;)w.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var b;return((b=this.observers)===null||b===void 0?void 0:b.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(b){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,b)},e.prototype._subscribe=function(b){return this._throwIfClosed(),this._checkFinalizedStatuses(b),this._innerSubscribe(b)},e.prototype._innerSubscribe=function(b){var w=this,$=w.hasError,T=w.isStopped,N=w.observers;return $||T?EMPTY_SUBSCRIPTION$1:(N.push(b),new Subscription$1(function(){return arrRemove$1(N,b)}))},e.prototype._checkFinalizedStatuses=function(b){var w=this,$=w.hasError,T=w.thrownError,N=w.isStopped;$?b.error(T):N&&b.complete()},e.prototype.asObservable=function(){var b=new Observable$1;return b.source=this,b},e.create=function(b,w){return new AnonymousSubject$1(b,w)},e}(Observable$1),AnonymousSubject$1=function(t){__extends$1(e,t);function e(b,w){var $=t.call(this)||this;return $.destination=b,$.source=w,$}return e.prototype.next=function(b){var w,$;($=(w=this.destination)===null||w===void 0?void 0:w.next)===null||$===void 0||$.call(w,b)},e.prototype.error=function(b){var w,$;($=(w=this.destination)===null||w===void 0?void 0:w.error)===null||$===void 0||$.call(w,b)},e.prototype.complete=function(){var b,w;(w=(b=this.destination)===null||b===void 0?void 0:b.complete)===null||w===void 0||w.call(b)},e.prototype._subscribe=function(b){var w,$;return($=(w=this.source)===null||w===void 0?void 0:w.subscribe(b))!==null&&$!==void 0?$:EMPTY_SUBSCRIPTION$1},e}(Subject$1),BehaviorSubject$1=function(t){__extends$1(e,t);function e(b){var w=t.call(this)||this;return w._value=b,w}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(b){var w=t.prototype._subscribe.call(this,b);return!w.closed&&b.next(this._value),w},e.prototype.getValue=function(){var b=this,w=b.hasError,$=b.thrownError,T=b._value;if(w)throw $;return this._throwIfClosed(),T},e.prototype.next=function(b){t.prototype.next.call(this,this._value=b)},e}(Subject$1),dateTimestampProvider$1={now:function(){return(dateTimestampProvider$1.delegate||Date).now()},delegate:void 0},ReplaySubject$1=function(t){__extends$1(e,t);function e(b,w,$){b===void 0&&(b=1/0),w===void 0&&(w=1/0),$===void 0&&($=dateTimestampProvider$1);var T=t.call(this)||this;return T._bufferSize=b,T._windowTime=w,T._timestampProvider=$,T._buffer=[],T._infiniteTimeWindow=!0,T._infiniteTimeWindow=w===1/0,T._bufferSize=Math.max(1,b),T._windowTime=Math.max(1,w),T}return e.prototype.next=function(b){var w=this,$=w.isStopped,T=w._buffer,N=w._infiniteTimeWindow,C=w._timestampProvider,F=w._windowTime;$||(T.push(b),!N&&T.push(C.now()+F)),this._trimBuffer(),t.prototype.next.call(this,b)},e.prototype._subscribe=function(b){this._throwIfClosed(),this._trimBuffer();for(var w=this._innerSubscribe(b),$=this,T=$._infiniteTimeWindow,N=$._buffer,C=N.slice(),F=0;F<C.length&&!b.closed;F+=T?1:2)b.next(C[F]);return this._checkFinalizedStatuses(b),w},e.prototype._trimBuffer=function(){var b=this,w=b._bufferSize,$=b._timestampProvider,T=b._buffer,N=b._infiniteTimeWindow,C=(N?1:2)*w;if(w<1/0&&C<T.length&&T.splice(0,T.length-C),!N){for(var F=$.now(),G=0,J=1;J<T.length&&T[J]<=F;J+=2)G=J;G&&T.splice(0,G+1)}},e}(Subject$1),AsyncSubject$1=function(t){__extends$1(e,t);function e(){var b=t!==null&&t.apply(this,arguments)||this;return b._value=null,b._hasValue=!1,b._isComplete=!1,b}return e.prototype._checkFinalizedStatuses=function(b){var w=this,$=w.hasError,T=w._hasValue,N=w._value,C=w.thrownError,F=w.isStopped,G=w._isComplete;$?b.error(C):(F||G)&&(T&&b.next(N),b.complete())},e.prototype.next=function(b){this.isStopped||(this._value=b,this._hasValue=!0)},e.prototype.complete=function(){var b=this,w=b._hasValue,$=b._value,T=b._isComplete;T||(this._isComplete=!0,w&&t.prototype.next.call(this,$),t.prototype.complete.call(this))},e}(Subject$1),Action$1=function(t){__extends$1(e,t);function e(b,w){return t.call(this)||this}return e.prototype.schedule=function(b,w){return this},e}(Subscription$1),intervalProvider$1={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=intervalProvider$1.delegate;return((b==null?void 0:b.setInterval)||setInterval).apply(void 0,__spreadArray$1([],__read$1(t)))},clearInterval:function(t){var e=intervalProvider$1.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},AsyncAction$1=function(t){__extends$1(e,t);function e(b,w){var $=t.call(this,b,w)||this;return $.scheduler=b,$.work=w,$.pending=!1,$}return e.prototype.schedule=function(b,w){if(w===void 0&&(w=0),this.closed)return this;this.state=b;var $=this.id,T=this.scheduler;return $!=null&&(this.id=this.recycleAsyncId(T,$,w)),this.pending=!0,this.delay=w,this.id=this.id||this.requestAsyncId(T,this.id,w),this},e.prototype.requestAsyncId=function(b,w,$){return $===void 0&&($=0),intervalProvider$1.setInterval(b.flush.bind(b,this),$)},e.prototype.recycleAsyncId=function(b,w,$){if($===void 0&&($=0),$!=null&&this.delay===$&&this.pending===!1)return w;intervalProvider$1.clearInterval(w)},e.prototype.execute=function(b,w){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var $=this._execute(b,w);if($)return $;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(b,w){var $=!1,T;try{this.work(b)}catch(N){$=!0,T=N||new Error("Scheduled action threw falsy error")}if($)return this.unsubscribe(),T},e.prototype.unsubscribe=function(){if(!this.closed){var b=this,w=b.id,$=b.scheduler,T=$.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove$1(T,this),w!=null&&(this.id=this.recycleAsyncId($,w,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Action$1),nextHandle$1=1,resolved$1,activeHandles$1={};function findAndClearHandle$1(t){return t in activeHandles$1?(delete activeHandles$1[t],!0):!1}var Immediate$1={setImmediate:function(t){var e=nextHandle$1++;return activeHandles$1[e]=!0,resolved$1||(resolved$1=Promise.resolve()),resolved$1.then(function(){return findAndClearHandle$1(e)&&t()}),e},clearImmediate:function(t){findAndClearHandle$1(t)}},setImmediate$1=Immediate$1.setImmediate,clearImmediate$1=Immediate$1.clearImmediate,immediateProvider$1={setImmediate:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=immediateProvider$1.delegate;return((b==null?void 0:b.setImmediate)||setImmediate$1).apply(void 0,__spreadArray$1([],__read$1(t)))},clearImmediate:function(t){var e=immediateProvider$1.delegate;return((e==null?void 0:e.clearImmediate)||clearImmediate$1)(t)},delegate:void 0},AsapAction$1=function(t){__extends$1(e,t);function e(b,w){var $=t.call(this,b,w)||this;return $.scheduler=b,$.work=w,$}return e.prototype.requestAsyncId=function(b,w,$){return $===void 0&&($=0),$!==null&&$>0?t.prototype.requestAsyncId.call(this,b,w,$):(b.actions.push(this),b._scheduled||(b._scheduled=immediateProvider$1.setImmediate(b.flush.bind(b,void 0))))},e.prototype.recycleAsyncId=function(b,w,$){if($===void 0&&($=0),$!=null&&$>0||$==null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,b,w,$);b.actions.length===0&&(immediateProvider$1.clearImmediate(w),b._scheduled=void 0)},e}(AsyncAction$1),Scheduler$1=function(){function t(e,b){b===void 0&&(b=t.now),this.schedulerActionCtor=e,this.now=b}return t.prototype.schedule=function(e,b,w){return b===void 0&&(b=0),new this.schedulerActionCtor(this,e).schedule(w,b)},t.now=dateTimestampProvider$1.now,t}(),AsyncScheduler$1=function(t){__extends$1(e,t);function e(b,w){w===void 0&&(w=Scheduler$1.now);var $=t.call(this,b,w)||this;return $.actions=[],$._active=!1,$._scheduled=void 0,$}return e.prototype.flush=function(b){var w=this.actions;if(this._active){w.push(b);return}var $;this._active=!0;do if($=b.execute(b.state,b.delay))break;while(b=w.shift());if(this._active=!1,$){for(;b=w.shift();)b.unsubscribe();throw $}},e}(Scheduler$1),AsapScheduler$1=function(t){__extends$1(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(b){this._active=!0,this._scheduled=void 0;var w=this.actions,$,T=-1;b=b||w.shift();var N=w.length;do if($=b.execute(b.state,b.delay))break;while(++T<N&&(b=w.shift()));if(this._active=!1,$){for(;++T<N&&(b=w.shift());)b.unsubscribe();throw $}},e}(AsyncScheduler$1),asapScheduler$1=new AsapScheduler$1(AsapAction$1),asap$1=asapScheduler$1,asyncScheduler$1=new AsyncScheduler$1(AsyncAction$1),async$1=asyncScheduler$1,QueueAction$1=function(t){__extends$1(e,t);function e(b,w){var $=t.call(this,b,w)||this;return $.scheduler=b,$.work=w,$}return e.prototype.schedule=function(b,w){return w===void 0&&(w=0),w>0?t.prototype.schedule.call(this,b,w):(this.delay=w,this.state=b,this.scheduler.flush(this),this)},e.prototype.execute=function(b,w){return w>0||this.closed?t.prototype.execute.call(this,b,w):this._execute(b,w)},e.prototype.requestAsyncId=function(b,w,$){return $===void 0&&($=0),$!=null&&$>0||$==null&&this.delay>0?t.prototype.requestAsyncId.call(this,b,w,$):b.flush(this)},e}(AsyncAction$1),QueueScheduler$1=function(t){__extends$1(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(AsyncScheduler$1),queueScheduler$1=new QueueScheduler$1(QueueAction$1),queue$1=queueScheduler$1,AnimationFrameAction$1=function(t){__extends$1(e,t);function e(b,w){var $=t.call(this,b,w)||this;return $.scheduler=b,$.work=w,$}return e.prototype.requestAsyncId=function(b,w,$){return $===void 0&&($=0),$!==null&&$>0?t.prototype.requestAsyncId.call(this,b,w,$):(b.actions.push(this),b._scheduled||(b._scheduled=animationFrameProvider$1.requestAnimationFrame(function(){return b.flush(void 0)})))},e.prototype.recycleAsyncId=function(b,w,$){if($===void 0&&($=0),$!=null&&$>0||$==null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,b,w,$);b.actions.length===0&&(animationFrameProvider$1.cancelAnimationFrame(w),b._scheduled=void 0)},e}(AsyncAction$1),AnimationFrameScheduler$1=function(t){__extends$1(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(b){this._active=!0,this._scheduled=void 0;var w=this.actions,$,T=-1;b=b||w.shift();var N=w.length;do if($=b.execute(b.state,b.delay))break;while(++T<N&&(b=w.shift()));if(this._active=!1,$){for(;++T<N&&(b=w.shift());)b.unsubscribe();throw $}},e}(AsyncScheduler$1),animationFrameScheduler$1=new AnimationFrameScheduler$1(AnimationFrameAction$1),animationFrame$1=animationFrameScheduler$1,VirtualTimeScheduler$1=function(t){__extends$1(e,t);function e(b,w){b===void 0&&(b=VirtualAction$1),w===void 0&&(w=1/0);var $=t.call(this,b,function(){return $.frame})||this;return $.maxFrames=w,$.frame=0,$.index=-1,$}return e.prototype.flush=function(){for(var b=this,w=b.actions,$=b.maxFrames,T,N;(N=w[0])&&N.delay<=$&&(w.shift(),this.frame=N.delay,!(T=N.execute(N.state,N.delay))););if(T){for(;N=w.shift();)N.unsubscribe();throw T}},e.frameTimeFactor=10,e}(AsyncScheduler$1),VirtualAction$1=function(t){__extends$1(e,t);function e(b,w,$){$===void 0&&($=b.index+=1);var T=t.call(this,b,w)||this;return T.scheduler=b,T.work=w,T.index=$,T.active=!0,T.index=b.index=$,T}return e.prototype.schedule=function(b,w){if(w===void 0&&(w=0),Number.isFinite(w)){if(!this.id)return t.prototype.schedule.call(this,b,w);this.active=!1;var $=new e(this.scheduler,this.work);return this.add($),$.schedule(b,w)}else return Subscription$1.EMPTY},e.prototype.requestAsyncId=function(b,w,$){$===void 0&&($=0),this.delay=b.frame+$;var T=b.actions;return T.push(this),T.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(b,w,$){},e.prototype._execute=function(b,w){if(this.active===!0)return t.prototype._execute.call(this,b,w)},e.sortActions=function(b,w){return b.delay===w.delay?b.index===w.index?0:b.index>w.index?1:-1:b.delay>w.delay?1:-1},e}(AsyncAction$1),EMPTY$1=new Observable$1(function(t){return t.complete()});function empty$1(t){return t?emptyScheduled$1(t):EMPTY$1}function emptyScheduled$1(t){return new Observable$1(function(e){return t.schedule(function(){return e.complete()})})}function isScheduler$1(t){return t&&isFunction$1(t.schedule)}function last$3(t){return t[t.length-1]}function popResultSelector$1(t){return isFunction$1(last$3(t))?t.pop():void 0}function popScheduler$1(t){return isScheduler$1(last$3(t))?t.pop():void 0}function popNumber$1(t,e){return typeof last$3(t)=="number"?t.pop():e}var isArrayLike$1=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function isPromise$1(t){return isFunction$1(t==null?void 0:t.then)}function isInteropObservable$1(t){return isFunction$1(t[observable$1])}function isAsyncIterable$1(t){return Symbol.asyncIterator&&isFunction$1(t==null?void 0:t[Symbol.asyncIterator])}function createInvalidObservableTypeError$1(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function getSymbolIterator$1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator$1=getSymbolIterator$1();function isIterable$1(t){return isFunction$1(t==null?void 0:t[iterator$1])}function readableStreamLikeToAsyncGenerator$1(t){return __asyncGenerator$1(this,arguments,function(){var b,w,$,T;return __generator$1(this,function(N){switch(N.label){case 0:b=t.getReader(),N.label=1;case 1:N.trys.push([1,,9,10]),N.label=2;case 2:return[4,__await$1(b.read())];case 3:return w=N.sent(),$=w.value,T=w.done,T?[4,__await$1(void 0)]:[3,5];case 4:return[2,N.sent()];case 5:return[4,__await$1($)];case 6:return[4,N.sent()];case 7:return N.sent(),[3,2];case 8:return[3,10];case 9:return b.releaseLock(),[7];case 10:return[2]}})})}function isReadableStreamLike$1(t){return isFunction$1(t==null?void 0:t.getReader)}function innerFrom$1(t){if(t instanceof Observable$1)return t;if(t!=null){if(isInteropObservable$1(t))return fromInteropObservable$1(t);if(isArrayLike$1(t))return fromArrayLike$1(t);if(isPromise$1(t))return fromPromise$1(t);if(isAsyncIterable$1(t))return fromAsyncIterable$1(t);if(isIterable$1(t))return fromIterable$1(t);if(isReadableStreamLike$1(t))return fromReadableStreamLike$1(t)}throw createInvalidObservableTypeError$1(t)}function fromInteropObservable$1(t){return new Observable$1(function(e){var b=t[observable$1]();if(isFunction$1(b.subscribe))return b.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike$1(t){return new Observable$1(function(e){for(var b=0;b<t.length&&!e.closed;b++)e.next(t[b]);e.complete()})}function fromPromise$1(t){return new Observable$1(function(e){t.then(function(b){e.closed||(e.next(b),e.complete())},function(b){return e.error(b)}).then(null,reportUnhandledError$1)})}function fromIterable$1(t){return new Observable$1(function(e){var b,w;try{for(var $=__values$1(t),T=$.next();!T.done;T=$.next()){var N=T.value;if(e.next(N),e.closed)return}}catch(C){b={error:C}}finally{try{T&&!T.done&&(w=$.return)&&w.call($)}finally{if(b)throw b.error}}e.complete()})}function fromAsyncIterable$1(t){return new Observable$1(function(e){process$2(t,e).catch(function(b){return e.error(b)})})}function fromReadableStreamLike$1(t){return fromAsyncIterable$1(readableStreamLikeToAsyncGenerator$1(t))}function process$2(t,e){var b,w,$,T;return __awaiter$3(this,void 0,void 0,function(){var N,C;return __generator$1(this,function(F){switch(F.label){case 0:F.trys.push([0,5,6,11]),b=__asyncValues$1(t),F.label=1;case 1:return[4,b.next()];case 2:if(w=F.sent(),!!w.done)return[3,4];if(N=w.value,e.next(N),e.closed)return[2];F.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return C=F.sent(),$={error:C},[3,11];case 6:return F.trys.push([6,,9,10]),w&&!w.done&&(T=b.return)?[4,T.call(b)]:[3,8];case 7:F.sent(),F.label=8;case 8:return[3,10];case 9:if($)throw $.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function executeSchedule$1(t,e,b,w,$){w===void 0&&(w=0),$===void 0&&($=!1);var T=e.schedule(function(){b(),$?t.add(this.schedule(null,w)):this.unsubscribe()},w);if(t.add(T),!$)return T}function observeOn$1(t,e){return e===void 0&&(e=0),operate$1(function(b,w){b.subscribe(new OperatorSubscriber$1(w,function($){return executeSchedule$1(w,t,function(){return w.next($)},e)},function(){return executeSchedule$1(w,t,function(){return w.complete()},e)},function($){return executeSchedule$1(w,t,function(){return w.error($)},e)}))})}function subscribeOn$1(t,e){return e===void 0&&(e=0),operate$1(function(b,w){w.add(t.schedule(function(){return b.subscribe(w)},e))})}function scheduleObservable$1(t,e){return innerFrom$1(t).pipe(subscribeOn$1(e),observeOn$1(e))}function schedulePromise$1(t,e){return innerFrom$1(t).pipe(subscribeOn$1(e),observeOn$1(e))}function scheduleArray$1(t,e){return new Observable$1(function(b){var w=0;return e.schedule(function(){w===t.length?b.complete():(b.next(t[w++]),b.closed||this.schedule())})})}function scheduleIterable$1(t,e){return new Observable$1(function(b){var w;return executeSchedule$1(b,e,function(){w=t[iterator$1](),executeSchedule$1(b,e,function(){var $,T,N;try{$=w.next(),T=$.value,N=$.done}catch(C){b.error(C);return}N?b.complete():b.next(T)},0,!0)}),function(){return isFunction$1(w==null?void 0:w.return)&&w.return()}})}function scheduleAsyncIterable$1(t,e){if(!t)throw new Error("Iterable cannot be null");return new Observable$1(function(b){executeSchedule$1(b,e,function(){var w=t[Symbol.asyncIterator]();executeSchedule$1(b,e,function(){w.next().then(function($){$.done?b.complete():b.next($.value)})},0,!0)})})}function scheduleReadableStreamLike$1(t,e){return scheduleAsyncIterable$1(readableStreamLikeToAsyncGenerator$1(t),e)}function scheduled$1(t,e){if(t!=null){if(isInteropObservable$1(t))return scheduleObservable$1(t,e);if(isArrayLike$1(t))return scheduleArray$1(t,e);if(isPromise$1(t))return schedulePromise$1(t,e);if(isAsyncIterable$1(t))return scheduleAsyncIterable$1(t,e);if(isIterable$1(t))return scheduleIterable$1(t,e);if(isReadableStreamLike$1(t))return scheduleReadableStreamLike$1(t,e)}throw createInvalidObservableTypeError$1(t)}function from$1(t,e){return e?scheduled$1(t,e):innerFrom$1(t)}function of$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler$1(t);return from$1(t,b)}function throwError$1(t,e){var b=isFunction$1(t)?t:function(){return t},w=function($){return $.error(b())};return new Observable$1(e?function($){return e.schedule(w,0,$)}:w)}var NotificationKind$1;(function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"})(NotificationKind$1||(NotificationKind$1={}));var Notification$1=function(){function t(e,b,w){this.kind=e,this.value=b,this.error=w,this.hasValue=e==="N"}return t.prototype.observe=function(e){return observeNotification$1(this,e)},t.prototype.do=function(e,b,w){var $=this,T=$.kind,N=$.value,C=$.error;return T==="N"?e==null?void 0:e(N):T==="E"?b==null?void 0:b(C):w==null?void 0:w()},t.prototype.accept=function(e,b,w){var $;return isFunction$1(($=e)===null||$===void 0?void 0:$.next)?this.observe(e):this.do(e,b,w)},t.prototype.toObservable=function(){var e=this,b=e.kind,w=e.value,$=e.error,T=b==="N"?of$1(w):b==="E"?throwError$1(function(){return $}):b==="C"?EMPTY$1:0;if(!T)throw new TypeError("Unexpected notification kind "+b);return T},t.createNext=function(e){return new t("N",e)},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t}();function observeNotification$1(t,e){var b,w,$,T=t,N=T.kind,C=T.value,F=T.error;if(typeof N!="string")throw new TypeError('Invalid notification, missing "kind"');N==="N"?(b=e.next)===null||b===void 0||b.call(e,C):N==="E"?(w=e.error)===null||w===void 0||w.call(e,F):($=e.complete)===null||$===void 0||$.call(e)}function isObservable$1(t){return!!t&&(t instanceof Observable$1||isFunction$1(t.lift)&&isFunction$1(t.subscribe))}var EmptyError$1=createErrorClass$1(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function lastValueFrom$1(t,e){var b=typeof e=="object";return new Promise(function(w,$){var T=!1,N;t.subscribe({next:function(C){N=C,T=!0},error:$,complete:function(){T?w(N):b?w(e.defaultValue):$(new EmptyError$1)}})})}function firstValueFrom$1(t,e){var b=typeof e=="object";return new Promise(function(w,$){var T=new SafeSubscriber$1({next:function(N){w(N),T.unsubscribe()},error:$,complete:function(){b?w(e.defaultValue):$(new EmptyError$1)}});t.subscribe(T)})}var ArgumentOutOfRangeError$1=createErrorClass$1(function(t){return function(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),NotFoundError$1=createErrorClass$1(function(t){return function(b){t(this),this.name="NotFoundError",this.message=b}}),SequenceError$1=createErrorClass$1(function(t){return function(b){t(this),this.name="SequenceError",this.message=b}});function isValidDate$1(t){return t instanceof Date&&!isNaN(t)}var TimeoutError$1=createErrorClass$1(function(t){return function(b){b===void 0&&(b=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=b}});function timeout$1(t,e){var b=isValidDate$1(t)?{first:t}:typeof t=="number"?{each:t}:t,w=b.first,$=b.each,T=b.with,N=T===void 0?timeoutErrorFactory$1:T,C=b.scheduler,F=C===void 0?e!=null?e:asyncScheduler$1:C,G=b.meta,J=G===void 0?null:G;if(w==null&&$==null)throw new TypeError("No timeout provided.");return operate$1(function(Z,re){var ie,ue,ne=null,ce=0,ae=function(ye){ue=executeSchedule$1(re,F,function(){try{ie.unsubscribe(),innerFrom$1(N({meta:J,lastValue:ne,seen:ce})).subscribe(re)}catch($e){re.error($e)}},ye)};ie=Z.subscribe(new OperatorSubscriber$1(re,function(ye){ue==null||ue.unsubscribe(),ce++,re.next(ne=ye),$>0&&ae($)},void 0,void 0,function(){(ue==null?void 0:ue.closed)||ue==null||ue.unsubscribe(),ne=null})),ae(w!=null?typeof w=="number"?w:+w-F.now():$)})}function timeoutErrorFactory$1(t){throw new TimeoutError$1(t)}function map$1(t,e){return operate$1(function(b,w){var $=0;b.subscribe(new OperatorSubscriber$1(w,function(T){w.next(t.call(e,T,$++))}))})}var isArray$5=Array.isArray;function callOrApply$1(t,e){return isArray$5(e)?t.apply(void 0,__spreadArray$1([],__read$1(e))):t(e)}function mapOneOrManyArgs$1(t){return map$1(function(e){return callOrApply$1(t,e)})}function bindCallbackInternals$1(t,e,b,w){if(b)if(isScheduler$1(b))w=b;else return function(){for(var $=[],T=0;T<arguments.length;T++)$[T]=arguments[T];return bindCallbackInternals$1(t,e,w).apply(this,$).pipe(mapOneOrManyArgs$1(b))};return w?function(){for(var $=[],T=0;T<arguments.length;T++)$[T]=arguments[T];return bindCallbackInternals$1(t,e).apply(this,$).pipe(subscribeOn$1(w),observeOn$1(w))}:function(){for(var $=this,T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];var C=new AsyncSubject$1,F=!0;return new Observable$1(function(G){var J=C.subscribe(G);if(F){F=!1;var Z=!1,re=!1;e.apply($,__spreadArray$1(__spreadArray$1([],__read$1(T)),[function(){for(var ie=[],ue=0;ue<arguments.length;ue++)ie[ue]=arguments[ue];if(t){var ne=ie.shift();if(ne!=null){C.error(ne);return}}C.next(1<ie.length?ie:ie[0]),re=!0,Z&&C.complete()}])),re&&C.complete(),Z=!0}return J})}}function bindCallback$1(t,e,b){return bindCallbackInternals$1(!1,t,e,b)}function bindNodeCallback$1(t,e,b){return bindCallbackInternals$1(!0,t,e,b)}var isArray$4=Array.isArray,getPrototypeOf$1=Object.getPrototypeOf,objectProto$1=Object.prototype,getKeys$1=Object.keys;function argsArgArrayOrObject$1(t){if(t.length===1){var e=t[0];if(isArray$4(e))return{args:e,keys:null};if(isPOJO$1(e)){var b=getKeys$1(e);return{args:b.map(function(w){return e[w]}),keys:b}}}return{args:t,keys:null}}function isPOJO$1(t){return t&&typeof t=="object"&&getPrototypeOf$1(t)===objectProto$1}function createObject$1(t,e){return t.reduce(function(b,w,$){return b[w]=e[$],b},{})}function combineLatest$3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler$1(t),w=popResultSelector$1(t),$=argsArgArrayOrObject$1(t),T=$.args,N=$.keys;if(T.length===0)return from$1([],b);var C=new Observable$1(combineLatestInit$1(T,b,N?function(F){return createObject$1(N,F)}:identity$1));return w?C.pipe(mapOneOrManyArgs$1(w)):C}function combineLatestInit$1(t,e,b){return b===void 0&&(b=identity$1),function(w){maybeSchedule$1(e,function(){for(var $=t.length,T=new Array($),N=$,C=$,F=function(J){maybeSchedule$1(e,function(){var Z=from$1(t[J],e),re=!1;Z.subscribe(new OperatorSubscriber$1(w,function(ie){T[J]=ie,re||(re=!0,C--),C||w.next(b(T.slice()))},function(){--N||w.complete()}))},w)},G=0;G<$;G++)F(G)},w)}}function maybeSchedule$1(t,e,b){t?executeSchedule$1(b,t,e):e()}function mergeInternals$1(t,e,b,w,$,T,N,C){var F=[],G=0,J=0,Z=!1,re=function(){Z&&!F.length&&!G&&e.complete()},ie=function(ne){return G<w?ue(ne):F.push(ne)},ue=function(ne){T&&e.next(ne),G++;var ce=!1;innerFrom$1(b(ne,J++)).subscribe(new OperatorSubscriber$1(e,function(ae){$==null||$(ae),T?ie(ae):e.next(ae)},function(){ce=!0},void 0,function(){if(ce)try{G--;for(var ae=function(){var ye=F.shift();N?executeSchedule$1(e,N,function(){return ue(ye)}):ue(ye)};F.length&&G<w;)ae();re()}catch(ye){e.error(ye)}}))};return t.subscribe(new OperatorSubscriber$1(e,ie,function(){Z=!0,re()})),function(){C==null||C()}}function mergeMap$1(t,e,b){return b===void 0&&(b=1/0),isFunction$1(e)?mergeMap$1(function(w,$){return map$1(function(T,N){return e(w,T,$,N)})(innerFrom$1(t(w,$)))},b):(typeof e=="number"&&(b=e),operate$1(function(w,$){return mergeInternals$1(w,$,t,b)}))}function mergeAll$1(t){return t===void 0&&(t=1/0),mergeMap$1(identity$1,t)}function concatAll$1(){return mergeAll$1(1)}function concat$4(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return concatAll$1()(from$1(t,popScheduler$1(t)))}function defer$1(t){return new Observable$1(function(e){innerFrom$1(t()).subscribe(e)})}var DEFAULT_CONFIG$3={connector:function(){return new Subject$1},resetOnDisconnect:!0};function connectable$1(t,e){e===void 0&&(e=DEFAULT_CONFIG$3);var b=null,w=e.connector,$=e.resetOnDisconnect,T=$===void 0?!0:$,N=w(),C=new Observable$1(function(F){return N.subscribe(F)});return C.connect=function(){return(!b||b.closed)&&(b=defer$1(function(){return t}).subscribe(N),T&&b.add(function(){return N=w()})),b},C}function forkJoin$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popResultSelector$1(t),w=argsArgArrayOrObject$1(t),$=w.args,T=w.keys,N=new Observable$1(function(C){var F=$.length;if(!F){C.complete();return}for(var G=new Array(F),J=F,Z=F,re=function(ue){var ne=!1;innerFrom$1($[ue]).subscribe(new OperatorSubscriber$1(C,function(ce){ne||(ne=!0,Z--),G[ue]=ce},function(){return J--},void 0,function(){(!J||!ne)&&(Z||C.next(T?createObject$1(T,G):G),C.complete())}))},ie=0;ie<F;ie++)re(ie)});return b?N.pipe(mapOneOrManyArgs$1(b)):N}var nodeEventEmitterMethods$1=["addListener","removeListener"],eventTargetMethods$1=["addEventListener","removeEventListener"],jqueryMethods$1=["on","off"];function fromEvent$1(t,e,b,w){if(isFunction$1(b)&&(w=b,b=void 0),w)return fromEvent$1(t,e,b).pipe(mapOneOrManyArgs$1(w));var $=__read$1(isEventTarget$1(t)?eventTargetMethods$1.map(function(C){return function(F){return t[C](e,F,b)}}):isNodeStyleEventEmitter$1(t)?nodeEventEmitterMethods$1.map(toCommonHandlerRegistry$1(t,e)):isJQueryStyleEventEmitter$1(t)?jqueryMethods$1.map(toCommonHandlerRegistry$1(t,e)):[],2),T=$[0],N=$[1];if(!T&&isArrayLike$1(t))return mergeMap$1(function(C){return fromEvent$1(C,e,b)})(innerFrom$1(t));if(!T)throw new TypeError("Invalid event target");return new Observable$1(function(C){var F=function(){for(var G=[],J=0;J<arguments.length;J++)G[J]=arguments[J];return C.next(1<G.length?G:G[0])};return T(F),function(){return N(F)}})}function toCommonHandlerRegistry$1(t,e){return function(b){return function(w){return t[b](e,w)}}}function isNodeStyleEventEmitter$1(t){return isFunction$1(t.addListener)&&isFunction$1(t.removeListener)}function isJQueryStyleEventEmitter$1(t){return isFunction$1(t.on)&&isFunction$1(t.off)}function isEventTarget$1(t){return isFunction$1(t.addEventListener)&&isFunction$1(t.removeEventListener)}function fromEventPattern$1(t,e,b){return b?fromEventPattern$1(t,e).pipe(mapOneOrManyArgs$1(b)):new Observable$1(function(w){var $=function(){for(var N=[],C=0;C<arguments.length;C++)N[C]=arguments[C];return w.next(N.length===1?N[0]:N)},T=t($);return isFunction$1(e)?function(){return e($,T)}:void 0})}function generate$1(t,e,b,w,$){var T,N,C,F;arguments.length===1?(T=t,F=T.initialState,e=T.condition,b=T.iterate,N=T.resultSelector,C=N===void 0?identity$1:N,$=T.scheduler):(F=t,!w||isScheduler$1(w)?(C=identity$1,$=w):C=w);function G(){var J;return __generator$1(this,function(Z){switch(Z.label){case 0:J=F,Z.label=1;case 1:return!e||e(J)?[4,C(J)]:[3,4];case 2:Z.sent(),Z.label=3;case 3:return J=b(J),[3,1];case 4:return[2]}})}return defer$1($?function(){return scheduleIterable$1(G(),$)}:G)}function iif$1(t,e,b){return defer$1(function(){return t()?e:b})}function timer$1(t,e,b){t===void 0&&(t=0),b===void 0&&(b=async$1);var w=-1;return e!=null&&(isScheduler$1(e)?b=e:w=e),new Observable$1(function($){var T=isValidDate$1(t)?+t-b.now():t;T<0&&(T=0);var N=0;return b.schedule(function(){$.closed||($.next(N++),0<=w?this.schedule(void 0,w):$.complete())},T)})}function interval$1(t,e){return t===void 0&&(t=0),e===void 0&&(e=asyncScheduler$1),t<0&&(t=0),timer$1(t,t,e)}function merge$3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler$1(t),w=popNumber$1(t,1/0),$=t;return $.length?$.length===1?innerFrom$1($[0]):mergeAll$1(w)(from$1($,b)):EMPTY$1}var NEVER$1=new Observable$1(noop$1);function never$1(){return NEVER$1}var isArray$3=Array.isArray;function argsOrArgArray$1(t){return t.length===1&&isArray$3(t[0])?t[0]:t}function onErrorResumeNext$3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=argsOrArgArray$1(t);return operate$1(function(w,$){var T=__spreadArray$1([w],__read$1(b)),N=function(){if(!$.closed)if(T.length>0){var C=void 0;try{C=innerFrom$1(T.shift())}catch{N();return}var F=new OperatorSubscriber$1($,void 0,noop$1,noop$1);$.add(C.subscribe(F)),F.add(N)}else $.complete()};N()})}function onErrorResumeNext$2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return onErrorResumeNext$3(argsOrArgArray$1(t))(EMPTY$1)}function pairs$1(t,e){return from$1(Object.entries(t),e)}function not$1(t,e){return function(b,w){return!t.call(e,b,w)}}function filter$1(t,e){return operate$1(function(b,w){var $=0;b.subscribe(new OperatorSubscriber$1(w,function(T){return t.call(e,T,$++)&&w.next(T)}))})}function partition$3(t,e,b){return[filter$1(e,b)(innerFrom$1(t)),filter$1(not$1(e,b))(innerFrom$1(t))]}function race$3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=argsOrArgArray$1(t),t.length===1?innerFrom$1(t[0]):new Observable$1(raceInit$1(t))}function raceInit$1(t){return function(e){for(var b=[],w=function(T){b.push(innerFrom$1(t[T]).subscribe(new OperatorSubscriber$1(e,function(N){if(b){for(var C=0;C<b.length;C++)C!==T&&b[C].unsubscribe();b=null}e.next(N)})))},$=0;b&&!e.closed&&$<t.length;$++)w($)}}function range$1(t,e,b){if(e==null&&(e=t,t=0),e<=0)return EMPTY$1;var w=e+t;return new Observable$1(b?function($){var T=t;return b.schedule(function(){T<w?($.next(T++),this.schedule()):$.complete()})}:function($){for(var T=t;T<w&&!$.closed;)$.next(T++);$.complete()})}function using$1(t,e){return new Observable$1(function(b){var w=t(),$=e(w),T=$?innerFrom$1($):EMPTY$1;return T.subscribe(b),function(){w&&w.unsubscribe()}})}function zip$3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popResultSelector$1(t),w=argsOrArgArray$1(t);return w.length?new Observable$1(function($){var T=w.map(function(){return[]}),N=w.map(function(){return!1});$.add(function(){T=N=null});for(var C=function(G){innerFrom$1(w[G]).subscribe(new OperatorSubscriber$1($,function(J){if(T[G].push(J),T.every(function(re){return re.length})){var Z=T.map(function(re){return re.shift()});$.next(b?b.apply(void 0,__spreadArray$1([],__read$1(Z))):Z),T.some(function(re,ie){return!re.length&&N[ie]})&&$.complete()}},function(){N[G]=!0,!T[G].length&&$.complete()}))},F=0;!$.closed&&F<w.length;F++)C(F);return function(){T=N=null}}):EMPTY$1}function audit$1(t){return operate$1(function(e,b){var w=!1,$=null,T=null,N=!1,C=function(){if(T==null||T.unsubscribe(),T=null,w){w=!1;var G=$;$=null,b.next(G)}N&&b.complete()},F=function(){T=null,N&&b.complete()};e.subscribe(new OperatorSubscriber$1(b,function(G){w=!0,$=G,T||innerFrom$1(t(G)).subscribe(T=new OperatorSubscriber$1(b,C,F))},function(){N=!0,(!w||!T||T.closed)&&b.complete()}))})}function auditTime$1(t,e){return e===void 0&&(e=async$1),audit$1(function(){return timer$1(t,e)})}function buffer$1(t){return operate$1(function(e,b){var w=[];return e.subscribe(new OperatorSubscriber$1(b,function($){return w.push($)},function(){b.next(w),b.complete()})),t.subscribe(new OperatorSubscriber$1(b,function(){var $=w;w=[],b.next($)},noop$1)),function(){w=null}})}function bufferCount$1(t,e){return e===void 0&&(e=null),e=e!=null?e:t,operate$1(function(b,w){var $=[],T=0;b.subscribe(new OperatorSubscriber$1(w,function(N){var C,F,G,J,Z=null;T++%e==0&&$.push([]);try{for(var re=__values$1($),ie=re.next();!ie.done;ie=re.next()){var ue=ie.value;ue.push(N),t<=ue.length&&(Z=Z!=null?Z:[],Z.push(ue))}}catch(ae){C={error:ae}}finally{try{ie&&!ie.done&&(F=re.return)&&F.call(re)}finally{if(C)throw C.error}}if(Z)try{for(var ne=__values$1(Z),ce=ne.next();!ce.done;ce=ne.next()){var ue=ce.value;arrRemove$1($,ue),w.next(ue)}}catch(ae){G={error:ae}}finally{try{ce&&!ce.done&&(J=ne.return)&&J.call(ne)}finally{if(G)throw G.error}}},function(){var N,C;try{for(var F=__values$1($),G=F.next();!G.done;G=F.next()){var J=G.value;w.next(J)}}catch(Z){N={error:Z}}finally{try{G&&!G.done&&(C=F.return)&&C.call(F)}finally{if(N)throw N.error}}w.complete()},void 0,function(){$=null}))})}function bufferTime$1(t){for(var e,b,w=[],$=1;$<arguments.length;$++)w[$-1]=arguments[$];var T=(e=popScheduler$1(w))!==null&&e!==void 0?e:asyncScheduler$1,N=(b=w[0])!==null&&b!==void 0?b:null,C=w[1]||1/0;return operate$1(function(F,G){var J=[],Z=!1,re=function(ne){var ce=ne.buffer,ae=ne.subs;ae.unsubscribe(),arrRemove$1(J,ne),G.next(ce),Z&&ie()},ie=function(){if(J){var ne=new Subscription$1;G.add(ne);var ce=[],ae={buffer:ce,subs:ne};J.push(ae),executeSchedule$1(ne,T,function(){return re(ae)},t)}};N!==null&&N>=0?executeSchedule$1(G,T,ie,N,!0):Z=!0,ie();var ue=new OperatorSubscriber$1(G,function(ne){var ce,ae,ye=J.slice();try{for(var $e=__values$1(ye),_e=$e.next();!_e.done;_e=$e.next()){var be=_e.value,xe=be.buffer;xe.push(ne),C<=xe.length&&re(be)}}catch(ee){ce={error:ee}}finally{try{_e&&!_e.done&&(ae=$e.return)&&ae.call($e)}finally{if(ce)throw ce.error}}},function(){for(;J==null?void 0:J.length;)G.next(J.shift().buffer);ue==null||ue.unsubscribe(),G.complete(),G.unsubscribe()},void 0,function(){return J=null});F.subscribe(ue)})}function bufferToggle$1(t,e){return operate$1(function(b,w){var $=[];innerFrom$1(t).subscribe(new OperatorSubscriber$1(w,function(T){var N=[];$.push(N);var C=new Subscription$1,F=function(){arrRemove$1($,N),w.next(N),C.unsubscribe()};C.add(innerFrom$1(e(T)).subscribe(new OperatorSubscriber$1(w,F,noop$1)))},noop$1)),b.subscribe(new OperatorSubscriber$1(w,function(T){var N,C;try{for(var F=__values$1($),G=F.next();!G.done;G=F.next()){var J=G.value;J.push(T)}}catch(Z){N={error:Z}}finally{try{G&&!G.done&&(C=F.return)&&C.call(F)}finally{if(N)throw N.error}}},function(){for(;$.length>0;)w.next($.shift());w.complete()}))})}function bufferWhen$1(t){return operate$1(function(e,b){var w=null,$=null,T=function(){$==null||$.unsubscribe();var N=w;w=[],N&&b.next(N),innerFrom$1(t()).subscribe($=new OperatorSubscriber$1(b,T,noop$1))};T(),e.subscribe(new OperatorSubscriber$1(b,function(N){return w==null?void 0:w.push(N)},function(){w&&b.next(w),b.complete()},void 0,function(){return w=$=null}))})}function catchError$1(t){return operate$1(function(e,b){var w=null,$=!1,T;w=e.subscribe(new OperatorSubscriber$1(b,void 0,void 0,function(N){T=innerFrom$1(t(N,catchError$1(t)(e))),w?(w.unsubscribe(),w=null,T.subscribe(b)):$=!0})),$&&(w.unsubscribe(),w=null,T.subscribe(b))})}function scanInternals$1(t,e,b,w,$){return function(T,N){var C=b,F=e,G=0;T.subscribe(new OperatorSubscriber$1(N,function(J){var Z=G++;F=C?t(F,J,Z):(C=!0,J),w&&N.next(F)},$&&function(){C&&N.next(F),N.complete()}))}}function reduce$1(t,e){return operate$1(scanInternals$1(t,e,arguments.length>=2,!1,!0))}var arrReducer$1=function(t,e){return t.push(e),t};function toArray$1(){return operate$1(function(t,e){reduce$1(arrReducer$1,[])(t).subscribe(e)})}function joinAllInternals$1(t,e){return pipe$1(toArray$1(),mergeMap$1(function(b){return t(b)}),e?mapOneOrManyArgs$1(e):identity$1)}function combineLatestAll$1(t){return joinAllInternals$1(combineLatest$3,t)}var combineAll$1=combineLatestAll$1;function combineLatest$2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popResultSelector$1(t);return b?pipe$1(combineLatest$2.apply(void 0,__spreadArray$1([],__read$1(t))),mapOneOrManyArgs$1(b)):operate$1(function(w,$){combineLatestInit$1(__spreadArray$1([w],__read$1(argsOrArgArray$1(t))))($)})}function combineLatestWith$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return combineLatest$2.apply(void 0,__spreadArray$1([],__read$1(t)))}function concatMap$1(t,e){return isFunction$1(e)?mergeMap$1(t,e,1):mergeMap$1(t,1)}function concatMapTo$1(t,e){return isFunction$1(e)?concatMap$1(function(){return t},e):concatMap$1(function(){return t})}function concat$3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler$1(t);return operate$1(function(w,$){concatAll$1()(from$1(__spreadArray$1([w],__read$1(t)),b)).subscribe($)})}function concatWith$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return concat$3.apply(void 0,__spreadArray$1([],__read$1(t)))}function fromSubscribable$1(t){return new Observable$1(function(e){return t.subscribe(e)})}var DEFAULT_CONFIG$2={connector:function(){return new Subject$1}};function connect$1(t,e){e===void 0&&(e=DEFAULT_CONFIG$2);var b=e.connector;return operate$1(function(w,$){var T=b();from$1(t(fromSubscribable$1(T))).subscribe($),$.add(w.subscribe(T))})}function count$1(t){return reduce$1(function(e,b,w){return!t||t(b,w)?e+1:e},0)}function debounce$1(t){return operate$1(function(e,b){var w=!1,$=null,T=null,N=function(){if(T==null||T.unsubscribe(),T=null,w){w=!1;var C=$;$=null,b.next(C)}};e.subscribe(new OperatorSubscriber$1(b,function(C){T==null||T.unsubscribe(),w=!0,$=C,T=new OperatorSubscriber$1(b,N,noop$1),innerFrom$1(t(C)).subscribe(T)},function(){N(),b.complete()},void 0,function(){$=T=null}))})}function debounceTime$1(t,e){return e===void 0&&(e=asyncScheduler$1),operate$1(function(b,w){var $=null,T=null,N=null,C=function(){if($){$.unsubscribe(),$=null;var G=T;T=null,w.next(G)}};function F(){var G=N+t,J=e.now();if(J<G){$=this.schedule(void 0,G-J),w.add($);return}C()}b.subscribe(new OperatorSubscriber$1(w,function(G){T=G,N=e.now(),$||($=e.schedule(F,t),w.add($))},function(){C(),w.complete()},void 0,function(){T=$=null}))})}function defaultIfEmpty$1(t){return operate$1(function(e,b){var w=!1;e.subscribe(new OperatorSubscriber$1(b,function($){w=!0,b.next($)},function(){w||b.next(t),b.complete()}))})}function take$1(t){return t<=0?function(){return EMPTY$1}:operate$1(function(e,b){var w=0;e.subscribe(new OperatorSubscriber$1(b,function($){++w<=t&&(b.next($),t<=w&&b.complete())}))})}function ignoreElements$1(){return operate$1(function(t,e){t.subscribe(new OperatorSubscriber$1(e,noop$1))})}function mapTo$1(t){return map$1(function(){return t})}function delayWhen$1(t,e){return e?function(b){return concat$4(e.pipe(take$1(1),ignoreElements$1()),b.pipe(delayWhen$1(t)))}:mergeMap$1(function(b,w){return t(b,w).pipe(take$1(1),mapTo$1(b))})}function delay$2(t,e){e===void 0&&(e=asyncScheduler$1);var b=timer$1(t,e);return delayWhen$1(function(){return b})}function dematerialize$1(){return operate$1(function(t,e){t.subscribe(new OperatorSubscriber$1(e,function(b){return observeNotification$1(b,e)}))})}function distinct$1(t,e){return operate$1(function(b,w){var $=new Set;b.subscribe(new OperatorSubscriber$1(w,function(T){var N=t?t(T):T;$.has(N)||($.add(N),w.next(T))})),e==null||e.subscribe(new OperatorSubscriber$1(w,function(){return $.clear()},noop$1))})}function distinctUntilChanged$1(t,e){return e===void 0&&(e=identity$1),t=t!=null?t:defaultCompare$1,operate$1(function(b,w){var $,T=!0;b.subscribe(new OperatorSubscriber$1(w,function(N){var C=e(N);(T||!t($,C))&&(T=!1,$=C,w.next(N))}))})}function defaultCompare$1(t,e){return t===e}function distinctUntilKeyChanged$1(t,e){return distinctUntilChanged$1(function(b,w){return e?e(b[t],w[t]):b[t]===w[t]})}function throwIfEmpty$1(t){return t===void 0&&(t=defaultErrorFactory$1),operate$1(function(e,b){var w=!1;e.subscribe(new OperatorSubscriber$1(b,function($){w=!0,b.next($)},function(){return w?b.complete():b.error(t())}))})}function defaultErrorFactory$1(){return new EmptyError$1}function elementAt$1(t,e){if(t<0)throw new ArgumentOutOfRangeError$1;var b=arguments.length>=2;return function(w){return w.pipe(filter$1(function($,T){return T===t}),take$1(1),b?defaultIfEmpty$1(e):throwIfEmpty$1(function(){return new ArgumentOutOfRangeError$1}))}}function endWith$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(b){return concat$4(b,of$1.apply(void 0,__spreadArray$1([],__read$1(t))))}}function every$1(t,e){return operate$1(function(b,w){var $=0;b.subscribe(new OperatorSubscriber$1(w,function(T){t.call(e,T,$++,b)||(w.next(!1),w.complete())},function(){w.next(!0),w.complete()}))})}function exhaustAll$1(){return operate$1(function(t,e){var b=!1,w=null;t.subscribe(new OperatorSubscriber$1(e,function($){w||(w=innerFrom$1($).subscribe(new OperatorSubscriber$1(e,void 0,function(){w=null,b&&e.complete()})))},function(){b=!0,!w&&e.complete()}))})}var exhaust$1=exhaustAll$1;function exhaustMap$1(t,e){return e?function(b){return b.pipe(exhaustMap$1(function(w,$){return innerFrom$1(t(w,$)).pipe(map$1(function(T,N){return e(w,T,$,N)}))}))}:operate$1(function(b,w){var $=0,T=null,N=!1;b.subscribe(new OperatorSubscriber$1(w,function(C){T||(T=new OperatorSubscriber$1(w,void 0,function(){T=null,N&&w.complete()}),innerFrom$1(t(C,$++)).subscribe(T))},function(){N=!0,!T&&w.complete()}))})}function expand$1(t,e,b){return e===void 0&&(e=1/0),e=(e||0)<1?1/0:e,operate$1(function(w,$){return mergeInternals$1(w,$,t,e,void 0,!0,b)})}function finalize$1(t){return operate$1(function(e,b){try{e.subscribe(b)}finally{b.add(t)}})}function find$1(t,e){return operate$1(createFind$1(t,e,"value"))}function createFind$1(t,e,b){var w=b==="index";return function($,T){var N=0;$.subscribe(new OperatorSubscriber$1(T,function(C){var F=N++;t.call(e,C,F,$)&&(T.next(w?F:C),T.complete())},function(){T.next(w?-1:void 0),T.complete()}))}}function findIndex$1(t,e){return operate$1(createFind$1(t,e,"index"))}function first$1(t,e){var b=arguments.length>=2;return function(w){return w.pipe(t?filter$1(function($,T){return t($,T,w)}):identity$1,take$1(1),b?defaultIfEmpty$1(e):throwIfEmpty$1(function(){return new EmptyError$1}))}}function groupBy$1(t,e,b,w){return operate$1(function($,T){var N;!e||typeof e=="function"?N=e:(b=e.duration,N=e.element,w=e.connector);var C=new Map,F=function(re){C.forEach(re),re(T)},G=function(re){return F(function(ie){return ie.error(re)})},J=new GroupBySubscriber$1(T,function(re){try{var ie=t(re),ue=C.get(ie);if(!ue){C.set(ie,ue=w?w():new Subject$1);var ne=Z(ie,ue);if(T.next(ne),b){var ce=new OperatorSubscriber$1(ue,function(){ue.complete(),ce==null||ce.unsubscribe()},void 0,void 0,function(){return C.delete(ie)});J.add(innerFrom$1(b(ne)).subscribe(ce))}}ue.next(N?N(re):re)}catch(ae){G(ae)}},function(){return F(function(re){return re.complete()})},G,function(){return C.clear()});$.subscribe(J);function Z(re,ie){var ue=new Observable$1(function(ne){J.activeGroups++;var ce=ie.subscribe(ne);return function(){ce.unsubscribe(),--J.activeGroups==0&&J.teardownAttempted&&J.unsubscribe()}});return ue.key=re,ue}})}var GroupBySubscriber$1=function(t){__extends$1(e,t);function e(){var b=t!==null&&t.apply(this,arguments)||this;return b.activeGroups=0,b.teardownAttempted=!1,b}return e.prototype.unsubscribe=function(){this.teardownAttempted=!0,this.activeGroups===0&&t.prototype.unsubscribe.call(this)},e}(OperatorSubscriber$1);function isEmpty$1(){return operate$1(function(t,e){t.subscribe(new OperatorSubscriber$1(e,function(){e.next(!1),e.complete()},function(){e.next(!0),e.complete()}))})}function takeLast$1(t){return t<=0?function(){return EMPTY$1}:operate$1(function(e,b){var w=[];e.subscribe(new OperatorSubscriber$1(b,function($){w.push($),t<w.length&&w.shift()},function(){var $,T;try{for(var N=__values$1(w),C=N.next();!C.done;C=N.next()){var F=C.value;b.next(F)}}catch(G){$={error:G}}finally{try{C&&!C.done&&(T=N.return)&&T.call(N)}finally{if($)throw $.error}}b.complete()},void 0,function(){w=null}))})}function last$2(t,e){var b=arguments.length>=2;return function(w){return w.pipe(t?filter$1(function($,T){return t($,T,w)}):identity$1,takeLast$1(1),b?defaultIfEmpty$1(e):throwIfEmpty$1(function(){return new EmptyError$1}))}}function materialize$1(){return operate$1(function(t,e){t.subscribe(new OperatorSubscriber$1(e,function(b){e.next(Notification$1.createNext(b))},function(){e.next(Notification$1.createComplete()),e.complete()},function(b){e.next(Notification$1.createError(b)),e.complete()}))})}function max$1(t){return reduce$1(isFunction$1(t)?function(e,b){return t(e,b)>0?e:b}:function(e,b){return e>b?e:b})}var flatMap$1=mergeMap$1;function mergeMapTo$1(t,e,b){return b===void 0&&(b=1/0),isFunction$1(e)?mergeMap$1(function(){return t},e,b):(typeof e=="number"&&(b=e),mergeMap$1(function(){return t},b))}function mergeScan$1(t,e,b){return b===void 0&&(b=1/0),operate$1(function(w,$){var T=e;return mergeInternals$1(w,$,function(N,C){return t(T,N,C)},b,function(N){T=N},!1,void 0,function(){return T=null})})}function merge$2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler$1(t),w=popNumber$1(t,1/0);return t=argsOrArgArray$1(t),operate$1(function($,T){mergeAll$1(w)(from$1(__spreadArray$1([$],__read$1(t)),b)).subscribe(T)})}function mergeWith$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return merge$2.apply(void 0,__spreadArray$1([],__read$1(t)))}function min$1(t){return reduce$1(isFunction$1(t)?function(e,b){return t(e,b)<0?e:b}:function(e,b){return e<b?e:b})}function multicast$1(t,e){var b=isFunction$1(t)?t:function(){return t};return isFunction$1(e)?connect$1(e,{connector:b}):function(w){return new ConnectableObservable$1(w,b)}}function pairwise$1(){return operate$1(function(t,e){var b,w=!1;t.subscribe(new OperatorSubscriber$1(e,function($){var T=b;b=$,w&&e.next([T,$]),w=!0}))})}function pluck$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=t.length;if(b===0)throw new Error("list of properties cannot be empty.");return map$1(function(w){for(var $=w,T=0;T<b;T++){var N=$==null?void 0:$[t[T]];if(typeof N!="undefined")$=N;else return}return $})}function publish$1(t){return t?function(e){return connect$1(t)(e)}:function(e){return multicast$1(new Subject$1)(e)}}function publishBehavior$1(t){return function(e){var b=new BehaviorSubject$1(t);return new ConnectableObservable$1(e,function(){return b})}}function publishLast$1(){return function(t){var e=new AsyncSubject$1;return new ConnectableObservable$1(t,function(){return e})}}function publishReplay$1(t,e,b,w){b&&!isFunction$1(b)&&(w=b);var $=isFunction$1(b)?b:void 0;return function(T){return multicast$1(new ReplaySubject$1(t,e,w),$)(T)}}function raceWith$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?operate$1(function(b,w){raceInit$1(__spreadArray$1([b],__read$1(t)))(w)}):identity$1}function repeat$1(t){return t===void 0&&(t=1/0),t<=0?function(){return EMPTY$1}:operate$1(function(e,b){var w=0,$,T=function(){var N=!1;$=e.subscribe(new OperatorSubscriber$1(b,void 0,function(){++w<t?$?($.unsubscribe(),$=null,T()):N=!0:b.complete()})),N&&($.unsubscribe(),$=null,T())};T()})}function repeatWhen$1(t){return operate$1(function(e,b){var w,$=!1,T,N=!1,C=!1,F=function(){return C&&N&&(b.complete(),!0)},G=function(){return T||(T=new Subject$1,t(T).subscribe(new OperatorSubscriber$1(b,function(){w?J():$=!0},function(){N=!0,F()}))),T},J=function(){C=!1,w=e.subscribe(new OperatorSubscriber$1(b,void 0,function(){C=!0,!F()&&G().next()})),$&&(w.unsubscribe(),w=null,$=!1,J())};J()})}function retry$1(t){t===void 0&&(t=1/0);var e;t&&typeof t=="object"?e=t:e={count:t};var b=e.count,w=b===void 0?1/0:b,$=e.delay,T=e.resetOnSuccess,N=T===void 0?!1:T;return w<=0?identity$1:operate$1(function(C,F){var G=0,J,Z=function(){var re=!1;J=C.subscribe(new OperatorSubscriber$1(F,function(ie){N&&(G=0),F.next(ie)},void 0,function(ie){if(G++<w){var ue=function(){J?(J.unsubscribe(),J=null,Z()):re=!0};if($!=null){var ne=typeof $=="number"?timer$1($):innerFrom$1($(ie,G)),ce=new OperatorSubscriber$1(F,function(){ce.unsubscribe(),ue()},function(){F.complete()});ne.subscribe(ce)}else ue()}else F.error(ie)})),re&&(J.unsubscribe(),J=null,Z())};Z()})}function retryWhen$1(t){return operate$1(function(e,b){var w,$=!1,T,N=function(){w=e.subscribe(new OperatorSubscriber$1(b,void 0,void 0,function(C){T||(T=new Subject$1,t(T).subscribe(new OperatorSubscriber$1(b,function(){return w?N():$=!0}))),T&&T.next(C)})),$&&(w.unsubscribe(),w=null,$=!1,N())};N()})}function sample$1(t){return operate$1(function(e,b){var w=!1,$=null;e.subscribe(new OperatorSubscriber$1(b,function(N){w=!0,$=N}));var T=function(){if(w){w=!1;var N=$;$=null,b.next(N)}};t.subscribe(new OperatorSubscriber$1(b,T,noop$1))})}function sampleTime$1(t,e){return e===void 0&&(e=asyncScheduler$1),sample$1(interval$1(t,e))}function scan$1(t,e){return operate$1(scanInternals$1(t,e,arguments.length>=2,!0))}function sequenceEqual$1(t,e){return e===void 0&&(e=function(b,w){return b===w}),operate$1(function(b,w){var $=createState$1(),T=createState$1(),N=function(F){w.next(F),w.complete()},C=function(F,G){var J=new OperatorSubscriber$1(w,function(Z){var re=G.buffer,ie=G.complete;re.length===0?ie?N(!1):F.buffer.push(Z):!e(Z,re.shift())&&N(!1)},function(){F.complete=!0;var Z=G.complete,re=G.buffer;Z&&N(re.length===0),J==null||J.unsubscribe()});return J};b.subscribe(C($,T)),t.subscribe(C(T,$))})}function createState$1(){return{buffer:[],complete:!1}}function share$1(t){t===void 0&&(t={});var e=t.connector,b=e===void 0?function(){return new Subject$1}:e,w=t.resetOnError,$=w===void 0?!0:w,T=t.resetOnComplete,N=T===void 0?!0:T,C=t.resetOnRefCountZero,F=C===void 0?!0:C;return function(G){var J=null,Z=null,re=null,ie=0,ue=!1,ne=!1,ce=function(){Z==null||Z.unsubscribe(),Z=null},ae=function(){ce(),J=re=null,ue=ne=!1},ye=function(){var $e=J;ae(),$e==null||$e.unsubscribe()};return operate$1(function($e,_e){ie++,!ne&&!ue&&ce();var be=re=re!=null?re:b();_e.add(function(){ie--,ie===0&&!ne&&!ue&&(Z=handleReset$1(ye,F))}),be.subscribe(_e),J||(J=new SafeSubscriber$1({next:function(xe){return be.next(xe)},error:function(xe){ne=!0,ce(),Z=handleReset$1(ae,$,xe),be.error(xe)},complete:function(){ue=!0,ce(),Z=handleReset$1(ae,N),be.complete()}}),from$1($e).subscribe(J))})(G)}}function handleReset$1(t,e){for(var b=[],w=2;w<arguments.length;w++)b[w-2]=arguments[w];return e===!0?(t(),null):e===!1?null:e.apply(void 0,__spreadArray$1([],__read$1(b))).pipe(take$1(1)).subscribe(function(){return t()})}function shareReplay$1(t,e,b){var w,$,T,N=!1;return t&&typeof t=="object"?(T=(w=t.bufferSize)!==null&&w!==void 0?w:1/0,e=($=t.windowTime)!==null&&$!==void 0?$:1/0,N=!!t.refCount,b=t.scheduler):T=t!=null?t:1/0,share$1({connector:function(){return new ReplaySubject$1(T,e,b)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:N})}function single$1(t){return operate$1(function(e,b){var w=!1,$,T=!1,N=0;e.subscribe(new OperatorSubscriber$1(b,function(C){T=!0,(!t||t(C,N++,e))&&(w&&b.error(new SequenceError$1("Too many matching values")),w=!0,$=C)},function(){w?(b.next($),b.complete()):b.error(T?new NotFoundError$1("No matching values"):new EmptyError$1)}))})}function skip$1(t){return filter$1(function(e,b){return t<=b})}function skipLast$1(t){return t<=0?identity$1:operate$1(function(e,b){var w=new Array(t),$=0;return e.subscribe(new OperatorSubscriber$1(b,function(T){var N=$++;if(N<t)w[N]=T;else{var C=N%t,F=w[C];w[C]=T,b.next(F)}})),function(){w=null}})}function skipUntil$1(t){return operate$1(function(e,b){var w=!1,$=new OperatorSubscriber$1(b,function(){$==null||$.unsubscribe(),w=!0},noop$1);innerFrom$1(t).subscribe($),e.subscribe(new OperatorSubscriber$1(b,function(T){return w&&b.next(T)}))})}function skipWhile$1(t){return operate$1(function(e,b){var w=!1,$=0;e.subscribe(new OperatorSubscriber$1(b,function(T){return(w||(w=!t(T,$++)))&&b.next(T)}))})}function startWith$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler$1(t);return operate$1(function(w,$){(b?concat$4(t,w,b):concat$4(t,w)).subscribe($)})}function switchMap$1(t,e){return operate$1(function(b,w){var $=null,T=0,N=!1,C=function(){return N&&!$&&w.complete()};b.subscribe(new OperatorSubscriber$1(w,function(F){$==null||$.unsubscribe();var G=0,J=T++;innerFrom$1(t(F,J)).subscribe($=new OperatorSubscriber$1(w,function(Z){return w.next(e?e(F,Z,J,G++):Z)},function(){$=null,C()}))},function(){N=!0,C()}))})}function switchAll$1(){return switchMap$1(identity$1)}function switchMapTo$1(t,e){return isFunction$1(e)?switchMap$1(function(){return t},e):switchMap$1(function(){return t})}function switchScan$1(t,e){return operate$1(function(b,w){var $=e;return switchMap$1(function(T,N){return t($,T,N)},function(T,N){return $=N,N})(b).subscribe(w),function(){$=null}})}function takeUntil$1(t){return operate$1(function(e,b){innerFrom$1(t).subscribe(new OperatorSubscriber$1(b,function(){return b.complete()},noop$1)),!b.closed&&e.subscribe(b)})}function takeWhile$1(t,e){return e===void 0&&(e=!1),operate$1(function(b,w){var $=0;b.subscribe(new OperatorSubscriber$1(w,function(T){var N=t(T,$++);(N||e)&&w.next(T),!N&&w.complete()}))})}function tap$1(t,e,b){var w=isFunction$1(t)||e||b?{next:t,error:e,complete:b}:t;return w?operate$1(function($,T){var N;(N=w.subscribe)===null||N===void 0||N.call(w);var C=!0;$.subscribe(new OperatorSubscriber$1(T,function(F){var G;(G=w.next)===null||G===void 0||G.call(w,F),T.next(F)},function(){var F;C=!1,(F=w.complete)===null||F===void 0||F.call(w),T.complete()},function(F){var G;C=!1,(G=w.error)===null||G===void 0||G.call(w,F),T.error(F)},function(){var F,G;C&&((F=w.unsubscribe)===null||F===void 0||F.call(w)),(G=w.finalize)===null||G===void 0||G.call(w)}))}):identity$1}var defaultThrottleConfig$1={leading:!0,trailing:!1};function throttle$1(t,e){var b=e===void 0?defaultThrottleConfig$1:e,w=b.leading,$=b.trailing;return operate$1(function(T,N){var C=!1,F=null,G=null,J=!1,Z=function(){G==null||G.unsubscribe(),G=null,$&&(ue(),J&&N.complete())},re=function(){G=null,J&&N.complete()},ie=function(ne){return G=innerFrom$1(t(ne)).subscribe(new OperatorSubscriber$1(N,Z,re))},ue=function(){if(C){C=!1;var ne=F;F=null,N.next(ne),!J&&ie(ne)}};T.subscribe(new OperatorSubscriber$1(N,function(ne){C=!0,F=ne,!(G&&!G.closed)&&(w?ue():ie(ne))},function(){J=!0,!($&&C&&G&&!G.closed)&&N.complete()}))})}function throttleTime$1(t,e,b){e===void 0&&(e=asyncScheduler$1),b===void 0&&(b=defaultThrottleConfig$1);var w=timer$1(t,e);return throttle$1(function(){return w},b)}function timeInterval$1(t){return t===void 0&&(t=async$1),function(e){return defer$1(function(){return e.pipe(scan$1(function(b,w){var $=b.current;return{value:w,current:t.now(),last:$}},{current:t.now(),value:void 0,last:void 0}),map$1(function(b){var w=b.current,$=b.last,T=b.value;return new TimeInterval$1(T,w-$)}))})}}var TimeInterval$1=function(){function t(e,b){this.value=e,this.interval=b}return t}();function timeoutWith$1(t,e,b){var w,$,T;if(b=b!=null?b:async$1,isValidDate$1(t)?w=t:typeof t=="number"&&($=t),e)T=function(){return e};else throw new TypeError("No observable provided to switch to");if(w==null&&$==null)throw new TypeError("No timeout provided.");return timeout$1({first:w,each:$,scheduler:b,with:T})}function timestamp$1(t){return t===void 0&&(t=dateTimestampProvider$1),map$1(function(e){return{value:e,timestamp:t.now()}})}function window$2(t){return operate$1(function(e,b){var w=new Subject$1;b.next(w.asObservable());var $=function(T){w.error(T),b.error(T)};return e.subscribe(new OperatorSubscriber$1(b,function(T){return w==null?void 0:w.next(T)},function(){w.complete(),b.complete()},$)),t.subscribe(new OperatorSubscriber$1(b,function(){w.complete(),b.next(w=new Subject$1)},noop$1,$)),function(){w==null||w.unsubscribe(),w=null}})}function windowCount$1(t,e){e===void 0&&(e=0);var b=e>0?e:t;return operate$1(function(w,$){var T=[new Subject$1],N=[],C=0;$.next(T[0].asObservable()),w.subscribe(new OperatorSubscriber$1($,function(F){var G,J;try{for(var Z=__values$1(T),re=Z.next();!re.done;re=Z.next()){var ie=re.value;ie.next(F)}}catch(ce){G={error:ce}}finally{try{re&&!re.done&&(J=Z.return)&&J.call(Z)}finally{if(G)throw G.error}}var ue=C-t+1;if(ue>=0&&ue%b==0&&T.shift().complete(),++C%b==0){var ne=new Subject$1;T.push(ne),$.next(ne.asObservable())}},function(){for(;T.length>0;)T.shift().complete();$.complete()},function(F){for(;T.length>0;)T.shift().error(F);$.error(F)},function(){N=null,T=null}))})}function windowTime$1(t){for(var e,b,w=[],$=1;$<arguments.length;$++)w[$-1]=arguments[$];var T=(e=popScheduler$1(w))!==null&&e!==void 0?e:asyncScheduler$1,N=(b=w[0])!==null&&b!==void 0?b:null,C=w[1]||1/0;return operate$1(function(F,G){var J=[],Z=!1,re=function(ce){var ae=ce.window,ye=ce.subs;ae.complete(),ye.unsubscribe(),arrRemove$1(J,ce),Z&&ie()},ie=function(){if(J){var ce=new Subscription$1;G.add(ce);var ae=new Subject$1,ye={window:ae,subs:ce,seen:0};J.push(ye),G.next(ae.asObservable()),executeSchedule$1(ce,T,function(){return re(ye)},t)}};N!==null&&N>=0?executeSchedule$1(G,T,ie,N,!0):Z=!0,ie();var ue=function(ce){return J.slice().forEach(ce)},ne=function(ce){ue(function(ae){var ye=ae.window;return ce(ye)}),ce(G),G.unsubscribe()};return F.subscribe(new OperatorSubscriber$1(G,function(ce){ue(function(ae){ae.window.next(ce),C<=++ae.seen&&re(ae)})},function(){return ne(function(ce){return ce.complete()})},function(ce){return ne(function(ae){return ae.error(ce)})})),function(){J=null}})}function windowToggle$1(t,e){return operate$1(function(b,w){var $=[],T=function(N){for(;0<$.length;)$.shift().error(N);w.error(N)};innerFrom$1(t).subscribe(new OperatorSubscriber$1(w,function(N){var C=new Subject$1;$.push(C);var F=new Subscription$1,G=function(){arrRemove$1($,C),C.complete(),F.unsubscribe()},J;try{J=innerFrom$1(e(N))}catch(Z){T(Z);return}w.next(C.asObservable()),F.add(J.subscribe(new OperatorSubscriber$1(w,G,noop$1,T)))},noop$1)),b.subscribe(new OperatorSubscriber$1(w,function(N){var C,F,G=$.slice();try{for(var J=__values$1(G),Z=J.next();!Z.done;Z=J.next()){var re=Z.value;re.next(N)}}catch(ie){C={error:ie}}finally{try{Z&&!Z.done&&(F=J.return)&&F.call(J)}finally{if(C)throw C.error}}},function(){for(;0<$.length;)$.shift().complete();w.complete()},T,function(){for(;0<$.length;)$.shift().unsubscribe()}))})}function windowWhen$1(t){return operate$1(function(e,b){var w,$,T=function(C){w.error(C),b.error(C)},N=function(){$==null||$.unsubscribe(),w==null||w.complete(),w=new Subject$1,b.next(w.asObservable());var C;try{C=innerFrom$1(t())}catch(F){T(F);return}C.subscribe($=new OperatorSubscriber$1(b,N,N,T))};N(),e.subscribe(new OperatorSubscriber$1(b,function(C){return w.next(C)},function(){w.complete(),b.complete()},T,function(){$==null||$.unsubscribe(),w=null}))})}function withLatestFrom$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popResultSelector$1(t);return operate$1(function(w,$){for(var T=t.length,N=new Array(T),C=t.map(function(){return!1}),F=!1,G=function(Z){innerFrom$1(t[Z]).subscribe(new OperatorSubscriber$1($,function(re){N[Z]=re,!F&&!C[Z]&&(C[Z]=!0,(F=C.every(identity$1))&&(C=null))},noop$1))},J=0;J<T;J++)G(J);w.subscribe(new OperatorSubscriber$1($,function(Z){if(F){var re=__spreadArray$1([Z],__read$1(N));$.next(b?b.apply(void 0,__spreadArray$1([],__read$1(re))):re)}}))})}function zipAll$1(t){return joinAllInternals$1(zip$3,t)}function zip$2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return operate$1(function(b,w){zip$3.apply(void 0,__spreadArray$1([b],__read$1(t))).subscribe(w)})}function zipWith$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zip$2.apply(void 0,__spreadArray$1([],__read$1(t)))}var esm5$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Observable:Observable$1,ConnectableObservable:ConnectableObservable$1,observable:observable$1,animationFrames:animationFrames$1,Subject:Subject$1,BehaviorSubject:BehaviorSubject$1,ReplaySubject:ReplaySubject$1,AsyncSubject:AsyncSubject$1,asap:asap$1,asapScheduler:asapScheduler$1,async:async$1,asyncScheduler:asyncScheduler$1,queue:queue$1,queueScheduler:queueScheduler$1,animationFrame:animationFrame$1,animationFrameScheduler:animationFrameScheduler$1,VirtualTimeScheduler:VirtualTimeScheduler$1,VirtualAction:VirtualAction$1,Scheduler:Scheduler$1,Subscription:Subscription$1,Subscriber:Subscriber$1,Notification:Notification$1,get NotificationKind(){return NotificationKind$1},pipe:pipe$1,noop:noop$1,identity:identity$1,isObservable:isObservable$1,lastValueFrom:lastValueFrom$1,firstValueFrom:firstValueFrom$1,ArgumentOutOfRangeError:ArgumentOutOfRangeError$1,EmptyError:EmptyError$1,NotFoundError:NotFoundError$1,ObjectUnsubscribedError:ObjectUnsubscribedError$1,SequenceError:SequenceError$1,TimeoutError:TimeoutError$1,UnsubscriptionError:UnsubscriptionError$1,bindCallback:bindCallback$1,bindNodeCallback:bindNodeCallback$1,combineLatest:combineLatest$3,concat:concat$4,connectable:connectable$1,defer:defer$1,empty:empty$1,forkJoin:forkJoin$1,from:from$1,fromEvent:fromEvent$1,fromEventPattern:fromEventPattern$1,generate:generate$1,iif:iif$1,interval:interval$1,merge:merge$3,never:never$1,of:of$1,onErrorResumeNext:onErrorResumeNext$2,pairs:pairs$1,partition:partition$3,race:race$3,range:range$1,throwError:throwError$1,timer:timer$1,using:using$1,zip:zip$3,scheduled:scheduled$1,EMPTY:EMPTY$1,NEVER:NEVER$1,config:config$1,audit:audit$1,auditTime:auditTime$1,buffer:buffer$1,bufferCount:bufferCount$1,bufferTime:bufferTime$1,bufferToggle:bufferToggle$1,bufferWhen:bufferWhen$1,catchError:catchError$1,combineAll:combineAll$1,combineLatestAll:combineLatestAll$1,combineLatestWith:combineLatestWith$1,concatAll:concatAll$1,concatMap:concatMap$1,concatMapTo:concatMapTo$1,concatWith:concatWith$1,connect:connect$1,count:count$1,debounce:debounce$1,debounceTime:debounceTime$1,defaultIfEmpty:defaultIfEmpty$1,delay:delay$2,delayWhen:delayWhen$1,dematerialize:dematerialize$1,distinct:distinct$1,distinctUntilChanged:distinctUntilChanged$1,distinctUntilKeyChanged:distinctUntilKeyChanged$1,elementAt:elementAt$1,endWith:endWith$1,every:every$1,exhaust:exhaust$1,exhaustAll:exhaustAll$1,exhaustMap:exhaustMap$1,expand:expand$1,filter:filter$1,finalize:finalize$1,find:find$1,findIndex:findIndex$1,first:first$1,groupBy:groupBy$1,ignoreElements:ignoreElements$1,isEmpty:isEmpty$1,last:last$2,map:map$1,mapTo:mapTo$1,materialize:materialize$1,max:max$1,mergeAll:mergeAll$1,flatMap:flatMap$1,mergeMap:mergeMap$1,mergeMapTo:mergeMapTo$1,mergeScan:mergeScan$1,mergeWith:mergeWith$1,min:min$1,multicast:multicast$1,observeOn:observeOn$1,pairwise:pairwise$1,pluck:pluck$1,publish:publish$1,publishBehavior:publishBehavior$1,publishLast:publishLast$1,publishReplay:publishReplay$1,raceWith:raceWith$1,reduce:reduce$1,repeat:repeat$1,repeatWhen:repeatWhen$1,retry:retry$1,retryWhen:retryWhen$1,refCount:refCount$1,sample:sample$1,sampleTime:sampleTime$1,scan:scan$1,sequenceEqual:sequenceEqual$1,share:share$1,shareReplay:shareReplay$1,single:single$1,skip:skip$1,skipLast:skipLast$1,skipUntil:skipUntil$1,skipWhile:skipWhile$1,startWith:startWith$1,subscribeOn:subscribeOn$1,switchAll:switchAll$1,switchMap:switchMap$1,switchMapTo:switchMapTo$1,switchScan:switchScan$1,take:take$1,takeLast:takeLast$1,takeUntil:takeUntil$1,takeWhile:takeWhile$1,tap:tap$1,throttle:throttle$1,throttleTime:throttleTime$1,throwIfEmpty:throwIfEmpty$1,timeInterval:timeInterval$1,timeout:timeout$1,timeoutWith:timeoutWith$1,timestamp:timestamp$1,toArray:toArray$1,window:window$2,windowCount:windowCount$1,windowTime:windowTime$1,windowToggle:windowToggle$1,windowWhen:windowWhen$1,withLatestFrom:withLatestFrom$1,zipAll:zipAll$1,zipWith:zipWith$1}),require$$0$4=getAugmentedNamespace(esm5$1);(function(t){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamStatic=t.Stream=t.CommitType=t.AnchorStatus=t.SignatureStatus=void 0;const b=e(lodash_clonedeep.exports),w=lib$4,$=require$$0$4,T=streamopts;(function(G){G[G.GENESIS=0]="GENESIS",G[G.PARTIAL=1]="PARTIAL",G[G.SIGNED=2]="SIGNED"})(t.SignatureStatus||(t.SignatureStatus={})),function(G){G[G.NOT_REQUESTED=0]="NOT_REQUESTED",G[G.PENDING=1]="PENDING",G[G.PROCESSING=2]="PROCESSING",G[G.ANCHORED=3]="ANCHORED",G[G.FAILED=4]="FAILED"}(t.AnchorStatus||(t.AnchorStatus={}));var N;(function(G){G[G.GENESIS=0]="GENESIS",G[G.SIGNED=1]="SIGNED",G[G.ANCHOR=2]="ANCHOR"})(N=t.CommitType||(t.CommitType={}));class C extends $.Observable{constructor(J,Z){super(re=>{J.subscribe(re)});this.state$=J,this._context=Z}get id(){return new w.StreamID(this.state$.value.type,this.state$.value.log[0].cid)}get api(){return this._context.api}get metadata(){var J;const{next:Z,metadata:re}=this.state$.value;return b.default((J=Z==null?void 0:Z.metadata)!==null&&J!==void 0?J:re)}get content(){var J;const{next:Z,content:re}=this.state$.value;return b.default((J=Z==null?void 0:Z.content)!==null&&J!==void 0?J:re)}get controllers(){return this.metadata.controllers}get tip(){return this.state$.value.log[this.state$.value.log.length-1].cid}get commitId(){return this.id.atCommit(this.tip)}get allCommitIds(){return this.state$.value.log.map(({cid:J})=>this.id.atCommit(J))}get anchorCommitIds(){return this.state$.value.log.filter(({type:J})=>J===N.ANCHOR).map(({cid:J})=>this.id.atCommit(J))}get state(){return b.default(this.state$.value)}async sync(J={}){J=Tt({sync:T.SyncOptions.PREFER_CACHE},J);const Z=await this.api.loadStream(this.id,J);this.state$.next(Z.state)}async requestAnchor(){return this.api.requestAnchor(this.id)}}t.Stream=C;function F(){return G=>{}}t.StreamStatic=F})(stream$2);var httpUtils={},browserPonyfill={exports:{}};(function(t,e){var b=typeof self!="undefined"?self:commonjsGlobal,w=function(){function T(){this.fetch=!1,this.DOMException=b.DOMException}return T.prototype=b,new T}();(function(T){(function(N){var C={searchParams:"URLSearchParams"in T,iterable:"Symbol"in T&&"iterator"in Symbol,blob:"FileReader"in T&&"Blob"in T&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in T,arrayBuffer:"ArrayBuffer"in T};function F(R){return R&&DataView.prototype.isPrototypeOf(R)}if(C.arrayBuffer)var G=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],J=ArrayBuffer.isView||function(R){return R&&G.indexOf(Object.prototype.toString.call(R))>-1};function Z(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(R))throw new TypeError("Invalid character in header field name");return R.toLowerCase()}function re(R){return typeof R!="string"&&(R=String(R)),R}function ie(R){var B={next:function(){var V=R.shift();return{done:V===void 0,value:V}}};return C.iterable&&(B[Symbol.iterator]=function(){return B}),B}function ue(R){this.map={},R instanceof ue?R.forEach(function(B,V){this.append(V,B)},this):Array.isArray(R)?R.forEach(function(B){this.append(B[0],B[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(B){this.append(B,R[B])},this)}ue.prototype.append=function(R,B){R=Z(R),B=re(B);var V=this.map[R];this.map[R]=V?V+", "+B:B},ue.prototype.delete=function(R){delete this.map[Z(R)]},ue.prototype.get=function(R){return R=Z(R),this.has(R)?this.map[R]:null},ue.prototype.has=function(R){return this.map.hasOwnProperty(Z(R))},ue.prototype.set=function(R,B){this.map[Z(R)]=re(B)},ue.prototype.forEach=function(R,B){for(var V in this.map)this.map.hasOwnProperty(V)&&R.call(B,this.map[V],V,this)},ue.prototype.keys=function(){var R=[];return this.forEach(function(B,V){R.push(V)}),ie(R)},ue.prototype.values=function(){var R=[];return this.forEach(function(B){R.push(B)}),ie(R)},ue.prototype.entries=function(){var R=[];return this.forEach(function(B,V){R.push([V,B])}),ie(R)},C.iterable&&(ue.prototype[Symbol.iterator]=ue.prototype.entries);function ne(R){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}function ce(R){return new Promise(function(B,V){R.onload=function(){B(R.result)},R.onerror=function(){V(R.error)}})}function ae(R){var B=new FileReader,V=ce(B);return B.readAsArrayBuffer(R),V}function ye(R){var B=new FileReader,V=ce(B);return B.readAsText(R),V}function $e(R){for(var B=new Uint8Array(R),V=new Array(B.length),Q=0;Q<B.length;Q++)V[Q]=String.fromCharCode(B[Q]);return V.join("")}function _e(R){if(R.slice)return R.slice(0);var B=new Uint8Array(R.byteLength);return B.set(new Uint8Array(R)),B.buffer}function be(){return this.bodyUsed=!1,this._initBody=function(R){this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:C.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:C.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:C.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():C.arrayBuffer&&C.blob&&F(R)?(this._bodyArrayBuffer=_e(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):C.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||J(R))?this._bodyArrayBuffer=_e(R):this._bodyText=R=Object.prototype.toString.call(R):this._bodyText="",this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):C.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},C.blob&&(this.blob=function(){var R=ne(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ne(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}),this.text=function(){var R=ne(this);if(R)return R;if(this._bodyBlob)return ye(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($e(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},C.formData&&(this.formData=function(){return this.text().then(we)}),this.json=function(){return this.text().then(JSON.parse)},this}var xe=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ee(R){var B=R.toUpperCase();return xe.indexOf(B)>-1?B:R}function he(R,B){B=B||{};var V=B.body;if(R instanceof he){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,B.headers||(this.headers=new ue(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!V&&R._bodyInit!=null&&(V=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=B.credentials||this.credentials||"same-origin",(B.headers||!this.headers)&&(this.headers=new ue(B.headers)),this.method=ee(B.method||this.method||"GET"),this.mode=B.mode||this.mode||null,this.signal=B.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(V)}he.prototype.clone=function(){return new he(this,{body:this._bodyInit})};function we(R){var B=new FormData;return R.trim().split("&").forEach(function(V){if(V){var Q=V.split("="),H=Q.shift().replace(/\+/g," "),j=Q.join("=").replace(/\+/g," ");B.append(decodeURIComponent(H),decodeURIComponent(j))}}),B}function Ne(R){var B=new ue,V=R.replace(/\r?\n[\t ]+/g," ");return V.split(/\r?\n/).forEach(function(Q){var H=Q.split(":"),j=H.shift().trim();if(j){var L=H.join(":").trim();B.append(j,L)}}),B}be.call(he.prototype);function pe(R,B){B||(B={}),this.type="default",this.status=B.status===void 0?200:B.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in B?B.statusText:"OK",this.headers=new ue(B.headers),this.url=B.url||"",this._initBody(R)}be.call(pe.prototype),pe.prototype.clone=function(){return new pe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ue(this.headers),url:this.url})},pe.error=function(){var R=new pe(null,{status:0,statusText:""});return R.type="error",R};var te=[301,302,303,307,308];pe.redirect=function(R,B){if(te.indexOf(B)===-1)throw new RangeError("Invalid status code");return new pe(null,{status:B,headers:{location:R}})},N.DOMException=T.DOMException;try{new N.DOMException}catch{N.DOMException=function(B,V){this.message=B,this.name=V;var Q=Error(B);this.stack=Q.stack},N.DOMException.prototype=Object.create(Error.prototype),N.DOMException.prototype.constructor=N.DOMException}function Y(R,B){return new Promise(function(V,Q){var H=new he(R,B);if(H.signal&&H.signal.aborted)return Q(new N.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function L(){j.abort()}j.onload=function(){var q={status:j.status,statusText:j.statusText,headers:Ne(j.getAllResponseHeaders()||"")};q.url="responseURL"in j?j.responseURL:q.headers.get("X-Request-URL");var U="response"in j?j.response:j.responseText;V(new pe(U,q))},j.onerror=function(){Q(new TypeError("Network request failed"))},j.ontimeout=function(){Q(new TypeError("Network request failed"))},j.onabort=function(){Q(new N.DOMException("Aborted","AbortError"))},j.open(H.method,H.url,!0),H.credentials==="include"?j.withCredentials=!0:H.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&C.blob&&(j.responseType="blob"),H.headers.forEach(function(q,U){j.setRequestHeader(U,q)}),H.signal&&(H.signal.addEventListener("abort",L),j.onreadystatechange=function(){j.readyState===4&&H.signal.removeEventListener("abort",L)}),j.send(typeof H._bodyInit=="undefined"?null:H._bodyInit)})}return Y.polyfill=!0,T.fetch||(T.fetch=Y,T.Headers=ue,T.Request=he,T.Response=pe),N.Headers=ue,N.Request=he,N.Response=pe,N.fetch=Y,Object.defineProperty(N,"__esModule",{value:!0}),N})({})})(w),w.fetch.ponyfill=!0,delete w.fetch.polyfill;var $=w;e=$.fetch,e.default=$.fetch,e.fetch=$.fetch,e.Headers=$.Headers,e.Request=$.Request,e.Response=$.Response,t.exports=e})(browserPonyfill,browserPonyfill.exports);var __importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(httpUtils,"__esModule",{value:!0});httpUtils.fetchJson=void 0;const cross_fetch_1$1=__importDefault$9(browserPonyfill.exports);async function fetchJson$1(t,e={}){e.body&&Object.assign(e,{body:JSON.stringify(e.body),headers:{"Content-Type":"application/json"}});const b=await cross_fetch_1$1.default(t,e);if(!b.ok){const w=await b.text();throw new Error(`HTTP request to '${t}' failed with status '${b.statusText}': ${w}`)}return b.json()}httpUtils.fetchJson=fetchJson$1;var streamUtils={},__createBinding$8=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$8=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$8=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$8(e,t,b);return __setModuleDefault$8(e,t),e},__importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(streamUtils,"__esModule",{value:!0});streamUtils.StreamUtils=void 0;const cids_1$2=__importDefault$8(src$3),lodash_clonedeep_1=__importDefault$8(lodash_clonedeep.exports),u8a$6=__importStar$8(uint8arrays$7),stream_1=stream$2,streamid_1$6=lib$4;class StreamUtils{static streamIdFromState(e){return new streamid_1$6.StreamID(e.type,e.log[0].cid)}static serializeCommit(e){const b=lodash_clonedeep_1.default(e);return StreamUtils.isSignedCommitContainer(b)?(b.jws.link=b.jws.link.toString(),b.linkedBlock=u8a$6.toString(b.linkedBlock,"base64"),b):(StreamUtils.isSignedCommit(e)&&(b.link=b.link.toString()),StreamUtils.isAnchorCommit(e)&&(b.proof=b.proof.toString()),b.id&&(b.id=b.id.toString()),b.prev&&(b.prev=b.prev.toString()),b)}static deserializeCommit(e){const b=lodash_clonedeep_1.default(e);return StreamUtils.isSignedCommitContainer(b)?(b.jws.link=new cids_1$2.default(b.jws.link),b.linkedBlock=u8a$6.fromString(b.linkedBlock,"base64"),b):(StreamUtils.isSignedCommit(b)&&(b.link=new cids_1$2.default(b.link)),StreamUtils.isAnchorCommit(b)&&(b.proof=new cids_1$2.default(b.proof)),b.id&&(b.id=new cids_1$2.default(b.id)),b.prev&&(b.prev=new cids_1$2.default(b.prev)),b)}static serializeState(e){const b=lodash_clonedeep_1.default(e);return b.log=b.log.map(w=>gr(Tt({},w),{cid:w.cid.toString()})),b.anchorStatus!=null&&(b.anchorStatus=stream_1.AnchorStatus[b.anchorStatus]),b.anchorScheduledFor!=null&&(b.anchorScheduledFor=new Date(b.anchorScheduledFor).toISOString()),b.anchorProof!=null&&(b.anchorProof.txHash=b.anchorProof.txHash.toString(),b.anchorProof.root=b.anchorProof.root.toString()),b.lastAnchored!=null&&(b.lastAnchored=b.lastAnchored.toString()),b.doctype=streamid_1$6.StreamType.nameByCode(b.type),b}static deserializeState(e){const b=lodash_clonedeep_1.default(e);b.doctype&&(b.type=streamid_1$6.StreamType.codeByName(b.doctype),delete b.doctype),b.log=b.log.map($=>gr(Tt({},$),{cid:new cids_1$2.default($.cid)})),b.anchorProof&&(b.anchorProof.txHash=new cids_1$2.default(b.anchorProof.txHash),b.anchorProof.root=new cids_1$2.default(b.anchorProof.root));let w=!0;return b.anchorStatus&&(b.anchorStatus=stream_1.AnchorStatus[b.anchorStatus],w=b.anchorStatus!==stream_1.AnchorStatus.FAILED&&b.anchorStatus!==stream_1.AnchorStatus.ANCHORED),b.anchorScheduledFor&&(w?b.anchorScheduledFor=Date.parse(b.anchorScheduledFor):delete b.anchorScheduledFor),b.lastAnchored&&(b.lastAnchored=new cids_1$2.default(b.lastAnchored)),b}static statesEqual(e,b){return JSON.stringify(StreamUtils.serializeState(e))===JSON.stringify(StreamUtils.serializeState(b))}static isStateSupersetOf(e,b){if(e.log.length<b.log.length)return!1;for(const w in b.log)if(!e.log[w].cid.equals(b.log[w].cid))return!1;return!0}static async convertCommitToSignedCommitContainer(e,b){if(StreamUtils.isSignedCommit(e)){const w=await b.block.get(e.link);return{jws:e,linkedBlock:w.data}}return e}static isSignedCommitContainer(e){return e&&e.jws!==void 0}static isSignedCommit(e){return e&&e.link!==void 0}static isAnchorCommit(e){return e&&e.proof!==void 0}static isSignedCommitData(e){return e&&e.envelope!==void 0}static isAnchorCommitData(e){return e&&e.proof!==void 0}}streamUtils.StreamUtils=StreamUtils;var testUtils={};function partition$2(t,e){return function(b){return[filter$1(t,e)(b),filter$1(not$1(t,e))(b)]}}function race$2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return raceWith$1.apply(void 0,__spreadArray$1([],__read$1(argsOrArgArray$1(t))))}var operators$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",audit:audit$1,auditTime:auditTime$1,buffer:buffer$1,bufferCount:bufferCount$1,bufferTime:bufferTime$1,bufferToggle:bufferToggle$1,bufferWhen:bufferWhen$1,catchError:catchError$1,combineAll:combineAll$1,combineLatestAll:combineLatestAll$1,combineLatest:combineLatest$2,combineLatestWith:combineLatestWith$1,concat:concat$3,concatAll:concatAll$1,concatMap:concatMap$1,concatMapTo:concatMapTo$1,concatWith:concatWith$1,connect:connect$1,count:count$1,debounce:debounce$1,debounceTime:debounceTime$1,defaultIfEmpty:defaultIfEmpty$1,delay:delay$2,delayWhen:delayWhen$1,dematerialize:dematerialize$1,distinct:distinct$1,distinctUntilChanged:distinctUntilChanged$1,distinctUntilKeyChanged:distinctUntilKeyChanged$1,elementAt:elementAt$1,endWith:endWith$1,every:every$1,exhaust:exhaust$1,exhaustAll:exhaustAll$1,exhaustMap:exhaustMap$1,expand:expand$1,filter:filter$1,finalize:finalize$1,find:find$1,findIndex:findIndex$1,first:first$1,groupBy:groupBy$1,ignoreElements:ignoreElements$1,isEmpty:isEmpty$1,last:last$2,map:map$1,mapTo:mapTo$1,materialize:materialize$1,max:max$1,merge:merge$2,mergeAll:mergeAll$1,flatMap:flatMap$1,mergeMap:mergeMap$1,mergeMapTo:mergeMapTo$1,mergeScan:mergeScan$1,mergeWith:mergeWith$1,min:min$1,multicast:multicast$1,observeOn:observeOn$1,onErrorResumeNext:onErrorResumeNext$3,pairwise:pairwise$1,partition:partition$2,pluck:pluck$1,publish:publish$1,publishBehavior:publishBehavior$1,publishLast:publishLast$1,publishReplay:publishReplay$1,race:race$2,raceWith:raceWith$1,reduce:reduce$1,repeat:repeat$1,repeatWhen:repeatWhen$1,retry:retry$1,retryWhen:retryWhen$1,refCount:refCount$1,sample:sample$1,sampleTime:sampleTime$1,scan:scan$1,sequenceEqual:sequenceEqual$1,share:share$1,shareReplay:shareReplay$1,single:single$1,skip:skip$1,skipLast:skipLast$1,skipUntil:skipUntil$1,skipWhile:skipWhile$1,startWith:startWith$1,subscribeOn:subscribeOn$1,switchAll:switchAll$1,switchMap:switchMap$1,switchMapTo:switchMapTo$1,switchScan:switchScan$1,take:take$1,takeLast:takeLast$1,takeUntil:takeUntil$1,takeWhile:takeWhile$1,tap:tap$1,throttle:throttle$1,throttleTime:throttleTime$1,throwIfEmpty:throwIfEmpty$1,timeInterval:timeInterval$1,timeout:timeout$1,timeoutWith:timeoutWith$1,timestamp:timestamp$1,toArray:toArray$1,window:window$2,windowCount:windowCount$1,windowTime:windowTime$1,windowToggle:windowToggle$1,windowWhen:windowWhen$1,withLatestFrom:withLatestFrom$1,zip:zip$2,zipAll:zipAll$1,zipWith:zipWith$1}),require$$0$3=getAugmentedNamespace(operators$1);Object.defineProperty(testUtils,"__esModule",{value:!0});testUtils.TestUtils=void 0;const operators_1$1=require$$0$3,rxjs_1$2=require$$0$4,streamid_1$5=lib$4;class FakeRunningState extends rxjs_1$2.BehaviorSubject{constructor(e){super(e);this.state=this.value,this.id=new streamid_1$5.StreamID(this.state.type,this.state.log[0].cid)}}class TestUtils{static registerChangeListener(e){return e.pipe(operators_1$1.take(1)).toPromise()}static async waitForState(e,b,w,$){if(w(e.state))return;const T=new Promise(C=>setTimeout(C,b)),N=e.pipe(operators_1$1.filter(C=>w(C))).toPromise();await Promise.race([T,N]),w(e.state)||$()}static runningState(e){return new FakeRunningState(e)}}testUtils.TestUtils=TestUtils;var loggerProviderBrowser={},loggersBrowser={},loggerBase={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerProviderBase=t.ServiceLoggerBase=t.DiagnosticsLoggerBase=t.LogLevel=t.LogStyle=void 0;var e;(function(C){C.verbose="info",C.info="info",C.imp="imp",C.warn="warn",C.err="err"})(e=t.LogStyle||(t.LogStyle={}));var b;(function(C){C[C.verbose=0]="verbose",C[C.debug=1]="debug",C[C.important=2]="important",C[C.warn=3]="warn"})(b=t.LogLevel||(t.LogLevel={}));class w{constructor(F,G,J){this.logLevel=F,this.includeStackTrace=this.logLevel<=b.debug,this.logToFiles=G,this.fileLogger=J}write(F){this.debug(F)}verbose(F){this.logLevel>b.verbose||this.log(e.verbose,F)}debug(F){this.logLevel>b.debug||this.log(e.info,F)}imp(F){this.logLevel>b.important||this.log(e.imp,F)}warn(F){this.log(e.warn,F)}err(F){this.log(e.err,F)}log(F,G){throw new Error("Not implmented in base class")}}t.DiagnosticsLoggerBase=w;class ${constructor(F,G,J,Z){this.service=F,this.logLevel=G,this.logToFiles=J,this.stream=Z,this.logToConsole=this.logLevel<=b.debug}log(F){this.write(this.format(F))}write(F){F=`[${new Date().toUTCString()}] service=${this.service} ${F}`,this.logToConsole&&console.log(F)}format(F){throw new Error("Not implmented in base class")}}t.ServiceLoggerBase=$;const T={logLevel:b.important,logToFiles:!1};class N{constructor(F={},G){if(this.config={logLevel:F.logLevel!==void 0?F.logLevel:T.logLevel,logToFiles:F.logToFiles!==void 0?F.logToFiles:T.logToFiles,logDirectory:F.logDirectory},this._fileLoggerFactory=G,this.config.logToFiles&&!this._fileLoggerFactory)throw new Error("Must provide a FileLoggerFactory in order to log to files");this._diagnosticLogger=this._makeDiagnosticLogger()}_makeDiagnosticLogger(){throw new Error("Not implmented in base class")}getDiagnosticsLogger(){return this._diagnosticLogger}makeServiceLogger(F){throw new Error("Not implmented in base class")}}t.LoggerProviderBase=N})(loggerBase);var flat=flatten;flatten.flatten=flatten;flatten.unflatten=unflatten;function isBuffer(t){return t&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function keyIdentity(t){return t}function flatten(t,e){e=e||{};const b=e.delimiter||".",w=e.maxDepth,$=e.transformKey||keyIdentity,T={};function N(C,F,G){G=G||1,Object.keys(C).forEach(function(J){const Z=C[J],re=e.safe&&Array.isArray(Z),ie=Object.prototype.toString.call(Z),ue=isBuffer(Z),ne=ie==="[object Object]"||ie==="[object Array]",ce=F?F+b+$(J):$(J);if(!re&&!ue&&ne&&Object.keys(Z).length&&(!e.maxDepth||G<w))return N(Z,ce,G+1);T[ce]=Z})}return N(t),T}function unflatten(t,e){e=e||{};const b=e.delimiter||".",w=e.overwrite||!1,$=e.transformKey||keyIdentity,T={};if(isBuffer(t)||Object.prototype.toString.call(t)!=="[object Object]")return t;function C(J){const Z=Number(J);return isNaN(Z)||J.indexOf(".")!==-1||e.object?J:Z}function F(J,Z,re){return Object.keys(re).reduce(function(ie,ue){return ie[J+b+ue]=re[ue],ie},Z)}function G(J){const Z=Object.prototype.toString.call(J),re=Z==="[object Array]",ie=Z==="[object Object]";if(J){if(re)return!J.length;if(ie)return!Object.keys(J).length}else return!0}return t=Object.keys(t).reduce(function(J,Z){const re=Object.prototype.toString.call(t[Z]);return!(re==="[object Object]"||re==="[object Array]")||G(t[Z])?(J[Z]=t[Z],J):F(Z,J,flatten(t[Z],e))},{}),Object.keys(t).forEach(function(J){const Z=J.split(b).map($);let re=C(Z.shift()),ie=C(Z[0]),ue=T;for(;ie!==void 0;){if(re==="__proto__")return;const ne=Object.prototype.toString.call(ue[re]),ce=ne==="[object Object]"||ne==="[object Array]";if(!w&&!ce&&typeof ue[re]!="undefined")return;(w&&!ce||!w&&ue[re]==null)&&(ue[re]=typeof ie=="number"&&!e.object?[]:{}),ue=ue[re],Z.length>0&&(re=C(Z.shift()),ie=C(Z[0]))}ue[re]=unflatten(t[J],e)}),T}var __importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(loggersBrowser,"__esModule",{value:!0});loggersBrowser.ServiceLogger=loggersBrowser.DiagnosticsLogger=void 0;const logger_base_1$1=loggerBase,flat_1=__importDefault$7(flat),consoleLogger={info:console.log,imp:console.log,warn:console.warn,err:console.error};class DiagnosticsLogger extends logger_base_1$1.DiagnosticsLoggerBase{constructor(e){super(e,!1);this.logger=consoleLogger}log(e,b){this.logger[e](b)}}loggersBrowser.DiagnosticsLogger=DiagnosticsLogger;class ServiceLogger extends logger_base_1$1.ServiceLoggerBase{constructor(e,b){super(e,b,!1)}format(e){return JSON.stringify(flat_1.default(e))}}loggersBrowser.ServiceLogger=ServiceLogger;Object.defineProperty(loggerProviderBrowser,"__esModule",{value:!0});loggerProviderBrowser.LoggerProvider=void 0;const loggers_browser_1=loggersBrowser,logger_base_1=loggerBase;class LoggerProvider extends logger_base_1.LoggerProviderBase{_makeDiagnosticLogger(){return new loggers_browser_1.DiagnosticsLogger(this.config.logLevel)}makeServiceLogger(e){return new loggers_browser_1.ServiceLogger(e,this.config.logLevel)}}loggerProviderBrowser.LoggerProvider=LoggerProvider;var networks={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Networks=void 0,function(e){e.MAINNET="mainnet",e.ELP="elp",e.TESTNET_CLAY="testnet-clay",e.DEV_UNSTABLE="dev-unstable",e.LOCAL="local",e.INMEMORY="inmemory"}(t.Networks||(t.Networks={}))})(networks);var pinning={};Object.defineProperty(pinning,"__esModule",{value:!0});var unreachableCaseError={};Object.defineProperty(unreachableCaseError,"__esModule",{value:!0});unreachableCaseError.UnreachableCaseError=void 0;class UnreachableCaseError extends Error{constructor(e,b){super(`Unhandled ${JSON.stringify(e)}: ${b}`)}}unreachableCaseError.UnreachableCaseError=UnreachableCaseError;var runningStateLike={};Object.defineProperty(runningStateLike,"__esModule",{value:!0});var streamStateSubject={};Object.defineProperty(streamStateSubject,"__esModule",{value:!0});streamStateSubject.StreamStateSubject=void 0;const rxjs_1$1=require$$0$4,stream_utils_1=streamUtils;class StreamStateSubject extends rxjs_1$1.BehaviorSubject{next(e){const b=this.value;stream_utils_1.StreamUtils.statesEqual(b,e)||super.next(e)}}streamStateSubject.StreamStateSubject=StreamStateSubject;var subscriptionSet={};Object.defineProperty(subscriptionSet,"__esModule",{value:!0});subscriptionSet.SubscriptionSet=void 0;class SubscriptionSet{constructor(e=new Set){this.subscriptions=e}add(e){e.add(()=>{this.subscriptions.delete(e)}),this.subscriptions.add(e)}unsubscribe(){this.subscriptions.forEach(e=>e.unsubscribe())}}subscriptionSet.SubscriptionSet=SubscriptionSet;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(w,$,T,N){N===void 0&&(N=T),Object.defineProperty(w,N,{enumerable:!0,get:function(){return $[T]}})}:function(w,$,T,N){N===void 0&&(N=T),w[N]=$[T]}),b=commonjsGlobal&&commonjsGlobal.__exportStar||function(w,$){for(var T in w)T!=="default"&&!Object.prototype.hasOwnProperty.call($,T)&&e($,w,T)};Object.defineProperty(t,"__esModule",{value:!0}),b(anchorService,t),b(ceramicApi,t),b(context$2,t),b(streamopts,t),b(stream$2,t),b(httpUtils,t),b(streamUtils,t),b(testUtils,t),b(loggerProviderBrowser,t),b(loggersBrowser,t),b(networks,t),b(loggerBase,t),b(pinning,t),b(unreachableCaseError,t),b(runningStateLike,t),b(streamStateSubject,t),b(subscriptionSet,t)})(lib$5);var __createBinding$7=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$7=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__decorate$1=commonjsGlobal&&commonjsGlobal.__decorate||function(t,e,b,w){var $=arguments.length,T=$<3?e:w===null?w=Object.getOwnPropertyDescriptor(e,b):w,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(t,e,b,w);else for(var C=t.length-1;C>=0;C--)(N=t[C])&&(T=($<3?N(T):$>3?N(e,b,T):N(e,b))||T);return $>3&&T&&Object.defineProperty(e,b,T),T},__importStar$7=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$7(e,t,b);return __setModuleDefault$7(e,t),e},__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},TileDocument_1;Object.defineProperty(tileDocument,"__esModule",{value:!0});tileDocument.TileDocument=void 0;const fast_json_patch_1=__importDefault$6(duplex),uint8arrays=__importStar$7(uint8arrays$7),random_1$1=random,common_1$4=lib$5,streamid_1$4=lib$4,DEFAULT_CREATE_OPTS$1={anchor:!0,publish:!0,sync:common_1$4.SyncOptions.PREFER_CACHE},DEFAULT_LOAD_OPTS$1={sync:common_1$4.SyncOptions.PREFER_CACHE},DEFAULT_UPDATE_OPTS$1={anchor:!0,publish:!0,throwOnInvalidCommit:!0};function headerFromMetadata(t,e){var b,w;if(typeof(t==null?void 0:t.schema)=="string")try{streamid_1$4.CommitID.fromString(t.schema)}catch{throw new Error("Schema must be a CommitID")}const $={controllers:t==null?void 0:t.controllers,family:t==null?void 0:t.family,schema:(b=t==null?void 0:t.schema)===null||b===void 0?void 0:b.toString(),tags:t==null?void 0:t.tags};if(e)(t==null?void 0:t.deterministic)||($.unique=uint8arrays.toString(random_1$1.randomBytes(12),"base64")),(t==null?void 0:t.forbidControllerChange)&&($.forbidControllerChange=!0);else{if((t==null?void 0:t.deterministic)!==void 0||((w=t)===null||w===void 0?void 0:w.unique)!==void 0)throw new Error("Cannot change 'deterministic' or 'unique' properties on existing Streams");if((t==null?void 0:t.forbidControllerChange)!==void 0)throw new Error("Cannot change 'forbidControllerChange' property on existing Streams")}return Object.keys($).forEach(T=>$[T]===void 0&&delete $[T]),$}async function _ensureAuthenticated(t){if(t.did==null)throw new Error("No DID provided");t.did.authenticated||(await t.did.authenticate(),t.loggerProvider&&t.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${t.did.id}`))}async function _signDagJWS(t,e){return await _ensureAuthenticated(t),t.did.createDagJWS(e)}async function throwReadOnlyError$1(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}let TileDocument=TileDocument_1=class extends common_1$4.Stream{constructor(){super(...arguments);this._isReadOnly=!1}get content(){return super.content}static async create(e,b,w,$={}){$=Tt(Tt({},DEFAULT_CREATE_OPTS$1),$),!(w==null?void 0:w.deterministic)&&$.syncTimeoutSeconds==null&&($.syncTimeoutSeconds=0);const T=await TileDocument_1.makeGenesis(e,b,w);return e.createStreamFromGenesis(TileDocument_1.STREAM_TYPE_ID,T,$)}static async createFromGenesis(e,b,w={}){var $;w=Tt(Tt({},DEFAULT_CREATE_OPTS$1),w),(($=b.header)===null||$===void 0?void 0:$.unique)&&w.syncTimeoutSeconds==null&&(w.syncTimeoutSeconds=0);const T=b.data?await _signDagJWS(e,b):b;return e.createStreamFromGenesis(TileDocument_1.STREAM_TYPE_ID,T,w)}static async load(e,b,w={}){w=Tt(Tt({},DEFAULT_LOAD_OPTS$1),w);const $=streamid_1$4.StreamRef.from(b);if($.type!=TileDocument_1.STREAM_TYPE_ID)throw new Error(`StreamID ${$.toString()} does not refer to a '${TileDocument_1.STREAM_TYPE_NAME}' stream, but to a ${$.typeName}`);return e.loadStream($,w)}async update(e,b,w={}){w=Tt(Tt({},DEFAULT_UPDATE_OPTS$1),w);const $=await this.makeCommit(this.api,e,b),T=await this.api.applyCommit(this.id,$,w);this.state$.next(T.state)}async patch(e,b={}){b=Tt(Tt({},DEFAULT_UPDATE_OPTS$1),b);const $={header:headerFromMetadata(this.metadata,!1),data:e,prev:this.tip,id:this.state$.id.cid},T=await _signDagJWS(this.api,$),N=await this.api.applyCommit(this.id,T,b);this.state$.next(N.state)}makeReadOnly(){this.update=throwReadOnlyError$1,this.patch=throwReadOnlyError$1,this.sync=throwReadOnlyError$1,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}async makeCommit(e,b,w){var $;const T=headerFromMetadata(w,!1);if(b==null&&(b=this.content),T.controllers&&(($=T.controllers)===null||$===void 0?void 0:$.length)!==1)throw new Error("Exactly one controller must be specified");const N=fast_json_patch_1.default.compare(this.content,b),C={header:T,data:N,prev:this.tip,id:this.state.log[0].cid};return _signDagJWS(e,C)}static async makeGenesis(e,b,w){var $;if(w||(w={}),!w.controllers||w.controllers.length===0)if(e.did)await _ensureAuthenticated(e),w.controllers=[e.did.id];else throw new Error("No controllers specified");if((($=w.controllers)===null||$===void 0?void 0:$.length)!==1)throw new Error("Exactly one controller must be specified");const T=headerFromMetadata(w,!0);if((w==null?void 0:w.deterministic)&&b)throw new Error("Initial content must be null when creating a deterministic Tile document");return b==null?{header:T}:await _signDagJWS(e,{data:b,header:T})}};TileDocument.STREAM_TYPE_NAME="tile";TileDocument.STREAM_TYPE_ID=0;TileDocument=TileDocument_1=__decorate$1([common_1$4.StreamStatic()],TileDocument);tileDocument.TileDocument=TileDocument;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(w,$,T,N){N===void 0&&(N=T),Object.defineProperty(w,N,{enumerable:!0,get:function(){return $[T]}})}:function(w,$,T,N){N===void 0&&(N=T),w[N]=$[T]}),b=commonjsGlobal&&commonjsGlobal.__exportStar||function(w,$){for(var T in w)T!=="default"&&!Object.prototype.hasOwnProperty.call($,T)&&e($,w,T)};Object.defineProperty(t,"__esModule",{value:!0}),b(tileDocument,t)})(lib$6);var legacyResolver={},lru={exports:{}};(function(t,e){(function(b,w){w(e)})(commonjsGlobal,function(b){const w=Symbol("newer"),$=Symbol("older");class T{constructor(Z,re){typeof Z!="number"&&(re=Z,Z=0),this.size=0,this.limit=Z,this.oldest=this.newest=void 0,this._keymap=new Map,re&&(this.assign(re),Z<1&&(this.limit=this.size))}_markEntryAsUsed(Z){Z!==this.newest&&(Z[w]&&(Z===this.oldest&&(this.oldest=Z[w]),Z[w][$]=Z[$]),Z[$]&&(Z[$][w]=Z[w]),Z[w]=void 0,Z[$]=this.newest,this.newest&&(this.newest[w]=Z),this.newest=Z)}assign(Z){let re,ie=this.limit||Number.MAX_VALUE;this._keymap.clear();let ue=Z[Symbol.iterator]();for(let ne=ue.next();!ne.done;ne=ue.next()){let ce=new N(ne.value[0],ne.value[1]);if(this._keymap.set(ce.key,ce),re?(re[w]=ce,ce[$]=re):this.oldest=ce,re=ce,ie--==0)throw new Error("overflow")}this.newest=re,this.size=this._keymap.size}get(Z){var re=this._keymap.get(Z);return re?(this._markEntryAsUsed(re),re.value):void 0}set(Z,re){var ie=this._keymap.get(Z);return ie?(ie.value=re,this._markEntryAsUsed(ie),this):(this._keymap.set(Z,ie=new N(Z,re)),this.newest?(this.newest[w]=ie,ie[$]=this.newest):this.oldest=ie,this.newest=ie,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var Z=this.oldest;if(Z)return this.oldest[w]?(this.oldest=this.oldest[w],this.oldest[$]=void 0):(this.oldest=void 0,this.newest=void 0),Z[w]=Z[$]=void 0,this._keymap.delete(Z.key),--this.size,[Z.key,Z.value]}find(Z){let re=this._keymap.get(Z);return re?re.value:void 0}has(Z){return this._keymap.has(Z)}delete(Z){var re=this._keymap.get(Z);return re?(this._keymap.delete(re.key),re[w]&&re[$]?(re[$][w]=re[w],re[w][$]=re[$]):re[w]?(re[w][$]=void 0,this.oldest=re[w]):re[$]?(re[$][w]=void 0,this.newest=re[$]):this.oldest=this.newest=void 0,this.size--,re.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new F(this.oldest)}values(){return new G(this.oldest)}entries(){return this}[Symbol.iterator](){return new C(this.oldest)}forEach(Z,re){typeof re!="object"&&(re=this);let ie=this.oldest;for(;ie;)Z.call(re,ie.value,ie.key,this),ie=ie[w]}toJSON(){for(var Z=new Array(this.size),re=0,ie=this.oldest;ie;)Z[re++]={key:ie.key,value:ie.value},ie=ie[w];return Z}toString(){for(var Z="",re=this.oldest;re;)Z+=String(re.key)+":"+re.value,re=re[w],re&&(Z+=" < ");return Z}}b.LRUMap=T;function N(J,Z){this.key=J,this.value=Z,this[w]=void 0,this[$]=void 0}function C(J){this.entry=J}C.prototype[Symbol.iterator]=function(){return this},C.prototype.next=function(){let J=this.entry;return J?(this.entry=J[w],{done:!1,value:[J.key,J.value]}):{done:!0,value:void 0}};function F(J){this.entry=J}F.prototype[Symbol.iterator]=function(){return this},F.prototype.next=function(){let J=this.entry;return J?(this.entry=J[w],{done:!1,value:J.key}):{done:!0,value:void 0}};function G(J){this.entry=J}G.prototype[Symbol.iterator]=function(){return this},G.prototype.next=function(){let J=this.entry;return J?(this.entry=J[w],{done:!1,value:J.value}):{done:!0,value:void 0}}})})(lru,lru.exports);var __createBinding$6=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$6=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$6=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$6(e,t,b);return __setModuleDefault$6(e,t),e},__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(legacyResolver,"__esModule",{value:!0});const cross_fetch_1=__importDefault$5(browserPonyfill.exports),u8a$5=__importStar$6(uint8arrays$7),lru_map_1=lru.exports,THREEBOX_API_URL="https://ipfs.3box.io",LIMIT=100,fetchCache=new lru_map_1.LRUMap(LIMIT),fetchJson=async t=>{const e=fetchCache.get(t);if(e)return e;const b=await cross_fetch_1.default(t);if(b.ok){const w=await b.json();return fetchCache.set(t,w),w}else throw new Error("Not a valid 3ID")},didDocReq=t=>`${THREEBOX_API_URL}/did-doc?cid=${encodeURIComponent(t)}`,ipfsMock={dag:{get:async t=>fetchJson(didDocReq(t))}},encodeKey$1=(t,e)=>{const b=new Uint8Array(t.length+2);return e?b[0]=236:b[0]=231,b[1]=1,b.set(t,2),`z${u8a$5.toString(b,"base58btc")}`},compressKey=t=>{const e=t.slice(2,66);return`${(t.slice(66,130)&1)==0?"02":"03"}${e}`},LegacyResolver=async(t,e=ipfsMock)=>{const b=(await e.dag.get(t)).value;let w,$;try{const F=b.publicKey.findIndex(J=>J.id.endsWith("signingKey")),G=b.publicKey.findIndex(J=>J.id.endsWith("encryptionKey"));w=b.publicKey[F].publicKeyHex,$=b.publicKey[G].publicKeyBase64}catch{throw new Error("Not a valid 3ID")}const T=compressKey(w),N=encodeKey$1(u8a$5.fromString(T,"base16")),C=encodeKey$1(u8a$5.fromString($,"base64pad"),!0);return{keyDid:`did:key:${N}`,publicKeys:{[N.slice(-15)]:N,[C.slice(-15)]:C}}};legacyResolver.default=LegacyResolver;var errorRepresentation={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withResolutionError=t.errorRepresentation=void 0;const e=w=>({didResolutionMetadata:w,didDocument:null,didDocumentMetadata:{}});t.errorRepresentation=e;const b=w=>w().catch($=>t.errorRepresentation({error:"invalidDid",message:$.toString()}));t.withResolutionError=b})(errorRepresentation);var __createBinding$5=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$5=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$5=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$5(e,t,b);return __setModuleDefault$5(e,t),e},__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lib$7,"__esModule",{value:!0});var getResolver_1$1=lib$7.getResolver=lib$7.wrapDocument=void 0;const stream_tile_1=lib$6,legacyResolver_1=__importDefault$4(legacyResolver),u8a$4=__importStar$5(uint8arrays$7),streamid_1$3=lib$4,cids_1$1=__importDefault$4(src$3),error_representation_1=errorRepresentation,common_1$3=lib$5,DID_LD_JSON$1="application/did+ld+json",DID_JSON$2="application/did+json",isLegacyDid=t=>{try{return new cids_1$1.default(t),!0}catch{return!1}},formatTime=t=>new Date(t*1e3).toISOString().split(".")[0]+"Z";function wrapDocument(t,e){if(!(t&&t.publicKeys))return null;const b={id:e,verificationMethod:[],authentication:[],keyAgreement:[]};return Object.entries(t.publicKeys).reduce((w,[$,T])=>{const N=u8a$4.fromString(T.slice(1),"base58btc"),C={id:`${e}#${$}`,type:"",controller:e,publicKeyBase58:u8a$4.toString(N.slice(2),"base58btc")};return N[0]===231?(C.type="EcdsaSecp256k1Signature2019",w.verificationMethod.push(C),w.authentication.push(C)):N[0]===236&&(C.type="X25519KeyAgreementKey2019",w.verificationMethod.push(C),w.keyAgreement.push(C)),w},b)}lib$7.wrapDocument=wrapDocument;function lastAnchorOrGenesisEntry(t){for(let e=t.length-1;e>=0;e--){const b=t[e];if(b.type===common_1$3.CommitType.ANCHOR)return b}return t[0]}function extractMetadata(t,e){const b={},{timestamp:w,cid:$}=lastAnchorOrGenesisEntry(t.log),{timestamp:T,cid:N}=e.log.find(({timestamp:C})=>C>w||!w&&C)||{};return w&&(b.updated=formatTime(w)),T&&(b.nextUpdate=formatTime(T)),$&&(b.versionId=t.log.length===1?"0":$==null?void 0:$.toString()),N&&(b.nextVersionId=N.toString()),b}function getVersionInfo(t=""){const e=t.split("&").find(w=>w.includes("versionId")||w.includes("version-id")),b=t.split("&").find(w=>w.includes("versionTime"));return{commit:e?e.split("=")[1]:void 0,timestamp:b?Math.floor(new Date(b.split("=")[1]).getTime()/1e3):void 0}}const legacyResolve=async(t,e,b)=>{const w=await legacyResolver_1.default(e),$={controllers:[w.keyDid],family:"3id",deterministic:!0},T=(await stream_tile_1.TileDocument.create(t,null,$,{anchor:!1,publish:!1})).id,N=await resolve(t,T.toString(),b,e);return N.didDocument===null&&(N.didDocument=wrapDocument(w,`did:3:${e}`)),N},resolve=async(t,e,b,w)=>{var $;const T=streamid_1$3.StreamID.fromString(e);let N;const C=[{streamId:T}];b.commit?(N=T.atCommit(b.commit),C.push({streamId:N})):b.timestamp&&C.push({streamId:T,atTime:b.timestamp});const F=await t.multiQuery(C),G=F[e].state,J=(N==null?void 0:N.toString())||Object.keys(F).find(ce=>ce!==e),Z=(($=F[J])===null||$===void 0?void 0:$.state)||G,re=extractMetadata(Z,G),ie=F[J||e];if(J&&!ie)throw new Error(`No resolution for commit ${J}`);const ue=ie.state.content,ne=wrapDocument(ue,`did:3:${w||e}`);return{didResolutionMetadata:{contentType:DID_JSON$2},didDocument:ne,didDocumentMetadata:re}};function getResolver$1(t){return{"3":(e,b,w,$)=>error_representation_1.withResolutionError(async()=>{const T=$.accept||DID_JSON$2,N=getVersionInfo(b.query),C=b.id,F=()=>isLegacyDid(C)?legacyResolve(t,C,N):resolve(t,C,N);switch(T){case DID_JSON$2:return F();case DID_LD_JSON$1:{const G=await F();return G.didDocument["@context"]="https://www.w3.org/ns/did/v1",G.didResolutionMetadata.contentType=DID_LD_JSON$1,G}default:return error_representation_1.errorRepresentation({error:"representationNotSupported"})}})}}getResolver_1$1=lib$7.getResolver=getResolver$1;lib$7.default={getResolver:getResolver$1};var ceramicHttpClient={},utils$e={},__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(utils$e,"__esModule",{value:!0});utils$e.delay=utils$e.combineURLs=utils$e.typeStreamID=void 0;const streamid_1$2=__importDefault$3(lib$4);function typeStreamID(t){return typeof t=="string"?streamid_1$2.default.fromString(t):t}utils$e.typeStreamID=typeStreamID;function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}utils$e.combineURLs=combineURLs;async function delay$1(t){await new Promise(e=>setTimeout(()=>e(),t))}utils$e.delay=delay$1;var document$1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var $ in w)Object.prototype.hasOwnProperty.call(w,$)&&(b[$]=w[$])},extendStatics(t,e)};function __extends(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(t,e);function b(){this.constructor=t}t.prototype=e===null?Object.create(e):(b.prototype=e.prototype,new b)}function __awaiter$2(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})}function __generator(t,e){var b={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},w,$,T,N;return N={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function C(G){return function(J){return F([G,J])}}function F(G){if(w)throw new TypeError("Generator is already executing.");for(;b;)try{if(w=1,$&&(T=G[0]&2?$.return:G[0]?$.throw||((T=$.return)&&T.call($),0):$.next)&&!(T=T.call($,G[1])).done)return T;switch($=0,T&&(G=[G[0]&2,T.value]),G[0]){case 0:case 1:T=G;break;case 4:return b.label++,{value:G[1],done:!1};case 5:b.label++,$=G[1],G=[0];continue;case 7:G=b.ops.pop(),b.trys.pop();continue;default:if(T=b.trys,!(T=T.length>0&&T[T.length-1])&&(G[0]===6||G[0]===2)){b=0;continue}if(G[0]===3&&(!T||G[1]>T[0]&&G[1]<T[3])){b.label=G[1];break}if(G[0]===6&&b.label<T[1]){b.label=T[1],T=G;break}if(T&&b.label<T[2]){b.label=T[2],b.ops.push(G);break}T[2]&&b.ops.pop(),b.trys.pop();continue}G=e.call(t,b)}catch(J){G=[6,J],$=0}finally{w=T=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}}function __values(t){var e=typeof Symbol=="function"&&Symbol.iterator,b=e&&t[e],w=0;if(b)return b.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&w>=t.length&&(t=void 0),{value:t&&t[w++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,e){var b=typeof Symbol=="function"&&t[Symbol.iterator];if(!b)return t;var w=b.call(t),$,T=[],N;try{for(;(e===void 0||e-- >0)&&!($=w.next()).done;)T.push($.value)}catch(C){N={error:C}}finally{try{$&&!$.done&&(b=w.return)&&b.call(w)}finally{if(N)throw N.error}}return T}function __spreadArray(t,e){for(var b=0,w=e.length,$=t.length;b<w;b++,$++)t[$]=e[b];return t}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var w=b.apply(t,e||[]),$,T=[];return $={},N("next"),N("throw"),N("return"),$[Symbol.asyncIterator]=function(){return this},$;function N(re){w[re]&&($[re]=function(ie){return new Promise(function(ue,ne){T.push([re,ie,ue,ne])>1||C(re,ie)})})}function C(re,ie){try{F(w[re](ie))}catch(ue){Z(T[0][3],ue)}}function F(re){re.value instanceof __await?Promise.resolve(re.value.v).then(G,J):Z(T[0][2],re)}function G(re){C("next",re)}function J(re){C("throw",re)}function Z(re,ie){re(ie),T.shift(),T.length&&C(T[0][0],T[0][1])}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],b;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),b={},w("next"),w("throw"),w("return"),b[Symbol.asyncIterator]=function(){return this},b);function w(T){b[T]=t[T]&&function(N){return new Promise(function(C,F){N=t[T](N),$(C,F,N.done,N.value)})}}function $(T,N,C,F){Promise.resolve(F).then(function(G){T({value:G,done:C})},N)}}function isFunction(t){return typeof t=="function"}function createErrorClass(t){var e=function(w){Error.call(w),w.stack=new Error().stack},b=t(e);return b.prototype=Object.create(Error.prototype),b.prototype.constructor=b,b}var UnsubscriptionError=createErrorClass(function(t){return function(b){t(this),this.message=b?b.length+` errors occurred during unsubscription:
`+b.map(function(w,$){return $+1+") "+w.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=b}});function arrRemove(t,e){if(t){var b=t.indexOf(e);0<=b&&t.splice(b,1)}}var Subscription=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}return t.prototype.unsubscribe=function(){var e,b,w,$,T;if(!this.closed){this.closed=!0;var N=this._parentage;if(N)if(this._parentage=null,Array.isArray(N))try{for(var C=__values(N),F=C.next();!F.done;F=C.next()){var G=F.value;G.remove(this)}}catch(ne){e={error:ne}}finally{try{F&&!F.done&&(b=C.return)&&b.call(C)}finally{if(e)throw e.error}}else N.remove(this);var J=this.initialTeardown;if(isFunction(J))try{J()}catch(ne){T=ne instanceof UnsubscriptionError?ne.errors:[ne]}var Z=this._teardowns;if(Z){this._teardowns=null;try{for(var re=__values(Z),ie=re.next();!ie.done;ie=re.next()){var ue=ie.value;try{execTeardown(ue)}catch(ne){T=T!=null?T:[],ne instanceof UnsubscriptionError?T=__spreadArray(__spreadArray([],__read(T)),__read(ne.errors)):T.push(ne)}}}catch(ne){w={error:ne}}finally{try{ie&&!ie.done&&($=re.return)&&$.call(re)}finally{if(w)throw w.error}}}if(T)throw new UnsubscriptionError(T)}},t.prototype.add=function(e){var b;if(e&&e!==this)if(this.closed)execTeardown(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=(b=this._teardowns)!==null&&b!==void 0?b:[]).push(e)}},t.prototype._hasParent=function(e){var b=this._parentage;return b===e||Array.isArray(b)&&b.includes(e)},t.prototype._addParent=function(e){var b=this._parentage;this._parentage=Array.isArray(b)?(b.push(e),b):b?[b,e]:e},t.prototype._removeParent=function(e){var b=this._parentage;b===e?this._parentage=null:Array.isArray(b)&&arrRemove(b,e)},t.prototype.remove=function(e){var b=this._teardowns;b&&arrRemove(b,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(t){return t instanceof Subscription||t&&"closed"in t&&isFunction(t.remove)&&isFunction(t.add)&&isFunction(t.unsubscribe)}function execTeardown(t){isFunction(t)?t():t.unsubscribe()}var config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=timeoutProvider.delegate;return((b==null?void 0:b.setTimeout)||setTimeout).apply(void 0,__spreadArray([],__read(t)))},clearTimeout:function(t){var e=timeoutProvider.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function reportUnhandledError(t){timeoutProvider.setTimeout(function(){var e=config.onUnhandledError;if(e)e(t);else throw t})}function noop(){}var COMPLETE_NOTIFICATION=function(){return createNotification("C",void 0,void 0)}();function errorNotification(t){return createNotification("E",void 0,t)}function nextNotification(t){return createNotification("N",t,void 0)}function createNotification(t,e,b){return{kind:t,value:e,error:b}}var context=null;function errorContext(t){if(config.useDeprecatedSynchronousErrorHandling){var e=!context;if(e&&(context={errorThrown:!1,error:null}),t(),e){var b=context,w=b.errorThrown,$=b.error;if(context=null,w)throw $}}else t()}function captureError(t){config.useDeprecatedSynchronousErrorHandling&&context&&(context.errorThrown=!0,context.error=t)}var Subscriber=function(t){__extends(e,t);function e(b){var w=t.call(this)||this;return w.isStopped=!1,b?(w.destination=b,isSubscription(b)&&b.add(w)):w.destination=EMPTY_OBSERVER,w}return e.create=function(b,w,$){return new SafeSubscriber(b,w,$)},e.prototype.next=function(b){this.isStopped?handleStoppedNotification(nextNotification(b),this):this._next(b)},e.prototype.error=function(b){this.isStopped?handleStoppedNotification(errorNotification(b),this):(this.isStopped=!0,this._error(b))},e.prototype.complete=function(){this.isStopped?handleStoppedNotification(COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(b){this.destination.next(b)},e.prototype._error=function(b){try{this.destination.error(b)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Subscription),SafeSubscriber=function(t){__extends(e,t);function e(b,w,$){var T=t.call(this)||this,N;if(isFunction(b))N=b;else if(b){N=b.next,w=b.error,$=b.complete;var C;T&&config.useDeprecatedNextContext?(C=Object.create(b),C.unsubscribe=function(){return T.unsubscribe()}):C=b,N=N==null?void 0:N.bind(C),w=w==null?void 0:w.bind(C),$=$==null?void 0:$.bind(C)}return T.destination={next:N?wrapForErrorHandling(N):noop,error:wrapForErrorHandling(w!=null?w:defaultErrorHandler),complete:$?wrapForErrorHandling($):noop},T}return e}(Subscriber);function wrapForErrorHandling(t,e){return function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];try{t.apply(void 0,__spreadArray([],__read(b)))}catch($){config.useDeprecatedSynchronousErrorHandling?captureError($):reportUnhandledError($)}}}function defaultErrorHandler(t){throw t}function handleStoppedNotification(t,e){var b=config.onStoppedNotification;b&&timeoutProvider.setTimeout(function(){return b(t,e)})}var EMPTY_OBSERVER={closed:!0,next:noop,error:defaultErrorHandler,complete:noop},observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(t){return t}function pipe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pipeFromArray(t)}function pipeFromArray(t){return t.length===0?identity:t.length===1?t[0]:function(b){return t.reduce(function(w,$){return $(w)},b)}}var Observable=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var b=new t;return b.source=this,b.operator=e,b},t.prototype.subscribe=function(e,b,w){var $=this,T=isSubscriber(e)?e:new SafeSubscriber(e,b,w);return errorContext(function(){var N=$,C=N.operator,F=N.source;T.add(C?C.call(T,F):F?$._subscribe(T):$._trySubscribe(T))}),T},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(b){e.error(b)}},t.prototype.forEach=function(e,b){var w=this;return b=getPromiseCtor(b),new b(function($,T){var N;N=w.subscribe(function(C){try{e(C)}catch(F){T(F),N==null||N.unsubscribe()}},T,$)})},t.prototype._subscribe=function(e){var b;return(b=this.source)===null||b===void 0?void 0:b.subscribe(e)},t.prototype[observable]=function(){return this},t.prototype.pipe=function(){for(var e=[],b=0;b<arguments.length;b++)e[b]=arguments[b];return pipeFromArray(e)(this)},t.prototype.toPromise=function(e){var b=this;return e=getPromiseCtor(e),new e(function(w,$){var T;b.subscribe(function(N){return T=N},function(N){return $(N)},function(){return w(T)})})},t.create=function(e){return new t(e)},t}();function getPromiseCtor(t){var e;return(e=t!=null?t:config.Promise)!==null&&e!==void 0?e:Promise}function isObserver(t){return t&&isFunction(t.next)&&isFunction(t.error)&&isFunction(t.complete)}function isSubscriber(t){return t&&t instanceof Subscriber||isObserver(t)&&isSubscription(t)}function hasLift(t){return isFunction(t==null?void 0:t.lift)}function operate(t){return function(e){if(hasLift(e))return e.lift(function(b){try{return t(b,this)}catch(w){this.error(w)}});throw new TypeError("Unable to lift unknown Observable type")}}var OperatorSubscriber=function(t){__extends(e,t);function e(b,w,$,T,N){var C=t.call(this,b)||this;return C.onFinalize=N,C._next=w?function(F){try{w(F)}catch(G){b.error(G)}}:t.prototype._next,C._error=T?function(F){try{T(F)}catch(G){b.error(G)}finally{this.unsubscribe()}}:t.prototype._error,C._complete=$?function(){try{$()}catch(F){b.error(F)}finally{this.unsubscribe()}}:t.prototype._complete,C}return e.prototype.unsubscribe=function(){var b,w=this.closed;t.prototype.unsubscribe.call(this),!w&&((b=this.onFinalize)===null||b===void 0||b.call(this))},e}(Subscriber);function refCount(){return operate(function(t,e){var b=null;t._refCount++;var w=new OperatorSubscriber(e,void 0,void 0,void 0,function(){if(!t||t._refCount<=0||0<--t._refCount){b=null;return}var $=t._connection,T=b;b=null,$&&(!T||$===T)&&$.unsubscribe(),e.unsubscribe()});t.subscribe(w),w.closed||(b=t.connect())})}var ConnectableObservable=function(t){__extends(e,t);function e(b,w){var $=t.call(this)||this;return $.source=b,$.subjectFactory=w,$._subject=null,$._refCount=0,$._connection=null,hasLift(b)&&($.lift=b.lift),$}return e.prototype._subscribe=function(b){return this.getSubject().subscribe(b)},e.prototype.getSubject=function(){var b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var b=this._connection;this._subject=this._connection=null,b==null||b.unsubscribe()},e.prototype.connect=function(){var b=this,w=this._connection;if(!w){w=this._connection=new Subscription;var $=this.getSubject();w.add(this.source.subscribe(new OperatorSubscriber($,void 0,function(){b._teardown(),$.complete()},function(T){b._teardown(),$.error(T)},function(){return b._teardown()}))),w.closed&&(this._connection=null,w=Subscription.EMPTY)}return w},e.prototype.refCount=function(){return refCount()(this)},e}(Observable),performanceTimestampProvider={now:function(){return(performanceTimestampProvider.delegate||performance).now()},delegate:void 0},animationFrameProvider={schedule:function(t){var e=requestAnimationFrame,b=cancelAnimationFrame,w=animationFrameProvider.delegate;w&&(e=w.requestAnimationFrame,b=w.cancelAnimationFrame);var $=e(function(T){b=void 0,t(T)});return new Subscription(function(){return b==null?void 0:b($)})},requestAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=animationFrameProvider.delegate;return((b==null?void 0:b.requestAnimationFrame)||requestAnimationFrame).apply(void 0,__spreadArray([],__read(t)))},cancelAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=animationFrameProvider.delegate;return((b==null?void 0:b.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,__spreadArray([],__read(t)))},delegate:void 0};function animationFrames(t){return t?animationFramesFactory(t):DEFAULT_ANIMATION_FRAMES}function animationFramesFactory(t){var e=animationFrameProvider.schedule;return new Observable(function(b){var w=new Subscription,$=t||performanceTimestampProvider,T=$.now(),N=function(C){var F=$.now();b.next({timestamp:t?F:C,elapsed:F-T}),b.closed||w.add(e(N))};return w.add(e(N)),w})}var DEFAULT_ANIMATION_FRAMES=animationFramesFactory(),ObjectUnsubscribedError=createErrorClass(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(t){__extends(e,t);function e(){var b=t.call(this)||this;return b.closed=!1,b.observers=[],b.isStopped=!1,b.hasError=!1,b.thrownError=null,b}return e.prototype.lift=function(b){var w=new AnonymousSubject(this,this);return w.operator=b,w},e.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},e.prototype.next=function(b){var w=this;errorContext(function(){var $,T;if(w._throwIfClosed(),!w.isStopped){var N=w.observers.slice();try{for(var C=__values(N),F=C.next();!F.done;F=C.next()){var G=F.value;G.next(b)}}catch(J){$={error:J}}finally{try{F&&!F.done&&(T=C.return)&&T.call(C)}finally{if($)throw $.error}}}})},e.prototype.error=function(b){var w=this;errorContext(function(){if(w._throwIfClosed(),!w.isStopped){w.hasError=w.isStopped=!0,w.thrownError=b;for(var $=w.observers;$.length;)$.shift().error(b)}})},e.prototype.complete=function(){var b=this;errorContext(function(){if(b._throwIfClosed(),!b.isStopped){b.isStopped=!0;for(var w=b.observers;w.length;)w.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var b;return((b=this.observers)===null||b===void 0?void 0:b.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(b){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,b)},e.prototype._subscribe=function(b){return this._throwIfClosed(),this._checkFinalizedStatuses(b),this._innerSubscribe(b)},e.prototype._innerSubscribe=function(b){var w=this,$=w.hasError,T=w.isStopped,N=w.observers;return $||T?EMPTY_SUBSCRIPTION:(N.push(b),new Subscription(function(){return arrRemove(N,b)}))},e.prototype._checkFinalizedStatuses=function(b){var w=this,$=w.hasError,T=w.thrownError,N=w.isStopped;$?b.error(T):N&&b.complete()},e.prototype.asObservable=function(){var b=new Observable;return b.source=this,b},e.create=function(b,w){return new AnonymousSubject(b,w)},e}(Observable),AnonymousSubject=function(t){__extends(e,t);function e(b,w){var $=t.call(this)||this;return $.destination=b,$.source=w,$}return e.prototype.next=function(b){var w,$;($=(w=this.destination)===null||w===void 0?void 0:w.next)===null||$===void 0||$.call(w,b)},e.prototype.error=function(b){var w,$;($=(w=this.destination)===null||w===void 0?void 0:w.error)===null||$===void 0||$.call(w,b)},e.prototype.complete=function(){var b,w;(w=(b=this.destination)===null||b===void 0?void 0:b.complete)===null||w===void 0||w.call(b)},e.prototype._subscribe=function(b){var w,$;return($=(w=this.source)===null||w===void 0?void 0:w.subscribe(b))!==null&&$!==void 0?$:EMPTY_SUBSCRIPTION},e}(Subject),BehaviorSubject=function(t){__extends(e,t);function e(b){var w=t.call(this)||this;return w._value=b,w}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(b){var w=t.prototype._subscribe.call(this,b);return!w.closed&&b.next(this._value),w},e.prototype.getValue=function(){var b=this,w=b.hasError,$=b.thrownError,T=b._value;if(w)throw $;return this._throwIfClosed(),T},e.prototype.next=function(b){t.prototype.next.call(this,this._value=b)},e}(Subject),dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:void 0},ReplaySubject=function(t){__extends(e,t);function e(b,w,$){b===void 0&&(b=1/0),w===void 0&&(w=1/0),$===void 0&&($=dateTimestampProvider);var T=t.call(this)||this;return T._bufferSize=b,T._windowTime=w,T._timestampProvider=$,T._buffer=[],T._infiniteTimeWindow=!0,T._infiniteTimeWindow=w===1/0,T._bufferSize=Math.max(1,b),T._windowTime=Math.max(1,w),T}return e.prototype.next=function(b){var w=this,$=w.isStopped,T=w._buffer,N=w._infiniteTimeWindow,C=w._timestampProvider,F=w._windowTime;$||(T.push(b),!N&&T.push(C.now()+F)),this._trimBuffer(),t.prototype.next.call(this,b)},e.prototype._subscribe=function(b){this._throwIfClosed(),this._trimBuffer();for(var w=this._innerSubscribe(b),$=this,T=$._infiniteTimeWindow,N=$._buffer,C=N.slice(),F=0;F<C.length&&!b.closed;F+=T?1:2)b.next(C[F]);return this._checkFinalizedStatuses(b),w},e.prototype._trimBuffer=function(){var b=this,w=b._bufferSize,$=b._timestampProvider,T=b._buffer,N=b._infiniteTimeWindow,C=(N?1:2)*w;if(w<1/0&&C<T.length&&T.splice(0,T.length-C),!N){for(var F=$.now(),G=0,J=1;J<T.length&&T[J]<=F;J+=2)G=J;G&&T.splice(0,G+1)}},e}(Subject),AsyncSubject=function(t){__extends(e,t);function e(){var b=t!==null&&t.apply(this,arguments)||this;return b._value=null,b._hasValue=!1,b._isComplete=!1,b}return e.prototype._checkFinalizedStatuses=function(b){var w=this,$=w.hasError,T=w._hasValue,N=w._value,C=w.thrownError,F=w.isStopped,G=w._isComplete;$?b.error(C):(F||G)&&(T&&b.next(N),b.complete())},e.prototype.next=function(b){this.isStopped||(this._value=b,this._hasValue=!0)},e.prototype.complete=function(){var b=this,w=b._hasValue,$=b._value,T=b._isComplete;T||(this._isComplete=!0,w&&t.prototype.next.call(this,$),t.prototype.complete.call(this))},e}(Subject),Action=function(t){__extends(e,t);function e(b,w){return t.call(this)||this}return e.prototype.schedule=function(b,w){return this},e}(Subscription),intervalProvider={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=intervalProvider.delegate;return((b==null?void 0:b.setInterval)||setInterval).apply(void 0,__spreadArray([],__read(t)))},clearInterval:function(t){var e=intervalProvider.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},AsyncAction=function(t){__extends(e,t);function e(b,w){var $=t.call(this,b,w)||this;return $.scheduler=b,$.work=w,$.pending=!1,$}return e.prototype.schedule=function(b,w){if(w===void 0&&(w=0),this.closed)return this;this.state=b;var $=this.id,T=this.scheduler;return $!=null&&(this.id=this.recycleAsyncId(T,$,w)),this.pending=!0,this.delay=w,this.id=this.id||this.requestAsyncId(T,this.id,w),this},e.prototype.requestAsyncId=function(b,w,$){return $===void 0&&($=0),intervalProvider.setInterval(b.flush.bind(b,this),$)},e.prototype.recycleAsyncId=function(b,w,$){if($===void 0&&($=0),$!=null&&this.delay===$&&this.pending===!1)return w;intervalProvider.clearInterval(w)},e.prototype.execute=function(b,w){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var $=this._execute(b,w);if($)return $;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(b,w){var $=!1,T;try{this.work(b)}catch(N){$=!0,T=N||new Error("Scheduled action threw falsy error")}if($)return this.unsubscribe(),T},e.prototype.unsubscribe=function(){if(!this.closed){var b=this,w=b.id,$=b.scheduler,T=$.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove(T,this),w!=null&&(this.id=this.recycleAsyncId($,w,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Action),nextHandle=1,resolved,activeHandles={};function findAndClearHandle(t){return t in activeHandles?(delete activeHandles[t],!0):!1}var Immediate={setImmediate:function(t){var e=nextHandle++;return activeHandles[e]=!0,resolved||(resolved=Promise.resolve()),resolved.then(function(){return findAndClearHandle(e)&&t()}),e},clearImmediate:function(t){findAndClearHandle(t)}},setImmediate=Immediate.setImmediate,clearImmediate=Immediate.clearImmediate,immediateProvider={setImmediate:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=immediateProvider.delegate;return((b==null?void 0:b.setImmediate)||setImmediate).apply(void 0,__spreadArray([],__read(t)))},clearImmediate:function(t){var e=immediateProvider.delegate;return((e==null?void 0:e.clearImmediate)||clearImmediate)(t)},delegate:void 0},AsapAction=function(t){__extends(e,t);function e(b,w){var $=t.call(this,b,w)||this;return $.scheduler=b,$.work=w,$}return e.prototype.requestAsyncId=function(b,w,$){return $===void 0&&($=0),$!==null&&$>0?t.prototype.requestAsyncId.call(this,b,w,$):(b.actions.push(this),b._scheduled||(b._scheduled=immediateProvider.setImmediate(b.flush.bind(b,void 0))))},e.prototype.recycleAsyncId=function(b,w,$){if($===void 0&&($=0),$!=null&&$>0||$==null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,b,w,$);b.actions.length===0&&(immediateProvider.clearImmediate(w),b._scheduled=void 0)},e}(AsyncAction),Scheduler=function(){function t(e,b){b===void 0&&(b=t.now),this.schedulerActionCtor=e,this.now=b}return t.prototype.schedule=function(e,b,w){return b===void 0&&(b=0),new this.schedulerActionCtor(this,e).schedule(w,b)},t.now=dateTimestampProvider.now,t}(),AsyncScheduler=function(t){__extends(e,t);function e(b,w){w===void 0&&(w=Scheduler.now);var $=t.call(this,b,w)||this;return $.actions=[],$._active=!1,$._scheduled=void 0,$}return e.prototype.flush=function(b){var w=this.actions;if(this._active){w.push(b);return}var $;this._active=!0;do if($=b.execute(b.state,b.delay))break;while(b=w.shift());if(this._active=!1,$){for(;b=w.shift();)b.unsubscribe();throw $}},e}(Scheduler),AsapScheduler=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(b){this._active=!0,this._scheduled=void 0;var w=this.actions,$,T=-1;b=b||w.shift();var N=w.length;do if($=b.execute(b.state,b.delay))break;while(++T<N&&(b=w.shift()));if(this._active=!1,$){for(;++T<N&&(b=w.shift());)b.unsubscribe();throw $}},e}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler,QueueAction=function(t){__extends(e,t);function e(b,w){var $=t.call(this,b,w)||this;return $.scheduler=b,$.work=w,$}return e.prototype.schedule=function(b,w){return w===void 0&&(w=0),w>0?t.prototype.schedule.call(this,b,w):(this.delay=w,this.state=b,this.scheduler.flush(this),this)},e.prototype.execute=function(b,w){return w>0||this.closed?t.prototype.execute.call(this,b,w):this._execute(b,w)},e.prototype.requestAsyncId=function(b,w,$){return $===void 0&&($=0),$!=null&&$>0||$==null&&this.delay>0?t.prototype.requestAsyncId.call(this,b,w,$):b.flush(this)},e}(AsyncAction),QueueScheduler=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,AnimationFrameAction=function(t){__extends(e,t);function e(b,w){var $=t.call(this,b,w)||this;return $.scheduler=b,$.work=w,$}return e.prototype.requestAsyncId=function(b,w,$){return $===void 0&&($=0),$!==null&&$>0?t.prototype.requestAsyncId.call(this,b,w,$):(b.actions.push(this),b._scheduled||(b._scheduled=animationFrameProvider.requestAnimationFrame(function(){return b.flush(void 0)})))},e.prototype.recycleAsyncId=function(b,w,$){if($===void 0&&($=0),$!=null&&$>0||$==null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,b,w,$);b.actions.length===0&&(animationFrameProvider.cancelAnimationFrame(w),b._scheduled=void 0)},e}(AsyncAction),AnimationFrameScheduler=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(b){this._active=!0,this._scheduled=void 0;var w=this.actions,$,T=-1;b=b||w.shift();var N=w.length;do if($=b.execute(b.state,b.delay))break;while(++T<N&&(b=w.shift()));if(this._active=!1,$){for(;++T<N&&(b=w.shift());)b.unsubscribe();throw $}},e}(AsyncScheduler),animationFrameScheduler=new AnimationFrameScheduler(AnimationFrameAction),animationFrame=animationFrameScheduler,VirtualTimeScheduler=function(t){__extends(e,t);function e(b,w){b===void 0&&(b=VirtualAction),w===void 0&&(w=1/0);var $=t.call(this,b,function(){return $.frame})||this;return $.maxFrames=w,$.frame=0,$.index=-1,$}return e.prototype.flush=function(){for(var b=this,w=b.actions,$=b.maxFrames,T,N;(N=w[0])&&N.delay<=$&&(w.shift(),this.frame=N.delay,!(T=N.execute(N.state,N.delay))););if(T){for(;N=w.shift();)N.unsubscribe();throw T}},e.frameTimeFactor=10,e}(AsyncScheduler),VirtualAction=function(t){__extends(e,t);function e(b,w,$){$===void 0&&($=b.index+=1);var T=t.call(this,b,w)||this;return T.scheduler=b,T.work=w,T.index=$,T.active=!0,T.index=b.index=$,T}return e.prototype.schedule=function(b,w){if(w===void 0&&(w=0),Number.isFinite(w)){if(!this.id)return t.prototype.schedule.call(this,b,w);this.active=!1;var $=new e(this.scheduler,this.work);return this.add($),$.schedule(b,w)}else return Subscription.EMPTY},e.prototype.requestAsyncId=function(b,w,$){$===void 0&&($=0),this.delay=b.frame+$;var T=b.actions;return T.push(this),T.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(b,w,$){},e.prototype._execute=function(b,w){if(this.active===!0)return t.prototype._execute.call(this,b,w)},e.sortActions=function(b,w){return b.delay===w.delay?b.index===w.index?0:b.index>w.index?1:-1:b.delay>w.delay?1:-1},e}(AsyncAction),EMPTY=new Observable(function(t){return t.complete()});function empty(t){return t?emptyScheduled(t):EMPTY}function emptyScheduled(t){return new Observable(function(e){return t.schedule(function(){return e.complete()})})}function isScheduler(t){return t&&isFunction(t.schedule)}function last$1(t){return t[t.length-1]}function popResultSelector(t){return isFunction(last$1(t))?t.pop():void 0}function popScheduler(t){return isScheduler(last$1(t))?t.pop():void 0}function popNumber(t,e){return typeof last$1(t)=="number"?t.pop():e}var isArrayLike=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function isPromise(t){return isFunction(t==null?void 0:t.then)}function isInteropObservable(t){return isFunction(t[observable])}function isAsyncIterable(t){return Symbol.asyncIterator&&isFunction(t==null?void 0:t[Symbol.asyncIterator])}function createInvalidObservableTypeError(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator();function isIterable(t){return isFunction(t==null?void 0:t[iterator])}function readableStreamLikeToAsyncGenerator(t){return __asyncGenerator(this,arguments,function(){var b,w,$,T;return __generator(this,function(N){switch(N.label){case 0:b=t.getReader(),N.label=1;case 1:N.trys.push([1,,9,10]),N.label=2;case 2:return[4,__await(b.read())];case 3:return w=N.sent(),$=w.value,T=w.done,T?[4,__await(void 0)]:[3,5];case 4:return[2,N.sent()];case 5:return[4,__await($)];case 6:return[4,N.sent()];case 7:return N.sent(),[3,2];case 8:return[3,10];case 9:return b.releaseLock(),[7];case 10:return[2]}})})}function isReadableStreamLike(t){return isFunction(t==null?void 0:t.getReader)}function innerFrom(t){if(t instanceof Observable)return t;if(t!=null){if(isInteropObservable(t))return fromInteropObservable(t);if(isArrayLike(t))return fromArrayLike(t);if(isPromise(t))return fromPromise(t);if(isAsyncIterable(t))return fromAsyncIterable(t);if(isIterable(t))return fromIterable(t);if(isReadableStreamLike(t))return fromReadableStreamLike(t)}throw createInvalidObservableTypeError(t)}function fromInteropObservable(t){return new Observable(function(e){var b=t[observable]();if(isFunction(b.subscribe))return b.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike(t){return new Observable(function(e){for(var b=0;b<t.length&&!e.closed;b++)e.next(t[b]);e.complete()})}function fromPromise(t){return new Observable(function(e){t.then(function(b){e.closed||(e.next(b),e.complete())},function(b){return e.error(b)}).then(null,reportUnhandledError)})}function fromIterable(t){return new Observable(function(e){var b,w;try{for(var $=__values(t),T=$.next();!T.done;T=$.next()){var N=T.value;if(e.next(N),e.closed)return}}catch(C){b={error:C}}finally{try{T&&!T.done&&(w=$.return)&&w.call($)}finally{if(b)throw b.error}}e.complete()})}function fromAsyncIterable(t){return new Observable(function(e){process$1(t,e).catch(function(b){return e.error(b)})})}function fromReadableStreamLike(t){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(t))}function process$1(t,e){var b,w,$,T;return __awaiter$2(this,void 0,void 0,function(){var N,C;return __generator(this,function(F){switch(F.label){case 0:F.trys.push([0,5,6,11]),b=__asyncValues(t),F.label=1;case 1:return[4,b.next()];case 2:if(w=F.sent(),!!w.done)return[3,4];if(N=w.value,e.next(N),e.closed)return[2];F.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return C=F.sent(),$={error:C},[3,11];case 6:return F.trys.push([6,,9,10]),w&&!w.done&&(T=b.return)?[4,T.call(b)]:[3,8];case 7:F.sent(),F.label=8;case 8:return[3,10];case 9:if($)throw $.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function executeSchedule(t,e,b,w,$){w===void 0&&(w=0),$===void 0&&($=!1);var T=e.schedule(function(){b(),$?t.add(this.schedule(null,w)):this.unsubscribe()},w);if(t.add(T),!$)return T}function observeOn(t,e){return e===void 0&&(e=0),operate(function(b,w){b.subscribe(new OperatorSubscriber(w,function($){return executeSchedule(w,t,function(){return w.next($)},e)},function(){return executeSchedule(w,t,function(){return w.complete()},e)},function($){return executeSchedule(w,t,function(){return w.error($)},e)}))})}function subscribeOn(t,e){return e===void 0&&(e=0),operate(function(b,w){w.add(t.schedule(function(){return b.subscribe(w)},e))})}function scheduleObservable(t,e){return innerFrom(t).pipe(subscribeOn(e),observeOn(e))}function schedulePromise(t,e){return innerFrom(t).pipe(subscribeOn(e),observeOn(e))}function scheduleArray(t,e){return new Observable(function(b){var w=0;return e.schedule(function(){w===t.length?b.complete():(b.next(t[w++]),b.closed||this.schedule())})})}function scheduleIterable(t,e){return new Observable(function(b){var w;return executeSchedule(b,e,function(){w=t[iterator](),executeSchedule(b,e,function(){var $,T,N;try{$=w.next(),T=$.value,N=$.done}catch(C){b.error(C);return}N?b.complete():b.next(T)},0,!0)}),function(){return isFunction(w==null?void 0:w.return)&&w.return()}})}function scheduleAsyncIterable(t,e){if(!t)throw new Error("Iterable cannot be null");return new Observable(function(b){executeSchedule(b,e,function(){var w=t[Symbol.asyncIterator]();executeSchedule(b,e,function(){w.next().then(function($){$.done?b.complete():b.next($.value)})},0,!0)})})}function scheduleReadableStreamLike(t,e){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(t),e)}function scheduled(t,e){if(t!=null){if(isInteropObservable(t))return scheduleObservable(t,e);if(isArrayLike(t))return scheduleArray(t,e);if(isPromise(t))return schedulePromise(t,e);if(isAsyncIterable(t))return scheduleAsyncIterable(t,e);if(isIterable(t))return scheduleIterable(t,e);if(isReadableStreamLike(t))return scheduleReadableStreamLike(t,e)}throw createInvalidObservableTypeError(t)}function from(t,e){return e?scheduled(t,e):innerFrom(t)}function of(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler(t);return from(t,b)}function throwError(t,e){var b=isFunction(t)?t:function(){return t},w=function($){return $.error(b())};return new Observable(e?function($){return e.schedule(w,0,$)}:w)}var NotificationKind;(function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"})(NotificationKind||(NotificationKind={}));var Notification=function(){function t(e,b,w){this.kind=e,this.value=b,this.error=w,this.hasValue=e==="N"}return t.prototype.observe=function(e){return observeNotification(this,e)},t.prototype.do=function(e,b,w){var $=this,T=$.kind,N=$.value,C=$.error;return T==="N"?e==null?void 0:e(N):T==="E"?b==null?void 0:b(C):w==null?void 0:w()},t.prototype.accept=function(e,b,w){var $;return isFunction(($=e)===null||$===void 0?void 0:$.next)?this.observe(e):this.do(e,b,w)},t.prototype.toObservable=function(){var e=this,b=e.kind,w=e.value,$=e.error,T=b==="N"?of(w):b==="E"?throwError(function(){return $}):b==="C"?EMPTY:0;if(!T)throw new TypeError("Unexpected notification kind "+b);return T},t.createNext=function(e){return new t("N",e)},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t}();function observeNotification(t,e){var b,w,$,T=t,N=T.kind,C=T.value,F=T.error;if(typeof N!="string")throw new TypeError('Invalid notification, missing "kind"');N==="N"?(b=e.next)===null||b===void 0||b.call(e,C):N==="E"?(w=e.error)===null||w===void 0||w.call(e,F):($=e.complete)===null||$===void 0||$.call(e)}function isObservable(t){return!!t&&(t instanceof Observable||isFunction(t.lift)&&isFunction(t.subscribe))}var EmptyError=createErrorClass(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function lastValueFrom(t,e){var b=typeof e=="object";return new Promise(function(w,$){var T=!1,N;t.subscribe({next:function(C){N=C,T=!0},error:$,complete:function(){T?w(N):b?w(e.defaultValue):$(new EmptyError)}})})}function firstValueFrom(t,e){var b=typeof e=="object";return new Promise(function(w,$){var T=new SafeSubscriber({next:function(N){w(N),T.unsubscribe()},error:$,complete:function(){b?w(e.defaultValue):$(new EmptyError)}});t.subscribe(T)})}var ArgumentOutOfRangeError=createErrorClass(function(t){return function(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),NotFoundError=createErrorClass(function(t){return function(b){t(this),this.name="NotFoundError",this.message=b}}),SequenceError=createErrorClass(function(t){return function(b){t(this),this.name="SequenceError",this.message=b}});function isValidDate(t){return t instanceof Date&&!isNaN(t)}var TimeoutError=createErrorClass(function(t){return function(b){b===void 0&&(b=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=b}});function timeout(t,e){var b=isValidDate(t)?{first:t}:typeof t=="number"?{each:t}:t,w=b.first,$=b.each,T=b.with,N=T===void 0?timeoutErrorFactory:T,C=b.scheduler,F=C===void 0?e!=null?e:asyncScheduler:C,G=b.meta,J=G===void 0?null:G;if(w==null&&$==null)throw new TypeError("No timeout provided.");return operate(function(Z,re){var ie,ue,ne=null,ce=0,ae=function(ye){ue=executeSchedule(re,F,function(){try{ie.unsubscribe(),innerFrom(N({meta:J,lastValue:ne,seen:ce})).subscribe(re)}catch($e){re.error($e)}},ye)};ie=Z.subscribe(new OperatorSubscriber(re,function(ye){ue==null||ue.unsubscribe(),ce++,re.next(ne=ye),$>0&&ae($)},void 0,void 0,function(){(ue==null?void 0:ue.closed)||ue==null||ue.unsubscribe(),ne=null})),ae(w!=null?typeof w=="number"?w:+w-F.now():$)})}function timeoutErrorFactory(t){throw new TimeoutError(t)}function map(t,e){return operate(function(b,w){var $=0;b.subscribe(new OperatorSubscriber(w,function(T){w.next(t.call(e,T,$++))}))})}var isArray$2=Array.isArray;function callOrApply(t,e){return isArray$2(e)?t.apply(void 0,__spreadArray([],__read(e))):t(e)}function mapOneOrManyArgs(t){return map(function(e){return callOrApply(t,e)})}function bindCallbackInternals(t,e,b,w){if(b)if(isScheduler(b))w=b;else return function(){for(var $=[],T=0;T<arguments.length;T++)$[T]=arguments[T];return bindCallbackInternals(t,e,w).apply(this,$).pipe(mapOneOrManyArgs(b))};return w?function(){for(var $=[],T=0;T<arguments.length;T++)$[T]=arguments[T];return bindCallbackInternals(t,e).apply(this,$).pipe(subscribeOn(w),observeOn(w))}:function(){for(var $=this,T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];var C=new AsyncSubject,F=!0;return new Observable(function(G){var J=C.subscribe(G);if(F){F=!1;var Z=!1,re=!1;e.apply($,__spreadArray(__spreadArray([],__read(T)),[function(){for(var ie=[],ue=0;ue<arguments.length;ue++)ie[ue]=arguments[ue];if(t){var ne=ie.shift();if(ne!=null){C.error(ne);return}}C.next(1<ie.length?ie:ie[0]),re=!0,Z&&C.complete()}])),re&&C.complete(),Z=!0}return J})}}function bindCallback(t,e,b){return bindCallbackInternals(!1,t,e,b)}function bindNodeCallback(t,e,b){return bindCallbackInternals(!0,t,e,b)}var isArray$1=Array.isArray,getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(t){if(t.length===1){var e=t[0];if(isArray$1(e))return{args:e,keys:null};if(isPOJO(e)){var b=getKeys(e);return{args:b.map(function(w){return e[w]}),keys:b}}}return{args:t,keys:null}}function isPOJO(t){return t&&typeof t=="object"&&getPrototypeOf(t)===objectProto}function createObject(t,e){return t.reduce(function(b,w,$){return b[w]=e[$],b},{})}function combineLatest$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler(t),w=popResultSelector(t),$=argsArgArrayOrObject(t),T=$.args,N=$.keys;if(T.length===0)return from([],b);var C=new Observable(combineLatestInit(T,b,N?function(F){return createObject(N,F)}:identity));return w?C.pipe(mapOneOrManyArgs(w)):C}function combineLatestInit(t,e,b){return b===void 0&&(b=identity),function(w){maybeSchedule(e,function(){for(var $=t.length,T=new Array($),N=$,C=$,F=function(J){maybeSchedule(e,function(){var Z=from(t[J],e),re=!1;Z.subscribe(new OperatorSubscriber(w,function(ie){T[J]=ie,re||(re=!0,C--),C||w.next(b(T.slice()))},function(){--N||w.complete()}))},w)},G=0;G<$;G++)F(G)},w)}}function maybeSchedule(t,e,b){t?executeSchedule(b,t,e):e()}function mergeInternals(t,e,b,w,$,T,N,C){var F=[],G=0,J=0,Z=!1,re=function(){Z&&!F.length&&!G&&e.complete()},ie=function(ne){return G<w?ue(ne):F.push(ne)},ue=function(ne){T&&e.next(ne),G++;var ce=!1;innerFrom(b(ne,J++)).subscribe(new OperatorSubscriber(e,function(ae){$==null||$(ae),T?ie(ae):e.next(ae)},function(){ce=!0},void 0,function(){if(ce)try{G--;for(var ae=function(){var ye=F.shift();N?executeSchedule(e,N,function(){return ue(ye)}):ue(ye)};F.length&&G<w;)ae();re()}catch(ye){e.error(ye)}}))};return t.subscribe(new OperatorSubscriber(e,ie,function(){Z=!0,re()})),function(){C==null||C()}}function mergeMap(t,e,b){return b===void 0&&(b=1/0),isFunction(e)?mergeMap(function(w,$){return map(function(T,N){return e(w,T,$,N)})(innerFrom(t(w,$)))},b):(typeof e=="number"&&(b=e),operate(function(w,$){return mergeInternals(w,$,t,b)}))}function mergeAll(t){return t===void 0&&(t=1/0),mergeMap(identity,t)}function concatAll(){return mergeAll(1)}function concat$2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return concatAll()(from(t,popScheduler(t)))}function defer(t){return new Observable(function(e){innerFrom(t()).subscribe(e)})}var DEFAULT_CONFIG$1={connector:function(){return new Subject},resetOnDisconnect:!0};function connectable(t,e){e===void 0&&(e=DEFAULT_CONFIG$1);var b=null,w=e.connector,$=e.resetOnDisconnect,T=$===void 0?!0:$,N=w(),C=new Observable(function(F){return N.subscribe(F)});return C.connect=function(){return(!b||b.closed)&&(b=defer(function(){return t}).subscribe(N),T&&b.add(function(){return N=w()})),b},C}function forkJoin(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popResultSelector(t),w=argsArgArrayOrObject(t),$=w.args,T=w.keys,N=new Observable(function(C){var F=$.length;if(!F){C.complete();return}for(var G=new Array(F),J=F,Z=F,re=function(ue){var ne=!1;innerFrom($[ue]).subscribe(new OperatorSubscriber(C,function(ce){ne||(ne=!0,Z--),G[ue]=ce},function(){return J--},void 0,function(){(!J||!ne)&&(Z||C.next(T?createObject(T,G):G),C.complete())}))},ie=0;ie<F;ie++)re(ie)});return b?N.pipe(mapOneOrManyArgs(b)):N}var nodeEventEmitterMethods=["addListener","removeListener"],eventTargetMethods=["addEventListener","removeEventListener"],jqueryMethods=["on","off"];function fromEvent(t,e,b,w){if(isFunction(b)&&(w=b,b=void 0),w)return fromEvent(t,e,b).pipe(mapOneOrManyArgs(w));var $=__read(isEventTarget(t)?eventTargetMethods.map(function(C){return function(F){return t[C](e,F,b)}}):isNodeStyleEventEmitter(t)?nodeEventEmitterMethods.map(toCommonHandlerRegistry(t,e)):isJQueryStyleEventEmitter(t)?jqueryMethods.map(toCommonHandlerRegistry(t,e)):[],2),T=$[0],N=$[1];if(!T&&isArrayLike(t))return mergeMap(function(C){return fromEvent(C,e,b)})(innerFrom(t));if(!T)throw new TypeError("Invalid event target");return new Observable(function(C){var F=function(){for(var G=[],J=0;J<arguments.length;J++)G[J]=arguments[J];return C.next(1<G.length?G:G[0])};return T(F),function(){return N(F)}})}function toCommonHandlerRegistry(t,e){return function(b){return function(w){return t[b](e,w)}}}function isNodeStyleEventEmitter(t){return isFunction(t.addListener)&&isFunction(t.removeListener)}function isJQueryStyleEventEmitter(t){return isFunction(t.on)&&isFunction(t.off)}function isEventTarget(t){return isFunction(t.addEventListener)&&isFunction(t.removeEventListener)}function fromEventPattern(t,e,b){return b?fromEventPattern(t,e).pipe(mapOneOrManyArgs(b)):new Observable(function(w){var $=function(){for(var N=[],C=0;C<arguments.length;C++)N[C]=arguments[C];return w.next(N.length===1?N[0]:N)},T=t($);return isFunction(e)?function(){return e($,T)}:void 0})}function generate(t,e,b,w,$){var T,N,C,F;arguments.length===1?(T=t,F=T.initialState,e=T.condition,b=T.iterate,N=T.resultSelector,C=N===void 0?identity:N,$=T.scheduler):(F=t,!w||isScheduler(w)?(C=identity,$=w):C=w);function G(){var J;return __generator(this,function(Z){switch(Z.label){case 0:J=F,Z.label=1;case 1:return!e||e(J)?[4,C(J)]:[3,4];case 2:Z.sent(),Z.label=3;case 3:return J=b(J),[3,1];case 4:return[2]}})}return defer($?function(){return scheduleIterable(G(),$)}:G)}function iif(t,e,b){return defer(function(){return t()?e:b})}function timer(t,e,b){t===void 0&&(t=0),b===void 0&&(b=async);var w=-1;return e!=null&&(isScheduler(e)?b=e:w=e),new Observable(function($){var T=isValidDate(t)?+t-b.now():t;T<0&&(T=0);var N=0;return b.schedule(function(){$.closed||($.next(N++),0<=w?this.schedule(void 0,w):$.complete())},T)})}function interval(t,e){return t===void 0&&(t=0),e===void 0&&(e=asyncScheduler),t<0&&(t=0),timer(t,t,e)}function merge$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler(t),w=popNumber(t,1/0),$=t;return $.length?$.length===1?innerFrom($[0]):mergeAll(w)(from($,b)):EMPTY}var NEVER=new Observable(noop);function never(){return NEVER}var isArray=Array.isArray;function argsOrArgArray(t){return t.length===1&&isArray(t[0])?t[0]:t}function onErrorResumeNext$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=argsOrArgArray(t);return operate(function(w,$){var T=__spreadArray([w],__read(b)),N=function(){if(!$.closed)if(T.length>0){var C=void 0;try{C=innerFrom(T.shift())}catch{N();return}var F=new OperatorSubscriber($,void 0,noop,noop);$.add(C.subscribe(F)),F.add(N)}else $.complete()};N()})}function onErrorResumeNext(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return onErrorResumeNext$1(argsOrArgArray(t))(EMPTY)}function pairs(t,e){return from(Object.entries(t),e)}function not(t,e){return function(b,w){return!t.call(e,b,w)}}function filter(t,e){return operate(function(b,w){var $=0;b.subscribe(new OperatorSubscriber(w,function(T){return t.call(e,T,$++)&&w.next(T)}))})}function partition$1(t,e,b){return[filter(e,b)(innerFrom(t)),filter(not(e,b))(innerFrom(t))]}function race$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=argsOrArgArray(t),t.length===1?innerFrom(t[0]):new Observable(raceInit(t))}function raceInit(t){return function(e){for(var b=[],w=function(T){b.push(innerFrom(t[T]).subscribe(new OperatorSubscriber(e,function(N){if(b){for(var C=0;C<b.length;C++)C!==T&&b[C].unsubscribe();b=null}e.next(N)})))},$=0;b&&!e.closed&&$<t.length;$++)w($)}}function range(t,e,b){if(e==null&&(e=t,t=0),e<=0)return EMPTY;var w=e+t;return new Observable(b?function($){var T=t;return b.schedule(function(){T<w?($.next(T++),this.schedule()):$.complete()})}:function($){for(var T=t;T<w&&!$.closed;)$.next(T++);$.complete()})}function using(t,e){return new Observable(function(b){var w=t(),$=e(w),T=$?innerFrom($):EMPTY;return T.subscribe(b),function(){w&&w.unsubscribe()}})}function zip$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popResultSelector(t),w=argsOrArgArray(t);return w.length?new Observable(function($){var T=w.map(function(){return[]}),N=w.map(function(){return!1});$.add(function(){T=N=null});for(var C=function(G){innerFrom(w[G]).subscribe(new OperatorSubscriber($,function(J){if(T[G].push(J),T.every(function(re){return re.length})){var Z=T.map(function(re){return re.shift()});$.next(b?b.apply(void 0,__spreadArray([],__read(Z))):Z),T.some(function(re,ie){return!re.length&&N[ie]})&&$.complete()}},function(){N[G]=!0,!T[G].length&&$.complete()}))},F=0;!$.closed&&F<w.length;F++)C(F);return function(){T=N=null}}):EMPTY}function audit(t){return operate(function(e,b){var w=!1,$=null,T=null,N=!1,C=function(){if(T==null||T.unsubscribe(),T=null,w){w=!1;var G=$;$=null,b.next(G)}N&&b.complete()},F=function(){T=null,N&&b.complete()};e.subscribe(new OperatorSubscriber(b,function(G){w=!0,$=G,T||innerFrom(t(G)).subscribe(T=new OperatorSubscriber(b,C,F))},function(){N=!0,(!w||!T||T.closed)&&b.complete()}))})}function auditTime(t,e){return e===void 0&&(e=async),audit(function(){return timer(t,e)})}function buffer(t){return operate(function(e,b){var w=[];return e.subscribe(new OperatorSubscriber(b,function($){return w.push($)},function(){b.next(w),b.complete()})),t.subscribe(new OperatorSubscriber(b,function(){var $=w;w=[],b.next($)},noop)),function(){w=null}})}function bufferCount(t,e){return e===void 0&&(e=null),e=e!=null?e:t,operate(function(b,w){var $=[],T=0;b.subscribe(new OperatorSubscriber(w,function(N){var C,F,G,J,Z=null;T++%e==0&&$.push([]);try{for(var re=__values($),ie=re.next();!ie.done;ie=re.next()){var ue=ie.value;ue.push(N),t<=ue.length&&(Z=Z!=null?Z:[],Z.push(ue))}}catch(ae){C={error:ae}}finally{try{ie&&!ie.done&&(F=re.return)&&F.call(re)}finally{if(C)throw C.error}}if(Z)try{for(var ne=__values(Z),ce=ne.next();!ce.done;ce=ne.next()){var ue=ce.value;arrRemove($,ue),w.next(ue)}}catch(ae){G={error:ae}}finally{try{ce&&!ce.done&&(J=ne.return)&&J.call(ne)}finally{if(G)throw G.error}}},function(){var N,C;try{for(var F=__values($),G=F.next();!G.done;G=F.next()){var J=G.value;w.next(J)}}catch(Z){N={error:Z}}finally{try{G&&!G.done&&(C=F.return)&&C.call(F)}finally{if(N)throw N.error}}w.complete()},void 0,function(){$=null}))})}function bufferTime(t){for(var e,b,w=[],$=1;$<arguments.length;$++)w[$-1]=arguments[$];var T=(e=popScheduler(w))!==null&&e!==void 0?e:asyncScheduler,N=(b=w[0])!==null&&b!==void 0?b:null,C=w[1]||1/0;return operate(function(F,G){var J=[],Z=!1,re=function(ne){var ce=ne.buffer,ae=ne.subs;ae.unsubscribe(),arrRemove(J,ne),G.next(ce),Z&&ie()},ie=function(){if(J){var ne=new Subscription;G.add(ne);var ce=[],ae={buffer:ce,subs:ne};J.push(ae),executeSchedule(ne,T,function(){return re(ae)},t)}};N!==null&&N>=0?executeSchedule(G,T,ie,N,!0):Z=!0,ie();var ue=new OperatorSubscriber(G,function(ne){var ce,ae,ye=J.slice();try{for(var $e=__values(ye),_e=$e.next();!_e.done;_e=$e.next()){var be=_e.value,xe=be.buffer;xe.push(ne),C<=xe.length&&re(be)}}catch(ee){ce={error:ee}}finally{try{_e&&!_e.done&&(ae=$e.return)&&ae.call($e)}finally{if(ce)throw ce.error}}},function(){for(;J==null?void 0:J.length;)G.next(J.shift().buffer);ue==null||ue.unsubscribe(),G.complete(),G.unsubscribe()},void 0,function(){return J=null});F.subscribe(ue)})}function bufferToggle(t,e){return operate(function(b,w){var $=[];innerFrom(t).subscribe(new OperatorSubscriber(w,function(T){var N=[];$.push(N);var C=new Subscription,F=function(){arrRemove($,N),w.next(N),C.unsubscribe()};C.add(innerFrom(e(T)).subscribe(new OperatorSubscriber(w,F,noop)))},noop)),b.subscribe(new OperatorSubscriber(w,function(T){var N,C;try{for(var F=__values($),G=F.next();!G.done;G=F.next()){var J=G.value;J.push(T)}}catch(Z){N={error:Z}}finally{try{G&&!G.done&&(C=F.return)&&C.call(F)}finally{if(N)throw N.error}}},function(){for(;$.length>0;)w.next($.shift());w.complete()}))})}function bufferWhen(t){return operate(function(e,b){var w=null,$=null,T=function(){$==null||$.unsubscribe();var N=w;w=[],N&&b.next(N),innerFrom(t()).subscribe($=new OperatorSubscriber(b,T,noop))};T(),e.subscribe(new OperatorSubscriber(b,function(N){return w==null?void 0:w.push(N)},function(){w&&b.next(w),b.complete()},void 0,function(){return w=$=null}))})}function catchError(t){return operate(function(e,b){var w=null,$=!1,T;w=e.subscribe(new OperatorSubscriber(b,void 0,void 0,function(N){T=innerFrom(t(N,catchError(t)(e))),w?(w.unsubscribe(),w=null,T.subscribe(b)):$=!0})),$&&(w.unsubscribe(),w=null,T.subscribe(b))})}function scanInternals(t,e,b,w,$){return function(T,N){var C=b,F=e,G=0;T.subscribe(new OperatorSubscriber(N,function(J){var Z=G++;F=C?t(F,J,Z):(C=!0,J),w&&N.next(F)},$&&function(){C&&N.next(F),N.complete()}))}}function reduce(t,e){return operate(scanInternals(t,e,arguments.length>=2,!1,!0))}var arrReducer=function(t,e){return t.push(e),t};function toArray(){return operate(function(t,e){reduce(arrReducer,[])(t).subscribe(e)})}function joinAllInternals(t,e){return pipe(toArray(),mergeMap(function(b){return t(b)}),e?mapOneOrManyArgs(e):identity)}function combineLatestAll(t){return joinAllInternals(combineLatest$1,t)}var combineAll=combineLatestAll;function combineLatest(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popResultSelector(t);return b?pipe(combineLatest.apply(void 0,__spreadArray([],__read(t))),mapOneOrManyArgs(b)):operate(function(w,$){combineLatestInit(__spreadArray([w],__read(argsOrArgArray(t))))($)})}function combineLatestWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return combineLatest.apply(void 0,__spreadArray([],__read(t)))}function concatMap(t,e){return isFunction(e)?mergeMap(t,e,1):mergeMap(t,1)}function concatMapTo(t,e){return isFunction(e)?concatMap(function(){return t},e):concatMap(function(){return t})}function concat$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler(t);return operate(function(w,$){concatAll()(from(__spreadArray([w],__read(t)),b)).subscribe($)})}function concatWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return concat$1.apply(void 0,__spreadArray([],__read(t)))}function fromSubscribable(t){return new Observable(function(e){return t.subscribe(e)})}var DEFAULT_CONFIG={connector:function(){return new Subject}};function connect(t,e){e===void 0&&(e=DEFAULT_CONFIG);var b=e.connector;return operate(function(w,$){var T=b();from(t(fromSubscribable(T))).subscribe($),$.add(w.subscribe(T))})}function count(t){return reduce(function(e,b,w){return!t||t(b,w)?e+1:e},0)}function debounce(t){return operate(function(e,b){var w=!1,$=null,T=null,N=function(){if(T==null||T.unsubscribe(),T=null,w){w=!1;var C=$;$=null,b.next(C)}};e.subscribe(new OperatorSubscriber(b,function(C){T==null||T.unsubscribe(),w=!0,$=C,T=new OperatorSubscriber(b,N,noop),innerFrom(t(C)).subscribe(T)},function(){N(),b.complete()},void 0,function(){$=T=null}))})}function debounceTime(t,e){return e===void 0&&(e=asyncScheduler),operate(function(b,w){var $=null,T=null,N=null,C=function(){if($){$.unsubscribe(),$=null;var G=T;T=null,w.next(G)}};function F(){var G=N+t,J=e.now();if(J<G){$=this.schedule(void 0,G-J),w.add($);return}C()}b.subscribe(new OperatorSubscriber(w,function(G){T=G,N=e.now(),$||($=e.schedule(F,t),w.add($))},function(){C(),w.complete()},void 0,function(){T=$=null}))})}function defaultIfEmpty(t){return operate(function(e,b){var w=!1;e.subscribe(new OperatorSubscriber(b,function($){w=!0,b.next($)},function(){w||b.next(t),b.complete()}))})}function take(t){return t<=0?function(){return EMPTY}:operate(function(e,b){var w=0;e.subscribe(new OperatorSubscriber(b,function($){++w<=t&&(b.next($),t<=w&&b.complete())}))})}function ignoreElements(){return operate(function(t,e){t.subscribe(new OperatorSubscriber(e,noop))})}function mapTo(t){return map(function(){return t})}function delayWhen(t,e){return e?function(b){return concat$2(e.pipe(take(1),ignoreElements()),b.pipe(delayWhen(t)))}:mergeMap(function(b,w){return t(b,w).pipe(take(1),mapTo(b))})}function delay(t,e){e===void 0&&(e=asyncScheduler);var b=timer(t,e);return delayWhen(function(){return b})}function dematerialize(){return operate(function(t,e){t.subscribe(new OperatorSubscriber(e,function(b){return observeNotification(b,e)}))})}function distinct(t,e){return operate(function(b,w){var $=new Set;b.subscribe(new OperatorSubscriber(w,function(T){var N=t?t(T):T;$.has(N)||($.add(N),w.next(T))})),e==null||e.subscribe(new OperatorSubscriber(w,function(){return $.clear()},noop))})}function distinctUntilChanged(t,e){return e===void 0&&(e=identity),t=t!=null?t:defaultCompare,operate(function(b,w){var $,T=!0;b.subscribe(new OperatorSubscriber(w,function(N){var C=e(N);(T||!t($,C))&&(T=!1,$=C,w.next(N))}))})}function defaultCompare(t,e){return t===e}function distinctUntilKeyChanged(t,e){return distinctUntilChanged(function(b,w){return e?e(b[t],w[t]):b[t]===w[t]})}function throwIfEmpty(t){return t===void 0&&(t=defaultErrorFactory),operate(function(e,b){var w=!1;e.subscribe(new OperatorSubscriber(b,function($){w=!0,b.next($)},function(){return w?b.complete():b.error(t())}))})}function defaultErrorFactory(){return new EmptyError}function elementAt(t,e){if(t<0)throw new ArgumentOutOfRangeError;var b=arguments.length>=2;return function(w){return w.pipe(filter(function($,T){return T===t}),take(1),b?defaultIfEmpty(e):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(b){return concat$2(b,of.apply(void 0,__spreadArray([],__read(t))))}}function every(t,e){return operate(function(b,w){var $=0;b.subscribe(new OperatorSubscriber(w,function(T){t.call(e,T,$++,b)||(w.next(!1),w.complete())},function(){w.next(!0),w.complete()}))})}function exhaustAll(){return operate(function(t,e){var b=!1,w=null;t.subscribe(new OperatorSubscriber(e,function($){w||(w=innerFrom($).subscribe(new OperatorSubscriber(e,void 0,function(){w=null,b&&e.complete()})))},function(){b=!0,!w&&e.complete()}))})}var exhaust=exhaustAll;function exhaustMap(t,e){return e?function(b){return b.pipe(exhaustMap(function(w,$){return innerFrom(t(w,$)).pipe(map(function(T,N){return e(w,T,$,N)}))}))}:operate(function(b,w){var $=0,T=null,N=!1;b.subscribe(new OperatorSubscriber(w,function(C){T||(T=new OperatorSubscriber(w,void 0,function(){T=null,N&&w.complete()}),innerFrom(t(C,$++)).subscribe(T))},function(){N=!0,!T&&w.complete()}))})}function expand(t,e,b){return e===void 0&&(e=1/0),e=(e||0)<1?1/0:e,operate(function(w,$){return mergeInternals(w,$,t,e,void 0,!0,b)})}function finalize(t){return operate(function(e,b){try{e.subscribe(b)}finally{b.add(t)}})}function find(t,e){return operate(createFind(t,e,"value"))}function createFind(t,e,b){var w=b==="index";return function($,T){var N=0;$.subscribe(new OperatorSubscriber(T,function(C){var F=N++;t.call(e,C,F,$)&&(T.next(w?F:C),T.complete())},function(){T.next(w?-1:void 0),T.complete()}))}}function findIndex(t,e){return operate(createFind(t,e,"index"))}function first(t,e){var b=arguments.length>=2;return function(w){return w.pipe(t?filter(function($,T){return t($,T,w)}):identity,take(1),b?defaultIfEmpty(e):throwIfEmpty(function(){return new EmptyError}))}}function groupBy(t,e,b,w){return operate(function($,T){var N;!e||typeof e=="function"?N=e:(b=e.duration,N=e.element,w=e.connector);var C=new Map,F=function(re){C.forEach(re),re(T)},G=function(re){return F(function(ie){return ie.error(re)})},J=new GroupBySubscriber(T,function(re){try{var ie=t(re),ue=C.get(ie);if(!ue){C.set(ie,ue=w?w():new Subject);var ne=Z(ie,ue);if(T.next(ne),b){var ce=new OperatorSubscriber(ue,function(){ue.complete(),ce==null||ce.unsubscribe()},void 0,void 0,function(){return C.delete(ie)});J.add(innerFrom(b(ne)).subscribe(ce))}}ue.next(N?N(re):re)}catch(ae){G(ae)}},function(){return F(function(re){return re.complete()})},G,function(){return C.clear()});$.subscribe(J);function Z(re,ie){var ue=new Observable(function(ne){J.activeGroups++;var ce=ie.subscribe(ne);return function(){ce.unsubscribe(),--J.activeGroups==0&&J.teardownAttempted&&J.unsubscribe()}});return ue.key=re,ue}})}var GroupBySubscriber=function(t){__extends(e,t);function e(){var b=t!==null&&t.apply(this,arguments)||this;return b.activeGroups=0,b.teardownAttempted=!1,b}return e.prototype.unsubscribe=function(){this.teardownAttempted=!0,this.activeGroups===0&&t.prototype.unsubscribe.call(this)},e}(OperatorSubscriber);function isEmpty(){return operate(function(t,e){t.subscribe(new OperatorSubscriber(e,function(){e.next(!1),e.complete()},function(){e.next(!0),e.complete()}))})}function takeLast(t){return t<=0?function(){return EMPTY}:operate(function(e,b){var w=[];e.subscribe(new OperatorSubscriber(b,function($){w.push($),t<w.length&&w.shift()},function(){var $,T;try{for(var N=__values(w),C=N.next();!C.done;C=N.next()){var F=C.value;b.next(F)}}catch(G){$={error:G}}finally{try{C&&!C.done&&(T=N.return)&&T.call(N)}finally{if($)throw $.error}}b.complete()},void 0,function(){w=null}))})}function last(t,e){var b=arguments.length>=2;return function(w){return w.pipe(t?filter(function($,T){return t($,T,w)}):identity,takeLast(1),b?defaultIfEmpty(e):throwIfEmpty(function(){return new EmptyError}))}}function materialize(){return operate(function(t,e){t.subscribe(new OperatorSubscriber(e,function(b){e.next(Notification.createNext(b))},function(){e.next(Notification.createComplete()),e.complete()},function(b){e.next(Notification.createError(b)),e.complete()}))})}function max(t){return reduce(isFunction(t)?function(e,b){return t(e,b)>0?e:b}:function(e,b){return e>b?e:b})}var flatMap=mergeMap;function mergeMapTo(t,e,b){return b===void 0&&(b=1/0),isFunction(e)?mergeMap(function(){return t},e,b):(typeof e=="number"&&(b=e),mergeMap(function(){return t},b))}function mergeScan(t,e,b){return b===void 0&&(b=1/0),operate(function(w,$){var T=e;return mergeInternals(w,$,function(N,C){return t(T,N,C)},b,function(N){T=N},!1,void 0,function(){return T=null})})}function merge(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler(t),w=popNumber(t,1/0);return t=argsOrArgArray(t),operate(function($,T){mergeAll(w)(from(__spreadArray([$],__read(t)),b)).subscribe(T)})}function mergeWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return merge.apply(void 0,__spreadArray([],__read(t)))}function min(t){return reduce(isFunction(t)?function(e,b){return t(e,b)<0?e:b}:function(e,b){return e<b?e:b})}function multicast(t,e){var b=isFunction(t)?t:function(){return t};return isFunction(e)?connect(e,{connector:b}):function(w){return new ConnectableObservable(w,b)}}function pairwise(){return operate(function(t,e){var b,w=!1;t.subscribe(new OperatorSubscriber(e,function($){var T=b;b=$,w&&e.next([T,$]),w=!0}))})}function pluck(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=t.length;if(b===0)throw new Error("list of properties cannot be empty.");return map(function(w){for(var $=w,T=0;T<b;T++){var N=$==null?void 0:$[t[T]];if(typeof N!="undefined")$=N;else return}return $})}function publish(t){return t?function(e){return connect(t)(e)}:function(e){return multicast(new Subject)(e)}}function publishBehavior(t){return function(e){var b=new BehaviorSubject(t);return new ConnectableObservable(e,function(){return b})}}function publishLast(){return function(t){var e=new AsyncSubject;return new ConnectableObservable(t,function(){return e})}}function publishReplay(t,e,b,w){b&&!isFunction(b)&&(w=b);var $=isFunction(b)?b:void 0;return function(T){return multicast(new ReplaySubject(t,e,w),$)(T)}}function raceWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?operate(function(b,w){raceInit(__spreadArray([b],__read(t)))(w)}):identity}function repeat(t){return t===void 0&&(t=1/0),t<=0?function(){return EMPTY}:operate(function(e,b){var w=0,$,T=function(){var N=!1;$=e.subscribe(new OperatorSubscriber(b,void 0,function(){++w<t?$?($.unsubscribe(),$=null,T()):N=!0:b.complete()})),N&&($.unsubscribe(),$=null,T())};T()})}function repeatWhen(t){return operate(function(e,b){var w,$=!1,T,N=!1,C=!1,F=function(){return C&&N&&(b.complete(),!0)},G=function(){return T||(T=new Subject,t(T).subscribe(new OperatorSubscriber(b,function(){w?J():$=!0},function(){N=!0,F()}))),T},J=function(){C=!1,w=e.subscribe(new OperatorSubscriber(b,void 0,function(){C=!0,!F()&&G().next()})),$&&(w.unsubscribe(),w=null,$=!1,J())};J()})}function retry(t){t===void 0&&(t=1/0);var e;t&&typeof t=="object"?e=t:e={count:t};var b=e.count,w=b===void 0?1/0:b,$=e.delay,T=e.resetOnSuccess,N=T===void 0?!1:T;return w<=0?identity:operate(function(C,F){var G=0,J,Z=function(){var re=!1;J=C.subscribe(new OperatorSubscriber(F,function(ie){N&&(G=0),F.next(ie)},void 0,function(ie){if(G++<w){var ue=function(){J?(J.unsubscribe(),J=null,Z()):re=!0};if($!=null){var ne=typeof $=="number"?timer($):innerFrom($(ie,G)),ce=new OperatorSubscriber(F,function(){ce.unsubscribe(),ue()},function(){F.complete()});ne.subscribe(ce)}else ue()}else F.error(ie)})),re&&(J.unsubscribe(),J=null,Z())};Z()})}function retryWhen(t){return operate(function(e,b){var w,$=!1,T,N=function(){w=e.subscribe(new OperatorSubscriber(b,void 0,void 0,function(C){T||(T=new Subject,t(T).subscribe(new OperatorSubscriber(b,function(){return w?N():$=!0}))),T&&T.next(C)})),$&&(w.unsubscribe(),w=null,$=!1,N())};N()})}function sample(t){return operate(function(e,b){var w=!1,$=null;e.subscribe(new OperatorSubscriber(b,function(N){w=!0,$=N}));var T=function(){if(w){w=!1;var N=$;$=null,b.next(N)}};t.subscribe(new OperatorSubscriber(b,T,noop))})}function sampleTime(t,e){return e===void 0&&(e=asyncScheduler),sample(interval(t,e))}function scan(t,e){return operate(scanInternals(t,e,arguments.length>=2,!0))}function sequenceEqual(t,e){return e===void 0&&(e=function(b,w){return b===w}),operate(function(b,w){var $=createState(),T=createState(),N=function(F){w.next(F),w.complete()},C=function(F,G){var J=new OperatorSubscriber(w,function(Z){var re=G.buffer,ie=G.complete;re.length===0?ie?N(!1):F.buffer.push(Z):!e(Z,re.shift())&&N(!1)},function(){F.complete=!0;var Z=G.complete,re=G.buffer;Z&&N(re.length===0),J==null||J.unsubscribe()});return J};b.subscribe(C($,T)),t.subscribe(C(T,$))})}function createState(){return{buffer:[],complete:!1}}function share(t){t===void 0&&(t={});var e=t.connector,b=e===void 0?function(){return new Subject}:e,w=t.resetOnError,$=w===void 0?!0:w,T=t.resetOnComplete,N=T===void 0?!0:T,C=t.resetOnRefCountZero,F=C===void 0?!0:C;return function(G){var J=null,Z=null,re=null,ie=0,ue=!1,ne=!1,ce=function(){Z==null||Z.unsubscribe(),Z=null},ae=function(){ce(),J=re=null,ue=ne=!1},ye=function(){var $e=J;ae(),$e==null||$e.unsubscribe()};return operate(function($e,_e){ie++,!ne&&!ue&&ce();var be=re=re!=null?re:b();_e.add(function(){ie--,ie===0&&!ne&&!ue&&(Z=handleReset(ye,F))}),be.subscribe(_e),J||(J=new SafeSubscriber({next:function(xe){return be.next(xe)},error:function(xe){ne=!0,ce(),Z=handleReset(ae,$,xe),be.error(xe)},complete:function(){ue=!0,ce(),Z=handleReset(ae,N),be.complete()}}),from($e).subscribe(J))})(G)}}function handleReset(t,e){for(var b=[],w=2;w<arguments.length;w++)b[w-2]=arguments[w];return e===!0?(t(),null):e===!1?null:e.apply(void 0,__spreadArray([],__read(b))).pipe(take(1)).subscribe(function(){return t()})}function shareReplay(t,e,b){var w,$,T,N=!1;return t&&typeof t=="object"?(T=(w=t.bufferSize)!==null&&w!==void 0?w:1/0,e=($=t.windowTime)!==null&&$!==void 0?$:1/0,N=!!t.refCount,b=t.scheduler):T=t!=null?t:1/0,share({connector:function(){return new ReplaySubject(T,e,b)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:N})}function single(t){return operate(function(e,b){var w=!1,$,T=!1,N=0;e.subscribe(new OperatorSubscriber(b,function(C){T=!0,(!t||t(C,N++,e))&&(w&&b.error(new SequenceError("Too many matching values")),w=!0,$=C)},function(){w?(b.next($),b.complete()):b.error(T?new NotFoundError("No matching values"):new EmptyError)}))})}function skip(t){return filter(function(e,b){return t<=b})}function skipLast(t){return t<=0?identity:operate(function(e,b){var w=new Array(t),$=0;return e.subscribe(new OperatorSubscriber(b,function(T){var N=$++;if(N<t)w[N]=T;else{var C=N%t,F=w[C];w[C]=T,b.next(F)}})),function(){w=null}})}function skipUntil(t){return operate(function(e,b){var w=!1,$=new OperatorSubscriber(b,function(){$==null||$.unsubscribe(),w=!0},noop);innerFrom(t).subscribe($),e.subscribe(new OperatorSubscriber(b,function(T){return w&&b.next(T)}))})}function skipWhile(t){return operate(function(e,b){var w=!1,$=0;e.subscribe(new OperatorSubscriber(b,function(T){return(w||(w=!t(T,$++)))&&b.next(T)}))})}function startWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popScheduler(t);return operate(function(w,$){(b?concat$2(t,w,b):concat$2(t,w)).subscribe($)})}function switchMap(t,e){return operate(function(b,w){var $=null,T=0,N=!1,C=function(){return N&&!$&&w.complete()};b.subscribe(new OperatorSubscriber(w,function(F){$==null||$.unsubscribe();var G=0,J=T++;innerFrom(t(F,J)).subscribe($=new OperatorSubscriber(w,function(Z){return w.next(e?e(F,Z,J,G++):Z)},function(){$=null,C()}))},function(){N=!0,C()}))})}function switchAll(){return switchMap(identity)}function switchMapTo(t,e){return isFunction(e)?switchMap(function(){return t},e):switchMap(function(){return t})}function switchScan(t,e){return operate(function(b,w){var $=e;return switchMap(function(T,N){return t($,T,N)},function(T,N){return $=N,N})(b).subscribe(w),function(){$=null}})}function takeUntil(t){return operate(function(e,b){innerFrom(t).subscribe(new OperatorSubscriber(b,function(){return b.complete()},noop)),!b.closed&&e.subscribe(b)})}function takeWhile(t,e){return e===void 0&&(e=!1),operate(function(b,w){var $=0;b.subscribe(new OperatorSubscriber(w,function(T){var N=t(T,$++);(N||e)&&w.next(T),!N&&w.complete()}))})}function tap(t,e,b){var w=isFunction(t)||e||b?{next:t,error:e,complete:b}:t;return w?operate(function($,T){var N;(N=w.subscribe)===null||N===void 0||N.call(w);var C=!0;$.subscribe(new OperatorSubscriber(T,function(F){var G;(G=w.next)===null||G===void 0||G.call(w,F),T.next(F)},function(){var F;C=!1,(F=w.complete)===null||F===void 0||F.call(w),T.complete()},function(F){var G;C=!1,(G=w.error)===null||G===void 0||G.call(w,F),T.error(F)},function(){var F,G;C&&((F=w.unsubscribe)===null||F===void 0||F.call(w)),(G=w.finalize)===null||G===void 0||G.call(w)}))}):identity}var defaultThrottleConfig={leading:!0,trailing:!1};function throttle(t,e){var b=e===void 0?defaultThrottleConfig:e,w=b.leading,$=b.trailing;return operate(function(T,N){var C=!1,F=null,G=null,J=!1,Z=function(){G==null||G.unsubscribe(),G=null,$&&(ue(),J&&N.complete())},re=function(){G=null,J&&N.complete()},ie=function(ne){return G=innerFrom(t(ne)).subscribe(new OperatorSubscriber(N,Z,re))},ue=function(){if(C){C=!1;var ne=F;F=null,N.next(ne),!J&&ie(ne)}};T.subscribe(new OperatorSubscriber(N,function(ne){C=!0,F=ne,!(G&&!G.closed)&&(w?ue():ie(ne))},function(){J=!0,!($&&C&&G&&!G.closed)&&N.complete()}))})}function throttleTime(t,e,b){e===void 0&&(e=asyncScheduler),b===void 0&&(b=defaultThrottleConfig);var w=timer(t,e);return throttle(function(){return w},b)}function timeInterval(t){return t===void 0&&(t=async),function(e){return defer(function(){return e.pipe(scan(function(b,w){var $=b.current;return{value:w,current:t.now(),last:$}},{current:t.now(),value:void 0,last:void 0}),map(function(b){var w=b.current,$=b.last,T=b.value;return new TimeInterval(T,w-$)}))})}}var TimeInterval=function(){function t(e,b){this.value=e,this.interval=b}return t}();function timeoutWith(t,e,b){var w,$,T;if(b=b!=null?b:async,isValidDate(t)?w=t:typeof t=="number"&&($=t),e)T=function(){return e};else throw new TypeError("No observable provided to switch to");if(w==null&&$==null)throw new TypeError("No timeout provided.");return timeout({first:w,each:$,scheduler:b,with:T})}function timestamp(t){return t===void 0&&(t=dateTimestampProvider),map(function(e){return{value:e,timestamp:t.now()}})}function window$1(t){return operate(function(e,b){var w=new Subject;b.next(w.asObservable());var $=function(T){w.error(T),b.error(T)};return e.subscribe(new OperatorSubscriber(b,function(T){return w==null?void 0:w.next(T)},function(){w.complete(),b.complete()},$)),t.subscribe(new OperatorSubscriber(b,function(){w.complete(),b.next(w=new Subject)},noop,$)),function(){w==null||w.unsubscribe(),w=null}})}function windowCount(t,e){e===void 0&&(e=0);var b=e>0?e:t;return operate(function(w,$){var T=[new Subject],N=[],C=0;$.next(T[0].asObservable()),w.subscribe(new OperatorSubscriber($,function(F){var G,J;try{for(var Z=__values(T),re=Z.next();!re.done;re=Z.next()){var ie=re.value;ie.next(F)}}catch(ce){G={error:ce}}finally{try{re&&!re.done&&(J=Z.return)&&J.call(Z)}finally{if(G)throw G.error}}var ue=C-t+1;if(ue>=0&&ue%b==0&&T.shift().complete(),++C%b==0){var ne=new Subject;T.push(ne),$.next(ne.asObservable())}},function(){for(;T.length>0;)T.shift().complete();$.complete()},function(F){for(;T.length>0;)T.shift().error(F);$.error(F)},function(){N=null,T=null}))})}function windowTime(t){for(var e,b,w=[],$=1;$<arguments.length;$++)w[$-1]=arguments[$];var T=(e=popScheduler(w))!==null&&e!==void 0?e:asyncScheduler,N=(b=w[0])!==null&&b!==void 0?b:null,C=w[1]||1/0;return operate(function(F,G){var J=[],Z=!1,re=function(ce){var ae=ce.window,ye=ce.subs;ae.complete(),ye.unsubscribe(),arrRemove(J,ce),Z&&ie()},ie=function(){if(J){var ce=new Subscription;G.add(ce);var ae=new Subject,ye={window:ae,subs:ce,seen:0};J.push(ye),G.next(ae.asObservable()),executeSchedule(ce,T,function(){return re(ye)},t)}};N!==null&&N>=0?executeSchedule(G,T,ie,N,!0):Z=!0,ie();var ue=function(ce){return J.slice().forEach(ce)},ne=function(ce){ue(function(ae){var ye=ae.window;return ce(ye)}),ce(G),G.unsubscribe()};return F.subscribe(new OperatorSubscriber(G,function(ce){ue(function(ae){ae.window.next(ce),C<=++ae.seen&&re(ae)})},function(){return ne(function(ce){return ce.complete()})},function(ce){return ne(function(ae){return ae.error(ce)})})),function(){J=null}})}function windowToggle(t,e){return operate(function(b,w){var $=[],T=function(N){for(;0<$.length;)$.shift().error(N);w.error(N)};innerFrom(t).subscribe(new OperatorSubscriber(w,function(N){var C=new Subject;$.push(C);var F=new Subscription,G=function(){arrRemove($,C),C.complete(),F.unsubscribe()},J;try{J=innerFrom(e(N))}catch(Z){T(Z);return}w.next(C.asObservable()),F.add(J.subscribe(new OperatorSubscriber(w,G,noop,T)))},noop)),b.subscribe(new OperatorSubscriber(w,function(N){var C,F,G=$.slice();try{for(var J=__values(G),Z=J.next();!Z.done;Z=J.next()){var re=Z.value;re.next(N)}}catch(ie){C={error:ie}}finally{try{Z&&!Z.done&&(F=J.return)&&F.call(J)}finally{if(C)throw C.error}}},function(){for(;0<$.length;)$.shift().complete();w.complete()},T,function(){for(;0<$.length;)$.shift().unsubscribe()}))})}function windowWhen(t){return operate(function(e,b){var w,$,T=function(C){w.error(C),b.error(C)},N=function(){$==null||$.unsubscribe(),w==null||w.complete(),w=new Subject,b.next(w.asObservable());var C;try{C=innerFrom(t())}catch(F){T(F);return}C.subscribe($=new OperatorSubscriber(b,N,N,T))};N(),e.subscribe(new OperatorSubscriber(b,function(C){return w.next(C)},function(){w.complete(),b.complete()},T,function(){$==null||$.unsubscribe(),w=null}))})}function withLatestFrom(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var b=popResultSelector(t);return operate(function(w,$){for(var T=t.length,N=new Array(T),C=t.map(function(){return!1}),F=!1,G=function(Z){innerFrom(t[Z]).subscribe(new OperatorSubscriber($,function(re){N[Z]=re,!F&&!C[Z]&&(C[Z]=!0,(F=C.every(identity))&&(C=null))},noop))},J=0;J<T;J++)G(J);w.subscribe(new OperatorSubscriber($,function(Z){if(F){var re=__spreadArray([Z],__read(N));$.next(b?b.apply(void 0,__spreadArray([],__read(re))):re)}}))})}function zipAll(t){return joinAllInternals(zip$1,t)}function zip(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return operate(function(b,w){zip$1.apply(void 0,__spreadArray([b],__read(t))).subscribe(w)})}function zipWith(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zip.apply(void 0,__spreadArray([],__read(t)))}var esm5=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Observable,ConnectableObservable,observable,animationFrames,Subject,BehaviorSubject,ReplaySubject,AsyncSubject,asap,asapScheduler,async,asyncScheduler,queue,queueScheduler,animationFrame,animationFrameScheduler,VirtualTimeScheduler,VirtualAction,Scheduler,Subscription,Subscriber,Notification,get NotificationKind(){return NotificationKind},pipe,noop,identity,isObservable,lastValueFrom,firstValueFrom,ArgumentOutOfRangeError,EmptyError,NotFoundError,ObjectUnsubscribedError,SequenceError,TimeoutError,UnsubscriptionError,bindCallback,bindNodeCallback,combineLatest:combineLatest$1,concat:concat$2,connectable,defer,empty,forkJoin,from,fromEvent,fromEventPattern,generate,iif,interval,merge:merge$1,never,of,onErrorResumeNext,pairs,partition:partition$1,race:race$1,range,throwError,timer,using,zip:zip$1,scheduled,EMPTY,NEVER,config,audit,auditTime,buffer,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatestAll,combineLatestWith,concatAll,concatMap,concatMapTo,concatWith,connect,count,debounce,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustAll,exhaustMap,expand,filter,finalize,find,findIndex,first,groupBy,ignoreElements,isEmpty,last,map,mapTo,materialize,max,mergeAll,flatMap,mergeMap,mergeMapTo,mergeScan,mergeWith,min,multicast,observeOn,pairwise,pluck,publish,publishBehavior,publishLast,publishReplay,raceWith,reduce,repeat,repeatWhen,retry,retryWhen,refCount,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,switchScan,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp,toArray,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zipAll,zipWith}),require$$0$2=getAugmentedNamespace(esm5);function partition(t,e){return function(b){return[filter(t,e)(b),filter(not(t,e))(b)]}}function race(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return raceWith.apply(void 0,__spreadArray([],__read(argsOrArgArray(t))))}var operators=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",audit,auditTime,buffer,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatestAll,combineLatest,combineLatestWith,concat:concat$1,concatAll,concatMap,concatMapTo,concatWith,connect,count,debounce,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustAll,exhaustMap,expand,filter,finalize,find,findIndex,first,groupBy,ignoreElements,isEmpty,last,map,mapTo,materialize,max,merge,mergeAll,flatMap,mergeMap,mergeMapTo,mergeScan,mergeWith,min,multicast,observeOn,onErrorResumeNext:onErrorResumeNext$1,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,raceWith,reduce,repeat,repeatWhen,retry,retryWhen,refCount,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,switchScan,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp,toArray,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll,zipWith}),require$$1$1=getAugmentedNamespace(operators),queryString={},strictUriEncode=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),token="%[a-f0-9]{2}",singleMatcher=new RegExp(token,"gi"),multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(t,e){try{return decodeURIComponent(t.join(""))}catch{}if(t.length===1)return t;e=e||1;var b=t.slice(0,e),w=t.slice(e);return Array.prototype.concat.call([],decodeComponents(b),decodeComponents(w))}function decode(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(singleMatcher),b=1;b<e.length;b++)t=decodeComponents(e,b).join(""),e=t.match(singleMatcher);return t}}function customDecodeURIComponent(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},b=multiMatcher.exec(t);b;){try{e[b[0]]=decodeURIComponent(b[0])}catch{var w=decode(b[0]);w!==b[0]&&(e[b[0]]=w)}b=multiMatcher.exec(t)}e["%C2"]="\uFFFD";for(var $=Object.keys(e),T=0;T<$.length;T++){var N=$[T];t=t.replace(new RegExp(N,"g"),e[N])}return t}var decodeUriComponent=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return customDecodeURIComponent(t)}},splitOnFirst=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const b=t.indexOf(e);return b===-1?[t]:[t.slice(0,b),t.slice(b+e.length)]},filterObj=function(t,e){for(var b={},w=Object.keys(t),$=Array.isArray(e),T=0;T<w.length;T++){var N=w[T],C=t[N];($?e.indexOf(N)!==-1:e(N,C,t))&&(b[N]=C)}return b};(function(t){const e=strictUriEncode,b=decodeUriComponent,w=splitOnFirst,$=filterObj,T=ye=>ye==null,N=Symbol("encodeFragmentIdentifier");function C(ye){switch(ye.arrayFormat){case"index":return $e=>(_e,be)=>{const xe=_e.length;return be===void 0||ye.skipNull&&be===null||ye.skipEmptyString&&be===""?_e:be===null?[..._e,[J($e,ye),"[",xe,"]"].join("")]:[..._e,[J($e,ye),"[",J(xe,ye),"]=",J(be,ye)].join("")]};case"bracket":return $e=>(_e,be)=>be===void 0||ye.skipNull&&be===null||ye.skipEmptyString&&be===""?_e:be===null?[..._e,[J($e,ye),"[]"].join("")]:[..._e,[J($e,ye),"[]=",J(be,ye)].join("")];case"comma":case"separator":case"bracket-separator":{const $e=ye.arrayFormat==="bracket-separator"?"[]=":"=";return _e=>(be,xe)=>xe===void 0||ye.skipNull&&xe===null||ye.skipEmptyString&&xe===""?be:(xe=xe===null?"":xe,be.length===0?[[J(_e,ye),$e,J(xe,ye)].join("")]:[[be,J(xe,ye)].join(ye.arrayFormatSeparator)])}default:return $e=>(_e,be)=>be===void 0||ye.skipNull&&be===null||ye.skipEmptyString&&be===""?_e:be===null?[..._e,J($e,ye)]:[..._e,[J($e,ye),"=",J(be,ye)].join("")]}}function F(ye){let $e;switch(ye.arrayFormat){case"index":return(_e,be,xe)=>{if($e=/\[(\d*)\]$/.exec(_e),_e=_e.replace(/\[\d*\]$/,""),!$e){xe[_e]=be;return}xe[_e]===void 0&&(xe[_e]={}),xe[_e][$e[1]]=be};case"bracket":return(_e,be,xe)=>{if($e=/(\[\])$/.exec(_e),_e=_e.replace(/\[\]$/,""),!$e){xe[_e]=be;return}if(xe[_e]===void 0){xe[_e]=[be];return}xe[_e]=[].concat(xe[_e],be)};case"comma":case"separator":return(_e,be,xe)=>{const ee=typeof be=="string"&&be.includes(ye.arrayFormatSeparator),he=typeof be=="string"&&!ee&&Z(be,ye).includes(ye.arrayFormatSeparator);be=he?Z(be,ye):be;const we=ee||he?be.split(ye.arrayFormatSeparator).map(Ne=>Z(Ne,ye)):be===null?be:Z(be,ye);xe[_e]=we};case"bracket-separator":return(_e,be,xe)=>{const ee=/(\[\])$/.test(_e);if(_e=_e.replace(/\[\]$/,""),!ee){xe[_e]=be&&Z(be,ye);return}const he=be===null?[]:be.split(ye.arrayFormatSeparator).map(we=>Z(we,ye));if(xe[_e]===void 0){xe[_e]=he;return}xe[_e]=[].concat(xe[_e],he)};default:return(_e,be,xe)=>{if(xe[_e]===void 0){xe[_e]=be;return}xe[_e]=[].concat(xe[_e],be)}}}function G(ye){if(typeof ye!="string"||ye.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function J(ye,$e){return $e.encode?$e.strict?e(ye):encodeURIComponent(ye):ye}function Z(ye,$e){return $e.decode?b(ye):ye}function re(ye){return Array.isArray(ye)?ye.sort():typeof ye=="object"?re(Object.keys(ye)).sort(($e,_e)=>Number($e)-Number(_e)).map($e=>ye[$e]):ye}function ie(ye){const $e=ye.indexOf("#");return $e!==-1&&(ye=ye.slice(0,$e)),ye}function ue(ye){let $e="";const _e=ye.indexOf("#");return _e!==-1&&($e=ye.slice(_e)),$e}function ne(ye){ye=ie(ye);const $e=ye.indexOf("?");return $e===-1?"":ye.slice($e+1)}function ce(ye,$e){return $e.parseNumbers&&!Number.isNaN(Number(ye))&&typeof ye=="string"&&ye.trim()!==""?ye=Number(ye):$e.parseBooleans&&ye!==null&&(ye.toLowerCase()==="true"||ye.toLowerCase()==="false")&&(ye=ye.toLowerCase()==="true"),ye}function ae(ye,$e){$e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},$e),G($e.arrayFormatSeparator);const _e=F($e),be=Object.create(null);if(typeof ye!="string"||(ye=ye.trim().replace(/^[?#&]/,""),!ye))return be;for(const xe of ye.split("&")){if(xe==="")continue;let[ee,he]=w($e.decode?xe.replace(/\+/g," "):xe,"=");he=he===void 0?null:["comma","separator","bracket-separator"].includes($e.arrayFormat)?he:Z(he,$e),_e(Z(ee,$e),he,be)}for(const xe of Object.keys(be)){const ee=be[xe];if(typeof ee=="object"&&ee!==null)for(const he of Object.keys(ee))ee[he]=ce(ee[he],$e);else be[xe]=ce(ee,$e)}return $e.sort===!1?be:($e.sort===!0?Object.keys(be).sort():Object.keys(be).sort($e.sort)).reduce((xe,ee)=>{const he=be[ee];return Boolean(he)&&typeof he=="object"&&!Array.isArray(he)?xe[ee]=re(he):xe[ee]=he,xe},Object.create(null))}t.extract=ne,t.parse=ae,t.stringify=(ye,$e)=>{if(!ye)return"";$e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},$e),G($e.arrayFormatSeparator);const _e=he=>$e.skipNull&&T(ye[he])||$e.skipEmptyString&&ye[he]==="",be=C($e),xe={};for(const he of Object.keys(ye))_e(he)||(xe[he]=ye[he]);const ee=Object.keys(xe);return $e.sort!==!1&&ee.sort($e.sort),ee.map(he=>{const we=ye[he];return we===void 0?"":we===null?J(he,$e):Array.isArray(we)?we.length===0&&$e.arrayFormat==="bracket-separator"?J(he,$e)+"[]":we.reduce(be(he),[]).join("&"):J(he,$e)+"="+J(we,$e)}).filter(he=>he.length>0).join("&")},t.parseUrl=(ye,$e)=>{$e=Object.assign({decode:!0},$e);const[_e,be]=w(ye,"#");return Object.assign({url:_e.split("?")[0]||"",query:ae(ne(ye),$e)},$e&&$e.parseFragmentIdentifier&&be?{fragmentIdentifier:Z(be,$e)}:{})},t.stringifyUrl=(ye,$e)=>{$e=Object.assign({encode:!0,strict:!0,[N]:!0},$e);const _e=ie(ye.url).split("?")[0]||"",be=t.extract(ye.url),xe=t.parse(be,{sort:!1}),ee=Object.assign(xe,ye.query);let he=t.stringify(ee,$e);he&&(he=`?${he}`);let we=ue(ye.url);return ye.fragmentIdentifier&&(we=`#${$e[N]?J(ye.fragmentIdentifier,$e):ye.fragmentIdentifier}`),`${_e}${he}${we}`},t.pick=(ye,$e,_e)=>{_e=Object.assign({parseFragmentIdentifier:!0,[N]:!1},_e);const{url:be,query:xe,fragmentIdentifier:ee}=t.parseUrl(ye,_e);return t.stringifyUrl({url:be,query:$(xe,$e),fragmentIdentifier:ee},_e)},t.exclude=(ye,$e,_e)=>{const be=Array.isArray($e)?xe=>!$e.includes(xe):(xe,ee)=>!$e(xe,ee);return t.pick(ye,be,_e)}})(queryString);var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(document$1,"__esModule",{value:!0});document$1.Document=void 0;const rxjs_1=require$$0$2,operators_1=require$$1$1,common_1$2=lib$5,streamid_1$1=lib$4,query_string_1=__importDefault$2(queryString);class Document extends rxjs_1.Observable{constructor(e,b,w){super($=>{this.state$.observers.length===0&&(this.periodicSubscription=rxjs_1.timer(0,w).pipe(operators_1.throttle(()=>this._syncState(this.id,{sync:common_1$2.SyncOptions.PREFER_CACHE}))).subscribe()),this.state$.subscribe($).add(()=>{var N;this.state$.observers.length===0&&((N=this.periodicSubscription)===null||N===void 0||N.unsubscribe())})});this._apiUrl=b,this.state$=new common_1$2.StreamStateSubject(e)}get value(){return this.state$.value}get state(){return this.state$.value}next(e){this.state$.next(e)}async _syncState(e,b){const w=await Document._load(e,this._apiUrl,b);this.state$.next(common_1$2.StreamUtils.deserializeState(w))}get id(){return new streamid_1$1.StreamID(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(e,b,w,$,T){const{state:N}=await common_1$2.fetchJson(e+"/streams",{method:"post",body:{type:b,genesis:common_1$2.StreamUtils.serializeCommit(w),opts:$}});return new Document(common_1$2.StreamUtils.deserializeState(N),e,T)}static async applyCommit(e,b,w,$,T){const{state:N}=await common_1$2.fetchJson(e+"/commits",{method:"post",body:{streamId:b.toString(),commit:common_1$2.StreamUtils.serializeCommit(w),opts:$}});return new Document(common_1$2.StreamUtils.deserializeState(N),e,T)}static async _load(e,b,w){const $=b+"/streams/"+e.toString()+"?"+query_string_1.default.stringify(w),{state:T}=await common_1$2.fetchJson($);return T}static async load(e,b,w,$){const T=await Document._load(e,b,$);return new Document(common_1$2.StreamUtils.deserializeState(T),b,w)}static async loadStreamCommits(e,b){const{commits:w}=await common_1$2.fetchJson(`${b}/commits/${e}`);return w.map($=>({cid:$.cid,value:common_1$2.StreamUtils.deserializeCommit($.value)}))}complete(){this.state$.complete()}}document$1.Document=Document;var lib$3={},caip10Link={},__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(t,e,b,w){var $=arguments.length,T=$<3?e:w===null?w=Object.getOwnPropertyDescriptor(e,b):w,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(t,e,b,w);else for(var C=t.length-1;C>=0;C--)(N=t[C])&&(T=($<3?N(T):$>3?N(e,b,T):N(e,b))||T);return $>3&&T&&Object.defineProperty(e,b,T),T},Caip10Link_1;Object.defineProperty(caip10Link,"__esModule",{value:!0});caip10Link.Caip10Link=void 0;const common_1$1=lib$5,streamid_1=lib$4,caip_1=cjs,throwReadOnlyError=()=>{throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")},DEFAULT_CREATE_OPTS={anchor:!1,publish:!0,sync:common_1$1.SyncOptions.PREFER_CACHE},DEFAULT_UPDATE_OPTS={anchor:!0,publish:!0,throwOnInvalidCommit:!0},DEFAULT_LOAD_OPTS={sync:common_1$1.SyncOptions.PREFER_CACHE};let Caip10Link=Caip10Link_1=class extends common_1$1.Stream{constructor(){super(...arguments);this._isReadOnly=!1}get did(){return this.content}static async fromAccount(e,b,w={}){w=Tt(Tt({},DEFAULT_CREATE_OPTS),w);const $=new caip_1.AccountID(b),T=Caip10Link_1.makeGenesis($);return Caip10Link_1.fromGenesis(e,T,w)}static async fromGenesis(e,b,w={}){return w=Tt(Tt({},DEFAULT_CREATE_OPTS),w),e.createStreamFromGenesis(Caip10Link_1.STREAM_TYPE_ID,b,w)}async setDid(e,b,w={}){w=Tt(Tt({},DEFAULT_UPDATE_OPTS),w);const $=typeof e=="string"?e:e.id,T=await b.createLink($);return this.setDidProof(T,w)}async setDidProof(e,b={}){b=Tt(Tt({},DEFAULT_UPDATE_OPTS),b);const w=this.makeCommit(e),$=await this.api.applyCommit(this.id,w,b);this.state$.next($.state)}static async load(e,b,w={}){w=Tt(Tt({},DEFAULT_LOAD_OPTS),w);const $=streamid_1.StreamRef.from(b);if($.type!=Caip10Link_1.STREAM_TYPE_ID)throw new Error(`StreamID ${$.toString()} does not refer to a '${Caip10Link_1.STREAM_TYPE_NAME}' stream, but to a ${$.typeName}`);return e.loadStream($,w)}static makeGenesis(e){return e.chainId.namespace==="eip155"&&(e.address=e.address.toLowerCase()),{header:{controllers:[e.toString()],family:`caip10-${e.chainId.toString()}`}}}makeCommit(e){return{data:e,prev:this.tip,id:this.state$.id.cid}}makeReadOnly(){this.setDidProof=throwReadOnlyError,this.setDid=throwReadOnlyError,this.sync=throwReadOnlyError,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}};Caip10Link.STREAM_TYPE_NAME="caip10-link";Caip10Link.STREAM_TYPE_ID=1;Caip10Link=Caip10Link_1=__decorate([common_1$1.StreamStatic()],Caip10Link);caip10Link.Caip10Link=Caip10Link;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(w,$,T,N){N===void 0&&(N=T),Object.defineProperty(w,N,{enumerable:!0,get:function(){return $[T]}})}:function(w,$,T,N){N===void 0&&(N=T),w[N]=$[T]}),b=commonjsGlobal&&commonjsGlobal.__exportStar||function(w,$){for(var T in w)T!=="default"&&!Object.prototype.hasOwnProperty.call($,T)&&e($,w,T)};Object.defineProperty(t,"__esModule",{value:!0}),b(caip10Link,t)})(lib$3);var remotePinApi={};Object.defineProperty(remotePinApi,"__esModule",{value:!0});remotePinApi.RemotePinApi=void 0;const common_1=lib$5;class RemotePinApi{constructor(e){this._apiUrl=e}async add(e){await common_1.fetchJson(this._apiUrl+`/pins/${e.toString()}`,{method:"post"})}async rm(e,b){await common_1.fetchJson(this._apiUrl+`/pins/${e.toString()}`,{method:"delete",body:{opts:b}})}async ls(e){let b=this._apiUrl+"/pins";e&&(b+=`/${e.toString()}`);const w=await common_1.fetchJson(b),{pinnedStreamIds:$}=w;return{[Symbol.asyncIterator](){let T=0;return{next(){return T===$.length?Promise.resolve({value:null,done:!0}):Promise.resolve({value:$[T++],done:!1})}}}}}}remotePinApi.RemotePinApi=RemotePinApi;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CeramicClient=t.DEFAULT_CLIENT_CONFIG=void 0;const e=utils$e,b=document$1,w=lib$5,$=lib$6,T=lib$3,N=lib$4,C=remotePinApi,F="/api/v0",G="http://localhost:7007";t.DEFAULT_CLIENT_CONFIG={syncInterval:5e3};const J={anchor:!0,publish:!0,sync:w.SyncOptions.PREFER_CACHE},Z={anchor:!0,publish:!0,sync:w.SyncOptions.PREFER_CACHE},re={sync:w.SyncOptions.PREFER_CACHE};class ie{constructor(ne=G,ce={}){this._config=Tt(Tt({},t.DEFAULT_CLIENT_CONFIG),ce),this._apiUrl=e.combineURLs(ne,F),this._streamCache=new Map,this.context={api:this},this.pin=new C.RemotePinApi(this._apiUrl),this._streamConstructors={[$.TileDocument.STREAM_TYPE_ID]:$.TileDocument,[T.Caip10Link.STREAM_TYPE_ID]:T.Caip10Link}}get did(){return this.context.did}set did(ne){this.context.did=ne}async createStreamFromGenesis(ne,ce,ae={}){ae=Tt(Tt({},Z),ae);const ye=await b.Document.createFromGenesis(this._apiUrl,ne,ce,ae,this._config.syncInterval),$e=this._streamCache.get(ye.id.toString());return $e?(w.StreamUtils.statesEqual(ye.state,$e.state)||$e.next(ye.state),this.buildStream($e)):(this._streamCache.set(ye.id.toString(),ye),this.buildStream(ye))}async loadStream(ne,ce={}){ce=Tt(Tt({},re),ce);const ae=N.StreamRef.from(ne);let ye=this._streamCache.get(ae.baseID.toString());return ye?await ye._syncState(ae,ce):(ye=await b.Document.load(ae,this._apiUrl,this._config.syncInterval,ce),this._streamCache.set(ye.id.toString(),ye)),this.buildStream(ye)}async multiQuery(ne){const ce=ne.map(ye=>({streamId:typeof ye.streamId=="string"?ye.streamId:ye.streamId.toString(),paths:ye.paths,atTime:ye.atTime})),ae=await w.fetchJson(this._apiUrl+"/multiqueries",{method:"post",body:{queries:ce}});return Object.entries(ae).reduce((ye,$e)=>{const[_e,be]=$e,xe=w.StreamUtils.deserializeState(be),ee=new b.Document(xe,this._apiUrl,this._config.syncInterval);return ye[_e]=this.buildStream(ee),ye},{})}loadStreamCommits(ne){const ce=e.typeStreamID(ne);return b.Document.loadStreamCommits(ce,this._apiUrl)}async applyCommit(ne,ce,ae={}){ae=Tt(Tt({},J),ae);const ye=e.typeStreamID(ne),$e=await b.Document.applyCommit(this._apiUrl,ye,ce,ae,this._config.syncInterval),_e=this._streamCache.get(ye.toString());return _e?(_e.next($e.state),this.buildStream($e)):(this._streamCache.set(ye.toString(),$e),this.buildStream($e))}async requestAnchor(ne,ce={}){ce=Tt(Tt({},re),ce);const{anchorStatus:ae}=await w.fetchJson(`${this._apiUrl}/streams/${ne.toString()}/anchor`,{method:"post",body:{opts:ce}});return ae}addStreamHandler(ne){this._streamConstructors[ne.name]=ne.stream_constructor}findStreamConstructor(ne){const ce=this._streamConstructors[ne];if(ce)return ce;throw new Error(`Failed to find constructor for stream ${ne}`)}buildStream(ne){const ce=this.findStreamConstructor(ne.state.type);return new ce(ne,this.context)}async setDID(ne){this.context.did=ne}async getSupportedChains(){if(this._supportedChains)return this._supportedChains;const{supportedChains:ne}=await w.fetchJson(this._apiUrl+"/node/chains");return this._supportedChains=ne,ne}async close(){Array.from(this._streamCache).map(([,ne])=>{ne.complete()}),this._streamCache.clear()}}t.CeramicClient=ie,t.default=ie})(ceramicHttpClient);var __accessCheck=(t,e,b)=>{if(!e.has(t))throw TypeError("Cannot "+b)},__privateGet=(t,e,b)=>(__accessCheck(t,e,"read from private field"),b?b.call(t):e.get(t)),__privateAdd=(t,e,b)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,b)},__privateSet=(t,e,b,w)=>(__accessCheck(t,e,"write to private field"),w?w.call(t,b):e.set(t,b),b),_autopin,_ceramic,_model;class DataModel{constructor({autopin:e,ceramic:b,model:w}){__privateAdd(this,_autopin,void 0),__privateAdd(this,_ceramic,void 0),__privateAdd(this,_model,void 0),__privateSet(this,_autopin,e!==!1),__privateSet(this,_ceramic,b),__privateSet(this,_model,w)}get ceramic(){return __privateGet(this,_ceramic)}getDefinitionID(e){var b;return(b=__privateGet(this,_model).definitions[e])!=null?b:null}getSchemaURL(e){var b;return(b=__privateGet(this,_model).schemas[e])!=null?b:null}getTileID(e){var b;return(b=__privateGet(this,_model).tiles[e])!=null?b:null}async loadTile(e){const b=this.getTileID(e);if(b==null)throw new Error(`Tile alias "${e}" is not defined`);return await lib$6.TileDocument.load(__privateGet(this,_ceramic),b)}async createTile(e,b,{pin:w}={}){const $=this.getSchemaURL(e);if($==null)throw new Error(`Schema alias "${e}" is not defined`);const T=await lib$6.TileDocument.create(__privateGet(this,_ceramic),b,{schema:$});return(w!=null?w:__privateGet(this,_autopin))&&await __privateGet(this,_ceramic).pin.add(T.id),T}}_autopin=new WeakMap;_ceramic=new WeakMap;_model=new WeakMap;const CIP11_DEFINITION_SCHEMA_URL="ceramic://k3y52l7qbv1fry1fp4s0nwdarh0vahusarpposgevy0pemiykymd2ord6swtharcw",CIP11_INDEX_SCHEMA_URL="ceramic://k3y52l7qbv1fryjn62sggjh1lpn11c56qfofzmty190d62hwk1cal1c7qc5he54ow";var E=(t,e,b)=>{if(!e.has(t))throw TypeError("Cannot "+b)},l$1=(t,e,b)=>(E(t,e,"read from private field"),b?b.call(t):e.get(t)),m=(t,e,b)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,b)},y=(t,e,b,w)=>(E(t,e,"write to private field"),w?w.call(t,b):e.set(t,b),b),f$2,u$2,I$2,_;class W{constructor(e){m(this,f$2,void 0),m(this,u$2,[]),m(this,I$2,void 0),m(this,_,void 0),y(this,f$2,e),this._createValuePromise()}_createValuePromise(){y(this,I$2,new Promise((e,b)=>{y(this,_,{resolve:e,reject:b})}))}change(e){return new Promise((b,w)=>{const $=async T=>{try{const N=await e(T);b(),this._next(N)}catch(N){w(N),this._next(T)}};l$1(this,u$2).push({reject:w,run:$}),l$1(this,u$2).length===1&&this._start()})}async changeContent(e){const b=async w=>(await w.update(e(w.content),w.metadata),w);return await this.change(b)}async get(){return l$1(this,u$2).length===0?await l$1(this,f$2).call(this):await l$1(this,I$2)}async _start(){try{const e=await l$1(this,f$2).call(this);this._next(e)}catch(e){l$1(this,u$2).forEach(b=>{b.reject(e)}),y(this,u$2,[]),l$1(this,_).reject(e),this._createValuePromise()}}_next(e){const b=l$1(this,u$2).shift();b==null?this._end(e):b.run(e)}_end(e){l$1(this,_).resolve(e),this._createValuePromise()}}f$2=new WeakMap,u$2=new WeakMap,I$2=new WeakMap,_=new WeakMap;const X=/^did:([A-Za-z0-9]+):([A-Za-z0-9.\-:_]+)$/;function k$1(t){return X.test(t)}function O(t){if(!k$1(t))throw new Error(`Invalid DID: ${t}`)}var M$1=(t,e,b)=>{if(!e.has(t))throw TypeError("Cannot "+b)},o$1=(t,e,b)=>(M$1(t,e,"read from private field"),b?b.call(t):e.get(t)),x=(t,e,b)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,b)},P=(t,e,b,w)=>(M$1(t,e,"write to private field"),w?w.call(t,b):e.set(t,b),b),D$1,h$2,g;class A{constructor({autopin:e,ceramic:b,model:w}){x(this,D$1,void 0),x(this,h$2,void 0),x(this,g,void 0),P(this,D$1,e!==!1),P(this,h$2,b),this._indexProxy=new W(this._getOwnIDXDoc.bind(this)),P(this,g,w instanceof DataModel?w:new DataModel({autopin:e,ceramic:b,model:w}))}get authenticated(){return o$1(this,h$2).did!=null}get ceramic(){return o$1(this,h$2)}get id(){if(o$1(this,h$2).did==null)throw new Error("Ceramic instance is not authenticated");return o$1(this,h$2).did.id}get model(){return o$1(this,g)}async has(e,b){const w=this.getDefinitionID(e);return await this.getRecordID(w,b)!=null}async get(e,b){const w=this.getDefinitionID(e);return await this.getRecord(w,b)}async set(e,b,w){const $=this.getDefinitionID(e),[T,N]=await this._setRecordOnly($,b,w);return T&&await this._setReference($,N),N}async merge(e,b,w){const $=this.getDefinitionID(e),T=await this.getRecord($),N=T?Tt(Tt({},T),b):b;return await this.setRecord($,N,w)}async setAll(e,b){const w=Object.entries(e).map(async([T,N])=>{const C=this.getDefinitionID(T),[F,G]=await this._setRecordOnly(C,N,b);return[F,C,G]}),$=(await Promise.all(w)).reduce((T,[N,C,F])=>(N&&(T[C]=F.toUrl()),T),{});return await this._setReferences($),$}async setDefaults(e,b){var N;const w=(N=await this.getIndex())!=null?N:{},$=Object.entries(e).map(([C,F])=>[this.getDefinitionID(C),F]).filter(C=>w[C[0]]==null).map(async([C,F])=>{const G=await this.getDefinition(C),J=await this._createRecord(G,F,b);return{[C]:J.toUrl()}}),T=(await Promise.all($)).reduce((C,F)=>Object.assign(C,F),{});return await this._setReferences(T),T}async remove(e){await this._indexProxy.changeContent(b=>(b&&delete b[this.getDefinitionID(e)],b))}async getIndex(e){const b=this.authenticated&&(e===this.id||e==null)?await this._indexProxy.get():await this._getIDXDoc(e!=null?e:this.id);return b?b.content:null}iterator(e){let b,w=0;return{[Symbol.asyncIterator](){return this},next:async()=>{if(b==null){const C=await this.getIndex(e);b=Object.entries(C!=null?C:{})}if(w===b.length)return{done:!0,value:null};const[$,T]=b[w++],N=await this._loadDocument(T);return{done:!1,value:{key:$,id:T,record:N.content}}}}}async _createIDXDoc(e){return O(e),await lib$6.TileDocument.create(o$1(this,h$2),null,{deterministic:!0,controllers:[e],family:"IDX"},{anchor:!1,publish:!1})}async _getIDXDoc(e){const b=await this._createIDXDoc(e);if(b.content==null||b.metadata.schema==null)return null;if(b.metadata.schema!==CIP11_INDEX_SCHEMA_URL)throw new Error("Invalid document: schema is not IdentityIndex");return b}async _getOwnIDXDoc(){const e=await this._createIDXDoc(this.id);if(e.content==null||e.metadata.schema==null)await e.update({},{schema:CIP11_INDEX_SCHEMA_URL}),o$1(this,D$1)&&await o$1(this,h$2).pin.add(e.id);else if(e.metadata.schema!==CIP11_INDEX_SCHEMA_URL)throw new Error("Invalid document: schema is not IdentityIndex");return e}getDefinitionID(e){var b;return(b=o$1(this,g).getDefinitionID(e))!=null?b:e}async getDefinition(e){const b=await this._loadDocument(e);if(b.metadata.schema!==CIP11_DEFINITION_SCHEMA_URL)throw new Error("Invalid document: schema is not Definition");return gr(Tt({},b.content),{id:b.id})}async getRecordID(e,b){var w,$;return($=(w=await this.getIndex(b!=null?b:this.id))==null?void 0:w[e])!=null?$:null}async getRecordDocument(e,b){const w=await this.getRecordID(e,b);return w?await this._loadDocument(w):null}async getRecord(e,b){const w=await this.getRecordDocument(e,b);return w?w.content:null}async setRecord(e,b,w){const[$,T]=await this._setRecordOnly(e,b,w);return $&&await this._setReference(e,T),T}async _setRecordOnly(e,b,{pin:w}={}){const $=await this.getRecordID(e,this.id);if($==null){const T=await this.getDefinition(e),N=await this._createRecord(T,b,{pin:w});return[!0,N]}else{const T=await this._loadDocument($);return await T.update(b),[!1,T.id]}}async _loadDocument(e){return await lib$6.TileDocument.load(o$1(this,h$2),e)}async _createRecord(e,b,{pin:w}={}){const $=await lib$6.TileDocument.create(o$1(this,h$2),null,{deterministic:!0,controllers:[this.id],family:e.id.toString()},{anchor:!1,publish:!1}),T=$.update(b,{schema:e.schema});return(w!=null?w:o$1(this,D$1))?await Promise.all([T,o$1(this,h$2).pin.add($.id)]):await T,$.id}async _setReference(e,b){await this._indexProxy.changeContent(w=>gr(Tt({},w),{[e]:b.toUrl()}))}async _setReferences(e){Object.keys(e).length!==0&&await this._indexProxy.changeContent(b=>Tt(Tt({},b),e))}}D$1=new WeakMap,h$2=new WeakMap,g=new WeakMap;function _catch(t,e){try{var b=t()}catch(w){return e(w)}return b&&b.then?b.then(void 0,e):b}function inMemoryCache(){const t=new Map;return function(e,b){try{let $=function(N){if(w)return N;const C=t.get(e.didUrl);return C!==void 0?C:Promise.resolve(b()).then(function(F){var G;return((G=F.didResolutionMetadata)==null?void 0:G.error)!=="notFound"&&t.set(e.didUrl,F),F})},w;const T=function(){if(e.params&&e.params["no-cache"]==="true")return w=1,Promise.resolve(b())}();return Promise.resolve(T&&T.then?T.then($):$(T))}catch(w){return Promise.reject(w)}}}function noCache(t,e){return e()}const ID_CHAR="[a-zA-Z0-9_.%-]",METHOD="([a-zA-Z0-9_]+)",METHOD_ID=`(${ID_CHAR}+(:${ID_CHAR}+)*)`,PARAM_CHAR="[a-zA-Z0-9_.:%-]",PARAM=`;${PARAM_CHAR}+=${PARAM_CHAR}*`,PARAMS=`((${PARAM})*)`,PATH="(/[^#?]*)?",QUERY="([?][^#]*)?",FRAGMENT="(#.*)?",DID_MATCHER=new RegExp(`^did:${METHOD}:${METHOD_ID}${PARAMS}${PATH}${QUERY}${FRAGMENT}$`);function parse(t){if(t===""||!t)return null;const e=t.match(DID_MATCHER);if(e){const b={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:t};if(e[4]){const w=e[4].slice(1).split(";");b.params={};for(const $ of w){const T=$.split("=");b.params[T[0]]=T[1]}}return e[6]&&(b.path=e[6]),e[7]&&(b.query=e[7].slice(1)),e[8]&&(b.fragment=e[8].slice(1)),b}return null}const EMPTY_RESULT={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function wrapLegacyResolver(t){return function(e,b,w){try{return Promise.resolve(_catch(function(){return Promise.resolve(t(e,b,w)).then(function($){return gr(Tt({},EMPTY_RESULT),{didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:$})})},function($){return gr(Tt({},EMPTY_RESULT),{didResolutionMetadata:{error:"notFound",message:$.toString()}})}))}catch($){return Promise.reject($)}}}class Resolver{constructor(e={},b={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=b.cache===!0?inMemoryCache():b.cache||noCache,b.legacyResolvers&&Object.keys(b.legacyResolvers).map(w=>{this.registry[w]||(this.registry[w]=wrapLegacyResolver(b.legacyResolvers[w]))})}resolve(e,b={}){try{const w=this,$=parse(e);if($===null)return Promise.resolve(gr(Tt({},EMPTY_RESULT),{didResolutionMetadata:{error:"invalidDid"}}));const T=w.registry[$.method];return T?Promise.resolve(w.cache($,()=>T($.did,$,w,b))):Promise.resolve(gr(Tt({},EMPTY_RESULT),{didResolutionMetadata:{error:"unsupportedDidMethod"}}))}catch(w){return Promise.reject(w)}}}var resolver_module=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Resolver,inMemoryCache,noCache,parse,wrapLegacyResolver}),lib$2={},secp256k1$3={},__createBinding$4=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$4=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$4=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$4(e,t,b);return __setModuleDefault$4(e,t),e};Object.defineProperty(secp256k1$3,"__esModule",{value:!0});secp256k1$3.keyToDidDoc=void 0;const u8a$3=__importStar$4(uint8arrays$7);function keyToDidDoc$1(t,e){const b=`did:key:${e}`,w=`${b}#${e}`;return{id:b,verificationMethod:[{id:w,type:"Secp256k1VerificationKey2018",controller:b,publicKeyBase58:u8a$3.toString(t,"base58btc")}],authentication:[w],assertionMethod:[w],capabilityDelegation:[w],capabilityInvocation:[w]}}secp256k1$3.keyToDidDoc=keyToDidDoc$1;var ed25519$2={},ed25519$1={},sha512={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,b=wipe$1;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var w=function(){function C(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return C.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},C.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},C.prototype.clean=function(){b.wipe(this._buffer),b.wipe(this._tempHi),b.wipe(this._tempLo),this.reset()},C.prototype.update=function(F,G){if(G===void 0&&(G=F.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var J=0;if(this._bytesHashed+=G,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&G>0;)this._buffer[this._bufferLength++]=F[J++],G--;this._bufferLength===this.blockSize&&(T(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(G>=this.blockSize&&(J=T(this._tempHi,this._tempLo,this._stateHi,this._stateLo,F,J,G),G%=this.blockSize);G>0;)this._buffer[this._bufferLength++]=F[J++],G--;return this},C.prototype.finish=function(F){if(!this._finished){var G=this._bytesHashed,J=this._bufferLength,Z=G/536870912|0,re=G<<3,ie=G%128<112?128:256;this._buffer[J]=128;for(var ue=J+1;ue<ie-8;ue++)this._buffer[ue]=0;e.writeUint32BE(Z,this._buffer,ie-8),e.writeUint32BE(re,this._buffer,ie-4),T(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,ie),this._finished=!0}for(var ue=0;ue<this.digestLength/8;ue++)e.writeUint32BE(this._stateHi[ue],F,ue*8),e.writeUint32BE(this._stateLo[ue],F,ue*8+4);return this},C.prototype.digest=function(){var F=new Uint8Array(this.digestLength);return this.finish(F),F},C.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},C.prototype.restoreState=function(F){return this._stateHi.set(F.stateHi),this._stateLo.set(F.stateLo),this._bufferLength=F.bufferLength,F.buffer&&this._buffer.set(F.buffer),this._bytesHashed=F.bytesHashed,this._finished=!1,this},C.prototype.cleanSavedState=function(F){b.wipe(F.stateHi),b.wipe(F.stateLo),F.buffer&&b.wipe(F.buffer),F.bufferLength=0,F.bytesHashed=0},C}();t.SHA512=w;var $=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function T(C,F,G,J,Z,re,ie){for(var ue=G[0],ne=G[1],ce=G[2],ae=G[3],ye=G[4],$e=G[5],_e=G[6],be=G[7],xe=J[0],ee=J[1],he=J[2],we=J[3],Ne=J[4],pe=J[5],te=J[6],Y=J[7],R,B,V,Q,H,j,L,q;ie>=128;){for(var U=0;U<16;U++){var oe=8*U+re;C[U]=e.readUint32BE(Z,oe),F[U]=e.readUint32BE(Z,oe+4)}for(var U=0;U<80;U++){var ve=ue,fe=ne,Oe=ce,Se=ae,Te=ye,Ae=$e,le=_e,ke=be,je=xe,Ve=ee,qe=he,Ze=we,Pe=Ne,de=pe,me=te,Re=Y;if(R=be,B=Y,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=(ye>>>14|Ne<<32-14)^(ye>>>18|Ne<<32-18)^(Ne>>>41-32|ye<<32-(41-32)),B=(Ne>>>14|ye<<32-14)^(Ne>>>18|ye<<32-18)^(ye>>>41-32|Ne<<32-(41-32)),H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,R=ye&$e^~ye&_e,B=Ne&pe^~Ne&te,H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,R=$[U*2],B=$[U*2+1],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,R=C[U%16],B=F[U%16],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,V=L&65535|q<<16,Q=H&65535|j<<16,R=V,B=Q,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=(ue>>>28|xe<<32-28)^(xe>>>34-32|ue<<32-(34-32))^(xe>>>39-32|ue<<32-(39-32)),B=(xe>>>28|ue<<32-28)^(ue>>>34-32|xe<<32-(34-32))^(ue>>>39-32|xe<<32-(39-32)),H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,R=ue&ne^ue&ce^ne&ce,B=xe&ee^xe&he^ee&he,H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,ke=L&65535|q<<16,Re=H&65535|j<<16,R=Se,B=Ze,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=V,B=Q,H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,Se=L&65535|q<<16,Ze=H&65535|j<<16,ne=ve,ce=fe,ae=Oe,ye=Se,$e=Te,_e=Ae,be=le,ue=ke,ee=je,he=Ve,we=qe,Ne=Ze,pe=Pe,te=de,Y=me,xe=Re,U%16==15)for(var oe=0;oe<16;oe++)R=C[oe],B=F[oe],H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=C[(oe+9)%16],B=F[(oe+9)%16],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,V=C[(oe+1)%16],Q=F[(oe+1)%16],R=(V>>>1|Q<<32-1)^(V>>>8|Q<<32-8)^V>>>7,B=(Q>>>1|V<<32-1)^(Q>>>8|V<<32-8)^(Q>>>7|V<<32-7),H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,V=C[(oe+14)%16],Q=F[(oe+14)%16],R=(V>>>19|Q<<32-19)^(Q>>>61-32|V<<32-(61-32))^V>>>6,B=(Q>>>19|V<<32-19)^(V>>>61-32|Q<<32-(61-32))^(Q>>>6|V<<32-6),H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,C[oe]=L&65535|q<<16,F[oe]=H&65535|j<<16}R=ue,B=xe,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=G[0],B=J[0],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,G[0]=ue=L&65535|q<<16,J[0]=xe=H&65535|j<<16,R=ne,B=ee,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=G[1],B=J[1],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,G[1]=ne=L&65535|q<<16,J[1]=ee=H&65535|j<<16,R=ce,B=he,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=G[2],B=J[2],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,G[2]=ce=L&65535|q<<16,J[2]=he=H&65535|j<<16,R=ae,B=we,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=G[3],B=J[3],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,G[3]=ae=L&65535|q<<16,J[3]=we=H&65535|j<<16,R=ye,B=Ne,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=G[4],B=J[4],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,G[4]=ye=L&65535|q<<16,J[4]=Ne=H&65535|j<<16,R=$e,B=pe,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=G[5],B=J[5],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,G[5]=$e=L&65535|q<<16,J[5]=pe=H&65535|j<<16,R=_e,B=te,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=G[6],B=J[6],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,G[6]=_e=L&65535|q<<16,J[6]=te=H&65535|j<<16,R=be,B=Y,H=B&65535,j=B>>>16,L=R&65535,q=R>>>16,R=G[7],B=J[7],H+=B&65535,j+=B>>>16,L+=R&65535,q+=R>>>16,j+=H>>>16,L+=j>>>16,q+=L>>>16,G[7]=be=L&65535|q<<16,J[7]=Y=H&65535|j<<16,re+=128,ie-=128}return re}function N(C){var F=new w;F.update(C);var G=F.digest();return F.clean(),G}t.hash=N})(sha512);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=random,b=sha512,w=wipe$1;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function $(Se){var Te=new Float64Array(16);if(Se)for(var Ae=0;Ae<Se.length;Ae++)Te[Ae]=Se[Ae];return Te}var T=new Uint8Array(32);T[0]=9;var N=$(),C=$([1]),F=$([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),G=$([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),J=$([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Z=$([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),re=$([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ie(Se,Te){for(var Ae=0;Ae<16;Ae++)Se[Ae]=Te[Ae]|0}function ue(Se){for(var Te=1,Ae=0;Ae<16;Ae++){var le=Se[Ae]+Te+65535;Te=Math.floor(le/65536),Se[Ae]=le-Te*65536}Se[0]+=Te-1+37*(Te-1)}function ne(Se,Te,Ae){for(var le=~(Ae-1),ke=0;ke<16;ke++){var je=le&(Se[ke]^Te[ke]);Se[ke]^=je,Te[ke]^=je}}function ce(Se,Te){for(var Ae=$(),le=$(),ke=0;ke<16;ke++)le[ke]=Te[ke];ue(le),ue(le),ue(le);for(var je=0;je<2;je++){Ae[0]=le[0]-65517;for(var ke=1;ke<15;ke++)Ae[ke]=le[ke]-65535-(Ae[ke-1]>>16&1),Ae[ke-1]&=65535;Ae[15]=le[15]-32767-(Ae[14]>>16&1);var Ve=Ae[15]>>16&1;Ae[14]&=65535,ne(le,Ae,1-Ve)}for(var ke=0;ke<16;ke++)Se[2*ke]=le[ke]&255,Se[2*ke+1]=le[ke]>>8}function ae(Se,Te){for(var Ae=0,le=0;le<32;le++)Ae|=Se[le]^Te[le];return(1&Ae-1>>>8)-1}function ye(Se,Te){var Ae=new Uint8Array(32),le=new Uint8Array(32);return ce(Ae,Se),ce(le,Te),ae(Ae,le)}function $e(Se){var Te=new Uint8Array(32);return ce(Te,Se),Te[0]&1}function _e(Se,Te){for(var Ae=0;Ae<16;Ae++)Se[Ae]=Te[2*Ae]+(Te[2*Ae+1]<<8);Se[15]&=32767}function be(Se,Te,Ae){for(var le=0;le<16;le++)Se[le]=Te[le]+Ae[le]}function xe(Se,Te,Ae){for(var le=0;le<16;le++)Se[le]=Te[le]-Ae[le]}function ee(Se,Te,Ae){var le,ke,je=0,Ve=0,qe=0,Ze=0,Pe=0,de=0,me=0,Re=0,Fe=0,Ue=0,ze=0,Qe=0,Ye=0,ht=0,at=0,Ke=0,kt=0,yt=0,ct=0,Bt=0,Et=0,et=0,Ft=0,At=0,Mt=0,Xt=0,Dt=0,lt=0,Yt=0,jt=0,Pt=0,Wt=Ae[0],Ot=Ae[1],dt=Ae[2],zt=Ae[3],Ct=Ae[4],wt=Ae[5],Kt=Ae[6],mt=Ae[7],pt=Ae[8],Jt=Ae[9],ge=Ae[10],Ee=Ae[11],Me=Ae[12],se=Ae[13],Ie=Ae[14],De=Ae[15];le=Te[0],je+=le*Wt,Ve+=le*Ot,qe+=le*dt,Ze+=le*zt,Pe+=le*Ct,de+=le*wt,me+=le*Kt,Re+=le*mt,Fe+=le*pt,Ue+=le*Jt,ze+=le*ge,Qe+=le*Ee,Ye+=le*Me,ht+=le*se,at+=le*Ie,Ke+=le*De,le=Te[1],Ve+=le*Wt,qe+=le*Ot,Ze+=le*dt,Pe+=le*zt,de+=le*Ct,me+=le*wt,Re+=le*Kt,Fe+=le*mt,Ue+=le*pt,ze+=le*Jt,Qe+=le*ge,Ye+=le*Ee,ht+=le*Me,at+=le*se,Ke+=le*Ie,kt+=le*De,le=Te[2],qe+=le*Wt,Ze+=le*Ot,Pe+=le*dt,de+=le*zt,me+=le*Ct,Re+=le*wt,Fe+=le*Kt,Ue+=le*mt,ze+=le*pt,Qe+=le*Jt,Ye+=le*ge,ht+=le*Ee,at+=le*Me,Ke+=le*se,kt+=le*Ie,yt+=le*De,le=Te[3],Ze+=le*Wt,Pe+=le*Ot,de+=le*dt,me+=le*zt,Re+=le*Ct,Fe+=le*wt,Ue+=le*Kt,ze+=le*mt,Qe+=le*pt,Ye+=le*Jt,ht+=le*ge,at+=le*Ee,Ke+=le*Me,kt+=le*se,yt+=le*Ie,ct+=le*De,le=Te[4],Pe+=le*Wt,de+=le*Ot,me+=le*dt,Re+=le*zt,Fe+=le*Ct,Ue+=le*wt,ze+=le*Kt,Qe+=le*mt,Ye+=le*pt,ht+=le*Jt,at+=le*ge,Ke+=le*Ee,kt+=le*Me,yt+=le*se,ct+=le*Ie,Bt+=le*De,le=Te[5],de+=le*Wt,me+=le*Ot,Re+=le*dt,Fe+=le*zt,Ue+=le*Ct,ze+=le*wt,Qe+=le*Kt,Ye+=le*mt,ht+=le*pt,at+=le*Jt,Ke+=le*ge,kt+=le*Ee,yt+=le*Me,ct+=le*se,Bt+=le*Ie,Et+=le*De,le=Te[6],me+=le*Wt,Re+=le*Ot,Fe+=le*dt,Ue+=le*zt,ze+=le*Ct,Qe+=le*wt,Ye+=le*Kt,ht+=le*mt,at+=le*pt,Ke+=le*Jt,kt+=le*ge,yt+=le*Ee,ct+=le*Me,Bt+=le*se,Et+=le*Ie,et+=le*De,le=Te[7],Re+=le*Wt,Fe+=le*Ot,Ue+=le*dt,ze+=le*zt,Qe+=le*Ct,Ye+=le*wt,ht+=le*Kt,at+=le*mt,Ke+=le*pt,kt+=le*Jt,yt+=le*ge,ct+=le*Ee,Bt+=le*Me,Et+=le*se,et+=le*Ie,Ft+=le*De,le=Te[8],Fe+=le*Wt,Ue+=le*Ot,ze+=le*dt,Qe+=le*zt,Ye+=le*Ct,ht+=le*wt,at+=le*Kt,Ke+=le*mt,kt+=le*pt,yt+=le*Jt,ct+=le*ge,Bt+=le*Ee,Et+=le*Me,et+=le*se,Ft+=le*Ie,At+=le*De,le=Te[9],Ue+=le*Wt,ze+=le*Ot,Qe+=le*dt,Ye+=le*zt,ht+=le*Ct,at+=le*wt,Ke+=le*Kt,kt+=le*mt,yt+=le*pt,ct+=le*Jt,Bt+=le*ge,Et+=le*Ee,et+=le*Me,Ft+=le*se,At+=le*Ie,Mt+=le*De,le=Te[10],ze+=le*Wt,Qe+=le*Ot,Ye+=le*dt,ht+=le*zt,at+=le*Ct,Ke+=le*wt,kt+=le*Kt,yt+=le*mt,ct+=le*pt,Bt+=le*Jt,Et+=le*ge,et+=le*Ee,Ft+=le*Me,At+=le*se,Mt+=le*Ie,Xt+=le*De,le=Te[11],Qe+=le*Wt,Ye+=le*Ot,ht+=le*dt,at+=le*zt,Ke+=le*Ct,kt+=le*wt,yt+=le*Kt,ct+=le*mt,Bt+=le*pt,Et+=le*Jt,et+=le*ge,Ft+=le*Ee,At+=le*Me,Mt+=le*se,Xt+=le*Ie,Dt+=le*De,le=Te[12],Ye+=le*Wt,ht+=le*Ot,at+=le*dt,Ke+=le*zt,kt+=le*Ct,yt+=le*wt,ct+=le*Kt,Bt+=le*mt,Et+=le*pt,et+=le*Jt,Ft+=le*ge,At+=le*Ee,Mt+=le*Me,Xt+=le*se,Dt+=le*Ie,lt+=le*De,le=Te[13],ht+=le*Wt,at+=le*Ot,Ke+=le*dt,kt+=le*zt,yt+=le*Ct,ct+=le*wt,Bt+=le*Kt,Et+=le*mt,et+=le*pt,Ft+=le*Jt,At+=le*ge,Mt+=le*Ee,Xt+=le*Me,Dt+=le*se,lt+=le*Ie,Yt+=le*De,le=Te[14],at+=le*Wt,Ke+=le*Ot,kt+=le*dt,yt+=le*zt,ct+=le*Ct,Bt+=le*wt,Et+=le*Kt,et+=le*mt,Ft+=le*pt,At+=le*Jt,Mt+=le*ge,Xt+=le*Ee,Dt+=le*Me,lt+=le*se,Yt+=le*Ie,jt+=le*De,le=Te[15],Ke+=le*Wt,kt+=le*Ot,yt+=le*dt,ct+=le*zt,Bt+=le*Ct,Et+=le*wt,et+=le*Kt,Ft+=le*mt,At+=le*pt,Mt+=le*Jt,Xt+=le*ge,Dt+=le*Ee,lt+=le*Me,Yt+=le*se,jt+=le*Ie,Pt+=le*De,je+=38*kt,Ve+=38*yt,qe+=38*ct,Ze+=38*Bt,Pe+=38*Et,de+=38*et,me+=38*Ft,Re+=38*At,Fe+=38*Mt,Ue+=38*Xt,ze+=38*Dt,Qe+=38*lt,Ye+=38*Yt,ht+=38*jt,at+=38*Pt,ke=1,le=je+ke+65535,ke=Math.floor(le/65536),je=le-ke*65536,le=Ve+ke+65535,ke=Math.floor(le/65536),Ve=le-ke*65536,le=qe+ke+65535,ke=Math.floor(le/65536),qe=le-ke*65536,le=Ze+ke+65535,ke=Math.floor(le/65536),Ze=le-ke*65536,le=Pe+ke+65535,ke=Math.floor(le/65536),Pe=le-ke*65536,le=de+ke+65535,ke=Math.floor(le/65536),de=le-ke*65536,le=me+ke+65535,ke=Math.floor(le/65536),me=le-ke*65536,le=Re+ke+65535,ke=Math.floor(le/65536),Re=le-ke*65536,le=Fe+ke+65535,ke=Math.floor(le/65536),Fe=le-ke*65536,le=Ue+ke+65535,ke=Math.floor(le/65536),Ue=le-ke*65536,le=ze+ke+65535,ke=Math.floor(le/65536),ze=le-ke*65536,le=Qe+ke+65535,ke=Math.floor(le/65536),Qe=le-ke*65536,le=Ye+ke+65535,ke=Math.floor(le/65536),Ye=le-ke*65536,le=ht+ke+65535,ke=Math.floor(le/65536),ht=le-ke*65536,le=at+ke+65535,ke=Math.floor(le/65536),at=le-ke*65536,le=Ke+ke+65535,ke=Math.floor(le/65536),Ke=le-ke*65536,je+=ke-1+37*(ke-1),ke=1,le=je+ke+65535,ke=Math.floor(le/65536),je=le-ke*65536,le=Ve+ke+65535,ke=Math.floor(le/65536),Ve=le-ke*65536,le=qe+ke+65535,ke=Math.floor(le/65536),qe=le-ke*65536,le=Ze+ke+65535,ke=Math.floor(le/65536),Ze=le-ke*65536,le=Pe+ke+65535,ke=Math.floor(le/65536),Pe=le-ke*65536,le=de+ke+65535,ke=Math.floor(le/65536),de=le-ke*65536,le=me+ke+65535,ke=Math.floor(le/65536),me=le-ke*65536,le=Re+ke+65535,ke=Math.floor(le/65536),Re=le-ke*65536,le=Fe+ke+65535,ke=Math.floor(le/65536),Fe=le-ke*65536,le=Ue+ke+65535,ke=Math.floor(le/65536),Ue=le-ke*65536,le=ze+ke+65535,ke=Math.floor(le/65536),ze=le-ke*65536,le=Qe+ke+65535,ke=Math.floor(le/65536),Qe=le-ke*65536,le=Ye+ke+65535,ke=Math.floor(le/65536),Ye=le-ke*65536,le=ht+ke+65535,ke=Math.floor(le/65536),ht=le-ke*65536,le=at+ke+65535,ke=Math.floor(le/65536),at=le-ke*65536,le=Ke+ke+65535,ke=Math.floor(le/65536),Ke=le-ke*65536,je+=ke-1+37*(ke-1),Se[0]=je,Se[1]=Ve,Se[2]=qe,Se[3]=Ze,Se[4]=Pe,Se[5]=de,Se[6]=me,Se[7]=Re,Se[8]=Fe,Se[9]=Ue,Se[10]=ze,Se[11]=Qe,Se[12]=Ye,Se[13]=ht,Se[14]=at,Se[15]=Ke}function he(Se,Te){ee(Se,Te,Te)}function we(Se,Te){var Ae=$(),le;for(le=0;le<16;le++)Ae[le]=Te[le];for(le=253;le>=0;le--)he(Ae,Ae),le!==2&&le!==4&&ee(Ae,Ae,Te);for(le=0;le<16;le++)Se[le]=Ae[le]}function Ne(Se,Te){var Ae=$(),le;for(le=0;le<16;le++)Ae[le]=Te[le];for(le=250;le>=0;le--)he(Ae,Ae),le!==1&&ee(Ae,Ae,Te);for(le=0;le<16;le++)Se[le]=Ae[le]}function pe(Se,Te){var Ae=$(),le=$(),ke=$(),je=$(),Ve=$(),qe=$(),Ze=$(),Pe=$(),de=$();xe(Ae,Se[1],Se[0]),xe(de,Te[1],Te[0]),ee(Ae,Ae,de),be(le,Se[0],Se[1]),be(de,Te[0],Te[1]),ee(le,le,de),ee(ke,Se[3],Te[3]),ee(ke,ke,G),ee(je,Se[2],Te[2]),be(je,je,je),xe(Ve,le,Ae),xe(qe,je,ke),be(Ze,je,ke),be(Pe,le,Ae),ee(Se[0],Ve,qe),ee(Se[1],Pe,Ze),ee(Se[2],Ze,qe),ee(Se[3],Ve,Pe)}function te(Se,Te,Ae){for(var le=0;le<4;le++)ne(Se[le],Te[le],Ae)}function Y(Se,Te){var Ae=$(),le=$(),ke=$();we(ke,Te[2]),ee(Ae,Te[0],ke),ee(le,Te[1],ke),ce(Se,le),Se[31]^=$e(Ae)<<7}function R(Se,Te,Ae){ie(Se[0],N),ie(Se[1],C),ie(Se[2],C),ie(Se[3],N);for(var le=255;le>=0;--le){var ke=Ae[le/8|0]>>(le&7)&1;te(Se,Te,ke),pe(Te,Se),pe(Se,Se),te(Se,Te,ke)}}function B(Se,Te){var Ae=[$(),$(),$(),$()];ie(Ae[0],J),ie(Ae[1],Z),ie(Ae[2],C),ee(Ae[3],J,Z),R(Se,Ae,Te)}function V(Se){if(Se.length!==t.SEED_LENGTH)throw new Error("ed25519: seed must be "+t.SEED_LENGTH+" bytes");var Te=b.hash(Se);Te[0]&=248,Te[31]&=127,Te[31]|=64;var Ae=new Uint8Array(32),le=[$(),$(),$(),$()];B(le,Te),Y(Ae,le);var ke=new Uint8Array(64);return ke.set(Se),ke.set(Ae,32),{publicKey:Ae,secretKey:ke}}t.generateKeyPairFromSeed=V;function Q(Se){var Te=e.randomBytes(32,Se),Ae=V(Te);return w.wipe(Te),Ae}t.generateKeyPair=Q;function H(Se){if(Se.length!==t.SECRET_KEY_LENGTH)throw new Error("ed25519: secret key must be "+t.SECRET_KEY_LENGTH+" bytes");return new Uint8Array(Se.subarray(32))}t.extractPublicKeyFromSecretKey=H;var j=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function L(Se,Te){var Ae,le,ke,je;for(le=63;le>=32;--le){for(Ae=0,ke=le-32,je=le-12;ke<je;++ke)Te[ke]+=Ae-16*Te[le]*j[ke-(le-32)],Ae=Math.floor((Te[ke]+128)/256),Te[ke]-=Ae*256;Te[ke]+=Ae,Te[le]=0}for(Ae=0,ke=0;ke<32;ke++)Te[ke]+=Ae-(Te[31]>>4)*j[ke],Ae=Te[ke]>>8,Te[ke]&=255;for(ke=0;ke<32;ke++)Te[ke]-=Ae*j[ke];for(le=0;le<32;le++)Te[le+1]+=Te[le]>>8,Se[le]=Te[le]&255}function q(Se){for(var Te=new Float64Array(64),Ae=0;Ae<64;Ae++)Te[Ae]=Se[Ae];for(var Ae=0;Ae<64;Ae++)Se[Ae]=0;L(Se,Te)}function U(Se,Te){var Ae=new Float64Array(64),le=[$(),$(),$(),$()],ke=b.hash(Se.subarray(0,32));ke[0]&=248,ke[31]&=127,ke[31]|=64;var je=new Uint8Array(64);je.set(ke.subarray(32),32);var Ve=new b.SHA512;Ve.update(je.subarray(32)),Ve.update(Te);var qe=Ve.digest();Ve.clean(),q(qe),B(le,qe),Y(je,le),Ve.reset(),Ve.update(je.subarray(0,32)),Ve.update(Se.subarray(32)),Ve.update(Te);var Ze=Ve.digest();q(Ze);for(var Pe=0;Pe<32;Pe++)Ae[Pe]=qe[Pe];for(var Pe=0;Pe<32;Pe++)for(var de=0;de<32;de++)Ae[Pe+de]+=Ze[Pe]*ke[de];return L(je.subarray(32),Ae),je}t.sign=U;function oe(Se,Te){var Ae=$(),le=$(),ke=$(),je=$(),Ve=$(),qe=$(),Ze=$();return ie(Se[2],C),_e(Se[1],Te),he(ke,Se[1]),ee(je,ke,F),xe(ke,ke,Se[2]),be(je,Se[2],je),he(Ve,je),he(qe,Ve),ee(Ze,qe,Ve),ee(Ae,Ze,ke),ee(Ae,Ae,je),Ne(Ae,Ae),ee(Ae,Ae,ke),ee(Ae,Ae,je),ee(Ae,Ae,je),ee(Se[0],Ae,je),he(le,Se[0]),ee(le,le,je),ye(le,ke)&&ee(Se[0],Se[0],re),he(le,Se[0]),ee(le,le,je),ye(le,ke)?-1:($e(Se[0])===Te[31]>>7&&xe(Se[0],N,Se[0]),ee(Se[3],Se[0],Se[1]),0)}function ve(Se,Te,Ae){var le=new Uint8Array(32),ke=[$(),$(),$(),$()],je=[$(),$(),$(),$()];if(Ae.length!==t.SIGNATURE_LENGTH)throw new Error("ed25519: signature must be "+t.SIGNATURE_LENGTH+" bytes");if(oe(je,Se))return!1;var Ve=new b.SHA512;Ve.update(Ae.subarray(0,32)),Ve.update(Se),Ve.update(Te);var qe=Ve.digest();return q(qe),R(ke,je,qe),B(je,Ae.subarray(32)),pe(ke,je),Y(le,ke),!ae(Ae,le)}t.verify=ve;function fe(Se){var Te=[$(),$(),$(),$()];if(oe(Te,Se))throw new Error("Ed25519: invalid public key");var Ae=$(),le=$(),ke=Te[1];be(Ae,C,ke),xe(le,C,ke),we(le,le),ee(Ae,Ae,le);var je=new Uint8Array(32);return ce(je,Ae),je}t.convertPublicKeyToX25519=fe;function Oe(Se){var Te=b.hash(Se.subarray(0,32));Te[0]&=248,Te[31]&=127,Te[31]|=64;var Ae=new Uint8Array(Te.subarray(0,32));return w.wipe(Te),Ae}t.convertSecretKeyToX25519=Oe})(ed25519$1);var __createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$3(e,t,b);return __setModuleDefault$3(e,t),e};Object.defineProperty(ed25519$2,"__esModule",{value:!0});ed25519$2.keyToDidDoc=void 0;const u8a$2=__importStar$3(uint8arrays$7),ed25519_1=ed25519$1;function encodeKey(t){const e=new Uint8Array(t.length+2);return e[0]=236,e[1]=1,e.set(t,2),`z${u8a$2.toString(e,"base58btc")}`}function keyToDidDoc(t,e){const b=`did:key:${e}`,w=`${b}#${e}`,$=ed25519_1.convertPublicKeyToX25519(t),T=`${b}#${encodeKey($)}`;return{id:b,verificationMethod:[{id:w,type:"Ed25519VerificationKey2018",controller:b,publicKeyBase58:u8a$2.toString(t,"base58btc")}],authentication:[w],assertionMethod:[w],capabilityDelegation:[w],capabilityInvocation:[w],keyAgreement:[{id:T,type:"X25519KeyAgreementKey2019",controller:b,publicKeyBase58:u8a$2.toString($,"base58btc")}]}}ed25519$2.keyToDidDoc=keyToDidDoc;var __createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$2(e,t,b);return __setModuleDefault$2(e,t),e},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lib$2,"__esModule",{value:!0});var getResolver_1=lib$2.getResolver=void 0;const varint_1$1=__importDefault$1(varint$2),multibase_1=__importDefault$1(src$7.exports),secp256k1$2=__importStar$2(secp256k1$3),ed25519=__importStar$2(ed25519$2),DID_LD_JSON="application/did+ld+json",DID_JSON$1="application/did+json",prefixToDriverMap={231:secp256k1$2,237:ed25519};function getResolver(){return{key:async(t,e,b,w)=>{const $=w.accept||DID_JSON$1,T={didResolutionMetadata:{contentType:$},didDocument:null,didDocumentMetadata:{}};try{const N=multibase_1.default.decode(e.id),C=varint_1$1.default.decode(N),F=N.slice(varint_1$1.default.decode.bytes),G=await prefixToDriverMap[C].keyToDidDoc(F,e.id);$===DID_LD_JSON?(G["@context"]="https://w3id.org/did/v1",T.didDocument=G):$===DID_JSON$1?T.didDocument=G:(delete T.didResolutionMetadata.contentType,T.didResolutionMetadata.error="representationNotSupported")}catch(N){T.didResolutionMetadata.error="invalidDid",T.didResolutionMetadata.message=N.toString()}return T}}}getResolver_1=lib$2.getResolver=getResolver;lib$2.default={getResolver};const M={definitions:{cryptoAccounts:"kjzl6cwe1jw149z4rvwzi56mjjukafta30kojzktd9dsrgqdgz4wlnceu59f95f",alsoKnownAs:"kjzl6cwe1jw146zfmqa10a5x1vry6au3t362p44uttz4l0k4hi88o41zplhmxnf",basicProfile:"kjzl6cwe1jw145cjbeko9kil8g9bxszjhyde21ob8epxuxkaon1izyqsu8wgcic"},schemas:{CryptoAccounts:"ceramic://k3y52l7qbv1frypussjburqg4fykyyycfu0p9znc75lv2t5cg4xaslhagkd7h7mkg",AlsoKnownAs:"ceramic://k3y52l7qbv1fryojt8n8cw2k04p9wp67ly59iwqs65dejso566fij5wsdrb871yio",BasicProfile:"ceramic://k3y52l7qbv1frxt706gqfzmq6cbqdkptzk8uudaryhlkf6ly9vx21hqu4r6k1jqio"},tiles:{}};function f$1(t){try{return cjs.AccountID.parse(t),!0}catch{return!1}}var u$1=(t,e,b)=>{if(!e.has(t))throw TypeError("Cannot "+b)},a$1=(t,e,b)=>(u$1(t,e,"read from private field"),b?b.call(t):e.get(t)),d$1=(t,e,b)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,b)},l=(t,e,b,w)=>(u$1(t,e,"write to private field"),w?w.call(t,b):e.set(t,b),b),i,s$1,c$1,h$1;const k={local:"http://localhost:7007","mainnet-gateway":"https://gateway.ceramic.network","testnet-clay":"https://ceramic-clay.3boxlabs.com","testnet-clay-gateway":"https://gateway-clay.ceramic.network"};class I$1{constructor(e){var w,$;d$1(this,i,void 0),d$1(this,s$1,void 0),d$1(this,c$1,void 0),d$1(this,h$1,void 0);const b=(w=k[e.ceramic])!=null?w:e.ceramic;l(this,i,new ceramicHttpClient.CeramicClient(b)),l(this,s$1,new DataModel({autopin:!0,ceramic:a$1(this,i),model:($=e.model)!=null?$:M})),l(this,c$1,new A({autopin:!0,ceramic:a$1(this,i),model:a$1(this,s$1)})),l(this,h$1,new Resolver(Tt(Tt({},getResolver_1()),getResolver_1$1(a$1(this,i)))))}get ceramic(){return a$1(this,i)}get dataModel(){return a$1(this,s$1)}get dataStore(){return a$1(this,c$1)}get resolver(){return a$1(this,h$1)}async getAccountDID(e){const b=await lib$3.Caip10Link.fromAccount(a$1(this,i),e);if(b.did==null)throw new Error(`No DID found for ${e}`);return b.did}async toDID(e){return f$1(e)?await this.getAccountDID(e):e}async get(e,b){const w=await this.toDID(b);return await a$1(this,c$1).get(e,w)}}i=new WeakMap,s$1=new WeakMap,c$1=new WeakMap,h$1=new WeakMap,typeof require!="undefined"&&require;var lib$1={},types={};Object.defineProperty(types,"__esModule",{value:!0});var did={},require$$0$1=getAugmentedNamespace(resolver_module);function concat(t,e){e||(e=t.reduce(($,T)=>$+T.length,0));const b=new Uint8Array(e);let w=0;for(const $ of t)b.set($,w),w+=$.length;return b}function createCodec(t,e,b,w){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:b},decoder:{decode:w}}}const string=createCodec("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec("ascii","a",t=>{let e="a";for(let b=0;b<t.length;b++)e+=String.fromCharCode(t[b]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let b=0;b<t.length;b++)e[b]=t.charCodeAt(b);return e}),BASES=Tt({utf8:string,"utf-8":string,hex:bases$3.base16,latin1:ascii,ascii,binary:ascii},bases$3);function fromString(t,e="utf8"){const b=BASES[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.decoder.decode(`${b.prefix}${t}`)}function toString(t,e="utf8"){const b=BASES[e];if(!b)throw new Error(`Unsupported encoding "${e}"`);return b.encoder.encode(t).substring(1)}var elliptic={};const _args=[["elliptic@6.5.4","/home/anthony/projects/workspace_hackathon/ceramic-verified-artist"]],_from="elliptic@6.5.4",_id="elliptic@6.5.4",_inBundle=!1,_integrity="sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==",_location="/elliptic",_phantomChildren={},_requested={type:"version",registry:!0,raw:"elliptic@6.5.4",name:"elliptic",escapedName:"elliptic",rawSpec:"6.5.4",saveSpec:null,fetchSpec:"6.5.4"},_requiredBy=["/@ethersproject/signing-key","/did-jwt"],_resolved="https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz",_spec="6.5.4",_where="/home/anthony/projects/workspace_hackathon/ceramic-verified-artist",author={name:"Fedor Indutny",email:"fedor@indutny.com"},bugs={url:"https://github.com/indutny/elliptic/issues"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},description="EC cryptography",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},files=["lib"],homepage="https://github.com/indutny/elliptic",keywords=["EC","Elliptic","curve","Cryptography"],license="MIT",main="lib/elliptic.js",name="elliptic",repository={type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version="6.5.4";var require$$0={_args,_from,_id,_inBundle,_integrity,_location,_phantomChildren,_requested,_requiredBy,_resolved,_spec,_where,author,bugs,dependencies,description,devDependencies,files,homepage,keywords,license,main,name,repository,scripts,version},utils$d={},utils$c={};(function(t){var e=t;function b(T,N){if(Array.isArray(T))return T.slice();if(!T)return[];var C=[];if(typeof T!="string"){for(var F=0;F<T.length;F++)C[F]=T[F]|0;return C}if(N==="hex"){T=T.replace(/[^a-z0-9]+/ig,""),T.length%2!=0&&(T="0"+T);for(var F=0;F<T.length;F+=2)C.push(parseInt(T[F]+T[F+1],16))}else for(var F=0;F<T.length;F++){var G=T.charCodeAt(F),J=G>>8,Z=G&255;J?C.push(J,Z):C.push(Z)}return C}e.toArray=b;function w(T){return T.length===1?"0"+T:T}e.zero2=w;function $(T){for(var N="",C=0;C<T.length;C++)N+=w(T[C].toString(16));return N}e.toHex=$,e.encode=function(N,C){return C==="hex"?$(N):N}})(utils$c);(function(t){var e=t,b=bn$2.exports,w=minimalisticAssert$1,$=utils$c;e.assert=w,e.toArray=$.toArray,e.zero2=$.zero2,e.toHex=$.toHex,e.encode=$.encode;function T(J,Z,re){var ie=new Array(Math.max(J.bitLength(),re)+1);ie.fill(0);for(var ue=1<<Z+1,ne=J.clone(),ce=0;ce<ie.length;ce++){var ae,ye=ne.andln(ue-1);ne.isOdd()?(ye>(ue>>1)-1?ae=(ue>>1)-ye:ae=ye,ne.isubn(ae)):ae=0,ie[ce]=ae,ne.iushrn(1)}return ie}e.getNAF=T;function N(J,Z){var re=[[],[]];J=J.clone(),Z=Z.clone();for(var ie=0,ue=0,ne;J.cmpn(-ie)>0||Z.cmpn(-ue)>0;){var ce=J.andln(3)+ie&3,ae=Z.andln(3)+ue&3;ce===3&&(ce=-1),ae===3&&(ae=-1);var ye;(ce&1)==0?ye=0:(ne=J.andln(7)+ie&7,(ne===3||ne===5)&&ae===2?ye=-ce:ye=ce),re[0].push(ye);var $e;(ae&1)==0?$e=0:(ne=Z.andln(7)+ue&7,(ne===3||ne===5)&&ce===2?$e=-ae:$e=ae),re[1].push($e),2*ie===ye+1&&(ie=1-ie),2*ue===$e+1&&(ue=1-ue),J.iushrn(1),Z.iushrn(1)}return re}e.getJSF=N;function C(J,Z,re){var ie="_"+Z;J.prototype[Z]=function(){return this[ie]!==void 0?this[ie]:this[ie]=re.call(this)}}e.cachedProperty=C;function F(J){return typeof J=="string"?e.toArray(J,"hex"):J}e.parseBytes=F;function G(J){return new b(J,"hex","le")}e.intFromLE=G})(utils$d);var brorand={exports:{}},r;brorand.exports=function t(e){return r||(r=new Rand(null)),r.generate(e)};function Rand(t){this.rand=t}brorand.exports.Rand=Rand;Rand.prototype.generate=function t(e){return this._rand(e)};Rand.prototype._rand=function t(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var b=new Uint8Array(e),w=0;w<b.length;w++)b[w]=this.rand.getByte();return b};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(e){var b=new Uint8Array(e);return self.crypto.getRandomValues(b),b}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(e){var b=new Uint8Array(e);return self.msCrypto.getRandomValues(b),b}:typeof window=="object"&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto$1=require("crypto");if(typeof crypto$1.randomBytes!="function")throw new Error("Not supported");Rand.prototype._rand=function(e){return crypto$1.randomBytes(e)}}catch{}var curve={},BN$7=bn$2.exports,utils$b=utils$d,getNAF=utils$b.getNAF,getJSF=utils$b.getJSF,assert$9=utils$b.assert;function BaseCurve(t,e){this.type=t,this.p=new BN$7(e.p,16),this.red=e.prime?BN$7.red(e.prime):BN$7.mont(this.p),this.zero=new BN$7(0).toRed(this.red),this.one=new BN$7(1).toRed(this.red),this.two=new BN$7(2).toRed(this.red),this.n=e.n&&new BN$7(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var b=this.n&&this.p.div(this.n);!b||b.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;BaseCurve.prototype.point=function t(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function t(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function t(e,b){assert$9(e.precomputed);var w=e._getDoubles(),$=getNAF(b,1,this._bitLength),T=(1<<w.step+1)-(w.step%2==0?2:1);T/=3;var N=[],C,F;for(C=0;C<$.length;C+=w.step){F=0;for(var G=C+w.step-1;G>=C;G--)F=(F<<1)+$[G];N.push(F)}for(var J=this.jpoint(null,null,null),Z=this.jpoint(null,null,null),re=T;re>0;re--){for(C=0;C<N.length;C++)F=N[C],F===re?Z=Z.mixedAdd(w.points[C]):F===-re&&(Z=Z.mixedAdd(w.points[C].neg()));J=J.add(Z)}return J.toP()};BaseCurve.prototype._wnafMul=function t(e,b){var w=4,$=e._getNAFPoints(w);w=$.wnd;for(var T=$.points,N=getNAF(b,w,this._bitLength),C=this.jpoint(null,null,null),F=N.length-1;F>=0;F--){for(var G=0;F>=0&&N[F]===0;F--)G++;if(F>=0&&G++,C=C.dblp(G),F<0)break;var J=N[F];assert$9(J!==0),e.type==="affine"?J>0?C=C.mixedAdd(T[J-1>>1]):C=C.mixedAdd(T[-J-1>>1].neg()):J>0?C=C.add(T[J-1>>1]):C=C.add(T[-J-1>>1].neg())}return e.type==="affine"?C.toP():C};BaseCurve.prototype._wnafMulAdd=function t(e,b,w,$,T){var N=this._wnafT1,C=this._wnafT2,F=this._wnafT3,G=0,J,Z,re;for(J=0;J<$;J++){re=b[J];var ie=re._getNAFPoints(e);N[J]=ie.wnd,C[J]=ie.points}for(J=$-1;J>=1;J-=2){var ue=J-1,ne=J;if(N[ue]!==1||N[ne]!==1){F[ue]=getNAF(w[ue],N[ue],this._bitLength),F[ne]=getNAF(w[ne],N[ne],this._bitLength),G=Math.max(F[ue].length,G),G=Math.max(F[ne].length,G);continue}var ce=[b[ue],null,null,b[ne]];b[ue].y.cmp(b[ne].y)===0?(ce[1]=b[ue].add(b[ne]),ce[2]=b[ue].toJ().mixedAdd(b[ne].neg())):b[ue].y.cmp(b[ne].y.redNeg())===0?(ce[1]=b[ue].toJ().mixedAdd(b[ne]),ce[2]=b[ue].add(b[ne].neg())):(ce[1]=b[ue].toJ().mixedAdd(b[ne]),ce[2]=b[ue].toJ().mixedAdd(b[ne].neg()));var ae=[-3,-1,-5,-7,0,7,5,1,3],ye=getJSF(w[ue],w[ne]);for(G=Math.max(ye[0].length,G),F[ue]=new Array(G),F[ne]=new Array(G),Z=0;Z<G;Z++){var $e=ye[0][Z]|0,_e=ye[1][Z]|0;F[ue][Z]=ae[($e+1)*3+(_e+1)],F[ne][Z]=0,C[ue]=ce}}var be=this.jpoint(null,null,null),xe=this._wnafT4;for(J=G;J>=0;J--){for(var ee=0;J>=0;){var he=!0;for(Z=0;Z<$;Z++)xe[Z]=F[Z][J]|0,xe[Z]!==0&&(he=!1);if(!he)break;ee++,J--}if(J>=0&&ee++,be=be.dblp(ee),J<0)break;for(Z=0;Z<$;Z++){var we=xe[Z];we!==0&&(we>0?re=C[Z][we-1>>1]:we<0&&(re=C[Z][-we-1>>1].neg()),re.type==="affine"?be=be.mixedAdd(re):be=be.add(re))}}for(J=0;J<$;J++)C[J]=null;return T?be:be.toP()};function BasePoint(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function t(){throw new Error("Not implemented")};BasePoint.prototype.validate=function t(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function t(e,b){e=utils$b.toArray(e,b);var w=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*w){e[0]===6?assert$9(e[e.length-1]%2==0):e[0]===7&&assert$9(e[e.length-1]%2==1);var $=this.point(e.slice(1,1+w),e.slice(1+w,1+2*w));return $}else if((e[0]===2||e[0]===3)&&e.length-1===w)return this.pointFromX(e.slice(1,1+w),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function t(e){return this.encode(e,!0)};BasePoint.prototype._encode=function t(e){var b=this.curve.p.byteLength(),w=this.getX().toArray("be",b);return e?[this.getY().isEven()?2:3].concat(w):[4].concat(w,this.getY().toArray("be",b))};BasePoint.prototype.encode=function t(e,b){return utils$b.encode(this._encode(b),e)};BasePoint.prototype.precompute=function t(e){if(this.precomputed)return this;var b={doubles:null,naf:null,beta:null};return b.naf=this._getNAFPoints(8),b.doubles=this._getDoubles(4,e),b.beta=this._getBeta(),this.precomputed=b,this};BasePoint.prototype._hasDoubles=function t(e){if(!this.precomputed)return!1;var b=this.precomputed.doubles;return b?b.points.length>=Math.ceil((e.bitLength()+1)/b.step):!1};BasePoint.prototype._getDoubles=function t(e,b){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var w=[this],$=this,T=0;T<b;T+=e){for(var N=0;N<e;N++)$=$.dbl();w.push($)}return{step:e,points:w}};BasePoint.prototype._getNAFPoints=function t(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var b=[this],w=(1<<e)-1,$=w===1?null:this.dbl(),T=1;T<w;T++)b[T]=b[T-1].add($);return{wnd:e,points:b}};BasePoint.prototype._getBeta=function t(){return null};BasePoint.prototype.dblp=function t(e){for(var b=this,w=0;w<e;w++)b=b.dbl();return b};var utils$a=utils$d,BN$6=bn$2.exports,inherits$2=inherits_browser$1.exports,Base$2=base,assert$8=utils$a.assert;function ShortCurve(t){Base$2.call(this,"short",t),this.a=new BN$6(t.a,16).toRed(this.red),this.b=new BN$6(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$2(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function t(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var b,w;if(e.beta)b=new BN$6(e.beta,16).toRed(this.red);else{var $=this._getEndoRoots(this.p);b=$[0].cmp($[1])<0?$[0]:$[1],b=b.toRed(this.red)}if(e.lambda)w=new BN$6(e.lambda,16);else{var T=this._getEndoRoots(this.n);this.g.mul(T[0]).x.cmp(this.g.x.redMul(b))===0?w=T[0]:(w=T[1],assert$8(this.g.mul(w).x.cmp(this.g.x.redMul(b))===0))}var N;return e.basis?N=e.basis.map(function(C){return{a:new BN$6(C.a,16),b:new BN$6(C.b,16)}}):N=this._getEndoBasis(w),{beta:b,lambda:w,basis:N}}};ShortCurve.prototype._getEndoRoots=function t(e){var b=e===this.p?this.red:BN$6.mont(e),w=new BN$6(2).toRed(b).redInvm(),$=w.redNeg(),T=new BN$6(3).toRed(b).redNeg().redSqrt().redMul(w),N=$.redAdd(T).fromRed(),C=$.redSub(T).fromRed();return[N,C]};ShortCurve.prototype._getEndoBasis=function t(e){for(var b=this.n.ushrn(Math.floor(this.n.bitLength()/2)),w=e,$=this.n.clone(),T=new BN$6(1),N=new BN$6(0),C=new BN$6(0),F=new BN$6(1),G,J,Z,re,ie,ue,ne,ce=0,ae,ye;w.cmpn(0)!==0;){var $e=$.div(w);ae=$.sub($e.mul(w)),ye=C.sub($e.mul(T));var _e=F.sub($e.mul(N));if(!Z&&ae.cmp(b)<0)G=ne.neg(),J=T,Z=ae.neg(),re=ye;else if(Z&&++ce==2)break;ne=ae,$=w,w=ae,C=T,T=ye,F=N,N=_e}ie=ae.neg(),ue=ye;var be=Z.sqr().add(re.sqr()),xe=ie.sqr().add(ue.sqr());return xe.cmp(be)>=0&&(ie=G,ue=J),Z.negative&&(Z=Z.neg(),re=re.neg()),ie.negative&&(ie=ie.neg(),ue=ue.neg()),[{a:Z,b:re},{a:ie,b:ue}]};ShortCurve.prototype._endoSplit=function t(e){var b=this.endo.basis,w=b[0],$=b[1],T=$.b.mul(e).divRound(this.n),N=w.b.neg().mul(e).divRound(this.n),C=T.mul(w.a),F=N.mul($.a),G=T.mul(w.b),J=N.mul($.b),Z=e.sub(C).sub(F),re=G.add(J).neg();return{k1:Z,k2:re}};ShortCurve.prototype.pointFromX=function t(e,b){e=new BN$6(e,16),e.red||(e=e.toRed(this.red));var w=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),$=w.redSqrt();if($.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");var T=$.fromRed().isOdd();return(b&&!T||!b&&T)&&($=$.redNeg()),this.point(e,$)};ShortCurve.prototype.validate=function t(e){if(e.inf)return!0;var b=e.x,w=e.y,$=this.a.redMul(b),T=b.redSqr().redMul(b).redIAdd($).redIAdd(this.b);return w.redSqr().redISub(T).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function t(e,b,w){for(var $=this._endoWnafT1,T=this._endoWnafT2,N=0;N<e.length;N++){var C=this._endoSplit(b[N]),F=e[N],G=F._getBeta();C.k1.negative&&(C.k1.ineg(),F=F.neg(!0)),C.k2.negative&&(C.k2.ineg(),G=G.neg(!0)),$[N*2]=F,$[N*2+1]=G,T[N*2]=C.k1,T[N*2+1]=C.k2}for(var J=this._wnafMulAdd(1,$,T,N*2,w),Z=0;Z<N*2;Z++)$[Z]=null,T[Z]=null;return J};function Point$2(t,e,b,w){Base$2.BasePoint.call(this,t,"affine"),e===null&&b===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$6(e,16),this.y=new BN$6(b,16),w&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$2(Point$2,Base$2.BasePoint);ShortCurve.prototype.point=function t(e,b,w){return new Point$2(this,e,b,w)};ShortCurve.prototype.pointFromJSON=function t(e,b){return Point$2.fromJSON(this,e,b)};Point$2.prototype._getBeta=function t(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var w=this.curve,$=function(T){return w.point(T.x.redMul(w.endo.beta),T.y)};e.beta=b,b.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map($)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map($)}}}return b}};Point$2.prototype.toJSON=function t(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$2.fromJSON=function t(e,b,w){typeof b=="string"&&(b=JSON.parse(b));var $=e.point(b[0],b[1],w);if(!b[2])return $;function T(C){return e.point(C[0],C[1],w)}var N=b[2];return $.precomputed={beta:null,doubles:N.doubles&&{step:N.doubles.step,points:[$].concat(N.doubles.points.map(T))},naf:N.naf&&{wnd:N.naf.wnd,points:[$].concat(N.naf.points.map(T))}},$};Point$2.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function t(){return this.inf};Point$2.prototype.add=function t(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var b=this.y.redSub(e.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(e.x).redInvm()));var w=b.redSqr().redISub(this.x).redISub(e.x),$=b.redMul(this.x.redSub(w)).redISub(this.y);return this.curve.point(w,$)};Point$2.prototype.dbl=function t(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,w=this.x.redSqr(),$=e.redInvm(),T=w.redAdd(w).redIAdd(w).redIAdd(b).redMul($),N=T.redSqr().redISub(this.x.redAdd(this.x)),C=T.redMul(this.x.redSub(N)).redISub(this.y);return this.curve.point(N,C)};Point$2.prototype.getX=function t(){return this.x.fromRed()};Point$2.prototype.getY=function t(){return this.y.fromRed()};Point$2.prototype.mul=function t(e){return e=new BN$6(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$2.prototype.mulAdd=function t(e,b,w){var $=[this,b],T=[e,w];return this.curve.endo?this.curve._endoWnafMulAdd($,T):this.curve._wnafMulAdd(1,$,T,2)};Point$2.prototype.jmulAdd=function t(e,b,w){var $=[this,b],T=[e,w];return this.curve.endo?this.curve._endoWnafMulAdd($,T,!0):this.curve._wnafMulAdd(1,$,T,2,!0)};Point$2.prototype.eq=function t(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$2.prototype.neg=function t(e){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var w=this.precomputed,$=function(T){return T.neg()};b.precomputed={naf:w.naf&&{wnd:w.naf.wnd,points:w.naf.points.map($)},doubles:w.doubles&&{step:w.doubles.step,points:w.doubles.points.map($)}}}return b};Point$2.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(t,e,b,w){Base$2.BasePoint.call(this,t,"jacobian"),e===null&&b===null&&w===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$6(0)):(this.x=new BN$6(e,16),this.y=new BN$6(b,16),this.z=new BN$6(w,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$2(JPoint,Base$2.BasePoint);ShortCurve.prototype.jpoint=function t(e,b,w){return new JPoint(this,e,b,w)};JPoint.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),b=e.redSqr(),w=this.x.redMul(b),$=this.y.redMul(b).redMul(e);return this.curve.point(w,$)};JPoint.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function t(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var b=e.z.redSqr(),w=this.z.redSqr(),$=this.x.redMul(b),T=e.x.redMul(w),N=this.y.redMul(b.redMul(e.z)),C=e.y.redMul(w.redMul(this.z)),F=$.redSub(T),G=N.redSub(C);if(F.cmpn(0)===0)return G.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var J=F.redSqr(),Z=J.redMul(F),re=$.redMul(J),ie=G.redSqr().redIAdd(Z).redISub(re).redISub(re),ue=G.redMul(re.redISub(ie)).redISub(N.redMul(Z)),ne=this.z.redMul(e.z).redMul(F);return this.curve.jpoint(ie,ue,ne)};JPoint.prototype.mixedAdd=function t(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var b=this.z.redSqr(),w=this.x,$=e.x.redMul(b),T=this.y,N=e.y.redMul(b).redMul(this.z),C=w.redSub($),F=T.redSub(N);if(C.cmpn(0)===0)return F.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var G=C.redSqr(),J=G.redMul(C),Z=w.redMul(G),re=F.redSqr().redIAdd(J).redISub(Z).redISub(Z),ie=F.redMul(Z.redISub(re)).redISub(T.redMul(J)),ue=this.z.redMul(C);return this.curve.jpoint(re,ie,ue)};JPoint.prototype.dblp=function t(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var w=this;for(b=0;b<e;b++)w=w.dbl();return w}var $=this.curve.a,T=this.curve.tinv,N=this.x,C=this.y,F=this.z,G=F.redSqr().redSqr(),J=C.redAdd(C);for(b=0;b<e;b++){var Z=N.redSqr(),re=J.redSqr(),ie=re.redSqr(),ue=Z.redAdd(Z).redIAdd(Z).redIAdd($.redMul(G)),ne=N.redMul(re),ce=ue.redSqr().redISub(ne.redAdd(ne)),ae=ne.redISub(ce),ye=ue.redMul(ae);ye=ye.redIAdd(ye).redISub(ie);var $e=J.redMul(F);b+1<e&&(G=G.redMul(ie)),N=ce,F=$e,J=ye}return this.curve.jpoint(N,J.redMul(T),F)};JPoint.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function t(){var e,b,w;if(this.zOne){var $=this.x.redSqr(),T=this.y.redSqr(),N=T.redSqr(),C=this.x.redAdd(T).redSqr().redISub($).redISub(N);C=C.redIAdd(C);var F=$.redAdd($).redIAdd($),G=F.redSqr().redISub(C).redISub(C),J=N.redIAdd(N);J=J.redIAdd(J),J=J.redIAdd(J),e=G,b=F.redMul(C.redISub(G)).redISub(J),w=this.y.redAdd(this.y)}else{var Z=this.x.redSqr(),re=this.y.redSqr(),ie=re.redSqr(),ue=this.x.redAdd(re).redSqr().redISub(Z).redISub(ie);ue=ue.redIAdd(ue);var ne=Z.redAdd(Z).redIAdd(Z),ce=ne.redSqr(),ae=ie.redIAdd(ie);ae=ae.redIAdd(ae),ae=ae.redIAdd(ae),e=ce.redISub(ue).redISub(ue),b=ne.redMul(ue.redISub(e)).redISub(ae),w=this.y.redMul(this.z),w=w.redIAdd(w)}return this.curve.jpoint(e,b,w)};JPoint.prototype._threeDbl=function t(){var e,b,w;if(this.zOne){var $=this.x.redSqr(),T=this.y.redSqr(),N=T.redSqr(),C=this.x.redAdd(T).redSqr().redISub($).redISub(N);C=C.redIAdd(C);var F=$.redAdd($).redIAdd($).redIAdd(this.curve.a),G=F.redSqr().redISub(C).redISub(C);e=G;var J=N.redIAdd(N);J=J.redIAdd(J),J=J.redIAdd(J),b=F.redMul(C.redISub(G)).redISub(J),w=this.y.redAdd(this.y)}else{var Z=this.z.redSqr(),re=this.y.redSqr(),ie=this.x.redMul(re),ue=this.x.redSub(Z).redMul(this.x.redAdd(Z));ue=ue.redAdd(ue).redIAdd(ue);var ne=ie.redIAdd(ie);ne=ne.redIAdd(ne);var ce=ne.redAdd(ne);e=ue.redSqr().redISub(ce),w=this.y.redAdd(this.z).redSqr().redISub(re).redISub(Z);var ae=re.redSqr();ae=ae.redIAdd(ae),ae=ae.redIAdd(ae),ae=ae.redIAdd(ae),b=ue.redMul(ne.redISub(e)).redISub(ae)}return this.curve.jpoint(e,b,w)};JPoint.prototype._dbl=function t(){var e=this.curve.a,b=this.x,w=this.y,$=this.z,T=$.redSqr().redSqr(),N=b.redSqr(),C=w.redSqr(),F=N.redAdd(N).redIAdd(N).redIAdd(e.redMul(T)),G=b.redAdd(b);G=G.redIAdd(G);var J=G.redMul(C),Z=F.redSqr().redISub(J.redAdd(J)),re=J.redISub(Z),ie=C.redSqr();ie=ie.redIAdd(ie),ie=ie.redIAdd(ie),ie=ie.redIAdd(ie);var ue=F.redMul(re).redISub(ie),ne=w.redAdd(w).redMul($);return this.curve.jpoint(Z,ue,ne)};JPoint.prototype.trpl=function t(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),b=this.y.redSqr(),w=this.z.redSqr(),$=b.redSqr(),T=e.redAdd(e).redIAdd(e),N=T.redSqr(),C=this.x.redAdd(b).redSqr().redISub(e).redISub($);C=C.redIAdd(C),C=C.redAdd(C).redIAdd(C),C=C.redISub(N);var F=C.redSqr(),G=$.redIAdd($);G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G);var J=T.redIAdd(C).redSqr().redISub(N).redISub(F).redISub(G),Z=b.redMul(J);Z=Z.redIAdd(Z),Z=Z.redIAdd(Z);var re=this.x.redMul(F).redISub(Z);re=re.redIAdd(re),re=re.redIAdd(re);var ie=this.y.redMul(J.redMul(G.redISub(J)).redISub(C.redMul(F)));ie=ie.redIAdd(ie),ie=ie.redIAdd(ie),ie=ie.redIAdd(ie);var ue=this.z.redAdd(C).redSqr().redISub(w).redISub(F);return this.curve.jpoint(re,ie,ue)};JPoint.prototype.mul=function t(e,b){return e=new BN$6(e,b),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function t(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var b=this.z.redSqr(),w=e.z.redSqr();if(this.x.redMul(w).redISub(e.x.redMul(b)).cmpn(0)!==0)return!1;var $=b.redMul(this.z),T=w.redMul(e.z);return this.y.redMul(T).redISub(e.y.redMul($)).cmpn(0)===0};JPoint.prototype.eqXToP=function t(e){var b=this.z.redSqr(),w=e.toRed(this.curve.red).redMul(b);if(this.x.cmp(w)===0)return!0;for(var $=e.clone(),T=this.curve.redN.redMul(b);;){if($.iadd(this.curve.n),$.cmp(this.curve.p)>=0)return!1;if(w.redIAdd(T),this.x.cmp(w)===0)return!0}};JPoint.prototype.inspect=function t(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};var BN$5=bn$2.exports,inherits$1=inherits_browser$1.exports,Base$1=base,utils$9=utils$d;function MontCurve(t){Base$1.call(this,"mont",t),this.a=new BN$5(t.a,16).toRed(this.red),this.b=new BN$5(t.b,16).toRed(this.red),this.i4=new BN$5(4).toRed(this.red).redInvm(),this.two=new BN$5(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$1(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function t(e){var b=e.normalize().x,w=b.redSqr(),$=w.redMul(b).redAdd(w.redMul(this.a)).redAdd(b),T=$.redSqrt();return T.redSqr().cmp($)===0};function Point$1(t,e,b){Base$1.BasePoint.call(this,t,"projective"),e===null&&b===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$5(e,16),this.z=new BN$5(b,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$1(Point$1,Base$1.BasePoint);MontCurve.prototype.decodePoint=function t(e,b){return this.point(utils$9.toArray(e,b),1)};MontCurve.prototype.point=function t(e,b){return new Point$1(this,e,b)};MontCurve.prototype.pointFromJSON=function t(e){return Point$1.fromJSON(this,e)};Point$1.prototype.precompute=function t(){};Point$1.prototype._encode=function t(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$1.fromJSON=function t(e,b){return new Point$1(e,b[0],b[1]||e.one)};Point$1.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function t(){var e=this.x.redAdd(this.z),b=e.redSqr(),w=this.x.redSub(this.z),$=w.redSqr(),T=b.redSub($),N=b.redMul($),C=T.redMul($.redAdd(this.curve.a24.redMul(T)));return this.curve.point(N,C)};Point$1.prototype.add=function t(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function t(e,b){var w=this.x.redAdd(this.z),$=this.x.redSub(this.z),T=e.x.redAdd(e.z),N=e.x.redSub(e.z),C=N.redMul(w),F=T.redMul($),G=b.z.redMul(C.redAdd(F).redSqr()),J=b.x.redMul(C.redISub(F).redSqr());return this.curve.point(G,J)};Point$1.prototype.mul=function t(e){for(var b=e.clone(),w=this,$=this.curve.point(null,null),T=this,N=[];b.cmpn(0)!==0;b.iushrn(1))N.push(b.andln(1));for(var C=N.length-1;C>=0;C--)N[C]===0?(w=w.diffAdd($,T),$=$.dbl()):($=w.diffAdd($,T),w=w.dbl());return $};Point$1.prototype.mulAdd=function t(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function t(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function t(e){return this.getX().cmp(e.getX())===0};Point$1.prototype.normalize=function t(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$1.prototype.getX=function t(){return this.normalize(),this.x.fromRed()};var utils$8=utils$d,BN$4=bn$2.exports,inherits=inherits_browser$1.exports,Base=base,assert$7=utils$8.assert;function EdwardsCurve(t){this.twisted=(t.a|0)!=1,this.mOneA=this.twisted&&(t.a|0)==-1,this.extended=this.mOneA,Base.call(this,"edwards",t),this.a=new BN$4(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$4(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$4(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$7(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)==1}inherits(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function t(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function t(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function t(e,b,w,$){return this.point(e,b,w,$)};EdwardsCurve.prototype.pointFromX=function t(e,b){e=new BN$4(e,16),e.red||(e=e.toRed(this.red));var w=e.redSqr(),$=this.c2.redSub(this.a.redMul(w)),T=this.one.redSub(this.c2.redMul(this.d).redMul(w)),N=$.redMul(T.redInvm()),C=N.redSqrt();if(C.redSqr().redSub(N).cmp(this.zero)!==0)throw new Error("invalid point");var F=C.fromRed().isOdd();return(b&&!F||!b&&F)&&(C=C.redNeg()),this.point(e,C)};EdwardsCurve.prototype.pointFromY=function t(e,b){e=new BN$4(e,16),e.red||(e=e.toRed(this.red));var w=e.redSqr(),$=w.redSub(this.c2),T=w.redMul(this.d).redMul(this.c2).redSub(this.a),N=$.redMul(T.redInvm());if(N.cmp(this.zero)===0){if(b)throw new Error("invalid point");return this.point(this.zero,e)}var C=N.redSqrt();if(C.redSqr().redSub(N).cmp(this.zero)!==0)throw new Error("invalid point");return C.fromRed().isOdd()!==b&&(C=C.redNeg()),this.point(C,e)};EdwardsCurve.prototype.validate=function t(e){if(e.isInfinity())return!0;e.normalize();var b=e.x.redSqr(),w=e.y.redSqr(),$=b.redMul(this.a).redAdd(w),T=this.c2.redMul(this.one.redAdd(this.d.redMul(b).redMul(w)));return $.cmp(T)===0};function Point(t,e,b,w,$){Base.BasePoint.call(this,t,"projective"),e===null&&b===null&&w===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$4(e,16),this.y=new BN$4(b,16),this.z=w?new BN$4(w,16):this.curve.one,this.t=$&&new BN$4($,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function t(e){return Point.fromJSON(this,e)};EdwardsCurve.prototype.point=function t(e,b,w,$){return new Point(this,e,b,w,$)};Point.fromJSON=function t(e,b){return new Point(e,b[0],b[1],b[2])};Point.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function t(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function t(){var e=this.x.redSqr(),b=this.y.redSqr(),w=this.z.redSqr();w=w.redIAdd(w);var $=this.curve._mulA(e),T=this.x.redAdd(this.y).redSqr().redISub(e).redISub(b),N=$.redAdd(b),C=N.redSub(w),F=$.redSub(b),G=T.redMul(C),J=N.redMul(F),Z=T.redMul(F),re=C.redMul(N);return this.curve.point(G,J,re,Z)};Point.prototype._projDbl=function t(){var e=this.x.redAdd(this.y).redSqr(),b=this.x.redSqr(),w=this.y.redSqr(),$,T,N,C,F,G;if(this.curve.twisted){C=this.curve._mulA(b);var J=C.redAdd(w);this.zOne?($=e.redSub(b).redSub(w).redMul(J.redSub(this.curve.two)),T=J.redMul(C.redSub(w)),N=J.redSqr().redSub(J).redSub(J)):(F=this.z.redSqr(),G=J.redSub(F).redISub(F),$=e.redSub(b).redISub(w).redMul(G),T=J.redMul(C.redSub(w)),N=J.redMul(G))}else C=b.redAdd(w),F=this.curve._mulC(this.z).redSqr(),G=C.redSub(F).redSub(F),$=this.curve._mulC(e.redISub(C)).redMul(G),T=this.curve._mulC(C).redMul(b.redISub(w)),N=C.redMul(G);return this.curve.point($,T,N)};Point.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point.prototype._extAdd=function t(e){var b=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),w=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),$=this.t.redMul(this.curve.dd).redMul(e.t),T=this.z.redMul(e.z.redAdd(e.z)),N=w.redSub(b),C=T.redSub($),F=T.redAdd($),G=w.redAdd(b),J=N.redMul(C),Z=F.redMul(G),re=N.redMul(G),ie=C.redMul(F);return this.curve.point(J,Z,ie,re)};Point.prototype._projAdd=function t(e){var b=this.z.redMul(e.z),w=b.redSqr(),$=this.x.redMul(e.x),T=this.y.redMul(e.y),N=this.curve.d.redMul($).redMul(T),C=w.redSub(N),F=w.redAdd(N),G=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub($).redISub(T),J=b.redMul(C).redMul(G),Z,re;return this.curve.twisted?(Z=b.redMul(F).redMul(T.redSub(this.curve._mulA($))),re=C.redMul(F)):(Z=b.redMul(F).redMul(T.redSub($)),re=this.curve._mulC(C).redMul(F)),this.curve.point(J,Z,re)};Point.prototype.add=function t(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point.prototype.mul=function t(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function t(e,b,w){return this.curve._wnafMulAdd(1,[this,b],[e,w],2,!1)};Point.prototype.jmulAdd=function t(e,b,w){return this.curve._wnafMulAdd(1,[this,b],[e,w],2,!0)};Point.prototype.normalize=function t(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point.prototype.neg=function t(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function t(){return this.normalize(),this.x.fromRed()};Point.prototype.getY=function t(){return this.normalize(),this.y.fromRed()};Point.prototype.eq=function t(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point.prototype.eqXToP=function t(e){var b=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(b)===0)return!0;for(var w=e.clone(),$=this.curve.redN.redMul(this.z);;){if(w.iadd(this.curve.n),w.cmp(this.curve.p)>=0)return!1;if(b.redIAdd($),this.x.cmp(b)===0)return!0}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;(function(t){var e=t;e.base=base,e.short=short,e.mont=mont,e.edwards=edwards})(curve);var curves$2={};(function(t){var e=t,b=hash$3,w=curve,$=utils$d,T=$.assert;function N(G){G.type==="short"?this.curve=new w.short(G):G.type==="edwards"?this.curve=new w.edwards(G):this.curve=new w.mont(G),this.g=this.curve.g,this.n=this.curve.n,this.hash=G.hash,T(this.g.validate(),"Invalid curve"),T(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=N;function C(G,J){Object.defineProperty(e,G,{configurable:!0,enumerable:!0,get:function(){var Z=new N(J);return Object.defineProperty(e,G,{configurable:!0,enumerable:!0,value:Z}),Z}})}C("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:b.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),C("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:b.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),C("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:b.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),C("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:b.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),C("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:b.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),C("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:b.sha256,gRed:!1,g:["9"]}),C("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:b.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var F;try{F=require("./precomputed/secp256k1")}catch{F=void 0}C("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:b.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",F]})})(curves$2);var hash$1=hash$3,utils$7=utils$c,assert$6=minimalisticAssert$1;function HmacDRBG$1(t){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$7.toArray(t.entropy,t.entropyEnc||"hex"),b=utils$7.toArray(t.nonce,t.nonceEnc||"hex"),w=utils$7.toArray(t.pers,t.persEnc||"hex");assert$6(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,b,w)}var hmacDrbg=HmacDRBG$1;HmacDRBG$1.prototype._init=function t(e,b,w){var $=e.concat(b).concat(w);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var T=0;T<this.V.length;T++)this.K[T]=0,this.V[T]=1;this._update($),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function t(){return new hash$1.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function t(e){var b=this._hmac().update(this.V).update([0]);e&&(b=b.update(e)),this.K=b.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function t(e,b,w,$){typeof b!="string"&&($=w,w=b,b=null),e=utils$7.toArray(e,b),w=utils$7.toArray(w,$),assert$6(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(w||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function t(e,b,w,$){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof b!="string"&&($=w,w=b,b=null),w&&(w=utils$7.toArray(w,$||"hex"),this._update(w));for(var T=[];T.length<e;)this.V=this._hmac().update(this.V).digest(),T=T.concat(this.V);var N=T.slice(0,e);return this._update(w),this._reseed++,utils$7.encode(N,b)};var BN$3=bn$2.exports,utils$6=utils$d,assert$5=utils$6.assert;function KeyPair$3(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$1=KeyPair$3;KeyPair$3.fromPublic=function t(e,b,w){return b instanceof KeyPair$3?b:new KeyPair$3(e,{pub:b,pubEnc:w})};KeyPair$3.fromPrivate=function t(e,b,w){return b instanceof KeyPair$3?b:new KeyPair$3(e,{priv:b,privEnc:w})};KeyPair$3.prototype.validate=function t(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function t(e,b){return typeof e=="string"&&(b=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),b?this.pub.encode(b,e):this.pub};KeyPair$3.prototype.getPrivate=function t(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function t(e,b){this.priv=new BN$3(e,b||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function t(e,b){if(e.x||e.y){this.ec.curve.type==="mont"?assert$5(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$5(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,b)};KeyPair$3.prototype.derive=function t(e){return e.validate()||assert$5(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$3.prototype.sign=function t(e,b,w){return this.ec.sign(e,this,b,w)};KeyPair$3.prototype.verify=function t(e,b){return this.ec.verify(e,b,this)};KeyPair$3.prototype.inspect=function t(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$2=bn$2.exports,utils$5=utils$d,assert$4=utils$5.assert;function Signature$3(t,e){if(t instanceof Signature$3)return t;this._importDER(t,e)||(assert$4(t.r&&t.s,"Signature without r or s"),this.r=new BN$2(t.r,16),this.s=new BN$2(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature$1=Signature$3;function Position(){this.place=0}function getLength(t,e){var b=t[e.place++];if(!(b&128))return b;var w=b&15;if(w===0||w>4)return!1;for(var $=0,T=0,N=e.place;T<w;T++,N++)$<<=8,$|=t[N],$>>>=0;return $<=127?!1:(e.place=N,$)}function rmPadding(t){for(var e=0,b=t.length-1;!t[e]&&!(t[e+1]&128)&&e<b;)e++;return e===0?t:t.slice(e)}Signature$3.prototype._importDER=function t(e,b){e=utils$5.toArray(e,b);var w=new Position;if(e[w.place++]!==48)return!1;var $=getLength(e,w);if($===!1||$+w.place!==e.length||e[w.place++]!==2)return!1;var T=getLength(e,w);if(T===!1)return!1;var N=e.slice(w.place,T+w.place);if(w.place+=T,e[w.place++]!==2)return!1;var C=getLength(e,w);if(C===!1||e.length!==C+w.place)return!1;var F=e.slice(w.place,C+w.place);if(N[0]===0)if(N[1]&128)N=N.slice(1);else return!1;if(F[0]===0)if(F[1]&128)F=F.slice(1);else return!1;return this.r=new BN$2(N),this.s=new BN$2(F),this.recoveryParam=null,!0};function constructLength(t,e){if(e<128){t.push(e);return}var b=1+(Math.log(e)/Math.LN2>>>3);for(t.push(b|128);--b;)t.push(e>>>(b<<3)&255);t.push(e)}Signature$3.prototype.toDER=function t(e){var b=this.r.toArray(),w=this.s.toArray();for(b[0]&128&&(b=[0].concat(b)),w[0]&128&&(w=[0].concat(w)),b=rmPadding(b),w=rmPadding(w);!w[0]&&!(w[1]&128);)w=w.slice(1);var $=[2];constructLength($,b.length),$=$.concat(b),$.push(2),constructLength($,w.length);var T=$.concat(w),N=[48];return constructLength(N,T.length),N=N.concat(T),utils$5.encode(N,e)};var BN$1=bn$2.exports,HmacDRBG=hmacDrbg,utils$4=utils$d,curves$1=curves$2,rand=brorand.exports,assert$3=utils$4.assert,KeyPair$2=key$1,Signature$2=signature$1;function EC(t){if(!(this instanceof EC))return new EC(t);typeof t=="string"&&(assert$3(Object.prototype.hasOwnProperty.call(curves$1,t),"Unknown curve "+t),t=curves$1[t]),t instanceof curves$1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ec=EC;EC.prototype.keyPair=function t(e){return new KeyPair$2(this,e)};EC.prototype.keyFromPrivate=function t(e,b){return KeyPair$2.fromPrivate(this,e,b)};EC.prototype.keyFromPublic=function t(e,b){return KeyPair$2.fromPublic(this,e,b)};EC.prototype.genKeyPair=function t(e){e||(e={});for(var b=new HmacDRBG({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),w=this.n.byteLength(),$=this.n.sub(new BN$1(2));;){var T=new BN$1(b.generate(w));if(!(T.cmp($)>0))return T.iaddn(1),this.keyFromPrivate(T)}};EC.prototype._truncateToN=function t(e,b){var w=e.byteLength()*8-this.n.bitLength();return w>0&&(e=e.ushrn(w)),!b&&e.cmp(this.n)>=0?e.sub(this.n):e};EC.prototype.sign=function t(e,b,w,$){typeof w=="object"&&($=w,w=null),$||($={}),b=this.keyFromPrivate(b,w),e=this._truncateToN(new BN$1(e,16));for(var T=this.n.byteLength(),N=b.getPrivate().toArray("be",T),C=e.toArray("be",T),F=new HmacDRBG({hash:this.hash,entropy:N,nonce:C,pers:$.pers,persEnc:$.persEnc||"utf8"}),G=this.n.sub(new BN$1(1)),J=0;;J++){var Z=$.k?$.k(J):new BN$1(F.generate(this.n.byteLength()));if(Z=this._truncateToN(Z,!0),!(Z.cmpn(1)<=0||Z.cmp(G)>=0)){var re=this.g.mul(Z);if(!re.isInfinity()){var ie=re.getX(),ue=ie.umod(this.n);if(ue.cmpn(0)!==0){var ne=Z.invm(this.n).mul(ue.mul(b.getPrivate()).iadd(e));if(ne=ne.umod(this.n),ne.cmpn(0)!==0){var ce=(re.getY().isOdd()?1:0)|(ie.cmp(ue)!==0?2:0);return $.canonical&&ne.cmp(this.nh)>0&&(ne=this.n.sub(ne),ce^=1),new Signature$2({r:ue,s:ne,recoveryParam:ce})}}}}}};EC.prototype.verify=function t(e,b,w,$){e=this._truncateToN(new BN$1(e,16)),w=this.keyFromPublic(w,$),b=new Signature$2(b,"hex");var T=b.r,N=b.s;if(T.cmpn(1)<0||T.cmp(this.n)>=0||N.cmpn(1)<0||N.cmp(this.n)>=0)return!1;var C=N.invm(this.n),F=C.mul(e).umod(this.n),G=C.mul(T).umod(this.n),J;return this.curve._maxwellTrick?(J=this.g.jmulAdd(F,w.getPublic(),G),J.isInfinity()?!1:J.eqXToP(T)):(J=this.g.mulAdd(F,w.getPublic(),G),J.isInfinity()?!1:J.getX().umod(this.n).cmp(T)===0)};EC.prototype.recoverPubKey=function(t,e,b,w){assert$3((3&b)===b,"The recovery param is more than two bits"),e=new Signature$2(e,w);var $=this.n,T=new BN$1(t),N=e.r,C=e.s,F=b&1,G=b>>1;if(N.cmp(this.curve.p.umod(this.curve.n))>=0&&G)throw new Error("Unable to find sencond key candinate");G?N=this.curve.pointFromX(N.add(this.curve.n),F):N=this.curve.pointFromX(N,F);var J=e.r.invm($),Z=$.sub(T).mul(J).umod($),re=C.mul(J).umod($);return this.g.mulAdd(Z,N,re)};EC.prototype.getKeyRecoveryParam=function(t,e,b,w){if(e=new Signature$2(e,w),e.recoveryParam!==null)return e.recoveryParam;for(var $=0;$<4;$++){var T;try{T=this.recoverPubKey(t,e,$)}catch{continue}if(T.eq(b))return $}throw new Error("Unable to find valid recovery factor")};var utils$3=utils$d,assert$2=utils$3.assert,parseBytes$2=utils$3.parseBytes,cachedProperty$1=utils$3.cachedProperty;function KeyPair$1(t,e){this.eddsa=t,this._secret=parseBytes$2(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$1.fromPublic=function t(e,b){return b instanceof KeyPair$1?b:new KeyPair$1(e,{pub:b})};KeyPair$1.fromSecret=function t(e,b){return b instanceof KeyPair$1?b:new KeyPair$1(e,{secret:b})};KeyPair$1.prototype.secret=function t(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",function t(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$1,"pub",function t(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$1,"privBytes",function t(){var e=this.eddsa,b=this.hash(),w=e.encodingLength-1,$=b.slice(0,e.encodingLength);return $[0]&=248,$[w]&=127,$[w]|=64,$});cachedProperty$1(KeyPair$1,"priv",function t(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$1,"hash",function t(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$1,"messagePrefix",function t(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$1.prototype.sign=function t(e){return assert$2(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$1.prototype.verify=function t(e,b){return this.eddsa.verify(e,b,this)};KeyPair$1.prototype.getSecret=function t(e){return assert$2(this._secret,"KeyPair is public only"),utils$3.encode(this.secret(),e)};KeyPair$1.prototype.getPublic=function t(e){return utils$3.encode(this.pubBytes(),e)};var key=KeyPair$1,BN=bn$2.exports,utils$2=utils$d,assert$1=utils$2.assert,cachedProperty=utils$2.cachedProperty,parseBytes$1=utils$2.parseBytes;function Signature$1(t,e){this.eddsa=t,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),assert$1(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$1,"S",function t(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$1,"R",function t(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$1,"Rencoded",function t(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$1,"Sencoded",function t(){return this.eddsa.encodeInt(this.S())});Signature$1.prototype.toBytes=function t(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function t(){return utils$2.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1,hash=hash$3,curves=curves$2,utils$1=utils$d,assert=utils$1.assert,parseBytes=utils$1.parseBytes,KeyPair=key,Signature=signature;function EDDSA(t){if(assert(t==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=curves[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=hash.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function t(e,b){e=parseBytes(e);var w=this.keyFromSecret(b),$=this.hashInt(w.messagePrefix(),e),T=this.g.mul($),N=this.encodePoint(T),C=this.hashInt(N,w.pubBytes(),e).mul(w.priv()),F=$.add(C).umod(this.curve.n);return this.makeSignature({R:T,S:F,Rencoded:N})};EDDSA.prototype.verify=function t(e,b,w){e=parseBytes(e),b=this.makeSignature(b);var $=this.keyFromPublic(w),T=this.hashInt(b.Rencoded(),$.pubBytes(),e),N=this.g.mul(b.S()),C=b.R().add($.pub().mul(T));return C.eq(N)};EDDSA.prototype.hashInt=function t(){for(var e=this.hash(),b=0;b<arguments.length;b++)e.update(arguments[b]);return utils$1.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function t(e){return KeyPair.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function t(e){return KeyPair.fromSecret(this,e)};EDDSA.prototype.makeSignature=function t(e){return e instanceof Signature?e:new Signature(this,e)};EDDSA.prototype.encodePoint=function t(e){var b=e.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=e.getX().isOdd()?128:0,b};EDDSA.prototype.decodePoint=function t(e){e=utils$1.parseBytes(e);var b=e.length-1,w=e.slice(0,b).concat(e[b]&~128),$=(e[b]&128)!=0,T=utils$1.intFromLE(w);return this.curve.pointFromY(T,$)};EDDSA.prototype.encodeInt=function t(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function t(e){return utils$1.intFromLE(e)};EDDSA.prototype.isPoint=function t(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=require$$0.version,e.utils=utils$d,e.rand=brorand.exports,e.curve=curve,e.curves=curves$2,e.ec=ec,e.eddsa=eddsa})(elliptic);var canonicalize=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((b,w,$)=>{const T=$===0?"":",",N=w===void 0||typeof w=="symbol"?null:w;return b+T+t(N)},"")+"]":"{"+Object.keys(e).sort().reduce((b,w,$)=>{if(e[w]===void 0||typeof e[w]=="symbol")return b;const T=b.length===0?"":",";return b+T+t(w)+":"+t(e[w])},"")+"}"},x25519={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=random,b=wipe$1;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function w(_e){var be=new Float64Array(16);if(_e)for(var xe=0;xe<_e.length;xe++)be[xe]=_e[xe];return be}var $=new Uint8Array(32);$[0]=9;var T=w([56129,1]);function N(_e){for(var be=1,xe=0;xe<16;xe++){var ee=_e[xe]+be+65535;be=Math.floor(ee/65536),_e[xe]=ee-be*65536}_e[0]+=be-1+37*(be-1)}function C(_e,be,xe){for(var ee=~(xe-1),he=0;he<16;he++){var we=ee&(_e[he]^be[he]);_e[he]^=we,be[he]^=we}}function F(_e,be){for(var xe=w(),ee=w(),he=0;he<16;he++)ee[he]=be[he];N(ee),N(ee),N(ee);for(var we=0;we<2;we++){xe[0]=ee[0]-65517;for(var he=1;he<15;he++)xe[he]=ee[he]-65535-(xe[he-1]>>16&1),xe[he-1]&=65535;xe[15]=ee[15]-32767-(xe[14]>>16&1);var Ne=xe[15]>>16&1;xe[14]&=65535,C(ee,xe,1-Ne)}for(var he=0;he<16;he++)_e[2*he]=ee[he]&255,_e[2*he+1]=ee[he]>>8}function G(_e,be){for(var xe=0;xe<16;xe++)_e[xe]=be[2*xe]+(be[2*xe+1]<<8);_e[15]&=32767}function J(_e,be,xe){for(var ee=0;ee<16;ee++)_e[ee]=be[ee]+xe[ee]}function Z(_e,be,xe){for(var ee=0;ee<16;ee++)_e[ee]=be[ee]-xe[ee]}function re(_e,be,xe){var ee,he,we=0,Ne=0,pe=0,te=0,Y=0,R=0,B=0,V=0,Q=0,H=0,j=0,L=0,q=0,U=0,oe=0,ve=0,fe=0,Oe=0,Se=0,Te=0,Ae=0,le=0,ke=0,je=0,Ve=0,qe=0,Ze=0,Pe=0,de=0,me=0,Re=0,Fe=xe[0],Ue=xe[1],ze=xe[2],Qe=xe[3],Ye=xe[4],ht=xe[5],at=xe[6],Ke=xe[7],kt=xe[8],yt=xe[9],ct=xe[10],Bt=xe[11],Et=xe[12],et=xe[13],Ft=xe[14],At=xe[15];ee=be[0],we+=ee*Fe,Ne+=ee*Ue,pe+=ee*ze,te+=ee*Qe,Y+=ee*Ye,R+=ee*ht,B+=ee*at,V+=ee*Ke,Q+=ee*kt,H+=ee*yt,j+=ee*ct,L+=ee*Bt,q+=ee*Et,U+=ee*et,oe+=ee*Ft,ve+=ee*At,ee=be[1],Ne+=ee*Fe,pe+=ee*Ue,te+=ee*ze,Y+=ee*Qe,R+=ee*Ye,B+=ee*ht,V+=ee*at,Q+=ee*Ke,H+=ee*kt,j+=ee*yt,L+=ee*ct,q+=ee*Bt,U+=ee*Et,oe+=ee*et,ve+=ee*Ft,fe+=ee*At,ee=be[2],pe+=ee*Fe,te+=ee*Ue,Y+=ee*ze,R+=ee*Qe,B+=ee*Ye,V+=ee*ht,Q+=ee*at,H+=ee*Ke,j+=ee*kt,L+=ee*yt,q+=ee*ct,U+=ee*Bt,oe+=ee*Et,ve+=ee*et,fe+=ee*Ft,Oe+=ee*At,ee=be[3],te+=ee*Fe,Y+=ee*Ue,R+=ee*ze,B+=ee*Qe,V+=ee*Ye,Q+=ee*ht,H+=ee*at,j+=ee*Ke,L+=ee*kt,q+=ee*yt,U+=ee*ct,oe+=ee*Bt,ve+=ee*Et,fe+=ee*et,Oe+=ee*Ft,Se+=ee*At,ee=be[4],Y+=ee*Fe,R+=ee*Ue,B+=ee*ze,V+=ee*Qe,Q+=ee*Ye,H+=ee*ht,j+=ee*at,L+=ee*Ke,q+=ee*kt,U+=ee*yt,oe+=ee*ct,ve+=ee*Bt,fe+=ee*Et,Oe+=ee*et,Se+=ee*Ft,Te+=ee*At,ee=be[5],R+=ee*Fe,B+=ee*Ue,V+=ee*ze,Q+=ee*Qe,H+=ee*Ye,j+=ee*ht,L+=ee*at,q+=ee*Ke,U+=ee*kt,oe+=ee*yt,ve+=ee*ct,fe+=ee*Bt,Oe+=ee*Et,Se+=ee*et,Te+=ee*Ft,Ae+=ee*At,ee=be[6],B+=ee*Fe,V+=ee*Ue,Q+=ee*ze,H+=ee*Qe,j+=ee*Ye,L+=ee*ht,q+=ee*at,U+=ee*Ke,oe+=ee*kt,ve+=ee*yt,fe+=ee*ct,Oe+=ee*Bt,Se+=ee*Et,Te+=ee*et,Ae+=ee*Ft,le+=ee*At,ee=be[7],V+=ee*Fe,Q+=ee*Ue,H+=ee*ze,j+=ee*Qe,L+=ee*Ye,q+=ee*ht,U+=ee*at,oe+=ee*Ke,ve+=ee*kt,fe+=ee*yt,Oe+=ee*ct,Se+=ee*Bt,Te+=ee*Et,Ae+=ee*et,le+=ee*Ft,ke+=ee*At,ee=be[8],Q+=ee*Fe,H+=ee*Ue,j+=ee*ze,L+=ee*Qe,q+=ee*Ye,U+=ee*ht,oe+=ee*at,ve+=ee*Ke,fe+=ee*kt,Oe+=ee*yt,Se+=ee*ct,Te+=ee*Bt,Ae+=ee*Et,le+=ee*et,ke+=ee*Ft,je+=ee*At,ee=be[9],H+=ee*Fe,j+=ee*Ue,L+=ee*ze,q+=ee*Qe,U+=ee*Ye,oe+=ee*ht,ve+=ee*at,fe+=ee*Ke,Oe+=ee*kt,Se+=ee*yt,Te+=ee*ct,Ae+=ee*Bt,le+=ee*Et,ke+=ee*et,je+=ee*Ft,Ve+=ee*At,ee=be[10],j+=ee*Fe,L+=ee*Ue,q+=ee*ze,U+=ee*Qe,oe+=ee*Ye,ve+=ee*ht,fe+=ee*at,Oe+=ee*Ke,Se+=ee*kt,Te+=ee*yt,Ae+=ee*ct,le+=ee*Bt,ke+=ee*Et,je+=ee*et,Ve+=ee*Ft,qe+=ee*At,ee=be[11],L+=ee*Fe,q+=ee*Ue,U+=ee*ze,oe+=ee*Qe,ve+=ee*Ye,fe+=ee*ht,Oe+=ee*at,Se+=ee*Ke,Te+=ee*kt,Ae+=ee*yt,le+=ee*ct,ke+=ee*Bt,je+=ee*Et,Ve+=ee*et,qe+=ee*Ft,Ze+=ee*At,ee=be[12],q+=ee*Fe,U+=ee*Ue,oe+=ee*ze,ve+=ee*Qe,fe+=ee*Ye,Oe+=ee*ht,Se+=ee*at,Te+=ee*Ke,Ae+=ee*kt,le+=ee*yt,ke+=ee*ct,je+=ee*Bt,Ve+=ee*Et,qe+=ee*et,Ze+=ee*Ft,Pe+=ee*At,ee=be[13],U+=ee*Fe,oe+=ee*Ue,ve+=ee*ze,fe+=ee*Qe,Oe+=ee*Ye,Se+=ee*ht,Te+=ee*at,Ae+=ee*Ke,le+=ee*kt,ke+=ee*yt,je+=ee*ct,Ve+=ee*Bt,qe+=ee*Et,Ze+=ee*et,Pe+=ee*Ft,de+=ee*At,ee=be[14],oe+=ee*Fe,ve+=ee*Ue,fe+=ee*ze,Oe+=ee*Qe,Se+=ee*Ye,Te+=ee*ht,Ae+=ee*at,le+=ee*Ke,ke+=ee*kt,je+=ee*yt,Ve+=ee*ct,qe+=ee*Bt,Ze+=ee*Et,Pe+=ee*et,de+=ee*Ft,me+=ee*At,ee=be[15],ve+=ee*Fe,fe+=ee*Ue,Oe+=ee*ze,Se+=ee*Qe,Te+=ee*Ye,Ae+=ee*ht,le+=ee*at,ke+=ee*Ke,je+=ee*kt,Ve+=ee*yt,qe+=ee*ct,Ze+=ee*Bt,Pe+=ee*Et,de+=ee*et,me+=ee*Ft,Re+=ee*At,we+=38*fe,Ne+=38*Oe,pe+=38*Se,te+=38*Te,Y+=38*Ae,R+=38*le,B+=38*ke,V+=38*je,Q+=38*Ve,H+=38*qe,j+=38*Ze,L+=38*Pe,q+=38*de,U+=38*me,oe+=38*Re,he=1,ee=we+he+65535,he=Math.floor(ee/65536),we=ee-he*65536,ee=Ne+he+65535,he=Math.floor(ee/65536),Ne=ee-he*65536,ee=pe+he+65535,he=Math.floor(ee/65536),pe=ee-he*65536,ee=te+he+65535,he=Math.floor(ee/65536),te=ee-he*65536,ee=Y+he+65535,he=Math.floor(ee/65536),Y=ee-he*65536,ee=R+he+65535,he=Math.floor(ee/65536),R=ee-he*65536,ee=B+he+65535,he=Math.floor(ee/65536),B=ee-he*65536,ee=V+he+65535,he=Math.floor(ee/65536),V=ee-he*65536,ee=Q+he+65535,he=Math.floor(ee/65536),Q=ee-he*65536,ee=H+he+65535,he=Math.floor(ee/65536),H=ee-he*65536,ee=j+he+65535,he=Math.floor(ee/65536),j=ee-he*65536,ee=L+he+65535,he=Math.floor(ee/65536),L=ee-he*65536,ee=q+he+65535,he=Math.floor(ee/65536),q=ee-he*65536,ee=U+he+65535,he=Math.floor(ee/65536),U=ee-he*65536,ee=oe+he+65535,he=Math.floor(ee/65536),oe=ee-he*65536,ee=ve+he+65535,he=Math.floor(ee/65536),ve=ee-he*65536,we+=he-1+37*(he-1),he=1,ee=we+he+65535,he=Math.floor(ee/65536),we=ee-he*65536,ee=Ne+he+65535,he=Math.floor(ee/65536),Ne=ee-he*65536,ee=pe+he+65535,he=Math.floor(ee/65536),pe=ee-he*65536,ee=te+he+65535,he=Math.floor(ee/65536),te=ee-he*65536,ee=Y+he+65535,he=Math.floor(ee/65536),Y=ee-he*65536,ee=R+he+65535,he=Math.floor(ee/65536),R=ee-he*65536,ee=B+he+65535,he=Math.floor(ee/65536),B=ee-he*65536,ee=V+he+65535,he=Math.floor(ee/65536),V=ee-he*65536,ee=Q+he+65535,he=Math.floor(ee/65536),Q=ee-he*65536,ee=H+he+65535,he=Math.floor(ee/65536),H=ee-he*65536,ee=j+he+65535,he=Math.floor(ee/65536),j=ee-he*65536,ee=L+he+65535,he=Math.floor(ee/65536),L=ee-he*65536,ee=q+he+65535,he=Math.floor(ee/65536),q=ee-he*65536,ee=U+he+65535,he=Math.floor(ee/65536),U=ee-he*65536,ee=oe+he+65535,he=Math.floor(ee/65536),oe=ee-he*65536,ee=ve+he+65535,he=Math.floor(ee/65536),ve=ee-he*65536,we+=he-1+37*(he-1),_e[0]=we,_e[1]=Ne,_e[2]=pe,_e[3]=te,_e[4]=Y,_e[5]=R,_e[6]=B,_e[7]=V,_e[8]=Q,_e[9]=H,_e[10]=j,_e[11]=L,_e[12]=q,_e[13]=U,_e[14]=oe,_e[15]=ve}function ie(_e,be){re(_e,be,be)}function ue(_e,be){for(var xe=w(),ee=0;ee<16;ee++)xe[ee]=be[ee];for(var ee=253;ee>=0;ee--)ie(xe,xe),ee!==2&&ee!==4&&re(xe,xe,be);for(var ee=0;ee<16;ee++)_e[ee]=xe[ee]}function ne(_e,be){for(var xe=new Uint8Array(32),ee=new Float64Array(80),he=w(),we=w(),Ne=w(),pe=w(),te=w(),Y=w(),R=0;R<31;R++)xe[R]=_e[R];xe[31]=_e[31]&127|64,xe[0]&=248,G(ee,be);for(var R=0;R<16;R++)we[R]=ee[R];he[0]=pe[0]=1;for(var R=254;R>=0;--R){var B=xe[R>>>3]>>>(R&7)&1;C(he,we,B),C(Ne,pe,B),J(te,he,Ne),Z(he,he,Ne),J(Ne,we,pe),Z(we,we,pe),ie(pe,te),ie(Y,he),re(he,Ne,he),re(Ne,we,te),J(te,he,Ne),Z(he,he,Ne),ie(we,he),Z(Ne,pe,Y),re(he,Ne,T),J(he,he,pe),re(Ne,Ne,he),re(he,pe,Y),re(pe,we,ee),ie(we,te),C(he,we,B),C(Ne,pe,B)}for(var R=0;R<16;R++)ee[R+16]=he[R],ee[R+32]=Ne[R],ee[R+48]=we[R],ee[R+64]=pe[R];var V=ee.subarray(32),Q=ee.subarray(16);ue(V,V),re(Q,Q,V);var H=new Uint8Array(32);return F(H,Q),H}t.scalarMult=ne;function ce(_e){return ne(_e,$)}t.scalarMultBase=ce;function ae(_e){if(_e.length!==t.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+t.SECRET_KEY_LENGTH+" bytes");var be=new Uint8Array(_e),xe=ce(be);return{publicKey:xe,secretKey:be}}t.generateKeyPairFromSeed=ae;function ye(_e){var be=e.randomBytes(32,_e),xe=ae(be);return b.wipe(be),xe}t.generateKeyPair=ye;function $e(_e,be,xe){if(xe===void 0&&(xe=!1),_e.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(be.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var ee=ne(_e,be);if(xe){for(var he=0,we=0;we<ee.length;we++)he|=ee[we];if(he===0)throw new Error("X25519: invalid shared key")}return ee}t.sharedKey=$e})(x25519);var xchacha20poly1305={},xchacha20={},chacha={};Object.defineProperty(chacha,"__esModule",{value:!0});var binary_1$1=binary,wipe_1$1=wipe$1,ROUNDS$1=20;function core(t,e,b){for(var w=1634760805,$=857760878,T=2036477234,N=1797285236,C=b[3]<<24|b[2]<<16|b[1]<<8|b[0],F=b[7]<<24|b[6]<<16|b[5]<<8|b[4],G=b[11]<<24|b[10]<<16|b[9]<<8|b[8],J=b[15]<<24|b[14]<<16|b[13]<<8|b[12],Z=b[19]<<24|b[18]<<16|b[17]<<8|b[16],re=b[23]<<24|b[22]<<16|b[21]<<8|b[20],ie=b[27]<<24|b[26]<<16|b[25]<<8|b[24],ue=b[31]<<24|b[30]<<16|b[29]<<8|b[28],ne=e[3]<<24|e[2]<<16|e[1]<<8|e[0],ce=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ae=e[11]<<24|e[10]<<16|e[9]<<8|e[8],ye=e[15]<<24|e[14]<<16|e[13]<<8|e[12],$e=w,_e=$,be=T,xe=N,ee=C,he=F,we=G,Ne=J,pe=Z,te=re,Y=ie,R=ue,B=ne,V=ce,Q=ae,H=ye,j=0;j<ROUNDS$1;j+=2)$e=$e+ee|0,B^=$e,B=B>>>32-16|B<<16,pe=pe+B|0,ee^=pe,ee=ee>>>32-12|ee<<12,_e=_e+he|0,V^=_e,V=V>>>32-16|V<<16,te=te+V|0,he^=te,he=he>>>32-12|he<<12,be=be+we|0,Q^=be,Q=Q>>>32-16|Q<<16,Y=Y+Q|0,we^=Y,we=we>>>32-12|we<<12,xe=xe+Ne|0,H^=xe,H=H>>>32-16|H<<16,R=R+H|0,Ne^=R,Ne=Ne>>>32-12|Ne<<12,be=be+we|0,Q^=be,Q=Q>>>32-8|Q<<8,Y=Y+Q|0,we^=Y,we=we>>>32-7|we<<7,xe=xe+Ne|0,H^=xe,H=H>>>32-8|H<<8,R=R+H|0,Ne^=R,Ne=Ne>>>32-7|Ne<<7,_e=_e+he|0,V^=_e,V=V>>>32-8|V<<8,te=te+V|0,he^=te,he=he>>>32-7|he<<7,$e=$e+ee|0,B^=$e,B=B>>>32-8|B<<8,pe=pe+B|0,ee^=pe,ee=ee>>>32-7|ee<<7,$e=$e+he|0,H^=$e,H=H>>>32-16|H<<16,Y=Y+H|0,he^=Y,he=he>>>32-12|he<<12,_e=_e+we|0,B^=_e,B=B>>>32-16|B<<16,R=R+B|0,we^=R,we=we>>>32-12|we<<12,be=be+Ne|0,V^=be,V=V>>>32-16|V<<16,pe=pe+V|0,Ne^=pe,Ne=Ne>>>32-12|Ne<<12,xe=xe+ee|0,Q^=xe,Q=Q>>>32-16|Q<<16,te=te+Q|0,ee^=te,ee=ee>>>32-12|ee<<12,be=be+Ne|0,V^=be,V=V>>>32-8|V<<8,pe=pe+V|0,Ne^=pe,Ne=Ne>>>32-7|Ne<<7,xe=xe+ee|0,Q^=xe,Q=Q>>>32-8|Q<<8,te=te+Q|0,ee^=te,ee=ee>>>32-7|ee<<7,_e=_e+we|0,B^=_e,B=B>>>32-8|B<<8,R=R+B|0,we^=R,we=we>>>32-7|we<<7,$e=$e+he|0,H^=$e,H=H>>>32-8|H<<8,Y=Y+H|0,he^=Y,he=he>>>32-7|he<<7;binary_1$1.writeUint32LE($e+w|0,t,0),binary_1$1.writeUint32LE(_e+$|0,t,4),binary_1$1.writeUint32LE(be+T|0,t,8),binary_1$1.writeUint32LE(xe+N|0,t,12),binary_1$1.writeUint32LE(ee+C|0,t,16),binary_1$1.writeUint32LE(he+F|0,t,20),binary_1$1.writeUint32LE(we+G|0,t,24),binary_1$1.writeUint32LE(Ne+J|0,t,28),binary_1$1.writeUint32LE(pe+Z|0,t,32),binary_1$1.writeUint32LE(te+re|0,t,36),binary_1$1.writeUint32LE(Y+ie|0,t,40),binary_1$1.writeUint32LE(R+ue|0,t,44),binary_1$1.writeUint32LE(B+ne|0,t,48),binary_1$1.writeUint32LE(V+ce|0,t,52),binary_1$1.writeUint32LE(Q+ae|0,t,56),binary_1$1.writeUint32LE(H+ye|0,t,60)}function streamXOR$1(t,e,b,w,$){if($===void 0&&($=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(w.length<b.length)throw new Error("ChaCha: destination is shorter than source");var T,N;if($===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");T=new Uint8Array(16),N=T.length-e.length,T.set(e,N)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");T=e,N=$}for(var C=new Uint8Array(64),F=0;F<b.length;F+=64){core(C,T,t);for(var G=F;G<F+64&&G<b.length;G++)w[G]=b[G]^C[G-F];incrementCounter(T,0,N)}return wipe_1$1.wipe(C),$===0&&wipe_1$1.wipe(T),w}chacha.streamXOR=streamXOR$1;function stream$1(t,e,b,w){return w===void 0&&(w=0),wipe_1$1.wipe(b),streamXOR$1(t,e,b,b,w)}chacha.stream=stream$1;function incrementCounter(t,e,b){for(var w=1;b--;)w=w+(t[e]&255)|0,t[e]=w&255,w>>>=8,e++;if(w>0)throw new Error("ChaCha: counter overflow")}Object.defineProperty(xchacha20,"__esModule",{value:!0});var binary_1=binary,wipe_1=wipe$1,chacha_1=chacha,ROUNDS=20;function streamXOR(t,e,b,w){if(e.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var $=hchacha(t,e.subarray(0,16),new Uint8Array(32)),T=new Uint8Array(12);T.set(e.subarray(16),4);var N=chacha_1.streamXOR($,T,b,w);return wipe_1.wipe($),N}xchacha20.streamXOR=streamXOR;function stream(t,e,b){return wipe_1.wipe(b),streamXOR(t,e,b,b)}xchacha20.stream=stream;function hchacha(t,e,b){for(var w=1634760805,$=857760878,T=2036477234,N=1797285236,C=t[3]<<24|t[2]<<16|t[1]<<8|t[0],F=t[7]<<24|t[6]<<16|t[5]<<8|t[4],G=t[11]<<24|t[10]<<16|t[9]<<8|t[8],J=t[15]<<24|t[14]<<16|t[13]<<8|t[12],Z=t[19]<<24|t[18]<<16|t[17]<<8|t[16],re=t[23]<<24|t[22]<<16|t[21]<<8|t[20],ie=t[27]<<24|t[26]<<16|t[25]<<8|t[24],ue=t[31]<<24|t[30]<<16|t[29]<<8|t[28],ne=e[3]<<24|e[2]<<16|e[1]<<8|e[0],ce=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ae=e[11]<<24|e[10]<<16|e[9]<<8|e[8],ye=e[15]<<24|e[14]<<16|e[13]<<8|e[12],$e=w,_e=$,be=T,xe=N,ee=C,he=F,we=G,Ne=J,pe=Z,te=re,Y=ie,R=ue,B=ne,V=ce,Q=ae,H=ye,j=0;j<ROUNDS;j+=2)$e=$e+ee|0,B^=$e,B=B>>>32-16|B<<16,pe=pe+B|0,ee^=pe,ee=ee>>>32-12|ee<<12,_e=_e+he|0,V^=_e,V=V>>>32-16|V<<16,te=te+V|0,he^=te,he=he>>>32-12|he<<12,be=be+we|0,Q^=be,Q=Q>>>32-16|Q<<16,Y=Y+Q|0,we^=Y,we=we>>>32-12|we<<12,xe=xe+Ne|0,H^=xe,H=H>>>32-16|H<<16,R=R+H|0,Ne^=R,Ne=Ne>>>32-12|Ne<<12,be=be+we|0,Q^=be,Q=Q>>>32-8|Q<<8,Y=Y+Q|0,we^=Y,we=we>>>32-7|we<<7,xe=xe+Ne|0,H^=xe,H=H>>>32-8|H<<8,R=R+H|0,Ne^=R,Ne=Ne>>>32-7|Ne<<7,_e=_e+he|0,V^=_e,V=V>>>32-8|V<<8,te=te+V|0,he^=te,he=he>>>32-7|he<<7,$e=$e+ee|0,B^=$e,B=B>>>32-8|B<<8,pe=pe+B|0,ee^=pe,ee=ee>>>32-7|ee<<7,$e=$e+he|0,H^=$e,H=H>>>32-16|H<<16,Y=Y+H|0,he^=Y,he=he>>>32-12|he<<12,_e=_e+we|0,B^=_e,B=B>>>32-16|B<<16,R=R+B|0,we^=R,we=we>>>32-12|we<<12,be=be+Ne|0,V^=be,V=V>>>32-16|V<<16,pe=pe+V|0,Ne^=pe,Ne=Ne>>>32-12|Ne<<12,xe=xe+ee|0,Q^=xe,Q=Q>>>32-16|Q<<16,te=te+Q|0,ee^=te,ee=ee>>>32-12|ee<<12,be=be+Ne|0,V^=be,V=V>>>32-8|V<<8,pe=pe+V|0,Ne^=pe,Ne=Ne>>>32-7|Ne<<7,xe=xe+ee|0,Q^=xe,Q=Q>>>32-8|Q<<8,te=te+Q|0,ee^=te,ee=ee>>>32-7|ee<<7,_e=_e+we|0,B^=_e,B=B>>>32-8|B<<8,R=R+B|0,we^=R,we=we>>>32-7|we<<7,$e=$e+he|0,H^=$e,H=H>>>32-8|H<<8,Y=Y+H|0,he^=Y,he=he>>>32-7|he<<7;return binary_1.writeUint32LE($e,b,0),binary_1.writeUint32LE(_e,b,4),binary_1.writeUint32LE(be,b,8),binary_1.writeUint32LE(xe,b,12),binary_1.writeUint32LE(B,b,16),binary_1.writeUint32LE(V,b,20),binary_1.writeUint32LE(Q,b,24),binary_1.writeUint32LE(H,b,28),b}xchacha20.hchacha=hchacha;var chacha20poly1305={},poly1305={},constantTime={};Object.defineProperty(constantTime,"__esModule",{value:!0});function select(t,e,b){return~(t-1)&e|t-1&b}constantTime.select=select;function lessOrEqual(t,e){return(t|0)-(e|0)-1>>>31&1}constantTime.lessOrEqual=lessOrEqual;function compare(t,e){if(t.length!==e.length)return 0;for(var b=0,w=0;w<t.length;w++)b|=t[w]^e[w];return 1&b-1>>>8}constantTime.compare=compare;function equal(t,e){return t.length===0||e.length===0?!1:compare(t,e)!==0}constantTime.equal=equal;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=constantTime,b=wipe$1;t.DIGEST_LENGTH=16;var w=function(){function N(C){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var F=C[0]|C[1]<<8;this._r[0]=F&8191;var G=C[2]|C[3]<<8;this._r[1]=(F>>>13|G<<3)&8191;var J=C[4]|C[5]<<8;this._r[2]=(G>>>10|J<<6)&7939;var Z=C[6]|C[7]<<8;this._r[3]=(J>>>7|Z<<9)&8191;var re=C[8]|C[9]<<8;this._r[4]=(Z>>>4|re<<12)&255,this._r[5]=re>>>1&8190;var ie=C[10]|C[11]<<8;this._r[6]=(re>>>14|ie<<2)&8191;var ue=C[12]|C[13]<<8;this._r[7]=(ie>>>11|ue<<5)&8065;var ne=C[14]|C[15]<<8;this._r[8]=(ue>>>8|ne<<8)&8191,this._r[9]=ne>>>5&127,this._pad[0]=C[16]|C[17]<<8,this._pad[1]=C[18]|C[19]<<8,this._pad[2]=C[20]|C[21]<<8,this._pad[3]=C[22]|C[23]<<8,this._pad[4]=C[24]|C[25]<<8,this._pad[5]=C[26]|C[27]<<8,this._pad[6]=C[28]|C[29]<<8,this._pad[7]=C[30]|C[31]<<8}return N.prototype._blocks=function(C,F,G){for(var J=this._fin?0:1<<11,Z=this._h[0],re=this._h[1],ie=this._h[2],ue=this._h[3],ne=this._h[4],ce=this._h[5],ae=this._h[6],ye=this._h[7],$e=this._h[8],_e=this._h[9],be=this._r[0],xe=this._r[1],ee=this._r[2],he=this._r[3],we=this._r[4],Ne=this._r[5],pe=this._r[6],te=this._r[7],Y=this._r[8],R=this._r[9];G>=16;){var B=C[F+0]|C[F+1]<<8;Z+=B&8191;var V=C[F+2]|C[F+3]<<8;re+=(B>>>13|V<<3)&8191;var Q=C[F+4]|C[F+5]<<8;ie+=(V>>>10|Q<<6)&8191;var H=C[F+6]|C[F+7]<<8;ue+=(Q>>>7|H<<9)&8191;var j=C[F+8]|C[F+9]<<8;ne+=(H>>>4|j<<12)&8191,ce+=j>>>1&8191;var L=C[F+10]|C[F+11]<<8;ae+=(j>>>14|L<<2)&8191;var q=C[F+12]|C[F+13]<<8;ye+=(L>>>11|q<<5)&8191;var U=C[F+14]|C[F+15]<<8;$e+=(q>>>8|U<<8)&8191,_e+=U>>>5|J;var oe=0,ve=oe;ve+=Z*be,ve+=re*(5*R),ve+=ie*(5*Y),ve+=ue*(5*te),ve+=ne*(5*pe),oe=ve>>>13,ve&=8191,ve+=ce*(5*Ne),ve+=ae*(5*we),ve+=ye*(5*he),ve+=$e*(5*ee),ve+=_e*(5*xe),oe+=ve>>>13,ve&=8191;var fe=oe;fe+=Z*xe,fe+=re*be,fe+=ie*(5*R),fe+=ue*(5*Y),fe+=ne*(5*te),oe=fe>>>13,fe&=8191,fe+=ce*(5*pe),fe+=ae*(5*Ne),fe+=ye*(5*we),fe+=$e*(5*he),fe+=_e*(5*ee),oe+=fe>>>13,fe&=8191;var Oe=oe;Oe+=Z*ee,Oe+=re*xe,Oe+=ie*be,Oe+=ue*(5*R),Oe+=ne*(5*Y),oe=Oe>>>13,Oe&=8191,Oe+=ce*(5*te),Oe+=ae*(5*pe),Oe+=ye*(5*Ne),Oe+=$e*(5*we),Oe+=_e*(5*he),oe+=Oe>>>13,Oe&=8191;var Se=oe;Se+=Z*he,Se+=re*ee,Se+=ie*xe,Se+=ue*be,Se+=ne*(5*R),oe=Se>>>13,Se&=8191,Se+=ce*(5*Y),Se+=ae*(5*te),Se+=ye*(5*pe),Se+=$e*(5*Ne),Se+=_e*(5*we),oe+=Se>>>13,Se&=8191;var Te=oe;Te+=Z*we,Te+=re*he,Te+=ie*ee,Te+=ue*xe,Te+=ne*be,oe=Te>>>13,Te&=8191,Te+=ce*(5*R),Te+=ae*(5*Y),Te+=ye*(5*te),Te+=$e*(5*pe),Te+=_e*(5*Ne),oe+=Te>>>13,Te&=8191;var Ae=oe;Ae+=Z*Ne,Ae+=re*we,Ae+=ie*he,Ae+=ue*ee,Ae+=ne*xe,oe=Ae>>>13,Ae&=8191,Ae+=ce*be,Ae+=ae*(5*R),Ae+=ye*(5*Y),Ae+=$e*(5*te),Ae+=_e*(5*pe),oe+=Ae>>>13,Ae&=8191;var le=oe;le+=Z*pe,le+=re*Ne,le+=ie*we,le+=ue*he,le+=ne*ee,oe=le>>>13,le&=8191,le+=ce*xe,le+=ae*be,le+=ye*(5*R),le+=$e*(5*Y),le+=_e*(5*te),oe+=le>>>13,le&=8191;var ke=oe;ke+=Z*te,ke+=re*pe,ke+=ie*Ne,ke+=ue*we,ke+=ne*he,oe=ke>>>13,ke&=8191,ke+=ce*ee,ke+=ae*xe,ke+=ye*be,ke+=$e*(5*R),ke+=_e*(5*Y),oe+=ke>>>13,ke&=8191;var je=oe;je+=Z*Y,je+=re*te,je+=ie*pe,je+=ue*Ne,je+=ne*we,oe=je>>>13,je&=8191,je+=ce*he,je+=ae*ee,je+=ye*xe,je+=$e*be,je+=_e*(5*R),oe+=je>>>13,je&=8191;var Ve=oe;Ve+=Z*R,Ve+=re*Y,Ve+=ie*te,Ve+=ue*pe,Ve+=ne*Ne,oe=Ve>>>13,Ve&=8191,Ve+=ce*we,Ve+=ae*he,Ve+=ye*ee,Ve+=$e*xe,Ve+=_e*be,oe+=Ve>>>13,Ve&=8191,oe=(oe<<2)+oe|0,oe=oe+ve|0,ve=oe&8191,oe=oe>>>13,fe+=oe,Z=ve,re=fe,ie=Oe,ue=Se,ne=Te,ce=Ae,ae=le,ye=ke,$e=je,_e=Ve,F+=16,G-=16}this._h[0]=Z,this._h[1]=re,this._h[2]=ie,this._h[3]=ue,this._h[4]=ne,this._h[5]=ce,this._h[6]=ae,this._h[7]=ye,this._h[8]=$e,this._h[9]=_e},N.prototype.finish=function(C,F){F===void 0&&(F=0);var G=new Uint16Array(10),J,Z,re,ie;if(this._leftover){for(ie=this._leftover,this._buffer[ie++]=1;ie<16;ie++)this._buffer[ie]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(J=this._h[1]>>>13,this._h[1]&=8191,ie=2;ie<10;ie++)this._h[ie]+=J,J=this._h[ie]>>>13,this._h[ie]&=8191;for(this._h[0]+=J*5,J=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=J,J=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=J,G[0]=this._h[0]+5,J=G[0]>>>13,G[0]&=8191,ie=1;ie<10;ie++)G[ie]=this._h[ie]+J,J=G[ie]>>>13,G[ie]&=8191;for(G[9]-=1<<13,Z=(J^1)-1,ie=0;ie<10;ie++)G[ie]&=Z;for(Z=~Z,ie=0;ie<10;ie++)this._h[ie]=this._h[ie]&Z|G[ie];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,re=this._h[0]+this._pad[0],this._h[0]=re&65535,ie=1;ie<8;ie++)re=(this._h[ie]+this._pad[ie]|0)+(re>>>16)|0,this._h[ie]=re&65535;return C[F+0]=this._h[0]>>>0,C[F+1]=this._h[0]>>>8,C[F+2]=this._h[1]>>>0,C[F+3]=this._h[1]>>>8,C[F+4]=this._h[2]>>>0,C[F+5]=this._h[2]>>>8,C[F+6]=this._h[3]>>>0,C[F+7]=this._h[3]>>>8,C[F+8]=this._h[4]>>>0,C[F+9]=this._h[4]>>>8,C[F+10]=this._h[5]>>>0,C[F+11]=this._h[5]>>>8,C[F+12]=this._h[6]>>>0,C[F+13]=this._h[6]>>>8,C[F+14]=this._h[7]>>>0,C[F+15]=this._h[7]>>>8,this._finished=!0,this},N.prototype.update=function(C){var F=0,G=C.length,J;if(this._leftover){J=16-this._leftover,J>G&&(J=G);for(var Z=0;Z<J;Z++)this._buffer[this._leftover+Z]=C[F+Z];if(G-=J,F+=J,this._leftover+=J,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(G>=16&&(J=G-G%16,this._blocks(C,F,J),F+=J,G-=J),G){for(var Z=0;Z<G;Z++)this._buffer[this._leftover+Z]=C[F+Z];this._leftover+=G}return this},N.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var C=new Uint8Array(16);return this.finish(C),C},N.prototype.clean=function(){return b.wipe(this._buffer),b.wipe(this._r),b.wipe(this._h),b.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},N}();t.Poly1305=w;function $(N,C){var F=new w(N);F.update(C);var G=F.digest();return F.clean(),G}t.oneTimeAuth=$;function T(N,C){return N.length!==t.DIGEST_LENGTH||C.length!==t.DIGEST_LENGTH?!1:e.equal(N,C)}t.equal=T})(poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=chacha,b=poly1305,w=wipe$1,$=binary,T=constantTime;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var N=new Uint8Array(16),C=function(){function F(G){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,G.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(G)}return F.prototype.seal=function(G,J,Z,re){if(G.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var ie=new Uint8Array(16);ie.set(G,ie.length-G.length);var ue=new Uint8Array(32);e.stream(this._key,ie,ue,4);var ne=J.length+this.tagLength,ce;if(re){if(re.length!==ne)throw new Error("ChaCha20Poly1305: incorrect destination length");ce=re}else ce=new Uint8Array(ne);return e.streamXOR(this._key,ie,J,ce,4),this._authenticate(ce.subarray(ce.length-this.tagLength,ce.length),ue,ce.subarray(0,ce.length-this.tagLength),Z),w.wipe(ie),ce},F.prototype.open=function(G,J,Z,re){if(G.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(J.length<this.tagLength)return null;var ie=new Uint8Array(16);ie.set(G,ie.length-G.length);var ue=new Uint8Array(32);e.stream(this._key,ie,ue,4);var ne=new Uint8Array(this.tagLength);if(this._authenticate(ne,ue,J.subarray(0,J.length-this.tagLength),Z),!T.equal(ne,J.subarray(J.length-this.tagLength,J.length)))return null;var ce=J.length-this.tagLength,ae;if(re){if(re.length!==ce)throw new Error("ChaCha20Poly1305: incorrect destination length");ae=re}else ae=new Uint8Array(ce);return e.streamXOR(this._key,ie,J.subarray(0,J.length-this.tagLength),ae,4),w.wipe(ie),ae},F.prototype.clean=function(){return w.wipe(this._key),this},F.prototype._authenticate=function(G,J,Z,re){var ie=new b.Poly1305(J);re&&(ie.update(re),re.length%16>0&&ie.update(N.subarray(re.length%16))),ie.update(Z),Z.length%16>0&&ie.update(N.subarray(Z.length%16));var ue=new Uint8Array(8);re&&$.writeUint64LE(re.length,ue),ie.update(ue),$.writeUint64LE(Z.length,ue),ie.update(ue);for(var ne=ie.digest(),ce=0;ce<ne.length;ce++)G[ce]=ne[ce];ie.clean(),w.wipe(ne),w.wipe(ue)},F}();t.ChaCha20Poly1305=C})(chacha20poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=xchacha20,b=chacha20poly1305,w=wipe$1;t.KEY_LENGTH=32,t.NONCE_LENGTH=24,t.TAG_LENGTH=16;var $=function(){function T(N){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,N.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(N)}return T.prototype.seal=function(N,C,F,G){if(N.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var J=e.hchacha(this._key,N.subarray(0,16),new Uint8Array(32)),Z=new Uint8Array(12);Z.set(N.subarray(16),4);var re=new b.ChaCha20Poly1305(J),ie=re.seal(Z,C,F,G);return w.wipe(J),w.wipe(Z),re.clean(),ie},T.prototype.open=function(N,C,F,G){if(N.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(C.length<this.tagLength)return null;var J=e.hchacha(this._key,N.subarray(0,16),new Uint8Array(32)),Z=new Uint8Array(12);Z.set(N.subarray(16),4);var re=new b.ChaCha20Poly1305(J),ie=re.open(Z,C,F,G);return w.wipe(J),w.wipe(Z),re.clean(),ie},T.prototype.clean=function(){return w.wipe(this._key),this},T}();t.XChaCha20Poly1305=$})(xchacha20poly1305);function bytesToBase64url(t){return toString(t,"base64url")}function base64ToBytes(t){const e=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return fromString(e,"base64url")}function base58ToBytes(t){return fromString(t,"base58btc")}function hexToBytes(t){const e=t.startsWith("0x")?t.substring(2):t;return fromString(e.toLowerCase(),"base16")}function encodeBase64url(t){return bytesToBase64url(fromString(t))}function decodeBase64url(t){return toString(base64ToBytes(t))}function bytesToHex(t){return toString(t,"base16")}function stringToBytes(t){return fromString(t)}function toJose({r:t,s:e,recoveryParam:b},w){const $=new Uint8Array(w?65:64);if($.set(fromString(t,"base16"),0),$.set(fromString(e,"base16"),32),w){if(typeof b=="undefined")throw new Error("Signer did not return a recoveryParam");$[64]=b}return bytesToBase64url($)}function fromJose(t){const e=base64ToBytes(t);if(e.length<64||e.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${e.length}`);const b=bytesToHex(e.slice(0,32)),w=bytesToHex(e.slice(32,64)),$=e.length===65?e[64]:void 0;return{r:b,s:w,recoveryParam:$}}function toSealed(t,e){return concat([base64ToBytes(t),base64ToBytes(e)])}const hexMatcher=/^(0x)?([a-fA-F0-9]{64}|[a-fA-F0-9]{128})$/,base58Matcher=/^([1-9A-HJ-NP-Za-km-z]{44}|[1-9A-HJ-NP-Za-km-z]{88})$/,base64Matcher=/^([0-9a-zA-Z=\-_+/]{43}|[0-9a-zA-Z=\-_+/]{86})(={0,2})$/;function parseKey(t){if(typeof t=="string"){if(hexMatcher.test(t))return hexToBytes(t);if(base58Matcher.test(t))return base58ToBytes(t);if(base64Matcher.test(t))return base64ToBytes(t);throw TypeError("bad_key: Invalid private key format")}else{if(t instanceof Uint8Array)return t;throw TypeError("bad_key: Invalid private key format")}}function leftpad(t,e=64){return t.length===e?t:"0".repeat(e-t.length)+t}function sha256(t){const e=typeof t=="string"?fromString(t):t;return sha256$3.hash(e)}function keccak(t){return new Uint8Array(sha3$2.exports.keccak_256.arrayBuffer(t))}function toEthereumAddress(t){const e=fromString(t.slice(2),"base16");return`0x${toString(keccak(e).slice(-20),"base16")}`}function writeUint32BE(t,e=new Uint8Array(4)){const b=fromString(t.toString(),"base10");return e.set(b,4-b.length),e}const lengthAndInput=t=>concat([writeUint32BE(t.length),t]);function concatKDF(t,e,b,w,$){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const T=concat([lengthAndInput(fromString(b)),lengthAndInput(typeof w=="undefined"?new Uint8Array(0):w),lengthAndInput(typeof $=="undefined"?new Uint8Array(0):$),writeUint32BE(e)]),N=1;return sha256$3.hash(concat([writeUint32BE(N),t,T]))}const secp256k1$1=new elliptic.ec("secp256k1");function ES256KSigner(t,e=!1){const b=parseKey(t);if(b.length!==32)throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${b.length}`);const w=secp256k1$1.keyFromPrivate(b);return function($){try{const{r:T,s:N,recoveryParam:C}=w.sign(sha256($));return Promise.resolve(toJose({r:leftpad(T.toString("hex")),s:leftpad(N.toString("hex")),recoveryParam:C},e))}catch(T){return Promise.reject(T)}}}function SimpleSigner(t){const e=ES256KSigner(t,!0);return function(b){try{return Promise.resolve(e(b)).then(fromJose)}catch(w){return Promise.reject(w)}}}function EllipticSigner(t){return ES256KSigner(t)}function EdDSASigner(t){const e=parseKey(t);if(e.length!==64)throw new Error(`bad_key: Invalid private key format. Expecting 64 bytes, but got ${e.length}`);return function(b){try{const w=typeof b=="string"?stringToBytes(b):b,$=ed25519$1.sign(e,w);return Promise.resolve(bytesToBase64url($))}catch(w){return Promise.reject(w)}}}function NaclSigner(t){return EdDSASigner(t)}function instanceOfEcdsaSignature(t){return typeof t=="object"&&"r"in t&&"s"in t}function ES256KSignerAlg(t){return function(b,w){try{return Promise.resolve(w(b)).then(function($){if(instanceOfEcdsaSignature($))return toJose($,t);if(t&&typeof fromJose($).recoveryParam=="undefined")throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return $})}catch($){return Promise.reject($)}}}function Ed25519SignerAlg(){return function(e,b){try{return Promise.resolve(b(e)).then(function(w){if(instanceOfEcdsaSignature(w))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return w})}catch(w){return Promise.reject(w)}}}const algorithms$1={ES256K:ES256KSignerAlg(),"ES256K-R":ES256KSignerAlg(!0),Ed25519:Ed25519SignerAlg(),EdDSA:Ed25519SignerAlg()};function SignerAlg(t){const e=algorithms$1[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}const secp256k1=new elliptic.ec("secp256k1");function toSignatureObject(t,e=!1){const b=base64ToBytes(t);if(b.length!==(e?65:64))throw new Error("wrong signature length");const w=bytesToHex(b.slice(0,32)),$=bytesToHex(b.slice(32,64)),T={r:w,s:$};return e&&(T.recoveryParam=b[64]),T}function extractPublicKeyBytes(t){if(t.publicKeyBase58)return base58ToBytes(t.publicKeyBase58);if(t.publicKeyBase64)return base64ToBytes(t.publicKeyBase64);if(t.publicKeyHex)return hexToBytes(t.publicKeyHex);if(t.publicKeyJwk&&t.publicKeyJwk.crv==="secp256k1"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256k1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyMultibase){const{base16:e,base58btc:b,base64:w,base64url:$}=bases$3;return e.decoder.or(b.decoder.or(w.decoder.or($.decoder))).decode(t.publicKeyMultibase)}return new Uint8Array}function verifyES256K(t,e,b){const w=sha256(t),$=toSignatureObject(e),T=b.filter(({ethereumAddress:F,blockchainAccountId:G})=>typeof F=="undefined"&&typeof G=="undefined"),N=b.filter(({ethereumAddress:F,blockchainAccountId:G})=>typeof F!="undefined"||typeof G!==void 0);let C=T.find(F=>{try{const G=extractPublicKeyBytes(F);return secp256k1.keyFromPublic(G).verify(w,$)}catch{return!1}});if(!C&&N.length>0&&(C=verifyRecoverableES256K(t,e,N)),!C)throw new Error("invalid_signature: Signature invalid for JWT");return C}function verifyRecoverableES256K(t,e,b){let w;if(e.length>86)w=[toSignatureObject(e,!0)];else{const N=toSignatureObject(e,!1);w=[gr(Tt({},N),{recoveryParam:0}),gr(Tt({},N),{recoveryParam:1})]}const $=N=>{const C=sha256(t),F=secp256k1.recoverPubKey(C,N,N.recoveryParam),G=F.encode("hex"),J=F.encode("hex",!0),Z=toEthereumAddress(G);return b.find(ie=>{var ue,ne,ce;const ae=bytesToHex(extractPublicKeyBytes(ie));return ae===G||ae===J||((ue=ie.ethereumAddress)==null?void 0:ue.toLowerCase())===Z||((ne=ie.blockchainAccountId)==null||(ce=ne.split("@eip155"))==null?void 0:ce[0].toLowerCase())===Z})},T=w.map($).filter(N=>typeof N!="undefined");if(T.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return T[0]}function verifyEd25519(t,e,b){const w=stringToBytes(t),$=base64ToBytes(e),T=b.find(N=>ed25519$1.verify(extractPublicKeyBytes(N),w,$));if(!T)throw new Error("invalid_signature: Signature invalid for JWT");return T}const algorithms={ES256K:verifyES256K,"ES256K-R":verifyRecoverableES256K,Ed25519:verifyEd25519,EdDSA:verifyEd25519};function VerifierAlgorithm(t){const e=algorithms[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}VerifierAlgorithm.toSignatureObject=toSignatureObject;const resolveAuthenticator=function(t,e,b,w){try{const $=SUPPORTED_PUBLIC_KEY_TYPES[e];if(!$||$.length===0)throw new Error(`not_supported: No supported signature types for algorithm ${e}`);let T;return Promise.resolve(t.resolve(b,{accept:DID_JSON})).then(function(N){var C,F,G,J,Z;if(Object.getOwnPropertyNames(N).indexOf("didDocument")===-1?T={didDocument:N,didDocumentMetadata:{},didResolutionMetadata:{contentType:DID_JSON}}:T=N,(C=T.didResolutionMetadata)!=null&&C.error||T.didDocument==null){const{error:ce,message:ae}=T.didResolutionMetadata;throw new Error(`resolver_error: Unable to resolve DID document for ${b}: ${ce}, ${ae||""}`)}const re=(ce,ae)=>{const ye=ce.filter(({id:$e})=>ae===$e);return ye.length>0?ye[0]:null};let ie=[...((F=T)==null||(G=F.didDocument)==null?void 0:G.verificationMethod)||[],...((J=T)==null||(Z=J.didDocument)==null?void 0:Z.publicKey)||[]];if(typeof w=="string"){var ue;w.startsWith("assertion")&&!Object.getOwnPropertyNames((ue=T)==null?void 0:ue.didDocument).includes("assertionMethod")&&(T.didDocument=Tt({},T.didDocument),T.didDocument.assertionMethod=[...ie.map(ce=>ce.id)]),ie=(T.didDocument[w]||[]).map(ce=>typeof ce=="string"?re(ie,ce):typeof ce.publicKey=="string"?re(ie,ce.publicKey):ce).filter(ce=>ce!=null)}const ne=ie.filter(({type:ce})=>$.find(ae=>ae===ce));if(typeof w=="string"&&(!ne||ne.length===0))throw new Error(`no_suitable_keys: DID document for ${b} does not have public keys suitable for ${e} with ${w} purpose`);if(!ne||ne.length===0)throw new Error(`no_suitable_keys: DID document for ${b} does not have public keys for ${e}`);return{authenticators:ne,issuer:b,didResolutionResult:T}})}catch($){return Promise.reject($)}},verifyJWT=function(t,e={resolver:void 0,auth:void 0,audience:void 0,callbackUrl:void 0,skewTime:void 0,proofPurpose:void 0}){try{if(!e.resolver)throw new Error("missing_resolver: No DID resolver has been configured");const{payload:b,header:w,signature:$,data:T}=decodeJWT(t),N=Object.prototype.hasOwnProperty.call(e,"auth")?e.auth?"authentication":void 0:e.proofPurpose;if(!b.iss)throw new Error("invalid_jwt: JWT iss is required");let C="";if(b.iss===SELF_ISSUED_V2){if(!b.sub)throw new Error("invalid_jwt: JWT sub is required");typeof b.sub_jwk=="undefined"?C=b.sub:C=(w.kid||"").split("#")[0]}else if(b.iss===SELF_ISSUED_V0_1){if(!b.did)throw new Error("invalid_jwt: JWT did is required");C=b.did}else C=b.iss;if(!C)throw new Error("invalid_jwt: No DID has been found in the JWT");return Promise.resolve(resolveAuthenticator(e.resolver,w.alg,C,N)).then(function({didResolutionResult:F,authenticators:G,issuer:J}){return Promise.resolve(verifyJWSDecoded({header:w,data:T,signature:$},G)).then(function(Z){const re=Math.floor(Date.now()/1e3),ie=typeof e.skewTime!="undefined"&&e.skewTime>=0?e.skewTime:NBF_SKEW;if(Z){const ue=re+ie;if(b.nbf){if(b.nbf>ue)throw new Error(`invalid_jwt: JWT not valid before nbf: ${b.nbf}`)}else if(b.iat&&b.iat>ue)throw new Error(`invalid_jwt: JWT not valid yet (issued in the future) iat: ${b.iat}`);if(b.exp&&b.exp<=re-ie)throw new Error(`invalid_jwt: JWT has expired: exp: ${b.exp} < now: ${re}`);if(b.aud){if(!e.audience&&!e.callbackUrl)throw new Error("invalid_config: JWT audience is required but your app address has not been configured");if(typeof(Array.isArray(b.aud)?b.aud:[b.aud]).find(ae=>e.audience===ae||e.callbackUrl===ae)=="undefined")throw new Error("invalid_config: JWT audience does not match your DID or callback url")}return{payload:b,didResolutionResult:F,issuer:J,signer:Z,jwt:t}}throw new Error("invalid_signature: JWT not valid. issuer DID document does not contain a verificationMethod that matches the signature.")})})}catch(b){return Promise.reject(b)}},createJWT=function(t,{issuer:e,signer:b,alg:w,expiresIn:$,canonicalize:T},N={}){try{if(!b)throw new Error("missing_signer: No Signer functionality has been configured");if(!e)throw new Error("missing_issuer: No issuing DID has been configured");N.typ||(N.typ="JWT"),N.alg||(N.alg=w);const C={iat:Math.floor(Date.now()/1e3),exp:void 0};if($)if(typeof $=="number")C.exp=(t.nbf||C.iat)+Math.floor($);else throw new Error("invalid_argument: JWT expiresIn is not a number");const F=gr(Tt(Tt({},C),t),{iss:e});return createJWS(F,b,N,{canonicalize:T})}catch(C){return Promise.reject(C)}},createJWS=function(t,e,b={},w={}){try{b.alg||(b.alg=defaultAlg);const $=typeof t=="string"?t:encodeSection(t,w.canonicalize),T=[encodeSection(b,w.canonicalize),$].join("."),N=SignerAlg(b.alg);return Promise.resolve(N(T,e)).then(function(C){return[T,C].join(".")})}catch($){return Promise.reject($)}},SUPPORTED_PUBLIC_KEY_TYPES={ES256K:["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1"],"ES256K-R":["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1"],Ed25519:["ED25519SignatureVerification","Ed25519VerificationKey2018"],EdDSA:["ED25519SignatureVerification","Ed25519VerificationKey2018"]},SELF_ISSUED_V2="https://self-issued.me/v2",SELF_ISSUED_V0_1="https://self-issued.me",defaultAlg="ES256K",DID_JSON="application/did+json";function encodeSection(t,e=!1){return encodeBase64url(e?canonicalize(t):JSON.stringify(t))}const NBF_SKEW=300;function decodeJWS(t){const e=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(e)return{header:JSON.parse(decodeBase64url(e[1])),payload:e[2],signature:e[3],data:`${e[1]}.${e[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function decodeJWT(t){if(!t)throw new Error("invalid_argument: no JWT passed into decodeJWT");try{const e=decodeJWS(t);return Object.assign(e,{payload:JSON.parse(decodeBase64url(e.payload))})}catch{throw new Error("invalid_argument: Incorrect format JWT")}}function verifyJWSDecoded({header:t,data:e,signature:b},w){return Array.isArray(w)||(w=[w]),VerifierAlgorithm(t.alg)(e,b,w)}function verifyJWS(t,e){const b=decodeJWS(t);return verifyJWSDecoded(b,e)}function _for(t,e,b){for(var w;;){var $=t();if(_isSettledPact($)&&($=$.v),!$)return T;if($.then){w=0;break}var T=b();if(T&&T.then)if(_isSettledPact(T))T=T.s;else{w=1;break}if(e){var N=e();if(N&&N.then&&!_isSettledPact(N)){w=2;break}}}var C=new _Pact,F=_settle.bind(null,C,2);return(w===0?$.then(J):w===1?T.then(G):N.then(Z)).then(void 0,F),C;function G(re){T=re;do{if(e&&(N=e(),N&&N.then&&!_isSettledPact(N))){N.then(Z).then(void 0,F);return}if($=t(),!$||_isSettledPact($)&&!$.v){_settle(C,1,T);return}if($.then){$.then(J).then(void 0,F);return}T=b(),_isSettledPact(T)&&(T=T.v)}while(!T||!T.then);T.then(G).then(void 0,F)}function J(re){re?(T=b(),T&&T.then?T.then(G).then(void 0,F):G(T)):_settle(C,1,T)}function Z(){($=t())?$.then?$.then(J).then(void 0,F):J($):_settle(C,1,T)}}const decryptJWE=function(t,e){try{let w=function(G){if(C===null)throw new Error("failure: Failed to decrypt");return C},b;validateJWE(t);const $=JSON.parse(decodeBase64url(t.protected));if($.enc!==e.enc)throw new Error(`not_supported: Decrypter does not supported: '${$.enc}'`);const T=toSealed(t.ciphertext,t.tag),N=new Uint8Array(Buffer.from(t.aad?`${t.protected}.${t.aad}`:t.protected));let C=null;const F=function(){return $.alg==="dir"&&e.alg==="dir"?Promise.resolve(e.decrypt(T,base64ToBytes(t.iv),N)).then(function(G){C=G}):function(){if(!t.recipients||t.recipients.length===0)throw new Error("bad_jwe: missing recipients");{let G=0;return _for(function(){return!C&&G<t.recipients.length},function(){return G++},function(){const J=t.recipients[G];Object.assign(J.header,$);const Z=function(){if(J.header.alg===e.alg)return Promise.resolve(e.decrypt(T,base64ToBytes(t.iv),N,J)).then(function(re){C=re})}();if(Z&&Z.then)return Z.then(function(){})})}}()}();return Promise.resolve(F&&F.then?F.then(w):w(F))}catch(b){return Promise.reject(b)}},_iteratorSymbol=typeof Symbol!="undefined"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function _settle(t,e,b){if(!t.s){if(b instanceof _Pact)if(b.s)e&1&&(e=b.s),b=b.v;else{b.o=_settle.bind(null,t,e);return}if(b&&b.then){b.then(_settle.bind(null,t,e),_settle.bind(null,t,2));return}t.s=e,t.v=b;const w=t.o;w&&w(t)}}const _Pact=function(){function t(){}return t.prototype.then=function(e,b){const w=new t,$=this.s;if($){const T=$&1?e:b;if(T){try{_settle(w,1,T(this.v))}catch(N){_settle(w,2,N)}return w}else return this}return this.o=function(T){try{const N=T.v;T.s&1?_settle(w,1,e?e(N):N):b?_settle(w,1,b(N)):_settle(w,2,N)}catch(N){_settle(w,2,N)}},w},t}();function _isSettledPact(t){return t instanceof _Pact&&t.s&1}function _forTo(t,e,b){var w=-1,$,T;function N(C){try{for(;++w<t.length&&(!b||!b());)if(C=e(w),C&&C.then)if(_isSettledPact(C))C=C.v;else{C.then(N,T||(T=_settle.bind(null,$=new _Pact,2)));return}$?_settle($,1,C):$=C}catch(F){_settle($||($=new _Pact),2,F)}}return N(),$}function _forOf(t,e,b){if(typeof t[_iteratorSymbol]=="function"){let J=function(Z){try{for(;!($=w.next()).done&&(!b||!b());)if(Z=e($.value),Z&&Z.then)if(_isSettledPact(Z))Z=Z.v;else{Z.then(J,N||(N=_settle.bind(null,T=new _Pact,2)));return}T?_settle(T,1,Z):T=Z}catch(re){_settle(T||(T=new _Pact),2,re)}};var w=t[_iteratorSymbol](),$,T,N;if(J(),w.return){var C=function(Z){try{$.done||w.return()}catch{}return Z};if(T&&T.then)return T.then(C,function(Z){throw C(Z)});C()}return T}if(!("length"in t))throw new TypeError("Object is not iterable");for(var F=[],G=0;G<t.length;G++)F.push(t[G]);return _forTo(F,function(J){return e(F[J])},b)}function validateJWE(t){if(!(t.protected&&t.iv&&t.ciphertext&&t.tag))throw new Error("bad_jwe: missing properties");t.recipients&&t.recipients.map(e=>{if(!(e.header&&e.encrypted_key))throw new Error("bad_jwe: malformed recipients")})}function encodeJWE({ciphertext:t,tag:e,iv:b,protectedHeader:w,recipient:$},T){const N={protected:w,iv:bytesToBase64url(b),ciphertext:bytesToBase64url(t),tag:bytesToBase64url(e)};return T&&(N.aad=bytesToBase64url(T)),$&&(N.recipients=[$]),N}const createJWE=function(t,e,b={},w){try{if(e[0].alg==="dir"){if(e.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(e[0].encrypt(t,b,w)).then(function($){return encodeJWE($,w)})}else{const $=e[0].enc;if(!e.reduce((F,G)=>F&&G.enc===$,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let T,N;const C=_forOf(e,function(F){const G=function(){return T?Promise.resolve(F.encryptCek==null?void 0:F.encryptCek(T)).then(function(J){if(J){var Z,re;(Z=N)==null||(re=Z.recipients)==null||re.push(J)}}):Promise.resolve(F.encrypt(t,b,w)).then(function(J){T=J.cek,N=encodeJWE(J,w)})}();if(G&&G.then)return G.then(function(){})});return Promise.resolve(C&&C.then?C.then(function(){return N}):N)}}catch($){return Promise.reject($)}};function createX25519ECDH(t){if(t.length!==32)throw new Error("invalid_argument: incorrect secret key length for X25519");return function(e){try{if(e.length!==32)throw new Error("invalid_argument: incorrect publicKey key length for X25519");return Promise.resolve(x25519.sharedKey(t,e))}catch(b){return Promise.reject(b)}}}const resolveX25519Encrypters=function(t,e){try{const b=function($){try{return Promise.resolve(e.resolve($)).then(function({didResolutionMetadata:T,didDocument:N}){var C;if(T!=null&&T.error||N==null)throw new Error(`resolver_error: Could not resolve ${$}: ${T.error}, ${T.message}`);if(!N.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${$}`);const G=((C=N.keyAgreement)==null?void 0:C.map(J=>typeof J=="string"?[...N.publicKey||[],...N.verificationMethod||[]].find(Z=>Z.id===J):J).filter(J=>typeof J!="undefined")).filter(J=>J.type==="X25519KeyAgreementKey2019"&&Boolean(J.publicKeyBase58));if(!G.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${$}`);return G.map(J=>x25519Encrypter(base58ToBytes(J.publicKeyBase58),J.id))})}catch(T){return Promise.reject(T)}},w=t.map($=>b($));return Promise.resolve(Promise.all(w)).then(function($){return[].concat(...$)})}catch(b){return Promise.reject(b)}};function createAuthEncrypter(t,e,b={}){return xc20pAuthEncrypterEcdh1PuV3x25519WithXc20PkwV2(t,e,b)}function createAnonEncrypter(t,e={}){return x25519Encrypter(t,e==null?void 0:e.kid)}function createAuthDecrypter(t,e){return xc20pAuthDecrypterEcdh1PuV3x25519WithXc20PkwV2(t,e)}function createAnonDecrypter(t){return x25519Decrypter(t)}function xc20pEncrypter(t){const e=new xchacha20poly1305.XChaCha20Poly1305(t);return(b,w)=>{const $=random.randomBytes(e.nonceLength),T=e.seal($,b,w);return{ciphertext:T.subarray(0,T.length-e.tagLength),tag:T.subarray(T.length-e.tagLength),iv:$}}}function xc20pDirEncrypter(t){const e=function(T,N={},C){try{const F=encodeBase64url(JSON.stringify(Object.assign({alg:$},N,{enc:w}))),G=new Uint8Array(Buffer.from(C?`${F}.${bytesToBase64url(C)}`:F));return Promise.resolve(gr(Tt({},b(T,G)),{protectedHeader:F}))}catch(F){return Promise.reject(F)}},b=xc20pEncrypter(t),w="XC20P",$="dir";return{alg:$,enc:w,encrypt:e}}function xc20pDirDecrypter(t){const e=function(w,$,T){try{return Promise.resolve(b.open($,w,T))}catch(N){return Promise.reject(N)}},b=new xchacha20poly1305.XChaCha20Poly1305(t);return{alg:"dir",enc:"XC20P",decrypt:e}}function x25519Encrypter(t,e){const b=function(C,F={},G){try{Object.assign(F,{alg:void 0});const J=random.randomBytes(32);return Promise.resolve(xc20pDirEncrypter(J).encrypt(C,F,G)).then(function(Z){return Promise.resolve(w(J)).then(function(re){return gr(Tt({},Z),{recipient:re,cek:J})})})}catch(J){return Promise.reject(J)}},w=function(C){try{const F=x25519.generateKeyPair(),G=x25519.sharedKey(F.secretKey,t),J=concatKDF(G,T,$),Z=xc20pEncrypter(J)(C),re={encrypted_key:bytesToBase64url(Z.ciphertext),header:{alg:$,iv:bytesToBase64url(Z.iv),tag:bytesToBase64url(Z.tag),epk:{kty:"OKP",crv:N,x:bytesToBase64url(F.publicKey)}}};return e&&(re.header.kid=e),Promise.resolve(re)}catch(F){return Promise.reject(F)}},$="ECDH-ES+XC20PKW",T=256,N="X25519";return{alg:$,enc:"XC20P",encrypt:b,encryptCek:w}}function xc20pAuthEncrypterEcdh1PuV3x25519WithXc20PkwV2(t,e,b={}){const w=function(J,Z={},re){try{Object.assign(Z,{alg:void 0});const ie=random.randomBytes(32);return Promise.resolve(xc20pDirEncrypter(ie).encrypt(J,Z,re)).then(function(ue){return Promise.resolve($(ie)).then(function(ne){return gr(Tt({},ue),{recipient:ne,cek:ie})})})}catch(ie){return Promise.reject(ie)}},$=function(J){try{let Z=function(){const ce=new Uint8Array(ie.length+ue.length);ce.set(ie),ce.set(ue,ie.length);const ae=concatKDF(ce,N,T,F,G),ye=xc20pEncrypter(ae)(J),$e={encrypted_key:bytesToBase64url(ye.ciphertext),header:{alg:T,iv:bytesToBase64url(ye.iv),tag:bytesToBase64url(ye.tag),epk:{kty:"OKP",crv:C,x:bytesToBase64url(re.publicKey)}}};return b.kid&&($e.header.kid=b.kid),b.apu&&($e.header.apu=b.apu),b.apv&&($e.header.apv=b.apv),$e};const re=x25519.generateKeyPair(),ie=x25519.sharedKey(re.secretKey,t);let ue;const ne=function(){if(e instanceof Uint8Array)ue=x25519.sharedKey(e,t);else return Promise.resolve(e(t)).then(function(ce){ue=ce})}();return Promise.resolve(ne&&ne.then?ne.then(Z):Z(ne))}catch(Z){return Promise.reject(Z)}},T="ECDH-1PU+XC20PKW",N=256,C="X25519";let F,G;return b.apu!==void 0&&(F=base64ToBytes(b.apu)),b.apv!==void 0&&(G=base64ToBytes(b.apv)),{alg:T,enc:"XC20P",encrypt:w,encryptCek:$}}function validateHeader(t){if(!(t&&t.epk&&t.iv&&t.tag))throw new Error("bad_jwe: malformed header")}function x25519Decrypter(t){const e=function(T,N,C,F){try{let Z=function(){const ne=concatKDF(ie,w,b),ce=toSealed(F.encrypted_key,F.header.tag);return Promise.resolve(xc20pDirDecrypter(ne).decrypt(ce,base64ToBytes(F.header.iv))).then(function(ae){return ae===null?null:xc20pDirDecrypter(ae).decrypt(T,N,C)})};var G,J;if(validateHeader((G=F)==null?void 0:G.header),F=F,((J=F.header.epk)==null?void 0:J.crv)!==$||typeof F.header.epk.x=="undefined")return Promise.resolve(null);const re=base64ToBytes(F.header.epk.x);let ie;const ue=function(){if(t instanceof Uint8Array)ie=x25519.sharedKey(t,re);else return Promise.resolve(t(re)).then(function(ne){ie=ne})}();return Promise.resolve(ue&&ue.then?ue.then(Z):Z(ue))}catch(Z){return Promise.reject(Z)}},b="ECDH-ES+XC20PKW",w=256,$="X25519";return{alg:b,enc:"XC20P",decrypt:e}}function xc20pAuthDecrypterEcdh1PuV3x25519WithXc20PkwV2(t,e){const b=function(N,C,F,G){try{let Z=function(){const ce=new Uint8Array(ie.length+ue.length);ce.set(ie),ce.set(ue,ie.length);let ae,ye;G.header.apu&&(ae=base64ToBytes(G.header.apu)),G.header.apv&&(ye=base64ToBytes(G.header.apv));const $e=concatKDF(ce,$,w,ae,ye),_e=toSealed(G.encrypted_key,G.header.tag);return Promise.resolve(xc20pDirDecrypter($e).decrypt(_e,base64ToBytes(G.header.iv))).then(function(be){return be===null?null:xc20pDirDecrypter(be).decrypt(N,C,F)})};var J;if(G=G,validateHeader(G.header),((J=G.header.epk)==null?void 0:J.crv)!==T||typeof G.header.epk.x=="undefined")return Promise.resolve(null);const re=base64ToBytes(G.header.epk.x);let ie,ue;const ne=function(){if(t instanceof Uint8Array)ie=x25519.sharedKey(t,re),ue=x25519.sharedKey(t,e);else return Promise.resolve(t(re)).then(function(ce){return ie=ce,Promise.resolve(t(e)).then(function(ae){ue=ae})})}();return Promise.resolve(ne&&ne.then?ne.then(Z):Z(ne))}catch(Z){return Promise.reject(Z)}},w="ECDH-1PU+XC20PKW",$=256,T="X25519";return{alg:w,enc:"XC20P",decrypt:b}}var index_module=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ES256KSigner,EdDSASigner,EllipticSigner,NaclSigner,SimpleSigner,createAnonDecrypter,createAnonEncrypter,createAuthDecrypter,createAuthEncrypter,createJWE,createJWS,createJWT,createX25519ECDH,decodeJWT,decryptJWE,resolveX25519Encrypters,toEthereumAddress,verifyJWS,verifyJWT,x25519Decrypter,x25519Encrypter,xc20pAuthDecrypterEcdh1PuV3x25519WithXc20PkwV2,xc20pAuthEncrypterEcdh1PuV3x25519WithXc20PkwV2,xc20pDirDecrypter,xc20pDirEncrypter}),require$$1=getAugmentedNamespace(index_module),lib={},__createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding$1(e,t,b);return __setModuleDefault$1(e,t),e},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lib,"__esModule",{value:!0});lib.decodeCleartext=lib.prepareCleartext=lib.decodeIdentityCID=lib.encodeIdentityCID=lib.encodePayload=void 0;const ipld_dag_cbor_1=__importDefault(src$2),cids_1=__importDefault(src$3),multihashes_1=__importDefault(src$5),u8a$1=__importStar$1(uint8arrays$7),varint_1=__importDefault(varint$2),DAG_CBOR_CODE=113,ID_MULTIHASH=0,ENC_BLOCK_SIZE=24;function encodePayload(t){return __awaiter$1(this,void 0,void 0,function*(){const e=new Uint8Array(ipld_dag_cbor_1.default.util.serialize(t));return{cid:yield ipld_dag_cbor_1.default.util.cid(e),linkedBlock:e}})}lib.encodePayload=encodePayload;function pad(t,e=ENC_BLOCK_SIZE){const b=(e-t.length%e)%e;return u8a$1.concat([t,new Uint8Array(b)])}function unpadCIDBytes(t){let e=0,b;for(let w=0;w<4;w++)b=varint_1.default.decode(t,e),e+=varint_1.default.decode.bytes;return new cids_1.default(t.slice(0,e+b))}function encodeIdentityCID(t){const e=ipld_dag_cbor_1.default.util.serialize(t),b=multihashes_1.default.encode(e,ID_MULTIHASH);return new cids_1.default(1,DAG_CBOR_CODE,b)}lib.encodeIdentityCID=encodeIdentityCID;function decodeIdentityCID(t){if(cids_1.default.validateCID(t),t.code!==DAG_CBOR_CODE)throw new Error("CID codec must be dag-cbor");const{code:e,digest:b}=multihashes_1.default.decode(t.multihash);if(e!==ID_MULTIHASH)throw new Error("CID must use identity multihash");return ipld_dag_cbor_1.default.util.deserialize(b)}lib.decodeIdentityCID=decodeIdentityCID;function prepareCleartext(t,e){return pad(encodeIdentityCID(t).bytes,e)}lib.prepareCleartext=prepareCleartext;function decodeCleartext(t){return decodeIdentityCID(unpadCIDBytes(t))}lib.decodeCleartext=decodeCleartext;function asyncGeneratorStep(t,e,b,w,$,T,N){try{var C=t[T](N),F=C.value}catch(G){b(G);return}C.done?e(F):Promise.resolve(F).then(w,$)}function _asyncToGenerator(t){return function(){var e=this,b=arguments;return new Promise(function(w,$){var T=t.apply(e,b);function N(F){asyncGeneratorStep(T,w,$,N,C,"next",F)}function C(F){asyncGeneratorStep(T,w,$,N,C,"throw",F)}N(void 0)})}}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function(w,$){return w.__proto__=$,w},_setPrototypeOf(t,e)}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _construct(t,e,b){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function($,T,N){var C=[null];C.push.apply(C,T);var F=Function.bind.apply($,C),G=new F;return N&&_setPrototypeOf(G,N.prototype),G},_construct.apply(null,arguments)}function _isNativeFunction(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _wrapNativeSuper(t){var e=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(w){if(w===null||!_isNativeFunction(w))return w;if(typeof w!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(w))return e.get(w);e.set(w,$)}function $(){return _construct(w,arguments,_getPrototypeOf(this).constructor)}return $.prototype=Object.create(w.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf($,w)},_wrapNativeSuper(t)}function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function createCommonjsModule(t,e){return e={exports:{}},t(e,e.exports),e.exports}var runtime_1=createCommonjsModule(function(t){var e=function(b){var w=Object.prototype,$=w.hasOwnProperty,T,N=typeof Symbol=="function"?Symbol:{},C=N.iterator||"@@iterator",F=N.asyncIterator||"@@asyncIterator",G=N.toStringTag||"@@toStringTag";function J(H,j,L){return Object.defineProperty(H,j,{value:L,enumerable:!0,configurable:!0,writable:!0}),H[j]}try{J({},"")}catch{J=function(j,L,q){return j[L]=q}}function Z(H,j,L,q){var U=j&&j.prototype instanceof ye?j:ye,oe=Object.create(U.prototype),ve=new B(q||[]);return oe._invoke=pe(H,L,ve),oe}b.wrap=Z;function re(H,j,L){try{return{type:"normal",arg:H.call(j,L)}}catch(q){return{type:"throw",arg:q}}}var ie="suspendedStart",ue="suspendedYield",ne="executing",ce="completed",ae={};function ye(){}function $e(){}function _e(){}var be={};be[C]=function(){return this};var xe=Object.getPrototypeOf,ee=xe&&xe(xe(V([])));ee&&ee!==w&&$.call(ee,C)&&(be=ee);var he=_e.prototype=ye.prototype=Object.create(be);$e.prototype=he.constructor=_e,_e.constructor=$e,$e.displayName=J(_e,G,"GeneratorFunction");function we(H){["next","throw","return"].forEach(function(j){J(H,j,function(L){return this._invoke(j,L)})})}b.isGeneratorFunction=function(H){var j=typeof H=="function"&&H.constructor;return j?j===$e||(j.displayName||j.name)==="GeneratorFunction":!1},b.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,_e):(H.__proto__=_e,J(H,G,"GeneratorFunction")),H.prototype=Object.create(he),H},b.awrap=function(H){return{__await:H}};function Ne(H,j){function L(oe,ve,fe,Oe){var Se=re(H[oe],H,ve);if(Se.type==="throw")Oe(Se.arg);else{var Te=Se.arg,Ae=Te.value;return Ae&&typeof Ae=="object"&&$.call(Ae,"__await")?j.resolve(Ae.__await).then(function(le){L("next",le,fe,Oe)},function(le){L("throw",le,fe,Oe)}):j.resolve(Ae).then(function(le){Te.value=le,fe(Te)},function(le){return L("throw",le,fe,Oe)})}}var q;function U(oe,ve){function fe(){return new j(function(Oe,Se){L(oe,ve,Oe,Se)})}return q=q?q.then(fe,fe):fe()}this._invoke=U}we(Ne.prototype),Ne.prototype[F]=function(){return this},b.AsyncIterator=Ne,b.async=function(H,j,L,q,U){U===void 0&&(U=Promise);var oe=new Ne(Z(H,j,L,q),U);return b.isGeneratorFunction(j)?oe:oe.next().then(function(ve){return ve.done?ve.value:oe.next()})};function pe(H,j,L){var q=ie;return function(oe,ve){if(q===ne)throw new Error("Generator is already running");if(q===ce){if(oe==="throw")throw ve;return Q()}for(L.method=oe,L.arg=ve;;){var fe=L.delegate;if(fe){var Oe=te(fe,L);if(Oe){if(Oe===ae)continue;return Oe}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(q===ie)throw q=ce,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);q=ne;var Se=re(H,j,L);if(Se.type==="normal"){if(q=L.done?ce:ue,Se.arg===ae)continue;return{value:Se.arg,done:L.done}}else Se.type==="throw"&&(q=ce,L.method="throw",L.arg=Se.arg)}}}function te(H,j){var L=H.iterator[j.method];if(L===T){if(j.delegate=null,j.method==="throw"){if(H.iterator.return&&(j.method="return",j.arg=T,te(H,j),j.method==="throw"))return ae;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var q=re(L,H.iterator,j.arg);if(q.type==="throw")return j.method="throw",j.arg=q.arg,j.delegate=null,ae;var U=q.arg;if(!U)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,ae;if(U.done)j[H.resultName]=U.value,j.next=H.nextLoc,j.method!=="return"&&(j.method="next",j.arg=T);else return U;return j.delegate=null,ae}we(he),J(he,G,"Generator"),he[C]=function(){return this},he.toString=function(){return"[object Generator]"};function Y(H){var j={tryLoc:H[0]};1 in H&&(j.catchLoc=H[1]),2 in H&&(j.finallyLoc=H[2],j.afterLoc=H[3]),this.tryEntries.push(j)}function R(H){var j=H.completion||{};j.type="normal",delete j.arg,H.completion=j}function B(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}b.keys=function(H){var j=[];for(var L in H)j.push(L);return j.reverse(),function q(){for(;j.length;){var U=j.pop();if(U in H)return q.value=U,q.done=!1,q}return q.done=!0,q}};function V(H){if(H){var j=H[C];if(j)return j.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var L=-1,q=function U(){for(;++L<H.length;)if($.call(H,L))return U.value=H[L],U.done=!1,U;return U.value=T,U.done=!0,U};return q.next=q}}return{next:Q}}b.values=V;function Q(){return{value:T,done:!0}}return B.prototype={constructor:B,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=T,this.done=!1,this.delegate=null,this.method="next",this.arg=T,this.tryEntries.forEach(R),!H)for(var j in this)j.charAt(0)==="t"&&$.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=T)},stop:function(){this.done=!0;var H=this.tryEntries[0],j=H.completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var j=this;function L(Oe,Se){return oe.type="throw",oe.arg=H,j.next=Oe,Se&&(j.method="next",j.arg=T),!!Se}for(var q=this.tryEntries.length-1;q>=0;--q){var U=this.tryEntries[q],oe=U.completion;if(U.tryLoc==="root")return L("end");if(U.tryLoc<=this.prev){var ve=$.call(U,"catchLoc"),fe=$.call(U,"finallyLoc");if(ve&&fe){if(this.prev<U.catchLoc)return L(U.catchLoc,!0);if(this.prev<U.finallyLoc)return L(U.finallyLoc)}else if(ve){if(this.prev<U.catchLoc)return L(U.catchLoc,!0)}else if(fe){if(this.prev<U.finallyLoc)return L(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,j){for(var L=this.tryEntries.length-1;L>=0;--L){var q=this.tryEntries[L];if(q.tryLoc<=this.prev&&$.call(q,"finallyLoc")&&this.prev<q.finallyLoc){var U=q;break}}U&&(H==="break"||H==="continue")&&U.tryLoc<=j&&j<=U.finallyLoc&&(U=null);var oe=U?U.completion:{};return oe.type=H,oe.arg=j,U?(this.method="next",this.next=U.finallyLoc,ae):this.complete(oe)},complete:function(H,j){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&j&&(this.next=j),ae},finish:function(H){for(var j=this.tryEntries.length-1;j>=0;--j){var L=this.tryEntries[j];if(L.finallyLoc===H)return this.complete(L.completion,L.afterLoc),R(L),ae}},catch:function(H){for(var j=this.tryEntries.length-1;j>=0;--j){var L=this.tryEntries[j];if(L.tryLoc===H){var q=L.completion;if(q.type==="throw"){var U=q.arg;R(L)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(H,j,L){return this.delegate={iterator:V(H),resultName:j,nextLoc:L},this.method==="next"&&(this.arg=T),ae}},b}(t.exports);try{regeneratorRuntime=e}catch{Function("r","regeneratorRuntime = r")(e)}}),_ERROR_MESSAGE,ERROR_CODE;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(ERROR_CODE||(ERROR_CODE={}));var ERROR_MESSAGE=(_ERROR_MESSAGE={},_ERROR_MESSAGE[ERROR_CODE.PARSE_ERROR]="Parse error",_ERROR_MESSAGE[ERROR_CODE.INVALID_REQUEST]="Invalid request",_ERROR_MESSAGE[ERROR_CODE.METHOD_NOT_FOUND]="Method not found",_ERROR_MESSAGE[ERROR_CODE.INVALID_PARAMS]="Invalid params",_ERROR_MESSAGE[ERROR_CODE.INTERNAL_ERROR]="Internal error",_ERROR_MESSAGE);function isServerError(t){return-32e3>=t&&t>=-32099}function getErrorMessage(t){var e;return(e=ERROR_MESSAGE[t.toString()])!=null?e:isServerError(t)?"Server error":"Application error"}var RPCError=function(t){_inheritsLoose(e,t);function e(w,$,T){var N;return N=t.call(this)||this,Object.setPrototypeOf(_assertThisInitialized(N),e.prototype),N.code=w,N.data=T,N.message=$!=null?$:getErrorMessage(w),N}e.fromObject=function($){return new e($.code,$.message,$.data)};var b=e.prototype;return b.toObject=function(){return{code:this.code,data:this.data,message:this.message}},e}(_wrapNativeSuper(Error));function createErrorFactory(t){var e=ERROR_MESSAGE[t];return function(w){return new RPCError(t,e,w)}}var createParseError=createErrorFactory(ERROR_CODE.PARSE_ERROR),createInvalidRequest=createErrorFactory(ERROR_CODE.INVALID_REQUEST),createMethodNotFound=createErrorFactory(ERROR_CODE.METHOD_NOT_FOUND),createInvalidParams=createErrorFactory(ERROR_CODE.INVALID_PARAMS),createInternalError=createErrorFactory(ERROR_CODE.INTERNAL_ERROR),RPCClient=function(){function t(b){this.connection=b}var e=t.prototype;return e.createID=function(){return nanoid()},e.request=function(){var b=_asyncToGenerator(runtime_1.mark(function $(T,N){var C;return runtime_1.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return N===void 0&&(N=void 0),G.next=3,this.connection.send({jsonrpc:"2.0",id:this.createID(),method:T,params:N});case 3:if(C=G.sent,C!=null){G.next=6;break}throw new Error("Missing response");case 6:if(C.error==null){G.next=8;break}throw RPCError.fromObject(C.error);case 8:return G.abrupt("return",C.result);case 9:case"end":return G.stop()}},$,this)}));function w($,T){return b.apply(this,arguments)}return w}(),t}();function parseJSON(t){try{return JSON.parse(t)}catch{throw createParseError()}}function createErrorResponse(t,e){return{jsonrpc:"2.0",id:t,error:{code:e,message:getErrorMessage(e)}}}function fallbackOnHandlerError(t,e,b){console.warn("Unhandled handler error",e,b)}function fallbackOnInvalidMessage(t,e){console.warn("Unhandled invalid message",e)}function fallbackOnNotification(t,e){console.warn("Unhandled notification",e)}function createHandler(t,e){var b,w,$;e===void 0&&(e={});var T=(b=e.onHandlerError)!=null?b:fallbackOnHandlerError,N=(w=e.onInvalidMessage)!=null?w:fallbackOnInvalidMessage,C=($=e.onNotification)!=null?$:fallbackOnNotification;return function(){var F=_asyncToGenerator(runtime_1.mark(function J(Z,re){var ie,ue,ne,ce,ae,ye,$e;return runtime_1.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(ie=re.id,!(re.jsonrpc!=="2.0"||re.method==null)){be.next=6;break}if(ie!=null){be.next=5;break}return N(Z,re),be.abrupt("return",null);case 5:return be.abrupt("return",createErrorResponse(ie,ERROR_CODE.INVALID_REQUEST));case 6:if(ie!=null){be.next=9;break}return C(Z,re),be.abrupt("return",null);case 9:if(ue=t[re.method],ue!=null){be.next=12;break}return be.abrupt("return",createErrorResponse(ie,ERROR_CODE.METHOD_NOT_FOUND));case 12:if(be.prev=12,ne=ue(Z,re.params),ne!=null){be.next=18;break}be.t0=ne,be.next=26;break;case 18:if(typeof ne.then!="function"){be.next=24;break}return be.next=21,ne;case 21:be.t1=be.sent,be.next=25;break;case 24:be.t1=ne;case 25:be.t0=be.t1;case 26:return ce=be.t0,be.abrupt("return",{jsonrpc:"2.0",id:ie,result:ce});case 30:return be.prev=30,be.t2=be.catch(12),be.t2 instanceof RPCError?ae=be.t2.toObject():(T(Z,re,be.t2),$e=(ye=be.t2.code)!=null?ye:-32e3,ae={code:$e,message:be.t2.message||getErrorMessage($e)}),be.abrupt("return",{jsonrpc:"2.0",id:ie,error:ae});case 34:case"end":return be.stop()}},J,null,[[12,30]])}));function G(J,Z){return F.apply(this,arguments)}return G}()}var rpcUtils_esm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get ERROR_CODE(){return ERROR_CODE},ERROR_MESSAGE,RPCClient,RPCError,createErrorResponse,createHandler,createInternalError,createInvalidParams,createInvalidRequest,createMethodNotFound,createParseError,getErrorMessage,isServerError,parseJSON}),require$$3=getAugmentedNamespace(rpcUtils_esm),utils={},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,b,w){w===void 0&&(w=b),Object.defineProperty(t,w,{enumerable:!0,get:function(){return e[b]}})}:function(t,e,b,w){w===void 0&&(w=b),t[w]=e[b]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var b in t)b!=="default"&&Object.prototype.hasOwnProperty.call(t,b)&&__createBinding(e,t,b);return __setModuleDefault(e,t),e};Object.defineProperty(utils,"__esModule",{value:!0});utils.extractControllers=utils.didWithTime=utils.fromDagJWS=utils.randomString=utils.base64urlToJSON=utils.decodeBase64=utils.encodeBase64Url=utils.encodeBase64=void 0;const u8a=__importStar(uint8arrays$7),random_1=random,B64="base64pad",B64_URL="base64url";function encodeBase64(t){return u8a.toString(t,B64)}utils.encodeBase64=encodeBase64;function encodeBase64Url(t){return u8a.toString(t,B64_URL)}utils.encodeBase64Url=encodeBase64Url;function decodeBase64(t){return u8a.fromString(t,B64)}utils.decodeBase64=decodeBase64;function base64urlToJSON(t){return JSON.parse(u8a.toString(u8a.fromString(t,B64_URL)))}utils.base64urlToJSON=base64urlToJSON;function randomString(){return u8a.toString(random_1.randomBytes(16),"base64")}utils.randomString=randomString;function fromDagJWS(t){if(t.signatures.length>1)throw new Error("Cant convert to compact jws");return`${t.signatures[0].protected}.${t.payload}.${t.signatures[0].signature}`}utils.fromDagJWS=fromDagJWS;function didWithTime(t,e){if(e){const b=new Date(e).toISOString().split(".")[0]+"Z";return`${t}?versionTime=${b}`}else return t}utils.didWithTime=didWithTime;function extractControllers(t){return t?Array.isArray(t)?t:[t]:[]}utils.extractControllers=extractControllers;var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,b,w){function $(T){return T instanceof b?T:new b(function(N){N(T)})}return new(b||(b=Promise))(function(T,N){function C(J){try{G(w.next(J))}catch(Z){N(Z)}}function F(J){try{G(w.throw(J))}catch(Z){N(Z)}}function G(J){J.done?T(J.value):$(J.value).then(C,F)}G((w=w.apply(t,e||[])).next())})};Object.defineProperty(did,"__esModule",{value:!0});did.DID=void 0;const did_resolver_1=require$$0$1,did_jwt_1=require$$1,dag_jose_utils_1=lib,rpc_utils_1=require$$3,utils_1=utils;function isResolver(t){return"registry"in t&&"cache"in t}class DID{constructor({provider:e,resolver:b={},resolverOptions:w}={}){e!=null&&(this._client=new rpc_utils_1.RPCClient(e)),this.setResolver(b,w)}get authenticated(){return this._id!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}setProvider(e){if(this._client==null)this._client=new rpc_utils_1.RPCClient(e);else if(this._client.connection!==e)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(e,b){this._resolver=isResolver(e)?e:new did_resolver_1.Resolver(e,b)}authenticate({provider:e,paths:b=[],aud:w}={}){return __awaiter(this,void 0,void 0,function*(){if(e!=null&&this.setProvider(e),this._client==null)throw new Error("No provider available");const $=utils_1.randomString(),T=yield this._client.request("did_authenticate",{nonce:$,aud:w,paths:b}),{kid:N}=yield this.verifyJWS(T),C=utils_1.base64urlToJSON(T.payload);if(!N.includes(C.did))throw new Error("Invalid authencation response, kid mismatch");if(C.nonce!==$)throw new Error("Invalid authencation response, wrong nonce");if(C.aud!==w)throw new Error("Invalid authencation response, wrong aud");if(C.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=C.did,this._id})}createJWS(e,b={}){return __awaiter(this,void 0,void 0,function*(){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{jws:w}=yield this._client.request("did_createJWS",Object.assign(Object.assign({did:this._id},b),{payload:e}));return w})}createDagJWS(e,b={}){return __awaiter(this,void 0,void 0,function*(){const{cid:w,linkedBlock:$}=yield dag_jose_utils_1.encodePayload(e),T=utils_1.encodeBase64Url(w.bytes);Object.assign(b,{linkedBlock:utils_1.encodeBase64($)});const N=yield this.createJWS(T,b);return N.link=w,{jws:N,linkedBlock:$}})}verifyJWS(e,b={}){var w,$,T,N,C;return __awaiter(this,void 0,void 0,function*(){typeof e!="string"&&(e=utils_1.fromDagJWS(e));const F=utils_1.base64urlToJSON(e.split(".")[0]).kid;if(!F)throw new Error('No "kid" found in jws');const G=yield this.resolve(F);if(!b.disableTimecheck){const ue=(w=G.didDocumentMetadata)===null||w===void 0?void 0:w.nextUpdate;if(ue&&!(b.atTime&&b.atTime<new Date(ue).valueOf()))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${F}`);const ne=($=G.didDocumentMetadata)===null||$===void 0?void 0:$.updated;if(ne&&b.atTime&&b.atTime<new Date(ne).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${F}`)}const Z=(T=G.didDocument)===null||T===void 0?void 0:T.id;if(b.issuer&&b.issuer!==Z){const ue=utils_1.didWithTime(b.issuer,b.atTime),ce=(N=(yield this.resolve(ue)).didDocument)===null||N===void 0?void 0:N.controller,ae=utils_1.extractControllers(ce);if(!(Z?ae.includes(Z):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${F}`)}const re=((C=G.didDocument)===null||C===void 0?void 0:C.verificationMethod)||[];did_jwt_1.verifyJWS(e,re);let ie;try{ie=utils_1.base64urlToJSON(e.split(".")[1])}catch{}return{kid:F,payload:ie,didResolutionResult:G}})}createJWE(e,b,w={}){return __awaiter(this,void 0,void 0,function*(){const $=yield did_jwt_1.resolveX25519Encrypters(b,this._resolver);return did_jwt_1.createJWE(e,$,w.protectedHeader,w.aad)})}createDagJWE(e,b,w={}){return __awaiter(this,void 0,void 0,function*(){return this.createJWE(dag_jose_utils_1.prepareCleartext(e),b,w)})}decryptJWE(e,b={}){return __awaiter(this,void 0,void 0,function*(){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{cleartext:w}=yield this._client.request("did_decryptJWE",Object.assign(Object.assign({did:this._id},b),{jwe:e}));return utils_1.decodeBase64(w)})}decryptDagJWE(e){return __awaiter(this,void 0,void 0,function*(){const b=yield this.decryptJWE(e);return dag_jose_utils_1.decodeCleartext(b)})}resolve(e){return __awaiter(this,void 0,void 0,function*(){const b=yield this._resolver.resolve(e);if(b.didResolutionMetadata.error){const{error:w,message:$}=b.didResolutionMetadata,T=$?`, ${$}`:"";throw new Error(`Failed to resolve ${e}: ${w}${T}`)}return b})}}did.DID=DID;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(w,$,T,N){N===void 0&&(N=T),Object.defineProperty(w,N,{enumerable:!0,get:function(){return $[T]}})}:function(w,$,T,N){N===void 0&&(N=T),w[N]=$[T]}),b=commonjsGlobal&&commonjsGlobal.__exportStar||function(w,$){for(var T in w)T!=="default"&&!Object.prototype.hasOwnProperty.call($,T)&&e($,w,T)};Object.defineProperty(t,"__esModule",{value:!0}),b(types,t),b(did,t)})(lib$1);var s=(t,e,b)=>{if(!e.has(t))throw TypeError("Cannot "+b)},d=(t,e,b)=>(s(t,e,"read from private field"),b?b.call(t):e.get(t)),D=(t,e,b)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,b)},I=(t,e,b,w)=>(s(t,e,"write to private field"),w?w.call(t,b):e.set(t,b),b),a;class h extends I$1{constructor(e){super(e);var b;D(this,a,void 0),I(this,a,new ThreeIdConnect((b=e.connectNetwork)!=null?b:e.ceramic))}get threeId(){return d(this,a)}async authenticate(e,b=!1){const w=await this.connect(e);return await w.authenticate(),b&&(this.ceramic.did=w),w}async connect(e){return await d(this,a).connect(e),new lib$1.DID({provider:d(this,a).getDidProvider(),resolver:this.resolver})}}a=new WeakMap,typeof require!="undefined"&&require;var u=(t,e,b)=>{if(!e.has(t))throw TypeError("Cannot "+b)},o=(t,e,b)=>(u(t,e,"read from private field"),b?b.call(t):e.get(t)),f=(t,e,b)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,b)},p=(t,e,b,w)=>(u(t,e,"write to private field"),w?w.call(t,b):e.set(t,b),b),n,c;const v=class{constructor(t){if(f(this,n,void 0),f(this,c,void 0),!t.did.authenticated)throw new Error("Input DID must be authenticated, use SelfID.authenticate() instead of new SelfID()");p(this,n,t.client),p(this,c,t.did)}static async authenticate(t){const T=t,{authProvider:e}=T,b=Ur(T,["authProvider"]),w=new h(b),$=await w.authenticate(e,!0);return new v({client:w,did:$})}get client(){return o(this,n)}get id(){return o(this,c).id}async get(t){return await o(this,n).dataStore.get(t,o(this,c).id)}async set(t,e){return await o(this,n).dataStore.set(t,e)}};let S=v;n=new WeakMap,c=new WeakMap;var pkg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SelfID:S,WebClient:h,EthereumAuthProvider:lib$e.EthereumAuthProvider});export{onMount as A,assign$1 as B,writable as C,append_hydration as D,component_subscribe as E,noop$3 as F,src_url_equal as G,create_slot as H,update_slot_base as I,get_all_dirty_from_scope as J,get_slot_changes as K,getContext as L,pkg as M,get_store_value as N,listen as O,svg_element as P,claim_svg_element as Q,query_selector_all as R,SvelteComponent as S,decodeJWT as T,set_input_value as U,Web3Provider as W,children as a,attr as b,claim_element as c,detach as d,element as e,insert_hydration as f,claim_text as g,set_data as h,init as i,create_component as j,space as k,empty$5 as l,claim_component as m,claim_space as n,mount_component as o,get_spread_update as p,get_spread_object as q,group_outros as r,safe_not_equal as s,text as t,transition_out as u,destroy_component as v,check_outros as w,transition_in as x,setContext as y,afterUpdate as z};
