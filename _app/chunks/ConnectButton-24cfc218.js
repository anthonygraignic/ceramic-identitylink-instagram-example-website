import{L,W as q,M as K,N as z,C as u,S as U,i as V,s as j,e as b,c as m,a as g,d,f as C,O as F,F as I,E as H,t as P,g as A,P as w,k as Q,Q as E,n as Y,b as c,D as f}from"./vendor-488d1913.js";const G=()=>{const e=L("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}},ue={subscribe(e){return G().page.subscribe(e)}},T={CERAMIC:"local",CERAMIC_CONNECT_NETWORK:"testnet-clay",IDENTITY_LINK_URL:"http://localhost:3080"},{EthereumAuthProvider:J,SelfID:X,WebClient:Z}=K;let y=null,p=null,_=null,k=null;async function ee(){if(_=window.ethereum,!_)throw new Error("No ethereum provider.");const e=new Z({ceramic:T.CERAMIC,connectNetwork:T.CERAMIC_CONNECT_NETWORK});await _.request({method:"eth_requestAccounts"}),k=new q(_);const t=await k.getSigner().getAddress(),s=new J(_,t);return console.log(s),p=await e.authenticate(s,!0),console.log(p),y=new X({client:e,did:p}),console.log(y),{provider:k,ethereumProvider:_,self:y,did:p}}const R=u(null),S=u(null),$=u(null),te=u(null),N=u(!1),M=u(!1),O=u(null),se=u(null),ne=u(null);R.subscribe(e=>{e&&(e.on("accountsChanged",W),e.on("chainChanged",B))});S.subscribe(e=>{e?M.set(!0):(M.set(!1),O.set(null))});async function re(){N.set(!0);const e=await ee();$.set(e.provider),R.set(e.ethereumProvider),se.set(e.self),ne.set(e.did),await B(e.ethereumProvider.chainId),await W(),N.set(!1)}async function W(){const e=await D().getSigner().getAddress();O.set(e.toLowerCase()),S.set(D().getSigner())}function B(e){te.set(e)}function D(){return z($)}function oe(e){let t;return{c(){t=P("Connect")},l(s){t=A(s,"Connect")},m(s,n){C(s,t,n)},d(s){s&&d(t)}}}function ce(e){let t,s,n,i,l,r,o;return{c(){t=b("div"),s=w("svg"),n=w("circle"),i=w("path"),l=Q(),r=b("p"),o=P("Connecting..."),this.h()},l(a){t=m(a,"DIV",{class:!0});var h=g(t);s=E(h,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var v=g(s);n=E(v,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),g(n).forEach(d),i=E(v,"path",{class:!0,fill:!0,d:!0}),g(i).forEach(d),v.forEach(d),l=Y(h),r=m(h,"P",{});var x=g(r);o=A(x,"Connecting..."),x.forEach(d),h.forEach(d),this.h()},h(){c(n,"class","opacity-25"),c(n,"cx","12"),c(n,"cy","12"),c(n,"r","10"),c(n,"stroke","currentColor"),c(n,"stroke-width","4"),c(i,"class","opacity-75"),c(i,"fill","currentColor"),c(i,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),c(s,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white dark:text-black"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"fill","none"),c(s,"viewBox","0 0 24 24"),c(t,"class","connecting svelte-ixysui")},m(a,h){C(a,t,h),f(t,s),f(s,n),f(s,i),f(t,l),f(t,r),f(r,o)},d(a){a&&d(t)}}}function ae(e){let t,s,n;function i(o,a){return o[0]?ce:oe}let l=i(e),r=l(e);return{c(){t=b("button"),r.c(),this.h()},l(o){t=m(o,"BUTTON",{});var a=g(t);r.l(a),a.forEach(d),this.h()},h(){t.disabled=e[0]},m(o,a){C(o,t,a),r.m(t,null),s||(n=F(t,"click",e[1]),s=!0)},p(o,[a]){l!==(l=i(o))&&(r.d(1),r=l(o),r&&(r.c(),r.m(t,null))),a&1&&(t.disabled=o[0])},i:I,o:I,d(o){o&&d(t),r.d(),s=!1,n()}}}function ie(e,t,s){let n;H(e,N,l=>s(0,n=l));async function i(){await re()}return[n,i]}class de extends U{constructor(t){super();V(this,t,ie,ae,j,{})}}export{de as C,M as c,ne as d,ue as p,se as s,T as v};
